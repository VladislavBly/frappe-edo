var R1=n=>{throw TypeError(n)};var Eg=(n,e,t)=>e.has(n)||R1("Cannot "+t);var kt=(n,e,t)=>(Eg(n,e,"read from private field"),t?t.call(n):e.get(n)),fi=(n,e,t)=>e.has(n)?R1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),is=(n,e,t,s)=>(Eg(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t),mi=(n,e,t)=>(Eg(n,e,"access private method"),t);var D1=(n,e,t,s)=>({set _(i){is(n,e,i,t)},get _(){return kt(n,e,s)}});function RO(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}function zv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var _g={exports:{}},Oc={};var M1;function DO(){if(M1)return Oc;M1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:n,type:s,key:o,ref:i!==void 0?i:null,props:a}}return Oc.Fragment=e,Oc.jsx=t,Oc.jsxs=t,Oc}var N1;function MO(){return N1||(N1=1,_g.exports=DO()),_g.exports}var g=MO(),Tg={exports:{}},Xe={};var P1;function NO(){if(P1)return Xe;P1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function b(L){return L===null||typeof L!="object"?null:(L=y&&L[y]||L["@@iterator"],typeof L=="function"?L:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function C(L,X,te){this.props=L,this.context=X,this.refs=E,this.updater=te||A}C.prototype.isReactComponent={},C.prototype.setState=function(L,X){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,X,"setState")},C.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function _(){}_.prototype=C.prototype;function T(L,X,te){this.props=L,this.context=X,this.refs=E,this.updater=te||A}var R=T.prototype=new _;R.constructor=T,S(R,C.prototype),R.isPureReactComponent=!0;var M=Array.isArray;function k(){}var N={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function j(L,X,te){var ce=te.ref;return{$$typeof:n,type:L,key:X,ref:ce!==void 0?ce:null,props:te}}function I(L,X){return j(L.type,X,L.props)}function H(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function $(L){var X={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(te){return X[te]})}var K=/\/+/g;function Z(L,X){return typeof L=="object"&&L!==null&&L.key!=null?$(""+L.key):X.toString(36)}function oe(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(k,k):(L.status="pending",L.then(function(X){L.status==="pending"&&(L.status="fulfilled",L.value=X)},function(X){L.status==="pending"&&(L.status="rejected",L.reason=X)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function F(L,X,te,ce,ye){var be=typeof L;(be==="undefined"||be==="boolean")&&(L=null);var W=!1;if(L===null)W=!0;else switch(be){case"bigint":case"string":case"number":W=!0;break;case"object":switch(L.$$typeof){case n:case e:W=!0;break;case f:return W=L._init,F(W(L._payload),X,te,ce,ye)}}if(W)return ye=ye(L),W=ce===""?"."+Z(L,0):ce,M(ye)?(te="",W!=null&&(te=W.replace(K,"$&/")+"/"),F(ye,X,te,"",function(je){return je})):ye!=null&&(H(ye)&&(ye=I(ye,te+(ye.key==null||L&&L.key===ye.key?"":(""+ye.key).replace(K,"$&/")+"/")+W)),X.push(ye)),1;W=0;var Ae=ce===""?".":ce+":";if(M(L))for(var xe=0;xe<L.length;xe++)ce=L[xe],be=Ae+Z(ce,xe),W+=F(ce,X,te,be,ye);else if(xe=b(L),typeof xe=="function")for(L=xe.call(L),xe=0;!(ce=L.next()).done;)ce=ce.value,be=Ae+Z(ce,xe++),W+=F(ce,X,te,be,ye);else if(be==="object"){if(typeof L.then=="function")return F(oe(L),X,te,ce,ye);throw X=String(L),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return W}function B(L,X,te){if(L==null)return L;var ce=[],ye=0;return F(L,ce,"","",function(be){return X.call(te,be,ye++)}),ce}function z(L){if(L._status===-1){var X=L._result;X=X(),X.then(function(te){(L._status===0||L._status===-1)&&(L._status=1,L._result=te)},function(te){(L._status===0||L._status===-1)&&(L._status=2,L._result=te)}),L._status===-1&&(L._status=0,L._result=X)}if(L._status===1)return L._result.default;throw L._result}var Q=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},me={map:B,forEach:function(L,X,te){B(L,function(){X.apply(this,arguments)},te)},count:function(L){var X=0;return B(L,function(){X++}),X},toArray:function(L){return B(L,function(X){return X})||[]},only:function(L){if(!H(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Xe.Activity=p,Xe.Children=me,Xe.Component=C,Xe.Fragment=t,Xe.Profiler=i,Xe.PureComponent=T,Xe.StrictMode=s,Xe.Suspense=d,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(L){return N.H.useMemoCache(L)}},Xe.cache=function(L){return function(){return L.apply(null,arguments)}},Xe.cacheSignal=function(){return null},Xe.cloneElement=function(L,X,te){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ce=S({},L.props),ye=L.key;if(X!=null)for(be in X.key!==void 0&&(ye=""+X.key),X)!P.call(X,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&X.ref===void 0||(ce[be]=X[be]);var be=arguments.length-2;if(be===1)ce.children=te;else if(1<be){for(var W=Array(be),Ae=0;Ae<be;Ae++)W[Ae]=arguments[Ae+2];ce.children=W}return j(L.type,ye,ce)},Xe.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:a,_context:L},L},Xe.createElement=function(L,X,te){var ce,ye={},be=null;if(X!=null)for(ce in X.key!==void 0&&(be=""+X.key),X)P.call(X,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ye[ce]=X[ce]);var W=arguments.length-2;if(W===1)ye.children=te;else if(1<W){for(var Ae=Array(W),xe=0;xe<W;xe++)Ae[xe]=arguments[xe+2];ye.children=Ae}if(L&&L.defaultProps)for(ce in W=L.defaultProps,W)ye[ce]===void 0&&(ye[ce]=W[ce]);return j(L,be,ye)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(L){return{$$typeof:c,render:L}},Xe.isValidElement=H,Xe.lazy=function(L){return{$$typeof:f,_payload:{_status:-1,_result:L},_init:z}},Xe.memo=function(L,X){return{$$typeof:h,type:L,compare:X===void 0?null:X}},Xe.startTransition=function(L){var X=N.T,te={};N.T=te;try{var ce=L(),ye=N.S;ye!==null&&ye(te,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(k,Q)}catch(be){Q(be)}finally{X!==null&&te.types!==null&&(X.types=te.types),N.T=X}},Xe.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Xe.use=function(L){return N.H.use(L)},Xe.useActionState=function(L,X,te){return N.H.useActionState(L,X,te)},Xe.useCallback=function(L,X){return N.H.useCallback(L,X)},Xe.useContext=function(L){return N.H.useContext(L)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(L,X){return N.H.useDeferredValue(L,X)},Xe.useEffect=function(L,X){return N.H.useEffect(L,X)},Xe.useEffectEvent=function(L){return N.H.useEffectEvent(L)},Xe.useId=function(){return N.H.useId()},Xe.useImperativeHandle=function(L,X,te){return N.H.useImperativeHandle(L,X,te)},Xe.useInsertionEffect=function(L,X){return N.H.useInsertionEffect(L,X)},Xe.useLayoutEffect=function(L,X){return N.H.useLayoutEffect(L,X)},Xe.useMemo=function(L,X){return N.H.useMemo(L,X)},Xe.useOptimistic=function(L,X){return N.H.useOptimistic(L,X)},Xe.useReducer=function(L,X,te){return N.H.useReducer(L,X,te)},Xe.useRef=function(L){return N.H.useRef(L)},Xe.useState=function(L){return N.H.useState(L)},Xe.useSyncExternalStore=function(L,X,te){return N.H.useSyncExternalStore(L,X,te)},Xe.useTransition=function(){return N.H.useTransition()},Xe.version="19.2.3",Xe}var k1;function Mf(){return k1||(k1=1,Tg.exports=NO()),Tg.exports}var x=Mf();const He=zv(x),Nf=RO({__proto__:null,default:He},[x]);var Rg={exports:{}},jc={},Dg={exports:{}},Mg={};var O1;function PO(){return O1||(O1=1,(function(n){function e(F,B){var z=F.length;F.push(B);e:for(;0<z;){var Q=z-1>>>1,me=F[Q];if(0<i(me,B))F[Q]=B,F[z]=me,z=Q;else break e}}function t(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var B=F[0],z=F.pop();if(z!==B){F[0]=z;e:for(var Q=0,me=F.length,L=me>>>1;Q<L;){var X=2*(Q+1)-1,te=F[X],ce=X+1,ye=F[ce];if(0>i(te,z))ce<me&&0>i(ye,te)?(F[Q]=ye,F[ce]=z,Q=ce):(F[Q]=te,F[X]=z,Q=X);else if(ce<me&&0>i(ye,z))F[Q]=ye,F[ce]=z,Q=ce;else break e}}return B}function i(F,B){var z=F.sortIndex-B.sortIndex;return z!==0?z:F.id-B.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();n.unstable_now=function(){return o.now()-c}}var d=[],h=[],f=1,p=null,y=3,b=!1,A=!1,S=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function R(F){for(var B=t(h);B!==null;){if(B.callback===null)s(h);else if(B.startTime<=F)s(h),B.sortIndex=B.expirationTime,e(d,B);else break;B=t(h)}}function M(F){if(S=!1,R(F),!A)if(t(d)!==null)A=!0,k||(k=!0,$());else{var B=t(h);B!==null&&oe(M,B.startTime-F)}}var k=!1,N=-1,P=5,j=-1;function I(){return E?!0:!(n.unstable_now()-j<P)}function H(){if(E=!1,k){var F=n.unstable_now();j=F;var B=!0;try{e:{A=!1,S&&(S=!1,_(N),N=-1),b=!0;var z=y;try{t:{for(R(F),p=t(d);p!==null&&!(p.expirationTime>F&&I());){var Q=p.callback;if(typeof Q=="function"){p.callback=null,y=p.priorityLevel;var me=Q(p.expirationTime<=F);if(F=n.unstable_now(),typeof me=="function"){p.callback=me,R(F),B=!0;break t}p===t(d)&&s(d),R(F)}else s(d);p=t(d)}if(p!==null)B=!0;else{var L=t(h);L!==null&&oe(M,L.startTime-F),B=!1}}break e}finally{p=null,y=z,b=!1}B=void 0}}finally{B?$():k=!1}}}var $;if(typeof T=="function")$=function(){T(H)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,Z=K.port2;K.port1.onmessage=H,$=function(){Z.postMessage(null)}}else $=function(){C(H,0)};function oe(F,B){N=C(function(){F(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(F){switch(y){case 1:case 2:case 3:var B=3;break;default:B=y}var z=y;y=B;try{return F()}finally{y=z}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(F,B){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var z=y;y=F;try{return B()}finally{y=z}},n.unstable_scheduleCallback=function(F,B,z){var Q=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Q+z:Q):z=Q,F){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=z+me,F={id:f++,callback:B,priorityLevel:F,startTime:z,expirationTime:me,sortIndex:-1},z>Q?(F.sortIndex=z,e(h,F),t(d)===null&&F===t(h)&&(S?(_(N),N=-1):S=!0,oe(M,z-Q))):(F.sortIndex=me,e(d,F),A||b||(A=!0,k||(k=!0,$()))),F},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(F){var B=y;return function(){var z=y;y=B;try{return F.apply(this,arguments)}finally{y=z}}}})(Mg)),Mg}var j1;function kO(){return j1||(j1=1,Dg.exports=PO()),Dg.exports}var Ng={exports:{}},Rn={};var L1;function OO(){if(L1)return Rn;L1=1;var n=Mf();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(d,h,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:d,containerInfo:h,implementation:f}}var o=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Rn.createPortal=function(d,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(d,h,null,f)},Rn.flushSync=function(d){var h=o.T,f=s.p;try{if(o.T=null,s.p=2,d)return d()}finally{o.T=h,s.p=f,s.d.f()}},Rn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(d,h))},Rn.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Rn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var f=h.as,p=c(f,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?s.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:b}):f==="script"&&s.d.X(d,{crossOrigin:p,integrity:y,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Rn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=c(h.as,h.crossOrigin);s.d.M(d,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(d)},Rn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,p=c(f,h.crossOrigin);s.d.L(d,f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Rn.preloadModule=function(d,h){if(typeof d=="string")if(h){var f=c(h.as,h.crossOrigin);s.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(d)},Rn.requestFormReset=function(d){s.d.r(d)},Rn.unstable_batchedUpdates=function(d,h){return d(h)},Rn.useFormState=function(d,h,f){return o.H.useFormState(d,h,f)},Rn.useFormStatus=function(){return o.H.useHostTransitionStatus()},Rn.version="19.2.3",Rn}var F1;function g_(){if(F1)return Ng.exports;F1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ng.exports=OO(),Ng.exports}var I1;function jO(){if(I1)return jc;I1=1;var n=kO(),e=Mf(),t=g_();function s(r){var l="https://react.dev/errors/"+r;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var l=r,u=r;if(r.alternate)for(;l.return;)l=l.return;else{r=l;do l=r,(l.flags&4098)!==0&&(u=l.return),r=l.return;while(r)}return l.tag===3?u:null}function o(r){if(r.tag===13){var l=r.memoizedState;if(l===null&&(r=r.alternate,r!==null&&(l=r.memoizedState)),l!==null)return l.dehydrated}return null}function c(r){if(r.tag===31){var l=r.memoizedState;if(l===null&&(r=r.alternate,r!==null&&(l=r.memoizedState)),l!==null)return l.dehydrated}return null}function d(r){if(a(r)!==r)throw Error(s(188))}function h(r){var l=r.alternate;if(!l){if(l=a(r),l===null)throw Error(s(188));return l!==r?null:r}for(var u=r,m=l;;){var v=u.return;if(v===null)break;var w=v.alternate;if(w===null){if(m=v.return,m!==null){u=m;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===u)return d(v),r;if(w===m)return d(v),l;w=w.sibling}throw Error(s(188))}if(u.return!==m.return)u=v,m=w;else{for(var D=!1,O=v.child;O;){if(O===u){D=!0,u=v,m=w;break}if(O===m){D=!0,m=v,u=w;break}O=O.sibling}if(!D){for(O=w.child;O;){if(O===u){D=!0,u=w,m=v;break}if(O===m){D=!0,m=w,u=v;break}O=O.sibling}if(!D)throw Error(s(189))}}if(u.alternate!==m)throw Error(s(190))}if(u.tag!==3)throw Error(s(188));return u.stateNode.current===u?r:l}function f(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r;for(r=r.child;r!==null;){if(l=f(r),l!==null)return l;r=r.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),T=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function $(r){return r===null||typeof r!="object"?null:(r=H&&r[H]||r["@@iterator"],typeof r=="function"?r:null)}var K=Symbol.for("react.client.reference");function Z(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===K?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case C:return"Profiler";case E:return"StrictMode";case M:return"Suspense";case k:return"SuspenseList";case j:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case A:return"Portal";case T:return r.displayName||"Context";case _:return(r._context.displayName||"Context")+".Consumer";case R:var l=r.render;return r=r.displayName,r||(r=l.displayName||l.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case N:return l=r.displayName||null,l!==null?l:Z(r.type)||"Memo";case P:l=r._payload,r=r._init;try{return Z(r(l))}catch{}}return null}var oe=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},Q=[],me=-1;function L(r){return{current:r}}function X(r){0>me||(r.current=Q[me],Q[me]=null,me--)}function te(r,l){me++,Q[me]=r.current,r.current=l}var ce=L(null),ye=L(null),be=L(null),W=L(null);function Ae(r,l){switch(te(be,l),te(ye,r),te(ce,null),l.nodeType){case 9:case 11:r=(r=l.documentElement)&&(r=r.namespaceURI)?QS(r):0;break;default:if(r=l.tagName,l=l.namespaceURI)l=QS(l),r=ZS(l,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}X(ce),te(ce,r)}function xe(){X(ce),X(ye),X(be)}function je(r){r.memoizedState!==null&&te(W,r);var l=ce.current,u=ZS(l,r.type);l!==u&&(te(ye,r),te(ce,u))}function we(r){ye.current===r&&(X(ce),X(ye)),W.current===r&&(X(W),Mc._currentValue=z)}var ze,se;function he(r){if(ze===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);ze=l&&l[1]||"",se=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ze+r+se}var ve=!1;function Se(r,l){if(!r||ve)return"";ve=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ae){var ne=ae}Reflect.construct(r,[],de)}else{try{de.call()}catch(ae){ne=ae}r.call(de.prototype)}}else{try{throw Error()}catch(ae){ne=ae}(de=r())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ae){if(ae&&ne&&typeof ae.stack=="string")return[ae.stack,ne.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=m.DetermineComponentFrameRoot(),D=w[0],O=w[1];if(D&&O){var V=D.split(`
`),ee=O.split(`
`);for(v=m=0;m<V.length&&!V[m].includes("DetermineComponentFrameRoot");)m++;for(;v<ee.length&&!ee[v].includes("DetermineComponentFrameRoot");)v++;if(m===V.length||v===ee.length)for(m=V.length-1,v=ee.length-1;1<=m&&0<=v&&V[m]!==ee[v];)v--;for(;1<=m&&0<=v;m--,v--)if(V[m]!==ee[v]){if(m!==1||v!==1)do if(m--,v--,0>v||V[m]!==ee[v]){var le=`
`+V[m].replace(" at new "," at ");return r.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",r.displayName)),le}while(1<=m&&0<=v);break}}}finally{ve=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?he(u):""}function Ee(r,l){switch(r.tag){case 26:case 27:case 5:return he(r.type);case 16:return he("Lazy");case 13:return r.child!==l&&l!==null?he("Suspense Fallback"):he("Suspense");case 19:return he("SuspenseList");case 0:case 15:return Se(r.type,!1);case 11:return Se(r.type.render,!1);case 1:return Se(r.type,!0);case 31:return he("Activity");default:return""}}function Ne(r){try{var l="",u=null;do l+=Ee(r,u),u=r,r=r.return;while(r);return l}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var nt=Object.prototype.hasOwnProperty,Ke=n.unstable_scheduleCallback,U=n.unstable_cancelCallback,G=n.unstable_shouldYield,ie=n.unstable_requestPaint,pe=n.unstable_now,ge=n.unstable_getCurrentPriorityLevel,fe=n.unstable_ImmediatePriority,re=n.unstable_UserBlockingPriority,Te=n.unstable_NormalPriority,qe=n.unstable_LowPriority,yt=n.unstable_IdlePriority,jn=n.log,Es=n.unstable_setDisableYieldValue,Pi=null,rn=null;function Xn(r){if(typeof jn=="function"&&Es(r),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(Pi,r)}catch{}}var vn=Math.clz32?Math.clz32:Yt,la=Math.log,_e=Math.LN2;function Yt(r){return r>>>=0,r===0?32:31-(la(r)/_e|0)|0}var Ys=256,li=262144,Wn=4194304;function ki(r){var l=r&42;if(l!==0)return l;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ed(r,l,u){var m=r.pendingLanes;if(m===0)return 0;var v=0,w=r.suspendedLanes,D=r.pingedLanes;r=r.warmLanes;var O=m&134217727;return O!==0?(m=O&~w,m!==0?v=ki(m):(D&=O,D!==0?v=ki(D):u||(u=O&~r,u!==0&&(v=ki(u))))):(O=m&~w,O!==0?v=ki(O):D!==0?v=ki(D):u||(u=m&~r,u!==0&&(v=ki(u)))),v===0?0:l!==0&&l!==v&&(l&w)===0&&(w=v&-v,u=l&-l,w>=u||w===32&&(u&4194048)!==0)?l:v}function Hl(r,l){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&l)===0}function pP(r,l){switch(r){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pb(){var r=Wn;return Wn<<=1,(Wn&62914560)===0&&(Wn=4194304),r}function fm(r){for(var l=[],u=0;31>u;u++)l.push(r);return l}function $l(r,l){r.pendingLanes|=l,l!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function gP(r,l,u,m,v,w){var D=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var O=r.entanglements,V=r.expirationTimes,ee=r.hiddenUpdates;for(u=D&~u;0<u;){var le=31-vn(u),de=1<<le;O[le]=0,V[le]=-1;var ne=ee[le];if(ne!==null)for(ee[le]=null,le=0;le<ne.length;le++){var ae=ne[le];ae!==null&&(ae.lane&=-536870913)}u&=~de}m!==0&&kb(r,m,0),w!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=w&~(D&~l))}function kb(r,l,u){r.pendingLanes|=l,r.suspendedLanes&=~l;var m=31-vn(l);r.entangledLanes|=l,r.entanglements[m]=r.entanglements[m]|1073741824|u&261930}function Ob(r,l){var u=r.entangledLanes|=l;for(r=r.entanglements;u;){var m=31-vn(u),v=1<<m;v&l|r[m]&l&&(r[m]|=l),u&=~v}}function jb(r,l){var u=l&-l;return u=(u&42)!==0?1:mm(u),(u&(r.suspendedLanes|l))!==0?0:u}function mm(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function pm(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Lb(){var r=B.p;return r!==0?r:(r=window.event,r===void 0?32:w1(r.type))}function Fb(r,l){var u=B.p;try{return B.p=r,l()}finally{B.p=u}}var yr=Math.random().toString(36).slice(2),bn="__reactFiber$"+yr,Qn="__reactProps$"+yr,co="__reactContainer$"+yr,gm="__reactEvents$"+yr,yP="__reactListeners$"+yr,vP="__reactHandles$"+yr,Ib="__reactResources$"+yr,ql="__reactMarker$"+yr;function ym(r){delete r[bn],delete r[Qn],delete r[gm],delete r[yP],delete r[vP]}function uo(r){var l=r[bn];if(l)return l;for(var u=r.parentNode;u;){if(l=u[co]||u[bn]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(r=r1(r);r!==null;){if(u=r[bn])return u;r=r1(r)}return l}r=u,u=r.parentNode}return null}function ho(r){if(r=r[bn]||r[co]){var l=r.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return r}return null}function Gl(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r.stateNode;throw Error(s(33))}function fo(r){var l=r[Ib];return l||(l=r[Ib]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function un(r){r[ql]=!0}var Bb=new Set,zb={};function ca(r,l){mo(r,l),mo(r+"Capture",l)}function mo(r,l){for(zb[r]=l,r=0;r<l.length;r++)Bb.add(l[r])}var bP=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ub={},Vb={};function xP(r){return nt.call(Vb,r)?!0:nt.call(Ub,r)?!1:bP.test(r)?Vb[r]=!0:(Ub[r]=!0,!1)}function td(r,l,u){if(xP(l))if(u===null)r.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){r.removeAttribute(l);return}}r.setAttribute(l,""+u)}}function nd(r,l,u){if(u===null)r.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttribute(l,""+u)}}function Oi(r,l,u,m){if(m===null)r.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(l,u,""+m)}}function _s(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Hb(r){var l=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function wP(r,l,u){var m=Object.getOwnPropertyDescriptor(r.constructor.prototype,l);if(!r.hasOwnProperty(l)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var v=m.get,w=m.set;return Object.defineProperty(r,l,{configurable:!0,get:function(){return v.call(this)},set:function(D){u=""+D,w.call(this,D)}}),Object.defineProperty(r,l,{enumerable:m.enumerable}),{getValue:function(){return u},setValue:function(D){u=""+D},stopTracking:function(){r._valueTracker=null,delete r[l]}}}}function vm(r){if(!r._valueTracker){var l=Hb(r)?"checked":"value";r._valueTracker=wP(r,l,""+r[l])}}function $b(r){if(!r)return!1;var l=r._valueTracker;if(!l)return!0;var u=l.getValue(),m="";return r&&(m=Hb(r)?r.checked?"true":"false":r.value),r=m,r!==u?(l.setValue(r),!0):!1}function sd(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var SP=/[\n"\\]/g;function Ts(r){return r.replace(SP,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function bm(r,l,u,m,v,w,D,O){r.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?r.type=D:r.removeAttribute("type"),l!=null?D==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+_s(l)):r.value!==""+_s(l)&&(r.value=""+_s(l)):D!=="submit"&&D!=="reset"||r.removeAttribute("value"),l!=null?xm(r,D,_s(l)):u!=null?xm(r,D,_s(u)):m!=null&&r.removeAttribute("value"),v==null&&w!=null&&(r.defaultChecked=!!w),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?r.name=""+_s(O):r.removeAttribute("name")}function qb(r,l,u,m,v,w,D,O){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.type=w),l!=null||u!=null){if(!(w!=="submit"&&w!=="reset"||l!=null)){vm(r);return}u=u!=null?""+_s(u):"",l=l!=null?""+_s(l):u,O||l===r.value||(r.value=l),r.defaultValue=l}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,r.checked=O?r.checked:!!m,r.defaultChecked=!!m,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(r.name=D),vm(r)}function xm(r,l,u){l==="number"&&sd(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function po(r,l,u,m){if(r=r.options,l){l={};for(var v=0;v<u.length;v++)l["$"+u[v]]=!0;for(u=0;u<r.length;u++)v=l.hasOwnProperty("$"+r[u].value),r[u].selected!==v&&(r[u].selected=v),v&&m&&(r[u].defaultSelected=!0)}else{for(u=""+_s(u),l=null,v=0;v<r.length;v++){if(r[v].value===u){r[v].selected=!0,m&&(r[v].defaultSelected=!0);return}l!==null||r[v].disabled||(l=r[v])}l!==null&&(l.selected=!0)}}function Gb(r,l,u){if(l!=null&&(l=""+_s(l),l!==r.value&&(r.value=l),u==null)){r.defaultValue!==l&&(r.defaultValue=l);return}r.defaultValue=u!=null?""+_s(u):""}function Kb(r,l,u,m){if(l==null){if(m!=null){if(u!=null)throw Error(s(92));if(oe(m)){if(1<m.length)throw Error(s(93));m=m[0]}u=m}u==null&&(u=""),l=u}u=_s(l),r.defaultValue=u,m=r.textContent,m===u&&m!==""&&m!==null&&(r.value=m),vm(r)}function go(r,l){if(l){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=l;return}}r.textContent=l}var AP=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yb(r,l,u){var m=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?m?r.setProperty(l,""):l==="float"?r.cssFloat="":r[l]="":m?r.setProperty(l,u):typeof u!="number"||u===0||AP.has(l)?l==="float"?r.cssFloat=u:r[l]=(""+u).trim():r[l]=u+"px"}function Xb(r,l,u){if(l!=null&&typeof l!="object")throw Error(s(62));if(r=r.style,u!=null){for(var m in u)!u.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?r.setProperty(m,""):m==="float"?r.cssFloat="":r[m]="");for(var v in l)m=l[v],l.hasOwnProperty(v)&&u[v]!==m&&Yb(r,v,m)}else for(var w in l)l.hasOwnProperty(w)&&Yb(r,w,l[w])}function wm(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var CP=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),EP=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function id(r){return EP.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ji(){}var Sm=null;function Am(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var yo=null,vo=null;function Wb(r){var l=ho(r);if(l&&(r=l.stateNode)){var u=r[Qn]||null;e:switch(r=l.stateNode,l.type){case"input":if(bm(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Ts(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var m=u[l];if(m!==r&&m.form===r.form){var v=m[Qn]||null;if(!v)throw Error(s(90));bm(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(l=0;l<u.length;l++)m=u[l],m.form===r.form&&$b(m)}break e;case"textarea":Gb(r,u.value,u.defaultValue);break e;case"select":l=u.value,l!=null&&po(r,!!u.multiple,l,!1)}}}var Cm=!1;function Qb(r,l,u){if(Cm)return r(l,u);Cm=!0;try{var m=r(l);return m}finally{if(Cm=!1,(yo!==null||vo!==null)&&(qd(),yo&&(l=yo,r=vo,vo=yo=null,Wb(l),r)))for(l=0;l<r.length;l++)Wb(r[l])}}function Kl(r,l){var u=r.stateNode;if(u===null)return null;var m=u[Qn]||null;if(m===null)return null;u=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(s(231,l,typeof u));return u}var Li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Em=!1;if(Li)try{var Yl={};Object.defineProperty(Yl,"passive",{get:function(){Em=!0}}),window.addEventListener("test",Yl,Yl),window.removeEventListener("test",Yl,Yl)}catch{Em=!1}var vr=null,_m=null,rd=null;function Zb(){if(rd)return rd;var r,l=_m,u=l.length,m,v="value"in vr?vr.value:vr.textContent,w=v.length;for(r=0;r<u&&l[r]===v[r];r++);var D=u-r;for(m=1;m<=D&&l[u-m]===v[w-m];m++);return rd=v.slice(r,1<m?1-m:void 0)}function ad(r){var l=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&l===13&&(r=13)):r=l,r===10&&(r=13),32<=r||r===13?r:0}function od(){return!0}function Jb(){return!1}function Zn(r){function l(u,m,v,w,D){this._reactName=u,this._targetInst=v,this.type=m,this.nativeEvent=w,this.target=D,this.currentTarget=null;for(var O in r)r.hasOwnProperty(O)&&(u=r[O],this[O]=u?u(w):w[O]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?od:Jb,this.isPropagationStopped=Jb,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=od)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=od)},persist:function(){},isPersistent:od}),l}var ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ld=Zn(ua),Xl=p({},ua,{view:0,detail:0}),_P=Zn(Xl),Tm,Rm,Wl,cd=p({},Xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mm,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Wl&&(Wl&&r.type==="mousemove"?(Tm=r.screenX-Wl.screenX,Rm=r.screenY-Wl.screenY):Rm=Tm=0,Wl=r),Tm)},movementY:function(r){return"movementY"in r?r.movementY:Rm}}),ex=Zn(cd),TP=p({},cd,{dataTransfer:0}),RP=Zn(TP),DP=p({},Xl,{relatedTarget:0}),Dm=Zn(DP),MP=p({},ua,{animationName:0,elapsedTime:0,pseudoElement:0}),NP=Zn(MP),PP=p({},ua,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),kP=Zn(PP),OP=p({},ua,{data:0}),tx=Zn(OP),jP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IP(r){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(r):(r=FP[r])?!!l[r]:!1}function Mm(){return IP}var BP=p({},Xl,{key:function(r){if(r.key){var l=jP[r.key]||r.key;if(l!=="Unidentified")return l}return r.type==="keypress"?(r=ad(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?LP[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mm,charCode:function(r){return r.type==="keypress"?ad(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ad(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),zP=Zn(BP),UP=p({},cd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nx=Zn(UP),VP=p({},Xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mm}),HP=Zn(VP),$P=p({},ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),qP=Zn($P),GP=p({},cd,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),KP=Zn(GP),YP=p({},ua,{newState:0,oldState:0}),XP=Zn(YP),WP=[9,13,27,32],Nm=Li&&"CompositionEvent"in window,Ql=null;Li&&"documentMode"in document&&(Ql=document.documentMode);var QP=Li&&"TextEvent"in window&&!Ql,sx=Li&&(!Nm||Ql&&8<Ql&&11>=Ql),ix=" ",rx=!1;function ax(r,l){switch(r){case"keyup":return WP.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ox(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var bo=!1;function ZP(r,l){switch(r){case"compositionend":return ox(l);case"keypress":return l.which!==32?null:(rx=!0,ix);case"textInput":return r=l.data,r===ix&&rx?null:r;default:return null}}function JP(r,l){if(bo)return r==="compositionend"||!Nm&&ax(r,l)?(r=Zb(),rd=_m=vr=null,bo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return sx&&l.locale!=="ko"?null:l.data;default:return null}}var ek={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lx(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l==="input"?!!ek[r.type]:l==="textarea"}function cx(r,l,u,m){yo?vo?vo.push(m):vo=[m]:yo=m,l=Zd(l,"onChange"),0<l.length&&(u=new ld("onChange","change",null,u,m),r.push({event:u,listeners:l}))}var Zl=null,Jl=null;function tk(r){qS(r,0)}function ud(r){var l=Gl(r);if($b(l))return r}function ux(r,l){if(r==="change")return l}var dx=!1;if(Li){var Pm;if(Li){var km="oninput"in document;if(!km){var hx=document.createElement("div");hx.setAttribute("oninput","return;"),km=typeof hx.oninput=="function"}Pm=km}else Pm=!1;dx=Pm&&(!document.documentMode||9<document.documentMode)}function fx(){Zl&&(Zl.detachEvent("onpropertychange",mx),Jl=Zl=null)}function mx(r){if(r.propertyName==="value"&&ud(Jl)){var l=[];cx(l,Jl,r,Am(r)),Qb(tk,l)}}function nk(r,l,u){r==="focusin"?(fx(),Zl=l,Jl=u,Zl.attachEvent("onpropertychange",mx)):r==="focusout"&&fx()}function sk(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ud(Jl)}function ik(r,l){if(r==="click")return ud(l)}function rk(r,l){if(r==="input"||r==="change")return ud(l)}function ak(r,l){return r===l&&(r!==0||1/r===1/l)||r!==r&&l!==l}var us=typeof Object.is=="function"?Object.is:ak;function ec(r,l){if(us(r,l))return!0;if(typeof r!="object"||r===null||typeof l!="object"||l===null)return!1;var u=Object.keys(r),m=Object.keys(l);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var v=u[m];if(!nt.call(l,v)||!us(r[v],l[v]))return!1}return!0}function px(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function gx(r,l){var u=px(r);r=0;for(var m;u;){if(u.nodeType===3){if(m=r+u.textContent.length,r<=l&&m>=l)return{node:u,offset:l-r};r=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=px(u)}}function yx(r,l){return r&&l?r===l?!0:r&&r.nodeType===3?!1:l&&l.nodeType===3?yx(r,l.parentNode):"contains"in r?r.contains(l):r.compareDocumentPosition?!!(r.compareDocumentPosition(l)&16):!1:!1}function vx(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var l=sd(r.document);l instanceof r.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)r=l.contentWindow;else break;l=sd(r.document)}return l}function Om(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l&&(l==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||l==="textarea"||r.contentEditable==="true")}var ok=Li&&"documentMode"in document&&11>=document.documentMode,xo=null,jm=null,tc=null,Lm=!1;function bx(r,l,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Lm||xo==null||xo!==sd(m)||(m=xo,"selectionStart"in m&&Om(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),tc&&ec(tc,m)||(tc=m,m=Zd(jm,"onSelect"),0<m.length&&(l=new ld("onSelect","select",null,l,u),r.push({event:l,listeners:m}),l.target=xo)))}function da(r,l){var u={};return u[r.toLowerCase()]=l.toLowerCase(),u["Webkit"+r]="webkit"+l,u["Moz"+r]="moz"+l,u}var wo={animationend:da("Animation","AnimationEnd"),animationiteration:da("Animation","AnimationIteration"),animationstart:da("Animation","AnimationStart"),transitionrun:da("Transition","TransitionRun"),transitionstart:da("Transition","TransitionStart"),transitioncancel:da("Transition","TransitionCancel"),transitionend:da("Transition","TransitionEnd")},Fm={},xx={};Li&&(xx=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function ha(r){if(Fm[r])return Fm[r];if(!wo[r])return r;var l=wo[r],u;for(u in l)if(l.hasOwnProperty(u)&&u in xx)return Fm[r]=l[u];return r}var wx=ha("animationend"),Sx=ha("animationiteration"),Ax=ha("animationstart"),lk=ha("transitionrun"),ck=ha("transitionstart"),uk=ha("transitioncancel"),Cx=ha("transitionend"),Ex=new Map,Im="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Im.push("scrollEnd");function Xs(r,l){Ex.set(r,l),ca(l,[r])}var dd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Rs=[],So=0,Bm=0;function hd(){for(var r=So,l=Bm=So=0;l<r;){var u=Rs[l];Rs[l++]=null;var m=Rs[l];Rs[l++]=null;var v=Rs[l];Rs[l++]=null;var w=Rs[l];if(Rs[l++]=null,m!==null&&v!==null){var D=m.pending;D===null?v.next=v:(v.next=D.next,D.next=v),m.pending=v}w!==0&&_x(u,v,w)}}function fd(r,l,u,m){Rs[So++]=r,Rs[So++]=l,Rs[So++]=u,Rs[So++]=m,Bm|=m,r.lanes|=m,r=r.alternate,r!==null&&(r.lanes|=m)}function zm(r,l,u,m){return fd(r,l,u,m),md(r)}function fa(r,l){return fd(r,null,null,l),md(r)}function _x(r,l,u){r.lanes|=u;var m=r.alternate;m!==null&&(m.lanes|=u);for(var v=!1,w=r.return;w!==null;)w.childLanes|=u,m=w.alternate,m!==null&&(m.childLanes|=u),w.tag===22&&(r=w.stateNode,r===null||r._visibility&1||(v=!0)),r=w,w=w.return;return r.tag===3?(w=r.stateNode,v&&l!==null&&(v=31-vn(u),r=w.hiddenUpdates,m=r[v],m===null?r[v]=[l]:m.push(l),l.lane=u|536870912),w):null}function md(r){if(50<Ac)throw Ac=0,Xp=null,Error(s(185));for(var l=r.return;l!==null;)r=l,l=r.return;return r.tag===3?r.stateNode:null}var Ao={};function dk(r,l,u,m){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(r,l,u,m){return new dk(r,l,u,m)}function Um(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Fi(r,l){var u=r.alternate;return u===null?(u=ds(r.tag,l,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=l,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,l=r.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function Tx(r,l){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=l,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,l=u.dependencies,r.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),r}function pd(r,l,u,m,v,w){var D=0;if(m=r,typeof r=="function")Um(r)&&(D=1);else if(typeof r=="string")D=gO(r,u,ce.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case j:return r=ds(31,u,l,v),r.elementType=j,r.lanes=w,r;case S:return ma(u.children,v,w,l);case E:D=8,v|=24;break;case C:return r=ds(12,u,l,v|2),r.elementType=C,r.lanes=w,r;case M:return r=ds(13,u,l,v),r.elementType=M,r.lanes=w,r;case k:return r=ds(19,u,l,v),r.elementType=k,r.lanes=w,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case T:D=10;break e;case _:D=9;break e;case R:D=11;break e;case N:D=14;break e;case P:D=16,m=null;break e}D=29,u=Error(s(130,r===null?"null":typeof r,"")),m=null}return l=ds(D,u,l,v),l.elementType=r,l.type=m,l.lanes=w,l}function ma(r,l,u,m){return r=ds(7,r,m,l),r.lanes=u,r}function Vm(r,l,u){return r=ds(6,r,null,l),r.lanes=u,r}function Rx(r){var l=ds(18,null,null,0);return l.stateNode=r,l}function Hm(r,l,u){return l=ds(4,r.children!==null?r.children:[],r.key,l),l.lanes=u,l.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},l}var Dx=new WeakMap;function Ds(r,l){if(typeof r=="object"&&r!==null){var u=Dx.get(r);return u!==void 0?u:(l={value:r,source:l,stack:Ne(l)},Dx.set(r,l),l)}return{value:r,source:l,stack:Ne(l)}}var Co=[],Eo=0,gd=null,nc=0,Ms=[],Ns=0,br=null,ci=1,ui="";function Ii(r,l){Co[Eo++]=nc,Co[Eo++]=gd,gd=r,nc=l}function Mx(r,l,u){Ms[Ns++]=ci,Ms[Ns++]=ui,Ms[Ns++]=br,br=r;var m=ci;r=ui;var v=32-vn(m)-1;m&=~(1<<v),u+=1;var w=32-vn(l)+v;if(30<w){var D=v-v%5;w=(m&(1<<D)-1).toString(32),m>>=D,v-=D,ci=1<<32-vn(l)+v|u<<v|m,ui=w+r}else ci=1<<w|u<<v|m,ui=r}function $m(r){r.return!==null&&(Ii(r,1),Mx(r,1,0))}function qm(r){for(;r===gd;)gd=Co[--Eo],Co[Eo]=null,nc=Co[--Eo],Co[Eo]=null;for(;r===br;)br=Ms[--Ns],Ms[Ns]=null,ui=Ms[--Ns],Ms[Ns]=null,ci=Ms[--Ns],Ms[Ns]=null}function Nx(r,l){Ms[Ns++]=ci,Ms[Ns++]=ui,Ms[Ns++]=br,ci=l.id,ui=l.overflow,br=r}var xn=null,Dt=null,ut=!1,xr=null,Ps=!1,Gm=Error(s(519));function wr(r){var l=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw sc(Ds(l,r)),Gm}function Px(r){var l=r.stateNode,u=r.type,m=r.memoizedProps;switch(l[bn]=r,l[Qn]=m,u){case"dialog":rt("cancel",l),rt("close",l);break;case"iframe":case"object":case"embed":rt("load",l);break;case"video":case"audio":for(u=0;u<Ec.length;u++)rt(Ec[u],l);break;case"source":rt("error",l);break;case"img":case"image":case"link":rt("error",l),rt("load",l);break;case"details":rt("toggle",l);break;case"input":rt("invalid",l),qb(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":rt("invalid",l);break;case"textarea":rt("invalid",l),Kb(l,m.value,m.defaultValue,m.children)}u=m.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||m.suppressHydrationWarning===!0||XS(l.textContent,u)?(m.popover!=null&&(rt("beforetoggle",l),rt("toggle",l)),m.onScroll!=null&&rt("scroll",l),m.onScrollEnd!=null&&rt("scrollend",l),m.onClick!=null&&(l.onclick=ji),l=!0):l=!1,l||wr(r,!0)}function kx(r){for(xn=r.return;xn;)switch(xn.tag){case 5:case 31:case 13:Ps=!1;return;case 27:case 3:Ps=!0;return;default:xn=xn.return}}function _o(r){if(r!==xn)return!1;if(!ut)return kx(r),ut=!0,!1;var l=r.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||ug(r.type,r.memoizedProps)),u=!u),u&&Dt&&wr(r),kx(r),l===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));Dt=i1(r)}else if(l===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));Dt=i1(r)}else l===27?(l=Dt,jr(r.type)?(r=pg,pg=null,Dt=r):Dt=l):Dt=xn?Os(r.stateNode.nextSibling):null;return!0}function pa(){Dt=xn=null,ut=!1}function Km(){var r=xr;return r!==null&&(ns===null?ns=r:ns.push.apply(ns,r),xr=null),r}function sc(r){xr===null?xr=[r]:xr.push(r)}var Ym=L(null),ga=null,Bi=null;function Sr(r,l,u){te(Ym,l._currentValue),l._currentValue=u}function zi(r){r._currentValue=Ym.current,X(Ym)}function Xm(r,l,u){for(;r!==null;){var m=r.alternate;if((r.childLanes&l)!==l?(r.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),r===u)break;r=r.return}}function Wm(r,l,u,m){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var w=v.dependencies;if(w!==null){var D=v.child;w=w.firstContext;e:for(;w!==null;){var O=w;w=v;for(var V=0;V<l.length;V++)if(O.context===l[V]){w.lanes|=u,O=w.alternate,O!==null&&(O.lanes|=u),Xm(w.return,u,r),m||(D=null);break e}w=O.next}}else if(v.tag===18){if(D=v.return,D===null)throw Error(s(341));D.lanes|=u,w=D.alternate,w!==null&&(w.lanes|=u),Xm(D,u,r),D=null}else D=v.child;if(D!==null)D.return=v;else for(D=v;D!==null;){if(D===r){D=null;break}if(v=D.sibling,v!==null){v.return=D.return,D=v;break}D=D.return}v=D}}function To(r,l,u,m){r=null;for(var v=l,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var D=v.alternate;if(D===null)throw Error(s(387));if(D=D.memoizedProps,D!==null){var O=v.type;us(v.pendingProps.value,D.value)||(r!==null?r.push(O):r=[O])}}else if(v===W.current){if(D=v.alternate,D===null)throw Error(s(387));D.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(Mc):r=[Mc])}v=v.return}r!==null&&Wm(l,r,u,m),l.flags|=262144}function yd(r){for(r=r.firstContext;r!==null;){if(!us(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ya(r){ga=r,Bi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function wn(r){return Ox(ga,r)}function vd(r,l){return ga===null&&ya(r),Ox(r,l)}function Ox(r,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},Bi===null){if(r===null)throw Error(s(308));Bi=l,r.dependencies={lanes:0,firstContext:l},r.flags|=524288}else Bi=Bi.next=l;return u}var hk=typeof AbortController<"u"?AbortController:function(){var r=[],l=this.signal={aborted:!1,addEventListener:function(u,m){r.push(m)}};this.abort=function(){l.aborted=!0,r.forEach(function(u){return u()})}},fk=n.unstable_scheduleCallback,mk=n.unstable_NormalPriority,Xt={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qm(){return{controller:new hk,data:new Map,refCount:0}}function ic(r){r.refCount--,r.refCount===0&&fk(mk,function(){r.controller.abort()})}var rc=null,Zm=0,Ro=0,Do=null;function pk(r,l){if(rc===null){var u=rc=[];Zm=0,Ro=tg(),Do={status:"pending",value:void 0,then:function(m){u.push(m)}}}return Zm++,l.then(jx,jx),l}function jx(){if(--Zm===0&&rc!==null){Do!==null&&(Do.status="fulfilled");var r=rc;rc=null,Ro=0,Do=null;for(var l=0;l<r.length;l++)(0,r[l])()}}function gk(r,l){var u=[],m={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return r.then(function(){m.status="fulfilled",m.value=l;for(var v=0;v<u.length;v++)(0,u[v])(l)},function(v){for(m.status="rejected",m.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),m}var Lx=F.S;F.S=function(r,l){bS=pe(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&pk(r,l),Lx!==null&&Lx(r,l)};var va=L(null);function Jm(){var r=va.current;return r!==null?r:Ct.pooledCache}function bd(r,l){l===null?te(va,va.current):te(va,l.pool)}function Fx(){var r=Jm();return r===null?null:{parent:Xt._currentValue,pool:r}}var Mo=Error(s(460)),ep=Error(s(474)),xd=Error(s(542)),wd={then:function(){}};function Ix(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Bx(r,l,u){switch(u=r[u],u===void 0?r.push(l):u!==l&&(l.then(ji,ji),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,Ux(r),r;default:if(typeof l.status=="string")l.then(ji,ji);else{if(r=Ct,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=l,r.status="pending",r.then(function(m){if(l.status==="pending"){var v=l;v.status="fulfilled",v.value=m}},function(m){if(l.status==="pending"){var v=l;v.status="rejected",v.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,Ux(r),r}throw xa=l,Mo}}function ba(r){try{var l=r._init;return l(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(xa=u,Mo):u}}var xa=null;function zx(){if(xa===null)throw Error(s(459));var r=xa;return xa=null,r}function Ux(r){if(r===Mo||r===xd)throw Error(s(483))}var No=null,ac=0;function Sd(r){var l=ac;return ac+=1,No===null&&(No=[]),Bx(No,r,l)}function oc(r,l){l=l.props.ref,r.ref=l!==void 0?l:null}function Ad(r,l){throw l.$$typeof===y?Error(s(525)):(r=Object.prototype.toString.call(l),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":r)))}function Vx(r){function l(Y,q){if(r){var J=Y.deletions;J===null?(Y.deletions=[q],Y.flags|=16):J.push(q)}}function u(Y,q){if(!r)return null;for(;q!==null;)l(Y,q),q=q.sibling;return null}function m(Y){for(var q=new Map;Y!==null;)Y.key!==null?q.set(Y.key,Y):q.set(Y.index,Y),Y=Y.sibling;return q}function v(Y,q){return Y=Fi(Y,q),Y.index=0,Y.sibling=null,Y}function w(Y,q,J){return Y.index=J,r?(J=Y.alternate,J!==null?(J=J.index,J<q?(Y.flags|=67108866,q):J):(Y.flags|=67108866,q)):(Y.flags|=1048576,q)}function D(Y){return r&&Y.alternate===null&&(Y.flags|=67108866),Y}function O(Y,q,J,ue){return q===null||q.tag!==6?(q=Vm(J,Y.mode,ue),q.return=Y,q):(q=v(q,J),q.return=Y,q)}function V(Y,q,J,ue){var Ie=J.type;return Ie===S?le(Y,q,J.props.children,ue,J.key):q!==null&&(q.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===P&&ba(Ie)===q.type)?(q=v(q,J.props),oc(q,J),q.return=Y,q):(q=pd(J.type,J.key,J.props,null,Y.mode,ue),oc(q,J),q.return=Y,q)}function ee(Y,q,J,ue){return q===null||q.tag!==4||q.stateNode.containerInfo!==J.containerInfo||q.stateNode.implementation!==J.implementation?(q=Hm(J,Y.mode,ue),q.return=Y,q):(q=v(q,J.children||[]),q.return=Y,q)}function le(Y,q,J,ue,Ie){return q===null||q.tag!==7?(q=ma(J,Y.mode,ue,Ie),q.return=Y,q):(q=v(q,J),q.return=Y,q)}function de(Y,q,J){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Vm(""+q,Y.mode,J),q.return=Y,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case b:return J=pd(q.type,q.key,q.props,null,Y.mode,J),oc(J,q),J.return=Y,J;case A:return q=Hm(q,Y.mode,J),q.return=Y,q;case P:return q=ba(q),de(Y,q,J)}if(oe(q)||$(q))return q=ma(q,Y.mode,J,null),q.return=Y,q;if(typeof q.then=="function")return de(Y,Sd(q),J);if(q.$$typeof===T)return de(Y,vd(Y,q),J);Ad(Y,q)}return null}function ne(Y,q,J,ue){var Ie=q!==null?q.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Ie!==null?null:O(Y,q,""+J,ue);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b:return J.key===Ie?V(Y,q,J,ue):null;case A:return J.key===Ie?ee(Y,q,J,ue):null;case P:return J=ba(J),ne(Y,q,J,ue)}if(oe(J)||$(J))return Ie!==null?null:le(Y,q,J,ue,null);if(typeof J.then=="function")return ne(Y,q,Sd(J),ue);if(J.$$typeof===T)return ne(Y,q,vd(Y,J),ue);Ad(Y,J)}return null}function ae(Y,q,J,ue,Ie){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return Y=Y.get(J)||null,O(q,Y,""+ue,Ie);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case b:return Y=Y.get(ue.key===null?J:ue.key)||null,V(q,Y,ue,Ie);case A:return Y=Y.get(ue.key===null?J:ue.key)||null,ee(q,Y,ue,Ie);case P:return ue=ba(ue),ae(Y,q,J,ue,Ie)}if(oe(ue)||$(ue))return Y=Y.get(J)||null,le(q,Y,ue,Ie,null);if(typeof ue.then=="function")return ae(Y,q,J,Sd(ue),Ie);if(ue.$$typeof===T)return ae(Y,q,J,vd(q,ue),Ie);Ad(q,ue)}return null}function Me(Y,q,J,ue){for(var Ie=null,mt=null,Le=q,et=q=0,lt=null;Le!==null&&et<J.length;et++){Le.index>et?(lt=Le,Le=null):lt=Le.sibling;var pt=ne(Y,Le,J[et],ue);if(pt===null){Le===null&&(Le=lt);break}r&&Le&&pt.alternate===null&&l(Y,Le),q=w(pt,q,et),mt===null?Ie=pt:mt.sibling=pt,mt=pt,Le=lt}if(et===J.length)return u(Y,Le),ut&&Ii(Y,et),Ie;if(Le===null){for(;et<J.length;et++)Le=de(Y,J[et],ue),Le!==null&&(q=w(Le,q,et),mt===null?Ie=Le:mt.sibling=Le,mt=Le);return ut&&Ii(Y,et),Ie}for(Le=m(Le);et<J.length;et++)lt=ae(Le,Y,et,J[et],ue),lt!==null&&(r&&lt.alternate!==null&&Le.delete(lt.key===null?et:lt.key),q=w(lt,q,et),mt===null?Ie=lt:mt.sibling=lt,mt=lt);return r&&Le.forEach(function(zr){return l(Y,zr)}),ut&&Ii(Y,et),Ie}function Ue(Y,q,J,ue){if(J==null)throw Error(s(151));for(var Ie=null,mt=null,Le=q,et=q=0,lt=null,pt=J.next();Le!==null&&!pt.done;et++,pt=J.next()){Le.index>et?(lt=Le,Le=null):lt=Le.sibling;var zr=ne(Y,Le,pt.value,ue);if(zr===null){Le===null&&(Le=lt);break}r&&Le&&zr.alternate===null&&l(Y,Le),q=w(zr,q,et),mt===null?Ie=zr:mt.sibling=zr,mt=zr,Le=lt}if(pt.done)return u(Y,Le),ut&&Ii(Y,et),Ie;if(Le===null){for(;!pt.done;et++,pt=J.next())pt=de(Y,pt.value,ue),pt!==null&&(q=w(pt,q,et),mt===null?Ie=pt:mt.sibling=pt,mt=pt);return ut&&Ii(Y,et),Ie}for(Le=m(Le);!pt.done;et++,pt=J.next())pt=ae(Le,Y,et,pt.value,ue),pt!==null&&(r&&pt.alternate!==null&&Le.delete(pt.key===null?et:pt.key),q=w(pt,q,et),mt===null?Ie=pt:mt.sibling=pt,mt=pt);return r&&Le.forEach(function(TO){return l(Y,TO)}),ut&&Ii(Y,et),Ie}function St(Y,q,J,ue){if(typeof J=="object"&&J!==null&&J.type===S&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case b:e:{for(var Ie=J.key;q!==null;){if(q.key===Ie){if(Ie=J.type,Ie===S){if(q.tag===7){u(Y,q.sibling),ue=v(q,J.props.children),ue.return=Y,Y=ue;break e}}else if(q.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===P&&ba(Ie)===q.type){u(Y,q.sibling),ue=v(q,J.props),oc(ue,J),ue.return=Y,Y=ue;break e}u(Y,q);break}else l(Y,q);q=q.sibling}J.type===S?(ue=ma(J.props.children,Y.mode,ue,J.key),ue.return=Y,Y=ue):(ue=pd(J.type,J.key,J.props,null,Y.mode,ue),oc(ue,J),ue.return=Y,Y=ue)}return D(Y);case A:e:{for(Ie=J.key;q!==null;){if(q.key===Ie)if(q.tag===4&&q.stateNode.containerInfo===J.containerInfo&&q.stateNode.implementation===J.implementation){u(Y,q.sibling),ue=v(q,J.children||[]),ue.return=Y,Y=ue;break e}else{u(Y,q);break}else l(Y,q);q=q.sibling}ue=Hm(J,Y.mode,ue),ue.return=Y,Y=ue}return D(Y);case P:return J=ba(J),St(Y,q,J,ue)}if(oe(J))return Me(Y,q,J,ue);if($(J)){if(Ie=$(J),typeof Ie!="function")throw Error(s(150));return J=Ie.call(J),Ue(Y,q,J,ue)}if(typeof J.then=="function")return St(Y,q,Sd(J),ue);if(J.$$typeof===T)return St(Y,q,vd(Y,J),ue);Ad(Y,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,q!==null&&q.tag===6?(u(Y,q.sibling),ue=v(q,J),ue.return=Y,Y=ue):(u(Y,q),ue=Vm(J,Y.mode,ue),ue.return=Y,Y=ue),D(Y)):u(Y,q)}return function(Y,q,J,ue){try{ac=0;var Ie=St(Y,q,J,ue);return No=null,Ie}catch(Le){if(Le===Mo||Le===xd)throw Le;var mt=ds(29,Le,null,Y.mode);return mt.lanes=ue,mt.return=Y,mt}}}var wa=Vx(!0),Hx=Vx(!1),Ar=!1;function tp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function np(r,l){r=r.updateQueue,l.updateQueue===r&&(l.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Cr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Er(r,l,u){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(gt&2)!==0){var v=m.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),m.pending=l,l=md(r),_x(r,null,u),l}return fd(r,m,l,u),md(r)}function lc(r,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var m=l.lanes;m&=r.pendingLanes,u|=m,l.lanes=u,Ob(r,u)}}function sp(r,l){var u=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var v=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var D={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};w===null?v=w=D:w=w.next=D,u=u.next}while(u!==null);w===null?v=w=l:w=w.next=l}else v=w=l;u={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:m.shared,callbacks:m.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=l:r.next=l,u.lastBaseUpdate=l}var ip=!1;function cc(){if(ip){var r=Do;if(r!==null)throw r}}function uc(r,l,u,m){ip=!1;var v=r.updateQueue;Ar=!1;var w=v.firstBaseUpdate,D=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var V=O,ee=V.next;V.next=null,D===null?w=ee:D.next=ee,D=V;var le=r.alternate;le!==null&&(le=le.updateQueue,O=le.lastBaseUpdate,O!==D&&(O===null?le.firstBaseUpdate=ee:O.next=ee,le.lastBaseUpdate=V))}if(w!==null){var de=v.baseState;D=0,le=ee=V=null,O=w;do{var ne=O.lane&-536870913,ae=ne!==O.lane;if(ae?(ot&ne)===ne:(m&ne)===ne){ne!==0&&ne===Ro&&(ip=!0),le!==null&&(le=le.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Me=r,Ue=O;ne=l;var St=u;switch(Ue.tag){case 1:if(Me=Ue.payload,typeof Me=="function"){de=Me.call(St,de,ne);break e}de=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Ue.payload,ne=typeof Me=="function"?Me.call(St,de,ne):Me,ne==null)break e;de=p({},de,ne);break e;case 2:Ar=!0}}ne=O.callback,ne!==null&&(r.flags|=64,ae&&(r.flags|=8192),ae=v.callbacks,ae===null?v.callbacks=[ne]:ae.push(ne))}else ae={lane:ne,tag:O.tag,payload:O.payload,callback:O.callback,next:null},le===null?(ee=le=ae,V=de):le=le.next=ae,D|=ne;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;ae=O,O=ae.next,ae.next=null,v.lastBaseUpdate=ae,v.shared.pending=null}}while(!0);le===null&&(V=de),v.baseState=V,v.firstBaseUpdate=ee,v.lastBaseUpdate=le,w===null&&(v.shared.lanes=0),Mr|=D,r.lanes=D,r.memoizedState=de}}function $x(r,l){if(typeof r!="function")throw Error(s(191,r));r.call(l)}function qx(r,l){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)$x(u[r],l)}var Po=L(null),Cd=L(0);function Gx(r,l){r=Xi,te(Cd,r),te(Po,l),Xi=r|l.baseLanes}function rp(){te(Cd,Xi),te(Po,Po.current)}function ap(){Xi=Cd.current,X(Po),X(Cd)}var hs=L(null),ks=null;function _r(r){var l=r.alternate;te($t,$t.current&1),te(hs,r),ks===null&&(l===null||Po.current!==null||l.memoizedState!==null)&&(ks=r)}function op(r){te($t,$t.current),te(hs,r),ks===null&&(ks=r)}function Kx(r){r.tag===22?(te($t,$t.current),te(hs,r),ks===null&&(ks=r)):Tr()}function Tr(){te($t,$t.current),te(hs,hs.current)}function fs(r){X(hs),ks===r&&(ks=null),X($t)}var $t=L(0);function Ed(r){for(var l=r;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||fg(u)||mg(u)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Ui=0,Je=null,xt=null,Wt=null,_d=!1,ko=!1,Sa=!1,Td=0,dc=0,Oo=null,yk=0;function Ut(){throw Error(s(321))}function lp(r,l){if(l===null)return!1;for(var u=0;u<l.length&&u<r.length;u++)if(!us(r[u],l[u]))return!1;return!0}function cp(r,l,u,m,v,w){return Ui=w,Je=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,F.H=r===null||r.memoizedState===null?Mw:Cp,Sa=!1,w=u(m,v),Sa=!1,ko&&(w=Xx(l,u,m,v)),Yx(r),w}function Yx(r){F.H=mc;var l=xt!==null&&xt.next!==null;if(Ui=0,Wt=xt=Je=null,_d=!1,dc=0,Oo=null,l)throw Error(s(300));r===null||Qt||(r=r.dependencies,r!==null&&yd(r)&&(Qt=!0))}function Xx(r,l,u,m){Je=r;var v=0;do{if(ko&&(Oo=null),dc=0,ko=!1,25<=v)throw Error(s(301));if(v+=1,Wt=xt=null,r.updateQueue!=null){var w=r.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}F.H=Nw,w=l(u,m)}while(ko);return w}function vk(){var r=F.H,l=r.useState()[0];return l=typeof l.then=="function"?hc(l):l,r=r.useState()[0],(xt!==null?xt.memoizedState:null)!==r&&(Je.flags|=1024),l}function up(){var r=Td!==0;return Td=0,r}function dp(r,l,u){l.updateQueue=r.updateQueue,l.flags&=-2053,r.lanes&=~u}function hp(r){if(_d){for(r=r.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}_d=!1}Ui=0,Wt=xt=Je=null,ko=!1,dc=Td=0,Oo=null}function Ln(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?Je.memoizedState=Wt=r:Wt=Wt.next=r,Wt}function qt(){if(xt===null){var r=Je.alternate;r=r!==null?r.memoizedState:null}else r=xt.next;var l=Wt===null?Je.memoizedState:Wt.next;if(l!==null)Wt=l,xt=r;else{if(r===null)throw Je.alternate===null?Error(s(467)):Error(s(310));xt=r,r={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Wt===null?Je.memoizedState=Wt=r:Wt=Wt.next=r}return Wt}function Rd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hc(r){var l=dc;return dc+=1,Oo===null&&(Oo=[]),r=Bx(Oo,r,l),l=Je,(Wt===null?l.memoizedState:Wt.next)===null&&(l=l.alternate,F.H=l===null||l.memoizedState===null?Mw:Cp),r}function Dd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return hc(r);if(r.$$typeof===T)return wn(r)}throw Error(s(438,String(r)))}function fp(r){var l=null,u=Je.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var m=Je.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(v){return v.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=Rd(),Je.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(r),m=0;m<r;m++)u[m]=I;return l.index++,u}function Vi(r,l){return typeof l=="function"?l(r):l}function Md(r){var l=qt();return mp(l,xt,r)}function mp(r,l,u){var m=r.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=u;var v=r.baseQueue,w=m.pending;if(w!==null){if(v!==null){var D=v.next;v.next=w.next,w.next=D}l.baseQueue=v=w,m.pending=null}if(w=r.baseState,v===null)r.memoizedState=w;else{l=v.next;var O=D=null,V=null,ee=l,le=!1;do{var de=ee.lane&-536870913;if(de!==ee.lane?(ot&de)===de:(Ui&de)===de){var ne=ee.revertLane;if(ne===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),de===Ro&&(le=!0);else if((Ui&ne)===ne){ee=ee.next,ne===Ro&&(le=!0);continue}else de={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},V===null?(O=V=de,D=w):V=V.next=de,Je.lanes|=ne,Mr|=ne;de=ee.action,Sa&&u(w,de),w=ee.hasEagerState?ee.eagerState:u(w,de)}else ne={lane:de,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},V===null?(O=V=ne,D=w):V=V.next=ne,Je.lanes|=de,Mr|=de;ee=ee.next}while(ee!==null&&ee!==l);if(V===null?D=w:V.next=O,!us(w,r.memoizedState)&&(Qt=!0,le&&(u=Do,u!==null)))throw u;r.memoizedState=w,r.baseState=D,r.baseQueue=V,m.lastRenderedState=w}return v===null&&(m.lanes=0),[r.memoizedState,m.dispatch]}function pp(r){var l=qt(),u=l.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=r;var m=u.dispatch,v=u.pending,w=l.memoizedState;if(v!==null){u.pending=null;var D=v=v.next;do w=r(w,D.action),D=D.next;while(D!==v);us(w,l.memoizedState)||(Qt=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),u.lastRenderedState=w}return[w,m]}function Wx(r,l,u){var m=Je,v=qt(),w=ut;if(w){if(u===void 0)throw Error(s(407));u=u()}else u=l();var D=!us((xt||v).memoizedState,u);if(D&&(v.memoizedState=u,Qt=!0),v=v.queue,vp(Jx.bind(null,m,v,r),[r]),v.getSnapshot!==l||D||Wt!==null&&Wt.memoizedState.tag&1){if(m.flags|=2048,jo(9,{destroy:void 0},Zx.bind(null,m,v,u,l),null),Ct===null)throw Error(s(349));w||(Ui&127)!==0||Qx(m,l,u)}return u}function Qx(r,l,u){r.flags|=16384,r={getSnapshot:l,value:u},l=Je.updateQueue,l===null?(l=Rd(),Je.updateQueue=l,l.stores=[r]):(u=l.stores,u===null?l.stores=[r]:u.push(r))}function Zx(r,l,u,m){l.value=u,l.getSnapshot=m,ew(l)&&tw(r)}function Jx(r,l,u){return u(function(){ew(l)&&tw(r)})}function ew(r){var l=r.getSnapshot;r=r.value;try{var u=l();return!us(r,u)}catch{return!0}}function tw(r){var l=fa(r,2);l!==null&&ss(l,r,2)}function gp(r){var l=Ln();if(typeof r=="function"){var u=r;if(r=u(),Sa){Xn(!0);try{u()}finally{Xn(!1)}}}return l.memoizedState=l.baseState=r,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:r},l}function nw(r,l,u,m){return r.baseState=u,mp(r,xt,typeof m=="function"?m:Vi)}function bk(r,l,u,m,v){if(kd(r))throw Error(s(485));if(r=l.action,r!==null){var w={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){w.listeners.push(D)}};F.T!==null?u(!0):w.isTransition=!1,m(w),u=l.pending,u===null?(w.next=l.pending=w,sw(l,w)):(w.next=u.next,l.pending=u.next=w)}}function sw(r,l){var u=l.action,m=l.payload,v=r.state;if(l.isTransition){var w=F.T,D={};F.T=D;try{var O=u(v,m),V=F.S;V!==null&&V(D,O),iw(r,l,O)}catch(ee){yp(r,l,ee)}finally{w!==null&&D.types!==null&&(w.types=D.types),F.T=w}}else try{w=u(v,m),iw(r,l,w)}catch(ee){yp(r,l,ee)}}function iw(r,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(m){rw(r,l,m)},function(m){return yp(r,l,m)}):rw(r,l,u)}function rw(r,l,u){l.status="fulfilled",l.value=u,aw(l),r.state=u,l=r.pending,l!==null&&(u=l.next,u===l?r.pending=null:(u=u.next,l.next=u,sw(r,u)))}function yp(r,l,u){var m=r.pending;if(r.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=u,aw(l),l=l.next;while(l!==m)}r.action=null}function aw(r){r=r.listeners;for(var l=0;l<r.length;l++)(0,r[l])()}function ow(r,l){return l}function lw(r,l){if(ut){var u=Ct.formState;if(u!==null){e:{var m=Je;if(ut){if(Dt){t:{for(var v=Dt,w=Ps;v.nodeType!==8;){if(!w){v=null;break t}if(v=Os(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){Dt=Os(v.nextSibling),m=v.data==="F!";break e}}wr(m)}m=!1}m&&(l=u[0])}}return u=Ln(),u.memoizedState=u.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ow,lastRenderedState:l},u.queue=m,u=Tw.bind(null,Je,m),m.dispatch=u,m=gp(!1),w=Ap.bind(null,Je,!1,m.queue),m=Ln(),v={state:l,dispatch:null,action:r,pending:null},m.queue=v,u=bk.bind(null,Je,v,w,u),v.dispatch=u,m.memoizedState=r,[l,u,!1]}function cw(r){var l=qt();return uw(l,xt,r)}function uw(r,l,u){if(l=mp(r,l,ow)[0],r=Md(Vi)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=hc(l)}catch(D){throw D===Mo?xd:D}else m=l;l=qt();var v=l.queue,w=v.dispatch;return u!==l.memoizedState&&(Je.flags|=2048,jo(9,{destroy:void 0},xk.bind(null,v,u),null)),[m,w,r]}function xk(r,l){r.action=l}function dw(r){var l=qt(),u=xt;if(u!==null)return uw(l,u,r);qt(),l=l.memoizedState,u=qt();var m=u.queue.dispatch;return u.memoizedState=r,[l,m,!1]}function jo(r,l,u,m){return r={tag:r,create:u,deps:m,inst:l,next:null},l=Je.updateQueue,l===null&&(l=Rd(),Je.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=r.next=r:(m=u.next,u.next=r,r.next=m,l.lastEffect=r),r}function hw(){return qt().memoizedState}function Nd(r,l,u,m){var v=Ln();Je.flags|=r,v.memoizedState=jo(1|l,{destroy:void 0},u,m===void 0?null:m)}function Pd(r,l,u,m){var v=qt();m=m===void 0?null:m;var w=v.memoizedState.inst;xt!==null&&m!==null&&lp(m,xt.memoizedState.deps)?v.memoizedState=jo(l,w,u,m):(Je.flags|=r,v.memoizedState=jo(1|l,w,u,m))}function fw(r,l){Nd(8390656,8,r,l)}function vp(r,l){Pd(2048,8,r,l)}function wk(r){Je.flags|=4;var l=Je.updateQueue;if(l===null)l=Rd(),Je.updateQueue=l,l.events=[r];else{var u=l.events;u===null?l.events=[r]:u.push(r)}}function mw(r){var l=qt().memoizedState;return wk({ref:l,nextImpl:r}),function(){if((gt&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}function pw(r,l){return Pd(4,2,r,l)}function gw(r,l){return Pd(4,4,r,l)}function yw(r,l){if(typeof l=="function"){r=r();var u=l(r);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return r=r(),l.current=r,function(){l.current=null}}function vw(r,l,u){u=u!=null?u.concat([r]):null,Pd(4,4,yw.bind(null,l,r),u)}function bp(){}function bw(r,l){var u=qt();l=l===void 0?null:l;var m=u.memoizedState;return l!==null&&lp(l,m[1])?m[0]:(u.memoizedState=[r,l],r)}function xw(r,l){var u=qt();l=l===void 0?null:l;var m=u.memoizedState;if(l!==null&&lp(l,m[1]))return m[0];if(m=r(),Sa){Xn(!0);try{r()}finally{Xn(!1)}}return u.memoizedState=[m,l],m}function xp(r,l,u){return u===void 0||(Ui&1073741824)!==0&&(ot&261930)===0?r.memoizedState=l:(r.memoizedState=u,r=wS(),Je.lanes|=r,Mr|=r,u)}function ww(r,l,u,m){return us(u,l)?u:Po.current!==null?(r=xp(r,u,m),us(r,l)||(Qt=!0),r):(Ui&42)===0||(Ui&1073741824)!==0&&(ot&261930)===0?(Qt=!0,r.memoizedState=u):(r=wS(),Je.lanes|=r,Mr|=r,l)}function Sw(r,l,u,m,v){var w=B.p;B.p=w!==0&&8>w?w:8;var D=F.T,O={};F.T=O,Ap(r,!1,l,u);try{var V=v(),ee=F.S;if(ee!==null&&ee(O,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var le=gk(V,m);fc(r,l,le,gs(r))}else fc(r,l,m,gs(r))}catch(de){fc(r,l,{then:function(){},status:"rejected",reason:de},gs())}finally{B.p=w,D!==null&&O.types!==null&&(D.types=O.types),F.T=D}}function Sk(){}function wp(r,l,u,m){if(r.tag!==5)throw Error(s(476));var v=Aw(r).queue;Sw(r,v,l,z,u===null?Sk:function(){return Cw(r),u(m)})}function Aw(r){var l=r.memoizedState;if(l!==null)return l;l={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:z},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:u},next:null},r.memoizedState=l,r=r.alternate,r!==null&&(r.memoizedState=l),l}function Cw(r){var l=Aw(r);l.next===null&&(l=r.alternate.memoizedState),fc(r,l.next.queue,{},gs())}function Sp(){return wn(Mc)}function Ew(){return qt().memoizedState}function _w(){return qt().memoizedState}function Ak(r){for(var l=r.return;l!==null;){switch(l.tag){case 24:case 3:var u=gs();r=Cr(u);var m=Er(l,r,u);m!==null&&(ss(m,l,u),lc(m,l,u)),l={cache:Qm()},r.payload=l;return}l=l.return}}function Ck(r,l,u){var m=gs();u={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},kd(r)?Rw(l,u):(u=zm(r,l,u,m),u!==null&&(ss(u,r,m),Dw(u,l,m)))}function Tw(r,l,u){var m=gs();fc(r,l,u,m)}function fc(r,l,u,m){var v={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(kd(r))Rw(l,v);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var D=l.lastRenderedState,O=w(D,u);if(v.hasEagerState=!0,v.eagerState=O,us(O,D))return fd(r,l,v,0),Ct===null&&hd(),!1}catch{}if(u=zm(r,l,v,m),u!==null)return ss(u,r,m),Dw(u,l,m),!0}return!1}function Ap(r,l,u,m){if(m={lane:2,revertLane:tg(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},kd(r)){if(l)throw Error(s(479))}else l=zm(r,u,m,2),l!==null&&ss(l,r,2)}function kd(r){var l=r.alternate;return r===Je||l!==null&&l===Je}function Rw(r,l){ko=_d=!0;var u=r.pending;u===null?l.next=l:(l.next=u.next,u.next=l),r.pending=l}function Dw(r,l,u){if((u&4194048)!==0){var m=l.lanes;m&=r.pendingLanes,u|=m,l.lanes=u,Ob(r,u)}}var mc={readContext:wn,use:Dd,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut};mc.useEffectEvent=Ut;var Mw={readContext:wn,use:Dd,useCallback:function(r,l){return Ln().memoizedState=[r,l===void 0?null:l],r},useContext:wn,useEffect:fw,useImperativeHandle:function(r,l,u){u=u!=null?u.concat([r]):null,Nd(4194308,4,yw.bind(null,l,r),u)},useLayoutEffect:function(r,l){return Nd(4194308,4,r,l)},useInsertionEffect:function(r,l){Nd(4,2,r,l)},useMemo:function(r,l){var u=Ln();l=l===void 0?null:l;var m=r();if(Sa){Xn(!0);try{r()}finally{Xn(!1)}}return u.memoizedState=[m,l],m},useReducer:function(r,l,u){var m=Ln();if(u!==void 0){var v=u(l);if(Sa){Xn(!0);try{u(l)}finally{Xn(!1)}}}else v=l;return m.memoizedState=m.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},m.queue=r,r=r.dispatch=Ck.bind(null,Je,r),[m.memoizedState,r]},useRef:function(r){var l=Ln();return r={current:r},l.memoizedState=r},useState:function(r){r=gp(r);var l=r.queue,u=Tw.bind(null,Je,l);return l.dispatch=u,[r.memoizedState,u]},useDebugValue:bp,useDeferredValue:function(r,l){var u=Ln();return xp(u,r,l)},useTransition:function(){var r=gp(!1);return r=Sw.bind(null,Je,r.queue,!0,!1),Ln().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,l,u){var m=Je,v=Ln();if(ut){if(u===void 0)throw Error(s(407));u=u()}else{if(u=l(),Ct===null)throw Error(s(349));(ot&127)!==0||Qx(m,l,u)}v.memoizedState=u;var w={value:u,getSnapshot:l};return v.queue=w,fw(Jx.bind(null,m,w,r),[r]),m.flags|=2048,jo(9,{destroy:void 0},Zx.bind(null,m,w,u,l),null),u},useId:function(){var r=Ln(),l=Ct.identifierPrefix;if(ut){var u=ui,m=ci;u=(m&~(1<<32-vn(m)-1)).toString(32)+u,l="_"+l+"R_"+u,u=Td++,0<u&&(l+="H"+u.toString(32)),l+="_"}else u=yk++,l="_"+l+"r_"+u.toString(32)+"_";return r.memoizedState=l},useHostTransitionStatus:Sp,useFormState:lw,useActionState:lw,useOptimistic:function(r){var l=Ln();l.memoizedState=l.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=Ap.bind(null,Je,!0,u),u.dispatch=l,[r,l]},useMemoCache:fp,useCacheRefresh:function(){return Ln().memoizedState=Ak.bind(null,Je)},useEffectEvent:function(r){var l=Ln(),u={impl:r};return l.memoizedState=u,function(){if((gt&2)!==0)throw Error(s(440));return u.impl.apply(void 0,arguments)}}},Cp={readContext:wn,use:Dd,useCallback:bw,useContext:wn,useEffect:vp,useImperativeHandle:vw,useInsertionEffect:pw,useLayoutEffect:gw,useMemo:xw,useReducer:Md,useRef:hw,useState:function(){return Md(Vi)},useDebugValue:bp,useDeferredValue:function(r,l){var u=qt();return ww(u,xt.memoizedState,r,l)},useTransition:function(){var r=Md(Vi)[0],l=qt().memoizedState;return[typeof r=="boolean"?r:hc(r),l]},useSyncExternalStore:Wx,useId:Ew,useHostTransitionStatus:Sp,useFormState:cw,useActionState:cw,useOptimistic:function(r,l){var u=qt();return nw(u,xt,r,l)},useMemoCache:fp,useCacheRefresh:_w};Cp.useEffectEvent=mw;var Nw={readContext:wn,use:Dd,useCallback:bw,useContext:wn,useEffect:vp,useImperativeHandle:vw,useInsertionEffect:pw,useLayoutEffect:gw,useMemo:xw,useReducer:pp,useRef:hw,useState:function(){return pp(Vi)},useDebugValue:bp,useDeferredValue:function(r,l){var u=qt();return xt===null?xp(u,r,l):ww(u,xt.memoizedState,r,l)},useTransition:function(){var r=pp(Vi)[0],l=qt().memoizedState;return[typeof r=="boolean"?r:hc(r),l]},useSyncExternalStore:Wx,useId:Ew,useHostTransitionStatus:Sp,useFormState:dw,useActionState:dw,useOptimistic:function(r,l){var u=qt();return xt!==null?nw(u,xt,r,l):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:fp,useCacheRefresh:_w};Nw.useEffectEvent=mw;function Ep(r,l,u,m){l=r.memoizedState,u=u(m,l),u=u==null?l:p({},l,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var _p={enqueueSetState:function(r,l,u){r=r._reactInternals;var m=gs(),v=Cr(m);v.payload=l,u!=null&&(v.callback=u),l=Er(r,v,m),l!==null&&(ss(l,r,m),lc(l,r,m))},enqueueReplaceState:function(r,l,u){r=r._reactInternals;var m=gs(),v=Cr(m);v.tag=1,v.payload=l,u!=null&&(v.callback=u),l=Er(r,v,m),l!==null&&(ss(l,r,m),lc(l,r,m))},enqueueForceUpdate:function(r,l){r=r._reactInternals;var u=gs(),m=Cr(u);m.tag=2,l!=null&&(m.callback=l),l=Er(r,m,u),l!==null&&(ss(l,r,u),lc(l,r,u))}};function Pw(r,l,u,m,v,w,D){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,w,D):l.prototype&&l.prototype.isPureReactComponent?!ec(u,m)||!ec(v,w):!0}function kw(r,l,u,m){r=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,m),l.state!==r&&_p.enqueueReplaceState(l,l.state,null)}function Aa(r,l){var u=l;if("ref"in l){u={};for(var m in l)m!=="ref"&&(u[m]=l[m])}if(r=r.defaultProps){u===l&&(u=p({},u));for(var v in r)u[v]===void 0&&(u[v]=r[v])}return u}function Ow(r){dd(r)}function jw(r){console.error(r)}function Lw(r){dd(r)}function Od(r,l){try{var u=r.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function Fw(r,l,u){try{var m=r.onCaughtError;m(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Tp(r,l,u){return u=Cr(u),u.tag=3,u.payload={element:null},u.callback=function(){Od(r,l)},u}function Iw(r){return r=Cr(r),r.tag=3,r}function Bw(r,l,u,m){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var w=m.value;r.payload=function(){return v(w)},r.callback=function(){Fw(l,u,m)}}var D=u.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(r.callback=function(){Fw(l,u,m),typeof v!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var O=m.stack;this.componentDidCatch(m.value,{componentStack:O!==null?O:""})})}function Ek(r,l,u,m,v){if(u.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=u.alternate,l!==null&&To(l,u,v,!0),u=hs.current,u!==null){switch(u.tag){case 31:case 13:return ks===null?Gd():u.alternate===null&&Vt===0&&(Vt=3),u.flags&=-257,u.flags|=65536,u.lanes=v,m===wd?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([m]):l.add(m),Zp(r,m,v)),!1;case 22:return u.flags|=65536,m===wd?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([m]):u.add(m)),Zp(r,m,v)),!1}throw Error(s(435,u.tag))}return Zp(r,m,v),Gd(),!1}if(ut)return l=hs.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=v,m!==Gm&&(r=Error(s(422),{cause:m}),sc(Ds(r,u)))):(m!==Gm&&(l=Error(s(423),{cause:m}),sc(Ds(l,u))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,m=Ds(m,u),v=Tp(r.stateNode,m,v),sp(r,v),Vt!==4&&(Vt=2)),!1;var w=Error(s(520),{cause:m});if(w=Ds(w,u),Sc===null?Sc=[w]:Sc.push(w),Vt!==4&&(Vt=2),l===null)return!0;m=Ds(m,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,r=v&-v,u.lanes|=r,r=Tp(u.stateNode,m,r),sp(u,r),!1;case 1:if(l=u.type,w=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Nr===null||!Nr.has(w))))return u.flags|=65536,v&=-v,u.lanes|=v,v=Iw(v),Bw(v,r,u,m),sp(u,v),!1}u=u.return}while(u!==null);return!1}var Rp=Error(s(461)),Qt=!1;function Sn(r,l,u,m){l.child=r===null?Hx(l,null,u,m):wa(l,r.child,u,m)}function zw(r,l,u,m,v){u=u.render;var w=l.ref;if("ref"in m){var D={};for(var O in m)O!=="ref"&&(D[O]=m[O])}else D=m;return ya(l),m=cp(r,l,u,D,w,v),O=up(),r!==null&&!Qt?(dp(r,l,v),Hi(r,l,v)):(ut&&O&&$m(l),l.flags|=1,Sn(r,l,m,v),l.child)}function Uw(r,l,u,m,v){if(r===null){var w=u.type;return typeof w=="function"&&!Um(w)&&w.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=w,Vw(r,l,w,m,v)):(r=pd(u.type,null,m,l,l.mode,v),r.ref=l.ref,r.return=l,l.child=r)}if(w=r.child,!Lp(r,v)){var D=w.memoizedProps;if(u=u.compare,u=u!==null?u:ec,u(D,m)&&r.ref===l.ref)return Hi(r,l,v)}return l.flags|=1,r=Fi(w,m),r.ref=l.ref,r.return=l,l.child=r}function Vw(r,l,u,m,v){if(r!==null){var w=r.memoizedProps;if(ec(w,m)&&r.ref===l.ref)if(Qt=!1,l.pendingProps=m=w,Lp(r,v))(r.flags&131072)!==0&&(Qt=!0);else return l.lanes=r.lanes,Hi(r,l,v)}return Dp(r,l,u,m,v)}function Hw(r,l,u,m){var v=m.children,w=r!==null?r.memoizedState:null;if(r===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((l.flags&128)!==0){if(w=w!==null?w.baseLanes|u:u,r!==null){for(m=l.child=r.child,v=0;m!==null;)v=v|m.lanes|m.childLanes,m=m.sibling;m=v&~w}else m=0,l.child=null;return $w(r,l,w,u,m)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},r!==null&&bd(l,w!==null?w.cachePool:null),w!==null?Gx(l,w):rp(),Kx(l);else return m=l.lanes=536870912,$w(r,l,w!==null?w.baseLanes|u:u,u,m)}else w!==null?(bd(l,w.cachePool),Gx(l,w),Tr(),l.memoizedState=null):(r!==null&&bd(l,null),rp(),Tr());return Sn(r,l,v,u),l.child}function pc(r,l){return r!==null&&r.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function $w(r,l,u,m,v){var w=Jm();return w=w===null?null:{parent:Xt._currentValue,pool:w},l.memoizedState={baseLanes:u,cachePool:w},r!==null&&bd(l,null),rp(),Kx(l),r!==null&&To(r,l,m,!0),l.childLanes=v,null}function jd(r,l){return l=Fd({mode:l.mode,children:l.children},r.mode),l.ref=r.ref,r.child=l,l.return=r,l}function qw(r,l,u){return wa(l,r.child,null,u),r=jd(l,l.pendingProps),r.flags|=2,fs(l),l.memoizedState=null,r}function _k(r,l,u){var m=l.pendingProps,v=(l.flags&128)!==0;if(l.flags&=-129,r===null){if(ut){if(m.mode==="hidden")return r=jd(l,m),l.lanes=536870912,pc(null,r);if(op(l),(r=Dt)?(r=s1(r,Ps),r=r!==null&&r.data==="&"?r:null,r!==null&&(l.memoizedState={dehydrated:r,treeContext:br!==null?{id:ci,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},u=Rx(r),u.return=l,l.child=u,xn=l,Dt=null)):r=null,r===null)throw wr(l);return l.lanes=536870912,null}return jd(l,m)}var w=r.memoizedState;if(w!==null){var D=w.dehydrated;if(op(l),v)if(l.flags&256)l.flags&=-257,l=qw(r,l,u);else if(l.memoizedState!==null)l.child=r.child,l.flags|=128,l=null;else throw Error(s(558));else if(Qt||To(r,l,u,!1),v=(u&r.childLanes)!==0,Qt||v){if(m=Ct,m!==null&&(D=jb(m,u),D!==0&&D!==w.retryLane))throw w.retryLane=D,fa(r,D),ss(m,r,D),Rp;Gd(),l=qw(r,l,u)}else r=w.treeContext,Dt=Os(D.nextSibling),xn=l,ut=!0,xr=null,Ps=!1,r!==null&&Nx(l,r),l=jd(l,m),l.flags|=4096;return l}return r=Fi(r.child,{mode:m.mode,children:m.children}),r.ref=l.ref,l.child=r,r.return=l,r}function Ld(r,l){var u=l.ref;if(u===null)r!==null&&r.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(s(284));(r===null||r.ref!==u)&&(l.flags|=4194816)}}function Dp(r,l,u,m,v){return ya(l),u=cp(r,l,u,m,void 0,v),m=up(),r!==null&&!Qt?(dp(r,l,v),Hi(r,l,v)):(ut&&m&&$m(l),l.flags|=1,Sn(r,l,u,v),l.child)}function Gw(r,l,u,m,v,w){return ya(l),l.updateQueue=null,u=Xx(l,m,u,v),Yx(r),m=up(),r!==null&&!Qt?(dp(r,l,w),Hi(r,l,w)):(ut&&m&&$m(l),l.flags|=1,Sn(r,l,u,w),l.child)}function Kw(r,l,u,m,v){if(ya(l),l.stateNode===null){var w=Ao,D=u.contextType;typeof D=="object"&&D!==null&&(w=wn(D)),w=new u(m,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=_p,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=m,w.state=l.memoizedState,w.refs={},tp(l),D=u.contextType,w.context=typeof D=="object"&&D!==null?wn(D):Ao,w.state=l.memoizedState,D=u.getDerivedStateFromProps,typeof D=="function"&&(Ep(l,u,D,m),w.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(D=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),D!==w.state&&_p.enqueueReplaceState(w,w.state,null),uc(l,m,w,v),cc(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(r===null){w=l.stateNode;var O=l.memoizedProps,V=Aa(u,O);w.props=V;var ee=w.context,le=u.contextType;D=Ao,typeof le=="object"&&le!==null&&(D=wn(le));var de=u.getDerivedStateFromProps;le=typeof de=="function"||typeof w.getSnapshotBeforeUpdate=="function",O=l.pendingProps!==O,le||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O||ee!==D)&&kw(l,w,m,D),Ar=!1;var ne=l.memoizedState;w.state=ne,uc(l,m,w,v),cc(),ee=l.memoizedState,O||ne!==ee||Ar?(typeof de=="function"&&(Ep(l,u,de,m),ee=l.memoizedState),(V=Ar||Pw(l,u,V,m,ne,ee,D))?(le||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=ee),w.props=m,w.state=ee,w.context=D,m=V):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{w=l.stateNode,np(r,l),D=l.memoizedProps,le=Aa(u,D),w.props=le,de=l.pendingProps,ne=w.context,ee=u.contextType,V=Ao,typeof ee=="object"&&ee!==null&&(V=wn(ee)),O=u.getDerivedStateFromProps,(ee=typeof O=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(D!==de||ne!==V)&&kw(l,w,m,V),Ar=!1,ne=l.memoizedState,w.state=ne,uc(l,m,w,v),cc();var ae=l.memoizedState;D!==de||ne!==ae||Ar||r!==null&&r.dependencies!==null&&yd(r.dependencies)?(typeof O=="function"&&(Ep(l,u,O,m),ae=l.memoizedState),(le=Ar||Pw(l,u,le,m,ne,ae,V)||r!==null&&r.dependencies!==null&&yd(r.dependencies))?(ee||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(m,ae,V),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(m,ae,V)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||D===r.memoizedProps&&ne===r.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||D===r.memoizedProps&&ne===r.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=ae),w.props=m,w.state=ae,w.context=V,m=le):(typeof w.componentDidUpdate!="function"||D===r.memoizedProps&&ne===r.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||D===r.memoizedProps&&ne===r.memoizedState||(l.flags|=1024),m=!1)}return w=m,Ld(r,l),m=(l.flags&128)!==0,w||m?(w=l.stateNode,u=m&&typeof u.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,r!==null&&m?(l.child=wa(l,r.child,null,v),l.child=wa(l,null,u,v)):Sn(r,l,u,v),l.memoizedState=w.state,r=l.child):r=Hi(r,l,v),r}function Yw(r,l,u,m){return pa(),l.flags|=256,Sn(r,l,u,m),l.child}var Mp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Np(r){return{baseLanes:r,cachePool:Fx()}}function Pp(r,l,u){return r=r!==null?r.childLanes&~u:0,l&&(r|=ps),r}function Xw(r,l,u){var m=l.pendingProps,v=!1,w=(l.flags&128)!==0,D;if((D=w)||(D=r!==null&&r.memoizedState===null?!1:($t.current&2)!==0),D&&(v=!0,l.flags&=-129),D=(l.flags&32)!==0,l.flags&=-33,r===null){if(ut){if(v?_r(l):Tr(),(r=Dt)?(r=s1(r,Ps),r=r!==null&&r.data!=="&"?r:null,r!==null&&(l.memoizedState={dehydrated:r,treeContext:br!==null?{id:ci,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},u=Rx(r),u.return=l,l.child=u,xn=l,Dt=null)):r=null,r===null)throw wr(l);return mg(r)?l.lanes=32:l.lanes=536870912,null}var O=m.children;return m=m.fallback,v?(Tr(),v=l.mode,O=Fd({mode:"hidden",children:O},v),m=ma(m,v,u,null),O.return=l,m.return=l,O.sibling=m,l.child=O,m=l.child,m.memoizedState=Np(u),m.childLanes=Pp(r,D,u),l.memoizedState=Mp,pc(null,m)):(_r(l),kp(l,O))}var V=r.memoizedState;if(V!==null&&(O=V.dehydrated,O!==null)){if(w)l.flags&256?(_r(l),l.flags&=-257,l=Op(r,l,u)):l.memoizedState!==null?(Tr(),l.child=r.child,l.flags|=128,l=null):(Tr(),O=m.fallback,v=l.mode,m=Fd({mode:"visible",children:m.children},v),O=ma(O,v,u,null),O.flags|=2,m.return=l,O.return=l,m.sibling=O,l.child=m,wa(l,r.child,null,u),m=l.child,m.memoizedState=Np(u),m.childLanes=Pp(r,D,u),l.memoizedState=Mp,l=pc(null,m));else if(_r(l),mg(O)){if(D=O.nextSibling&&O.nextSibling.dataset,D)var ee=D.dgst;D=ee,m=Error(s(419)),m.stack="",m.digest=D,sc({value:m,source:null,stack:null}),l=Op(r,l,u)}else if(Qt||To(r,l,u,!1),D=(u&r.childLanes)!==0,Qt||D){if(D=Ct,D!==null&&(m=jb(D,u),m!==0&&m!==V.retryLane))throw V.retryLane=m,fa(r,m),ss(D,r,m),Rp;fg(O)||Gd(),l=Op(r,l,u)}else fg(O)?(l.flags|=192,l.child=r.child,l=null):(r=V.treeContext,Dt=Os(O.nextSibling),xn=l,ut=!0,xr=null,Ps=!1,r!==null&&Nx(l,r),l=kp(l,m.children),l.flags|=4096);return l}return v?(Tr(),O=m.fallback,v=l.mode,V=r.child,ee=V.sibling,m=Fi(V,{mode:"hidden",children:m.children}),m.subtreeFlags=V.subtreeFlags&65011712,ee!==null?O=Fi(ee,O):(O=ma(O,v,u,null),O.flags|=2),O.return=l,m.return=l,m.sibling=O,l.child=m,pc(null,m),m=l.child,O=r.child.memoizedState,O===null?O=Np(u):(v=O.cachePool,v!==null?(V=Xt._currentValue,v=v.parent!==V?{parent:V,pool:V}:v):v=Fx(),O={baseLanes:O.baseLanes|u,cachePool:v}),m.memoizedState=O,m.childLanes=Pp(r,D,u),l.memoizedState=Mp,pc(r.child,m)):(_r(l),u=r.child,r=u.sibling,u=Fi(u,{mode:"visible",children:m.children}),u.return=l,u.sibling=null,r!==null&&(D=l.deletions,D===null?(l.deletions=[r],l.flags|=16):D.push(r)),l.child=u,l.memoizedState=null,u)}function kp(r,l){return l=Fd({mode:"visible",children:l},r.mode),l.return=r,r.child=l}function Fd(r,l){return r=ds(22,r,null,l),r.lanes=0,r}function Op(r,l,u){return wa(l,r.child,null,u),r=kp(l,l.pendingProps.children),r.flags|=2,l.memoizedState=null,r}function Ww(r,l,u){r.lanes|=l;var m=r.alternate;m!==null&&(m.lanes|=l),Xm(r.return,l,u)}function jp(r,l,u,m,v,w){var D=r.memoizedState;D===null?r.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:v,treeForkCount:w}:(D.isBackwards=l,D.rendering=null,D.renderingStartTime=0,D.last=m,D.tail=u,D.tailMode=v,D.treeForkCount=w)}function Qw(r,l,u){var m=l.pendingProps,v=m.revealOrder,w=m.tail;m=m.children;var D=$t.current,O=(D&2)!==0;if(O?(D=D&1|2,l.flags|=128):D&=1,te($t,D),Sn(r,l,m,u),m=ut?nc:0,!O&&r!==null&&(r.flags&128)!==0)e:for(r=l.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Ww(r,u,l);else if(r.tag===19)Ww(r,u,l);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===l)break e;for(;r.sibling===null;){if(r.return===null||r.return===l)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(u=l.child,v=null;u!==null;)r=u.alternate,r!==null&&Ed(r)===null&&(v=u),u=u.sibling;u=v,u===null?(v=l.child,l.child=null):(v=u.sibling,u.sibling=null),jp(l,!1,v,u,w,m);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=l.child,l.child=null;v!==null;){if(r=v.alternate,r!==null&&Ed(r)===null){l.child=v;break}r=v.sibling,v.sibling=u,u=v,v=r}jp(l,!0,u,null,w,m);break;case"together":jp(l,!1,null,null,void 0,m);break;default:l.memoizedState=null}return l.child}function Hi(r,l,u){if(r!==null&&(l.dependencies=r.dependencies),Mr|=l.lanes,(u&l.childLanes)===0)if(r!==null){if(To(r,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(r!==null&&l.child!==r.child)throw Error(s(153));if(l.child!==null){for(r=l.child,u=Fi(r,r.pendingProps),l.child=u,u.return=l;r.sibling!==null;)r=r.sibling,u=u.sibling=Fi(r,r.pendingProps),u.return=l;u.sibling=null}return l.child}function Lp(r,l){return(r.lanes&l)!==0?!0:(r=r.dependencies,!!(r!==null&&yd(r)))}function Tk(r,l,u){switch(l.tag){case 3:Ae(l,l.stateNode.containerInfo),Sr(l,Xt,r.memoizedState.cache),pa();break;case 27:case 5:je(l);break;case 4:Ae(l,l.stateNode.containerInfo);break;case 10:Sr(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,op(l),null;break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(_r(l),l.flags|=128,null):(u&l.child.childLanes)!==0?Xw(r,l,u):(_r(l),r=Hi(r,l,u),r!==null?r.sibling:null);_r(l);break;case 19:var v=(r.flags&128)!==0;if(m=(u&l.childLanes)!==0,m||(To(r,l,u,!1),m=(u&l.childLanes)!==0),v){if(m)return Qw(r,l,u);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),te($t,$t.current),m)break;return null;case 22:return l.lanes=0,Hw(r,l,u,l.pendingProps);case 24:Sr(l,Xt,r.memoizedState.cache)}return Hi(r,l,u)}function Zw(r,l,u){if(r!==null)if(r.memoizedProps!==l.pendingProps)Qt=!0;else{if(!Lp(r,u)&&(l.flags&128)===0)return Qt=!1,Tk(r,l,u);Qt=(r.flags&131072)!==0}else Qt=!1,ut&&(l.flags&1048576)!==0&&Mx(l,nc,l.index);switch(l.lanes=0,l.tag){case 16:e:{var m=l.pendingProps;if(r=ba(l.elementType),l.type=r,typeof r=="function")Um(r)?(m=Aa(r,m),l.tag=1,l=Kw(null,l,r,m,u)):(l.tag=0,l=Dp(null,l,r,m,u));else{if(r!=null){var v=r.$$typeof;if(v===R){l.tag=11,l=zw(null,l,r,m,u);break e}else if(v===N){l.tag=14,l=Uw(null,l,r,m,u);break e}}throw l=Z(r)||r,Error(s(306,l,""))}}return l;case 0:return Dp(r,l,l.type,l.pendingProps,u);case 1:return m=l.type,v=Aa(m,l.pendingProps),Kw(r,l,m,v,u);case 3:e:{if(Ae(l,l.stateNode.containerInfo),r===null)throw Error(s(387));m=l.pendingProps;var w=l.memoizedState;v=w.element,np(r,l),uc(l,m,null,u);var D=l.memoizedState;if(m=D.cache,Sr(l,Xt,m),m!==w.cache&&Wm(l,[Xt],u,!0),cc(),m=D.element,w.isDehydrated)if(w={element:m,isDehydrated:!1,cache:D.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=Yw(r,l,m,u);break e}else if(m!==v){v=Ds(Error(s(424)),l),sc(v),l=Yw(r,l,m,u);break e}else for(r=l.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,Dt=Os(r.firstChild),xn=l,ut=!0,xr=null,Ps=!0,u=Hx(l,null,m,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(pa(),m===v){l=Hi(r,l,u);break e}Sn(r,l,m,u)}l=l.child}return l;case 26:return Ld(r,l),r===null?(u=c1(l.type,null,l.pendingProps,null))?l.memoizedState=u:ut||(u=l.type,r=l.pendingProps,m=Jd(be.current).createElement(u),m[bn]=l,m[Qn]=r,An(m,u,r),un(m),l.stateNode=m):l.memoizedState=c1(l.type,r.memoizedProps,l.pendingProps,r.memoizedState),null;case 27:return je(l),r===null&&ut&&(m=l.stateNode=a1(l.type,l.pendingProps,be.current),xn=l,Ps=!0,v=Dt,jr(l.type)?(pg=v,Dt=Os(m.firstChild)):Dt=v),Sn(r,l,l.pendingProps.children,u),Ld(r,l),r===null&&(l.flags|=4194304),l.child;case 5:return r===null&&ut&&((v=m=Dt)&&(m=sO(m,l.type,l.pendingProps,Ps),m!==null?(l.stateNode=m,xn=l,Dt=Os(m.firstChild),Ps=!1,v=!0):v=!1),v||wr(l)),je(l),v=l.type,w=l.pendingProps,D=r!==null?r.memoizedProps:null,m=w.children,ug(v,w)?m=null:D!==null&&ug(v,D)&&(l.flags|=32),l.memoizedState!==null&&(v=cp(r,l,vk,null,null,u),Mc._currentValue=v),Ld(r,l),Sn(r,l,m,u),l.child;case 6:return r===null&&ut&&((r=u=Dt)&&(u=iO(u,l.pendingProps,Ps),u!==null?(l.stateNode=u,xn=l,Dt=null,r=!0):r=!1),r||wr(l)),null;case 13:return Xw(r,l,u);case 4:return Ae(l,l.stateNode.containerInfo),m=l.pendingProps,r===null?l.child=wa(l,null,m,u):Sn(r,l,m,u),l.child;case 11:return zw(r,l,l.type,l.pendingProps,u);case 7:return Sn(r,l,l.pendingProps,u),l.child;case 8:return Sn(r,l,l.pendingProps.children,u),l.child;case 12:return Sn(r,l,l.pendingProps.children,u),l.child;case 10:return m=l.pendingProps,Sr(l,l.type,m.value),Sn(r,l,m.children,u),l.child;case 9:return v=l.type._context,m=l.pendingProps.children,ya(l),v=wn(v),m=m(v),l.flags|=1,Sn(r,l,m,u),l.child;case 14:return Uw(r,l,l.type,l.pendingProps,u);case 15:return Vw(r,l,l.type,l.pendingProps,u);case 19:return Qw(r,l,u);case 31:return _k(r,l,u);case 22:return Hw(r,l,u,l.pendingProps);case 24:return ya(l),m=wn(Xt),r===null?(v=Jm(),v===null&&(v=Ct,w=Qm(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=u),v=w),l.memoizedState={parent:m,cache:v},tp(l),Sr(l,Xt,v)):((r.lanes&u)!==0&&(np(r,l),uc(l,null,null,u),cc()),v=r.memoizedState,w=l.memoizedState,v.parent!==m?(v={parent:m,cache:m},l.memoizedState=v,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=v),Sr(l,Xt,m)):(m=w.cache,Sr(l,Xt,m),m!==v.cache&&Wm(l,[Xt],u,!0))),Sn(r,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(s(156,l.tag))}function $i(r){r.flags|=4}function Fp(r,l,u,m,v){if((l=(r.mode&32)!==0)&&(l=!1),l){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(ES())r.flags|=8192;else throw xa=wd,ep}else r.flags&=-16777217}function Jw(r,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!m1(l))if(ES())r.flags|=8192;else throw xa=wd,ep}function Id(r,l){l!==null&&(r.flags|=4),r.flags&16384&&(l=r.tag!==22?Pb():536870912,r.lanes|=l,Bo|=l)}function gc(r,l){if(!ut)switch(r.tailMode){case"hidden":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?l||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function Mt(r){var l=r.alternate!==null&&r.alternate.child===r.child,u=0,m=0;if(l)for(var v=r.child;v!==null;)u|=v.lanes|v.childLanes,m|=v.subtreeFlags&65011712,m|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)u|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=m,r.childLanes=u,l}function Rk(r,l,u){var m=l.pendingProps;switch(qm(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(l),null;case 1:return Mt(l),null;case 3:return u=l.stateNode,m=null,r!==null&&(m=r.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),zi(Xt),xe(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(_o(l)?$i(l):r===null||r.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Km())),Mt(l),null;case 26:var v=l.type,w=l.memoizedState;return r===null?($i(l),w!==null?(Mt(l),Jw(l,w)):(Mt(l),Fp(l,v,null,m,u))):w?w!==r.memoizedState?($i(l),Mt(l),Jw(l,w)):(Mt(l),l.flags&=-16777217):(r=r.memoizedProps,r!==m&&$i(l),Mt(l),Fp(l,v,r,m,u)),null;case 27:if(we(l),u=be.current,v=l.type,r!==null&&l.stateNode!=null)r.memoizedProps!==m&&$i(l);else{if(!m){if(l.stateNode===null)throw Error(s(166));return Mt(l),null}r=ce.current,_o(l)?Px(l):(r=a1(v,m,u),l.stateNode=r,$i(l))}return Mt(l),null;case 5:if(we(l),v=l.type,r!==null&&l.stateNode!=null)r.memoizedProps!==m&&$i(l);else{if(!m){if(l.stateNode===null)throw Error(s(166));return Mt(l),null}if(w=ce.current,_o(l))Px(l);else{var D=Jd(be.current);switch(w){case 1:w=D.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:w=D.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":w=D.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":w=D.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":w=D.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof m.is=="string"?D.createElement("select",{is:m.is}):D.createElement("select"),m.multiple?w.multiple=!0:m.size&&(w.size=m.size);break;default:w=typeof m.is=="string"?D.createElement(v,{is:m.is}):D.createElement(v)}}w[bn]=l,w[Qn]=m;e:for(D=l.child;D!==null;){if(D.tag===5||D.tag===6)w.appendChild(D.stateNode);else if(D.tag!==4&&D.tag!==27&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===l)break e;for(;D.sibling===null;){if(D.return===null||D.return===l)break e;D=D.return}D.sibling.return=D.return,D=D.sibling}l.stateNode=w;e:switch(An(w,v,m),v){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&$i(l)}}return Mt(l),Fp(l,l.type,r===null?null:r.memoizedProps,l.pendingProps,u),null;case 6:if(r&&l.stateNode!=null)r.memoizedProps!==m&&$i(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(s(166));if(r=be.current,_o(l)){if(r=l.stateNode,u=l.memoizedProps,m=null,v=xn,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}r[bn]=l,r=!!(r.nodeValue===u||m!==null&&m.suppressHydrationWarning===!0||XS(r.nodeValue,u)),r||wr(l,!0)}else r=Jd(r).createTextNode(m),r[bn]=l,l.stateNode=r}return Mt(l),null;case 31:if(u=l.memoizedState,r===null||r.memoizedState!==null){if(m=_o(l),u!==null){if(r===null){if(!m)throw Error(s(318));if(r=l.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[bn]=l}else pa(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Mt(l),r=!1}else u=Km(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return l.flags&256?(fs(l),l):(fs(l),null);if((l.flags&128)!==0)throw Error(s(558))}return Mt(l),null;case 13:if(m=l.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=_o(l),m!==null&&m.dehydrated!==null){if(r===null){if(!v)throw Error(s(318));if(v=l.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[bn]=l}else pa(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Mt(l),v=!1}else v=Km(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return l.flags&256?(fs(l),l):(fs(l),null)}return fs(l),(l.flags&128)!==0?(l.lanes=u,l):(u=m!==null,r=r!==null&&r.memoizedState!==null,u&&(m=l.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool),w=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(w=m.memoizedState.cachePool.pool),w!==v&&(m.flags|=2048)),u!==r&&u&&(l.child.flags|=8192),Id(l,l.updateQueue),Mt(l),null);case 4:return xe(),r===null&&rg(l.stateNode.containerInfo),Mt(l),null;case 10:return zi(l.type),Mt(l),null;case 19:if(X($t),m=l.memoizedState,m===null)return Mt(l),null;if(v=(l.flags&128)!==0,w=m.rendering,w===null)if(v)gc(m,!1);else{if(Vt!==0||r!==null&&(r.flags&128)!==0)for(r=l.child;r!==null;){if(w=Ed(r),w!==null){for(l.flags|=128,gc(m,!1),r=w.updateQueue,l.updateQueue=r,Id(l,r),l.subtreeFlags=0,r=u,u=l.child;u!==null;)Tx(u,r),u=u.sibling;return te($t,$t.current&1|2),ut&&Ii(l,m.treeForkCount),l.child}r=r.sibling}m.tail!==null&&pe()>Hd&&(l.flags|=128,v=!0,gc(m,!1),l.lanes=4194304)}else{if(!v)if(r=Ed(w),r!==null){if(l.flags|=128,v=!0,r=r.updateQueue,l.updateQueue=r,Id(l,r),gc(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!ut)return Mt(l),null}else 2*pe()-m.renderingStartTime>Hd&&u!==536870912&&(l.flags|=128,v=!0,gc(m,!1),l.lanes=4194304);m.isBackwards?(w.sibling=l.child,l.child=w):(r=m.last,r!==null?r.sibling=w:l.child=w,m.last=w)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=pe(),r.sibling=null,u=$t.current,te($t,v?u&1|2:u&1),ut&&Ii(l,m.treeForkCount),r):(Mt(l),null);case 22:case 23:return fs(l),ap(),m=l.memoizedState!==null,r!==null?r.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(u&536870912)!==0&&(l.flags&128)===0&&(Mt(l),l.subtreeFlags&6&&(l.flags|=8192)):Mt(l),u=l.updateQueue,u!==null&&Id(l,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==u&&(l.flags|=2048),r!==null&&X(va),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),zi(Xt),Mt(l),null;case 25:return null;case 30:return null}throw Error(s(156,l.tag))}function Dk(r,l){switch(qm(l),l.tag){case 1:return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 3:return zi(Xt),xe(),r=l.flags,(r&65536)!==0&&(r&128)===0?(l.flags=r&-65537|128,l):null;case 26:case 27:case 5:return we(l),null;case 31:if(l.memoizedState!==null){if(fs(l),l.alternate===null)throw Error(s(340));pa()}return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 13:if(fs(l),r=l.memoizedState,r!==null&&r.dehydrated!==null){if(l.alternate===null)throw Error(s(340));pa()}return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 19:return X($t),null;case 4:return xe(),null;case 10:return zi(l.type),null;case 22:case 23:return fs(l),ap(),r!==null&&X(va),r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 24:return zi(Xt),null;case 25:return null;default:return null}}function eS(r,l){switch(qm(l),l.tag){case 3:zi(Xt),xe();break;case 26:case 27:case 5:we(l);break;case 4:xe();break;case 31:l.memoizedState!==null&&fs(l);break;case 13:fs(l);break;case 19:X($t);break;case 10:zi(l.type);break;case 22:case 23:fs(l),ap(),r!==null&&X(va);break;case 24:zi(Xt)}}function yc(r,l){try{var u=l.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var v=m.next;u=v;do{if((u.tag&r)===r){m=void 0;var w=u.create,D=u.inst;m=w(),D.destroy=m}u=u.next}while(u!==v)}}catch(O){bt(l,l.return,O)}}function Rr(r,l,u){try{var m=l.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var w=v.next;m=w;do{if((m.tag&r)===r){var D=m.inst,O=D.destroy;if(O!==void 0){D.destroy=void 0,v=l;var V=u,ee=O;try{ee()}catch(le){bt(v,V,le)}}}m=m.next}while(m!==w)}}catch(le){bt(l,l.return,le)}}function tS(r){var l=r.updateQueue;if(l!==null){var u=r.stateNode;try{qx(l,u)}catch(m){bt(r,r.return,m)}}}function nS(r,l,u){u.props=Aa(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(m){bt(r,l,m)}}function vc(r,l){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var m=r.stateNode;break;case 30:m=r.stateNode;break;default:m=r.stateNode}typeof u=="function"?r.refCleanup=u(m):u.current=m}}catch(v){bt(r,l,v)}}function di(r,l){var u=r.ref,m=r.refCleanup;if(u!==null)if(typeof m=="function")try{m()}catch(v){bt(r,l,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){bt(r,l,v)}else u.current=null}function sS(r){var l=r.type,u=r.memoizedProps,m=r.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&m.focus();break e;case"img":u.src?m.src=u.src:u.srcSet&&(m.srcset=u.srcSet)}}catch(v){bt(r,r.return,v)}}function Ip(r,l,u){try{var m=r.stateNode;Qk(m,r.type,u,l),m[Qn]=l}catch(v){bt(r,r.return,v)}}function iS(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&jr(r.type)||r.tag===4}function Bp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||iS(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&jr(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function zp(r,l,u){var m=r.tag;if(m===5||m===6)r=r.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(r),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=ji));else if(m!==4&&(m===27&&jr(r.type)&&(u=r.stateNode,l=null),r=r.child,r!==null))for(zp(r,l,u),r=r.sibling;r!==null;)zp(r,l,u),r=r.sibling}function Bd(r,l,u){var m=r.tag;if(m===5||m===6)r=r.stateNode,l?u.insertBefore(r,l):u.appendChild(r);else if(m!==4&&(m===27&&jr(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(Bd(r,l,u),r=r.sibling;r!==null;)Bd(r,l,u),r=r.sibling}function rS(r){var l=r.stateNode,u=r.memoizedProps;try{for(var m=r.type,v=l.attributes;v.length;)l.removeAttributeNode(v[0]);An(l,m,u),l[bn]=r,l[Qn]=u}catch(w){bt(r,r.return,w)}}var qi=!1,Zt=!1,Up=!1,aS=typeof WeakSet=="function"?WeakSet:Set,dn=null;function Mk(r,l){if(r=r.containerInfo,lg=ah,r=vx(r),Om(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var v=m.anchorOffset,w=m.focusNode;m=m.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var D=0,O=-1,V=-1,ee=0,le=0,de=r,ne=null;t:for(;;){for(var ae;de!==u||v!==0&&de.nodeType!==3||(O=D+v),de!==w||m!==0&&de.nodeType!==3||(V=D+m),de.nodeType===3&&(D+=de.nodeValue.length),(ae=de.firstChild)!==null;)ne=de,de=ae;for(;;){if(de===r)break t;if(ne===u&&++ee===v&&(O=D),ne===w&&++le===m&&(V=D),(ae=de.nextSibling)!==null)break;de=ne,ne=de.parentNode}de=ae}u=O===-1||V===-1?null:{start:O,end:V}}else u=null}u=u||{start:0,end:0}}else u=null;for(cg={focusedElem:r,selectionRange:u},ah=!1,dn=l;dn!==null;)if(l=dn,r=l.child,(l.subtreeFlags&1028)!==0&&r!==null)r.return=l,dn=r;else for(;dn!==null;){switch(l=dn,w=l.alternate,r=l.flags,l.tag){case 0:if((r&4)!==0&&(r=l.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)v=r[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&w!==null){r=void 0,u=l,v=w.memoizedProps,w=w.memoizedState,m=u.stateNode;try{var Me=Aa(u.type,v);r=m.getSnapshotBeforeUpdate(Me,w),m.__reactInternalSnapshotBeforeUpdate=r}catch(Ue){bt(u,u.return,Ue)}}break;case 3:if((r&1024)!==0){if(r=l.stateNode.containerInfo,u=r.nodeType,u===9)hg(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":hg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=l.sibling,r!==null){r.return=l.return,dn=r;break}dn=l.return}}function oS(r,l,u){var m=u.flags;switch(u.tag){case 0:case 11:case 15:Ki(r,u),m&4&&yc(5,u);break;case 1:if(Ki(r,u),m&4)if(r=u.stateNode,l===null)try{r.componentDidMount()}catch(D){bt(u,u.return,D)}else{var v=Aa(u.type,l.memoizedProps);l=l.memoizedState;try{r.componentDidUpdate(v,l,r.__reactInternalSnapshotBeforeUpdate)}catch(D){bt(u,u.return,D)}}m&64&&tS(u),m&512&&vc(u,u.return);break;case 3:if(Ki(r,u),m&64&&(r=u.updateQueue,r!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{qx(r,l)}catch(D){bt(u,u.return,D)}}break;case 27:l===null&&m&4&&rS(u);case 26:case 5:Ki(r,u),l===null&&m&4&&sS(u),m&512&&vc(u,u.return);break;case 12:Ki(r,u);break;case 31:Ki(r,u),m&4&&uS(r,u);break;case 13:Ki(r,u),m&4&&dS(r,u),m&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=Bk.bind(null,u),rO(r,u))));break;case 22:if(m=u.memoizedState!==null||qi,!m){l=l!==null&&l.memoizedState!==null||Zt,v=qi;var w=Zt;qi=m,(Zt=l)&&!w?Yi(r,u,(u.subtreeFlags&8772)!==0):Ki(r,u),qi=v,Zt=w}break;case 30:break;default:Ki(r,u)}}function lS(r){var l=r.alternate;l!==null&&(r.alternate=null,lS(l)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(l=r.stateNode,l!==null&&ym(l)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Pt=null,Jn=!1;function Gi(r,l,u){for(u=u.child;u!==null;)cS(r,l,u),u=u.sibling}function cS(r,l,u){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Pi,u)}catch{}switch(u.tag){case 26:Zt||di(u,l),Gi(r,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Zt||di(u,l);var m=Pt,v=Jn;jr(u.type)&&(Pt=u.stateNode,Jn=!1),Gi(r,l,u),Tc(u.stateNode),Pt=m,Jn=v;break;case 5:Zt||di(u,l);case 6:if(m=Pt,v=Jn,Pt=null,Gi(r,l,u),Pt=m,Jn=v,Pt!==null)if(Jn)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(u.stateNode)}catch(w){bt(u,l,w)}else try{Pt.removeChild(u.stateNode)}catch(w){bt(u,l,w)}break;case 18:Pt!==null&&(Jn?(r=Pt,t1(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),Ko(r)):t1(Pt,u.stateNode));break;case 4:m=Pt,v=Jn,Pt=u.stateNode.containerInfo,Jn=!0,Gi(r,l,u),Pt=m,Jn=v;break;case 0:case 11:case 14:case 15:Rr(2,u,l),Zt||Rr(4,u,l),Gi(r,l,u);break;case 1:Zt||(di(u,l),m=u.stateNode,typeof m.componentWillUnmount=="function"&&nS(u,l,m)),Gi(r,l,u);break;case 21:Gi(r,l,u);break;case 22:Zt=(m=Zt)||u.memoizedState!==null,Gi(r,l,u),Zt=m;break;default:Gi(r,l,u)}}function uS(r,l){if(l.memoizedState===null&&(r=l.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Ko(r)}catch(u){bt(l,l.return,u)}}}function dS(r,l){if(l.memoizedState===null&&(r=l.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ko(r)}catch(u){bt(l,l.return,u)}}function Nk(r){switch(r.tag){case 31:case 13:case 19:var l=r.stateNode;return l===null&&(l=r.stateNode=new aS),l;case 22:return r=r.stateNode,l=r._retryCache,l===null&&(l=r._retryCache=new aS),l;default:throw Error(s(435,r.tag))}}function zd(r,l){var u=Nk(r);l.forEach(function(m){if(!u.has(m)){u.add(m);var v=zk.bind(null,r,m);m.then(v,v)}})}function es(r,l){var u=l.deletions;if(u!==null)for(var m=0;m<u.length;m++){var v=u[m],w=r,D=l,O=D;e:for(;O!==null;){switch(O.tag){case 27:if(jr(O.type)){Pt=O.stateNode,Jn=!1;break e}break;case 5:Pt=O.stateNode,Jn=!1;break e;case 3:case 4:Pt=O.stateNode.containerInfo,Jn=!0;break e}O=O.return}if(Pt===null)throw Error(s(160));cS(w,D,v),Pt=null,Jn=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)hS(l,r),l=l.sibling}var Ws=null;function hS(r,l){var u=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:es(l,r),ts(r),m&4&&(Rr(3,r,r.return),yc(3,r),Rr(5,r,r.return));break;case 1:es(l,r),ts(r),m&512&&(Zt||u===null||di(u,u.return)),m&64&&qi&&(r=r.updateQueue,r!==null&&(m=r.callbacks,m!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?m:u.concat(m))));break;case 26:var v=Ws;if(es(l,r),ts(r),m&512&&(Zt||u===null||di(u,u.return)),m&4){var w=u!==null?u.memoizedState:null;if(m=r.memoizedState,u===null)if(m===null)if(r.stateNode===null){e:{m=r.type,u=r.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":w=v.getElementsByTagName("title")[0],(!w||w[ql]||w[bn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(m),v.head.insertBefore(w,v.querySelector("head > title"))),An(w,m,u),w[bn]=r,un(w),m=w;break e;case"link":var D=h1("link","href",v).get(m+(u.href||""));if(D){for(var O=0;O<D.length;O++)if(w=D[O],w.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&w.getAttribute("rel")===(u.rel==null?null:u.rel)&&w.getAttribute("title")===(u.title==null?null:u.title)&&w.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){D.splice(O,1);break t}}w=v.createElement(m),An(w,m,u),v.head.appendChild(w);break;case"meta":if(D=h1("meta","content",v).get(m+(u.content||""))){for(O=0;O<D.length;O++)if(w=D[O],w.getAttribute("content")===(u.content==null?null:""+u.content)&&w.getAttribute("name")===(u.name==null?null:u.name)&&w.getAttribute("property")===(u.property==null?null:u.property)&&w.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&w.getAttribute("charset")===(u.charSet==null?null:u.charSet)){D.splice(O,1);break t}}w=v.createElement(m),An(w,m,u),v.head.appendChild(w);break;default:throw Error(s(468,m))}w[bn]=r,un(w),m=w}r.stateNode=m}else f1(v,r.type,r.stateNode);else r.stateNode=d1(v,m,r.memoizedProps);else w!==m?(w===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):w.count--,m===null?f1(v,r.type,r.stateNode):d1(v,m,r.memoizedProps)):m===null&&r.stateNode!==null&&Ip(r,r.memoizedProps,u.memoizedProps)}break;case 27:es(l,r),ts(r),m&512&&(Zt||u===null||di(u,u.return)),u!==null&&m&4&&Ip(r,r.memoizedProps,u.memoizedProps);break;case 5:if(es(l,r),ts(r),m&512&&(Zt||u===null||di(u,u.return)),r.flags&32){v=r.stateNode;try{go(v,"")}catch(Me){bt(r,r.return,Me)}}m&4&&r.stateNode!=null&&(v=r.memoizedProps,Ip(r,v,u!==null?u.memoizedProps:v)),m&1024&&(Up=!0);break;case 6:if(es(l,r),ts(r),m&4){if(r.stateNode===null)throw Error(s(162));m=r.memoizedProps,u=r.stateNode;try{u.nodeValue=m}catch(Me){bt(r,r.return,Me)}}break;case 3:if(nh=null,v=Ws,Ws=eh(l.containerInfo),es(l,r),Ws=v,ts(r),m&4&&u!==null&&u.memoizedState.isDehydrated)try{Ko(l.containerInfo)}catch(Me){bt(r,r.return,Me)}Up&&(Up=!1,fS(r));break;case 4:m=Ws,Ws=eh(r.stateNode.containerInfo),es(l,r),ts(r),Ws=m;break;case 12:es(l,r),ts(r);break;case 31:es(l,r),ts(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,zd(r,m)));break;case 13:es(l,r),ts(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Vd=pe()),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,zd(r,m)));break;case 22:v=r.memoizedState!==null;var V=u!==null&&u.memoizedState!==null,ee=qi,le=Zt;if(qi=ee||v,Zt=le||V,es(l,r),Zt=le,qi=ee,ts(r),m&8192)e:for(l=r.stateNode,l._visibility=v?l._visibility&-2:l._visibility|1,v&&(u===null||V||qi||Zt||Ca(r)),u=null,l=r;;){if(l.tag===5||l.tag===26){if(u===null){V=u=l;try{if(w=V.stateNode,v)D=w.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{O=V.stateNode;var de=V.memoizedProps.style,ne=de!=null&&de.hasOwnProperty("display")?de.display:null;O.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Me){bt(V,V.return,Me)}}}else if(l.tag===6){if(u===null){V=l;try{V.stateNode.nodeValue=v?"":V.memoizedProps}catch(Me){bt(V,V.return,Me)}}}else if(l.tag===18){if(u===null){V=l;try{var ae=V.stateNode;v?n1(ae,!0):n1(V.stateNode,!1)}catch(Me){bt(V,V.return,Me)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===r)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break e;for(;l.sibling===null;){if(l.return===null||l.return===r)break e;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=r.updateQueue,m!==null&&(u=m.retryQueue,u!==null&&(m.retryQueue=null,zd(r,u))));break;case 19:es(l,r),ts(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,zd(r,m)));break;case 30:break;case 21:break;default:es(l,r),ts(r)}}function ts(r){var l=r.flags;if(l&2){try{for(var u,m=r.return;m!==null;){if(iS(m)){u=m;break}m=m.return}if(u==null)throw Error(s(160));switch(u.tag){case 27:var v=u.stateNode,w=Bp(r);Bd(r,w,v);break;case 5:var D=u.stateNode;u.flags&32&&(go(D,""),u.flags&=-33);var O=Bp(r);Bd(r,O,D);break;case 3:case 4:var V=u.stateNode.containerInfo,ee=Bp(r);zp(r,ee,V);break;default:throw Error(s(161))}}catch(le){bt(r,r.return,le)}r.flags&=-3}l&4096&&(r.flags&=-4097)}function fS(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var l=r;fS(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),r=r.sibling}}function Ki(r,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)oS(r,l.alternate,l),l=l.sibling}function Ca(r){for(r=r.child;r!==null;){var l=r;switch(l.tag){case 0:case 11:case 14:case 15:Rr(4,l,l.return),Ca(l);break;case 1:di(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&nS(l,l.return,u),Ca(l);break;case 27:Tc(l.stateNode);case 26:case 5:di(l,l.return),Ca(l);break;case 22:l.memoizedState===null&&Ca(l);break;case 30:Ca(l);break;default:Ca(l)}r=r.sibling}}function Yi(r,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,v=r,w=l,D=w.flags;switch(w.tag){case 0:case 11:case 15:Yi(v,w,u),yc(4,w);break;case 1:if(Yi(v,w,u),m=w,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ee){bt(m,m.return,ee)}if(m=w,v=m.updateQueue,v!==null){var O=m.stateNode;try{var V=v.shared.hiddenCallbacks;if(V!==null)for(v.shared.hiddenCallbacks=null,v=0;v<V.length;v++)$x(V[v],O)}catch(ee){bt(m,m.return,ee)}}u&&D&64&&tS(w),vc(w,w.return);break;case 27:rS(w);case 26:case 5:Yi(v,w,u),u&&m===null&&D&4&&sS(w),vc(w,w.return);break;case 12:Yi(v,w,u);break;case 31:Yi(v,w,u),u&&D&4&&uS(v,w);break;case 13:Yi(v,w,u),u&&D&4&&dS(v,w);break;case 22:w.memoizedState===null&&Yi(v,w,u),vc(w,w.return);break;case 30:break;default:Yi(v,w,u)}l=l.sibling}}function Vp(r,l){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&ic(u))}function Hp(r,l){r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&ic(r))}function Qs(r,l,u,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)mS(r,l,u,m),l=l.sibling}function mS(r,l,u,m){var v=l.flags;switch(l.tag){case 0:case 11:case 15:Qs(r,l,u,m),v&2048&&yc(9,l);break;case 1:Qs(r,l,u,m);break;case 3:Qs(r,l,u,m),v&2048&&(r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&ic(r)));break;case 12:if(v&2048){Qs(r,l,u,m),r=l.stateNode;try{var w=l.memoizedProps,D=w.id,O=w.onPostCommit;typeof O=="function"&&O(D,l.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(V){bt(l,l.return,V)}}else Qs(r,l,u,m);break;case 31:Qs(r,l,u,m);break;case 13:Qs(r,l,u,m);break;case 23:break;case 22:w=l.stateNode,D=l.alternate,l.memoizedState!==null?w._visibility&2?Qs(r,l,u,m):bc(r,l):w._visibility&2?Qs(r,l,u,m):(w._visibility|=2,Lo(r,l,u,m,(l.subtreeFlags&10256)!==0||!1)),v&2048&&Vp(D,l);break;case 24:Qs(r,l,u,m),v&2048&&Hp(l.alternate,l);break;default:Qs(r,l,u,m)}}function Lo(r,l,u,m,v){for(v=v&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var w=r,D=l,O=u,V=m,ee=D.flags;switch(D.tag){case 0:case 11:case 15:Lo(w,D,O,V,v),yc(8,D);break;case 23:break;case 22:var le=D.stateNode;D.memoizedState!==null?le._visibility&2?Lo(w,D,O,V,v):bc(w,D):(le._visibility|=2,Lo(w,D,O,V,v)),v&&ee&2048&&Vp(D.alternate,D);break;case 24:Lo(w,D,O,V,v),v&&ee&2048&&Hp(D.alternate,D);break;default:Lo(w,D,O,V,v)}l=l.sibling}}function bc(r,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=r,m=l,v=m.flags;switch(m.tag){case 22:bc(u,m),v&2048&&Vp(m.alternate,m);break;case 24:bc(u,m),v&2048&&Hp(m.alternate,m);break;default:bc(u,m)}l=l.sibling}}var xc=8192;function Fo(r,l,u){if(r.subtreeFlags&xc)for(r=r.child;r!==null;)pS(r,l,u),r=r.sibling}function pS(r,l,u){switch(r.tag){case 26:Fo(r,l,u),r.flags&xc&&r.memoizedState!==null&&yO(u,Ws,r.memoizedState,r.memoizedProps);break;case 5:Fo(r,l,u);break;case 3:case 4:var m=Ws;Ws=eh(r.stateNode.containerInfo),Fo(r,l,u),Ws=m;break;case 22:r.memoizedState===null&&(m=r.alternate,m!==null&&m.memoizedState!==null?(m=xc,xc=16777216,Fo(r,l,u),xc=m):Fo(r,l,u));break;default:Fo(r,l,u)}}function gS(r){var l=r.alternate;if(l!==null&&(r=l.child,r!==null)){l.child=null;do l=r.sibling,r.sibling=null,r=l;while(r!==null)}}function wc(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var m=l[u];dn=m,vS(m,r)}gS(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)yS(r),r=r.sibling}function yS(r){switch(r.tag){case 0:case 11:case 15:wc(r),r.flags&2048&&Rr(9,r,r.return);break;case 3:wc(r);break;case 12:wc(r);break;case 22:var l=r.stateNode;r.memoizedState!==null&&l._visibility&2&&(r.return===null||r.return.tag!==13)?(l._visibility&=-3,Ud(r)):wc(r);break;default:wc(r)}}function Ud(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var m=l[u];dn=m,vS(m,r)}gS(r)}for(r=r.child;r!==null;){switch(l=r,l.tag){case 0:case 11:case 15:Rr(8,l,l.return),Ud(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,Ud(l));break;default:Ud(l)}r=r.sibling}}function vS(r,l){for(;dn!==null;){var u=dn;switch(u.tag){case 0:case 11:case 15:Rr(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var m=u.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:ic(u.memoizedState.cache)}if(m=u.child,m!==null)m.return=u,dn=m;else e:for(u=r;dn!==null;){m=dn;var v=m.sibling,w=m.return;if(lS(m),m===u){dn=null;break e}if(v!==null){v.return=w,dn=v;break e}dn=w}}}var Pk={getCacheForType:function(r){var l=wn(Xt),u=l.data.get(r);return u===void 0&&(u=r(),l.data.set(r,u)),u},cacheSignal:function(){return wn(Xt).controller.signal}},kk=typeof WeakMap=="function"?WeakMap:Map,gt=0,Ct=null,it=null,ot=0,vt=0,ms=null,Dr=!1,Io=!1,$p=!1,Xi=0,Vt=0,Mr=0,Ea=0,qp=0,ps=0,Bo=0,Sc=null,ns=null,Gp=!1,Vd=0,bS=0,Hd=1/0,$d=null,Nr=null,an=0,Pr=null,zo=null,Wi=0,Kp=0,Yp=null,xS=null,Ac=0,Xp=null;function gs(){return(gt&2)!==0&&ot!==0?ot&-ot:F.T!==null?tg():Lb()}function wS(){if(ps===0)if((ot&536870912)===0||ut){var r=li;li<<=1,(li&3932160)===0&&(li=262144),ps=r}else ps=536870912;return r=hs.current,r!==null&&(r.flags|=32),ps}function ss(r,l,u){(r===Ct&&(vt===2||vt===9)||r.cancelPendingCommit!==null)&&(Uo(r,0),kr(r,ot,ps,!1)),$l(r,u),((gt&2)===0||r!==Ct)&&(r===Ct&&((gt&2)===0&&(Ea|=u),Vt===4&&kr(r,ot,ps,!1)),hi(r))}function SS(r,l,u){if((gt&6)!==0)throw Error(s(327));var m=!u&&(l&127)===0&&(l&r.expiredLanes)===0||Hl(r,l),v=m?Lk(r,l):Qp(r,l,!0),w=m;do{if(v===0){Io&&!m&&kr(r,l,0,!1);break}else{if(u=r.current.alternate,w&&!Ok(u)){v=Qp(r,l,!1),w=!1;continue}if(v===2){if(w=l,r.errorRecoveryDisabledLanes&w)var D=0;else D=r.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){l=D;e:{var O=r;v=Sc;var V=O.current.memoizedState.isDehydrated;if(V&&(Uo(O,D).flags|=256),D=Qp(O,D,!1),D!==2){if($p&&!V){O.errorRecoveryDisabledLanes|=w,Ea|=w,v=4;break e}w=ns,ns=v,w!==null&&(ns===null?ns=w:ns.push.apply(ns,w))}v=D}if(w=!1,v!==2)continue}}if(v===1){Uo(r,0),kr(r,l,0,!0);break}e:{switch(m=r,w=v,w){case 0:case 1:throw Error(s(345));case 4:if((l&4194048)!==l)break;case 6:kr(m,l,ps,!Dr);break e;case 2:ns=null;break;case 3:case 5:break;default:throw Error(s(329))}if((l&62914560)===l&&(v=Vd+300-pe(),10<v)){if(kr(m,l,ps,!Dr),ed(m,0,!0)!==0)break e;Wi=l,m.timeoutHandle=JS(AS.bind(null,m,u,ns,$d,Gp,l,ps,Ea,Bo,Dr,w,"Throttled",-0,0),v);break e}AS(m,u,ns,$d,Gp,l,ps,Ea,Bo,Dr,w,null,-0,0)}}break}while(!0);hi(r)}function AS(r,l,u,m,v,w,D,O,V,ee,le,de,ne,ae){if(r.timeoutHandle=-1,de=l.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ji},pS(l,w,de);var Me=(w&62914560)===w?Vd-pe():(w&4194048)===w?bS-pe():0;if(Me=vO(de,Me),Me!==null){Wi=w,r.cancelPendingCommit=Me(NS.bind(null,r,l,w,u,m,v,D,O,V,le,de,null,ne,ae)),kr(r,w,D,!ee);return}}NS(r,l,w,u,m,v,D,O,V)}function Ok(r){for(var l=r;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var m=0;m<u.length;m++){var v=u[m],w=v.getSnapshot;v=v.value;try{if(!us(w(),v))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function kr(r,l,u,m){l&=~qp,l&=~Ea,r.suspendedLanes|=l,r.pingedLanes&=~l,m&&(r.warmLanes|=l),m=r.expirationTimes;for(var v=l;0<v;){var w=31-vn(v),D=1<<w;m[w]=-1,v&=~D}u!==0&&kb(r,u,l)}function qd(){return(gt&6)===0?(Cc(0),!1):!0}function Wp(){if(it!==null){if(vt===0)var r=it.return;else r=it,Bi=ga=null,hp(r),No=null,ac=0,r=it;for(;r!==null;)eS(r.alternate,r),r=r.return;it=null}}function Uo(r,l){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,eO(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),Wi=0,Wp(),Ct=r,it=u=Fi(r.current,null),ot=l,vt=0,ms=null,Dr=!1,Io=Hl(r,l),$p=!1,Bo=ps=qp=Ea=Mr=Vt=0,ns=Sc=null,Gp=!1,(l&8)!==0&&(l|=l&32);var m=r.entangledLanes;if(m!==0)for(r=r.entanglements,m&=l;0<m;){var v=31-vn(m),w=1<<v;l|=r[v],m&=~w}return Xi=l,hd(),u}function CS(r,l){Je=null,F.H=mc,l===Mo||l===xd?(l=zx(),vt=3):l===ep?(l=zx(),vt=4):vt=l===Rp?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ms=l,it===null&&(Vt=1,Od(r,Ds(l,r.current)))}function ES(){var r=hs.current;return r===null?!0:(ot&4194048)===ot?ks===null:(ot&62914560)===ot||(ot&536870912)!==0?r===ks:!1}function _S(){var r=F.H;return F.H=mc,r===null?mc:r}function TS(){var r=F.A;return F.A=Pk,r}function Gd(){Vt=4,Dr||(ot&4194048)!==ot&&hs.current!==null||(Io=!0),(Mr&134217727)===0&&(Ea&134217727)===0||Ct===null||kr(Ct,ot,ps,!1)}function Qp(r,l,u){var m=gt;gt|=2;var v=_S(),w=TS();(Ct!==r||ot!==l)&&($d=null,Uo(r,l)),l=!1;var D=Vt;e:do try{if(vt!==0&&it!==null){var O=it,V=ms;switch(vt){case 8:Wp(),D=6;break e;case 3:case 2:case 9:case 6:hs.current===null&&(l=!0);var ee=vt;if(vt=0,ms=null,Vo(r,O,V,ee),u&&Io){D=0;break e}break;default:ee=vt,vt=0,ms=null,Vo(r,O,V,ee)}}jk(),D=Vt;break}catch(le){CS(r,le)}while(!0);return l&&r.shellSuspendCounter++,Bi=ga=null,gt=m,F.H=v,F.A=w,it===null&&(Ct=null,ot=0,hd()),D}function jk(){for(;it!==null;)RS(it)}function Lk(r,l){var u=gt;gt|=2;var m=_S(),v=TS();Ct!==r||ot!==l?($d=null,Hd=pe()+500,Uo(r,l)):Io=Hl(r,l);e:do try{if(vt!==0&&it!==null){l=it;var w=ms;t:switch(vt){case 1:vt=0,ms=null,Vo(r,l,w,1);break;case 2:case 9:if(Ix(w)){vt=0,ms=null,DS(l);break}l=function(){vt!==2&&vt!==9||Ct!==r||(vt=7),hi(r)},w.then(l,l);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:Ix(w)?(vt=0,ms=null,DS(l)):(vt=0,ms=null,Vo(r,l,w,7));break;case 5:var D=null;switch(it.tag){case 26:D=it.memoizedState;case 5:case 27:var O=it;if(D?m1(D):O.stateNode.complete){vt=0,ms=null;var V=O.sibling;if(V!==null)it=V;else{var ee=O.return;ee!==null?(it=ee,Kd(ee)):it=null}break t}}vt=0,ms=null,Vo(r,l,w,5);break;case 6:vt=0,ms=null,Vo(r,l,w,6);break;case 8:Wp(),Vt=6;break e;default:throw Error(s(462))}}Fk();break}catch(le){CS(r,le)}while(!0);return Bi=ga=null,F.H=m,F.A=v,gt=u,it!==null?0:(Ct=null,ot=0,hd(),Vt)}function Fk(){for(;it!==null&&!G();)RS(it)}function RS(r){var l=Zw(r.alternate,r,Xi);r.memoizedProps=r.pendingProps,l===null?Kd(r):it=l}function DS(r){var l=r,u=l.alternate;switch(l.tag){case 15:case 0:l=Gw(u,l,l.pendingProps,l.type,void 0,ot);break;case 11:l=Gw(u,l,l.pendingProps,l.type.render,l.ref,ot);break;case 5:hp(l);default:eS(u,l),l=it=Tx(l,Xi),l=Zw(u,l,Xi)}r.memoizedProps=r.pendingProps,l===null?Kd(r):it=l}function Vo(r,l,u,m){Bi=ga=null,hp(l),No=null,ac=0;var v=l.return;try{if(Ek(r,v,l,u,ot)){Vt=1,Od(r,Ds(u,r.current)),it=null;return}}catch(w){if(v!==null)throw it=v,w;Vt=1,Od(r,Ds(u,r.current)),it=null;return}l.flags&32768?(ut||m===1?r=!0:Io||(ot&536870912)!==0?r=!1:(Dr=r=!0,(m===2||m===9||m===3||m===6)&&(m=hs.current,m!==null&&m.tag===13&&(m.flags|=16384))),MS(l,r)):Kd(l)}function Kd(r){var l=r;do{if((l.flags&32768)!==0){MS(l,Dr);return}r=l.return;var u=Rk(l.alternate,l,Xi);if(u!==null){it=u;return}if(l=l.sibling,l!==null){it=l;return}it=l=r}while(l!==null);Vt===0&&(Vt=5)}function MS(r,l){do{var u=Dk(r.alternate,r);if(u!==null){u.flags&=32767,it=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(r=r.sibling,r!==null)){it=r;return}it=r=u}while(r!==null);Vt=6,it=null}function NS(r,l,u,m,v,w,D,O,V){r.cancelPendingCommit=null;do Yd();while(an!==0);if((gt&6)!==0)throw Error(s(327));if(l!==null){if(l===r.current)throw Error(s(177));if(w=l.lanes|l.childLanes,w|=Bm,gP(r,u,w,D,O,V),r===Ct&&(it=Ct=null,ot=0),zo=l,Pr=r,Wi=u,Kp=w,Yp=v,xS=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Uk(Te,function(){return LS(),null})):(r.callbackNode=null,r.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=F.T,F.T=null,v=B.p,B.p=2,D=gt,gt|=4;try{Mk(r,l,u)}finally{gt=D,B.p=v,F.T=m}}an=1,PS(),kS(),OS()}}function PS(){if(an===1){an=0;var r=Pr,l=zo,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=F.T,F.T=null;var m=B.p;B.p=2;var v=gt;gt|=4;try{hS(l,r);var w=cg,D=vx(r.containerInfo),O=w.focusedElem,V=w.selectionRange;if(D!==O&&O&&O.ownerDocument&&yx(O.ownerDocument.documentElement,O)){if(V!==null&&Om(O)){var ee=V.start,le=V.end;if(le===void 0&&(le=ee),"selectionStart"in O)O.selectionStart=ee,O.selectionEnd=Math.min(le,O.value.length);else{var de=O.ownerDocument||document,ne=de&&de.defaultView||window;if(ne.getSelection){var ae=ne.getSelection(),Me=O.textContent.length,Ue=Math.min(V.start,Me),St=V.end===void 0?Ue:Math.min(V.end,Me);!ae.extend&&Ue>St&&(D=St,St=Ue,Ue=D);var Y=gx(O,Ue),q=gx(O,St);if(Y&&q&&(ae.rangeCount!==1||ae.anchorNode!==Y.node||ae.anchorOffset!==Y.offset||ae.focusNode!==q.node||ae.focusOffset!==q.offset)){var J=de.createRange();J.setStart(Y.node,Y.offset),ae.removeAllRanges(),Ue>St?(ae.addRange(J),ae.extend(q.node,q.offset)):(J.setEnd(q.node,q.offset),ae.addRange(J))}}}}for(de=[],ae=O;ae=ae.parentNode;)ae.nodeType===1&&de.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<de.length;O++){var ue=de[O];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}ah=!!lg,cg=lg=null}finally{gt=v,B.p=m,F.T=u}}r.current=l,an=2}}function kS(){if(an===2){an=0;var r=Pr,l=zo,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=F.T,F.T=null;var m=B.p;B.p=2;var v=gt;gt|=4;try{oS(r,l.alternate,l)}finally{gt=v,B.p=m,F.T=u}}an=3}}function OS(){if(an===4||an===3){an=0,ie();var r=Pr,l=zo,u=Wi,m=xS;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?an=5:(an=0,zo=Pr=null,jS(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(Nr=null),pm(u),l=l.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Pi,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=F.T,v=B.p,B.p=2,F.T=null;try{for(var w=r.onRecoverableError,D=0;D<m.length;D++){var O=m[D];w(O.value,{componentStack:O.stack})}}finally{F.T=l,B.p=v}}(Wi&3)!==0&&Yd(),hi(r),v=r.pendingLanes,(u&261930)!==0&&(v&42)!==0?r===Xp?Ac++:(Ac=0,Xp=r):Ac=0,Cc(0)}}function jS(r,l){(r.pooledCacheLanes&=l)===0&&(l=r.pooledCache,l!=null&&(r.pooledCache=null,ic(l)))}function Yd(){return PS(),kS(),OS(),LS()}function LS(){if(an!==5)return!1;var r=Pr,l=Kp;Kp=0;var u=pm(Wi),m=F.T,v=B.p;try{B.p=32>u?32:u,F.T=null,u=Yp,Yp=null;var w=Pr,D=Wi;if(an=0,zo=Pr=null,Wi=0,(gt&6)!==0)throw Error(s(331));var O=gt;if(gt|=4,yS(w.current),mS(w,w.current,D,u),gt=O,Cc(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Pi,w)}catch{}return!0}finally{B.p=v,F.T=m,jS(r,l)}}function FS(r,l,u){l=Ds(u,l),l=Tp(r.stateNode,l,2),r=Er(r,l,2),r!==null&&($l(r,2),hi(r))}function bt(r,l,u){if(r.tag===3)FS(r,r,u);else for(;l!==null;){if(l.tag===3){FS(l,r,u);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Nr===null||!Nr.has(m))){r=Ds(u,r),u=Iw(2),m=Er(l,u,2),m!==null&&(Bw(u,m,l,r),$l(m,2),hi(m));break}}l=l.return}}function Zp(r,l,u){var m=r.pingCache;if(m===null){m=r.pingCache=new kk;var v=new Set;m.set(l,v)}else v=m.get(l),v===void 0&&(v=new Set,m.set(l,v));v.has(u)||($p=!0,v.add(u),r=Ik.bind(null,r,l,u),l.then(r,r))}function Ik(r,l,u){var m=r.pingCache;m!==null&&m.delete(l),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,Ct===r&&(ot&u)===u&&(Vt===4||Vt===3&&(ot&62914560)===ot&&300>pe()-Vd?(gt&2)===0&&Uo(r,0):qp|=u,Bo===ot&&(Bo=0)),hi(r)}function IS(r,l){l===0&&(l=Pb()),r=fa(r,l),r!==null&&($l(r,l),hi(r))}function Bk(r){var l=r.memoizedState,u=0;l!==null&&(u=l.retryLane),IS(r,u)}function zk(r,l){var u=0;switch(r.tag){case 31:case 13:var m=r.stateNode,v=r.memoizedState;v!==null&&(u=v.retryLane);break;case 19:m=r.stateNode;break;case 22:m=r.stateNode._retryCache;break;default:throw Error(s(314))}m!==null&&m.delete(l),IS(r,u)}function Uk(r,l){return Ke(r,l)}var Xd=null,Ho=null,Jp=!1,Wd=!1,eg=!1,Or=0;function hi(r){r!==Ho&&r.next===null&&(Ho===null?Xd=Ho=r:Ho=Ho.next=r),Wd=!0,Jp||(Jp=!0,Hk())}function Cc(r,l){if(!eg&&Wd){eg=!0;do for(var u=!1,m=Xd;m!==null;){if(r!==0){var v=m.pendingLanes;if(v===0)var w=0;else{var D=m.suspendedLanes,O=m.pingedLanes;w=(1<<31-vn(42|r)+1)-1,w&=v&~(D&~O),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(u=!0,VS(m,w))}else w=ot,w=ed(m,m===Ct?w:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(w&3)===0||Hl(m,w)||(u=!0,VS(m,w));m=m.next}while(u);eg=!1}}function Vk(){BS()}function BS(){Wd=Jp=!1;var r=0;Or!==0&&Jk()&&(r=Or);for(var l=pe(),u=null,m=Xd;m!==null;){var v=m.next,w=zS(m,l);w===0?(m.next=null,u===null?Xd=v:u.next=v,v===null&&(Ho=u)):(u=m,(r!==0||(w&3)!==0)&&(Wd=!0)),m=v}an!==0&&an!==5||Cc(r),Or!==0&&(Or=0)}function zS(r,l){for(var u=r.suspendedLanes,m=r.pingedLanes,v=r.expirationTimes,w=r.pendingLanes&-62914561;0<w;){var D=31-vn(w),O=1<<D,V=v[D];V===-1?((O&u)===0||(O&m)!==0)&&(v[D]=pP(O,l)):V<=l&&(r.expiredLanes|=O),w&=~O}if(l=Ct,u=ot,u=ed(r,r===l?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m=r.callbackNode,u===0||r===l&&(vt===2||vt===9)||r.cancelPendingCommit!==null)return m!==null&&m!==null&&U(m),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Hl(r,u)){if(l=u&-u,l===r.callbackPriority)return l;switch(m!==null&&U(m),pm(u)){case 2:case 8:u=re;break;case 32:u=Te;break;case 268435456:u=yt;break;default:u=Te}return m=US.bind(null,r),u=Ke(u,m),r.callbackPriority=l,r.callbackNode=u,l}return m!==null&&m!==null&&U(m),r.callbackPriority=2,r.callbackNode=null,2}function US(r,l){if(an!==0&&an!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(Yd()&&r.callbackNode!==u)return null;var m=ot;return m=ed(r,r===Ct?m:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m===0?null:(SS(r,m,l),zS(r,pe()),r.callbackNode!=null&&r.callbackNode===u?US.bind(null,r):null)}function VS(r,l){if(Yd())return null;SS(r,l,!0)}function Hk(){tO(function(){(gt&6)!==0?Ke(fe,Vk):BS()})}function tg(){if(Or===0){var r=Ro;r===0&&(r=Ys,Ys<<=1,(Ys&261888)===0&&(Ys=256)),Or=r}return Or}function HS(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:id(""+r)}function $S(r,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,r.id&&u.setAttribute("form",r.id),l.parentNode.insertBefore(u,l),r=new FormData(r),u.parentNode.removeChild(u),r}function $k(r,l,u,m,v){if(l==="submit"&&u&&u.stateNode===v){var w=HS((v[Qn]||null).action),D=m.submitter;D&&(l=(l=D[Qn]||null)?HS(l.formAction):D.getAttribute("formAction"),l!==null&&(w=l,D=null));var O=new ld("action","action",null,m,v);r.push({event:O,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Or!==0){var V=D?$S(v,D):new FormData(v);wp(u,{pending:!0,data:V,method:v.method,action:w},null,V)}}else typeof w=="function"&&(O.preventDefault(),V=D?$S(v,D):new FormData(v),wp(u,{pending:!0,data:V,method:v.method,action:w},w,V))},currentTarget:v}]})}}for(var ng=0;ng<Im.length;ng++){var sg=Im[ng],qk=sg.toLowerCase(),Gk=sg[0].toUpperCase()+sg.slice(1);Xs(qk,"on"+Gk)}Xs(wx,"onAnimationEnd"),Xs(Sx,"onAnimationIteration"),Xs(Ax,"onAnimationStart"),Xs("dblclick","onDoubleClick"),Xs("focusin","onFocus"),Xs("focusout","onBlur"),Xs(lk,"onTransitionRun"),Xs(ck,"onTransitionStart"),Xs(uk,"onTransitionCancel"),Xs(Cx,"onTransitionEnd"),mo("onMouseEnter",["mouseout","mouseover"]),mo("onMouseLeave",["mouseout","mouseover"]),mo("onPointerEnter",["pointerout","pointerover"]),mo("onPointerLeave",["pointerout","pointerover"]),ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ca("onBeforeInput",["compositionend","keypress","textInput","paste"]),ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ec));function qS(r,l){l=(l&4)!==0;for(var u=0;u<r.length;u++){var m=r[u],v=m.event;m=m.listeners;e:{var w=void 0;if(l)for(var D=m.length-1;0<=D;D--){var O=m[D],V=O.instance,ee=O.currentTarget;if(O=O.listener,V!==w&&v.isPropagationStopped())break e;w=O,v.currentTarget=ee;try{w(v)}catch(le){dd(le)}v.currentTarget=null,w=V}else for(D=0;D<m.length;D++){if(O=m[D],V=O.instance,ee=O.currentTarget,O=O.listener,V!==w&&v.isPropagationStopped())break e;w=O,v.currentTarget=ee;try{w(v)}catch(le){dd(le)}v.currentTarget=null,w=V}}}}function rt(r,l){var u=l[gm];u===void 0&&(u=l[gm]=new Set);var m=r+"__bubble";u.has(m)||(GS(l,r,2,!1),u.add(m))}function ig(r,l,u){var m=0;l&&(m|=4),GS(u,r,m,l)}var Qd="_reactListening"+Math.random().toString(36).slice(2);function rg(r){if(!r[Qd]){r[Qd]=!0,Bb.forEach(function(u){u!=="selectionchange"&&(Kk.has(u)||ig(u,!1,r),ig(u,!0,r))});var l=r.nodeType===9?r:r.ownerDocument;l===null||l[Qd]||(l[Qd]=!0,ig("selectionchange",!1,l))}}function GS(r,l,u,m){switch(w1(l)){case 2:var v=wO;break;case 8:v=SO;break;default:v=xg}u=v.bind(null,l,u,r),v=void 0,!Em||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),m?v!==void 0?r.addEventListener(l,u,{capture:!0,passive:v}):r.addEventListener(l,u,!0):v!==void 0?r.addEventListener(l,u,{passive:v}):r.addEventListener(l,u,!1)}function ag(r,l,u,m,v){var w=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var D=m.tag;if(D===3||D===4){var O=m.stateNode.containerInfo;if(O===v)break;if(D===4)for(D=m.return;D!==null;){var V=D.tag;if((V===3||V===4)&&D.stateNode.containerInfo===v)return;D=D.return}for(;O!==null;){if(D=uo(O),D===null)return;if(V=D.tag,V===5||V===6||V===26||V===27){m=w=D;continue e}O=O.parentNode}}m=m.return}Qb(function(){var ee=w,le=Am(u),de=[];e:{var ne=Ex.get(r);if(ne!==void 0){var ae=ld,Me=r;switch(r){case"keypress":if(ad(u)===0)break e;case"keydown":case"keyup":ae=zP;break;case"focusin":Me="focus",ae=Dm;break;case"focusout":Me="blur",ae=Dm;break;case"beforeblur":case"afterblur":ae=Dm;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=ex;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=RP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=HP;break;case wx:case Sx:case Ax:ae=NP;break;case Cx:ae=qP;break;case"scroll":case"scrollend":ae=_P;break;case"wheel":ae=KP;break;case"copy":case"cut":case"paste":ae=kP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=nx;break;case"toggle":case"beforetoggle":ae=XP}var Ue=(l&4)!==0,St=!Ue&&(r==="scroll"||r==="scrollend"),Y=Ue?ne!==null?ne+"Capture":null:ne;Ue=[];for(var q=ee,J;q!==null;){var ue=q;if(J=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||J===null||Y===null||(ue=Kl(q,Y),ue!=null&&Ue.push(_c(q,ue,J))),St)break;q=q.return}0<Ue.length&&(ne=new ae(ne,Me,null,u,le),de.push({event:ne,listeners:Ue}))}}if((l&7)===0){e:{if(ne=r==="mouseover"||r==="pointerover",ae=r==="mouseout"||r==="pointerout",ne&&u!==Sm&&(Me=u.relatedTarget||u.fromElement)&&(uo(Me)||Me[co]))break e;if((ae||ne)&&(ne=le.window===le?le:(ne=le.ownerDocument)?ne.defaultView||ne.parentWindow:window,ae?(Me=u.relatedTarget||u.toElement,ae=ee,Me=Me?uo(Me):null,Me!==null&&(St=a(Me),Ue=Me.tag,Me!==St||Ue!==5&&Ue!==27&&Ue!==6)&&(Me=null)):(ae=null,Me=ee),ae!==Me)){if(Ue=ex,ue="onMouseLeave",Y="onMouseEnter",q="mouse",(r==="pointerout"||r==="pointerover")&&(Ue=nx,ue="onPointerLeave",Y="onPointerEnter",q="pointer"),St=ae==null?ne:Gl(ae),J=Me==null?ne:Gl(Me),ne=new Ue(ue,q+"leave",ae,u,le),ne.target=St,ne.relatedTarget=J,ue=null,uo(le)===ee&&(Ue=new Ue(Y,q+"enter",Me,u,le),Ue.target=J,Ue.relatedTarget=St,ue=Ue),St=ue,ae&&Me)t:{for(Ue=Yk,Y=ae,q=Me,J=0,ue=Y;ue;ue=Ue(ue))J++;ue=0;for(var Ie=q;Ie;Ie=Ue(Ie))ue++;for(;0<J-ue;)Y=Ue(Y),J--;for(;0<ue-J;)q=Ue(q),ue--;for(;J--;){if(Y===q||q!==null&&Y===q.alternate){Ue=Y;break t}Y=Ue(Y),q=Ue(q)}Ue=null}else Ue=null;ae!==null&&KS(de,ne,ae,Ue,!1),Me!==null&&St!==null&&KS(de,St,Me,Ue,!0)}}e:{if(ne=ee?Gl(ee):window,ae=ne.nodeName&&ne.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ne.type==="file")var mt=ux;else if(lx(ne))if(dx)mt=rk;else{mt=sk;var Le=nk}else ae=ne.nodeName,!ae||ae.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&wm(ee.elementType)&&(mt=ux):mt=ik;if(mt&&(mt=mt(r,ee))){cx(de,mt,u,le);break e}Le&&Le(r,ne,ee),r==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&xm(ne,"number",ne.value)}switch(Le=ee?Gl(ee):window,r){case"focusin":(lx(Le)||Le.contentEditable==="true")&&(xo=Le,jm=ee,tc=null);break;case"focusout":tc=jm=xo=null;break;case"mousedown":Lm=!0;break;case"contextmenu":case"mouseup":case"dragend":Lm=!1,bx(de,u,le);break;case"selectionchange":if(ok)break;case"keydown":case"keyup":bx(de,u,le)}var et;if(Nm)e:{switch(r){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else bo?ax(r,u)&&(lt="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(lt="onCompositionStart");lt&&(sx&&u.locale!=="ko"&&(bo||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&bo&&(et=Zb()):(vr=le,_m="value"in vr?vr.value:vr.textContent,bo=!0)),Le=Zd(ee,lt),0<Le.length&&(lt=new tx(lt,r,null,u,le),de.push({event:lt,listeners:Le}),et?lt.data=et:(et=ox(u),et!==null&&(lt.data=et)))),(et=QP?ZP(r,u):JP(r,u))&&(lt=Zd(ee,"onBeforeInput"),0<lt.length&&(Le=new tx("onBeforeInput","beforeinput",null,u,le),de.push({event:Le,listeners:lt}),Le.data=et)),$k(de,r,ee,u,le)}qS(de,l)})}function _c(r,l,u){return{instance:r,listener:l,currentTarget:u}}function Zd(r,l){for(var u=l+"Capture",m=[];r!==null;){var v=r,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=Kl(r,u),v!=null&&m.unshift(_c(r,v,w)),v=Kl(r,l),v!=null&&m.push(_c(r,v,w))),r.tag===3)return m;r=r.return}return[]}function Yk(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function KS(r,l,u,m,v){for(var w=l._reactName,D=[];u!==null&&u!==m;){var O=u,V=O.alternate,ee=O.stateNode;if(O=O.tag,V!==null&&V===m)break;O!==5&&O!==26&&O!==27||ee===null||(V=ee,v?(ee=Kl(u,w),ee!=null&&D.unshift(_c(u,ee,V))):v||(ee=Kl(u,w),ee!=null&&D.push(_c(u,ee,V)))),u=u.return}D.length!==0&&r.push({event:l,listeners:D})}var Xk=/\r\n?/g,Wk=/\u0000|\uFFFD/g;function YS(r){return(typeof r=="string"?r:""+r).replace(Xk,`
`).replace(Wk,"")}function XS(r,l){return l=YS(l),YS(r)===l}function wt(r,l,u,m,v,w){switch(u){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||go(r,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&go(r,""+m);break;case"className":nd(r,"class",m);break;case"tabIndex":nd(r,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":nd(r,u,m);break;case"style":Xb(r,m,w);break;case"data":if(l!=="object"){nd(r,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||u!=="href")){r.removeAttribute(u);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(u);break}m=id(""+m),r.setAttribute(u,m);break;case"action":case"formAction":if(typeof m=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(u==="formAction"?(l!=="input"&&wt(r,l,"name",v.name,v,null),wt(r,l,"formEncType",v.formEncType,v,null),wt(r,l,"formMethod",v.formMethod,v,null),wt(r,l,"formTarget",v.formTarget,v,null)):(wt(r,l,"encType",v.encType,v,null),wt(r,l,"method",v.method,v,null),wt(r,l,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(u);break}m=id(""+m),r.setAttribute(u,m);break;case"onClick":m!=null&&(r.onclick=ji);break;case"onScroll":m!=null&&rt("scroll",r);break;case"onScrollEnd":m!=null&&rt("scrollend",r);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(s(61));if(u=m.__html,u!=null){if(v.children!=null)throw Error(s(60));r.innerHTML=u}}break;case"multiple":r.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":r.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){r.removeAttribute("xlink:href");break}u=id(""+m),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(u,""+m):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":m===!0?r.setAttribute(u,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(u,m):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?r.setAttribute(u,m):r.removeAttribute(u);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?r.removeAttribute(u):r.setAttribute(u,m);break;case"popover":rt("beforetoggle",r),rt("toggle",r),td(r,"popover",m);break;case"xlinkActuate":Oi(r,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Oi(r,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Oi(r,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Oi(r,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Oi(r,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Oi(r,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Oi(r,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Oi(r,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Oi(r,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":td(r,"is",m);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=CP.get(u)||u,td(r,u,m))}}function og(r,l,u,m,v,w){switch(u){case"style":Xb(r,m,w);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(s(61));if(u=m.__html,u!=null){if(v.children!=null)throw Error(s(60));r.innerHTML=u}}break;case"children":typeof m=="string"?go(r,m):(typeof m=="number"||typeof m=="bigint")&&go(r,""+m);break;case"onScroll":m!=null&&rt("scroll",r);break;case"onScrollEnd":m!=null&&rt("scrollend",r);break;case"onClick":m!=null&&(r.onclick=ji);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zb.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),l=u.slice(2,v?u.length-7:void 0),w=r[Qn]||null,w=w!=null?w[u]:null,typeof w=="function"&&r.removeEventListener(l,w,v),typeof m=="function")){typeof w!="function"&&w!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(l,m,v);break e}u in r?r[u]=m:m===!0?r.setAttribute(u,""):td(r,u,m)}}}function An(r,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",r),rt("load",r);var m=!1,v=!1,w;for(w in u)if(u.hasOwnProperty(w)){var D=u[w];if(D!=null)switch(w){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:wt(r,l,w,D,u,null)}}v&&wt(r,l,"srcSet",u.srcSet,u,null),m&&wt(r,l,"src",u.src,u,null);return;case"input":rt("invalid",r);var O=w=D=v=null,V=null,ee=null;for(m in u)if(u.hasOwnProperty(m)){var le=u[m];if(le!=null)switch(m){case"name":v=le;break;case"type":D=le;break;case"checked":V=le;break;case"defaultChecked":ee=le;break;case"value":w=le;break;case"defaultValue":O=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(s(137,l));break;default:wt(r,l,m,le,u,null)}}qb(r,w,O,V,ee,D,v,!1);return;case"select":rt("invalid",r),m=D=w=null;for(v in u)if(u.hasOwnProperty(v)&&(O=u[v],O!=null))switch(v){case"value":w=O;break;case"defaultValue":D=O;break;case"multiple":m=O;default:wt(r,l,v,O,u,null)}l=w,u=D,r.multiple=!!m,l!=null?po(r,!!m,l,!1):u!=null&&po(r,!!m,u,!0);return;case"textarea":rt("invalid",r),w=v=m=null;for(D in u)if(u.hasOwnProperty(D)&&(O=u[D],O!=null))switch(D){case"value":m=O;break;case"defaultValue":v=O;break;case"children":w=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(s(91));break;default:wt(r,l,D,O,u,null)}Kb(r,m,v,w);return;case"option":for(V in u)u.hasOwnProperty(V)&&(m=u[V],m!=null)&&(V==="selected"?r.selected=m&&typeof m!="function"&&typeof m!="symbol":wt(r,l,V,m,u,null));return;case"dialog":rt("beforetoggle",r),rt("toggle",r),rt("cancel",r),rt("close",r);break;case"iframe":case"object":rt("load",r);break;case"video":case"audio":for(m=0;m<Ec.length;m++)rt(Ec[m],r);break;case"image":rt("error",r),rt("load",r);break;case"details":rt("toggle",r);break;case"embed":case"source":case"link":rt("error",r),rt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in u)if(u.hasOwnProperty(ee)&&(m=u[ee],m!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,l));default:wt(r,l,ee,m,u,null)}return;default:if(wm(l)){for(le in u)u.hasOwnProperty(le)&&(m=u[le],m!==void 0&&og(r,l,le,m,u,void 0));return}}for(O in u)u.hasOwnProperty(O)&&(m=u[O],m!=null&&wt(r,l,O,m,u,null))}function Qk(r,l,u,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,D=null,O=null,V=null,ee=null,le=null;for(ae in u){var de=u[ae];if(u.hasOwnProperty(ae)&&de!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":V=de;default:m.hasOwnProperty(ae)||wt(r,l,ae,null,m,de)}}for(var ne in m){var ae=m[ne];if(de=u[ne],m.hasOwnProperty(ne)&&(ae!=null||de!=null))switch(ne){case"type":w=ae;break;case"name":v=ae;break;case"checked":ee=ae;break;case"defaultChecked":le=ae;break;case"value":D=ae;break;case"defaultValue":O=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,l));break;default:ae!==de&&wt(r,l,ne,ae,m,de)}}bm(r,D,O,V,ee,le,w,v);return;case"select":ae=D=O=ne=null;for(w in u)if(V=u[w],u.hasOwnProperty(w)&&V!=null)switch(w){case"value":break;case"multiple":ae=V;default:m.hasOwnProperty(w)||wt(r,l,w,null,m,V)}for(v in m)if(w=m[v],V=u[v],m.hasOwnProperty(v)&&(w!=null||V!=null))switch(v){case"value":ne=w;break;case"defaultValue":O=w;break;case"multiple":D=w;default:w!==V&&wt(r,l,v,w,m,V)}l=O,u=D,m=ae,ne!=null?po(r,!!u,ne,!1):!!m!=!!u&&(l!=null?po(r,!!u,l,!0):po(r,!!u,u?[]:"",!1));return;case"textarea":ae=ne=null;for(O in u)if(v=u[O],u.hasOwnProperty(O)&&v!=null&&!m.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:wt(r,l,O,null,m,v)}for(D in m)if(v=m[D],w=u[D],m.hasOwnProperty(D)&&(v!=null||w!=null))switch(D){case"value":ne=v;break;case"defaultValue":ae=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:v!==w&&wt(r,l,D,v,m,w)}Gb(r,ne,ae);return;case"option":for(var Me in u)ne=u[Me],u.hasOwnProperty(Me)&&ne!=null&&!m.hasOwnProperty(Me)&&(Me==="selected"?r.selected=!1:wt(r,l,Me,null,m,ne));for(V in m)ne=m[V],ae=u[V],m.hasOwnProperty(V)&&ne!==ae&&(ne!=null||ae!=null)&&(V==="selected"?r.selected=ne&&typeof ne!="function"&&typeof ne!="symbol":wt(r,l,V,ne,m,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in u)ne=u[Ue],u.hasOwnProperty(Ue)&&ne!=null&&!m.hasOwnProperty(Ue)&&wt(r,l,Ue,null,m,ne);for(ee in m)if(ne=m[ee],ae=u[ee],m.hasOwnProperty(ee)&&ne!==ae&&(ne!=null||ae!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,l));break;default:wt(r,l,ee,ne,m,ae)}return;default:if(wm(l)){for(var St in u)ne=u[St],u.hasOwnProperty(St)&&ne!==void 0&&!m.hasOwnProperty(St)&&og(r,l,St,void 0,m,ne);for(le in m)ne=m[le],ae=u[le],!m.hasOwnProperty(le)||ne===ae||ne===void 0&&ae===void 0||og(r,l,le,ne,m,ae);return}}for(var Y in u)ne=u[Y],u.hasOwnProperty(Y)&&ne!=null&&!m.hasOwnProperty(Y)&&wt(r,l,Y,null,m,ne);for(de in m)ne=m[de],ae=u[de],!m.hasOwnProperty(de)||ne===ae||ne==null&&ae==null||wt(r,l,de,ne,m,ae)}function WS(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Zk(){if(typeof performance.getEntriesByType=="function"){for(var r=0,l=0,u=performance.getEntriesByType("resource"),m=0;m<u.length;m++){var v=u[m],w=v.transferSize,D=v.initiatorType,O=v.duration;if(w&&O&&WS(D)){for(D=0,O=v.responseEnd,m+=1;m<u.length;m++){var V=u[m],ee=V.startTime;if(ee>O)break;var le=V.transferSize,de=V.initiatorType;le&&WS(de)&&(V=V.responseEnd,D+=le*(V<O?1:(O-ee)/(V-ee)))}if(--m,l+=8*(w+D)/(v.duration/1e3),r++,10<r)break}}if(0<r)return l/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var lg=null,cg=null;function Jd(r){return r.nodeType===9?r:r.ownerDocument}function QS(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ZS(r,l){if(r===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&l==="foreignObject"?0:r}function ug(r,l){return r==="textarea"||r==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var dg=null;function Jk(){var r=window.event;return r&&r.type==="popstate"?r===dg?!1:(dg=r,!0):(dg=null,!1)}var JS=typeof setTimeout=="function"?setTimeout:void 0,eO=typeof clearTimeout=="function"?clearTimeout:void 0,e1=typeof Promise=="function"?Promise:void 0,tO=typeof queueMicrotask=="function"?queueMicrotask:typeof e1<"u"?function(r){return e1.resolve(null).then(r).catch(nO)}:JS;function nO(r){setTimeout(function(){throw r})}function jr(r){return r==="head"}function t1(r,l){var u=l,m=0;do{var v=u.nextSibling;if(r.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(m===0){r.removeChild(v),Ko(l);return}m--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")m++;else if(u==="html")Tc(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,Tc(u);for(var w=u.firstChild;w;){var D=w.nextSibling,O=w.nodeName;w[ql]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&w.rel.toLowerCase()==="stylesheet"||u.removeChild(w),w=D}}else u==="body"&&Tc(r.ownerDocument.body);u=v}while(u);Ko(l)}function n1(r,l){var u=r;r=0;do{var m=u.nextSibling;if(u.nodeType===1?l?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(l?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=m}while(u)}function hg(r){var l=r.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":hg(u),ym(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function sO(r,l,u,m){for(;r.nodeType===1;){var v=u;if(r.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(m){if(!r[ql])switch(l){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(w=r.getAttribute("rel"),w==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(w!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(w=r.getAttribute("src"),(w!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(l==="input"&&r.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===w)return r}else return r;if(r=Os(r.nextSibling),r===null)break}return null}function iO(r,l,u){if(l==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=Os(r.nextSibling),r===null))return null;return r}function s1(r,l){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Os(r.nextSibling),r===null))return null;return r}function fg(r){return r.data==="$?"||r.data==="$~"}function mg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function rO(r,l){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=l;else if(r.data!=="$?"||u.readyState!=="loading")l();else{var m=function(){l(),u.removeEventListener("DOMContentLoaded",m)};u.addEventListener("DOMContentLoaded",m),r._reactRetry=m}}function Os(r){for(;r!=null;r=r.nextSibling){var l=r.nodeType;if(l===1||l===3)break;if(l===8){if(l=r.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return r}var pg=null;function i1(r){r=r.nextSibling;for(var l=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(l===0)return Os(r.nextSibling);l--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||l++}r=r.nextSibling}return null}function r1(r){r=r.previousSibling;for(var l=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(l===0)return r;l--}else u!=="/$"&&u!=="/&"||l++}r=r.previousSibling}return null}function a1(r,l,u){switch(l=Jd(u),r){case"html":if(r=l.documentElement,!r)throw Error(s(452));return r;case"head":if(r=l.head,!r)throw Error(s(453));return r;case"body":if(r=l.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Tc(r){for(var l=r.attributes;l.length;)r.removeAttributeNode(l[0]);ym(r)}var js=new Map,o1=new Set;function eh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Qi=B.d;B.d={f:aO,r:oO,D:lO,C:cO,L:uO,m:dO,X:fO,S:hO,M:mO};function aO(){var r=Qi.f(),l=qd();return r||l}function oO(r){var l=ho(r);l!==null&&l.tag===5&&l.type==="form"?Cw(l):Qi.r(r)}var $o=typeof document>"u"?null:document;function l1(r,l,u){var m=$o;if(m&&typeof l=="string"&&l){var v=Ts(l);v='link[rel="'+r+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),o1.has(v)||(o1.add(v),r={rel:r,crossOrigin:u,href:l},m.querySelector(v)===null&&(l=m.createElement("link"),An(l,"link",r),un(l),m.head.appendChild(l)))}}function lO(r){Qi.D(r),l1("dns-prefetch",r,null)}function cO(r,l){Qi.C(r,l),l1("preconnect",r,l)}function uO(r,l,u){Qi.L(r,l,u);var m=$o;if(m&&r&&l){var v='link[rel="preload"][as="'+Ts(l)+'"]';l==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+Ts(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+Ts(u.imageSizes)+'"]')):v+='[href="'+Ts(r)+'"]';var w=v;switch(l){case"style":w=qo(r);break;case"script":w=Go(r)}js.has(w)||(r=p({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:r,as:l},u),js.set(w,r),m.querySelector(v)!==null||l==="style"&&m.querySelector(Rc(w))||l==="script"&&m.querySelector(Dc(w))||(l=m.createElement("link"),An(l,"link",r),un(l),m.head.appendChild(l)))}}function dO(r,l){Qi.m(r,l);var u=$o;if(u&&r){var m=l&&typeof l.as=="string"?l.as:"script",v='link[rel="modulepreload"][as="'+Ts(m)+'"][href="'+Ts(r)+'"]',w=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Go(r)}if(!js.has(w)&&(r=p({rel:"modulepreload",href:r},l),js.set(w,r),u.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Dc(w)))return}m=u.createElement("link"),An(m,"link",r),un(m),u.head.appendChild(m)}}}function hO(r,l,u){Qi.S(r,l,u);var m=$o;if(m&&r){var v=fo(m).hoistableStyles,w=qo(r);l=l||"default";var D=v.get(w);if(!D){var O={loading:0,preload:null};if(D=m.querySelector(Rc(w)))O.loading=5;else{r=p({rel:"stylesheet",href:r,"data-precedence":l},u),(u=js.get(w))&&gg(r,u);var V=D=m.createElement("link");un(V),An(V,"link",r),V._p=new Promise(function(ee,le){V.onload=ee,V.onerror=le}),V.addEventListener("load",function(){O.loading|=1}),V.addEventListener("error",function(){O.loading|=2}),O.loading|=4,th(D,l,m)}D={type:"stylesheet",instance:D,count:1,state:O},v.set(w,D)}}}function fO(r,l){Qi.X(r,l);var u=$o;if(u&&r){var m=fo(u).hoistableScripts,v=Go(r),w=m.get(v);w||(w=u.querySelector(Dc(v)),w||(r=p({src:r,async:!0},l),(l=js.get(v))&&yg(r,l),w=u.createElement("script"),un(w),An(w,"link",r),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(v,w))}}function mO(r,l){Qi.M(r,l);var u=$o;if(u&&r){var m=fo(u).hoistableScripts,v=Go(r),w=m.get(v);w||(w=u.querySelector(Dc(v)),w||(r=p({src:r,async:!0,type:"module"},l),(l=js.get(v))&&yg(r,l),w=u.createElement("script"),un(w),An(w,"link",r),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},m.set(v,w))}}function c1(r,l,u,m){var v=(v=be.current)?eh(v):null;if(!v)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=qo(u.href),u=fo(v).hoistableStyles,m=u.get(l),m||(m={type:"style",instance:null,count:0,state:null},u.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=qo(u.href);var w=fo(v).hoistableStyles,D=w.get(r);if(D||(v=v.ownerDocument||v,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(r,D),(w=v.querySelector(Rc(r)))&&!w._p&&(D.instance=w,D.state.loading=5),js.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},js.set(r,u),w||pO(v,r,u,D.state))),l&&m===null)throw Error(s(528,""));return D}if(l&&m!==null)throw Error(s(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Go(u),u=fo(v).hoistableScripts,m=u.get(l),m||(m={type:"script",instance:null,count:0,state:null},u.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function qo(r){return'href="'+Ts(r)+'"'}function Rc(r){return'link[rel="stylesheet"]['+r+"]"}function u1(r){return p({},r,{"data-precedence":r.precedence,precedence:null})}function pO(r,l,u,m){r.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=r.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),An(l,"link",u),un(l),r.head.appendChild(l))}function Go(r){return'[src="'+Ts(r)+'"]'}function Dc(r){return"script[async]"+r}function d1(r,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var m=r.querySelector('style[data-href~="'+Ts(u.href)+'"]');if(m)return l.instance=m,un(m),m;var v=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return m=(r.ownerDocument||r).createElement("style"),un(m),An(m,"style",v),th(m,u.precedence,r),l.instance=m;case"stylesheet":v=qo(u.href);var w=r.querySelector(Rc(v));if(w)return l.state.loading|=4,l.instance=w,un(w),w;m=u1(u),(v=js.get(v))&&gg(m,v),w=(r.ownerDocument||r).createElement("link"),un(w);var D=w;return D._p=new Promise(function(O,V){D.onload=O,D.onerror=V}),An(w,"link",m),l.state.loading|=4,th(w,u.precedence,r),l.instance=w;case"script":return w=Go(u.src),(v=r.querySelector(Dc(w)))?(l.instance=v,un(v),v):(m=u,(v=js.get(w))&&(m=p({},u),yg(m,v)),r=r.ownerDocument||r,v=r.createElement("script"),un(v),An(v,"link",m),r.head.appendChild(v),l.instance=v);case"void":return null;default:throw Error(s(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,th(m,u.precedence,r));return l.instance}function th(r,l,u){for(var m=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,w=v,D=0;D<m.length;D++){var O=m[D];if(O.dataset.precedence===l)w=O;else if(w!==v)break}w?w.parentNode.insertBefore(r,w.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(r,l.firstChild))}function gg(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.title==null&&(r.title=l.title)}function yg(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.integrity==null&&(r.integrity=l.integrity)}var nh=null;function h1(r,l,u){if(nh===null){var m=new Map,v=nh=new Map;v.set(u,m)}else v=nh,m=v.get(u),m||(m=new Map,v.set(u,m));if(m.has(r))return m;for(m.set(r,null),u=u.getElementsByTagName(r),v=0;v<u.length;v++){var w=u[v];if(!(w[ql]||w[bn]||r==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var D=w.getAttribute(l)||"";D=r+D;var O=m.get(D);O?O.push(w):m.set(D,[w])}}return m}function f1(r,l,u){r=r.ownerDocument||r,r.head.insertBefore(u,l==="title"?r.querySelector("head > title"):null)}function gO(r,l,u){if(u===1||l.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(r=l.disabled,typeof l.precedence=="string"&&r==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function m1(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function yO(r,l,u,m){if(u.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=qo(m.href),w=l.querySelector(Rc(v));if(w){l=w._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(r.count++,r=sh.bind(r),l.then(r,r)),u.state.loading|=4,u.instance=w,un(w);return}w=l.ownerDocument||l,m=u1(m),(v=js.get(v))&&gg(m,v),w=w.createElement("link"),un(w);var D=w;D._p=new Promise(function(O,V){D.onload=O,D.onerror=V}),An(w,"link",m),u.instance=w}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=sh.bind(r),l.addEventListener("load",u),l.addEventListener("error",u))}}var vg=0;function vO(r,l){return r.stylesheets&&r.count===0&&rh(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var m=setTimeout(function(){if(r.stylesheets&&rh(r,r.stylesheets),r.unsuspend){var w=r.unsuspend;r.unsuspend=null,w()}},6e4+l);0<r.imgBytes&&vg===0&&(vg=62500*Zk());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&rh(r,r.stylesheets),r.unsuspend)){var w=r.unsuspend;r.unsuspend=null,w()}},(r.imgBytes>vg?50:800)+l);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(m),clearTimeout(v)}}:null}function sh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)rh(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var ih=null;function rh(r,l){r.stylesheets=null,r.unsuspend!==null&&(r.count++,ih=new Map,l.forEach(bO,r),ih=null,sh.call(r))}function bO(r,l){if(!(l.state.loading&4)){var u=ih.get(r);if(u)var m=u.get(null);else{u=new Map,ih.set(r,u);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var D=v[w];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(u.set(D.dataset.precedence,D),m=D)}m&&u.set(null,m)}v=l.instance,D=v.getAttribute("data-precedence"),w=u.get(D)||m,w===m&&u.set(null,v),u.set(D,v),this.count++,m=sh.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),w?w.parentNode.insertBefore(v,w.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),l.state.loading|=4}}var Mc={$$typeof:T,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function xO(r,l,u,m,v,w,D,O,V){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fm(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fm(0),this.hiddenUpdates=fm(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function p1(r,l,u,m,v,w,D,O,V,ee,le,de){return r=new xO(r,l,u,D,V,ee,le,de,O),l=1,w===!0&&(l|=24),w=ds(3,null,null,l),r.current=w,w.stateNode=r,l=Qm(),l.refCount++,r.pooledCache=l,l.refCount++,w.memoizedState={element:m,isDehydrated:u,cache:l},tp(w),r}function g1(r){return r?(r=Ao,r):Ao}function y1(r,l,u,m,v,w){v=g1(v),m.context===null?m.context=v:m.pendingContext=v,m=Cr(l),m.payload={element:u},w=w===void 0?null:w,w!==null&&(m.callback=w),u=Er(r,m,l),u!==null&&(ss(u,r,l),lc(u,r,l))}function v1(r,l){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<l?u:l}}function bg(r,l){v1(r,l),(r=r.alternate)&&v1(r,l)}function b1(r){if(r.tag===13||r.tag===31){var l=fa(r,67108864);l!==null&&ss(l,r,67108864),bg(r,67108864)}}function x1(r){if(r.tag===13||r.tag===31){var l=gs();l=mm(l);var u=fa(r,l);u!==null&&ss(u,r,l),bg(r,l)}}var ah=!0;function wO(r,l,u,m){var v=F.T;F.T=null;var w=B.p;try{B.p=2,xg(r,l,u,m)}finally{B.p=w,F.T=v}}function SO(r,l,u,m){var v=F.T;F.T=null;var w=B.p;try{B.p=8,xg(r,l,u,m)}finally{B.p=w,F.T=v}}function xg(r,l,u,m){if(ah){var v=wg(m);if(v===null)ag(r,l,m,oh,u),S1(r,m);else if(CO(v,r,l,u,m))m.stopPropagation();else if(S1(r,m),l&4&&-1<AO.indexOf(r)){for(;v!==null;){var w=ho(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var D=ki(w.pendingLanes);if(D!==0){var O=w;for(O.pendingLanes|=2,O.entangledLanes|=2;D;){var V=1<<31-vn(D);O.entanglements[1]|=V,D&=~V}hi(w),(gt&6)===0&&(Hd=pe()+500,Cc(0))}}break;case 31:case 13:O=fa(w,2),O!==null&&ss(O,w,2),qd(),bg(w,2)}if(w=wg(m),w===null&&ag(r,l,m,oh,u),w===v)break;v=w}v!==null&&m.stopPropagation()}else ag(r,l,m,null,u)}}function wg(r){return r=Am(r),Sg(r)}var oh=null;function Sg(r){if(oh=null,r=uo(r),r!==null){var l=a(r);if(l===null)r=null;else{var u=l.tag;if(u===13){if(r=o(l),r!==null)return r;r=null}else if(u===31){if(r=c(l),r!==null)return r;r=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;r=null}else l!==r&&(r=null)}}return oh=r,null}function w1(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ge()){case fe:return 2;case re:return 8;case Te:case qe:return 32;case yt:return 268435456;default:return 32}default:return 32}}var Ag=!1,Lr=null,Fr=null,Ir=null,Nc=new Map,Pc=new Map,Br=[],AO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function S1(r,l){switch(r){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":Nc.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(l.pointerId)}}function kc(r,l,u,m,v,w){return r===null||r.nativeEvent!==w?(r={blockedOn:l,domEventName:u,eventSystemFlags:m,nativeEvent:w,targetContainers:[v]},l!==null&&(l=ho(l),l!==null&&b1(l)),r):(r.eventSystemFlags|=m,l=r.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),r)}function CO(r,l,u,m,v){switch(l){case"focusin":return Lr=kc(Lr,r,l,u,m,v),!0;case"dragenter":return Fr=kc(Fr,r,l,u,m,v),!0;case"mouseover":return Ir=kc(Ir,r,l,u,m,v),!0;case"pointerover":var w=v.pointerId;return Nc.set(w,kc(Nc.get(w)||null,r,l,u,m,v)),!0;case"gotpointercapture":return w=v.pointerId,Pc.set(w,kc(Pc.get(w)||null,r,l,u,m,v)),!0}return!1}function A1(r){var l=uo(r.target);if(l!==null){var u=a(l);if(u!==null){if(l=u.tag,l===13){if(l=o(u),l!==null){r.blockedOn=l,Fb(r.priority,function(){x1(u)});return}}else if(l===31){if(l=c(u),l!==null){r.blockedOn=l,Fb(r.priority,function(){x1(u)});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function lh(r){if(r.blockedOn!==null)return!1;for(var l=r.targetContainers;0<l.length;){var u=wg(r.nativeEvent);if(u===null){u=r.nativeEvent;var m=new u.constructor(u.type,u);Sm=m,u.target.dispatchEvent(m),Sm=null}else return l=ho(u),l!==null&&b1(l),r.blockedOn=u,!1;l.shift()}return!0}function C1(r,l,u){lh(r)&&u.delete(l)}function EO(){Ag=!1,Lr!==null&&lh(Lr)&&(Lr=null),Fr!==null&&lh(Fr)&&(Fr=null),Ir!==null&&lh(Ir)&&(Ir=null),Nc.forEach(C1),Pc.forEach(C1)}function ch(r,l){r.blockedOn===l&&(r.blockedOn=null,Ag||(Ag=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,EO)))}var uh=null;function E1(r){uh!==r&&(uh=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){uh===r&&(uh=null);for(var l=0;l<r.length;l+=3){var u=r[l],m=r[l+1],v=r[l+2];if(typeof m!="function"){if(Sg(m||u)===null)continue;break}var w=ho(u);w!==null&&(r.splice(l,3),l-=3,wp(w,{pending:!0,data:v,method:u.method,action:m},m,v))}}))}function Ko(r){function l(V){return ch(V,r)}Lr!==null&&ch(Lr,r),Fr!==null&&ch(Fr,r),Ir!==null&&ch(Ir,r),Nc.forEach(l),Pc.forEach(l);for(var u=0;u<Br.length;u++){var m=Br[u];m.blockedOn===r&&(m.blockedOn=null)}for(;0<Br.length&&(u=Br[0],u.blockedOn===null);)A1(u),u.blockedOn===null&&Br.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(m=0;m<u.length;m+=3){var v=u[m],w=u[m+1],D=v[Qn]||null;if(typeof w=="function")D||E1(u);else if(D){var O=null;if(w&&w.hasAttribute("formAction")){if(v=w,D=w[Qn]||null)O=D.formAction;else if(Sg(v)!==null)continue}else O=D.action;typeof O=="function"?u[m+1]=O:(u.splice(m,3),m-=3),E1(u)}}}function _1(){function r(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(D){return v=D})},focusReset:"manual",scroll:"manual"})}function l(){v!==null&&(v(),v=null),m||setTimeout(u,20)}function u(){if(!m&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(u,100),function(){m=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),v!==null&&(v(),v=null)}}}function Cg(r){this._internalRoot=r}dh.prototype.render=Cg.prototype.render=function(r){var l=this._internalRoot;if(l===null)throw Error(s(409));var u=l.current,m=gs();y1(u,m,r,l,null,null)},dh.prototype.unmount=Cg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var l=r.containerInfo;y1(r.current,2,null,r,null,null),qd(),l[co]=null}};function dh(r){this._internalRoot=r}dh.prototype.unstable_scheduleHydration=function(r){if(r){var l=Lb();r={blockedOn:null,target:r,priority:l};for(var u=0;u<Br.length&&l!==0&&l<Br[u].priority;u++);Br.splice(u,0,r),u===0&&A1(r)}};var T1=e.version;if(T1!=="19.2.3")throw Error(s(527,T1,"19.2.3"));B.findDOMNode=function(r){var l=r._reactInternals;if(l===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=h(l),r=r!==null?f(r):null,r=r===null?null:r.stateNode,r};var _O={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hh.isDisabled&&hh.supportsFiber)try{Pi=hh.inject(_O),rn=hh}catch{}}return jc.createRoot=function(r,l){if(!i(r))throw Error(s(299));var u=!1,m="",v=Ow,w=jw,D=Lw;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(D=l.onRecoverableError)),l=p1(r,1,!1,null,null,u,m,null,v,w,D,_1),r[co]=l.current,rg(r),new Cg(l)},jc.hydrateRoot=function(r,l,u){if(!i(r))throw Error(s(299));var m=!1,v="",w=Ow,D=jw,O=Lw,V=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(w=u.onUncaughtError),u.onCaughtError!==void 0&&(D=u.onCaughtError),u.onRecoverableError!==void 0&&(O=u.onRecoverableError),u.formState!==void 0&&(V=u.formState)),l=p1(r,1,!0,l,u??null,m,v,V,w,D,O,_1),l.context=g1(null),u=l.current,m=gs(),m=mm(m),v=Cr(m),v.callback=null,Er(u,v,m),u=m,l.current.lanes=u,$l(l,u),hi(l),r[co]=l.current,rg(r),new dh(l)},jc.version="19.2.3",jc}var B1;function LO(){if(B1)return Rg.exports;B1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Rg.exports=jO(),Rg.exports}var FO=LO(),Dl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},IO={setTimeout:(n,e)=>setTimeout(n,e),clearTimeout:n=>clearTimeout(n),setInterval:(n,e)=>setInterval(n,e),clearInterval:n=>clearInterval(n)},BO=class{#e=IO;#t=!1;setTimeoutProvider(n){this.#e=n}setTimeout(n,e){return this.#e.setTimeout(n,e)}clearTimeout(n){this.#e.clearTimeout(n)}setInterval(n,e){return this.#e.setInterval(n,e)}clearInterval(n){this.#e.clearInterval(n)}},ja=new BO;function zO(n){setTimeout(n,0)}var Ga=typeof window>"u"||"Deno"in globalThis;function Bn(){}function UO(n,e){return typeof n=="function"?n(e):n}function Ty(n){return typeof n=="number"&&n>=0&&n!==1/0}function y_(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Yr(n,e){return typeof n=="function"?n(e):n}function zs(n,e){return typeof n=="function"?n(e):n}function z1(n,e){const{type:t="all",exact:s,fetchStatus:i,predicate:a,queryKey:o,stale:c}=n;if(o){if(s){if(e.queryHash!==Uv(o,e.options))return!1}else if(!uu(e.queryKey,o))return!1}if(t!=="all"){const d=e.isActive();if(t==="active"&&!d||t==="inactive"&&d)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||i&&i!==e.state.fetchStatus||a&&!a(e))}function U1(n,e){const{exact:t,status:s,predicate:i,mutationKey:a}=n;if(a){if(!e.options.mutationKey)return!1;if(t){if(Ka(e.options.mutationKey)!==Ka(a))return!1}else if(!uu(e.options.mutationKey,a))return!1}return!(s&&e.state.status!==s||i&&!i(e))}function Uv(n,e){return(e?.queryKeyHashFn||Ka)(n)}function Ka(n){return JSON.stringify(n,(e,t)=>Ry(t)?Object.keys(t).sort().reduce((s,i)=>(s[i]=t[i],s),{}):t)}function uu(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?Object.keys(e).every(t=>uu(n[t],e[t])):!1}var VO=Object.prototype.hasOwnProperty;function v_(n,e,t=0){if(n===e)return n;if(t>500)return e;const s=V1(n)&&V1(e);if(!s&&!(Ry(n)&&Ry(e)))return e;const a=(s?n:Object.keys(n)).length,o=s?e:Object.keys(e),c=o.length,d=s?new Array(c):{};let h=0;for(let f=0;f<c;f++){const p=s?f:o[f],y=n[p],b=e[p];if(y===b){d[p]=y,(s?f<a:VO.call(n,p))&&h++;continue}if(y===null||b===null||typeof y!="object"||typeof b!="object"){d[p]=b;continue}const A=v_(y,b,t+1);d[p]=A,A===y&&h++}return a===c&&h===a?n:d}function Wh(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function V1(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function Ry(n){if(!H1(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!H1(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function H1(n){return Object.prototype.toString.call(n)==="[object Object]"}function HO(n){return new Promise(e=>{ja.setTimeout(e,n)})}function Dy(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?v_(n,e):e}function $O(n){return n}function qO(n,e,t=0){const s=[...n,e];return t&&s.length>t?s.slice(1):s}function GO(n,e,t=0){const s=[e,...n];return t&&s.length>t?s.slice(0,-1):s}var Vv=Symbol();function b_(n,e){return!n.queryFn&&e?.initialPromise?()=>e.initialPromise:!n.queryFn||n.queryFn===Vv?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}function Hv(n,e){return typeof n=="function"?n(...e):!!n}function KO(n,e,t){let s=!1,i;return Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(i??=e(),s||(s=!0,i.aborted?t():i.addEventListener("abort",t,{once:!0})),i)}),n}var YO=class extends Dl{#e;#t;#s;constructor(){super(),this.#s=n=>{if(!Ga&&window.addEventListener){const e=()=>n();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#s=n,this.#t?.(),this.#t=n(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(n){this.#e!==n&&(this.#e=n,this.onFocus())}onFocus(){const n=this.isFocused();this.listeners.forEach(e=>{e(n)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},$v=new YO;function My(){let n,e;const t=new Promise((i,a)=>{n=i,e=a});t.status="pending",t.catch(()=>{});function s(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{s({status:"fulfilled",value:i}),n(i)},t.reject=i=>{s({status:"rejected",reason:i}),e(i)},t}var XO=zO;function WO(){let n=[],e=0,t=c=>{c()},s=c=>{c()},i=XO;const a=c=>{e?n.push(c):i(()=>{t(c)})},o=()=>{const c=n;n=[],c.length&&i(()=>{s(()=>{c.forEach(d=>{t(d)})})})};return{batch:c=>{let d;e++;try{d=c()}finally{e--,e||o()}return d},batchCalls:c=>(...d)=>{a(()=>{c(...d)})},schedule:a,setNotifyFunction:c=>{t=c},setBatchNotifyFunction:c=>{s=c},setScheduler:c=>{i=c}}}var cn=WO(),QO=class extends Dl{#e=!0;#t;#s;constructor(){super(),this.#s=n=>{if(!Ga&&window.addEventListener){const e=()=>n(!0),t=()=>n(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(n){this.#s=n,this.#t?.(),this.#t=n(this.setOnline.bind(this))}setOnline(n){this.#e!==n&&(this.#e=n,this.listeners.forEach(t=>{t(n)}))}isOnline(){return this.#e}},Qh=new QO;function ZO(n){return Math.min(1e3*2**n,3e4)}function x_(n){return(n??"online")==="online"?Qh.isOnline():!0}var Ny=class extends Error{constructor(n){super("CancelledError"),this.revert=n?.revert,this.silent=n?.silent}};function w_(n){let e=!1,t=0,s;const i=My(),a=()=>i.status!=="pending",o=S=>{if(!a()){const E=new Ny(S);y(E),n.onCancel?.(E)}},c=()=>{e=!0},d=()=>{e=!1},h=()=>$v.isFocused()&&(n.networkMode==="always"||Qh.isOnline())&&n.canRun(),f=()=>x_(n.networkMode)&&n.canRun(),p=S=>{a()||(s?.(),i.resolve(S))},y=S=>{a()||(s?.(),i.reject(S))},b=()=>new Promise(S=>{s=E=>{(a()||h())&&S(E)},n.onPause?.()}).then(()=>{s=void 0,a()||n.onContinue?.()}),A=()=>{if(a())return;let S;const E=t===0?n.initialPromise:void 0;try{S=E??n.fn()}catch(C){S=Promise.reject(C)}Promise.resolve(S).then(p).catch(C=>{if(a())return;const _=n.retry??(Ga?0:3),T=n.retryDelay??ZO,R=typeof T=="function"?T(t,C):T,M=_===!0||typeof _=="number"&&t<_||typeof _=="function"&&_(t,C);if(e||!M){y(C);return}t++,n.onFail?.(t,C),HO(R).then(()=>h()?void 0:b()).then(()=>{e?y(C):A()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(s?.(),i),cancelRetry:c,continueRetry:d,canStart:f,start:()=>(f()?A():b().then(A),i)}}var S_=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ty(this.gcTime)&&(this.#e=ja.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Ga?1/0:300*1e3))}clearGcTimeout(){this.#e&&(ja.clearTimeout(this.#e),this.#e=void 0)}},JO=class extends S_{#e;#t;#s;#n;#i;#r;#a;constructor(n){super(),this.#a=!1,this.#r=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.#n=n.client,this.#s=this.#n.getQueryCache(),this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.#e=q1(this.options),this.state=n.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(n){if(this.options={...this.#r,...n},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=q1(this.options);e.data!==void 0&&(this.setState($1(e.data,e.dataUpdatedAt)),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(n,e){const t=Dy(this.state.data,n,this.options);return this.#o({data:t,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),t}setState(n,e){this.#o({type:"setState",state:n,setStateOptions:e})}cancel(n){const e=this.#i?.promise;return this.#i?.cancel(n),e?e.then(Bn).catch(Bn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(n=>zs(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Vv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Yr(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!y_(this.state.dataUpdatedAt,n)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(e=>e!==n),this.observers.length||(this.#i&&(this.#a?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#o({type:"invalidate"})}async fetch(n,e){if(this.state.fetchStatus!=="idle"&&this.#i?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(n&&this.setOptions(n),!this.options.queryFn){const c=this.observers.find(d=>d.options.queryFn);c&&this.setOptions(c.options)}const t=new AbortController,s=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#a=!0,t.signal)})},i=()=>{const c=b_(this.options,e),h=(()=>{const f={client:this.#n,queryKey:this.queryKey,meta:this.meta};return s(f),f})();return this.#a=!1,this.options.persister?this.options.persister(c,h,this):c(h)},o=(()=>{const c={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:i};return s(c),c})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#o({type:"fetch",meta:o.fetchOptions?.meta}),this.#i=w_({initialPromise:e?.initialPromise,fn:o.fetchFn,onCancel:c=>{c instanceof Ny&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),t.abort()},onFail:(c,d)=>{this.#o({type:"failed",failureCount:c,error:d})},onPause:()=>{this.#o({type:"pause"})},onContinue:()=>{this.#o({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const c=await this.#i.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#s.config.onSuccess?.(c,this),this.#s.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof Ny){if(c.silent)return this.#i.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#o({type:"error",error:c}),this.#s.config.onError?.(c,this),this.#s.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#o(n){const e=t=>{switch(n.type){case"failed":return{...t,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...A_(t.data,this.options),fetchMeta:n.meta??null};case"success":const s={...t,...$1(n.data,n.dataUpdatedAt),dataUpdateCount:t.dataUpdateCount+1,...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=n.manual?s:void 0,s;case"error":const i=n.error;return{...t,error:i,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...n.state}}};this.state=e(this.state),cn.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:n})})}};function A_(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:x_(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function $1(n,e){return{data:n,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function q1(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,s=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var ej=class extends Dl{constructor(n,e){super(),this.options=e,this.#e=n,this.#o=null,this.#a=My(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#s=void 0;#n=void 0;#i;#r;#a;#o;#c;#l;#h;#d;#f;#g;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),G1(this.#t,this.options)?this.#u():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Py(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Py(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#C(),this.#S(),this.#t.removeObserver(this)}setOptions(n){const e=this.options,t=this.#t;if(this.options=this.#e.defaultQueryOptions(n),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof zs(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#x(),this.#t.setOptions(this.options),e._defaulted&&!Wh(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const s=this.hasListeners();s&&K1(this.#t,t,this.options,e)&&this.#u(),this.updateResult(),s&&(this.#t!==t||zs(this.options.enabled,this.#t)!==zs(e.enabled,this.#t)||Yr(this.options.staleTime,this.#t)!==Yr(e.staleTime,this.#t))&&this.#p();const i=this.#y();s&&(this.#t!==t||zs(this.options.enabled,this.#t)!==zs(e.enabled,this.#t)||i!==this.#g)&&this.#b(i)}getOptimisticResult(n){const e=this.#e.getQueryCache().build(this.#e,n),t=this.createResult(e,n);return nj(this,t)&&(this.#n=t,this.#r=this.options,this.#i=this.#t.state),t}getCurrentResult(){return this.#n}trackResult(n,e){return new Proxy(n,{get:(t,s)=>(this.trackProp(s),e?.(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(t,s))})}trackProp(n){this.#m.add(n)}getCurrentQuery(){return this.#t}refetch({...n}={}){return this.fetch({...n})}fetchOptimistic(n){const e=this.#e.defaultQueryOptions(n),t=this.#e.getQueryCache().build(this.#e,e);return t.fetch().then(()=>this.createResult(t,e))}fetch(n){return this.#u({...n,cancelRefetch:n.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#u(n){this.#x();let e=this.#t.fetch(this.options,n);return n?.throwOnError||(e=e.catch(Bn)),e}#p(){this.#C();const n=Yr(this.options.staleTime,this.#t);if(Ga||this.#n.isStale||!Ty(n))return;const t=y_(this.#n.dataUpdatedAt,n)+1;this.#d=ja.setTimeout(()=>{this.#n.isStale||this.updateResult()},t)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(n){this.#S(),this.#g=n,!(Ga||zs(this.options.enabled,this.#t)===!1||!Ty(this.#g)||this.#g===0)&&(this.#f=ja.setInterval(()=>{(this.options.refetchIntervalInBackground||$v.isFocused())&&this.#u()},this.#g))}#v(){this.#p(),this.#b(this.#y())}#C(){this.#d&&(ja.clearTimeout(this.#d),this.#d=void 0)}#S(){this.#f&&(ja.clearInterval(this.#f),this.#f=void 0)}createResult(n,e){const t=this.#t,s=this.options,i=this.#n,a=this.#i,o=this.#r,d=n!==t?n.state:this.#s,{state:h}=n;let f={...h},p=!1,y;if(e._optimisticResults){const P=this.hasListeners(),j=!P&&G1(n,e),I=P&&K1(n,t,e,s);(j||I)&&(f={...f,...A_(h.data,n.options)}),e._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:b,errorUpdatedAt:A,status:S}=f;y=f.data;let E=!1;if(e.placeholderData!==void 0&&y===void 0&&S==="pending"){let P;i?.isPlaceholderData&&e.placeholderData===o?.placeholderData?(P=i.data,E=!0):P=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,P!==void 0&&(S="success",y=Dy(i?.data,P,e),p=!0)}if(e.select&&y!==void 0&&!E)if(i&&y===a?.data&&e.select===this.#c)y=this.#l;else try{this.#c=e.select,y=e.select(y),y=Dy(i?.data,y,e),this.#l=y,this.#o=null}catch(P){this.#o=P}this.#o&&(b=this.#o,y=this.#l,A=Date.now(),S="error");const C=f.fetchStatus==="fetching",_=S==="pending",T=S==="error",R=_&&C,M=y!==void 0,N={status:S,fetchStatus:f.fetchStatus,isPending:_,isSuccess:S==="success",isError:T,isInitialLoading:R,isLoading:R,data:y,dataUpdatedAt:f.dataUpdatedAt,error:b,errorUpdatedAt:A,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:C,isRefetching:C&&!_,isLoadingError:T&&!M,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:T&&M,isStale:qv(n,e),refetch:this.refetch,promise:this.#a,isEnabled:zs(e.enabled,n)!==!1};if(this.options.experimental_prefetchInRender){const P=N.data!==void 0,j=N.status==="error"&&!P,I=K=>{j?K.reject(N.error):P&&K.resolve(N.data)},H=()=>{const K=this.#a=N.promise=My();I(K)},$=this.#a;switch($.status){case"pending":n.queryHash===t.queryHash&&I($);break;case"fulfilled":(j||N.data!==$.value)&&H();break;case"rejected":(!j||N.error!==$.reason)&&H();break}}return N}updateResult(){const n=this.#n,e=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#r=this.options,this.#i.data!==void 0&&(this.#h=this.#t),Wh(e,n))return;this.#n=e;const t=()=>{if(!n)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!this.#m.size)return!0;const a=new Set(i??this.#m);return this.options.throwOnError&&a.add("error"),Object.keys(this.#n).some(o=>{const c=o;return this.#n[c]!==n[c]&&a.has(c)})};this.#_({listeners:t()})}#x(){const n=this.#e.getQueryCache().build(this.#e,this.options);if(n===this.#t)return;const e=this.#t;this.#t=n,this.#s=n.state,this.hasListeners()&&(e?.removeObserver(this),n.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#_(n){cn.batch(()=>{n.listeners&&this.listeners.forEach(e=>{e(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function tj(n,e){return zs(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function G1(n,e){return tj(n,e)||n.state.data!==void 0&&Py(n,e,e.refetchOnMount)}function Py(n,e,t){if(zs(e.enabled,n)!==!1&&Yr(e.staleTime,n)!=="static"){const s=typeof t=="function"?t(n):t;return s==="always"||s!==!1&&qv(n,e)}return!1}function K1(n,e,t,s){return(n!==e||zs(s.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&qv(n,t)}function qv(n,e){return zs(e.enabled,n)!==!1&&n.isStaleByTime(Yr(e.staleTime,n))}function nj(n,e){return!Wh(n.getCurrentResult(),e)}function Y1(n){return{onFetch:(e,t)=>{const s=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let c={pages:[],pageParams:[]},d=0;const h=async()=>{let f=!1;const p=A=>{KO(A,()=>e.signal,()=>f=!0)},y=b_(e.options,e.fetchOptions),b=async(A,S,E)=>{if(f)return Promise.reject();if(S==null&&A.pages.length)return Promise.resolve(A);const _=(()=>{const k={client:e.client,queryKey:e.queryKey,pageParam:S,direction:E?"backward":"forward",meta:e.options.meta};return p(k),k})(),T=await y(_),{maxPages:R}=e.options,M=E?GO:qO;return{pages:M(A.pages,T,R),pageParams:M(A.pageParams,S,R)}};if(i&&a.length){const A=i==="backward",S=A?sj:X1,E={pages:a,pageParams:o},C=S(s,E);c=await b(E,C,A)}else{const A=n??a.length;do{const S=d===0?o[0]??s.initialPageParam:X1(s,c);if(d>0&&S==null)break;c=await b(c,S),d++}while(d<A)}return c};e.options.persister?e.fetchFn=()=>e.options.persister?.(h,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t):e.fetchFn=h}}}function X1(n,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?n.getNextPageParam(e[s],e,t[s],t):void 0}function sj(n,{pages:e,pageParams:t}){return e.length>0?n.getPreviousPageParam?.(e[0],e,t[0],t):void 0}var ij=class extends S_{#e;#t;#s;#n;constructor(n){super(),this.#e=n.client,this.mutationId=n.mutationId,this.#s=n.mutationCache,this.#t=[],this.state=n.state||C_(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){this.#t.includes(n)||(this.#t.push(n),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){this.#t=this.#t.filter(e=>e!==n),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#s.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(n){const e=()=>{this.#i({type:"continue"})},t={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#n=w_({fn:()=>this.options.mutationFn?this.options.mutationFn(n,t):Promise.reject(new Error("No mutationFn found")),onFail:(a,o)=>{this.#i({type:"failed",failureCount:a,error:o})},onPause:()=>{this.#i({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});const s=this.state.status==="pending",i=!this.#n.canStart();try{if(s)e();else{this.#i({type:"pending",variables:n,isPaused:i}),this.#s.config.onMutate&&await this.#s.config.onMutate(n,this,t);const o=await this.options.onMutate?.(n,t);o!==this.state.context&&this.#i({type:"pending",context:o,variables:n,isPaused:i})}const a=await this.#n.start();return await this.#s.config.onSuccess?.(a,n,this.state.context,this,t),await this.options.onSuccess?.(a,n,this.state.context,t),await this.#s.config.onSettled?.(a,null,this.state.variables,this.state.context,this,t),await this.options.onSettled?.(a,null,n,this.state.context,t),this.#i({type:"success",data:a}),a}catch(a){try{await this.#s.config.onError?.(a,n,this.state.context,this,t)}catch(o){Promise.reject(o)}try{await this.options.onError?.(a,n,this.state.context,t)}catch(o){Promise.reject(o)}try{await this.#s.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,t)}catch(o){Promise.reject(o)}try{await this.options.onSettled?.(void 0,a,n,this.state.context,t)}catch(o){Promise.reject(o)}throw this.#i({type:"error",error:a}),a}finally{this.#s.runNext(this)}}#i(n){const e=t=>{switch(n.type){case"failed":return{...t,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...t,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:n.error,failureCount:t.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=e(this.state),cn.batch(()=>{this.#t.forEach(t=>{t.onMutationUpdate(n)}),this.#s.notify({mutation:this,type:"updated",action:n})})}};function C_(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var rj=class extends Dl{constructor(n={}){super(),this.config=n,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(n,e,t){const s=new ij({client:n,mutationCache:this,mutationId:++this.#s,options:n.defaultMutationOptions(e),state:t});return this.add(s),s}add(n){this.#e.add(n);const e=fh(n);if(typeof e=="string"){const t=this.#t.get(e);t?t.push(n):this.#t.set(e,[n])}this.notify({type:"added",mutation:n})}remove(n){if(this.#e.delete(n)){const e=fh(n);if(typeof e=="string"){const t=this.#t.get(e);if(t)if(t.length>1){const s=t.indexOf(n);s!==-1&&t.splice(s,1)}else t[0]===n&&this.#t.delete(e)}}this.notify({type:"removed",mutation:n})}canRun(n){const e=fh(n);if(typeof e=="string"){const s=this.#t.get(e)?.find(i=>i.state.status==="pending");return!s||s===n}else return!0}runNext(n){const e=fh(n);return typeof e=="string"?this.#t.get(e)?.find(s=>s!==n&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){cn.batch(()=>{this.#e.forEach(n=>{this.notify({type:"removed",mutation:n})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(n){const e={exact:!0,...n};return this.getAll().find(t=>U1(e,t))}findAll(n={}){return this.getAll().filter(e=>U1(n,e))}notify(n){cn.batch(()=>{this.listeners.forEach(e=>{e(n)})})}resumePausedMutations(){const n=this.getAll().filter(e=>e.state.isPaused);return cn.batch(()=>Promise.all(n.map(e=>e.continue().catch(Bn))))}};function fh(n){return n.options.scope?.id}var aj=class extends Dl{#e;#t=void 0;#s;#n;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#e.defaultMutationOptions(e),Wh(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&Ka(t.mutationKey)!==Ka(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#r(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#i(),this.#r()}mutate(e,t){return this.#n=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#i(){const e=this.#s?.state??C_();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#r(e){cn.batch(()=>{if(this.#n&&this.hasListeners()){const t=this.#t.variables,s=this.#t.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#n.onSuccess?.(e.data,t,s,i)}catch(a){Promise.reject(a)}try{this.#n.onSettled?.(e.data,null,t,s,i)}catch(a){Promise.reject(a)}}else if(e?.type==="error"){try{this.#n.onError?.(e.error,t,s,i)}catch(a){Promise.reject(a)}try{this.#n.onSettled?.(void 0,e.error,t,s,i)}catch(a){Promise.reject(a)}}}this.listeners.forEach(t=>{t(this.#t)})})}},oj=class extends Dl{constructor(n={}){super(),this.config=n,this.#e=new Map}#e;build(n,e,t){const s=e.queryKey,i=e.queryHash??Uv(s,e);let a=this.get(i);return a||(a=new JO({client:n,queryKey:s,queryHash:i,options:n.defaultQueryOptions(e),state:t,defaultOptions:n.getQueryDefaults(s)}),this.add(a)),a}add(n){this.#e.has(n.queryHash)||(this.#e.set(n.queryHash,n),this.notify({type:"added",query:n}))}remove(n){const e=this.#e.get(n.queryHash);e&&(n.destroy(),e===n&&this.#e.delete(n.queryHash),this.notify({type:"removed",query:n}))}clear(){cn.batch(()=>{this.getAll().forEach(n=>{this.remove(n)})})}get(n){return this.#e.get(n)}getAll(){return[...this.#e.values()]}find(n){const e={exact:!0,...n};return this.getAll().find(t=>z1(e,t))}findAll(n={}){const e=this.getAll();return Object.keys(n).length>0?e.filter(t=>z1(n,t)):e}notify(n){cn.batch(()=>{this.listeners.forEach(e=>{e(n)})})}onFocus(){cn.batch(()=>{this.getAll().forEach(n=>{n.onFocus()})})}onOnline(){cn.batch(()=>{this.getAll().forEach(n=>{n.onOnline()})})}},lj=class{#e;#t;#s;#n;#i;#r;#a;#o;constructor(n={}){this.#e=n.queryCache||new oj,this.#t=n.mutationCache||new rj,this.#s=n.defaultOptions||{},this.#n=new Map,this.#i=new Map,this.#r=0}mount(){this.#r++,this.#r===1&&(this.#a=$v.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#o=Qh.subscribe(async n=>{n&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#r--,this.#r===0&&(this.#a?.(),this.#a=void 0,this.#o?.(),this.#o=void 0)}isFetching(n){return this.#e.findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return this.#t.findAll({...n,status:"pending"}).length}getQueryData(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=this.#e.build(this,e),s=t.state.data;return s===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(Yr(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(n){return this.#e.findAll(n).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(n,e,t){const s=this.defaultQueryOptions({queryKey:n}),a=this.#e.get(s.queryHash)?.state.data,o=UO(e,a);if(o!==void 0)return this.#e.build(this,s).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return cn.batch(()=>this.#e.findAll(n).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(n){const e=this.defaultQueryOptions({queryKey:n});return this.#e.get(e.queryHash)?.state}removeQueries(n){const e=this.#e;cn.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=this.#e;return cn.batch(()=>(t.findAll(n).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...n},e)))}cancelQueries(n,e={}){const t={revert:!0,...e},s=cn.batch(()=>this.#e.findAll(n).map(i=>i.cancel(t)));return Promise.all(s).then(Bn).catch(Bn)}invalidateQueries(n,e={}){return cn.batch(()=>(this.#e.findAll(n).forEach(t=>{t.invalidate()}),n?.refetchType==="none"?Promise.resolve():this.refetchQueries({...n,type:n?.refetchType??n?.type??"active"},e)))}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},s=cn.batch(()=>this.#e.findAll(n).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,t);return t.throwOnError||(a=a.catch(Bn)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(Bn)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=this.#e.build(this,e);return t.isStaleByTime(Yr(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(Bn).catch(Bn)}fetchInfiniteQuery(n){return n.behavior=Y1(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(Bn).catch(Bn)}ensureInfiniteQueryData(n){return n.behavior=Y1(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return Qh.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(n){this.#s=n}setQueryDefaults(n,e){this.#n.set(Ka(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...this.#n.values()],t={};return e.forEach(s=>{uu(n,s.queryKey)&&Object.assign(t,s.defaultOptions)}),t}setMutationDefaults(n,e){this.#i.set(Ka(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...this.#i.values()],t={};return e.forEach(s=>{uu(n,s.mutationKey)&&Object.assign(t,s.defaultOptions)}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...this.#s.queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=Uv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Vv&&(e.enabled=!1),e}defaultMutationOptions(n){return n?._defaulted?n:{...this.#s.mutations,...n?.mutationKey&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},E_=x.createContext(void 0),Gs=n=>{const e=x.useContext(E_);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},cj=({client:n,children:e})=>(x.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),g.jsx(E_.Provider,{value:n,children:e})),__=x.createContext(!1),uj=()=>x.useContext(__);__.Provider;function dj(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var hj=x.createContext(dj()),fj=()=>x.useContext(hj),mj=(n,e,t)=>{const s=t?.state.error&&typeof n.throwOnError=="function"?Hv(n.throwOnError,[t.state.error,t]):n.throwOnError;(n.suspense||n.experimental_prefetchInRender||s)&&(e.isReset()||(n.retryOnMount=!1))},pj=n=>{x.useEffect(()=>{n.clearReset()},[n])},gj=({result:n,errorResetBoundary:e,throwOnError:t,query:s,suspense:i})=>n.isError&&!e.isReset()&&!n.isFetching&&s&&(i&&n.data===void 0||Hv(t,[n.error,s])),yj=n=>{if(n.suspense){const t=i=>i==="static"?i:Math.max(i??1e3,1e3),s=n.staleTime;n.staleTime=typeof s=="function"?(...i)=>t(s(...i)):t(s),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3))}},vj=(n,e)=>n.isLoading&&n.isFetching&&!e,bj=(n,e)=>n?.suspense&&e.isPending,W1=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function xj(n,e,t){const s=uj(),i=fj(),a=Gs(),o=a.defaultQueryOptions(n);a.getDefaultOptions().queries?._experimental_beforeQuery?.(o);const c=a.getQueryCache().get(o.queryHash);o._optimisticResults=s?"isRestoring":"optimistic",yj(o),mj(o,i,c),pj(i);const d=!a.getQueryCache().get(o.queryHash),[h]=x.useState(()=>new e(a,o)),f=h.getOptimisticResult(o),p=!s&&n.subscribed!==!1;if(x.useSyncExternalStore(x.useCallback(y=>{const b=p?h.subscribe(cn.batchCalls(y)):Bn;return h.updateResult(),b},[h,p]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),x.useEffect(()=>{h.setOptions(o)},[o,h]),bj(o,f))throw W1(o,h,i);if(gj({result:f,errorResetBoundary:i,throwOnError:o.throwOnError,query:c,suspense:o.suspense}))throw f.error;return a.getDefaultOptions().queries?._experimental_afterQuery?.(o,f),o.experimental_prefetchInRender&&!Ga&&vj(f,s)&&(d?W1(o,h,i):c?.promise)?.catch(Bn).finally(()=>{h.updateResult()}),o.notifyOnChangeProps?f:h.trackResult(f)}function Gn(n,e){return xj(n,ej)}function Di(n,e){const t=Gs(),[s]=x.useState(()=>new aj(t,n));x.useEffect(()=>{s.setOptions(n)},[s,n]);const i=x.useSyncExternalStore(x.useCallback(o=>s.subscribe(cn.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),a=x.useCallback((o,c)=>{s.mutate(o,c).catch(Bn)},[s]);if(i.error&&Hv(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}const Ge=n=>typeof n=="string",Lc=()=>{let n,e;const t=new Promise((s,i)=>{n=s,e=i});return t.resolve=n,t.reject=e,t},Q1=n=>n==null?"":""+n,wj=(n,e,t)=>{n.forEach(s=>{e[s]&&(t[s]=e[s])})},Sj=/###/g,Z1=n=>n&&n.indexOf("###")>-1?n.replace(Sj,"."):n,J1=n=>!n||Ge(n),eu=(n,e,t)=>{const s=Ge(e)?e.split("."):e;let i=0;for(;i<s.length-1;){if(J1(n))return{};const a=Z1(s[i]);!n[a]&&t&&(n[a]=new t),Object.prototype.hasOwnProperty.call(n,a)?n=n[a]:n={},++i}return J1(n)?{}:{obj:n,k:Z1(s[i])}},eA=(n,e,t)=>{const{obj:s,k:i}=eu(n,e,Object);if(s!==void 0||e.length===1){s[i]=t;return}let a=e[e.length-1],o=e.slice(0,e.length-1),c=eu(n,o,Object);for(;c.obj===void 0&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),c=eu(n,o,Object),c?.obj&&typeof c.obj[`${c.k}.${a}`]<"u"&&(c.obj=void 0);c.obj[`${c.k}.${a}`]=t},Aj=(n,e,t,s)=>{const{obj:i,k:a}=eu(n,e,Object);i[a]=i[a]||[],i[a].push(t)},Zh=(n,e)=>{const{obj:t,k:s}=eu(n,e);if(t&&Object.prototype.hasOwnProperty.call(t,s))return t[s]},Cj=(n,e,t)=>{const s=Zh(n,t);return s!==void 0?s:Zh(e,t)},T_=(n,e,t)=>{for(const s in e)s!=="__proto__"&&s!=="constructor"&&(s in n?Ge(n[s])||n[s]instanceof String||Ge(e[s])||e[s]instanceof String?t&&(n[s]=e[s]):T_(n[s],e[s],t):n[s]=e[s]);return n},Yo=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Ej={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const _j=n=>Ge(n)?n.replace(/[&<>"'\/]/g,e=>Ej[e]):n;class Tj{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}const Rj=[" ",",","?","!",";"],Dj=new Tj(20),Mj=(n,e,t)=>{e=e||"",t=t||"";const s=Rj.filter(o=>e.indexOf(o)<0&&t.indexOf(o)<0);if(s.length===0)return!0;const i=Dj.getRegExp(`(${s.map(o=>o==="?"?"\\?":o).join("|")})`);let a=!i.test(n);if(!a){const o=n.indexOf(t);o>0&&!i.test(n.substring(0,o))&&(a=!0)}return a},ky=(n,e,t=".")=>{if(!n)return;if(n[e])return Object.prototype.hasOwnProperty.call(n,e)?n[e]:void 0;const s=e.split(t);let i=n;for(let a=0;a<s.length;){if(!i||typeof i!="object")return;let o,c="";for(let d=a;d<s.length;++d)if(d!==a&&(c+=t),c+=s[d],o=i[c],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&d<s.length-1)continue;a+=d-a+1;break}i=o}return i},du=n=>n?.replace("_","-"),Nj={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console?.[n]?.apply?.(console,e)}};class Jh{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Nj,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,s,i){return i&&!this.debug?null:(Ge(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Jh(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Jh(this.logger,e)}}var Si=new Jh;class Pf{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const i=this.observers[s].get(t)||0;this.observers[s].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,a])=>{for(let o=0;o<a;o++)i(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,a])=>{for(let o=0;o<a;o++)i.apply(i,[e,...t])})}}class tA extends Pf{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,s,i={}){const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;e.indexOf(".")>-1?c=e.split("."):(c=[e,t],s&&(Array.isArray(s)?c.push(...s):Ge(s)&&a?c.push(...s.split(a)):c.push(s)));const d=Zh(this.data,c);return!d&&!t&&!s&&e.indexOf(".")>-1&&(e=c[0],t=c[1],s=c.slice(2).join(".")),d||!o||!Ge(s)?d:ky(this.data?.[e]?.[t],s,a)}addResource(e,t,s,i,a={silent:!1}){const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let c=[e,t];s&&(c=c.concat(o?s.split(o):s)),e.indexOf(".")>-1&&(c=e.split("."),i=t,t=c[1]),this.addNamespaces(t),eA(this.data,c,i),a.silent||this.emit("added",e,t,s,i)}addResources(e,t,s,i={silent:!1}){for(const a in s)(Ge(s[a])||Array.isArray(s[a]))&&this.addResource(e,t,a,s[a],{silent:!0});i.silent||this.emit("added",e,t,s)}addResourceBundle(e,t,s,i,a,o={silent:!1,skipCopy:!1}){let c=[e,t];e.indexOf(".")>-1&&(c=e.split("."),i=s,s=t,t=c[1]),this.addNamespaces(t);let d=Zh(this.data,c)||{};o.skipCopy||(s=JSON.parse(JSON.stringify(s))),i?T_(d,s,a):d={...d,...s},eA(this.data,c,d),o.silent||this.emit("added",e,t,s)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var R_={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,s,i){return n.forEach(a=>{e=this.processors[a]?.process(e,t,s,i)??e}),e}};const D_=Symbol("i18next/PATH_KEY");function Pj(){const n=[],e=Object.create(null);let t;return e.get=(s,i)=>(t?.revoke?.(),i===D_?n:(n.push(i),t=Proxy.revocable(s,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function Oy(n,e){const{[D_]:t}=n(Pj());return t.join(e?.keySeparator??".")}const nA={},Pg=n=>!Ge(n)&&typeof n!="boolean"&&typeof n!="number";class ef extends Pf{constructor(e,t={}){super(),wj(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Si.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const s={...t};if(e==null)return!1;const i=this.resolve(e,s);if(i?.res===void 0)return!1;const a=Pg(i.res);return!(s.returnObjects===!1&&a)}extractFromKey(e,t){let s=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let a=t.ns||this.options.defaultNS||[];const o=s&&e.indexOf(s)>-1,c=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Mj(e,s,i);if(o&&!c){const d=e.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:e,namespaces:Ge(a)?[a]:a};const h=e.split(s);(s!==i||s===i&&this.options.ns.indexOf(h[0])>-1)&&(a=h.shift()),e=h.join(i)}return{key:e,namespaces:Ge(a)?[a]:a}}translate(e,t,s){let i=typeof t=="object"?{...t}:t;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=Oy(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const a=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:c,namespaces:d}=this.extractFromKey(e[e.length-1],i),h=d[d.length-1];let f=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;f===void 0&&(f=":");const p=i.lng||this.language,y=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p?.toLowerCase()==="cimode")return y?a?{res:`${h}${f}${c}`,usedKey:c,exactUsedKey:c,usedLng:p,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:`${h}${f}${c}`:a?{res:c,usedKey:c,exactUsedKey:c,usedLng:p,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:c;const b=this.resolve(e,i);let A=b?.res;const S=b?.usedKey||c,E=b?.exactUsedKey||c,C=["[object Number]","[object Function]","[object RegExp]"],_=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,T=!this.i18nFormat||this.i18nFormat.handleAsObject,R=i.count!==void 0&&!Ge(i.count),M=ef.hasDefaultValue(i),k=R?this.pluralResolver.getSuffix(p,i.count,i):"",N=i.ordinal&&R?this.pluralResolver.getSuffix(p,i.count,{ordinal:!1}):"",P=R&&!i.ordinal&&i.count===0,j=P&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${k}`]||i[`defaultValue${N}`]||i.defaultValue;let I=A;T&&!A&&M&&(I=j);const H=Pg(I),$=Object.prototype.toString.apply(I);if(T&&I&&H&&C.indexOf($)<0&&!(Ge(_)&&Array.isArray(I))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const K=this.options.returnedObjectHandler?this.options.returnedObjectHandler(S,I,{...i,ns:d}):`key '${c} (${this.language})' returned an object instead of string.`;return a?(b.res=K,b.usedParams=this.getUsedParamsDetails(i),b):K}if(o){const K=Array.isArray(I),Z=K?[]:{},oe=K?E:S;for(const F in I)if(Object.prototype.hasOwnProperty.call(I,F)){const B=`${oe}${o}${F}`;M&&!A?Z[F]=this.translate(B,{...i,defaultValue:Pg(j)?j[F]:void 0,joinArrays:!1,ns:d}):Z[F]=this.translate(B,{...i,joinArrays:!1,ns:d}),Z[F]===B&&(Z[F]=I[F])}A=Z}}else if(T&&Ge(_)&&Array.isArray(A))A=A.join(_),A&&(A=this.extendTranslation(A,e,i,s));else{let K=!1,Z=!1;!this.isValidLookup(A)&&M&&(K=!0,A=j),this.isValidLookup(A)||(Z=!0,A=c);const F=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Z?void 0:A,B=M&&j!==A&&this.options.updateMissing;if(Z||K||B){if(this.logger.log(B?"updateKey":"missingKey",p,h,c,B?j:A),o){const L=this.resolve(c,{...i,keySeparator:!1});L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let z=[];const Q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Q&&Q[0])for(let L=0;L<Q.length;L++)z.push(Q[L]);else this.options.saveMissingTo==="all"?z=this.languageUtils.toResolveHierarchy(i.lng||this.language):z.push(i.lng||this.language);const me=(L,X,te)=>{const ce=M&&te!==A?te:F;this.options.missingKeyHandler?this.options.missingKeyHandler(L,h,X,ce,B,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(L,h,X,ce,B,i),this.emit("missingKey",L,h,X,A)};this.options.saveMissing&&(this.options.saveMissingPlurals&&R?z.forEach(L=>{const X=this.pluralResolver.getSuffixes(L,i);P&&i[`defaultValue${this.options.pluralSeparator}zero`]&&X.indexOf(`${this.options.pluralSeparator}zero`)<0&&X.push(`${this.options.pluralSeparator}zero`),X.forEach(te=>{me([L],c+te,i[`defaultValue${te}`]||j)})}):me(z,c,j))}A=this.extendTranslation(A,e,i,b,s),Z&&A===c&&this.options.appendNamespaceToMissingKey&&(A=`${h}${f}${c}`),(Z||K)&&this.options.parseMissingKeyHandler&&(A=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${f}${c}`:c,K?A:void 0,i))}return a?(b.res=A,b.usedParams=this.getUsedParamsDetails(i),b):A}extendTranslation(e,t,s,i,a){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const d=Ge(e)&&(s?.interpolation?.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(d){const p=e.match(this.interpolator.nestingRegexp);h=p&&p.length}let f=s.replace&&!Ge(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,s.lng||this.language||i.usedLng,s),d){const p=e.match(this.interpolator.nestingRegexp),y=p&&p.length;h<y&&(s.nest=!1)}!s.lng&&i&&i.res&&(s.lng=this.language||i.usedLng),s.nest!==!1&&(e=this.interpolator.nest(e,(...p)=>a?.[0]===p[0]&&!s.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${t[0]}`),null):this.translate(...p,t),s)),s.interpolation&&this.interpolator.reset()}const o=s.postProcess||this.options.postProcess,c=Ge(o)?[o]:o;return e!=null&&c?.length&&s.applyPostProcessor!==!1&&(e=R_.handle(c,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e,t={}){let s,i,a,o,c;return Ge(e)&&(e=[e]),e.forEach(d=>{if(this.isValidLookup(s))return;const h=this.extractFromKey(d,t),f=h.key;i=f;let p=h.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const y=t.count!==void 0&&!Ge(t.count),b=y&&!t.ordinal&&t.count===0,A=t.context!==void 0&&(Ge(t.context)||typeof t.context=="number")&&t.context!=="",S=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);p.forEach(E=>{this.isValidLookup(s)||(c=E,!nA[`${S[0]}-${E}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(c)&&(nA[`${S[0]}-${E}`]=!0,this.logger.warn(`key "${i}" for languages "${S.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),S.forEach(C=>{if(this.isValidLookup(s))return;o=C;const _=[f];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(_,f,C,E,t);else{let R;y&&(R=this.pluralResolver.getSuffix(C,t.count,t));const M=`${this.options.pluralSeparator}zero`,k=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(y&&(t.ordinal&&R.indexOf(k)===0&&_.push(f+R.replace(k,this.options.pluralSeparator)),_.push(f+R),b&&_.push(f+M)),A){const N=`${f}${this.options.contextSeparator||"_"}${t.context}`;_.push(N),y&&(t.ordinal&&R.indexOf(k)===0&&_.push(N+R.replace(k,this.options.pluralSeparator)),_.push(N+R),b&&_.push(N+M))}}let T;for(;T=_.pop();)this.isValidLookup(s)||(a=T,s=this.getResource(C,E,T,t))}))})}),{res:s,usedKey:i,exactUsedKey:a,usedLng:o,usedNS:c}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,s,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,s,i):this.resourceStore.getResource(e,t,s,i)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!Ge(e.replace);let i=s?e.replace:e;if(s&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!s){i={...i};for(const a of t)delete i[a]}return i}static hasDefaultValue(e){const t="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t===s.substring(0,t.length)&&e[s]!==void 0)return!0;return!1}}class sA{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Si.create("languageUtils")}getScriptPartFromCode(e){if(e=du(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=du(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Ge(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(s=>{if(t)return;const i=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(s=>{if(t)return;const i=this.getScriptPartFromCode(s);if(this.isSupportedCode(i))return t=i;const a=this.getLanguagePartFromCode(s);if(this.isSupportedCode(a))return t=a;t=this.options.supportedLngs.find(o=>{if(o===a)return o;if(!(o.indexOf("-")<0&&a.indexOf("-")<0)&&(o.indexOf("-")>0&&a.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===a||o.indexOf(a)===0&&a.length>1))return o})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Ge(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let s=e[t];return s||(s=e[this.getScriptPartFromCode(t)]),s||(s=e[this.formatLanguageCode(t)]),s||(s=e[this.getLanguagePartFromCode(t)]),s||(s=e.default),s||[]}toResolveHierarchy(e,t){const s=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),i=[],a=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Ge(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):Ge(e)&&a(this.formatLanguageCode(e)),s.forEach(o=>{i.indexOf(o)<0&&a(this.formatLanguageCode(o))}),i}}const iA={zero:0,one:1,two:2,few:3,many:4,other:5},rA={select:n=>n===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class kj{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Si.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const s=du(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:s,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let o;try{o=new Intl.PluralRules(s,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),rA;if(!e.match(/-|_/))return rA;const d=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(d,t)}return this.pluralRulesCache[a]=o,o}needsPlural(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,s={}){return this.getSuffixes(e,s).map(i=>`${t}${i}`)}getSuffixes(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?s.resolvedOptions().pluralCategories.sort((i,a)=>iA[i]-iA[a]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t,s={}){const i=this.getRule(e,s);return i?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,s))}}const aA=(n,e,t,s=".",i=!0)=>{let a=Cj(n,e,t);return!a&&i&&Ge(t)&&(a=ky(n,t,s),a===void 0&&(a=ky(e,t,s))),a},kg=n=>n.replace(/\$/g,"$$$$");class oA{constructor(e={}){this.logger=Si.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:s,useRawValueToEscape:i,prefix:a,prefixEscaped:o,suffix:c,suffixEscaped:d,formatSeparator:h,unescapeSuffix:f,unescapePrefix:p,nestingPrefix:y,nestingPrefixEscaped:b,nestingSuffix:A,nestingSuffixEscaped:S,nestingOptionsSeparator:E,maxReplaces:C,alwaysFormat:_}=e.interpolation;this.escape=t!==void 0?t:_j,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=a?Yo(a):o||"{{",this.suffix=c?Yo(c):d||"}}",this.formatSeparator=h||",",this.unescapePrefix=f?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=y?Yo(y):b||Yo("$t("),this.nestingSuffix=A?Yo(A):S||Yo(")"),this.nestingOptionsSeparator=E||",",this.maxReplaces=C||1e3,this.alwaysFormat=_!==void 0?_:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,s)=>t?.source===s?(t.lastIndex=0,t):new RegExp(s,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,s,i){let a,o,c;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=b=>{if(b.indexOf(this.formatSeparator)<0){const C=aA(t,d,b,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(C,void 0,s,{...i,...t,interpolationkey:b}):C}const A=b.split(this.formatSeparator),S=A.shift().trim(),E=A.join(this.formatSeparator).trim();return this.format(aA(t,d,S,this.options.keySeparator,this.options.ignoreJSONStructure),E,s,{...i,...t,interpolationkey:S})};this.resetRegExp();const f=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,p=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:b=>kg(b)},{regex:this.regexp,safeValue:b=>this.escapeValue?kg(this.escape(b)):kg(b)}].forEach(b=>{for(c=0;a=b.regex.exec(e);){const A=a[1].trim();if(o=h(A),o===void 0)if(typeof f=="function"){const E=f(e,a,i);o=Ge(E)?E:""}else if(i&&Object.prototype.hasOwnProperty.call(i,A))o="";else if(p){o=a[0];continue}else this.logger.warn(`missed to pass in variable ${A} for interpolating ${e}`),o="";else!Ge(o)&&!this.useRawValueToEscape&&(o=Q1(o));const S=b.safeValue(o);if(e=e.replace(a[0],S),p?(b.regex.lastIndex+=o.length,b.regex.lastIndex-=a[0].length):b.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),e}nest(e,t,s={}){let i,a,o;const c=(d,h)=>{const f=this.nestingOptionsSeparator;if(d.indexOf(f)<0)return d;const p=d.split(new RegExp(`${f}[ ]*{`));let y=`{${p[1]}`;d=p[0],y=this.interpolate(y,o);const b=y.match(/'/g),A=y.match(/"/g);((b?.length??0)%2===0&&!A||A.length%2!==0)&&(y=y.replace(/'/g,'"'));try{o=JSON.parse(y),h&&(o={...h,...o})}catch(S){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,S),`${d}${f}${y}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,d};for(;i=this.nestingRegexp.exec(e);){let d=[];o={...s},o=o.replace&&!Ge(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const h=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(h!==-1&&(d=i[1].slice(h).split(this.formatSeparator).map(f=>f.trim()).filter(Boolean),i[1]=i[1].slice(0,h)),a=t(c.call(this,i[1].trim(),o),o),a&&i[0]===e&&!Ge(a))return a;Ge(a)||(a=Q1(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),a=""),d.length&&(a=d.reduce((f,p)=>this.format(f,p,s.lng,{...s,interpolationkey:i[1].trim()}),a.trim())),e=e.replace(i[0],a),this.regexp.lastIndex=0}return e}}const Oj=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const s=n.split("(");e=s[0].toLowerCase().trim();const i=s[1].substring(0,s[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(o=>{if(o){const[c,...d]=o.split(":"),h=d.join(":").trim().replace(/^'+|'+$/g,""),f=c.trim();t[f]||(t[f]=h),h==="false"&&(t[f]=!1),h==="true"&&(t[f]=!0),isNaN(h)||(t[f]=parseInt(h,10))}})}return{formatName:e,formatOptions:t}},lA=n=>{const e={};return(t,s,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});const o=s+JSON.stringify(a);let c=e[o];return c||(c=n(du(s),i),e[o]=c),c(t)}},jj=n=>(e,t,s)=>n(du(t),s)(e);class Lj{constructor(e={}){this.logger=Si.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const s=t.cacheInBuiltFormats?lA:jj;this.formats={number:s((i,a)=>{const o=new Intl.NumberFormat(i,{...a});return c=>o.format(c)}),currency:s((i,a)=>{const o=new Intl.NumberFormat(i,{...a,style:"currency"});return c=>o.format(c)}),datetime:s((i,a)=>{const o=new Intl.DateTimeFormat(i,{...a});return c=>o.format(c)}),relativetime:s((i,a)=>{const o=new Intl.RelativeTimeFormat(i,{...a});return c=>o.format(c,a.range||"day")}),list:s((i,a)=>{const o=new Intl.ListFormat(i,{...a});return c=>o.format(c)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=lA(t)}format(e,t,s,i={}){const a=t.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(c=>c.indexOf(")")>-1)){const c=a.findIndex(d=>d.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,c)].join(this.formatSeparator)}return a.reduce((c,d)=>{const{formatName:h,formatOptions:f}=Oj(d);if(this.formats[h]){let p=c;try{const y=i?.formatParams?.[i.interpolationkey]||{},b=y.locale||y.lng||i.locale||i.lng||s;p=this.formats[h](c,b,{...f,...i,...y})}catch(y){this.logger.warn(y)}return p}else this.logger.warn(`there was no format function for ${h}`);return c},e)}}const Fj=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class Ij extends Pf{constructor(e,t,s,i={}){super(),this.backend=e,this.store=t,this.services=s,this.languageUtils=s.languageUtils,this.options=i,this.logger=Si.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(s,i.backend,i)}queueLoad(e,t,s,i){const a={},o={},c={},d={};return e.forEach(h=>{let f=!0;t.forEach(p=>{const y=`${h}|${p}`;!s.reload&&this.store.hasResourceBundle(h,p)?this.state[y]=2:this.state[y]<0||(this.state[y]===1?o[y]===void 0&&(o[y]=!0):(this.state[y]=1,f=!1,o[y]===void 0&&(o[y]=!0),a[y]===void 0&&(a[y]=!0),d[p]===void 0&&(d[p]=!0)))}),f||(c[h]=!0)}),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(d)}}loaded(e,t,s){const i=e.split("|"),a=i[0],o=i[1];t&&this.emit("failedLoading",a,o,t),!t&&s&&this.store.addResourceBundle(a,o,s,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&s&&(this.state[e]=0);const c={};this.queue.forEach(d=>{Aj(d.loaded,[a],o),Fj(d,e),t&&d.errors.push(t),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(h=>{c[h]||(c[h]={});const f=d.loaded[h];f.length&&f.forEach(p=>{c[h][p]===void 0&&(c[h][p]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(d=>!d.done)}read(e,t,s,i=0,a=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:s,tried:i,wait:a,callback:o});return}this.readingCalls++;const c=(h,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(h&&f&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,s,i+1,a*2,o)},a);return}o(h,f)},d=this.backend[s].bind(this.backend);if(d.length===2){try{const h=d(e,t);h&&typeof h.then=="function"?h.then(f=>c(null,f)).catch(c):c(null,h)}catch(h){c(h)}return}return d(e,t,c)}prepareLoading(e,t,s={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Ge(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Ge(t)&&(t=[t]);const a=this.queueLoad(e,t,s,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach(o=>{this.loadOne(o)})}load(e,t,s){this.prepareLoading(e,t,{},s)}reload(e,t,s){this.prepareLoading(e,t,{reload:!0},s)}loadOne(e,t=""){const s=e.split("|"),i=s[0],a=s[1];this.read(i,a,"read",void 0,void 0,(o,c)=>{o&&this.logger.warn(`${t}loading namespace ${a} for language ${i} failed`,o),!o&&c&&this.logger.log(`${t}loaded namespace ${a} for language ${i}`,c),this.loaded(e,o,c)})}saveMissing(e,t,s,i,a,o={},c=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${s}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if(this.backend?.create){const d={...o,isUpdate:a},h=this.backend.create.bind(this.backend);if(h.length<6)try{let f;h.length===5?f=h(e,t,s,i,d):f=h(e,t,s,i),f&&typeof f.then=="function"?f.then(p=>c(null,p)).catch(c):c(null,f)}catch(f){c(f)}else h(e,t,s,i,c,d)}!e||!e[0]||this.store.addResource(e[0],t,s,i)}}}const Og=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Ge(n[1])&&(e.defaultValue=n[1]),Ge(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(s=>{e[s]=t[s]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),cA=n=>(Ge(n.ns)&&(n.ns=[n.ns]),Ge(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Ge(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs?.indexOf?.("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),typeof n.initImmediate=="boolean"&&(n.initAsync=n.initImmediate),n),mh=()=>{},Bj=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class tu extends Pf{constructor(e={},t){if(super(),this.options=cA(e),this.services={},this.logger=Si,this.modules={external:[]},Bj(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Ge(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const s=Og();this.options={...s,...this.options,...cA(e)},this.options.interpolation={...s.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=s.overloadTranslationOptionHandler),this.options.debug===!0&&typeof console<"u"&&console.warn("i18next is maintained with support from locize.com  consider powering your project with managed localization (AI, CDN, integrations): https://locize.com");const i=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?Si.init(i(this.modules.logger),this.options):Si.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=Lj;const f=new sA(this.options);this.store=new tA(this.options.resources,this.options);const p=this.services;p.logger=Si,p.resourceStore=this.store,p.languageUtils=f,p.pluralResolver=new kj(f,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(p.formatter=i(h),p.formatter.init&&p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new oA(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new Ij(i(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",(b,...A)=>{this.emit(b,...A)}),this.modules.languageDetector&&(p.languageDetector=i(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=i(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new ef(this.services,this.options),this.translator.on("*",(b,...A)=>{this.emit(b,...A)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,t||(t=mh),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...f)=>this.store[h](...f)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...f)=>(this.store[h](...f),this)});const c=Lc(),d=()=>{const h=(f,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(p),t(f,p)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),c}loadResources(e,t=mh){let s=t;const i=Ge(e)?e:this.language;if(typeof e=="function"&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const a=[],o=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(h=>{h!=="cimode"&&a.indexOf(h)<0&&a.push(h)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>o(d)),this.options.preload?.forEach?.(c=>o(c)),this.services.backendConnector.load(a,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(c)})}else s(null)}reloadResources(e,t,s){const i=Lc();return typeof e=="function"&&(s=e,e=void 0),typeof t=="function"&&(s=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),s||(s=mh),this.services.backendConnector.reload(e,t,a=>{i.resolve(),s(a)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&R_.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const s=this.languages[t];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const s=Lc();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},a=(c,d)=>{d?this.isLanguageChangingTo===e&&(i(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,s.resolve((...h)=>this.t(...h)),t&&t(c,(...h)=>this.t(...h))},o=c=>{!e&&!c&&this.services.languageDetector&&(c=[]);const d=Ge(c)?c:c&&c[0],h=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(Ge(c)?[c]:c);h&&(this.language||i(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector?.cacheUserLanguage?.(h)),this.loadResources(h,f=>{a(f,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e),s}getFixedT(e,t,s){const i=(a,o,...c)=>{let d;typeof o!="object"?d=this.options.overloadTranslationOptionHandler([a,o].concat(c)):d={...o},d.lng=d.lng||i.lng,d.lngs=d.lngs||i.lngs,d.ns=d.ns||i.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||s||i.keyPrefix);const h=this.options.keySeparator||".";let f;return d.keyPrefix&&Array.isArray(a)?f=a.map(p=>(typeof p=="function"&&(p=Oy(p,{...this.options,...o})),`${d.keyPrefix}${h}${p}`)):(typeof a=="function"&&(a=Oy(a,{...this.options,...o})),f=d.keyPrefix?`${d.keyPrefix}${h}${a}`:a),this.t(f,d)};return Ge(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=s,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const o=(c,d)=>{const h=this.services.backendConnector.state[`${c}|${d}`];return h===-1||h===0||h===2};if(t.precheck){const c=t.precheck(this,o);if(c!==void 0)return c}return!!(this.hasResourceBundle(s,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(s,e)&&(!i||o(a,e)))}loadNamespaces(e,t){const s=Lc();return this.options.ns?(Ge(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{s.resolve(),t&&t(i)}),s):(t&&t(),Promise.resolve())}loadLanguages(e,t){const s=Lc();Ge(e)&&(e=[e]);const i=this.options.preload||[],a=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return a.length?(this.options.preload=i.concat(a),this.loadResources(o=>{s.resolve(),t&&t(o)}),s):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const a=i.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=this.services?.languageUtils||new sA(Og());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(s.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const s=new tu(e,t);return s.createInstance=tu.createInstance,s}cloneInstance(e={},t=mh){const s=e.forkResourceStore;s&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},a=new tu(i);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(c=>{a[c]=this[c]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},s){const c=Object.keys(this.store.data).reduce((d,h)=>(d[h]={...this.store.data[h]},d[h]=Object.keys(d[h]).reduce((f,p)=>(f[p]={...d[h][p]},f),d[h]),d),{});a.store=new tA(c,i),a.services.resourceStore=a.store}if(e.interpolation){const d={...Og().interpolation,...this.options.interpolation,...e.interpolation},h={...i,interpolation:d};a.services.interpolator=new oA(h)}return a.translator=new ef(a.services,i),a.translator.on("*",(c,...d)=>{a.emit(c,...d)}),a.init(i,t),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Kn=tu.createInstance();Kn.createInstance;Kn.dir;Kn.init;Kn.loadResources;Kn.reloadResources;Kn.use;Kn.changeLanguage;Kn.getFixedT;Kn.t;Kn.exists;Kn.setDefaultNamespace;Kn.hasLoadedNamespace;Kn.loadNamespaces;Kn.loadLanguages;const zj=(n,e,t,s)=>{const i=[t,{code:e,...s||{}}];if(n?.services?.logger?.forward)return n.services.logger.forward(i,"warn","react-i18next::",!0);Ya(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),n?.services?.logger?.warn?n.services.logger.warn(...i):console?.warn&&console.warn(...i)},uA={},M_=(n,e,t,s)=>{Ya(t)&&uA[t]||(Ya(t)&&(uA[t]=new Date),zj(n,e,t,s))},N_=(n,e)=>()=>{if(n.isInitialized)e();else{const t=()=>{setTimeout(()=>{n.off("initialized",t)},0),e()};n.on("initialized",t)}},jy=(n,e,t)=>{n.loadNamespaces(e,N_(n,t))},dA=(n,e,t,s)=>{if(Ya(t)&&(t=[t]),n.options.preload&&n.options.preload.indexOf(e)>-1)return jy(n,t,s);t.forEach(i=>{n.options.ns.indexOf(i)<0&&n.options.ns.push(i)}),n.loadLanguages(e,N_(n,s))},Uj=(n,e,t={})=>!e.languages||!e.languages.length?(M_(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(n,{lng:t.lng,precheck:(s,i)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!i(s.isLanguageChangingTo,n))return!1}}),Ya=n=>typeof n=="string",Vj=n=>typeof n=="object"&&n!==null,Hj=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,$j={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},qj=n=>$j[n],Gj=n=>n.replace(Hj,qj);let Ly={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Gj,transDefaultProps:void 0};const Kj=(n={})=>{Ly={...Ly,...n}},Yj=()=>Ly;let P_;const Xj=n=>{P_=n},Wj=()=>P_,Qj={type:"3rdParty",init(n){Kj(n.options.react),Xj(n)}},Zj=x.createContext();class Jj{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var jg={exports:{}},Lg={};var hA;function eL(){if(hA)return Lg;hA=1;var n=Mf();function e(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var t=typeof Object.is=="function"?Object.is:e,s=n.useState,i=n.useEffect,a=n.useLayoutEffect,o=n.useDebugValue;function c(p,y){var b=y(),A=s({inst:{value:b,getSnapshot:y}}),S=A[0].inst,E=A[1];return a(function(){S.value=b,S.getSnapshot=y,d(S)&&E({inst:S})},[p,b,y]),i(function(){return d(S)&&E({inst:S}),p(function(){d(S)&&E({inst:S})})},[p]),o(b),b}function d(p){var y=p.getSnapshot;p=p.value;try{var b=y();return!t(p,b)}catch{return!0}}function h(p,y){return y()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return Lg.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:f,Lg}var fA;function tL(){return fA||(fA=1,jg.exports=eL()),jg.exports}var nL=tL();const sL=(n,e)=>Ya(e)?e:Vj(e)&&Ya(e.defaultValue)?e.defaultValue:Array.isArray(n)?n[n.length-1]:n,iL={t:sL,ready:!1},rL=()=>()=>{},yn=(n,e={})=>{const{i18n:t}=e,{i18n:s,defaultNS:i}=x.useContext(Zj)||{},a=t||s||Wj();a&&!a.reportNamespaces&&(a.reportNamespaces=new Jj),a||M_(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const o=x.useMemo(()=>({...Yj(),...a?.options?.react,...e}),[a,e]),{useSuspense:c,keyPrefix:d}=o,h=i||a?.options?.defaultNS,f=Ya(h)?[h]:h||["translation"],p=x.useMemo(()=>f,f);a?.reportNamespaces?.addUsedNamespaces?.(p);const y=x.useRef(0),b=x.useCallback(j=>{if(!a)return rL;const{bindI18n:I,bindI18nStore:H}=o,$=()=>{y.current+=1,j()};return I&&a.on(I,$),H&&a.store.on(H,$),()=>{I&&I.split(" ").forEach(K=>a.off(K,$)),H&&H.split(" ").forEach(K=>a.store.off(K,$))}},[a,o]),A=x.useRef(),S=x.useCallback(()=>{if(!a)return iL;const j=!!(a.isInitialized||a.initializedStoreOnce)&&p.every(oe=>Uj(oe,a,o)),I=e.lng||a.language,H=y.current,$=A.current;if($&&$.ready===j&&$.lng===I&&$.keyPrefix===d&&$.revision===H)return $;const Z={t:a.getFixedT(I,o.nsMode==="fallback"?p:p[0],d),ready:j,lng:I,keyPrefix:d,revision:H};return A.current=Z,Z},[a,p,d,o,e.lng]),[E,C]=x.useState(0),{t:_,ready:T}=nL.useSyncExternalStore(b,S,S);x.useEffect(()=>{if(a&&!T&&!c){const j=()=>C(I=>I+1);e.lng?dA(a,e.lng,p,j):jy(a,p,j)}},[a,e.lng,p,T,c,E]);const R=a||{},M=x.useRef(null),k=x.useRef(),N=j=>{const I=Object.getOwnPropertyDescriptors(j);I.__original&&delete I.__original;const H=Object.create(Object.getPrototypeOf(j),I);if(!Object.prototype.hasOwnProperty.call(H,"__original"))try{Object.defineProperty(H,"__original",{value:j,writable:!1,enumerable:!1,configurable:!1})}catch{}return H},P=x.useMemo(()=>{const j=R,I=j?.language;let H=j;j&&(M.current&&M.current.__original===j?k.current!==I?(H=N(j),M.current=H,k.current=I):H=M.current:(H=N(j),M.current=H,k.current=I));const $=[_,H,T];return $.t=_,$.i18n=H,$.ready=T,$},[_,R,T,R.resolvedLanguage,R.language,R.languages]);if(a&&c&&!T)throw new Promise(j=>{const I=()=>j();e.lng?dA(a,e.lng,p,I):jy(a,p,I)});return P},aL={loading:"...",error:"",save:"",cancel:"",delete:"",edit:"",search:"",settings:"",help:"",logout:"",of:"",selectUser:" ",selectUsers:" ",searchPlaceholder:"...",noUsersFound:"  "},oL="",lL=" ...",cL="",uL="...",dL=" ,     ?",hL="   ",fL={name:"EDO",subtitle:""},mL={dashboard:" ",documents:""},pL={title:"Dashboard",subtitle:"   ",stats:{total:" ",pending:" ",signed:"",archived:" "},pendingSignatures:" ",recentDocuments:" ",noPending:"   ",noDocuments:" ",waiting:""},gL={title:"",subtitle:" ",loadError:"   ",noDocumentSelected:"   ",loading:" ...",fields:{title:"",documentType:" ",status:"",documentDate:" ",registrationDate:" ",description:"",author:""},status:{inProgress:" ",pending:" ",signed:"",archived:""}},yL={userMenu:{profile:""}},vL={searchPlaceholder:" ...",noDocuments:" ",addDocument:" "},bL={loading:" ...",error:"",noDocuments:" ",noDocumentsHint:"     "},xL={loading:" ...",documentNotFound:"  ",backToList:"  ",incomingDate:" ",outgoingDate:" ",created:"",waitingSignature:" ",noExecutors:"  ",commentOptional:" ()",rejectReason:" ",commentPlaceholder:" ...",rejectReasonPlaceholder:"  ...",signaturesTab:" ",signingProgress:" ",historyTab:" "},wL={title:"",status:"",documentType:" ",priority:"",correspondent:"",selectStatus:" ",selectDocumentType:" ",selectPriority:" ",selectCorrespondent:" ",clearFilters:"  ({{count}})"},SL={loading:" ...",noDocumentSelected:" ",selectDocumentMessage:"      ",tabs:{document:"",signatures:"",history:""},viewMode:" ",signatureRequired:" ",signatureWaiting:"     ",noContent:"   ",supplier:":",buyer:":",signature:" / ",notSpecified:" ",documentPreview:" ",signaturesTab:" ",noExecutors:"  ",documentNotLoaded:"  ",attachments:"",statusCreatedByManager:" ",statusProcessedReception:"  ",statusProcessingReception:"  ",statusApprovedDirector:" ",statusRejectedDirector:" ",statusPendingDirector:"   ",statusSigningExecutors:"  ({{signed}}/{{total}})",statusCompleted:"",stampsUpdateError:" ,     .  ."},AL={documentInfo:"  ",documentNumber:" ",documentType:" ",creationDate:" ",from:" ",organization:"",correspondent:"",priority:"",classification:"",deliveryMethod:" ",resolutionTextLabel:"  *",executorLabel:" *",rejectReasonLabel:" ",executorsSection:"",status:"",signingProgress:" ",signaturesRequired:" ",signedAt:"",waitingSignature:" ",actions:"",sign:"",download:" ",print:"",history:" ",title:"",incomingNumber:" ",incomingDate:" ",outgoingNumber:" ",outgoingDate:" ",resolution:"",resolutionRequired:" *",coExecutors:"",briefContent:" ",directorComment:" ",receptionSubmit:"  ",directorEditResolution:"   ",approve:"",reject:"",signDocument:" ",editDocument:"",commentOptional:" ()",commentPlaceholder:" ...",rejectReasonPlaceholder:"  ...",signing:"...",approving:"...",rejecting:"...",approveTitle:" ",approveDescription:" ,     ?      .",rejectTitle:"  ",rejectDescription:" ,       ?       .",signTitle:" ",signDescription:" ,  ,          .",directorEditTitle:"   ",directorEditDescription:"       .",resolutionPlaceholder:" ",resolutionTextPlaceholder:"  ...",executorSearchPlaceholder:" ...",coExecutorsSearchPlaceholder:" ...",receptionDialogTitle:"  ",receptionDialogDescription:"        .",sendToDirector:" ",saving:"...",validationSelectResolution:"     ",validationEnterResolution:"  ",validationSelectExecutor:" ",errorApproval:"  ",errorReject:"  ",errorSign:"  ",errorReceptionSubmit:"   ",errorDirectorEdit:"     "},CL={newDocument:" ",editDocument:" ",mainInfo:" ",incomingNumber:" ",incomingDate:" ",outgoingNumber:" ",outgoingDate:" ",numberPlaceholder:" ",datePlaceholder:"..",documentTitle:" ",titlePlaceholder:"  ",correspondent:"",correspondentPlaceholder:"  ",briefContent:" ",briefContentPlaceholder:"   ",documentType:" ",documentTypePlaceholder:" ",priority:"",priorityPlaceholder:"",executors:"",executor:"",coExecutors:"",executorSearchPlaceholder:" ...",coExecutorsSearchPlaceholder:" ...",additionalInfo:" ",receptionOffice:" *",receptionPlaceholder:" ",deliveryMethod:" ",deliveryPlaceholder:" ",classification:"",classificationPlaceholder:"",add:"",documentFile:" ",dragFileHint:"      ",fileTypesHint:"PDF, DOC, DOCX  10 ",selectFile:" ",currentFile:" ",newFile:"",attachments:"",addFiles:" ",currentAttachments:" :",newAttachments:" :",deleteFile:" ",deleteAttachment:" ",help:"",helpIncomingNumber:" :    ",helpCorrespondent:":    ",helpStamp:" :    ",saveDraft:" ",uploadingFile:" ...",saving:"...",creating:"...",save:"",register:"",fillRequired:"  ",selectReception:" ",errorCreate:"   ",errorUpdate:"   "},EL={dialogTitle:"  e-imzo",selectKeyTitle:"      ",selectCertificate:" ",keysNotFound:" e-imzo  . ,      .",loadKeysError:"    e-imzo.   .",loadKeysErrorShort:"   ",documentNotSpecified:"    ",noPdfFile:"   PDF   ",loadPdfError:"   PDF ",signSuccess:"  ",signSuccessMessage:"PDF    ",signError:"   ",unknownKey:" ",serialNumber:" :",pinfl:":",physicalPerson:" ",fio:"...:",validPeriod:" :",selectKey:" ",errorSideOur:" ",errorSideLexdoc:"LexDoc API",errorSidePrefix:"  "},_L={newCorrespondent:" ",nameLabel:"",enterName:"  ",typeLabel:" ",createError:"   ",creating:"...",create:"",physicalPerson:" ",legalPerson:" ",stateOrg:" ",organizationLabel:"  ",organizationPlaceholder:" ",innLabel:"",innPlaceholder:"1234567890",addressLabel:"",addressPlaceholder:". , . , . 1",contactPersonLabel:" ",contactPersonPlaceholder:" ..",phoneLabel:"",phonePlaceholder:"+998 90 123 45 67",emailLabel:"Email",emailPlaceholder:"info@example.com"},TL={selectStamp:" ",applyStamps:" ",applying:"...",applyError:"   ",applyErrorGeneric:"    ",imageNotLoaded:"  ",settingsTitle:" ",stampLabel:"",stampNotFound:"  ",loading:"...",addStampTitle:"   PDF",loadingPdf:" PDF...",position:"",noStampsAdded:"  ",positionTopLeft:"-",positionTopCenter:"-",positionTopRight:"-",positionCenter:"",positionBottomLeft:"-",positionBottomCenter:"-",positionBottomRight:"-",positionCustom:""},RL={common:aL,comments:oL,addComment:lL,send:cL,sending:uL,deleteCommentConfirm:dL,deleteCommentError:hL,app:fL,navigation:mL,dashboard:pL,documents:gL,header:yL,documentSidebar:vL,documentList:bL,documentDetail:xL,filters:wL,documentContent:SL,documentMetadata:AL,addDocument:CL,eImzo:EL,addCorrespondent:_L,stamps:TL},DL={loading:"Loading...",error:"Error",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",search:"Search",settings:"Settings",help:"Help",logout:"Logout",of:"of",selectUser:"Select user",selectUsers:"Select users",searchPlaceholder:"Search...",noUsersFound:"No users found"},ML={name:"EDO",subtitle:"Document Management"},NL={dashboard:"Dashboard",documents:"Documents"},PL={title:"Dashboard",subtitle:"Electronic document management system overview",stats:{total:"Total Documents",pending:"Pending Signature",signed:"Signed",archived:"Archived"},pendingSignatures:"Require Signature",recentDocuments:"Recent Documents",noPending:"No documents pending signature",noDocuments:"No documents",waiting:"Waiting"},kL={title:"Documents",subtitle:"Document Management",loadError:"Failed to load documents",noDocumentSelected:"Select a document to view",loading:"Loading document...",fields:{title:"Title",documentType:"Document Type",status:"Status",documentDate:"Document Date",registrationDate:"Registration Date",description:"Description",author:"Author"},status:{inProgress:"In Progress",pending:"Pending",signed:"Signed",archived:"Archived"}},OL="Comments",jL="Add a comment...",LL="Send",FL="Sending...",IL="Are you sure you want to delete this comment?",BL="Failed to delete comment",zL={userMenu:{profile:"Profile"}},UL={searchPlaceholder:"Search documents...",noDocuments:"No documents",addDocument:"Add Document"},VL={loading:"Loading documents...",error:"Error",noDocuments:"No documents",noDocumentsHint:"Documents will appear here after they are created"},HL={loading:"Loading document...",documentNotFound:"Document not found",backToList:"Back to list",incomingDate:"Incoming date",outgoingDate:"Outgoing date",created:"Created",waitingSignature:"Waiting for signature",noExecutors:"No executors assigned",commentOptional:"Comment (optional)",rejectReason:"Reason for rejection",commentPlaceholder:"Enter comment...",rejectReasonPlaceholder:"Specify reason for rejection...",signaturesTab:"Executor signatures",signingProgress:"Signing progress",historyTab:"Change history"},$L={title:"Filters",status:"Status",documentType:"Document Type",priority:"Priority",correspondent:"Correspondent",selectStatus:"Select status",selectDocumentType:"Select type",selectPriority:"Select priority",selectCorrespondent:"Select correspondent",clearFilters:"Clear filters ({{count}})"},qL={loading:"Loading document...",noDocumentSelected:"Select a document",selectDocumentMessage:"Select a document from the list on the left to view",tabs:{document:"Document",signatures:"Signatures",history:"History"},viewMode:"View mode",signatureRequired:"Signature required",signatureWaiting:"Document is waiting for signatures from authorized persons",noContent:"Document content not specified",supplier:"SUPPLIER:",buyer:"BUYER:",signature:"Signature / EDS",notSpecified:"Not specified",documentPreview:"Document preview",signaturesTab:"Executor signatures",noExecutors:"No executors assigned",documentNotLoaded:"Document not loaded",attachments:"Attachments",statusCreatedByManager:"Created by manager",statusProcessedReception:"Processed at reception",statusProcessingReception:"Processing at reception",statusApprovedDirector:"Approved by director",statusRejectedDirector:"Rejected by director",statusPendingDirector:"Pending director approval",statusSigningExecutors:"Executor signing ({{signed}}/{{total}})",statusCompleted:"Completed",stampsUpdateError:"Stamps applied but failed to update document. Please refresh the page."},GL={documentInfo:"Document Information",documentNumber:"Document Number",documentType:"Document Type",creationDate:"Creation Date",from:"From",organization:"Organization",correspondent:"Correspondent",priority:"Priority",classification:"Classification",deliveryMethod:"Delivery method",resolutionTextLabel:"Resolution text *",executorLabel:"Executor *",rejectReasonLabel:"Reason for rejection",executorsSection:"Executors",status:"Status",signingProgress:"Signing Progress",signaturesRequired:"Signatures Required",signedAt:"Signed at",waitingSignature:"Waiting for signature",actions:"Actions",sign:"Sign",download:"Download document",print:"Print",history:"Change history",title:"Title",incomingNumber:"Incoming number",incomingDate:"Incoming date",outgoingNumber:"Outgoing number",outgoingDate:"Outgoing date",resolution:"Resolution",resolutionRequired:"Resolution *",coExecutors:"Co-executors",briefContent:"Brief content",directorComment:"Director comment",receptionSubmit:"Process in reception",directorEditResolution:"Change resolution and executors",approve:"Approve",reject:"Reject",signDocument:"Sign document",editDocument:"Edit",commentOptional:"Comment (optional)",commentPlaceholder:"Enter comment...",rejectReasonPlaceholder:"Specify reason for rejection...",signing:"Signing...",approving:"Approving...",rejecting:"Rejecting...",approveTitle:"Approve document",approveDescription:"Are you sure you want to approve this document? After approval it will be sent to executors.",rejectTitle:"Reject approval",rejectDescription:"Are you sure you want to reject this document? It will not be sent to executors.",signTitle:"Sign document",signDescription:"By signing you confirm you have read the document and are ready to execute.",directorEditTitle:"Change resolution and executors",directorEditDescription:"Change the resolution and assign executors for this document.",resolutionPlaceholder:"Select resolution",resolutionTextPlaceholder:"Enter resolution text...",executorSearchPlaceholder:"Search executor...",coExecutorsSearchPlaceholder:"Search co-executors...",receptionDialogTitle:"Reception processing",receptionDialogDescription:"Assign executors and select resolution to send the document to the director.",sendToDirector:"Send to director",saving:"Saving...",validationSelectResolution:"Select resolution or enter resolution text",validationEnterResolution:"Enter resolution text",validationSelectExecutor:"Select executor",errorApproval:"Error signing",errorReject:"Error rejecting",errorSign:"Error signing",errorReceptionSubmit:"Error sending to director",errorDirectorEdit:"Error updating resolution and executors"},KL={newDocument:"New document",editDocument:"Edit document",mainInfo:"Main information",incomingNumber:"Incoming number",incomingDate:"Incoming date",outgoingNumber:"Outgoing number",outgoingDate:"Outgoing date",numberPlaceholder:"Enter number",datePlaceholder:"dd.mm.yyyy",documentTitle:"Document title",titlePlaceholder:"Enter document title",correspondent:"Correspondent",correspondentPlaceholder:"Enter organization name",briefContent:"Brief content",briefContentPlaceholder:"Enter brief content",documentType:"Document type",documentTypePlaceholder:"Select type",priority:"Priority",priorityPlaceholder:"Standard",executors:"Executors",executor:"Executor",coExecutors:"Co-executors",executorSearchPlaceholder:"Search executor...",coExecutorsSearchPlaceholder:"Search co-executors...",additionalInfo:"Additional information",receptionOffice:"Reception *",receptionPlaceholder:"Select reception",deliveryMethod:"Delivery method",deliveryPlaceholder:"Select method",classification:"Classification",classificationPlaceholder:"Open",add:"Add",documentFile:"Document file",dragFileHint:"Drag file here or click to select",fileTypesHint:"PDF, DOC, DOCX up to 10 MB",selectFile:"Select file",currentFile:"Current file",newFile:"new",attachments:"Attachments",addFiles:"Add files",currentAttachments:"Current attachments:",newAttachments:"New attachments:",deleteFile:"Delete file",deleteAttachment:"Delete attachment",help:"Help",helpIncomingNumber:"Incoming number: Assigned automatically on registration",helpCorrespondent:"Correspondent: Multiple organizations can be specified",helpStamp:"Electronic stamp: Applied after document registration",saveDraft:"Save draft",uploadingFile:"Uploading file...",saving:"Saving...",creating:"Creating...",save:"Save",register:"Register",fillRequired:"Fill required fields",selectReception:"Select reception",errorCreate:"Error creating document",errorUpdate:"Error updating document"},YL={dialogTitle:"Select e-imzo key",selectKeyTitle:"Select e-signature key for document approval",selectCertificate:"Select certificate",keysNotFound:"e-imzo keys not found. Ensure the plugin is installed and keys are loaded.",loadKeysError:"Failed to load e-imzo keys. Check plugin installation.",loadKeysErrorShort:"Failed to load keys",documentNotSpecified:"Document for signing not specified",noPdfFile:"Document has no PDF file for signing",loadPdfError:"Failed to load PDF file",signSuccess:"Document signed successfully",signSuccessMessage:"PDF document processed and saved",signError:"Error signing document",unknownKey:"Unknown key",serialNumber:"Serial number:",pinfl:"PINFL:",physicalPerson:"INDIVIDUAL",fio:"Full name:",validPeriod:"Validity:",selectKey:"Select key",errorSideOur:"our system",errorSideLexdoc:"LexDoc API",errorSidePrefix:"Error from"},XL={newCorrespondent:"New correspondent",nameLabel:"Name",enterName:"Enter correspondent name",typeLabel:"Correspondent type",createError:"Error creating correspondent",creating:"Creating...",create:"Create",physicalPerson:"Individual",legalPerson:"Legal entity",stateOrg:"State organization",organizationLabel:"Full organization name",organizationPlaceholder:"Company LLC",innLabel:"Tax ID",innPlaceholder:"1234567890",addressLabel:"Address",addressPlaceholder:"City, Street, Building",contactPersonLabel:"Contact person",contactPersonPlaceholder:"John Doe",phoneLabel:"Phone",phonePlaceholder:"+1 234 567 8900",emailLabel:"Email",emailPlaceholder:"info@example.com"},WL={selectStamp:"Select stamp",applyStamps:"Apply stamps",applying:"Applying...",applyError:"Failed to apply stamps",applyErrorGeneric:"An error occurred while applying stamps",imageNotLoaded:"Image not loaded",settingsTitle:"Stamp settings",stampLabel:"Stamp",stampNotFound:"Stamp not found",loading:"Loading...",addStampTitle:"Add stamp to PDF",loadingPdf:"Loading PDF...",position:"Position",noStampsAdded:"No stamps added",positionTopLeft:"Top-left",positionTopCenter:"Top-center",positionTopRight:"Top-right",positionCenter:"Center",positionBottomLeft:"Bottom-left",positionBottomCenter:"Bottom-center",positionBottomRight:"Bottom-right",positionCustom:"Custom"},QL={common:DL,app:ML,navigation:NL,dashboard:PL,documents:kL,comments:OL,addComment:jL,send:LL,sending:FL,deleteCommentConfirm:IL,deleteCommentError:BL,header:zL,documentSidebar:UL,documentList:VL,documentDetail:HL,filters:$L,documentContent:qL,documentMetadata:GL,addDocument:KL,eImzo:YL,addCorrespondent:XL,stamps:WL},ZL={loading:"Yuklanmoqda...",error:"Xatolik",save:"Saqlash",cancel:"Bekor qilish",delete:"O'chirish",edit:"Tahrirlash",search:"Qidirish",settings:"Sozlamalar",help:"Yordam",logout:"Chiqish",of:"dan",selectUser:"Foydalanuvchini tanlang",selectUsers:"Foydalanuvchilarni tanlang",searchPlaceholder:"Qidirish...",noUsersFound:"Foydalanuvchilar topilmadi"},JL={name:"EDO",subtitle:"Hujjatlar boshqaruvi"},eF={dashboard:"Boshqaruv paneli",documents:"Hujjatlar"},tF={title:"Boshqaruv paneli",subtitle:"Elektron hujjatlar boshqaruvi tizimi ko'rinishi",stats:{total:"Jami hujjatlar",pending:"Imzolanishi kerak",signed:"Imzolangan",archived:"Arxivda"},pendingSignatures:"Imzo talab qilinadi",recentDocuments:"So'nggi hujjatlar",noPending:"Imzolanishi kerak bo'lgan hujjatlar yo'q",noDocuments:"Hujjatlar yo'q",waiting:"Kutilmoqda"},nF={title:"Hujjatlar",subtitle:"Hujjatlar boshqaruvi",loadError:"Hujjatlarni yuklab bo'lmadi",noDocumentSelected:"Ko'rish uchun hujjatni tanlang",loading:"Hujjat yuklanmoqda...",fields:{title:"Nomi",documentType:"Hujjat turi",status:"Holati",documentDate:"Hujjat sanasi",registrationDate:"Ro'yxatga olish sanasi",description:"Tavsif",author:"Muallif"},status:{inProgress:"Jarayonda",pending:"Imzolanishi kerak",signed:"Imzolangan",archived:"Arxivda"}},sF="Izohlar",iF="Izoh qo'shish...",rF="Yuborish",aF="Yuborilmoqda...",oF="Bu izohni o'chirishni xohlaysizmi?",lF="Izohni o'chirib bo'lmadi",cF={userMenu:{profile:"Profil"}},uF={searchPlaceholder:"Hujjatlarni qidirish...",noDocuments:"Hujjatlar yo'q",addDocument:"Hujjat qo'shish"},dF={loading:"Hujjatlar yuklanmoqda...",error:"Xatolik",noDocuments:"Hujjatlar yo'q",noDocumentsHint:"Hujjatlar yaratilgach shu yerda paydo bo'ladi"},hF={loading:"Hujjat yuklanmoqda...",documentNotFound:"Hujjat topilmadi",backToList:"Ro'yxatga qaytish",incomingDate:"Kirish sanasi",outgoingDate:"Chiqish sanasi",created:"Yaratilgan",waitingSignature:"Imzoni kutyapti",noExecutors:"Tayinlangan ijrochilar yo'q",commentOptional:"Izoh (ixtiyoriy)",rejectReason:"Rad etish sababi",commentPlaceholder:"Izoh kiriting...",rejectReasonPlaceholder:"Rad etish sababini ko'rsating...",signaturesTab:"Ijrochilar imzolari",signingProgress:"Imzolash jarayoni",historyTab:"O'zgarishlar tarixi"},fF={title:"Filtrlar",status:"Holati",documentType:"Hujjat turi",priority:"Prioritet",correspondent:"Korrespondent",selectStatus:"Holatni tanlang",selectDocumentType:"Turni tanlang",selectPriority:"Prioritetni tanlang",selectCorrespondent:"Korrespondentni tanlang",clearFilters:"Filtrlarni tozalash ({{count}})"},mF={loading:"Hujjat yuklanmoqda...",noDocumentSelected:"Hujjatni tanlang",selectDocumentMessage:"Ko'rish uchun chapdagi ro'yxatdan hujjatni tanlang",tabs:{document:"Hujjat",signatures:"Imzolar",history:"Tarix"},viewMode:"Ko'rish rejimi",signatureRequired:"Imzo talab qilinadi",signatureWaiting:"Hujjat vakolatli shaxslardan imzo kutmoqda",noContent:"Hujjat mazmuni ko'rsatilmagan",supplier:"TA'MINOTCHI:",buyer:"XARIDOR:",signature:"Imzo / EDS",notSpecified:"Ko'rsatilmagan",documentPreview:"Hujjat ko'rinishi",signaturesTab:"Ijrochilar imzolari",noExecutors:"Tayinlangan ijrochilar yo'q",documentNotLoaded:"Hujjat yuklanmagan",attachments:"Ilovalar",statusCreatedByManager:"Menejer tomonidan yaratilgan",statusProcessedReception:"Qabulxonada qayta ishlangan",statusProcessingReception:"Qabulxonada qayta ishlanmoqda",statusApprovedDirector:"Direktor tomonidan tasdiqlangan",statusRejectedDirector:"Direktor tomonidan rad etilgan",statusPendingDirector:"Direktor tasdiqini kutmoqda",statusSigningExecutors:"Ijrochilar tomonidan imzolash ({{signed}}/{{total}})",statusCompleted:"Bajarildi",stampsUpdateError:"Muhurlar qo'llandi, lekin hujjat yangilanmadi. Sahifani yangilang."},pF={documentInfo:"Hujjat ma'lumotlari",documentNumber:"Hujjat raqami",documentType:"Hujjat turi",creationDate:"Yaratilgan sana",from:"Kimdan",organization:"Tashkilot",correspondent:"Korrespondent",priority:"Ustuvorlik",classification:"Grif",deliveryMethod:"Yetkazib berish usuli",resolutionTextLabel:"Rezolyutsiya matni *",executorLabel:"Ijrochi *",rejectReasonLabel:"Rad etish sababi",executorsSection:"Ijrochilar",status:"Holati",signingProgress:"Imzolash jarayoni",signaturesRequired:"Imzolar talab qilinadi",signedAt:"Imzolangan",waitingSignature:"Imzo kutmoqda",actions:"Harakatlar",sign:"Imzolash",download:"Hujjatni yuklab olish",print:"Chop etish",history:"O'zgarishlar tarixi",title:"Nomi",incomingNumber:"Kirish raqami",incomingDate:"Kirish sanasi",outgoingNumber:"Chiqish raqami",outgoingDate:"Chiqish sanasi",resolution:"Rezolyutsiya",resolutionRequired:"Rezolyutsiya *",coExecutors:"Hamijrochilar",briefContent:"Qisqa mazmun",directorComment:"Direktor izohi",receptionSubmit:"Qabulxonada qayta ishlash",directorEditResolution:"Rezolyutsiya va ijrochilarni o'zgartirish",approve:"Tasdiqlash",reject:"Rad etish",signDocument:"Hujjatni imzolash",editDocument:"Tahrirlash",commentOptional:"Izoh (ixtiyoriy)",commentPlaceholder:"Izoh kiriting...",rejectReasonPlaceholder:"Rad etish sababini ko'rsating...",signing:"Imzolanmoqda...",approving:"Tasdiqlanmoqda...",rejecting:"Rad etilmoqda...",approveTitle:"Hujjatni tasdiqlash",approveDescription:"Ushbu hujjatni tasdiqlashni xohlaysizmi? Tasdiqlangandan keyin hujjat ijrochilarga yuboriladi.",rejectTitle:"Tasdiqlamaslik",rejectDescription:"Ushbu hujjatni rad etishni xohlaysizmi? Hujjat ijrochilarga yuborilmaydi.",signTitle:"Hujjatni imzolash",signDescription:"Imzolash orqali siz hujjat mazmuni bilan tanishganingizni va bajarishga tayyor ekanligingizni tasdiqlaysiz.",directorEditTitle:"Rezolyutsiya va ijrochilarni o'zgartirish",directorEditDescription:"Ushbu hujjat uchun rezolyutsiyani o'zgartiring va ijrochilarni tayinlang.",resolutionPlaceholder:"Rezolyutsiyani tanlang",resolutionTextPlaceholder:"Rezolyutsiya matnini kiriting...",executorSearchPlaceholder:"Ijrochini qidirish...",coExecutorsSearchPlaceholder:"Hamijrochilarni qidirish...",receptionDialogTitle:"Qabulxonada qayta ishlash",receptionDialogDescription:"Hujjatni direktorga yuborish uchun ijrochilarni tayinlang va rezolyutsiyani tanlang.",sendToDirector:"Direktorga yuborish",saving:"Saqlanmoqda...",validationSelectResolution:"Rezolyutsiyani tanlang yoki matn kiriting",validationEnterResolution:"Rezolyutsiya matnini kiriting",validationSelectExecutor:"Ijrochini tanlang",errorApproval:"Imzolashda xatolik",errorReject:"Rad etishda xatolik",errorSign:"Imzolashda xatolik",errorReceptionSubmit:"Direktorga yuborishda xatolik",errorDirectorEdit:"Rezolyutsiya va ijrochilarni yangilashda xatolik"},gF={newDocument:"Yangi hujjat",editDocument:"Hujjatni tahrirlash",mainInfo:"Asosiy ma'lumot",incomingNumber:"Kirish raqami",incomingDate:"Kirish sanasi",outgoingNumber:"Chiqish raqami",outgoingDate:"Chiqish sanasi",numberPlaceholder:"Raqam kiriting",datePlaceholder:"dd.mm.yyyy",documentTitle:"Hujjat nomi",titlePlaceholder:"Hujjat nomini kiriting",correspondent:"Korrespondent",correspondentPlaceholder:"Tashkilot nomini kiriting",briefContent:"Qisqa mazmun",briefContentPlaceholder:"Qisqa mazmun kiriting",documentType:"Hujjat turi",documentTypePlaceholder:"Turni tanlang",priority:"Ustuvorlik",priorityPlaceholder:"Standart",executors:"Ijrochilar",executor:"Ijrochi",coExecutors:"Hamijrochilar",executorSearchPlaceholder:"Ijrochini qidirish...",coExecutorsSearchPlaceholder:"Hamijrochilarni qidirish...",additionalInfo:"Qo'shimcha ma'lumot",receptionOffice:"Qabulxona *",receptionPlaceholder:"Qabulxonani tanlang",deliveryMethod:"Yetkazib berish usuli",deliveryPlaceholder:"Usulni tanlang",classification:"Grif",classificationPlaceholder:"Ochiq",add:"Qo'shish",documentFile:"Hujjat fayli",dragFileHint:"Faylni shu yerga torting yoki tanlash uchun bosing",fileTypesHint:"PDF, DOC, DOCX 10 MB gacha",selectFile:"Faylni tanlash",currentFile:"Joriy fayl",newFile:"yangi",attachments:"Ilovalar",addFiles:"Fayllar qo'shish",currentAttachments:"Joriy ilovalar:",newAttachments:"Yangi ilovalar:",deleteFile:"Faylni o'chirish",deleteAttachment:"Ilovani o'chirish",help:"Yordam",helpIncomingNumber:"Kirish raqami: Ro'yxatga olishda avtomatik beriladi",helpCorrespondent:"Korrespondent: Bir nechta tashkilotlarni ko'rsatish mumkin",helpStamp:"Elektron muhur: Hujjat ro'yxatga olingach qo'yiladi",saveDraft:"Qoralama saqlash",uploadingFile:"Fayl yuklanmoqda...",saving:"Saqlanmoqda...",creating:"Yaratilmoqda...",save:"Saqlash",register:"Ro'yxatga olish",fillRequired:"Majburiy maydonlarni to'ldiring",selectReception:"Qabulxonani tanlang",errorCreate:"Hujjat yaratishda xatolik",errorUpdate:"Hujjatni yangilashda xatolik"},yF={dialogTitle:"e-imzo kalini tanlash",selectKeyTitle:"Hujjatni tasdiqlash uchun elektron imzo kalini tanlang",selectCertificate:"Sertifikatni tanlang",keysNotFound:"e-imzo kalari topilmadi. Plagin o'rnatilgan va kalar yuklanganligini tekshiring.",loadKeysError:"e-imzo kalarini yuklab bo'lmadi. Plagin o'rnatilishini tekshiring.",loadKeysErrorShort:"Kalar yuklanmadi",documentNotSpecified:"Imzolash uchun hujjat ko'rsatilmagan",noPdfFile:"Hujjatda imzolash uchun PDF fayl yo'q",loadPdfError:"PDF faylni yuklab bo'lmadi",signSuccess:"Hujjat muvaffaqiyatli imzolandi",signSuccessMessage:"PDF hujjat qayta ishlandi va saqlandi",signError:"Hujjatni imzolashda xatolik",unknownKey:"Noma'lum kal",serialNumber:"Seriya raqami:",pinfl:"JSHSHIR:",physicalPerson:"JISMONIY SHAXS",fio:"F.I.O.:",validPeriod:"Amal qilish muddati:",selectKey:"Kalni tanlash",errorSideOur:"bizning tizim",errorSideLexdoc:"LexDoc API",errorSidePrefix:"Xato manbai"},vF={newCorrespondent:"Yangi korrespondent",nameLabel:"Nomi",enterName:"Korrespondent nomini kiriting",typeLabel:"Korrespondent turi",createError:"Korrespondent yaratishda xatolik",creating:"Yaratilmoqda...",create:"Yaratish",physicalPerson:"Jismoniy shaxs",legalPerson:"Yuridik shaxs",stateOrg:"Davlat tashkiloti",organizationLabel:"Tashkilotning to'liq nomi",organizationPlaceholder:"MChJ Kompaniya",innLabel:"STIR",innPlaceholder:"1234567890",addressLabel:"Manzil",addressPlaceholder:"Toshkent sh., Namuna ko'ch., 1",contactPersonLabel:"Aloqa shaxsi",contactPersonPlaceholder:"Ivanov I.I.",phoneLabel:"Telefon",phonePlaceholder:"+998 90 123 45 67",emailLabel:"Email",emailPlaceholder:"info@example.com"},bF={selectStamp:"Muhurni tanlang",applyStamps:"Muhurlarni qo'llash",applying:"Qo'llanmoqda...",applyError:"Muhurlarni qo'llab bo'lmadi",applyErrorGeneric:"Muhurlarni qo'llashda xatolik yuz berdi",imageNotLoaded:"Rasm yuklanmagan",settingsTitle:"Muhur sozlamalari",stampLabel:"Muhur",stampNotFound:"Muhur topilmadi",loading:"Yuklanmoqda...",addStampTitle:"PDF ga muhur qo'shish",loadingPdf:"PDF yuklanmoqda...",position:"Joylashuv",noStampsAdded:"Qo'shilgan muhurlar yo'q",positionTopLeft:"Yuqori-chap",positionTopCenter:"Yuqori-markaz",positionTopRight:"Yuqori-o'ng",positionCenter:"Markaz",positionBottomLeft:"Past-chap",positionBottomCenter:"Past-markaz",positionBottomRight:"Past-o'ng",positionCustom:"Ixtiyoriy"},xF={common:ZL,app:JL,navigation:eF,dashboard:tF,documents:nF,comments:sF,addComment:iF,send:rF,sending:aF,deleteCommentConfirm:oF,deleteCommentError:lF,header:cF,documentSidebar:uF,documentList:dF,documentDetail:hF,filters:fF,documentContent:mF,documentMetadata:pF,addDocument:gF,eImzo:yF,addCorrespondent:vF,stamps:bF};Kn.use(Qj).init({resources:{ru:{translation:RL},en:{translation:QL},uz:{translation:xF}},lng:localStorage.getItem("i18nextLng")||"ru",fallbackLng:"ru",interpolation:{escapeValue:!1}});var mA="popstate";function wF(n={}){function e(i,a){let{pathname:o="/",search:c="",hash:d=""}=so(i.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Fy("",{pathname:o,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){let o=i.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let d=i.location.href,h=d.indexOf("#");c=h===-1?d:d.slice(0,h)}return c+"#"+(typeof a=="string"?a:hu(a))}function s(i,a){qs(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return AF(e,t,s,n)}function Bt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function qs(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function SF(){return Math.random().toString(36).substring(2,10)}function pA(n,e){return{usr:n.state,key:n.key,idx:e}}function Fy(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?so(e):e,state:t,key:e&&e.key||s||SF()}}function hu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function so(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function AF(n,e,t,s={}){let{window:i=document.defaultView,v5Compat:a=!1}=s,o=i.history,c="POP",d=null,h=f();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function f(){return(o.state||{idx:null}).idx}function p(){c="POP";let E=f(),C=E==null?null:E-h;h=E,d&&d({action:c,location:S.location,delta:C})}function y(E,C){c="PUSH";let _=Fy(S.location,E,C);t&&t(_,E),h=f()+1;let T=pA(_,h),R=S.createHref(_);try{o.pushState(T,"",R)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(R)}a&&d&&d({action:c,location:S.location,delta:1})}function b(E,C){c="REPLACE";let _=Fy(S.location,E,C);t&&t(_,E),h=f();let T=pA(_,h),R=S.createHref(_);o.replaceState(T,"",R),a&&d&&d({action:c,location:S.location,delta:0})}function A(E){return CF(E)}let S={get action(){return c},get location(){return n(i,o)},listen(E){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(mA,p),d=E,()=>{i.removeEventListener(mA,p),d=null}},createHref(E){return e(i,E)},createURL:A,encodeLocation(E){let C=A(E);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:y,replace:b,go(E){return o.go(E)}};return S}function CF(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Bt(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:hu(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function k_(n,e,t="/"){return EF(n,e,t,!1)}function EF(n,e,t,s){let i=typeof e=="string"?so(e):e,a=ur(i.pathname||"/",t);if(a==null)return null;let o=O_(n);_F(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let h=FF(a);c=jF(o[d],h,s)}return c}function O_(n,e=[],t=[],s="",i=!1){let a=(o,c,d=i,h)=>{let f={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(s)&&d)return;Bt(f.relativePath.startsWith(s),`Absolute route path "${f.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(s.length)}let p=or([s,f.relativePath]),y=t.concat(f);o.children&&o.children.length>0&&(Bt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),O_(o.children,e,y,p,d)),!(o.path==null&&!o.index)&&e.push({path:p,score:kF(p,o.index),routesMeta:y})};return n.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))a(o,c);else for(let d of j_(o.path))a(o,c,!0,d)}),e}function j_(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let o=j_(s.join("/")),c=[];return c.push(...o.map(d=>d===""?a:[a,d].join("/"))),i&&c.push(...o),c.map(d=>n.startsWith("/")&&d===""?"/":d)}function _F(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:OF(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var TF=/^:[\w-]+$/,RF=3,DF=2,MF=1,NF=10,PF=-2,gA=n=>n==="*";function kF(n,e){let t=n.split("/"),s=t.length;return t.some(gA)&&(s+=PF),e&&(s+=DF),t.filter(i=>!gA(i)).reduce((i,a)=>i+(TF.test(a)?RF:a===""?MF:NF),s)}function OF(n,e){return n.length===e.length&&n.slice(0,-1).every((s,i)=>s===e[i])?n[n.length-1]-e[e.length-1]:0}function jF(n,e,t=!1){let{routesMeta:s}=n,i={},a="/",o=[];for(let c=0;c<s.length;++c){let d=s[c],h=c===s.length-1,f=a==="/"?e:e.slice(a.length)||"/",p=tf({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},f),y=d.route;if(!p&&h&&t&&!s[s.length-1].route.index&&(p=tf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:or([a,p.pathname]),pathnameBase:UF(or([a,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(a=or([a,p.pathnameBase]))}return o}function tf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=LF(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:s.reduce((h,{paramName:f,isOptional:p},y)=>{if(f==="*"){let A=c[y]||"";o=a.slice(0,a.length-A.length).replace(/(.)\/+$/,"$1")}const b=c[y];return p&&!b?h[f]=void 0:h[f]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:o,pattern:n}}function LF(n,e=!1,t=!0){qs(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(s.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function FF(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qs(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ur(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var L_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IF=n=>L_.test(n);function BF(n,e="/"){let{pathname:t,search:s="",hash:i=""}=typeof n=="string"?so(n):n,a;if(t)if(IF(t))a=t;else{if(t.includes("//")){let o=t;t=t.replace(/\/\/+/g,"/"),qs(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${t}`)}t.startsWith("/")?a=yA(t.substring(1),"/"):a=yA(t,e)}else a=e;return{pathname:a,search:VF(s),hash:HF(i)}}function yA(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Fg(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zF(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function F_(n){let e=zF(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function I_(n,e,t,s=!1){let i;typeof n=="string"?i=so(n):(i={...n},Bt(!i.pathname||!i.pathname.includes("?"),Fg("?","pathname","search",i)),Bt(!i.pathname||!i.pathname.includes("#"),Fg("#","pathname","hash",i)),Bt(!i.search||!i.search.includes("#"),Fg("#","search","hash",i)));let a=n===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=t;else{let p=e.length-1;if(!s&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),p-=1;i.pathname=y.join("/")}c=p>=0?e[p]:"/"}let d=BF(i,c),h=o&&o!=="/"&&o.endsWith("/"),f=(a||o===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||f)&&(d.pathname+="/"),d}var or=n=>n.join("/").replace(/\/\/+/g,"/"),UF=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),VF=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,HF=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,$F=class{constructor(n,e,t,s=!1){this.status=n,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function qF(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function GF(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var B_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function z_(n,e){let t=n;if(typeof t!="string"||!L_.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let s=t,i=!1;if(B_)try{let a=new URL(window.location.href),o=t.startsWith("//")?new URL(a.protocol+t):new URL(t),c=ur(o.pathname,e);o.origin===a.origin&&c!=null?t=c+o.search+o.hash:i=!0}catch{qs(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var U_=["POST","PUT","PATCH","DELETE"];new Set(U_);var KF=["GET",...U_];new Set(KF);var Ml=x.createContext(null);Ml.displayName="DataRouter";var kf=x.createContext(null);kf.displayName="DataRouterState";var YF=x.createContext(!1),V_=x.createContext({isTransitioning:!1});V_.displayName="ViewTransition";var XF=x.createContext(new Map);XF.displayName="Fetchers";var WF=x.createContext(null);WF.displayName="Await";var Ks=x.createContext(null);Ks.displayName="Navigation";var Nu=x.createContext(null);Nu.displayName="Location";var gr=x.createContext({outlet:null,matches:[],isDataRoute:!1});gr.displayName="Route";var Gv=x.createContext(null);Gv.displayName="RouteError";var H_="REACT_ROUTER_ERROR",QF="REDIRECT",ZF="ROUTE_ERROR_RESPONSE";function JF(n){if(n.startsWith(`${H_}:${QF}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function eI(n){if(n.startsWith(`${H_}:${ZF}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new $F(e.status,e.statusText,e.data)}catch{}}function tI(n,{relative:e}={}){Bt(Pu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=x.useContext(Ks),{hash:i,pathname:a,search:o}=ku(n,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:or([t,a])),s.createHref({pathname:c,search:o,hash:i})}function Pu(){return x.useContext(Nu)!=null}function sa(){return Bt(Pu(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(Nu).location}var $_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function q_(n){x.useContext(Ks).static||x.useLayoutEffect(n)}function G_(){let{isDataRoute:n}=x.useContext(gr);return n?mI():nI()}function nI(){Bt(Pu(),"useNavigate() may be used only in the context of a <Router> component.");let n=x.useContext(Ml),{basename:e,navigator:t}=x.useContext(Ks),{matches:s}=x.useContext(gr),{pathname:i}=sa(),a=JSON.stringify(F_(s)),o=x.useRef(!1);return q_(()=>{o.current=!0}),x.useCallback((d,h={})=>{if(qs(o.current,$_),!o.current)return;if(typeof d=="number"){t.go(d);return}let f=I_(d,JSON.parse(a),i,h.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:or([e,f.pathname])),(h.replace?t.replace:t.push)(f,h.state,h)},[e,t,a,i,n])}x.createContext(null);function ku(n,{relative:e}={}){let{matches:t}=x.useContext(gr),{pathname:s}=sa(),i=JSON.stringify(F_(t));return x.useMemo(()=>I_(n,JSON.parse(i),s,e==="path"),[n,i,s,e])}function sI(n,e){return K_(n,e)}function K_(n,e,t,s,i){Bt(Pu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=x.useContext(Ks),{matches:o}=x.useContext(gr),c=o[o.length-1],d=c?c.params:{},h=c?c.pathname:"/",f=c?c.pathnameBase:"/",p=c&&c.route;{let _=p&&p.path||"";X_(h,!p||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let y=sa(),b;if(e){let _=typeof e=="string"?so(e):e;Bt(f==="/"||_.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${_.pathname}" was given in the \`location\` prop.`),b=_}else b=y;let A=b.pathname||"/",S=A;if(f!=="/"){let _=f.replace(/^\//,"").split("/");S="/"+A.replace(/^\//,"").split("/").slice(_.length).join("/")}let E=k_(n,{pathname:S});qs(p||E!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),qs(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=lI(E&&E.map(_=>Object.assign({},_,{params:Object.assign({},d,_.params),pathname:or([f,a.encodeLocation?a.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?f:or([f,a.encodeLocation?a.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),o,t,s,i);return e&&C?x.createElement(Nu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},C):C}function iI(){let n=fI(),e=qF(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:a},"ErrorBoundary")," or"," ",x.createElement("code",{style:a},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),t?x.createElement("pre",{style:i},t):null,o)}var rI=x.createElement(iI,null),Y_=class extends x.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=eI(n.digest);t&&(n=t)}let e=n!==void 0?x.createElement(gr.Provider,{value:this.props.routeContext},x.createElement(Gv.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?x.createElement(aI,{error:n},e):e}};Y_.contextType=YF;var Ig=new WeakMap;function aI({children:n,error:e}){let{basename:t}=x.useContext(Ks);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=JF(e.digest);if(s){let i=Ig.get(e);if(i)throw i;let a=z_(s.location,t);if(B_&&!Ig.get(e))if(a.isExternal||s.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:s.replace}));throw Ig.set(e,o),o}return x.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return n}function oI({routeContext:n,match:e,children:t}){let s=x.useContext(Ml);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),x.createElement(gr.Provider,{value:n},t)}function lI(n,e=[],t=null,s=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=t?.errors;if(o!=null){let f=a.findIndex(p=>p.route.id&&o?.[p.route.id]!==void 0);Bt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,d=-1;if(t)for(let f=0;f<a.length;f++){let p=a[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:y,errors:b}=t,A=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!b||b[p.route.id]===void 0);if(p.route.lazy||A){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}let h=t&&s?(f,p)=>{s(f,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:GF(t.matches),errorInfo:p})}:void 0;return a.reduceRight((f,p,y)=>{let b,A=!1,S=null,E=null;t&&(b=o&&p.route.id?o[p.route.id]:void 0,S=p.route.errorElement||rI,c&&(d<0&&y===0?(X_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,E=null):d===y&&(A=!0,E=p.route.hydrateFallbackElement||null)));let C=e.concat(a.slice(0,y+1)),_=()=>{let T;return b?T=S:A?T=E:p.route.Component?T=x.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=f,x.createElement(oI,{match:p,routeContext:{outlet:f,matches:C,isDataRoute:t!=null},children:T})};return t&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?x.createElement(Y_,{location:t.location,revalidation:t.revalidation,component:S,error:b,children:_(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:h}):_()},null)}function Kv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cI(n){let e=x.useContext(Ml);return Bt(e,Kv(n)),e}function uI(n){let e=x.useContext(kf);return Bt(e,Kv(n)),e}function dI(n){let e=x.useContext(gr);return Bt(e,Kv(n)),e}function Yv(n){let e=dI(n),t=e.matches[e.matches.length-1];return Bt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function hI(){return Yv("useRouteId")}function fI(){let n=x.useContext(Gv),e=uI("useRouteError"),t=Yv("useRouteError");return n!==void 0?n:e.errors?.[t]}function mI(){let{router:n}=cI("useNavigate"),e=Yv("useNavigate"),t=x.useRef(!1);return q_(()=>{t.current=!0}),x.useCallback(async(i,a={})=>{qs(t.current,$_),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var vA={};function X_(n,e,t){!e&&!vA[n]&&(vA[n]=!0,qs(!1,t))}x.memo(pI);function pI({routes:n,future:e,state:t,onError:s}){return K_(n,void 0,t,s,e)}function Iy(n){Bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gI({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:i,static:a=!1,unstable_useTransitions:o}){Bt(!Pu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=x.useMemo(()=>({basename:c,navigator:i,static:a,unstable_useTransitions:o,future:{}}),[c,i,a,o]);typeof t=="string"&&(t=so(t));let{pathname:h="/",search:f="",hash:p="",state:y=null,key:b="default"}=t,A=x.useMemo(()=>{let S=ur(h,c);return S==null?null:{location:{pathname:S,search:f,hash:p,state:y,key:b},navigationType:s}},[c,h,f,p,y,b,s]);return qs(A!=null,`<Router basename="${c}"> is not able to match the URL "${h}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:x.createElement(Ks.Provider,{value:d},x.createElement(Nu.Provider,{children:e,value:A}))}function yI({children:n,location:e}){return sI(By(n),e)}function By(n,e=[]){let t=[];return x.Children.forEach(n,(s,i)=>{if(!x.isValidElement(s))return;let a=[...e,i];if(s.type===x.Fragment){t.push.apply(t,By(s.props.children,a));return}Bt(s.type===Iy,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Bt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=By(s.props.children,a)),t.push(o)}),t}var Bh="get",zh="application/x-www-form-urlencoded";function Of(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function vI(n){return Of(n)&&n.tagName.toLowerCase()==="button"}function bI(n){return Of(n)&&n.tagName.toLowerCase()==="form"}function xI(n){return Of(n)&&n.tagName.toLowerCase()==="input"}function wI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function SI(n,e){return n.button===0&&(!e||e==="_self")&&!wI(n)}var ph=null;function AI(){if(ph===null)try{new FormData(document.createElement("form"),0),ph=!1}catch{ph=!0}return ph}var CI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Bg(n){return n!=null&&!CI.has(n)?(qs(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zh}"`),null):n}function EI(n,e){let t,s,i,a,o;if(bI(n)){let c=n.getAttribute("action");s=c?ur(c,e):null,t=n.getAttribute("method")||Bh,i=Bg(n.getAttribute("enctype"))||zh,a=new FormData(n)}else if(vI(n)||xI(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=n.getAttribute("formaction")||c.getAttribute("action");if(s=d?ur(d,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Bh,i=Bg(n.getAttribute("formenctype"))||Bg(c.getAttribute("enctype"))||zh,a=new FormData(c,n),!AI()){let{name:h,type:f,value:p}=n;if(f==="image"){let y=h?`${h}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else h&&a.append(h,p)}}else{if(Of(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Bh,s=null,i=zh,o=n}return a&&i==="text/plain"&&(o=a,a=void 0),{action:s,method:t.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Xv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function _I(n,e,t,s){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${s}`:i.pathname=`${i.pathname}.${s}`:i.pathname==="/"?i.pathname=`_root.${s}`:e&&ur(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${s}`,i}async function TI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function DI(n,e,t){let s=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await TI(a,t);return o.links?o.links():[]}return[]}));return kI(s.flat(1).filter(RI).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function bA(n,e,t,s,i,a){let o=(d,h)=>t[h]?d.route.id!==t[h].route.id:!0,c=(d,h)=>t[h].pathname!==d.pathname||t[h].route.path?.endsWith("*")&&t[h].params["*"]!==d.params["*"];return a==="assets"?e.filter((d,h)=>o(d,h)||c(d,h)):a==="data"?e.filter((d,h)=>{let f=s.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(o(d,h)||c(d,h))return!0;if(d.route.shouldRevalidate){let p=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function MI(n,e,{includeHydrateFallback:t}={}){return NI(n.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function NI(n){return[...new Set(n)]}function PI(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function kI(n,e){let t=new Set;return new Set(e),n.reduce((s,i)=>{let a=JSON.stringify(PI(i));return t.has(a)||(t.add(a),s.push({key:a,link:i})),s},[])}function W_(){let n=x.useContext(Ml);return Xv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function OI(){let n=x.useContext(kf);return Xv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Wv=x.createContext(void 0);Wv.displayName="FrameworkContext";function Q_(){let n=x.useContext(Wv);return Xv(n,"You must render this element inside a <HydratedRouter> element"),n}function jI(n,e){let t=x.useContext(Wv),[s,i]=x.useState(!1),[a,o]=x.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:h,onMouseLeave:f,onTouchStart:p}=e,y=x.useRef(null);x.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let S=C=>{C.forEach(_=>{o(_.isIntersecting)})},E=new IntersectionObserver(S,{threshold:.5});return y.current&&E.observe(y.current),()=>{E.disconnect()}}},[n]),x.useEffect(()=>{if(s){let S=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(S)}}},[s]);let b=()=>{i(!0)},A=()=>{i(!1),o(!1)};return t?n!=="intent"?[a,y,{}]:[a,y,{onFocus:Fc(c,b),onBlur:Fc(d,A),onMouseEnter:Fc(h,b),onMouseLeave:Fc(f,A),onTouchStart:Fc(p,b)}]:[!1,y,{}]}function Fc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function LI({page:n,...e}){let{router:t}=W_(),s=x.useMemo(()=>k_(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?x.createElement(II,{page:n,matches:s,...e}):null}function FI(n){let{manifest:e,routeModules:t}=Q_(),[s,i]=x.useState([]);return x.useEffect(()=>{let a=!1;return DI(n,e,t).then(o=>{a||i(o)}),()=>{a=!0}},[n,e,t]),s}function II({page:n,matches:e,...t}){let s=sa(),{future:i,manifest:a,routeModules:o}=Q_(),{basename:c}=W_(),{loaderData:d,matches:h}=OI(),f=x.useMemo(()=>bA(n,e,h,a,s,"data"),[n,e,h,a,s]),p=x.useMemo(()=>bA(n,e,h,a,s,"assets"),[n,e,h,a,s]),y=x.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let S=new Set,E=!1;if(e.forEach(_=>{let T=a.routes[_.route.id];!T||!T.hasLoader||(!f.some(R=>R.route.id===_.route.id)&&_.route.id in d&&o[_.route.id]?.shouldRevalidate||T.hasClientLoader?E=!0:S.add(_.route.id))}),S.size===0)return[];let C=_I(n,c,i.unstable_trailingSlashAwareDataRequests,"data");return E&&S.size>0&&C.searchParams.set("_routes",e.filter(_=>S.has(_.route.id)).map(_=>_.route.id).join(",")),[C.pathname+C.search]},[c,i.unstable_trailingSlashAwareDataRequests,d,s,a,f,e,n,o]),b=x.useMemo(()=>MI(p,a),[p,a]),A=FI(p);return x.createElement(x.Fragment,null,y.map(S=>x.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),b.map(S=>x.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),A.map(({key:S,link:E})=>x.createElement("link",{key:S,nonce:t.nonce,...E})))}function BI(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var zI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zI&&(window.__reactRouterVersion="7.12.0")}catch{}function UI({basename:n,children:e,unstable_useTransitions:t,window:s}){let i=x.useRef();i.current==null&&(i.current=wF({window:s,v5Compat:!0}));let a=i.current,[o,c]=x.useState({action:a.action,location:a.location}),d=x.useCallback(h=>{t===!1?c(h):x.startTransition(()=>c(h))},[t]);return x.useLayoutEffect(()=>a.listen(d),[a,d]),x.createElement(gI,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:t})}var Z_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,J_=x.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:i,reloadDocument:a,replace:o,state:c,target:d,to:h,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:y,...b},A){let{basename:S,unstable_useTransitions:E}=x.useContext(Ks),C=typeof h=="string"&&Z_.test(h),_=z_(h,S);h=_.to;let T=tI(h,{relative:i}),[R,M,k]=jI(s,b),N=qI(h,{replace:o,state:c,target:d,preventScrollReset:f,relative:i,viewTransition:p,unstable_defaultShouldRevalidate:y,unstable_useTransitions:E});function P(I){e&&e(I),I.defaultPrevented||N(I)}let j=x.createElement("a",{...b,...k,href:_.absoluteURL||T,onClick:_.isExternal||a?e:P,ref:BI(A,M),target:d,"data-discover":!C&&t==="render"?"true":void 0});return R&&!C?x.createElement(x.Fragment,null,j,x.createElement(LI,{page:T})):j});J_.displayName="Link";var VI=x.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:i=!1,style:a,to:o,viewTransition:c,children:d,...h},f){let p=ku(o,{relative:h.relative}),y=sa(),b=x.useContext(kf),{navigator:A,basename:S}=x.useContext(Ks),E=b!=null&&WI(p)&&c===!0,C=A.encodeLocation?A.encodeLocation(p).pathname:p.pathname,_=y.pathname,T=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(_=_.toLowerCase(),T=T?T.toLowerCase():null,C=C.toLowerCase()),T&&S&&(T=ur(T,S)||T);const R=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let M=_===C||!i&&_.startsWith(C)&&_.charAt(R)==="/",k=T!=null&&(T===C||!i&&T.startsWith(C)&&T.charAt(C.length)==="/"),N={isActive:M,isPending:k,isTransitioning:E},P=M?e:void 0,j;typeof s=="function"?j=s(N):j=[s,M?"active":null,k?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let I=typeof a=="function"?a(N):a;return x.createElement(J_,{...h,"aria-current":P,className:j,ref:f,style:I,to:o,viewTransition:c},typeof d=="function"?d(N):d)});VI.displayName="NavLink";var HI=x.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:i,state:a,method:o=Bh,action:c,onSubmit:d,relative:h,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:y,...b},A)=>{let{unstable_useTransitions:S}=x.useContext(Ks),E=YI(),C=XI(c,{relative:h}),_=o.toLowerCase()==="get"?"get":"post",T=typeof c=="string"&&Z_.test(c),R=M=>{if(d&&d(M),M.defaultPrevented)return;M.preventDefault();let k=M.nativeEvent.submitter,N=k?.getAttribute("formmethod")||o,P=()=>E(k||M.currentTarget,{fetcherKey:e,method:N,navigate:t,replace:i,state:a,relative:h,preventScrollReset:f,viewTransition:p,unstable_defaultShouldRevalidate:y});S&&t!==!1?x.startTransition(()=>P()):P()};return x.createElement("form",{ref:A,method:_,action:C,onSubmit:s?d:R,...b,"data-discover":!T&&n==="render"?"true":void 0})});HI.displayName="Form";function $I(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eT(n){let e=x.useContext(Ml);return Bt(e,$I(n)),e}function qI(n,{target:e,replace:t,state:s,preventScrollReset:i,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:c,unstable_useTransitions:d}={}){let h=G_(),f=sa(),p=ku(n,{relative:a});return x.useCallback(y=>{if(SI(y,e)){y.preventDefault();let b=t!==void 0?t:hu(f)===hu(p),A=()=>h(n,{replace:b,state:s,preventScrollReset:i,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:c});d?x.startTransition(()=>A()):A()}},[f,h,p,t,s,e,n,i,a,o,c,d])}var GI=0,KI=()=>`__${String(++GI)}__`;function YI(){let{router:n}=eT("useSubmit"),{basename:e}=x.useContext(Ks),t=hI(),s=n.fetch,i=n.navigate;return x.useCallback(async(a,o={})=>{let{action:c,method:d,encType:h,formData:f,body:p}=EI(a,e);if(o.navigate===!1){let y=o.fetcherKey||KI();await s(y,t,o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:f,body:p,formMethod:o.method||d,formEncType:o.encType||h,flushSync:o.flushSync})}else await i(o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:f,body:p,formMethod:o.method||d,formEncType:o.encType||h,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,i,e,t])}function XI(n,{relative:e}={}){let{basename:t}=x.useContext(Ks),s=x.useContext(gr);Bt(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),a={...ku(n||".",{relative:e})},o=sa();if(n==null){a.search=o.search;let c=new URLSearchParams(a.search),d=c.getAll("index");if(d.some(f=>f==="")){c.delete("index"),d.filter(p=>p).forEach(p=>c.append("index",p));let f=c.toString();a.search=f?`?${f}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:or([t,a.pathname])),hu(a)}function WI(n,{relative:e}={}){let t=x.useContext(V_);Bt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=eT("useViewTransitionState"),i=ku(n,{relative:e});if(!t.isTransitioning)return!1;let a=ur(t.currentLocation.pathname,s)||t.currentLocation.pathname,o=ur(t.nextLocation.pathname,s)||t.nextLocation.pathname;return tf(i.pathname,o)!=null||tf(i.pathname,a)!=null}var Nl=g_();const QI=zv(Nl),Qv=x.createContext({});function Zv(n){const e=x.useRef(null);return e.current===null&&(e.current=n()),e.current}const tT=typeof window<"u",nT=tT?x.useLayoutEffect:x.useEffect,jf=x.createContext(null);function Jv(n,e){n.indexOf(e)===-1&&n.push(e)}function e0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const _i=(n,e,t)=>t>e?e:t<n?n:t;let t0=()=>{};const dr={},sT=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function iT(n){return typeof n=="object"&&n!==null}const rT=n=>/^0[^.\s]+$/u.test(n);function n0(n){let e;return()=>(e===void 0&&(e=n()),e)}const Hs=n=>n,ZI=(n,e)=>t=>e(n(t)),Ou=(...n)=>n.reduce(ZI),fu=(n,e,t)=>{const s=e-n;return s===0?1:(t-n)/s};class s0{constructor(){this.subscriptions=[]}add(e){return Jv(this.subscriptions,e),()=>e0(this.subscriptions,e)}notify(e,t,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,s);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const lr=n=>n*1e3,Us=n=>n/1e3;function aT(n,e){return e?n*(1e3/e):0}const oT=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,JI=1e-7,eB=12;function tB(n,e,t,s,i){let a,o,c=0;do o=e+(t-e)/2,a=oT(o,s,i)-n,a>0?t=o:e=o;while(Math.abs(a)>JI&&++c<eB);return o}function ju(n,e,t,s){if(n===e&&t===s)return Hs;const i=a=>tB(a,0,1,n,t);return a=>a===0||a===1?a:oT(i(a),e,s)}const lT=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,cT=n=>e=>1-n(1-e),uT=ju(.33,1.53,.69,.99),i0=cT(uT),dT=lT(i0),hT=n=>(n*=2)<1?.5*i0(n):.5*(2-Math.pow(2,-10*(n-1))),r0=n=>1-Math.sin(Math.acos(n)),fT=cT(r0),mT=lT(r0),nB=ju(.42,0,1,1),sB=ju(0,0,.58,1),pT=ju(.42,0,.58,1),iB=n=>Array.isArray(n)&&typeof n[0]!="number",gT=n=>Array.isArray(n)&&typeof n[0]=="number",rB={linear:Hs,easeIn:nB,easeInOut:pT,easeOut:sB,circIn:r0,circInOut:mT,circOut:fT,backIn:i0,backInOut:dT,backOut:uT,anticipate:hT},aB=n=>typeof n=="string",xA=n=>{if(gT(n)){t0(n.length===4);const[e,t,s,i]=n;return ju(e,t,s,i)}else if(aB(n))return rB[n];return n},gh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function oB(n,e){let t=new Set,s=new Set,i=!1,a=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function d(f){o.has(f)&&(h.schedule(f),n()),f(c)}const h={schedule:(f,p=!1,y=!1)=>{const A=y&&i?t:s;return p&&o.add(f),A.has(f)||A.add(f),f},cancel:f=>{s.delete(f),o.delete(f)},process:f=>{if(c=f,i){a=!0;return}i=!0,[t,s]=[s,t],t.forEach(d),t.clear(),i=!1,a&&(a=!1,h.process(f))}};return h}const lB=40;function yT(n,e){let t=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,o=gh.reduce((T,R)=>(T[R]=oB(a),T),{}),{setup:c,read:d,resolveKeyframes:h,preUpdate:f,update:p,preRender:y,render:b,postRender:A}=o,S=()=>{const T=dr.useManualTiming?i.timestamp:performance.now();t=!1,dr.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(T-i.timestamp,lB),1)),i.timestamp=T,i.isProcessing=!0,c.process(i),d.process(i),h.process(i),f.process(i),p.process(i),y.process(i),b.process(i),A.process(i),i.isProcessing=!1,t&&e&&(s=!1,n(S))},E=()=>{t=!0,s=!0,i.isProcessing||n(S)};return{schedule:gh.reduce((T,R)=>{const M=o[R];return T[R]=(k,N=!1,P=!1)=>(t||E(),M.schedule(k,N,P)),T},{}),cancel:T=>{for(let R=0;R<gh.length;R++)o[gh[R]].cancel(T)},state:i,steps:o}}const{schedule:Nt,cancel:Zr,state:En,steps:zg}=yT(typeof requestAnimationFrame<"u"?requestAnimationFrame:Hs,!0);let Uh;function cB(){Uh=void 0}const Hn={now:()=>(Uh===void 0&&Hn.set(En.isProcessing||dr.useManualTiming?En.timestamp:performance.now()),Uh),set:n=>{Uh=n,queueMicrotask(cB)}},vT=n=>e=>typeof e=="string"&&e.startsWith(n),bT=vT("--"),uB=vT("var(--"),a0=n=>uB(n)?dB.test(n.split("/*")[0].trim()):!1,dB=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function wA(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const Pl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},mu={...Pl,transform:n=>_i(0,1,n)},yh={...Pl,default:1},nu=n=>Math.round(n*1e5)/1e5,o0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function hB(n){return n==null}const fB=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,l0=(n,e)=>t=>!!(typeof t=="string"&&fB.test(t)&&t.startsWith(n)||e&&!hB(t)&&Object.prototype.hasOwnProperty.call(t,e)),xT=(n,e,t)=>s=>{if(typeof s!="string")return s;const[i,a,o,c]=s.match(o0);return{[n]:parseFloat(i),[e]:parseFloat(a),[t]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},mB=n=>_i(0,255,n),Ug={...Pl,transform:n=>Math.round(mB(n))},La={test:l0("rgb","red"),parse:xT("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:s=1})=>"rgba("+Ug.transform(n)+", "+Ug.transform(e)+", "+Ug.transform(t)+", "+nu(mu.transform(s))+")"};function pB(n){let e="",t="",s="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),s=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),s=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const zy={test:l0("#"),parse:pB,transform:La.transform},Lu=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Vr=Lu("deg"),Ci=Lu("%"),Oe=Lu("px"),gB=Lu("vh"),yB=Lu("vw"),SA={...Ci,parse:n=>Ci.parse(n)/100,transform:n=>Ci.transform(n*100)},rl={test:l0("hsl","hue"),parse:xT("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(n)+", "+Ci.transform(nu(e))+", "+Ci.transform(nu(t))+", "+nu(mu.transform(s))+")"},nn={test:n=>La.test(n)||zy.test(n)||rl.test(n),parse:n=>La.test(n)?La.parse(n):rl.test(n)?rl.parse(n):zy.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?La.transform(n):rl.transform(n),getAnimatableNone:n=>{const e=nn.parse(n);return e.alpha=0,nn.transform(e)}},vB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function bB(n){return isNaN(n)&&typeof n=="string"&&(n.match(o0)?.length||0)+(n.match(vB)?.length||0)>0}const wT="number",ST="color",xB="var",wB="var(",AA="${}",SB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pu(n){const e=n.toString(),t=[],s={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(SB,d=>(nn.test(d)?(s.color.push(a),i.push(ST),t.push(nn.parse(d))):d.startsWith(wB)?(s.var.push(a),i.push(xB),t.push(d)):(s.number.push(a),i.push(wT),t.push(parseFloat(d))),++a,AA)).split(AA);return{values:t,split:c,indexes:s,types:i}}function AT(n){return pu(n).values}function CT(n){const{split:e,types:t}=pu(n),s=e.length;return i=>{let a="";for(let o=0;o<s;o++)if(a+=e[o],i[o]!==void 0){const c=t[o];c===wT?a+=nu(i[o]):c===ST?a+=nn.transform(i[o]):a+=i[o]}return a}}const AB=n=>typeof n=="number"?0:nn.test(n)?nn.getAnimatableNone(n):n;function CB(n){const e=AT(n);return CT(n)(e.map(AB))}const Jr={test:bB,parse:AT,createTransformer:CT,getAnimatableNone:CB};function Vg(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function EB({hue:n,saturation:e,lightness:t,alpha:s}){n/=360,e/=100,t/=100;let i=0,a=0,o=0;if(!e)i=a=o=t;else{const c=t<.5?t*(1+e):t+e-t*e,d=2*t-c;i=Vg(d,c,n+1/3),a=Vg(d,c,n),o=Vg(d,c,n-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:s}}function nf(n,e){return t=>t>0?e:n}const It=(n,e,t)=>n+(e-n)*t,Hg=(n,e,t)=>{const s=n*n,i=t*(e*e-s)+s;return i<0?0:Math.sqrt(i)},_B=[zy,La,rl],TB=n=>_B.find(e=>e.test(n));function CA(n){const e=TB(n);if(!e)return!1;let t=e.parse(n);return e===rl&&(t=EB(t)),t}const EA=(n,e)=>{const t=CA(n),s=CA(e);if(!t||!s)return nf(n,e);const i={...t};return a=>(i.red=Hg(t.red,s.red,a),i.green=Hg(t.green,s.green,a),i.blue=Hg(t.blue,s.blue,a),i.alpha=It(t.alpha,s.alpha,a),La.transform(i))},Uy=new Set(["none","hidden"]);function RB(n,e){return Uy.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function DB(n,e){return t=>It(n,e,t)}function c0(n){return typeof n=="number"?DB:typeof n=="string"?a0(n)?nf:nn.test(n)?EA:PB:Array.isArray(n)?ET:typeof n=="object"?nn.test(n)?EA:MB:nf}function ET(n,e){const t=[...n],s=t.length,i=n.map((a,o)=>c0(a)(a,e[o]));return a=>{for(let o=0;o<s;o++)t[o]=i[o](a);return t}}function MB(n,e){const t={...n,...e},s={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(s[i]=c0(n[i])(n[i],e[i]));return i=>{for(const a in s)t[a]=s[a](i);return t}}function NB(n,e){const t=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],o=n.indexes[a][s[a]],c=n.values[o]??0;t[i]=c,s[a]++}return t}const PB=(n,e)=>{const t=Jr.createTransformer(e),s=pu(n),i=pu(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?Uy.has(n)&&!i.values.length||Uy.has(e)&&!s.values.length?RB(n,e):Ou(ET(NB(s,i),i.values),t):nf(n,e)};function _T(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?It(n,e,t):c0(n)(n,e)}const kB=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Nt.update(e,t),stop:()=>Zr(e),now:()=>En.isProcessing?En.timestamp:Hn.now()}},TT=(n,e,t=10)=>{let s="";const i=Math.max(Math.round(e/t),2);for(let a=0;a<i;a++)s+=Math.round(n(a/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},sf=2e4;function u0(n){let e=0;const t=50;let s=n.next(e);for(;!s.done&&e<sf;)e+=t,s=n.next(e);return e>=sf?1/0:e}function OB(n,e=100,t){const s=t({...n,keyframes:[0,e]}),i=Math.min(u0(s),sf);return{type:"keyframes",ease:a=>s.next(i*a).value/e,duration:Us(i)}}const jB=5;function RT(n,e,t){const s=Math.max(e-jB,0);return aT(t-n(s),e-s)}const Ht={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$g=.001;function LB({duration:n=Ht.duration,bounce:e=Ht.bounce,velocity:t=Ht.velocity,mass:s=Ht.mass}){let i,a,o=1-e;o=_i(Ht.minDamping,Ht.maxDamping,o),n=_i(Ht.minDuration,Ht.maxDuration,Us(n)),o<1?(i=h=>{const f=h*o,p=f*n,y=f-t,b=Vy(h,o),A=Math.exp(-p);return $g-y/b*A},a=h=>{const p=h*o*n,y=p*t+t,b=Math.pow(o,2)*Math.pow(h,2)*n,A=Math.exp(-p),S=Vy(Math.pow(h,2),o);return(-i(h)+$g>0?-1:1)*((y-b)*A)/S}):(i=h=>{const f=Math.exp(-h*n),p=(h-t)*n+1;return-$g+f*p},a=h=>{const f=Math.exp(-h*n),p=(t-h)*(n*n);return f*p});const c=5/n,d=IB(i,a,c);if(n=lr(n),isNaN(d))return{stiffness:Ht.stiffness,damping:Ht.damping,duration:n};{const h=Math.pow(d,2)*s;return{stiffness:h,damping:o*2*Math.sqrt(s*h),duration:n}}}const FB=12;function IB(n,e,t){let s=t;for(let i=1;i<FB;i++)s=s-n(s)/e(s);return s}function Vy(n,e){return n*Math.sqrt(1-e*e)}const BB=["duration","bounce"],zB=["stiffness","damping","mass"];function _A(n,e){return e.some(t=>n[t]!==void 0)}function UB(n){let e={velocity:Ht.velocity,stiffness:Ht.stiffness,damping:Ht.damping,mass:Ht.mass,isResolvedFromDuration:!1,...n};if(!_A(n,zB)&&_A(n,BB))if(n.visualDuration){const t=n.visualDuration,s=2*Math.PI/(t*1.2),i=s*s,a=2*_i(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Ht.mass,stiffness:i,damping:a}}else{const t=LB(n);e={...e,...t,mass:Ht.mass},e.isResolvedFromDuration=!0}return e}function rf(n=Ht.visualDuration,e=Ht.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:s,restDelta:i}=t;const a=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],c={done:!1,value:a},{stiffness:d,damping:h,mass:f,duration:p,velocity:y,isResolvedFromDuration:b}=UB({...t,velocity:-Us(t.velocity||0)}),A=y||0,S=h/(2*Math.sqrt(d*f)),E=o-a,C=Us(Math.sqrt(d/f)),_=Math.abs(E)<5;s||(s=_?Ht.restSpeed.granular:Ht.restSpeed.default),i||(i=_?Ht.restDelta.granular:Ht.restDelta.default);let T;if(S<1){const M=Vy(C,S);T=k=>{const N=Math.exp(-S*C*k);return o-N*((A+S*C*E)/M*Math.sin(M*k)+E*Math.cos(M*k))}}else if(S===1)T=M=>o-Math.exp(-C*M)*(E+(A+C*E)*M);else{const M=C*Math.sqrt(S*S-1);T=k=>{const N=Math.exp(-S*C*k),P=Math.min(M*k,300);return o-N*((A+S*C*E)*Math.sinh(P)+M*E*Math.cosh(P))/M}}const R={calculatedDuration:b&&p||null,next:M=>{const k=T(M);if(b)c.done=M>=p;else{let N=M===0?A:0;S<1&&(N=M===0?lr(A):RT(T,M,k));const P=Math.abs(N)<=s,j=Math.abs(o-k)<=i;c.done=P&&j}return c.value=c.done?o:k,c},toString:()=>{const M=Math.min(u0(R),sf),k=TT(N=>R.next(M*N).value,M,30);return M+"ms "+k},toTransition:()=>{}};return R}rf.applyToOptions=n=>{const e=OB(n,100,rf);return n.ease=e.ease,n.duration=lr(e.duration),n.type="keyframes",n};function Hy({keyframes:n,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:d,restDelta:h=.5,restSpeed:f}){const p=n[0],y={done:!1,value:p},b=P=>c!==void 0&&P<c||d!==void 0&&P>d,A=P=>c===void 0?d:d===void 0||Math.abs(c-P)<Math.abs(d-P)?c:d;let S=t*e;const E=p+S,C=o===void 0?E:o(E);C!==E&&(S=C-p);const _=P=>-S*Math.exp(-P/s),T=P=>C+_(P),R=P=>{const j=_(P),I=T(P);y.done=Math.abs(j)<=h,y.value=y.done?C:I};let M,k;const N=P=>{b(y.value)&&(M=P,k=rf({keyframes:[y.value,A(y.value)],velocity:RT(T,P,y.value),damping:i,stiffness:a,restDelta:h,restSpeed:f}))};return N(0),{calculatedDuration:null,next:P=>{let j=!1;return!k&&M===void 0&&(j=!0,R(P),N(P)),M!==void 0&&P>=M?k.next(P-M):(!j&&R(P),y)}}}function VB(n,e,t){const s=[],i=t||dr.mix||_T,a=n.length-1;for(let o=0;o<a;o++){let c=i(n[o],n[o+1]);if(e){const d=Array.isArray(e)?e[o]||Hs:e;c=Ou(d,c)}s.push(c)}return s}function HB(n,e,{clamp:t=!0,ease:s,mixer:i}={}){const a=n.length;if(t0(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=VB(e,s,i),d=c.length,h=f=>{if(o&&f<n[0])return e[0];let p=0;if(d>1)for(;p<n.length-2&&!(f<n[p+1]);p++);const y=fu(n[p],n[p+1],f);return c[p](y)};return t?f=>h(_i(n[0],n[a-1],f)):h}function $B(n,e){const t=n[n.length-1];for(let s=1;s<=e;s++){const i=fu(0,e,s);n.push(It(t,1,i))}}function qB(n){const e=[0];return $B(e,n.length-1),e}function GB(n,e){return n.map(t=>t*e)}function KB(n,e){return n.map(()=>e||pT).splice(0,n.length-1)}function su({duration:n=300,keyframes:e,times:t,ease:s="easeInOut"}){const i=iB(s)?s.map(xA):xA(s),a={done:!1,value:e[0]},o=GB(t&&t.length===e.length?t:qB(e),n),c=HB(o,e,{ease:Array.isArray(i)?i:KB(e,i)});return{calculatedDuration:n,next:d=>(a.value=c(d),a.done=d>=n,a)}}const YB=n=>n!==null;function d0(n,{repeat:e,repeatType:t="loop"},s,i=1){const a=n.filter(YB),c=i<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!c||s===void 0?a[c]:s}const XB={decay:Hy,inertia:Hy,tween:su,keyframes:su,spring:rf};function DT(n){typeof n.type=="string"&&(n.type=XB[n.type])}class h0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const WB=n=>n/100;class f0 extends h0{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Hn.now()&&this.tick(Hn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;DT(e);const{type:t=su,repeat:s=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=e;let{keyframes:c}=e;const d=t||su;d!==su&&typeof c[0]!="number"&&(this.mixKeyframes=Ou(WB,_T(c[0],c[1])),c=[0,100]);const h=d({...e,keyframes:c});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...c].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=u0(h));const{calculatedDuration:f}=h;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=h}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:s,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return s.next(0);const{delay:h=0,keyframes:f,repeat:p,repeatType:y,repeatDelay:b,type:A,onUpdate:S,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const C=this.currentTime-h*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?C<0:C>i;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let T=this.currentTime,R=s;if(p){const P=Math.min(this.currentTime,i)/c;let j=Math.floor(P),I=P%1;!I&&P>=1&&(I=1),I===1&&j--,j=Math.min(j,p+1),j%2&&(y==="reverse"?(I=1-I,b&&(I-=b/c)):y==="mirror"&&(R=o)),T=_i(0,1,I)*c}const M=_?{done:!1,value:f[0]}:R.next(T);a&&(M.value=a(M.value));let{done:k}=M;!_&&d!==null&&(k=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return N&&A!==Hy&&(M.value=d0(f,this.options,E,this.speed)),S&&S(M.value),N&&this.finish(),M}then(e,t){return this.finished.then(e,t)}get duration(){return Us(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Us(e)}get time(){return Us(this.currentTime)}set time(e){e=lr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Hn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Us(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=kB,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=t??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Hn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function QB(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Fa=n=>n*180/Math.PI,$y=n=>{const e=Fa(Math.atan2(n[1],n[0]));return qy(e)},ZB={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:$y,rotateZ:$y,skewX:n=>Fa(Math.atan(n[1])),skewY:n=>Fa(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},qy=n=>(n=n%360,n<0&&(n+=360),n),TA=$y,RA=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),DA=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),JB={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:RA,scaleY:DA,scale:n=>(RA(n)+DA(n))/2,rotateX:n=>qy(Fa(Math.atan2(n[6],n[5]))),rotateY:n=>qy(Fa(Math.atan2(-n[2],n[0]))),rotateZ:TA,rotate:TA,skewX:n=>Fa(Math.atan(n[4])),skewY:n=>Fa(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Gy(n){return n.includes("scale")?1:0}function Ky(n,e){if(!n||n==="none")return Gy(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(t)s=JB,i=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=ZB,i=c}if(!i)return Gy(e);const a=s[e],o=i[1].split(",").map(t3);return typeof a=="function"?a(o):o[a]}const e3=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Ky(t,e)};function t3(n){return parseFloat(n.trim())}const kl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ol=new Set(kl),MA=n=>n===Pl||n===Oe,n3=new Set(["x","y","z"]),s3=kl.filter(n=>!n3.has(n));function i3(n){const e=[];return s3.forEach(t=>{const s=n.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e}const Kr={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Ky(e,"x"),y:(n,{transform:e})=>Ky(e,"y")};Kr.translateX=Kr.x;Kr.translateY=Kr.y;const Ha=new Set;let Yy=!1,Xy=!1,Wy=!1;function MT(){if(Xy){const n=Array.from(Ha).filter(s=>s.needsMeasurement),e=new Set(n.map(s=>s.element)),t=new Map;e.forEach(s=>{const i=i3(s);i.length&&(t.set(s,i),s.render())}),n.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=t.get(s);i&&i.forEach(([a,o])=>{s.getValue(a)?.set(o)})}),n.forEach(s=>s.measureEndState()),n.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Xy=!1,Yy=!1,Ha.forEach(n=>n.complete(Wy)),Ha.clear()}function NT(){Ha.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Xy=!0)})}function r3(){Wy=!0,NT(),MT(),Wy=!1}class m0{constructor(e,t,s,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Ha.add(this),Yy||(Yy=!0,Nt.read(NT),Nt.resolveKeyframes(MT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:i}=this;if(e[0]===null){const a=i?.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(s&&t){const c=s.readValue(t,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}QB(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ha.delete(this)}cancel(){this.state==="scheduled"&&(Ha.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const a3=n=>n.startsWith("--");function o3(n,e,t){a3(e)?n.style.setProperty(e,t):n.style[e]=t}const l3=n0(()=>window.ScrollTimeline!==void 0),c3={};function u3(n,e){const t=n0(n);return()=>c3[e]??t()}const PT=u3(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),qc=([n,e,t,s])=>`cubic-bezier(${n}, ${e}, ${t}, ${s})`,NA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qc([0,.65,.55,1]),circOut:qc([.55,0,1,.45]),backIn:qc([.31,.01,.66,-.59]),backOut:qc([.33,1.53,.69,.99])};function kT(n,e){if(n)return typeof n=="function"?PT()?TT(n,e):"ease-out":gT(n)?qc(n):Array.isArray(n)?n.map(t=>kT(t,e)||NA.easeOut):NA[n]}function d3(n,e,t,{delay:s=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:c="easeOut",times:d}={},h=void 0){const f={[e]:t};d&&(f.offset=d);const p=kT(c,i);Array.isArray(p)&&(f.easing=p);const y={delay:s,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return h&&(y.pseudoElement=h),n.animate(f,y)}function OT(n){return typeof n=="function"&&"applyToOptions"in n}function h3({type:n,...e}){return OT(n)&&PT()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class f3 extends h0{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:s,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:c,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,t0(typeof e.type!="string");const h=h3(e);this.animation=d3(t,s,i,h,a),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=d0(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(f):o3(t,s,f),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Us(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Us(e)}get time(){return Us(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=lr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&l3()?(this.animation.timeline=e,Hs):t(this)}}const jT={anticipate:hT,backInOut:dT,circInOut:mT};function m3(n){return n in jT}function p3(n){typeof n.ease=="string"&&m3(n.ease)&&(n.ease=jT[n.ease])}const qg=10;class g3 extends f3{constructor(e){p3(e),DT(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:s,onComplete:i,element:a,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new f0({...o,autoplay:!1}),d=Math.max(qg,Hn.now()-this.startTime),h=_i(0,qg,d-qg);t.setWithVelocity(c.sample(Math.max(0,d-h)).value,c.sample(d).value,h),c.stop()}}const PA=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Jr.test(n)||n==="0")&&!n.startsWith("url("));function y3(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function v3(n,e,t,s){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],o=PA(i,e),c=PA(a,e);return!o||!c?!1:y3(n)||(t==="spring"||OT(t))&&s}function Qy(n){n.duration=0,n.type="keyframes"}const b3=new Set(["opacity","clipPath","filter","transform"]),x3=n0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function w3(n){const{motionValue:e,name:t,repeatDelay:s,repeatType:i,damping:a,type:o}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=e.owner.getProps();return x3()&&t&&b3.has(t)&&(t!=="transform"||!h)&&!d&&!s&&i!=="mirror"&&a!==0&&o!=="inertia"}const S3=40;class A3 extends h0{constructor({autoplay:e=!0,delay:t=0,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:c,name:d,motionValue:h,element:f,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Hn.now();const y={autoplay:e,delay:t,type:s,repeat:i,repeatDelay:a,repeatType:o,name:d,motionValue:h,element:f,...p},b=f?.KeyframeResolver||m0;this.keyframeResolver=new b(c,(A,S,E)=>this.onKeyframesResolved(A,S,y,!E),d,h,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,s,i){this.keyframeResolver=void 0;const{name:a,type:o,velocity:c,delay:d,isHandoff:h,onUpdate:f}=s;this.resolvedAt=Hn.now(),v3(e,a,o,c)||((dr.instantAnimations||!d)&&f?.(d0(e,s,t)),e[0]=e[e.length-1],Qy(s),s.repeat=0);const y={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>S3?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...s,keyframes:e},b=!h&&w3(y),A=y.motionValue?.owner?.current,S=b?new g3({...y,element:A}):new f0(y);S.finished.then(()=>{this.notifyFinished()}).catch(Hs),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),r3()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function LT(n,e,t,s=0,i=1){const a=Array.from(n).sort((h,f)=>h.sortNodePosition(f)).indexOf(e),o=n.size,c=(o-1)*s;return typeof t=="function"?t(a,o):i===1?a*s:c-a*s}const C3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function E3(n){const e=C3.exec(n);if(!e)return[,];const[,t,s,i]=e;return[`--${t??s}`,i]}function FT(n,e,t=1){const[s,i]=E3(n);if(!s)return;const a=window.getComputedStyle(e).getPropertyValue(s);if(a){const o=a.trim();return sT(o)?parseFloat(o):o}return a0(i)?FT(i,e,t+1):i}const _3={type:"spring",stiffness:500,damping:25,restSpeed:10},T3=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),R3={type:"keyframes",duration:.8},D3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},M3=(n,{keyframes:e})=>e.length>2?R3:Ol.has(n)?n.startsWith("scale")?T3(e[1]):_3:D3,N3=n=>n!==null;function P3(n,{repeat:e,repeatType:t="loop"},s){const i=n.filter(N3),a=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[a]}function p0(n,e){return n?.[e]??n?.default??n}function k3({when:n,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:c,from:d,elapsed:h,...f}){return!!Object.keys(f).length}const g0=(n,e,t,s={},i,a)=>o=>{const c=p0(s,n)||{},d=c.delay||s.delay||0;let{elapsed:h=0}=s;h=h-lr(d);const f={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:y=>{e.set(y),c.onUpdate&&c.onUpdate(y)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:a?void 0:i};k3(c)||Object.assign(f,M3(n,f)),f.duration&&(f.duration=lr(f.duration)),f.repeatDelay&&(f.repeatDelay=lr(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(Qy(f),f.delay===0&&(p=!0)),(dr.instantAnimations||dr.skipAnimations)&&(p=!0,Qy(f),f.delay=0),f.allowFlatten=!c.type&&!c.ease,p&&!a&&e.get()!==void 0){const y=P3(f.keyframes,c);if(y!==void 0){Nt.update(()=>{f.onUpdate(y),f.onComplete()});return}}return c.isSync?new f0(f):new A3(f)};function kA(n){const e=[{},{}];return n?.values.forEach((t,s)=>{e[0][s]=t.get(),e[1][s]=t.getVelocity()}),e}function y0(n,e,t,s){if(typeof e=="function"){const[i,a]=kA(s);e=e(t!==void 0?t:n.custom,i,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,a]=kA(s);e=e(t!==void 0?t:n.custom,i,a)}return e}function fl(n,e,t){const s=n.getProps();return y0(s,e,t!==void 0?t:s.custom,n)}const IT=new Set(["width","height","top","left","right","bottom",...kl]),OA=30,O3=n=>!isNaN(parseFloat(n));class j3{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{const i=Hn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Hn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=O3(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new s0);const s=this.events[e].add(t);return e==="change"?()=>{s(),Nt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Hn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>OA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,OA);return aT(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Cl(n,e){return new j3(n,e)}const Zy=n=>Array.isArray(n);function L3(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Cl(t))}function F3(n){return Zy(n)?n[n.length-1]||0:n}function I3(n,e){const t=fl(n,e);let{transitionEnd:s={},transition:i={},...a}=t||{};a={...a,...s};for(const o in a){const c=F3(a[o]);L3(n,o,c)}}const kn=n=>!!(n&&n.getVelocity);function B3(n){return!!(kn(n)&&n.add)}function Jy(n,e){const t=n.getValue("willChange");if(B3(t))return t.add(e);if(!t&&dr.WillChange){const s=new dr.WillChange("auto");n.addValue("willChange",s),s.add(e)}}function v0(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const z3="framerAppearId",BT="data-"+v0(z3);function zT(n){return n.props[BT]}function U3({protectedKeys:n,needsAnimating:e},t){const s=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function UT(n,e,{delay:t=0,transitionOverride:s,type:i}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:o,...c}=e;s&&(a=s);const d=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const f in c){const p=n.getValue(f,n.latestValues[f]??null),y=c[f];if(y===void 0||h&&U3(h,f))continue;const b={delay:t,...p0(a||{},f)},A=p.get();if(A!==void 0&&!p.isAnimating&&!Array.isArray(y)&&y===A&&!b.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const C=zT(n);if(C){const _=window.MotionHandoffAnimation(C,f,Nt);_!==null&&(b.startTime=_,S=!0)}}Jy(n,f),p.start(g0(f,p,y,n.shouldReduceMotion&&IT.has(f)?{type:!1}:b,n,S));const E=p.animation;E&&d.push(E)}return o&&Promise.all(d).then(()=>{Nt.update(()=>{o&&I3(n,o)})}),d}function ev(n,e,t={}){const s=fl(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(i=t.transitionOverride);const a=s?()=>Promise.all(UT(n,s,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:p}=i;return V3(n,e,d,h,f,p,t)}:()=>Promise.resolve(),{when:c}=i;if(c){const[d,h]=c==="beforeChildren"?[a,o]:[o,a];return d().then(()=>h())}else return Promise.all([a(),o(t.delay)])}function V3(n,e,t=0,s=0,i=0,a=1,o){const c=[];for(const d of n.variantChildren)d.notify("AnimationStart",e),c.push(ev(d,e,{...o,delay:t+(typeof s=="function"?0:s)+LT(n.variantChildren,d,s,i,a)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(c)}function H3(n,e,t={}){n.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(a=>ev(n,a,t));s=Promise.all(i)}else if(typeof e=="string")s=ev(n,e,t);else{const i=typeof e=="function"?fl(n,e,t.custom):e;s=Promise.all(UT(n,i,t))}return s.then(()=>{n.notify("AnimationComplete",e)})}const $3={test:n=>n==="auto",parse:n=>n},VT=n=>e=>e.test(n),HT=[Pl,Oe,Ci,Vr,yB,gB,$3],jA=n=>HT.find(VT(n));function q3(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||rT(n):!0}const G3=new Set(["brightness","contrast","saturate","opacity"]);function K3(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[s]=t.match(o0)||[];if(!s)return n;const i=t.replace(s,"");let a=G3.has(e)?1:0;return s!==t&&(a*=100),e+"("+a+i+")"}const Y3=/\b([a-z-]*)\(.*?\)/gu,tv={...Jr,getAnimatableNone:n=>{const e=n.match(Y3);return e?e.map(K3).join(" "):n}},LA={...Pl,transform:Math.round},X3={rotate:Vr,rotateX:Vr,rotateY:Vr,rotateZ:Vr,scale:yh,scaleX:yh,scaleY:yh,scaleZ:yh,skew:Vr,skewX:Vr,skewY:Vr,distance:Oe,translateX:Oe,translateY:Oe,translateZ:Oe,x:Oe,y:Oe,z:Oe,perspective:Oe,transformPerspective:Oe,opacity:mu,originX:SA,originY:SA,originZ:Oe},b0={borderWidth:Oe,borderTopWidth:Oe,borderRightWidth:Oe,borderBottomWidth:Oe,borderLeftWidth:Oe,borderRadius:Oe,borderTopLeftRadius:Oe,borderTopRightRadius:Oe,borderBottomRightRadius:Oe,borderBottomLeftRadius:Oe,width:Oe,maxWidth:Oe,height:Oe,maxHeight:Oe,top:Oe,right:Oe,bottom:Oe,left:Oe,inset:Oe,insetBlock:Oe,insetBlockStart:Oe,insetBlockEnd:Oe,insetInline:Oe,insetInlineStart:Oe,insetInlineEnd:Oe,padding:Oe,paddingTop:Oe,paddingRight:Oe,paddingBottom:Oe,paddingLeft:Oe,paddingBlock:Oe,paddingBlockStart:Oe,paddingBlockEnd:Oe,paddingInline:Oe,paddingInlineStart:Oe,paddingInlineEnd:Oe,margin:Oe,marginTop:Oe,marginRight:Oe,marginBottom:Oe,marginLeft:Oe,marginBlock:Oe,marginBlockStart:Oe,marginBlockEnd:Oe,marginInline:Oe,marginInlineStart:Oe,marginInlineEnd:Oe,fontSize:Oe,backgroundPositionX:Oe,backgroundPositionY:Oe,...X3,zIndex:LA,fillOpacity:mu,strokeOpacity:mu,numOctaves:LA},W3={...b0,color:nn,backgroundColor:nn,outlineColor:nn,fill:nn,stroke:nn,borderColor:nn,borderTopColor:nn,borderRightColor:nn,borderBottomColor:nn,borderLeftColor:nn,filter:tv,WebkitFilter:tv},$T=n=>W3[n];function qT(n,e){let t=$T(n);return t!==tv&&(t=Jr),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Q3=new Set(["auto","none","0"]);function Z3(n,e,t){let s=0,i;for(;s<n.length&&!i;){const a=n[s];typeof a=="string"&&!Q3.has(a)&&pu(a).values.length&&(i=n[s]),s++}if(i&&t)for(const a of e)n[a]=qT(t,i)}class J3 extends m0{constructor(e,t,s,i,a){super(e,t,s,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let p=e[f];if(typeof p=="string"&&(p=p.trim(),a0(p))){const y=FT(p,t.current);y!==void 0&&(e[f]=y),f===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!IT.has(s)||e.length!==2)return;const[i,a]=e,o=jA(i),c=jA(a),d=wA(i),h=wA(a);if(d!==h&&Kr[s]){this.needsMeasurement=!0;return}if(o!==c)if(MA(o)&&MA(c))for(let f=0;f<e.length;f++){const p=e[f];typeof p=="string"&&(e[f]=parseFloat(p))}else Kr[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let i=0;i<e.length;i++)(e[i]===null||q3(e[i]))&&s.push(i);s.length&&Z3(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Kr[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const a=s.length-1,o=s[a];s[a]=Kr[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function e5(n,e,t){if(n==null)return[];if(n instanceof EventTarget)return[n];if(typeof n=="string"){let s=document;const i=t?.[n]??s.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n).filter(s=>s!=null)}const GT=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function nv(n){return iT(n)&&"offsetHeight"in n}const{schedule:x0}=yT(queueMicrotask,!1),Js={x:!1,y:!1};function KT(){return Js.x||Js.y}function t5(n){return n==="x"||n==="y"?Js[n]?null:(Js[n]=!0,()=>{Js[n]=!1}):Js.x||Js.y?null:(Js.x=Js.y=!0,()=>{Js.x=Js.y=!1})}function YT(n,e){const t=e5(n),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[t,i,()=>s.abort()]}function FA(n){return!(n.pointerType==="touch"||KT())}function n5(n,e,t={}){const[s,i,a]=YT(n,t),o=c=>{if(!FA(c))return;const{target:d}=c,h=e(d,c);if(typeof h!="function"||!d)return;const f=p=>{FA(p)&&(h(p),d.removeEventListener("pointerleave",f))};d.addEventListener("pointerleave",f,i)};return s.forEach(c=>{c.addEventListener("pointerenter",o,i)}),a}const XT=(n,e)=>e?n===e?!0:XT(n,e.parentElement):!1,w0=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,s5=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function WT(n){return s5.has(n.tagName)||n.isContentEditable===!0}const Vh=new WeakSet;function IA(n){return e=>{e.key==="Enter"&&n(e)}}function Gg(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const i5=(n,e)=>{const t=n.currentTarget;if(!t)return;const s=IA(()=>{if(Vh.has(t))return;Gg(t,"down");const i=IA(()=>{Gg(t,"up")}),a=()=>Gg(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",s,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",s),e)};function BA(n){return w0(n)&&!KT()}function r5(n,e,t={}){const[s,i,a]=YT(n,t),o=c=>{const d=c.currentTarget;if(!BA(c))return;Vh.add(d);const h=e(d,c),f=(b,A)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",y),Vh.has(d)&&Vh.delete(d),BA(b)&&typeof h=="function"&&h(b,{success:A})},p=b=>{f(b,d===window||d===document||t.useGlobalTarget||XT(d,b.target))},y=b=>{f(b,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",y,i)};return s.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",o,i),nv(c)&&(c.addEventListener("focus",h=>i5(h,i)),!WT(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function QT(n){return iT(n)&&"ownerSVGElement"in n}function a5(n){return QT(n)&&n.tagName==="svg"}const o5=[...HT,nn,Jr],l5=n=>o5.find(VT(n)),zA=()=>({translate:0,scale:1,origin:0,originPoint:0}),al=()=>({x:zA(),y:zA()}),UA=()=>({min:0,max:0}),ln=()=>({x:UA(),y:UA()}),sv={current:null},ZT={current:!1},c5=typeof window<"u";function u5(){if(ZT.current=!0,!!c5)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>sv.current=n.matches;n.addEventListener("change",e),e()}else sv.current=!1}const d5=new WeakMap;function Lf(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function gu(n){return typeof n=="string"||Array.isArray(n)}const S0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],A0=["initial",...S0];function Ff(n){return Lf(n.animate)||A0.some(e=>gu(n[e]))}function JT(n){return!!(Ff(n)||n.variants)}function h5(n,e,t){for(const s in e){const i=e[s],a=t[s];if(kn(i))n.addValue(s,i);else if(kn(a))n.addValue(s,Cl(i,{owner:n}));else if(a!==i)if(n.hasValue(s)){const o=n.getValue(s);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=n.getStaticValue(s);n.addValue(s,Cl(o!==void 0?o:i,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const VA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let af={};function eR(n){af=n}function f5(){return af}class m5{scrapeMotionValuesFromProps(e,t,s){return{}}constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=m0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Hn.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Nt.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=o;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=h,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=Ff(t),this.isVariantNode=JT(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in p){const b=p[y];d[y]!==void 0&&kn(b)&&b.set(d[y])}}mount(e){this.current=e,d5.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(ZT.current||u5(),this.shouldReduceMotion=sv.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Zr(this.notifyUpdate),Zr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Ol.has(e);s&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Nt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in af){const t=af[e];if(!t)continue;const{isEnabled:s,Feature:i}=t;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ln()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<VA.length;s++){const i=VA[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=h5(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=Cl(t===null?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(sT(s)||rT(s))?s=parseFloat(s):!l5(s)&&Jr.test(t)&&(s=qT(e,t)),this.setBaseTarget(e,kn(s)?s.get():s)),kn(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let s;if(typeof t=="string"||typeof t=="object"){const a=y0(this.props,t,this.presenceContext?.custom);a&&(s=a[e])}if(t&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!kn(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new s0),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){x0.render(this.render)}}class tR extends m5{constructor(){super(...arguments),this.KeyframeResolver=J3}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const s=e.style;return s?s[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;kn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class ia{constructor(e){this.isMounted=!1,this.node=e}update(){}}function nR({top:n,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:n,max:s}}}function p5({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function g5(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),s=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}function Kg(n){return n===void 0||n===1}function iv({scale:n,scaleX:e,scaleY:t}){return!Kg(n)||!Kg(e)||!Kg(t)}function Da(n){return iv(n)||sR(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function sR(n){return HA(n.x)||HA(n.y)}function HA(n){return n&&n!=="0%"}function of(n,e,t){const s=n-t,i=e*s;return t+i}function $A(n,e,t,s,i){return i!==void 0&&(n=of(n,i,s)),of(n,t,s)+e}function rv(n,e=0,t=1,s,i){n.min=$A(n.min,e,t,s,i),n.max=$A(n.max,e,t,s,i)}function iR(n,{x:e,y:t}){rv(n.x,e.translate,e.scale,e.originPoint),rv(n.y,t.translate,t.scale,t.originPoint)}const qA=.999999999999,GA=1.0000000000001;function y5(n,e,t,s=!1){const i=t.length;if(!i)return;e.x=e.y=1;let a,o;for(let c=0;c<i;c++){a=t[c],o=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&ll(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,iR(n,o)),s&&Da(a.latestValues)&&ll(n,a.latestValues))}e.x<GA&&e.x>qA&&(e.x=1),e.y<GA&&e.y>qA&&(e.y=1)}function ol(n,e){n.min=n.min+e,n.max=n.max+e}function KA(n,e,t,s,i=.5){const a=It(n.min,n.max,i);rv(n,e,t,a,s)}function ll(n,e){KA(n.x,e.x,e.scaleX,e.scale,e.originX),KA(n.y,e.y,e.scaleY,e.scale,e.originY)}function rR(n,e){return nR(g5(n.getBoundingClientRect(),e))}function v5(n,e,t){const s=rR(n,t),{scroll:i}=e;return i&&(ol(s.x,i.offset.x),ol(s.y,i.offset.y)),s}const b5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},x5=kl.length;function w5(n,e,t){let s="",i=!0;for(let a=0;a<x5;a++){const o=kl[a],c=n[o];if(c===void 0)continue;let d=!0;if(typeof c=="number")d=c===(o.startsWith("scale")?1:0);else{const h=parseFloat(c);d=o.startsWith("scale")?h===1:h===0}if(!d||t){const h=GT(c,b0[o]);if(!d){i=!1;const f=b5[o]||o;s+=`${f}(${h}) `}t&&(e[o]=h)}}return s=s.trim(),t?s=t(e,i?"":s):i&&(s="none"),s}function C0(n,e,t){const{style:s,vars:i,transformOrigin:a}=n;let o=!1,c=!1;for(const d in e){const h=e[d];if(Ol.has(d)){o=!0;continue}else if(bT(d)){i[d]=h;continue}else{const f=GT(h,b0[d]);d.startsWith("origin")?(c=!0,a[d]=f):s[d]=f}}if(e.transform||(o||t?s.transform=w5(e,n.transform,t):s.transform&&(s.transform="none")),c){const{originX:d="50%",originY:h="50%",originZ:f=0}=a;s.transformOrigin=`${d} ${h} ${f}`}}function aR(n,{style:e,vars:t},s,i){const a=n.style;let o;for(o in e)a[o]=e[o];i?.applyProjectionStyles(a,s);for(o in t)a.setProperty(o,t[o])}function YA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ic={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Oe.test(n))n=parseFloat(n);else return n;const t=YA(n,e.target.x),s=YA(n,e.target.y);return`${t}% ${s}%`}},S5={correct:(n,{treeScale:e,projectionDelta:t})=>{const s=n,i=Jr.parse(n);if(i.length>5)return s;const a=Jr.createTransformer(n),o=typeof i[0]!="number"?1:0,c=t.x.scale*e.x,d=t.y.scale*e.y;i[0+o]/=c,i[1+o]/=d;const h=It(c,d,.5);return typeof i[2+o]=="number"&&(i[2+o]/=h),typeof i[3+o]=="number"&&(i[3+o]/=h),a(i)}},av={borderRadius:{...Ic,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ic,borderTopRightRadius:Ic,borderBottomLeftRadius:Ic,borderBottomRightRadius:Ic,boxShadow:S5};function oR(n,{layout:e,layoutId:t}){return Ol.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!av[n]||n==="opacity")}function E0(n,e,t){const s=n.style,i=e?.style,a={};if(!s)return a;for(const o in s)(kn(s[o])||i&&kn(i[o])||oR(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(a[o]=s[o]);return a}function A5(n){return window.getComputedStyle(n)}class C5 extends tR{constructor(){super(...arguments),this.type="html",this.renderInstance=aR}readValueFromInstance(e,t){if(Ol.has(t))return this.projection?.isProjecting?Gy(t):e3(e,t);{const s=A5(e),i=(bT(t)?s.getPropertyValue(t):s[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return rR(e,t)}build(e,t,s){C0(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return E0(e,t,s)}}const E5={offset:"stroke-dashoffset",array:"stroke-dasharray"},_5={offset:"strokeDashoffset",array:"strokeDasharray"};function T5(n,e,t=1,s=0,i=!0){n.pathLength=1;const a=i?E5:_5;n[a.offset]=`${-s}`,n[a.array]=`${e} ${t}`}const R5=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function lR(n,{attrX:e,attrY:t,attrScale:s,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...c},d,h,f){if(C0(n,c,h),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:y}=n;p.transform&&(y.transform=p.transform,delete p.transform),(y.transform||p.transformOrigin)&&(y.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),y.transform&&(y.transformBox=f?.transformBox??"fill-box",delete p.transformBox);for(const b of R5)p[b]!==void 0&&(y[b]=p[b],delete p[b]);e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),s!==void 0&&(p.scale=s),i!==void 0&&T5(p,i,a,o,!1)}const cR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),uR=n=>typeof n=="string"&&n.toLowerCase()==="svg";function D5(n,e,t,s){aR(n,e,void 0,s);for(const i in e.attrs)n.setAttribute(cR.has(i)?i:v0(i),e.attrs[i])}function dR(n,e,t){const s=E0(n,e,t);for(const i in n)if(kn(n[i])||kn(e[i])){const a=kl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[a]=n[i]}return s}class M5 extends tR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ln}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ol.has(t)){const s=$T(t);return s&&s.default||0}return t=cR.has(t)?t:v0(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return dR(e,t,s)}build(e,t,s){lR(e,t,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,t,s,i){D5(e,t,s,i)}mount(e){this.isSVGTag=uR(e.tagName),super.mount(e)}}const N5=A0.length;function hR(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?hR(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<N5;t++){const s=A0[t],i=n.props[s];(gu(i)||i===!1)&&(e[s]=i)}return e}function fR(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let s=0;s<t;s++)if(e[s]!==n[s])return!1;return!0}const P5=[...S0].reverse(),k5=S0.length;function O5(n){return e=>Promise.all(e.map(({animation:t,options:s})=>H3(n,t,s)))}function j5(n){let e=O5(n),t=XA(),s=!0;const i=d=>(h,f)=>{const p=fl(n,f,d==="exit"?n.presenceContext?.custom:void 0);if(p){const{transition:y,transitionEnd:b,...A}=p;h={...h,...A,...b}}return h};function a(d){e=d(n)}function o(d){const{props:h}=n,f=hR(n.parent)||{},p=[],y=new Set;let b={},A=1/0;for(let E=0;E<k5;E++){const C=P5[E],_=t[C],T=h[C]!==void 0?h[C]:f[C],R=gu(T),M=C===d?_.isActive:null;M===!1&&(A=E);let k=T===f[C]&&T!==h[C]&&R;if(k&&s&&n.manuallyAnimateOnMount&&(k=!1),_.protectedKeys={...b},!_.isActive&&M===null||!T&&!_.prevProp||Lf(T)||typeof T=="boolean")continue;const N=L5(_.prevProp,T);let P=N||C===d&&_.isActive&&!k&&R||E>A&&R,j=!1;const I=Array.isArray(T)?T:[T];let H=I.reduce(i(C),{});M===!1&&(H={});const{prevResolvedValues:$={}}=_,K={...$,...H},Z=B=>{P=!0,y.has(B)&&(j=!0,y.delete(B)),_.needsAnimating[B]=!0;const z=n.getValue(B);z&&(z.liveStyle=!1)};for(const B in K){const z=H[B],Q=$[B];if(b.hasOwnProperty(B))continue;let me=!1;Zy(z)&&Zy(Q)?me=!fR(z,Q):me=z!==Q,me?z!=null?Z(B):y.add(B):z!==void 0&&y.has(B)?Z(B):_.protectedKeys[B]=!0}_.prevProp=T,_.prevResolvedValues=H,_.isActive&&(b={...b,...H}),s&&n.blockInitialAnimation&&(P=!1);const oe=k&&N;P&&(!oe||j)&&p.push(...I.map(B=>{const z={type:C};if(typeof B=="string"&&s&&!oe&&n.manuallyAnimateOnMount&&n.parent){const{parent:Q}=n,me=fl(Q,B);if(Q.enteringChildren&&me){const{delayChildren:L}=me.transition||{};z.delay=LT(Q.enteringChildren,n,L)}}return{animation:B,options:z}}))}if(y.size){const E={};if(typeof h.initial!="boolean"){const C=fl(n,Array.isArray(h.initial)?h.initial[0]:h.initial);C&&C.transition&&(E.transition=C.transition)}y.forEach(C=>{const _=n.getBaseTarget(C),T=n.getValue(C);T&&(T.liveStyle=!0),E[C]=_??null}),p.push({animation:E})}let S=!!p.length;return s&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(S=!1),s=!1,S?e(p):Promise.resolve()}function c(d,h){if(t[d].isActive===h)return Promise.resolve();n.variantChildren?.forEach(p=>p.animationState?.setActive(d,h)),t[d].isActive=h;const f=o(d);for(const p in t)t[p].protectedKeys={};return f}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>t,reset:()=>{t=XA()}}}function L5(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!fR(e,n):!1}function _a(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function XA(){return{animate:_a(!0),whileInView:_a(),whileHover:_a(),whileTap:_a(),whileDrag:_a(),whileFocus:_a(),exit:_a()}}function WA(n,e){n.min=e.min,n.max=e.max}function Zs(n,e){WA(n.x,e.x),WA(n.y,e.y)}function QA(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const mR=1e-4,F5=1-mR,I5=1+mR,pR=.01,B5=0-pR,z5=0+pR;function $n(n){return n.max-n.min}function U5(n,e,t){return Math.abs(n-e)<=t}function ZA(n,e,t,s=.5){n.origin=s,n.originPoint=It(e.min,e.max,n.origin),n.scale=$n(t)/$n(e),n.translate=It(t.min,t.max,n.origin)-n.originPoint,(n.scale>=F5&&n.scale<=I5||isNaN(n.scale))&&(n.scale=1),(n.translate>=B5&&n.translate<=z5||isNaN(n.translate))&&(n.translate=0)}function iu(n,e,t,s){ZA(n.x,e.x,t.x,s?s.originX:void 0),ZA(n.y,e.y,t.y,s?s.originY:void 0)}function JA(n,e,t){n.min=t.min+e.min,n.max=n.min+$n(e)}function V5(n,e,t){JA(n.x,e.x,t.x),JA(n.y,e.y,t.y)}function eC(n,e,t){n.min=e.min-t.min,n.max=n.min+$n(e)}function lf(n,e,t){eC(n.x,e.x,t.x),eC(n.y,e.y,t.y)}function tC(n,e,t,s,i){return n-=e,n=of(n,1/t,s),i!==void 0&&(n=of(n,1/i,s)),n}function H5(n,e=0,t=1,s=.5,i,a=n,o=n){if(Ci.test(e)&&(e=parseFloat(e),e=It(o.min,o.max,e/100)-o.min),typeof e!="number")return;let c=It(a.min,a.max,s);n===a&&(c-=e),n.min=tC(n.min,e,t,c,i),n.max=tC(n.max,e,t,c,i)}function nC(n,e,[t,s,i],a,o){H5(n,e[t],e[s],e[i],e.scale,a,o)}const $5=["x","scaleX","originX"],q5=["y","scaleY","originY"];function sC(n,e,t,s){nC(n.x,e,$5,t?t.x:void 0,s?s.x:void 0),nC(n.y,e,q5,t?t.y:void 0,s?s.y:void 0)}function iC(n){return n.translate===0&&n.scale===1}function gR(n){return iC(n.x)&&iC(n.y)}function rC(n,e){return n.min===e.min&&n.max===e.max}function G5(n,e){return rC(n.x,e.x)&&rC(n.y,e.y)}function aC(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function yR(n,e){return aC(n.x,e.x)&&aC(n.y,e.y)}function oC(n){return $n(n.x)/$n(n.y)}function lC(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function Bs(n){return[n("x"),n("y")]}function K5(n,e,t){let s="";const i=n.x.translate/e.x,a=n.y.translate/e.y,o=t?.z||0;if((i||a||o)&&(s=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:f,rotateX:p,rotateY:y,skewX:b,skewY:A}=t;h&&(s=`perspective(${h}px) ${s}`),f&&(s+=`rotate(${f}deg) `),p&&(s+=`rotateX(${p}deg) `),y&&(s+=`rotateY(${y}deg) `),b&&(s+=`skewX(${b}deg) `),A&&(s+=`skewY(${A}deg) `)}const c=n.x.scale*e.x,d=n.y.scale*e.y;return(c!==1||d!==1)&&(s+=`scale(${c}, ${d})`),s||"none"}const vR=["TopLeft","TopRight","BottomLeft","BottomRight"],Y5=vR.length,cC=n=>typeof n=="string"?parseFloat(n):n,uC=n=>typeof n=="number"||Oe.test(n);function X5(n,e,t,s,i,a){i?(n.opacity=It(0,t.opacity??1,W5(s)),n.opacityExit=It(e.opacity??1,0,Q5(s))):a&&(n.opacity=It(e.opacity??1,t.opacity??1,s));for(let o=0;o<Y5;o++){const c=`border${vR[o]}Radius`;let d=dC(e,c),h=dC(t,c);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||uC(d)===uC(h)?(n[c]=Math.max(It(cC(d),cC(h),s),0),(Ci.test(h)||Ci.test(d))&&(n[c]+="%")):n[c]=h}(e.rotate||t.rotate)&&(n.rotate=It(e.rotate||0,t.rotate||0,s))}function dC(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const W5=bR(0,.5,fT),Q5=bR(.5,.95,Hs);function bR(n,e,t){return s=>s<n?0:s>e?1:t(fu(n,e,s))}function Z5(n,e,t){const s=kn(n)?n:Cl(n);return s.start(g0("",s,e,t)),s.animation}function yu(n,e,t,s={passive:!0}){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t)}const J5=(n,e)=>n.depth-e.depth;class e6{constructor(){this.children=[],this.isDirty=!1}add(e){Jv(this.children,e),this.isDirty=!0}remove(e){e0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(J5),this.isDirty=!1,this.children.forEach(e)}}function t6(n,e){const t=Hn.now(),s=({timestamp:i})=>{const a=i-t;a>=e&&(Zr(s),n(a-e))};return Nt.setup(s,!0),()=>Zr(s)}function Hh(n){return kn(n)?n.get():n}class n6{constructor(){this.members=[]}add(e){Jv(this.members,e),e.scheduleRender()}remove(e){if(e0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let s;for(let i=t;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender();const i=s.options.layoutDependency,a=e.options.layoutDependency;i!==void 0&&a!==void 0&&i===a||(e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:c}=e.options;c===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const $h={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Yg=["","X","Y","Z"],s6=1e3;let i6=0;function Xg(n,e,t,s){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),s&&(s[n]=0))}function xR(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=zT(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Nt,!(i||a))}const{parent:s}=n;s&&!s.hasCheckedOptimisedAppear&&xR(s)}function wR({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(o={},c=e?.()){this.id=i6++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(o6),this.nodes.forEach(d6),this.nodes.forEach(h6),this.nodes.forEach(l6)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new e6)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new s0),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const d=this.eventHandlers.get(o);d&&d.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=QT(o)&&!a5(o),this.instance=o;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),n){let f,p=0;const y=()=>this.root.updateBlockedByResize=!1;Nt.read(()=>{p=window.innerWidth}),n(o,()=>{const b=window.innerWidth;b!==p&&(p=b,this.root.updateBlockedByResize=!0,f&&f(),f=t6(y,250),$h.hasAnimatedSinceResize&&($h.hasAnimatedSinceResize=!1,this.nodes.forEach(mC)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeLayoutChanged:y,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||h.getDefaultTransition()||y6,{onLayoutAnimationStart:S,onLayoutAnimationComplete:E}=h.getProps(),C=!this.targetLayout||!yR(this.targetLayout,b),_=!p&&y;if(this.options.layoutRoot||this.resumeFrom||_||p&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...p0(A,"layout"),onPlay:S,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(f,_)}else p||mC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Zr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(f6),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&xR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(hC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(fC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(u6),this.nodes.forEach(r6),this.nodes.forEach(a6)):this.nodes.forEach(fC),this.clearAllSnapshots();const c=Hn.now();En.delta=_i(0,1e3/60,c-En.timestamp),En.timestamp=c,En.isProcessing=!0,zg.update.process(En),zg.preRender.process(En),zg.render.process(En),En.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,x0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(c6),this.sharedNodes.forEach(m6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Nt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Nt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!$n(this.snapshot.measuredBox.x)&&!$n(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const d=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!gR(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;o&&this.instance&&(c||Da(this.latestValues)||f)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return o&&(d=this.removeTransform(d)),v6(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ln();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(b6))){const{scroll:h}=this.root;h&&(ol(c.x,h.offset.x),ol(c.y,h.offset.y))}return c}removeElementScroll(o){const c=ln();if(Zs(c,o),this.scroll?.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:f,options:p}=h;h!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&Zs(c,o),ol(c.x,f.offset.x),ol(c.y,f.offset.y))}return c}applyTransform(o,c=!1){const d=ln();Zs(d,o);for(let h=0;h<this.path.length;h++){const f=this.path[h];!c&&f.options.layoutScroll&&f.scroll&&f!==f.root&&ll(d,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Da(f.latestValues)&&ll(d,f.latestValues)}return Da(this.latestValues)&&ll(d,this.latestValues),d}removeTransform(o){const c=ln();Zs(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!Da(h.latestValues))continue;iv(h.latestValues)&&h.updateSnapshot();const f=ln(),p=h.measurePageBox();Zs(f,p),sC(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return Da(this.latestValues)&&sC(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==En.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!this.layout||!(f||p))return;this.resolvedRelativeTargetAt=En.timestamp;const y=this.getClosestProjectingParent();y&&this.linkedParentVersion!==y.layoutVersion&&!y.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(y&&y.layout?this.createRelativeTarget(y,this.layout.layoutBox,y.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ln(),this.targetWithTransforms=ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),V5(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Zs(this.target,this.layout.layoutBox),iR(this.target,this.targetDelta)):Zs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?this.createRelativeTarget(y,this.target,y.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||iv(this.parent.latestValues)||sR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,c,d){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),lf(this.relativeTargetOrigin,c,d),Zs(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===En.timestamp&&(d=!1),d)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;Zs(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,y=this.treeScale.y;y5(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ln());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(QA(this.prevProjectionDelta.x,this.projectionDelta.x),QA(this.prevProjectionDelta.y,this.projectionDelta.y)),iu(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==y||!lC(this.projectionDelta.x,this.prevProjectionDelta.x)||!lC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=al(),this.projectionDelta=al(),this.projectionDeltaWithTransform=al()}setAnimationOrigin(o,c=!1){const d=this.snapshot,h=d?d.latestValues:{},f={...this.latestValues},p=al();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const y=ln(),b=d?d.source:void 0,A=this.layout?this.layout.source:void 0,S=b!==A,E=this.getStack(),C=!E||E.members.length<=1,_=!!(S&&!C&&this.options.crossfade===!0&&!this.path.some(g6));this.animationProgress=0;let T;this.mixTargetDelta=R=>{const M=R/1e3;pC(p.x,o.x,M),pC(p.y,o.y,M),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(lf(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p6(this.relativeTarget,this.relativeTargetOrigin,y,M),T&&G5(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=ln()),Zs(T,this.relativeTarget)),S&&(this.animationValues=f,X5(f,h,this.latestValues,M,_,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Zr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Nt.update(()=>{$h.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Cl(0)),this.currentAnimation=Z5(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(s6),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:d,layout:h,latestValues:f}=o;if(!(!c||!d||!h)){if(this!==o&&this.layout&&h&&SR(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||ln();const p=$n(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+p;const y=$n(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+y}Zs(c,d),ll(c,f),iu(this.projectionDeltaWithTransform,this.layoutCorrected,c,f)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new n6),this.sharedNodes.get(o).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:d}=o;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const h={};d.z&&Xg("z",o,h,this.animationValues);for(let f=0;f<Yg.length;f++)Xg(`rotate${Yg[f]}`,o,h,this.animationValues),Xg(`skew${Yg[f]}`,o,h,this.animationValues);o.render();for(const f in h)o.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Hh(c?.pointerEvents)||"",o.transform=d?d(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Hh(c?.pointerEvents)||""),this.hasProjected&&!Da(this.latestValues)&&(o.transform=d?d({},""):"none",this.hasProjected=!1);return}o.visibility="";const f=h.animationValues||h.latestValues;this.applyTransformsToTarget();let p=K5(this.projectionDeltaWithTransform,this.treeScale,f);d&&(p=d(f,p)),o.transform=p;const{x:y,y:b}=this.projectionDelta;o.transformOrigin=`${y.origin*100}% ${b.origin*100}% 0`,h.animationValues?o.opacity=h===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const A in av){if(f[A]===void 0)continue;const{correct:S,applyTo:E,isCSSVariable:C}=av[A],_=p==="none"?f[A]:S(f[A],h);if(E){const T=E.length;for(let R=0;R<T;R++)o[E[R]]=_}else C?this.options.visualElement.renderState.vars[A]=_:o[A]=_}this.options.layoutId&&(o.pointerEvents=h===this?Hh(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(hC),this.root.sharedNodes.clear()}}}function r6(n){n.updateLayout()}function a6(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:s}=n.layout,{animationType:i}=n.options,a=e.source!==n.layout.source;i==="size"?Bs(f=>{const p=a?e.measuredBox[f]:e.layoutBox[f],y=$n(p);p.min=t[f].min,p.max=p.min+y}):SR(i,e.layoutBox,t)&&Bs(f=>{const p=a?e.measuredBox[f]:e.layoutBox[f],y=$n(t[f]);p.max=p.min+y,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+y)});const o=al();iu(o,t,e.layoutBox);const c=al();a?iu(c,n.applyTransform(s,!0),e.measuredBox):iu(c,t,e.layoutBox);const d=!gR(o);let h=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:y}=f;if(p&&y){const b=ln();lf(b,e.layoutBox,p.layoutBox);const A=ln();lf(A,t,y.layoutBox),yR(b,A)||(h=!0),f.options.layoutRoot&&(n.relativeTarget=A,n.relativeTargetOrigin=b,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:c,layoutDelta:o,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function o6(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function l6(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function c6(n){n.clearSnapshot()}function hC(n){n.clearMeasurements()}function fC(n){n.isLayoutDirty=!1}function u6(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function mC(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function d6(n){n.resolveTargetDelta()}function h6(n){n.calcProjection()}function f6(n){n.resetSkewAndRotation()}function m6(n){n.removeLeadSnapshot()}function pC(n,e,t){n.translate=It(e.translate,0,t),n.scale=It(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function gC(n,e,t,s){n.min=It(e.min,t.min,s),n.max=It(e.max,t.max,s)}function p6(n,e,t,s){gC(n.x,e.x,t.x,s),gC(n.y,e.y,t.y,s)}function g6(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const y6={duration:.45,ease:[.4,0,.1,1]},yC=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),vC=yC("applewebkit/")&&!yC("chrome/")?Math.round:Hs;function bC(n){n.min=vC(n.min),n.max=vC(n.max)}function v6(n){bC(n.x),bC(n.y)}function SR(n,e,t){return n==="position"||n==="preserve-aspect"&&!U5(oC(e),oC(t),.2)}function b6(n){return n!==n.root&&n.scroll?.wasRoot}const x6=wR({attachResizeListener:(n,e)=>yu(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),Wg={current:void 0},AR=wR({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Wg.current){const n=new x6({});n.mount(window),n.setOptions({layoutScroll:!0}),Wg.current=n}return Wg.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),_0=x.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function xC(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function w6(...n){return e=>{let t=!1;const s=n.map(i=>{const a=xC(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<s.length;i++){const a=s[i];typeof a=="function"?a():xC(n[i],null)}}}}function S6(...n){return x.useCallback(w6(...n),n)}class A6 extends x.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=t.offsetParent,i=nv(s)&&s.offsetWidth||0,a=nv(s)&&s.offsetHeight||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=i-o.width-o.left,o.bottom=a-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function C6({children:n,isPresent:e,anchorX:t,anchorY:s,root:i}){const a=x.useId(),o=x.useRef(null),c=x.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:d}=x.useContext(_0),h=n.props?.ref??n?.ref,f=S6(o,h);return x.useInsertionEffect(()=>{const{width:p,height:y,top:b,left:A,right:S,bottom:E}=c.current;if(e||!o.current||!p||!y)return;const C=t==="left"?`left: ${A}`:`right: ${S}`,_=s==="bottom"?`bottom: ${E}`:`top: ${b}`;o.current.dataset.motionPopId=a;const T=document.createElement("style");d&&(T.nonce=d);const R=i??document.head;return R.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${p}px !important;
            height: ${y}px !important;
            ${C}px !important;
            ${_}px !important;
          }
        `),()=>{R.contains(T)&&R.removeChild(T)}},[e]),g.jsx(A6,{isPresent:e,childRef:o,sizeRef:c,children:x.cloneElement(n,{ref:f})})}const E6=({children:n,initial:e,isPresent:t,onExitComplete:s,custom:i,presenceAffectsLayout:a,mode:o,anchorX:c,anchorY:d,root:h})=>{const f=Zv(_6),p=x.useId();let y=!0,b=x.useMemo(()=>(y=!1,{id:p,initial:e,isPresent:t,custom:i,onExitComplete:A=>{f.set(A,!0);for(const S of f.values())if(!S)return;s&&s()},register:A=>(f.set(A,!1),()=>f.delete(A))}),[t,f,s]);return a&&y&&(b={...b}),x.useMemo(()=>{f.forEach((A,S)=>f.set(S,!1))},[t]),x.useEffect(()=>{!t&&!f.size&&s&&s()},[t]),o==="popLayout"&&(n=g.jsx(C6,{isPresent:t,anchorX:c,anchorY:d,root:h,children:n})),g.jsx(jf.Provider,{value:b,children:n})};function _6(){return new Map}function CR(n=!0){const e=x.useContext(jf);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:i}=e,a=x.useId();x.useEffect(()=>{if(n)return i(a)},[n]);const o=x.useCallback(()=>n&&s&&s(a),[a,s,n]);return!t&&s?[!1,o]:[!0]}const vh=n=>n.key||"";function wC(n){const e=[];return x.Children.forEach(n,t=>{x.isValidElement(t)&&e.push(t)}),e}const vu=({children:n,custom:e,initial:t=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1,anchorX:c="left",anchorY:d="top",root:h})=>{const[f,p]=CR(o),y=x.useMemo(()=>wC(n),[n]),b=o&&!f?[]:y.map(vh),A=x.useRef(!0),S=x.useRef(y),E=Zv(()=>new Map),C=x.useRef(new Set),[_,T]=x.useState(y),[R,M]=x.useState(y);nT(()=>{A.current=!1,S.current=y;for(let P=0;P<R.length;P++){const j=vh(R[P]);b.includes(j)?(E.delete(j),C.current.delete(j)):E.get(j)!==!0&&E.set(j,!1)}},[R,b.length,b.join("-")]);const k=[];if(y!==_){let P=[...y];for(let j=0;j<R.length;j++){const I=R[j],H=vh(I);b.includes(H)||(P.splice(j,0,I),k.push(I))}return a==="wait"&&k.length&&(P=k),M(wC(P)),T(y),null}const{forceRender:N}=x.useContext(Qv);return g.jsx(g.Fragment,{children:R.map(P=>{const j=vh(P),I=o&&!f?!1:y===R||b.includes(j),H=()=>{if(C.current.has(j))return;if(C.current.add(j),E.has(j))E.set(j,!0);else return;let $=!0;E.forEach(K=>{K||($=!1)}),$&&(N?.(),M(S.current),o&&p?.(),s&&s())};return g.jsx(E6,{isPresent:I,initial:!A.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:h,onExitComplete:I?void 0:H,anchorX:c,anchorY:d,children:P},j)})})},ER=x.createContext({strict:!1}),SC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let AC=!1;function T6(){if(AC)return;const n={};for(const e in SC)n[e]={isEnabled:t=>SC[e].some(s=>!!t[s])};eR(n),AC=!0}function _R(){return T6(),f5()}function R6(n){const e=_R();for(const t in n)e[t]={...e[t],...n[t]};eR(e)}const D6=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function cf(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||D6.has(n)}let TR=n=>!cf(n);function M6(n){typeof n=="function"&&(TR=e=>e.startsWith("on")?!cf(e):n(e))}try{M6(require("@emotion/is-prop-valid").default)}catch{}function N6(n,e,t){const s={};for(const i in n)i==="values"&&typeof n.values=="object"||(TR(i)||t===!0&&cf(i)||!e&&!cf(i)||n.draggable&&i.startsWith("onDrag"))&&(s[i]=n[i]);return s}const If=x.createContext({});function P6(n,e){if(Ff(n)){const{initial:t,animate:s}=n;return{initial:t===!1||gu(t)?t:void 0,animate:gu(s)?s:void 0}}return n.inherit!==!1?e:{}}function k6(n){const{initial:e,animate:t}=P6(n,x.useContext(If));return x.useMemo(()=>({initial:e,animate:t}),[CC(e),CC(t)])}function CC(n){return Array.isArray(n)?n.join(" "):n}const T0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function RR(n,e,t){for(const s in e)!kn(e[s])&&!oR(s,t)&&(n[s]=e[s])}function O6({transformTemplate:n},e){return x.useMemo(()=>{const t=T0();return C0(t,e,n),Object.assign({},t.vars,t.style)},[e])}function j6(n,e){const t=n.style||{},s={};return RR(s,t,n),Object.assign(s,O6(n,e)),s}function L6(n,e){const t={},s=j6(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=s,t}const DR=()=>({...T0(),attrs:{}});function F6(n,e,t,s){const i=x.useMemo(()=>{const a=DR();return lR(a,e,uR(s),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};RR(a,n.style,n),i.style={...a,...i.style}}return i}const I6=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function R0(n){return typeof n!="string"||n.includes("-")?!1:!!(I6.indexOf(n)>-1||/[A-Z]/u.test(n))}function B6(n,e,t,{latestValues:s},i,a=!1,o){const d=(o??R0(n)?F6:L6)(e,s,i,n),h=N6(e,typeof n=="string",a),f=n!==x.Fragment?{...h,...d,ref:t}:{},{children:p}=e,y=x.useMemo(()=>kn(p)?p.get():p,[p]);return x.createElement(n,{...f,children:y})}function z6({scrapeMotionValuesFromProps:n,createRenderState:e},t,s,i){return{latestValues:U6(t,s,i,n),renderState:e()}}function U6(n,e,t,s){const i={},a=s(n,{});for(const y in a)i[y]=Hh(a[y]);let{initial:o,animate:c}=n;const d=Ff(n),h=JT(n);e&&h&&!d&&n.inherit!==!1&&(o===void 0&&(o=e.initial),c===void 0&&(c=e.animate));let f=t?t.initial===!1:!1;f=f||o===!1;const p=f?c:o;if(p&&typeof p!="boolean"&&!Lf(p)){const y=Array.isArray(p)?p:[p];for(let b=0;b<y.length;b++){const A=y0(n,y[b]);if(A){const{transitionEnd:S,transition:E,...C}=A;for(const _ in C){let T=C[_];if(Array.isArray(T)){const R=f?T.length-1:0;T=T[R]}T!==null&&(i[_]=T)}for(const _ in S)i[_]=S[_]}}}return i}const MR=n=>(e,t)=>{const s=x.useContext(If),i=x.useContext(jf),a=()=>z6(n,e,s,i);return t?a():Zv(a)},V6=MR({scrapeMotionValuesFromProps:E0,createRenderState:T0}),H6=MR({scrapeMotionValuesFromProps:dR,createRenderState:DR}),$6=Symbol.for("motionComponentSymbol");function q6(n,e,t){const s=x.useRef(t);x.useInsertionEffect(()=>{s.current=t});const i=x.useRef(null);return x.useCallback(a=>{a&&n.onMount?.(a),e&&(a?e.mount(a):e.unmount());const o=s.current;if(typeof o=="function")if(a){const c=o(a);typeof c=="function"&&(i.current=c)}else i.current?(i.current(),i.current=null):o(a);else o&&(o.current=a)},[e])}const NR=x.createContext({});function Gc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function G6(n,e,t,s,i,a){const{visualElement:o}=x.useContext(If),c=x.useContext(ER),d=x.useContext(jf),h=x.useContext(_0).reducedMotion,f=x.useRef(null),p=x.useRef(!1);s=s||c.renderer,!f.current&&s&&(f.current=s(n,{visualState:e,parent:o,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h,isSVG:a}),p.current&&f.current&&(f.current.manuallyAnimateOnMount=!0));const y=f.current,b=x.useContext(NR);y&&!y.projection&&i&&(y.type==="html"||y.type==="svg")&&K6(f.current,t,i,b);const A=x.useRef(!1);x.useInsertionEffect(()=>{y&&A.current&&y.update(t,d)});const S=t[BT],E=x.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return nT(()=>{p.current=!0,y&&(A.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),E.current&&y.animationState&&y.animationState.animateChanges())}),x.useEffect(()=>{y&&(!E.current&&y.animationState&&y.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),E.current=!1),y.enteringChildren=void 0)}),y}function K6(n,e,t,s){const{layoutId:i,layout:a,drag:o,dragConstraints:c,layoutScroll:d,layoutRoot:h,layoutCrossfade:f}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:PR(n.parent)),n.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||c&&Gc(c),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:s,crossfade:f,layoutScroll:d,layoutRoot:h})}function PR(n){if(n)return n.options.allowProjection!==!1?n.projection:PR(n.parent)}function Qg(n,{forwardMotionProps:e=!1,type:t}={},s,i){s&&R6(s);const a=t?t==="svg":R0(n),o=a?H6:V6;function c(h,f){let p;const y={...x.useContext(_0),...h,layoutId:Y6(h)},{isStatic:b}=y,A=k6(h),S=o(h,b);if(!b&&tT){X6();const E=W6(y);p=E.MeasureLayout,A.visualElement=G6(n,S,y,i,E.ProjectionNode,a)}return g.jsxs(If.Provider,{value:A,children:[p&&A.visualElement?g.jsx(p,{visualElement:A.visualElement,...y}):null,B6(n,h,q6(S,A.visualElement,f),S,b,e,a)]})}c.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const d=x.forwardRef(c);return d[$6]=n,d}function Y6({layoutId:n}){const e=x.useContext(Qv).id;return e&&n!==void 0?e+"-"+n:n}function X6(n,e){x.useContext(ER).strict}function W6(n){const e=_R(),{drag:t,layout:s}=e;if(!t&&!s)return{};const i={...t,...s};return{MeasureLayout:t?.isEnabled(n)||s?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function Q6(n,e){if(typeof Proxy>"u")return Qg;const t=new Map,s=(a,o)=>Qg(a,o,n,e),i=(a,o)=>s(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?s:(t.has(o)||t.set(o,Qg(o,void 0,n,e)),t.get(o))})}const Z6=(n,e)=>e.isSVG??R0(n)?new M5(e):new C5(e,{allowProjection:n!==x.Fragment});class J6 extends ia{constructor(e){super(e),e.animationState||(e.animationState=j5(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Lf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let e4=0;class t4 extends ia{constructor(){super(...arguments),this.id=e4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const n4={animation:{Feature:J6},exit:{Feature:t4}};function Fu(n){return{point:{x:n.pageX,y:n.pageY}}}const s4=n=>e=>w0(e)&&n(e,Fu(e));function ru(n,e,t,s){return yu(n,e,s4(t),s)}const kR=({current:n})=>n?n.ownerDocument.defaultView:null,EC=(n,e)=>Math.abs(n-e);function i4(n,e){const t=EC(n.x,e.x),s=EC(n.y,e.y);return Math.sqrt(t**2+s**2)}const _C=new Set(["auto","scroll"]);class OR{constructor(e,t,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=b=>{this.handleScroll(b.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Jg(this.lastMoveEventInfo,this.history),A=this.startEvent!==null,S=i4(b.offset,{x:0,y:0})>=this.distanceThreshold;if(!A&&!S)return;const{point:E}=b,{timestamp:C}=En;this.history.push({...E,timestamp:C});const{onStart:_,onMove:T}=this.handlers;A||(_&&_(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,b)},this.handlePointerMove=(b,A)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=Zg(A,this.transformPagePoint),Nt.update(this.updatePoint,!0)},this.handlePointerUp=(b,A)=>{this.end();const{onEnd:S,onSessionEnd:E,resumeAnimation:C}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Jg(b.type==="pointercancel"?this.lastMoveEventInfo:Zg(A,this.transformPagePoint),this.history);this.startEvent&&S&&S(b,_),E&&E(b,_)},!w0(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=s,this.distanceThreshold=o,this.contextWindow=i||window;const d=Fu(e),h=Zg(d,this.transformPagePoint),{point:f}=h,{timestamp:p}=En;this.history=[{...f,timestamp:p}];const{onSessionStart:y}=t;y&&y(e,Jg(h,this.history)),this.removeListeners=Ou(ru(this.contextWindow,"pointermove",this.handlePointerMove),ru(this.contextWindow,"pointerup",this.handlePointerUp),ru(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(e){let t=e.parentElement;for(;t;){const s=getComputedStyle(t);(_C.has(s.overflowX)||_C.has(s.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const s=e===window,i=s?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:i.x-t.x,y:i.y-t.y};a.x===0&&a.y===0||(s?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,i),Nt.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Zr(this.updatePoint)}}function Zg(n,e){return e?{point:e(n.point)}:n}function TC(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Jg({point:n},e){return{point:n,delta:TC(n,jR(e)),offset:TC(n,r4(e)),velocity:a4(e,.1)}}function r4(n){return n[0]}function jR(n){return n[n.length-1]}function a4(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,s=null;const i=jR(n);for(;t>=0&&(s=n[t],!(i.timestamp-s.timestamp>lr(e)));)t--;if(!s)return{x:0,y:0};const a=Us(i.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-s.x)/a,y:(i.y-s.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function o4(n,{min:e,max:t},s){return e!==void 0&&n<e?n=s?It(e,n,s.min):Math.max(n,e):t!==void 0&&n>t&&(n=s?It(t,n,s.max):Math.min(n,t)),n}function RC(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function l4(n,{top:e,left:t,bottom:s,right:i}){return{x:RC(n.x,t,i),y:RC(n.y,e,s)}}function DC(n,e){let t=e.min-n.min,s=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,s]=[s,t]),{min:t,max:s}}function c4(n,e){return{x:DC(n.x,e.x),y:DC(n.y,e.y)}}function u4(n,e){let t=.5;const s=$n(n),i=$n(e);return i>s?t=fu(e.min,e.max-s,n.min):s>i&&(t=fu(n.min,n.max-i,e.min)),_i(0,1,t)}function d4(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const ov=.35;function h4(n=ov){return n===!1?n=0:n===!0&&(n=ov),{x:MC(n,"left","right"),y:MC(n,"top","bottom")}}function MC(n,e,t){return{min:NC(n,e),max:NC(n,t)}}function NC(n,e){return typeof n=="number"?n:n[e]||0}const f4=new WeakMap;class m4{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ln(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=p=>{t?(this.stopAnimation(),this.snapToCursor(Fu(p).point)):this.pauseAnimation()},o=(p,y)=>{this.stopAnimation();const{drag:b,dragPropagation:A,onDragStart:S}=this.getProps();if(b&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=t5(b),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Bs(C=>{let _=this.getAxisMotionValue(C).get()||0;if(Ci.test(_)){const{projection:T}=this.visualElement;if(T&&T.layout){const R=T.layout.layoutBox[C];R&&(_=$n(R)*(parseFloat(_)/100))}}this.originPoint[C]=_}),S&&Nt.postRender(()=>S(p,y)),Jy(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},c=(p,y)=>{this.latestPointerEvent=p,this.latestPanInfo=y;const{dragPropagation:b,dragDirectionLock:A,onDirectionLock:S,onDrag:E}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:C}=y;if(A&&this.currentDirection===null){this.currentDirection=p4(C),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",y.point,C),this.updateAxis("y",y.point,C),this.visualElement.render(),E&&E(p,y)},d=(p,y)=>{this.latestPointerEvent=p,this.latestPanInfo=y,this.stop(p,y),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>Bs(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new OR(e,{onSessionStart:a,onStart:o,onMove:c,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:s,contextWindow:kR(this.visualElement),element:this.visualElement.current})}stop(e,t){const s=e||this.latestPointerEvent,i=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!s)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&Nt.postRender(()=>c(s,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,s){const{drag:i}=this.getProps();if(!s||!bh(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(o=o4(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Gc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=l4(s.layoutBox,e):this.constraints=!1,this.elastic=h4(t),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Bs(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=d4(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Gc(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=v5(s,i.root,this.visualElement.getTransformPagePoint());let o=c4(i.layout.layoutBox,a);if(t){const c=t(p5(o));this.hasMutatedConstraints=!!c,c&&(o=nR(c))}return o}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},h=Bs(f=>{if(!bh(f,t,this.currentDirection))return;let p=d&&d[f]||{};o&&(p={min:0,max:0});const y=i?200:1e6,b=i?40:1e7,A={type:"inertia",velocity:s?e[f]:0,bounceStiffness:y,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...p};return this.startAxisValueAnimation(f,A)});return Promise.all(h).then(c)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return Jy(this.visualElement,e),s.start(g0(e,s,0,t,this.visualElement,!1))}stopAnimation(){Bs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Bs(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[t];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Bs(t=>{const{drag:s}=this.getProps();if(!bh(t,s,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:c}=i.layout.layoutBox[t],d=a.get()||0;a.set(e[t]-It(o,c,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!Gc(t)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Bs(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const d=c.get();i[o]=u4({min:d,max:d},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Bs(o=>{if(!bh(o,e,null))return;const c=this.getAxisMotionValue(o),{min:d,max:h}=this.constraints[o];c.set(It(d,h,i[o]))})}addListeners(){if(!this.visualElement.current)return;f4.set(this.visualElement,this);const e=this.visualElement.current,t=ru(e,"pointerdown",d=>{const{drag:h,dragListener:f=!0}=this.getProps(),p=d.target,y=p!==e&&WT(p);h&&f&&!y&&this.start(d)}),s=()=>{const{dragConstraints:d}=this.getProps();Gc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Nt.read(s);const o=yu(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(Bs(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=d[f].translate,p.set(p.get()+d[f].translate))}),this.visualElement.render())}));return()=>{o(),t(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=ov,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function bh(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function p4(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class g4 extends ia{constructor(e){super(e),this.removeGroupControls=Hs,this.removeListeners=Hs,this.controls=new m4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Hs}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const PC=n=>(e,t)=>{n&&Nt.postRender(()=>n(e,t))};class y4 extends ia{constructor(){super(...arguments),this.removePointerDownListener=Hs}onPointerDown(e){this.session=new OR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:kR(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:PC(e),onStart:PC(t),onMove:s,onEnd:(a,o)=>{delete this.session,i&&Nt.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=ru(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let ey=!1;class v4 extends x.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:i}=this.props,{projection:a}=e;a&&(t.group&&t.group.add(a),s&&s.register&&i&&s.register(a),ey&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),$h.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:i,isPresent:a}=this.props,{projection:o}=s;return o&&(o.isPresent=a,e.layoutDependency!==t&&o.setOptions({...o.options,layoutDependency:t}),ey=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||Nt.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),x0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:i}=e;ey=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function LR(n){const[e,t]=CR(),s=x.useContext(Qv);return g.jsx(v4,{...n,layoutGroup:s,switchLayoutGroup:x.useContext(NR),isPresent:e,safeToRemove:t})}const b4={pan:{Feature:y4},drag:{Feature:g4,ProjectionNode:AR,MeasureLayout:LR}};function kC(n,e,t){const{props:s}=n;n.animationState&&s.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,a=s[i];a&&Nt.postRender(()=>a(e,Fu(e)))}class x4 extends ia{mount(){const{current:e}=this.node;e&&(this.unmount=n5(e,(t,s)=>(kC(this.node,s,"Start"),i=>kC(this.node,i,"End"))))}unmount(){}}class w4 extends ia{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ou(yu(this.node.current,"focus",()=>this.onFocus()),yu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function OC(n,e,t){const{props:s}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&s.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),a=s[i];a&&Nt.postRender(()=>a(e,Fu(e)))}class S4 extends ia{mount(){const{current:e}=this.node;e&&(this.unmount=r5(e,(t,s)=>(OC(this.node,s,"Start"),(i,{success:a})=>OC(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const lv=new WeakMap,ty=new WeakMap,A4=n=>{const e=lv.get(n.target);e&&e(n)},C4=n=>{n.forEach(A4)};function E4({root:n,...e}){const t=n||document;ty.has(t)||ty.set(t,{});const s=ty.get(t),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(C4,{root:n,...e})),s[i]}function _4(n,e,t){const s=E4(e);return lv.set(n,t),s.observe(n),()=>{lv.delete(n),s.unobserve(n)}}const T4={some:0,all:1};class R4 extends ia{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:i="some",once:a}=e,o={root:t?t.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:T4[i]},c=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,a&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),y=h?f:p;y&&y(d)};return _4(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(D4(e,t))&&this.startObserver()}unmount(){}}function D4({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const M4={inView:{Feature:R4},tap:{Feature:S4},focus:{Feature:w4},hover:{Feature:x4}},N4={layout:{ProjectionNode:AR,MeasureLayout:LR}},P4={...n4,...M4,...b4,...N4},Xr=Q6(P4,Z6);function FR(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=FR(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function jl(){for(var n,e,t=0,s="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=FR(n))&&(s&&(s+=" "),s+=e);return s}const k4=(n,e)=>{const t=new Array(n.length+e.length);for(let s=0;s<n.length;s++)t[s]=n[s];for(let s=0;s<e.length;s++)t[n.length+s]=e[s];return t},O4=(n,e)=>({classGroupId:n,validator:e}),IR=(n=new Map,e=null,t)=>({nextPart:n,validators:e,classGroupId:t}),uf="-",jC=[],j4="arbitrary..",L4=n=>{const e=I4(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return F4(o);const c=o.split(uf),d=c[0]===""&&c.length>1?1:0;return BR(c,d,e)},getConflictingClassGroupIds:(o,c)=>{if(c){const d=s[o],h=t[o];return d?h?k4(h,d):d:h||jC}return t[o]||jC}}},BR=(n,e,t)=>{if(n.length-e===0)return t.classGroupId;const i=n[e],a=t.nextPart.get(i);if(a){const h=BR(n,e+1,a);if(h)return h}const o=t.validators;if(o===null)return;const c=e===0?n.join(uf):n.slice(e).join(uf),d=o.length;for(let h=0;h<d;h++){const f=o[h];if(f.validator(c))return f.classGroupId}},F4=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),t=e.indexOf(":"),s=e.slice(0,t);return s?j4+s:void 0})(),I4=n=>{const{theme:e,classGroups:t}=n;return B4(t,e)},B4=(n,e)=>{const t=IR();for(const s in n){const i=n[s];D0(i,t,s,e)}return t},D0=(n,e,t,s)=>{const i=n.length;for(let a=0;a<i;a++){const o=n[a];z4(o,e,t,s)}},z4=(n,e,t,s)=>{if(typeof n=="string"){U4(n,e,t);return}if(typeof n=="function"){V4(n,e,t,s);return}H4(n,e,t,s)},U4=(n,e,t)=>{const s=n===""?e:zR(e,n);s.classGroupId=t},V4=(n,e,t,s)=>{if($4(n)){D0(n(s),e,t,s);return}e.validators===null&&(e.validators=[]),e.validators.push(O4(t,n))},H4=(n,e,t,s)=>{const i=Object.entries(n),a=i.length;for(let o=0;o<a;o++){const[c,d]=i[o];D0(d,zR(e,c),t,s)}},zR=(n,e)=>{let t=n;const s=e.split(uf),i=s.length;for(let a=0;a<i;a++){const o=s[a];let c=t.nextPart.get(o);c||(c=IR(),t.nextPart.set(o,c)),t=c}return t},$4=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,q4=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),s=Object.create(null);const i=(a,o)=>{t[a]=o,e++,e>n&&(e=0,s=t,t=Object.create(null))};return{get(a){let o=t[a];if(o!==void 0)return o;if((o=s[a])!==void 0)return i(a,o),o},set(a,o){a in t?t[a]=o:i(a,o)}}},cv="!",LC=":",G4=[],FC=(n,e,t,s,i)=>({modifiers:n,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:s,isExternal:i}),K4=n=>{const{prefix:e,experimentalParseClassName:t}=n;let s=i=>{const a=[];let o=0,c=0,d=0,h;const f=i.length;for(let S=0;S<f;S++){const E=i[S];if(o===0&&c===0){if(E===LC){a.push(i.slice(d,S)),d=S+1;continue}if(E==="/"){h=S;continue}}E==="["?o++:E==="]"?o--:E==="("?c++:E===")"&&c--}const p=a.length===0?i:i.slice(d);let y=p,b=!1;p.endsWith(cv)?(y=p.slice(0,-1),b=!0):p.startsWith(cv)&&(y=p.slice(1),b=!0);const A=h&&h>d?h-d:void 0;return FC(a,b,y,A)};if(e){const i=e+LC,a=s;s=o=>o.startsWith(i)?a(o.slice(i.length)):FC(G4,!1,o,void 0,!0)}if(t){const i=s;s=a=>t({className:a,parseClassName:i})}return s},Y4=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((t,s)=>{e.set(t,1e6+s)}),t=>{const s=[];let i=[];for(let a=0;a<t.length;a++){const o=t[a],c=o[0]==="[",d=e.has(o);c||d?(i.length>0&&(i.sort(),s.push(...i),i=[]),s.push(o)):i.push(o)}return i.length>0&&(i.sort(),s.push(...i)),s}},X4=n=>({cache:q4(n.cacheSize),parseClassName:K4(n),sortModifiers:Y4(n),...L4(n)}),W4=/\s+/,Q4=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:i,sortModifiers:a}=e,o=[],c=n.trim().split(W4);let d="";for(let h=c.length-1;h>=0;h-=1){const f=c[h],{isExternal:p,modifiers:y,hasImportantModifier:b,baseClassName:A,maybePostfixModifierPosition:S}=t(f);if(p){d=f+(d.length>0?" "+d:d);continue}let E=!!S,C=s(E?A.substring(0,S):A);if(!C){if(!E){d=f+(d.length>0?" "+d:d);continue}if(C=s(A),!C){d=f+(d.length>0?" "+d:d);continue}E=!1}const _=y.length===0?"":y.length===1?y[0]:a(y).join(":"),T=b?_+cv:_,R=T+C;if(o.indexOf(R)>-1)continue;o.push(R);const M=i(C,E);for(let k=0;k<M.length;++k){const N=M[k];o.push(T+N)}d=f+(d.length>0?" "+d:d)}return d},Z4=(...n)=>{let e=0,t,s,i="";for(;e<n.length;)(t=n[e++])&&(s=UR(t))&&(i&&(i+=" "),i+=s);return i},UR=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=UR(n[s]))&&(t&&(t+=" "),t+=e);return t},J4=(n,...e)=>{let t,s,i,a;const o=d=>{const h=e.reduce((f,p)=>p(f),n());return t=X4(h),s=t.cache.get,i=t.cache.set,a=c,c(d)},c=d=>{const h=s(d);if(h)return h;const f=Q4(d,t);return i(d,f),f};return a=o,(...d)=>a(Z4(...d))},ez=[],on=n=>{const e=t=>t[n]||ez;return e.isThemeGetter=!0,e},VR=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,HR=/^\((?:(\w[\w-]*):)?(.+)\)$/i,tz=/^\d+\/\d+$/,nz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,sz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,iz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,rz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,az=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xo=n=>tz.test(n),st=n=>!!n&&!Number.isNaN(Number(n)),Ur=n=>!!n&&Number.isInteger(Number(n)),ny=n=>n.endsWith("%")&&st(n.slice(0,-1)),Zi=n=>nz.test(n),oz=()=>!0,lz=n=>sz.test(n)&&!iz.test(n),$R=()=>!1,cz=n=>rz.test(n),uz=n=>az.test(n),dz=n=>!Pe(n)&&!ke(n),hz=n=>Ll(n,KR,$R),Pe=n=>VR.test(n),Ta=n=>Ll(n,YR,lz),sy=n=>Ll(n,yz,st),IC=n=>Ll(n,qR,$R),fz=n=>Ll(n,GR,uz),xh=n=>Ll(n,XR,cz),ke=n=>HR.test(n),Bc=n=>Fl(n,YR),mz=n=>Fl(n,vz),BC=n=>Fl(n,qR),pz=n=>Fl(n,KR),gz=n=>Fl(n,GR),wh=n=>Fl(n,XR,!0),Ll=(n,e,t)=>{const s=VR.exec(n);return s?s[1]?e(s[1]):t(s[2]):!1},Fl=(n,e,t=!1)=>{const s=HR.exec(n);return s?s[1]?e(s[1]):t:!1},qR=n=>n==="position"||n==="percentage",GR=n=>n==="image"||n==="url",KR=n=>n==="length"||n==="size"||n==="bg-size",YR=n=>n==="length",yz=n=>n==="number",vz=n=>n==="family-name",XR=n=>n==="shadow",bz=()=>{const n=on("color"),e=on("font"),t=on("text"),s=on("font-weight"),i=on("tracking"),a=on("leading"),o=on("breakpoint"),c=on("container"),d=on("spacing"),h=on("radius"),f=on("shadow"),p=on("inset-shadow"),y=on("text-shadow"),b=on("drop-shadow"),A=on("blur"),S=on("perspective"),E=on("aspect"),C=on("ease"),_=on("animate"),T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...R(),ke,Pe],k=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto","contain","none"],P=()=>[ke,Pe,d],j=()=>[Xo,"full","auto",...P()],I=()=>[Ur,"none","subgrid",ke,Pe],H=()=>["auto",{span:["full",Ur,ke,Pe]},Ur,ke,Pe],$=()=>[Ur,"auto",ke,Pe],K=()=>["auto","min","max","fr",ke,Pe],Z=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],oe=()=>["start","end","center","stretch","center-safe","end-safe"],F=()=>["auto",...P()],B=()=>[Xo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],z=()=>[n,ke,Pe],Q=()=>[...R(),BC,IC,{position:[ke,Pe]}],me=()=>["no-repeat",{repeat:["","x","y","space","round"]}],L=()=>["auto","cover","contain",pz,hz,{size:[ke,Pe]}],X=()=>[ny,Bc,Ta],te=()=>["","none","full",h,ke,Pe],ce=()=>["",st,Bc,Ta],ye=()=>["solid","dashed","dotted","double"],be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>[st,ny,BC,IC],Ae=()=>["","none",A,ke,Pe],xe=()=>["none",st,ke,Pe],je=()=>["none",st,ke,Pe],we=()=>[st,ke,Pe],ze=()=>[Xo,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Zi],breakpoint:[Zi],color:[oz],container:[Zi],"drop-shadow":[Zi],ease:["in","out","in-out"],font:[dz],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Zi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Zi],shadow:[Zi],spacing:["px",st],text:[Zi],"text-shadow":[Zi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Xo,Pe,ke,E]}],container:["container"],columns:[{columns:[st,Pe,ke,c]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:j()}],"inset-x":[{"inset-x":j()}],"inset-y":[{"inset-y":j()}],start:[{start:j()}],end:[{end:j()}],top:[{top:j()}],right:[{right:j()}],bottom:[{bottom:j()}],left:[{left:j()}],visibility:["visible","invisible","collapse"],z:[{z:[Ur,"auto",ke,Pe]}],basis:[{basis:[Xo,"full","auto",c,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[st,Xo,"auto","initial","none",Pe]}],grow:[{grow:["",st,ke,Pe]}],shrink:[{shrink:["",st,ke,Pe]}],order:[{order:[Ur,"first","last","none",ke,Pe]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:H()}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:H()}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...Z(),"normal"]}],"justify-items":[{"justify-items":[...oe(),"normal"]}],"justify-self":[{"justify-self":["auto",...oe()]}],"align-content":[{content:["normal",...Z()]}],"align-items":[{items:[...oe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...oe(),{baseline:["","last"]}]}],"place-content":[{"place-content":Z()}],"place-items":[{"place-items":[...oe(),"baseline"]}],"place-self":[{"place-self":["auto",...oe()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:F()}],mx:[{mx:F()}],my:[{my:F()}],ms:[{ms:F()}],me:[{me:F()}],mt:[{mt:F()}],mr:[{mr:F()}],mb:[{mb:F()}],ml:[{ml:F()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],w:[{w:[c,"screen",...B()]}],"min-w":[{"min-w":[c,"screen","none",...B()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[o]},...B()]}],h:[{h:["screen","lh",...B()]}],"min-h":[{"min-h":["screen","lh","none",...B()]}],"max-h":[{"max-h":["screen","lh",...B()]}],"font-size":[{text:["base",t,Bc,Ta]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,ke,sy]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ny,Pe]}],"font-family":[{font:[mz,Pe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,ke,Pe]}],"line-clamp":[{"line-clamp":[st,"none",ke,sy]}],leading:[{leading:[a,...P()]}],"list-image":[{"list-image":["none",ke,Pe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ke,Pe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:z()}],"text-color":[{text:z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ye(),"wavy"]}],"text-decoration-thickness":[{decoration:[st,"from-font","auto",ke,Ta]}],"text-decoration-color":[{decoration:z()}],"underline-offset":[{"underline-offset":[st,"auto",ke,Pe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ke,Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ke,Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Q()}],"bg-repeat":[{bg:me()}],"bg-size":[{bg:L()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ur,ke,Pe],radial:["",ke,Pe],conic:[Ur,ke,Pe]},gz,fz]}],"bg-color":[{bg:z()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:z()}],"gradient-via":[{via:z()}],"gradient-to":[{to:z()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:ce()}],"border-w-x":[{"border-x":ce()}],"border-w-y":[{"border-y":ce()}],"border-w-s":[{"border-s":ce()}],"border-w-e":[{"border-e":ce()}],"border-w-t":[{"border-t":ce()}],"border-w-r":[{"border-r":ce()}],"border-w-b":[{"border-b":ce()}],"border-w-l":[{"border-l":ce()}],"divide-x":[{"divide-x":ce()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ce()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ye(),"hidden","none"]}],"divide-style":[{divide:[...ye(),"hidden","none"]}],"border-color":[{border:z()}],"border-color-x":[{"border-x":z()}],"border-color-y":[{"border-y":z()}],"border-color-s":[{"border-s":z()}],"border-color-e":[{"border-e":z()}],"border-color-t":[{"border-t":z()}],"border-color-r":[{"border-r":z()}],"border-color-b":[{"border-b":z()}],"border-color-l":[{"border-l":z()}],"divide-color":[{divide:z()}],"outline-style":[{outline:[...ye(),"none","hidden"]}],"outline-offset":[{"outline-offset":[st,ke,Pe]}],"outline-w":[{outline:["",st,Bc,Ta]}],"outline-color":[{outline:z()}],shadow:[{shadow:["","none",f,wh,xh]}],"shadow-color":[{shadow:z()}],"inset-shadow":[{"inset-shadow":["none",p,wh,xh]}],"inset-shadow-color":[{"inset-shadow":z()}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:z()}],"ring-offset-w":[{"ring-offset":[st,Ta]}],"ring-offset-color":[{"ring-offset":z()}],"inset-ring-w":[{"inset-ring":ce()}],"inset-ring-color":[{"inset-ring":z()}],"text-shadow":[{"text-shadow":["none",y,wh,xh]}],"text-shadow-color":[{"text-shadow":z()}],opacity:[{opacity:[st,ke,Pe]}],"mix-blend":[{"mix-blend":[...be(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":be()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[st]}],"mask-image-linear-from-pos":[{"mask-linear-from":W()}],"mask-image-linear-to-pos":[{"mask-linear-to":W()}],"mask-image-linear-from-color":[{"mask-linear-from":z()}],"mask-image-linear-to-color":[{"mask-linear-to":z()}],"mask-image-t-from-pos":[{"mask-t-from":W()}],"mask-image-t-to-pos":[{"mask-t-to":W()}],"mask-image-t-from-color":[{"mask-t-from":z()}],"mask-image-t-to-color":[{"mask-t-to":z()}],"mask-image-r-from-pos":[{"mask-r-from":W()}],"mask-image-r-to-pos":[{"mask-r-to":W()}],"mask-image-r-from-color":[{"mask-r-from":z()}],"mask-image-r-to-color":[{"mask-r-to":z()}],"mask-image-b-from-pos":[{"mask-b-from":W()}],"mask-image-b-to-pos":[{"mask-b-to":W()}],"mask-image-b-from-color":[{"mask-b-from":z()}],"mask-image-b-to-color":[{"mask-b-to":z()}],"mask-image-l-from-pos":[{"mask-l-from":W()}],"mask-image-l-to-pos":[{"mask-l-to":W()}],"mask-image-l-from-color":[{"mask-l-from":z()}],"mask-image-l-to-color":[{"mask-l-to":z()}],"mask-image-x-from-pos":[{"mask-x-from":W()}],"mask-image-x-to-pos":[{"mask-x-to":W()}],"mask-image-x-from-color":[{"mask-x-from":z()}],"mask-image-x-to-color":[{"mask-x-to":z()}],"mask-image-y-from-pos":[{"mask-y-from":W()}],"mask-image-y-to-pos":[{"mask-y-to":W()}],"mask-image-y-from-color":[{"mask-y-from":z()}],"mask-image-y-to-color":[{"mask-y-to":z()}],"mask-image-radial":[{"mask-radial":[ke,Pe]}],"mask-image-radial-from-pos":[{"mask-radial-from":W()}],"mask-image-radial-to-pos":[{"mask-radial-to":W()}],"mask-image-radial-from-color":[{"mask-radial-from":z()}],"mask-image-radial-to-color":[{"mask-radial-to":z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":R()}],"mask-image-conic-pos":[{"mask-conic":[st]}],"mask-image-conic-from-pos":[{"mask-conic-from":W()}],"mask-image-conic-to-pos":[{"mask-conic-to":W()}],"mask-image-conic-from-color":[{"mask-conic-from":z()}],"mask-image-conic-to-color":[{"mask-conic-to":z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Q()}],"mask-repeat":[{mask:me()}],"mask-size":[{mask:L()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ke,Pe]}],filter:[{filter:["","none",ke,Pe]}],blur:[{blur:Ae()}],brightness:[{brightness:[st,ke,Pe]}],contrast:[{contrast:[st,ke,Pe]}],"drop-shadow":[{"drop-shadow":["","none",b,wh,xh]}],"drop-shadow-color":[{"drop-shadow":z()}],grayscale:[{grayscale:["",st,ke,Pe]}],"hue-rotate":[{"hue-rotate":[st,ke,Pe]}],invert:[{invert:["",st,ke,Pe]}],saturate:[{saturate:[st,ke,Pe]}],sepia:[{sepia:["",st,ke,Pe]}],"backdrop-filter":[{"backdrop-filter":["","none",ke,Pe]}],"backdrop-blur":[{"backdrop-blur":Ae()}],"backdrop-brightness":[{"backdrop-brightness":[st,ke,Pe]}],"backdrop-contrast":[{"backdrop-contrast":[st,ke,Pe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",st,ke,Pe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[st,ke,Pe]}],"backdrop-invert":[{"backdrop-invert":["",st,ke,Pe]}],"backdrop-opacity":[{"backdrop-opacity":[st,ke,Pe]}],"backdrop-saturate":[{"backdrop-saturate":[st,ke,Pe]}],"backdrop-sepia":[{"backdrop-sepia":["",st,ke,Pe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ke,Pe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[st,"initial",ke,Pe]}],ease:[{ease:["linear","initial",C,ke,Pe]}],delay:[{delay:[st,ke,Pe]}],animate:[{animate:["none",_,ke,Pe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,ke,Pe]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:xe()}],"rotate-x":[{"rotate-x":xe()}],"rotate-y":[{"rotate-y":xe()}],"rotate-z":[{"rotate-z":xe()}],scale:[{scale:je()}],"scale-x":[{"scale-x":je()}],"scale-y":[{"scale-y":je()}],"scale-z":[{"scale-z":je()}],"scale-3d":["scale-3d"],skew:[{skew:we()}],"skew-x":[{"skew-x":we()}],"skew-y":[{"skew-y":we()}],transform:[{transform:[ke,Pe,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ze()}],"translate-x":[{"translate-x":ze()}],"translate-y":[{"translate-y":ze()}],"translate-z":[{"translate-z":ze()}],"translate-none":["translate-none"],accent:[{accent:z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ke,Pe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ke,Pe]}],fill:[{fill:["none",...z()]}],"stroke-w":[{stroke:[st,Bc,Ta,sy]}],stroke:[{stroke:["none",...z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},xz=J4(bz);function Ze(...n){return xz(jl(n))}const wz={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-10 h-10"},zC="/assets/edo/dist/edo_logo.png",Sz=x.memo(function({size:e="md",className:t=""}){return g.jsx("img",{src:zC,alt:"EDO Logo",className:`${wz[e]} object-contain ${t}`,onError:()=>{console.error("Failed to load logo from:",zC)}})}),Az="/assets/dashboard.D5ndxOag.png",Cz="/assets/document.CdEqbrON.png",Ez="/assets/settings.CFN7stQz.png";function _z(n,e){const t=n;return t.startsWith("/src/")?t:`/assets/edo/dist/assets/icons/${e}.png`}const Tz={dashboard:Az,document:Cz,settings:Ez},UC=x.memo(function({name:e,size:t=20,className:s=""}){const i=_z(Tz[e],e);return g.jsx("img",{src:i,alt:`${e} icon`,width:t,height:t,className:s,onError:()=>{console.error("Failed to load icon:",e,"from:",i)}})});function Rz({currentPage:n,onNavigate:e}){const{t}=yn(),s=[{id:"dashboard",label:t("navigation.dashboard"),icon:"dashboard"},{id:"documents",label:t("navigation.documents"),icon:"document"}];return g.jsxs("aside",{className:"w-64 border-r bg-white flex flex-col shrink-0",children:[g.jsxs("div",{className:"h-14 px-4 border-b flex items-center gap-3",children:[g.jsx(Sz,{size:"lg"}),g.jsxs("div",{children:[g.jsx("h1",{className:"font-bold text-lg leading-tight",children:"EDO"}),g.jsx("p",{className:"text-xs text-muted-foreground leading-tight",children:t("app.subtitle")})]})]}),g.jsxs("nav",{className:"flex-1 p-3 space-y-1",children:[s.map(i=>g.jsxs("button",{onClick:()=>e(i.id),className:Ze("w-full flex items-center gap-3 px-2 py-1.5 rounded-lg text-sm font-medium transition-colors",n===i.id?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"),children:[g.jsx(UC,{name:i.icon,size:48}),i.label]},i.id)),g.jsx("div",{className:"pt-4 mt-4 border-t",children:g.jsxs("button",{className:"w-full flex items-center gap-3 px-2 py-1.5 rounded-lg text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted transition-colors",children:[g.jsx(UC,{name:"settings",size:48}),t("common.settings")]})})]})]})}function Dz({title:n,subtitle:e}){return g.jsxs("div",{children:[g.jsx("h1",{className:"text-lg font-semibold",children:n}),e&&g.jsx("p",{className:"text-xs text-muted-foreground",children:e})]})}const WR=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();const Mz=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const Nz=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());const VC=n=>{const e=Nz(n);return e.charAt(0).toUpperCase()+e.slice(1)};var Pz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const kz=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const Oz=x.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:o,...c},d)=>x.createElement("svg",{ref:d,...Pz,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:WR("lucide",i),...!a&&!kz(c)&&{"aria-hidden":"true"},...c},[...o.map(([h,f])=>x.createElement(h,f)),...Array.isArray(a)?a:[a]]));const $e=(n,e)=>{const t=x.forwardRef(({className:s,...i},a)=>x.createElement(Oz,{ref:a,iconNode:e,className:WR(`lucide-${Mz(VC(n))}`,`lucide-${n}`,s),...i}));return t.displayName=VC(n),t};const jz=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Lz=$e("archive",jz);const Fz=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Iz=$e("bell",Fz);const Bz=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],zz=$e("bold",Bz);const Uz=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Vz=$e("building-2",Uz);const Hz=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],$z=$e("calendar",Hz);const qz=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],M0=$e("check",qz);const Gz=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Iu=$e("chevron-down",Gz);const Kz=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Yz=$e("chevron-left",Kz);const Xz=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],QR=$e("chevron-right",Xz);const Wz=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ZR=$e("chevron-up",Wz);const Qz=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Zz=$e("chevrons-up-down",Qz);const Jz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],df=$e("circle-alert",Jz);const eU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Wr=$e("circle-check",eU);const tU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],uv=$e("circle-x",tU);const nU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],sU=$e("circle",nU);const iU=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],cl=$e("clock",iU);const rU=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],aU=$e("download",rU);const oU=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],HC=$e("file-check",oU);const lU=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Vs=$e("file-text",lU);const cU=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M11 18h2",key:"12mj7e"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M9 13v-.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v.5",key:"qbrxap"}]],uU=$e("file-type",cU);const dU=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],hU=$e("funnel",dU);const fU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],mU=$e("globe",fU);const pU=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],gU=$e("history",pU);const yU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],vU=$e("info",yU);const bU=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],xU=$e("italic",bU);const wU=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],SU=$e("link",wU);const AU=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],CU=$e("list-ordered",AU);const EU=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],_U=$e("list",EU);const TU=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],RU=$e("log-out",TU);const DU=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],MU=$e("message-square",DU);const NU=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],PU=$e("move",NU);const kU=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],$C=$e("pen-tool",kU);const OU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],JR=$e("plus",OU);const jU=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],LU=$e("printer",jU);const FU=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],IU=$e("refresh-cw",FU);const BU=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Bf=$e("search",BU);const zU=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],UU=$e("send",zU);const VU=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],HU=$e("shield",VU);const $U=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],iy=$e("sparkles",$U);const qU=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ry=$e("square-pen",qU);const GU=[["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-6 0c0 2 1 2 1 3.5V13",key:"i9gjdv"}],["path",{d:"M20 15.5a2.5 2.5 0 0 0-2.5-2.5h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1z",key:"1vzg3v"}],["path",{d:"M5 22h14",key:"ehvnwv"}]],KU=$e("stamp",GU);const YU=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],XU=$e("tag",YU);const WU=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],eD=$e("trash-2",WU);const QU=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ZU=$e("trending-up",QU);const JU=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],eV=$e("triangle-alert",JU);const tV=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],nV=$e("upload",tV);const sV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Kc=$e("user",sV);const iV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ma=$e("users",iV);const rV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ar=$e("x",rV);function qC(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Mi(...n){return e=>{let t=!1;const s=n.map(i=>{const a=qC(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<s.length;i++){const a=s[i];typeof a=="function"?a():qC(n[i],null)}}}}function Tt(...n){return x.useCallback(Mi(...n),n)}var aV=Symbol.for("react.lazy"),hf=Nf[" use ".trim().toString()];function oV(n){return typeof n=="object"&&n!==null&&"then"in n}function tD(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===aV&&"_payload"in n&&oV(n._payload)}function lV(n){const e=cV(n),t=x.forwardRef((s,i)=>{let{children:a,...o}=s;tD(a)&&typeof hf=="function"&&(a=hf(a._payload));const c=x.Children.toArray(a),d=c.find(dV);if(d){const h=d.props.children,f=c.map(p=>p===d?x.Children.count(h)>1?x.Children.only(null):x.isValidElement(h)?h.props.children:null:p);return g.jsx(e,{...o,ref:i,children:x.isValidElement(h)?x.cloneElement(h,void 0,f):null})}return g.jsx(e,{...o,ref:i,children:a})});return t.displayName=`${n}.Slot`,t}var nD=lV("Slot");function cV(n){const e=x.forwardRef((t,s)=>{let{children:i,...a}=t;if(tD(i)&&typeof hf=="function"&&(i=hf(i._payload)),x.isValidElement(i)){const o=fV(i),c=hV(a,i.props);return i.type!==x.Fragment&&(c.ref=s?Mi(s,o):o),x.cloneElement(i,c)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var uV=Symbol("radix.slottable");function dV(n){return x.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===uV}function hV(n,e){const t={...e};for(const s in e){const i=n[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?t[s]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[s]=i):s==="style"?t[s]={...i,...a}:s==="className"&&(t[s]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}function fV(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}const GC=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,KC=jl,N0=(n,e)=>t=>{var s;if(e?.variants==null)return KC(n,t?.class,t?.className);const{variants:i,defaultVariants:a}=e,o=Object.keys(i).map(h=>{const f=t?.[h],p=a?.[h];if(f===null)return null;const y=GC(f)||GC(p);return i[h][y]}),c=t&&Object.entries(t).reduce((h,f)=>{let[p,y]=f;return y===void 0||(h[p]=y),h},{}),d=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((h,f)=>{let{class:p,className:y,...b}=f;return Object.entries(b).every(A=>{let[S,E]=A;return Array.isArray(E)?E.includes({...a,...c}[S]):{...a,...c}[S]===E})?[...h,p,y]:h},[]);return KC(n,o,d,t?.class,t?.className)},mV=N0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ye=x.forwardRef(({className:n,variant:e,size:t,asChild:s=!1,...i},a)=>{const o=s?nD:"button";return g.jsx(o,{className:Ze(mV({variant:e,size:t,className:n})),ref:a,...i})});Ye.displayName="Button";const YC=[{code:"ru",label:""},{code:"en",label:"English"},{code:"uz",label:"O'zbek"}];function pV(){const{i18n:n}=yn(),[e,t]=x.useState(!1),s=x.useRef(null),i=a=>{n.changeLanguage(a),localStorage.setItem("i18nextLng",a),t(!1)};return x.useEffect(()=>{const a=o=>{s.current&&!s.current.contains(o.target)&&t(!1)};return e&&document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[e]),g.jsxs("div",{className:"relative",ref:s,children:[g.jsxs("button",{onClick:()=>t(!e),className:"flex items-center gap-2 px-3 py-2 text-sm text-muted-foreground hover:text-foreground hover:bg-muted rounded-lg transition-colors",children:[g.jsx(mU,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden md:inline",children:YC.find(a=>a.code===n.language)?.label||""})]}),e&&g.jsx("div",{className:"absolute right-0 top-full mt-1 w-40 bg-white border rounded-lg shadow-lg z-20 py-1",children:YC.map(a=>g.jsx("button",{onClick:()=>i(a.code),className:Ze("w-full text-left px-4 py-2 text-sm hover:bg-muted transition-colors",n.language===a.code&&"bg-primary/10 text-primary font-medium"),children:a.label},a.code))})]})}class gV{baseURL;constructor(){this.baseURL=window.location.origin}async call(e,t){return new Promise((s,i)=>{const a=new XMLHttpRequest,o=`${this.baseURL}/api/method/${e}`;a.open("POST",o,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("X-Frappe-CSRF-Token",this.getCSRFToken()),a.withCredentials=!0;const c=h=>{if(!h)return"";if(h.includes("Traceback (most recent call last)")){const f=h.split(`
`).map(y=>y.trim()).filter(Boolean);return f[f.length-1]||"  "}return h.startsWith('["')&&h.endsWith('"]')?h.slice(2,-2):h},d=h=>{try{if(typeof h?._server_messages=="string"){const f=JSON.parse(h._server_messages);if(Array.isArray(f)&&f.length){const p=f[f.length-1];try{const y=JSON.parse(p);if(y?.message)return String(y.message)}catch{return String(p)}}}}catch{}return null};a.onload=()=>{if(a.status>=200&&a.status<300)try{const h=JSON.parse(a.responseText);s(h.message||h)}catch{i(new Error(`Failed to parse response: ${a.responseText}`))}else{let h=`API call failed: ${a.status} ${a.statusText}`,f=null;try{const y=JSON.parse(a.responseText);let A=d(y)||null;if(y.message){const S=Array.isArray(y.message)?y.message.join(`
`):String(y.message),E=typeof S=="string"&&S.includes("Traceback (most recent call last)"),C=S.trim()===""||S.trim()==="}"||S.trim()==="null"||S.trim()==="undefined";(!A||!E&&!C)&&!E&&!C&&(A=S)}else y.exception?A=String(y.exception):y.exc&&(A=String(y.exc));if(A){const S=(E,C)=>{const _=E.indexOf(C);if(_===-1)return null;const T=E.slice(_+C.length),R=T.indexOf("{"),M=T.lastIndexOf("}");if(R===-1||M===-1||M<=R)return null;const k=T.slice(R,M+1);try{const N=JSON.parse(k),P=typeof N?.message=="string"?N.message:E;return{source:C==="LEXDOC_ERROR:"?"lexdoc":"our_side",message:P}}catch{return null}};f=S(A,"LEXDOC_ERROR:")||S(A,"OUR_ERROR:"),f?h=f.message:h=A}}catch{a.responseText&&(h=a.responseText)}h=c(h);const p=new Error(h);f&&(p.source=f.source,p.structuredError=f,p.message=f.message||h),i(p)}},a.onerror=()=>{i(new Error("Network error"))},a.ontimeout=()=>{i(new Error("Request timeout"))},a.send(t?JSON.stringify(t):"{}")})}async getDocuments(e){return this.call("edo.edo.doctype.edo_document.edo_document.get_portal_documents",e||{})}async getDocument(e){const t=await fetch(`${this.baseURL}/api/method/edo.edo.doctype.edo_document.edo_document.get_document`,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":this.getCSRFToken()},body:JSON.stringify({name:e})});if(!t.ok)throw new Error(`Failed to fetch document: ${t.statusText}`);return(await t.json()).message}async getCurrentUser(){const e=await fetch(`${this.baseURL}/api/method/frappe.auth.get_logged_user`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!e.ok)throw new Error(`Failed to get user: ${e.statusText}`);const s=(await e.json()).message,i=await fetch(`${this.baseURL}/api/resource/User/${s}`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!i.ok)return{name:s,full_name:s,email:s};const a=await i.json();let o=[];try{o=await this.call("edo.edo.doctype.edo_document.edo_document.get_user_roles")}catch(c){console.warn("Failed to get user roles:",c)}return{name:a.data.name,full_name:a.data.full_name||a.data.name,email:a.data.email,user_image:a.data.user_image,roles:o}}async logout(){await fetch(`${this.baseURL}/api/method/logout`,{method:"POST",headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}}),window.location.href="/login"}async getComments(e,t){return this.call("edo.edo.doctype.edo_document.edo_document.get_comments",{doctype:e,docname:t})}async addComment(e,t,s){return this.call("edo.edo.doctype.edo_document.edo_document.add_comment",{doctype:e,docname:t,content:s})}async deleteComment(e){return this.call("edo.edo.doctype.edo_document.edo_document.delete_comment",{comment_name:e})}async getCorrespondents(){const e=await fetch(`${this.baseURL}/api/resource/EDO Correspondent?fields=["name","correspondent_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!e.ok)throw new Error("Failed to fetch correspondents");return(await e.json()).data}async getDocumentTypes(){const e=await fetch(`${this.baseURL}/api/resource/EDO Document Type?fields=["name","document_type_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!e.ok)throw new Error("Failed to fetch document types");return(await e.json()).data}async getPriorities(){const e=await fetch(`${this.baseURL}/api/resource/EDO Priority?fields=["name","priority_name","weight"]&limit_page_length=999&order_by=weight desc`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!e.ok)throw new Error("Failed to fetch priorities");return(await e.json()).data}async getStatuses(){const e=await fetch(`${this.baseURL}/api/resource/EDO Status?fields=["name","status_name","color"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!e.ok)throw new Error("Failed to fetch statuses");return(await e.json()).data}async getClassifications(){const e=await fetch(`${this.baseURL}/api/resource/EDO Classification?fields=["name","classification_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!e.ok)throw new Error("Failed to fetch classifications");return(await e.json()).data}async getDeliveryMethods(){const e=await fetch(`${this.baseURL}/api/resource/EDO Delivery Method?fields=["name","delivery_method_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!e.ok)throw new Error("Failed to fetch delivery methods");return(await e.json()).data}async getUsers(){return this.call("edo.edo.doctype.edo_document.edo_document.get_users_list")}async getReceptionOffices(){const e=await fetch(`${this.baseURL}/api/resource/EDO Reception Office?fields=["name","reception_office_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!e.ok)throw new Error("Failed to fetch reception offices");return(await e.json()).data}async createDocument(e){return this.call("edo.edo.doctype.edo_document.edo_document.create_document",e)}async updateDocument(e,t){return this.call("edo.edo.doctype.edo_document.edo_document.update_document",{name:e,...t})}async canEditDocument(e){return this.call("edo.edo.doctype.edo_document.edo_document.can_edit_document",{document_name:e})}async directorApproveDocument(e,t,s){return this.call("edo.edo.doctype.edo_document.edo_document.director_approve_document",{name:e,comment:t,signature:s})}async getFiskaPdf(e){return this.call("edo.edo.doctype.edo_document.edo_document.get_fiska_pdf",{name:e})}async directorApproveWithFiska(e,t,s,i){return this.call("edo.edo.doctype.edo_document.edo_document.director_approve_with_fiska",{name:e,comment:t,signed_pdf_base64:s,pkcs7_base64:i})}async directorRejectDocument(e,t){return this.call("edo.edo.doctype.edo_document.edo_document.director_reject_document",{name:e,comment:t})}async executorSignDocument(e,t){return this.call("edo.edo.doctype.edo_document.edo_document.executor_sign_document",{name:e,comment:t})}async signDocumentWithPkcs7(e,t){return this.call("edo.edo.doctype.edo_document.edo_document.sign_document_with_pkcs7",{document_name:e,pkcs7:t})}async canDirectorApprove(){return this.call("edo.edo.doctype.edo_document.edo_document.can_director_approve")}async canExecutorSign(e){return this.call("edo.edo.doctype.edo_document.edo_document.can_executor_sign",{name:e})}async uploadFile(e){const t=new FormData;t.append("file",e),t.append("is_private","0");const s=await fetch(`${this.baseURL}/api/method/upload_file`,{method:"POST",headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()},body:t});if(!s.ok)throw new Error("Failed to upload file");return(await s.json()).message.file_url}async getStamps(){return this.call("edo.edo.doctype.edo_document.edo_document.get_stamps")}async getStampPreview(e,t){return this.call("edo.edo.doctype.edo_stamp.edo_stamp.get_stamp_preview",{stamp_name:e,document_name:t})}async getPdfInfo(e){return this.call("edo.edo.doctype.edo_document.edo_document.get_pdf_info",{document_name:e})}async applyStamps(e,t){return this.call("edo.edo.doctype.edo_document.edo_document.apply_stamps_to_pdf",{document_name:e,stamps:JSON.stringify(t)})}async canReceptionSubmit(){return this.call("edo.edo.doctype.edo_document.edo_document.can_reception_submit")}async receptionSubmitToDirector(e,t,s,i,a){return this.call("edo.edo.doctype.edo_document.edo_document.reception_submit_to_director",{name:e,resolution:t,resolution_text:s,executor:i,co_executors:a?JSON.stringify(a):void 0})}async getResolutions(){const e=await fetch(`${this.baseURL}/api/resource/EDO Resolution?fields=["name","resolution_name","resolution_text","is_active"]&filters=[["is_active","=",1]]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!e.ok)throw new Error("Failed to fetch resolutions");return(await e.json()).data}getCSRFToken(){return document.cookie.split("; ").find(t=>t.startsWith("csrf_token="))?.split("=")[1]||""}}const at=new gV;function yV(){const n=Gs();return Di({mutationFn:async()=>at.logout(),onSuccess:()=>{n.clear()}})}const vV=N0("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function P0({className:n,variant:e="default",asChild:t=!1,...s}){const i=t?nD:"span";return g.jsx(i,{"data-slot":"badge","data-variant":e,className:Ze(vV({variant:e}),n),...s})}function Fe(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function bV(n,e){const t=x.createContext(e),s=a=>{const{children:o,...c}=a,d=x.useMemo(()=>c,Object.values(c));return g.jsx(t.Provider,{value:d,children:o})};s.displayName=n+"Provider";function i(a){const o=x.useContext(t);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${n}\``)}return[s,i]}function io(n,e=[]){let t=[];function s(a,o){const c=x.createContext(o),d=t.length;t=[...t,o];const h=p=>{const{scope:y,children:b,...A}=p,S=y?.[n]?.[d]||c,E=x.useMemo(()=>A,Object.values(A));return g.jsx(S.Provider,{value:E,children:b})};h.displayName=a+"Provider";function f(p,y){const b=y?.[n]?.[d]||c,A=x.useContext(b);if(A)return A;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[h,f]}const i=()=>{const a=t.map(o=>x.createContext(o));return function(c){const d=c?.[n]||a;return x.useMemo(()=>({[`__scope${n}`]:{...c,[n]:d}}),[c,d])}};return i.scopeName=n,[s,xV(i,...e)]}function xV(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const s=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=s.reduce((c,{useScope:d,scopeName:h})=>{const p=d(a)[`__scope${h}`];return{...c,...p}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}var On=globalThis?.document?x.useLayoutEffect:()=>{},wV=Nf[" useInsertionEffect ".trim().toString()]||On;function bu({prop:n,defaultProp:e,onChange:t=()=>{},caller:s}){const[i,a,o]=SV({defaultProp:e,onChange:t}),c=n!==void 0,d=c?n:i;{const f=x.useRef(n!==void 0);x.useEffect(()=>{const p=f.current;p!==c&&console.warn(`${s} is changing from ${p?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=c},[c,s])}const h=x.useCallback(f=>{if(c){const p=AV(f)?f(n):f;p!==n&&o.current?.(p)}else a(f)},[c,n,a,o]);return[d,h]}function SV({defaultProp:n,onChange:e}){const[t,s]=x.useState(n),i=x.useRef(t),a=x.useRef(e);return wV(()=>{a.current=e},[e]),x.useEffect(()=>{i.current!==t&&(a.current?.(t),i.current=t)},[t,i]),[t,s,a]}function AV(n){return typeof n=="function"}function CV(n){const e=EV(n),t=x.forwardRef((s,i)=>{const{children:a,...o}=s,c=x.Children.toArray(a),d=c.find(TV);if(d){const h=d.props.children,f=c.map(p=>p===d?x.Children.count(h)>1?x.Children.only(null):x.isValidElement(h)?h.props.children:null:p);return g.jsx(e,{...o,ref:i,children:x.isValidElement(h)?x.cloneElement(h,void 0,f):null})}return g.jsx(e,{...o,ref:i,children:a})});return t.displayName=`${n}.Slot`,t}function EV(n){const e=x.forwardRef((t,s)=>{const{children:i,...a}=t;if(x.isValidElement(i)){const o=DV(i),c=RV(a,i.props);return i.type!==x.Fragment&&(c.ref=s?Mi(s,o):o),x.cloneElement(i,c)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var _V=Symbol("radix.slottable");function TV(n){return x.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===_V}function RV(n,e){const t={...e};for(const s in e){const i=n[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?t[s]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[s]=i):s==="style"?t[s]={...i,...a}:s==="className"&&(t[s]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}function DV(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var MV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ht=MV.reduce((n,e)=>{const t=CV(`Primitive.${e}`),s=x.forwardRef((i,a)=>{const{asChild:o,...c}=i,d=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(d,{...c,ref:a})});return s.displayName=`Primitive.${e}`,{...n,[e]:s}},{});function sD(n,e){n&&Nl.flushSync(()=>n.dispatchEvent(e))}function XC(n){const e=NV(n),t=x.forwardRef((s,i)=>{const{children:a,...o}=s,c=x.Children.toArray(a),d=c.find(kV);if(d){const h=d.props.children,f=c.map(p=>p===d?x.Children.count(h)>1?x.Children.only(null):x.isValidElement(h)?h.props.children:null:p);return g.jsx(e,{...o,ref:i,children:x.isValidElement(h)?x.cloneElement(h,void 0,f):null})}return g.jsx(e,{...o,ref:i,children:a})});return t.displayName=`${n}.Slot`,t}function NV(n){const e=x.forwardRef((t,s)=>{const{children:i,...a}=t;if(x.isValidElement(i)){const o=jV(i),c=OV(a,i.props);return i.type!==x.Fragment&&(c.ref=s?Mi(s,o):o),x.cloneElement(i,c)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var PV=Symbol("radix.slottable");function kV(n){return x.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===PV}function OV(n,e){const t={...e};for(const s in e){const i=n[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?t[s]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[s]=i):s==="style"?t[s]={...i,...a}:s==="className"&&(t[s]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}function jV(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function k0(n){const e=n+"CollectionProvider",[t,s]=io(e),[i,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=S=>{const{scope:E,children:C}=S,_=He.useRef(null),T=He.useRef(new Map).current;return g.jsx(i,{scope:E,itemMap:T,collectionRef:_,children:C})};o.displayName=e;const c=n+"CollectionSlot",d=XC(c),h=He.forwardRef((S,E)=>{const{scope:C,children:_}=S,T=a(c,C),R=Tt(E,T.collectionRef);return g.jsx(d,{ref:R,children:_})});h.displayName=c;const f=n+"CollectionItemSlot",p="data-radix-collection-item",y=XC(f),b=He.forwardRef((S,E)=>{const{scope:C,children:_,...T}=S,R=He.useRef(null),M=Tt(E,R),k=a(f,C);return He.useEffect(()=>(k.itemMap.set(R,{ref:R,...T}),()=>{k.itemMap.delete(R)})),g.jsx(y,{[p]:"",ref:M,children:_})});b.displayName=f;function A(S){const E=a(n+"CollectionConsumer",S);return He.useCallback(()=>{const _=E.collectionRef.current;if(!_)return[];const T=Array.from(_.querySelectorAll(`[${p}]`));return Array.from(E.itemMap.values()).sort((k,N)=>T.indexOf(k.ref.current)-T.indexOf(N.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:o,Slot:h,ItemSlot:b},A,s]}var LV=x.createContext(void 0);function O0(n){const e=x.useContext(LV);return n||e||"ltr"}function Ti(n){const e=x.useRef(n);return x.useEffect(()=>{e.current=n}),x.useMemo(()=>(...t)=>e.current?.(...t),[])}function FV(n,e=globalThis?.document){const t=Ti(n);x.useEffect(()=>{const s=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var IV="DismissableLayer",dv="dismissableLayer.update",BV="dismissableLayer.pointerDownOutside",zV="dismissableLayer.focusOutside",WC,iD=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zf=x.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:c,...d}=n,h=x.useContext(iD),[f,p]=x.useState(null),y=f?.ownerDocument??globalThis?.document,[,b]=x.useState({}),A=Tt(e,N=>p(N)),S=Array.from(h.layers),[E]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),C=S.indexOf(E),_=f?S.indexOf(f):-1,T=h.layersWithOutsidePointerEventsDisabled.size>0,R=_>=C,M=HV(N=>{const P=N.target,j=[...h.branches].some(I=>I.contains(P));!R||j||(i?.(N),o?.(N),N.defaultPrevented||c?.())},y),k=$V(N=>{const P=N.target;[...h.branches].some(I=>I.contains(P))||(a?.(N),o?.(N),N.defaultPrevented||c?.())},y);return FV(N=>{_===h.layers.size-1&&(s?.(N),!N.defaultPrevented&&c&&(N.preventDefault(),c()))},y),x.useEffect(()=>{if(f)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(WC=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),QC(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=WC)}},[f,y,t,h]),x.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),QC())},[f,h]),x.useEffect(()=>{const N=()=>b({});return document.addEventListener(dv,N),()=>document.removeEventListener(dv,N)},[]),g.jsx(ht.div,{...d,ref:A,style:{pointerEvents:T?R?"auto":"none":void 0,...n.style},onFocusCapture:Fe(n.onFocusCapture,k.onFocusCapture),onBlurCapture:Fe(n.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Fe(n.onPointerDownCapture,M.onPointerDownCapture)})});zf.displayName=IV;var UV="DismissableLayerBranch",VV=x.forwardRef((n,e)=>{const t=x.useContext(iD),s=x.useRef(null),i=Tt(e,s);return x.useEffect(()=>{const a=s.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),g.jsx(ht.div,{...n,ref:i})});VV.displayName=UV;function HV(n,e=globalThis?.document){const t=Ti(n),s=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const a=c=>{if(c.target&&!s.current){let d=function(){rD(BV,t,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function $V(n,e=globalThis?.document){const t=Ti(n),s=x.useRef(!1);return x.useEffect(()=>{const i=a=>{a.target&&!s.current&&rD(zV,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function QC(){const n=new CustomEvent(dv);document.dispatchEvent(n)}function rD(n,e,t,{discrete:s}){const i=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),s?sD(i,a):i.dispatchEvent(a)}var ay=0;function j0(){x.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??ZC()),document.body.insertAdjacentElement("beforeend",n[1]??ZC()),ay++,()=>{ay===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ay--}},[])}function ZC(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var oy="focusScope.autoFocusOnMount",ly="focusScope.autoFocusOnUnmount",JC={bubbles:!1,cancelable:!0},qV="FocusScope",Uf=x.forwardRef((n,e)=>{const{loop:t=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=n,[c,d]=x.useState(null),h=Ti(i),f=Ti(a),p=x.useRef(null),y=Tt(e,S=>d(S)),b=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(s){let S=function(T){if(b.paused||!c)return;const R=T.target;c.contains(R)?p.current=R:Hr(p.current,{select:!0})},E=function(T){if(b.paused||!c)return;const R=T.relatedTarget;R!==null&&(c.contains(R)||Hr(p.current,{select:!0}))},C=function(T){if(document.activeElement===document.body)for(const M of T)M.removedNodes.length>0&&Hr(c)};document.addEventListener("focusin",S),document.addEventListener("focusout",E);const _=new MutationObserver(C);return c&&_.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",E),_.disconnect()}}},[s,c,b.paused]),x.useEffect(()=>{if(c){tE.add(b);const S=document.activeElement;if(!c.contains(S)){const C=new CustomEvent(oy,JC);c.addEventListener(oy,h),c.dispatchEvent(C),C.defaultPrevented||(GV(QV(aD(c)),{select:!0}),document.activeElement===S&&Hr(c))}return()=>{c.removeEventListener(oy,h),setTimeout(()=>{const C=new CustomEvent(ly,JC);c.addEventListener(ly,f),c.dispatchEvent(C),C.defaultPrevented||Hr(S??document.body,{select:!0}),c.removeEventListener(ly,f),tE.remove(b)},0)}}},[c,h,f,b]);const A=x.useCallback(S=>{if(!t&&!s||b.paused)return;const E=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,C=document.activeElement;if(E&&C){const _=S.currentTarget,[T,R]=KV(_);T&&R?!S.shiftKey&&C===R?(S.preventDefault(),t&&Hr(T,{select:!0})):S.shiftKey&&C===T&&(S.preventDefault(),t&&Hr(R,{select:!0})):C===_&&S.preventDefault()}},[t,s,b.paused]);return g.jsx(ht.div,{tabIndex:-1,...o,ref:y,onKeyDown:A})});Uf.displayName=qV;function GV(n,{select:e=!1}={}){const t=document.activeElement;for(const s of n)if(Hr(s,{select:e}),document.activeElement!==t)return}function KV(n){const e=aD(n),t=eE(e,n),s=eE(e.reverse(),n);return[t,s]}function aD(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function eE(n,e){for(const t of n)if(!YV(t,{upTo:e}))return t}function YV(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function XV(n){return n instanceof HTMLInputElement&&"select"in n}function Hr(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&XV(n)&&e&&n.select()}}var tE=WV();function WV(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=nE(n,e),n.unshift(e)},remove(e){n=nE(n,e),n[0]?.resume()}}}function nE(n,e){const t=[...n],s=t.indexOf(e);return s!==-1&&t.splice(s,1),t}function QV(n){return n.filter(e=>e.tagName!=="A")}var ZV=Nf[" useId ".trim().toString()]||(()=>{}),JV=0;function cr(n){const[e,t]=x.useState(ZV());return On(()=>{t(s=>s??String(JV++))},[n]),e?`radix-${e}`:""}const e8=["top","right","bottom","left"],ea=Math.min,ws=Math.max,ff=Math.round,Sh=Math.floor,Ei=n=>({x:n,y:n}),t8={left:"right",right:"left",bottom:"top",top:"bottom"},n8={start:"end",end:"start"};function hv(n,e,t){return ws(n,ea(e,t))}function hr(n,e){return typeof n=="function"?n(e):n}function fr(n){return n.split("-")[0]}function Il(n){return n.split("-")[1]}function L0(n){return n==="x"?"y":"x"}function F0(n){return n==="y"?"height":"width"}const s8=new Set(["top","bottom"]);function Ai(n){return s8.has(fr(n))?"y":"x"}function I0(n){return L0(Ai(n))}function i8(n,e,t){t===void 0&&(t=!1);const s=Il(n),i=I0(n),a=F0(i);let o=i==="x"?s===(t?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=mf(o)),[o,mf(o)]}function r8(n){const e=mf(n);return[fv(n),e,fv(e)]}function fv(n){return n.replace(/start|end/g,e=>n8[e])}const sE=["left","right"],iE=["right","left"],a8=["top","bottom"],o8=["bottom","top"];function l8(n,e,t){switch(n){case"top":case"bottom":return t?e?iE:sE:e?sE:iE;case"left":case"right":return e?a8:o8;default:return[]}}function c8(n,e,t,s){const i=Il(n);let a=l8(fr(n),t==="start",s);return i&&(a=a.map(o=>o+"-"+i),e&&(a=a.concat(a.map(fv)))),a}function mf(n){return n.replace(/left|right|bottom|top/g,e=>t8[e])}function u8(n){return{top:0,right:0,bottom:0,left:0,...n}}function oD(n){return typeof n!="number"?u8(n):{top:n,right:n,bottom:n,left:n}}function pf(n){const{x:e,y:t,width:s,height:i}=n;return{width:s,height:i,top:t,left:e,right:e+s,bottom:t+i,x:e,y:t}}function rE(n,e,t){let{reference:s,floating:i}=n;const a=Ai(e),o=I0(e),c=F0(o),d=fr(e),h=a==="y",f=s.x+s.width/2-i.width/2,p=s.y+s.height/2-i.height/2,y=s[c]/2-i[c]/2;let b;switch(d){case"top":b={x:f,y:s.y-i.height};break;case"bottom":b={x:f,y:s.y+s.height};break;case"right":b={x:s.x+s.width,y:p};break;case"left":b={x:s.x-i.width,y:p};break;default:b={x:s.x,y:s.y}}switch(Il(e)){case"start":b[o]-=y*(t&&h?-1:1);break;case"end":b[o]+=y*(t&&h?-1:1);break}return b}const d8=async(n,e,t)=>{const{placement:s="bottom",strategy:i="absolute",middleware:a=[],platform:o}=t,c=a.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(e));let h=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:f,y:p}=rE(h,s,d),y=s,b={},A=0;for(let S=0;S<c.length;S++){const{name:E,fn:C}=c[S],{x:_,y:T,data:R,reset:M}=await C({x:f,y:p,initialPlacement:s,placement:y,strategy:i,middlewareData:b,rects:h,platform:o,elements:{reference:n,floating:e}});f=_??f,p=T??p,b={...b,[E]:{...b[E],...R}},M&&A<=50&&(A++,typeof M=="object"&&(M.placement&&(y=M.placement),M.rects&&(h=M.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):M.rects),{x:f,y:p}=rE(h,y,d)),S=-1)}return{x:f,y:p,placement:y,strategy:i,middlewareData:b}};async function xu(n,e){var t;e===void 0&&(e={});const{x:s,y:i,platform:a,rects:o,elements:c,strategy:d}=n,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:y=!1,padding:b=0}=hr(e,n),A=oD(b),E=c[y?p==="floating"?"reference":"floating":p],C=pf(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(E)))==null||t?E:E.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:h,rootBoundary:f,strategy:d})),_=p==="floating"?{x:s,y:i,width:o.floating.width,height:o.floating.height}:o.reference,T=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),R=await(a.isElement==null?void 0:a.isElement(T))?await(a.getScale==null?void 0:a.getScale(T))||{x:1,y:1}:{x:1,y:1},M=pf(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:_,offsetParent:T,strategy:d}):_);return{top:(C.top-M.top+A.top)/R.y,bottom:(M.bottom-C.bottom+A.bottom)/R.y,left:(C.left-M.left+A.left)/R.x,right:(M.right-C.right+A.right)/R.x}}const h8=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:s,placement:i,rects:a,platform:o,elements:c,middlewareData:d}=e,{element:h,padding:f=0}=hr(n,e)||{};if(h==null)return{};const p=oD(f),y={x:t,y:s},b=I0(i),A=F0(b),S=await o.getDimensions(h),E=b==="y",C=E?"top":"left",_=E?"bottom":"right",T=E?"clientHeight":"clientWidth",R=a.reference[A]+a.reference[b]-y[b]-a.floating[A],M=y[b]-a.reference[b],k=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h));let N=k?k[T]:0;(!N||!await(o.isElement==null?void 0:o.isElement(k)))&&(N=c.floating[T]||a.floating[A]);const P=R/2-M/2,j=N/2-S[A]/2-1,I=ea(p[C],j),H=ea(p[_],j),$=I,K=N-S[A]-H,Z=N/2-S[A]/2+P,oe=hv($,Z,K),F=!d.arrow&&Il(i)!=null&&Z!==oe&&a.reference[A]/2-(Z<$?I:H)-S[A]/2<0,B=F?Z<$?Z-$:Z-K:0;return{[b]:y[b]+B,data:{[b]:oe,centerOffset:Z-oe-B,...F&&{alignmentOffset:B}},reset:F}}}),f8=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,s;const{placement:i,middlewareData:a,rects:o,initialPlacement:c,platform:d,elements:h}=e,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:y,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:A="none",flipAlignment:S=!0,...E}=hr(n,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const C=fr(i),_=Ai(c),T=fr(c)===c,R=await(d.isRTL==null?void 0:d.isRTL(h.floating)),M=y||(T||!S?[mf(c)]:r8(c)),k=A!=="none";!y&&k&&M.push(...c8(c,S,A,R));const N=[c,...M],P=await xu(e,E),j=[];let I=((s=a.flip)==null?void 0:s.overflows)||[];if(f&&j.push(P[C]),p){const Z=i8(i,o,R);j.push(P[Z[0]],P[Z[1]])}if(I=[...I,{placement:i,overflows:j}],!j.every(Z=>Z<=0)){var H,$;const Z=(((H=a.flip)==null?void 0:H.index)||0)+1,oe=N[Z];if(oe&&(!(p==="alignment"?_!==Ai(oe):!1)||I.every(z=>Ai(z.placement)===_?z.overflows[0]>0:!0)))return{data:{index:Z,overflows:I},reset:{placement:oe}};let F=($=I.filter(B=>B.overflows[0]<=0).sort((B,z)=>B.overflows[1]-z.overflows[1])[0])==null?void 0:$.placement;if(!F)switch(b){case"bestFit":{var K;const B=(K=I.filter(z=>{if(k){const Q=Ai(z.placement);return Q===_||Q==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(Q=>Q>0).reduce((Q,me)=>Q+me,0)]).sort((z,Q)=>z[1]-Q[1])[0])==null?void 0:K[0];B&&(F=B);break}case"initialPlacement":F=c;break}if(i!==F)return{reset:{placement:F}}}return{}}}};function aE(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function oE(n){return e8.some(e=>n[e]>=0)}const m8=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:s="referenceHidden",...i}=hr(n,e);switch(s){case"referenceHidden":{const a=await xu(e,{...i,elementContext:"reference"}),o=aE(a,t.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:oE(o)}}}case"escaped":{const a=await xu(e,{...i,altBoundary:!0}),o=aE(a,t.floating);return{data:{escapedOffsets:o,escaped:oE(o)}}}default:return{}}}}},lD=new Set(["left","top"]);async function p8(n,e){const{placement:t,platform:s,elements:i}=n,a=await(s.isRTL==null?void 0:s.isRTL(i.floating)),o=fr(t),c=Il(t),d=Ai(t)==="y",h=lD.has(o)?-1:1,f=a&&d?-1:1,p=hr(e,n);let{mainAxis:y,crossAxis:b,alignmentAxis:A}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return c&&typeof A=="number"&&(b=c==="end"?A*-1:A),d?{x:b*f,y:y*h}:{x:y*h,y:b*f}}const g8=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,s;const{x:i,y:a,placement:o,middlewareData:c}=e,d=await p8(e,n);return o===((t=c.offset)==null?void 0:t.placement)&&(s=c.arrow)!=null&&s.alignmentOffset?{}:{x:i+d.x,y:a+d.y,data:{...d,placement:o}}}}},y8=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:s,placement:i}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:c={fn:E=>{let{x:C,y:_}=E;return{x:C,y:_}}},...d}=hr(n,e),h={x:t,y:s},f=await xu(e,d),p=Ai(fr(i)),y=L0(p);let b=h[y],A=h[p];if(a){const E=y==="y"?"top":"left",C=y==="y"?"bottom":"right",_=b+f[E],T=b-f[C];b=hv(_,b,T)}if(o){const E=p==="y"?"top":"left",C=p==="y"?"bottom":"right",_=A+f[E],T=A-f[C];A=hv(_,A,T)}const S=c.fn({...e,[y]:b,[p]:A});return{...S,data:{x:S.x-t,y:S.y-s,enabled:{[y]:a,[p]:o}}}}}},v8=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:s,placement:i,rects:a,middlewareData:o}=e,{offset:c=0,mainAxis:d=!0,crossAxis:h=!0}=hr(n,e),f={x:t,y:s},p=Ai(i),y=L0(p);let b=f[y],A=f[p];const S=hr(c,e),E=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(d){const T=y==="y"?"height":"width",R=a.reference[y]-a.floating[T]+E.mainAxis,M=a.reference[y]+a.reference[T]-E.mainAxis;b<R?b=R:b>M&&(b=M)}if(h){var C,_;const T=y==="y"?"width":"height",R=lD.has(fr(i)),M=a.reference[p]-a.floating[T]+(R&&((C=o.offset)==null?void 0:C[p])||0)+(R?0:E.crossAxis),k=a.reference[p]+a.reference[T]+(R?0:((_=o.offset)==null?void 0:_[p])||0)-(R?E.crossAxis:0);A<M?A=M:A>k&&(A=k)}return{[y]:b,[p]:A}}}},b8=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,s;const{placement:i,rects:a,platform:o,elements:c}=e,{apply:d=()=>{},...h}=hr(n,e),f=await xu(e,h),p=fr(i),y=Il(i),b=Ai(i)==="y",{width:A,height:S}=a.floating;let E,C;p==="top"||p==="bottom"?(E=p,C=y===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(C=p,E=y==="end"?"top":"bottom");const _=S-f.top-f.bottom,T=A-f.left-f.right,R=ea(S-f[E],_),M=ea(A-f[C],T),k=!e.middlewareData.shift;let N=R,P=M;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(P=T),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(N=_),k&&!y){const I=ws(f.left,0),H=ws(f.right,0),$=ws(f.top,0),K=ws(f.bottom,0);b?P=A-2*(I!==0||H!==0?I+H:ws(f.left,f.right)):N=S-2*($!==0||K!==0?$+K:ws(f.top,f.bottom))}await d({...e,availableWidth:P,availableHeight:N});const j=await o.getDimensions(c.floating);return A!==j.width||S!==j.height?{reset:{rects:!0}}:{}}}};function Vf(){return typeof window<"u"}function Bl(n){return cD(n)?(n.nodeName||"").toLowerCase():"#document"}function As(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Ni(n){var e;return(e=(cD(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function cD(n){return Vf()?n instanceof Node||n instanceof As(n).Node:!1}function ii(n){return Vf()?n instanceof Element||n instanceof As(n).Element:!1}function Ri(n){return Vf()?n instanceof HTMLElement||n instanceof As(n).HTMLElement:!1}function lE(n){return!Vf()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof As(n).ShadowRoot}const x8=new Set(["inline","contents"]);function Bu(n){const{overflow:e,overflowX:t,overflowY:s,display:i}=ri(n);return/auto|scroll|overlay|hidden|clip/.test(e+s+t)&&!x8.has(i)}const w8=new Set(["table","td","th"]);function S8(n){return w8.has(Bl(n))}const A8=[":popover-open",":modal"];function Hf(n){return A8.some(e=>{try{return n.matches(e)}catch{return!1}})}const C8=["transform","translate","scale","rotate","perspective"],E8=["transform","translate","scale","rotate","perspective","filter"],_8=["paint","layout","strict","content"];function B0(n){const e=z0(),t=ii(n)?ri(n):n;return C8.some(s=>t[s]?t[s]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||E8.some(s=>(t.willChange||"").includes(s))||_8.some(s=>(t.contain||"").includes(s))}function T8(n){let e=ta(n);for(;Ri(e)&&!El(e);){if(B0(e))return e;if(Hf(e))return null;e=ta(e)}return null}function z0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const R8=new Set(["html","body","#document"]);function El(n){return R8.has(Bl(n))}function ri(n){return As(n).getComputedStyle(n)}function $f(n){return ii(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function ta(n){if(Bl(n)==="html")return n;const e=n.assignedSlot||n.parentNode||lE(n)&&n.host||Ni(n);return lE(e)?e.host:e}function uD(n){const e=ta(n);return El(e)?n.ownerDocument?n.ownerDocument.body:n.body:Ri(e)&&Bu(e)?e:uD(e)}function wu(n,e,t){var s;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=uD(n),a=i===((s=n.ownerDocument)==null?void 0:s.body),o=As(i);if(a){const c=mv(o);return e.concat(o,o.visualViewport||[],Bu(i)?i:[],c&&t?wu(c):[])}return e.concat(i,wu(i,[],t))}function mv(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function dD(n){const e=ri(n);let t=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const i=Ri(n),a=i?n.offsetWidth:t,o=i?n.offsetHeight:s,c=ff(t)!==a||ff(s)!==o;return c&&(t=a,s=o),{width:t,height:s,$:c}}function U0(n){return ii(n)?n:n.contextElement}function ml(n){const e=U0(n);if(!Ri(e))return Ei(1);const t=e.getBoundingClientRect(),{width:s,height:i,$:a}=dD(e);let o=(a?ff(t.width):t.width)/s,c=(a?ff(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const D8=Ei(0);function hD(n){const e=As(n);return!z0()||!e.visualViewport?D8:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function M8(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==As(n)?!1:e}function Xa(n,e,t,s){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),a=U0(n);let o=Ei(1);e&&(s?ii(s)&&(o=ml(s)):o=ml(n));const c=M8(a,t,s)?hD(a):Ei(0);let d=(i.left+c.x)/o.x,h=(i.top+c.y)/o.y,f=i.width/o.x,p=i.height/o.y;if(a){const y=As(a),b=s&&ii(s)?As(s):s;let A=y,S=mv(A);for(;S&&s&&b!==A;){const E=ml(S),C=S.getBoundingClientRect(),_=ri(S),T=C.left+(S.clientLeft+parseFloat(_.paddingLeft))*E.x,R=C.top+(S.clientTop+parseFloat(_.paddingTop))*E.y;d*=E.x,h*=E.y,f*=E.x,p*=E.y,d+=T,h+=R,A=As(S),S=mv(A)}}return pf({width:f,height:p,x:d,y:h})}function qf(n,e){const t=$f(n).scrollLeft;return e?e.left+t:Xa(Ni(n)).left+t}function fD(n,e){const t=n.getBoundingClientRect(),s=t.left+e.scrollLeft-qf(n,t),i=t.top+e.scrollTop;return{x:s,y:i}}function N8(n){let{elements:e,rect:t,offsetParent:s,strategy:i}=n;const a=i==="fixed",o=Ni(s),c=e?Hf(e.floating):!1;if(s===o||c&&a)return t;let d={scrollLeft:0,scrollTop:0},h=Ei(1);const f=Ei(0),p=Ri(s);if((p||!p&&!a)&&((Bl(s)!=="body"||Bu(o))&&(d=$f(s)),Ri(s))){const b=Xa(s);h=ml(s),f.x=b.x+s.clientLeft,f.y=b.y+s.clientTop}const y=o&&!p&&!a?fD(o,d):Ei(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-d.scrollLeft*h.x+f.x+y.x,y:t.y*h.y-d.scrollTop*h.y+f.y+y.y}}function P8(n){return Array.from(n.getClientRects())}function k8(n){const e=Ni(n),t=$f(n),s=n.ownerDocument.body,i=ws(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),a=ws(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let o=-t.scrollLeft+qf(n);const c=-t.scrollTop;return ri(s).direction==="rtl"&&(o+=ws(e.clientWidth,s.clientWidth)-i),{width:i,height:a,x:o,y:c}}const cE=25;function O8(n,e){const t=As(n),s=Ni(n),i=t.visualViewport;let a=s.clientWidth,o=s.clientHeight,c=0,d=0;if(i){a=i.width,o=i.height;const f=z0();(!f||f&&e==="fixed")&&(c=i.offsetLeft,d=i.offsetTop)}const h=qf(s);if(h<=0){const f=s.ownerDocument,p=f.body,y=getComputedStyle(p),b=f.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,A=Math.abs(s.clientWidth-p.clientWidth-b);A<=cE&&(a-=A)}else h<=cE&&(a+=h);return{width:a,height:o,x:c,y:d}}const j8=new Set(["absolute","fixed"]);function L8(n,e){const t=Xa(n,!0,e==="fixed"),s=t.top+n.clientTop,i=t.left+n.clientLeft,a=Ri(n)?ml(n):Ei(1),o=n.clientWidth*a.x,c=n.clientHeight*a.y,d=i*a.x,h=s*a.y;return{width:o,height:c,x:d,y:h}}function uE(n,e,t){let s;if(e==="viewport")s=O8(n,t);else if(e==="document")s=k8(Ni(n));else if(ii(e))s=L8(e,t);else{const i=hD(n);s={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return pf(s)}function mD(n,e){const t=ta(n);return t===e||!ii(t)||El(t)?!1:ri(t).position==="fixed"||mD(t,e)}function F8(n,e){const t=e.get(n);if(t)return t;let s=wu(n,[],!1).filter(c=>ii(c)&&Bl(c)!=="body"),i=null;const a=ri(n).position==="fixed";let o=a?ta(n):n;for(;ii(o)&&!El(o);){const c=ri(o),d=B0(o);!d&&c.position==="fixed"&&(i=null),(a?!d&&!i:!d&&c.position==="static"&&!!i&&j8.has(i.position)||Bu(o)&&!d&&mD(n,o))?s=s.filter(f=>f!==o):i=c,o=ta(o)}return e.set(n,s),s}function I8(n){let{element:e,boundary:t,rootBoundary:s,strategy:i}=n;const o=[...t==="clippingAncestors"?Hf(e)?[]:F8(e,this._c):[].concat(t),s],c=o[0],d=o.reduce((h,f)=>{const p=uE(e,f,i);return h.top=ws(p.top,h.top),h.right=ea(p.right,h.right),h.bottom=ea(p.bottom,h.bottom),h.left=ws(p.left,h.left),h},uE(e,c,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function B8(n){const{width:e,height:t}=dD(n);return{width:e,height:t}}function z8(n,e,t){const s=Ri(e),i=Ni(e),a=t==="fixed",o=Xa(n,!0,a,e);let c={scrollLeft:0,scrollTop:0};const d=Ei(0);function h(){d.x=qf(i)}if(s||!s&&!a)if((Bl(e)!=="body"||Bu(i))&&(c=$f(e)),s){const b=Xa(e,!0,a,e);d.x=b.x+e.clientLeft,d.y=b.y+e.clientTop}else i&&h();a&&!s&&i&&h();const f=i&&!s&&!a?fD(i,c):Ei(0),p=o.left+c.scrollLeft-d.x-f.x,y=o.top+c.scrollTop-d.y-f.y;return{x:p,y,width:o.width,height:o.height}}function cy(n){return ri(n).position==="static"}function dE(n,e){if(!Ri(n)||ri(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Ni(n)===t&&(t=t.ownerDocument.body),t}function pD(n,e){const t=As(n);if(Hf(n))return t;if(!Ri(n)){let i=ta(n);for(;i&&!El(i);){if(ii(i)&&!cy(i))return i;i=ta(i)}return t}let s=dE(n,e);for(;s&&S8(s)&&cy(s);)s=dE(s,e);return s&&El(s)&&cy(s)&&!B0(s)?t:s||T8(n)||t}const U8=async function(n){const e=this.getOffsetParent||pD,t=this.getDimensions,s=await t(n.floating);return{reference:z8(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function V8(n){return ri(n).direction==="rtl"}const H8={convertOffsetParentRelativeRectToViewportRelativeRect:N8,getDocumentElement:Ni,getClippingRect:I8,getOffsetParent:pD,getElementRects:U8,getClientRects:P8,getDimensions:B8,getScale:ml,isElement:ii,isRTL:V8};function gD(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function $8(n,e){let t=null,s;const i=Ni(n);function a(){var c;clearTimeout(s),(c=t)==null||c.disconnect(),t=null}function o(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),a();const h=n.getBoundingClientRect(),{left:f,top:p,width:y,height:b}=h;if(c||e(),!y||!b)return;const A=Sh(p),S=Sh(i.clientWidth-(f+y)),E=Sh(i.clientHeight-(p+b)),C=Sh(f),T={rootMargin:-A+"px "+-S+"px "+-E+"px "+-C+"px",threshold:ws(0,ea(1,d))||1};let R=!0;function M(k){const N=k[0].intersectionRatio;if(N!==d){if(!R)return o();N?o(!1,N):s=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!gD(h,n.getBoundingClientRect())&&o(),R=!1}try{t=new IntersectionObserver(M,{...T,root:i.ownerDocument})}catch{t=new IntersectionObserver(M,T)}t.observe(n)}return o(!0),a}function q8(n,e,t,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=s,h=U0(n),f=i||a?[...h?wu(h):[],...wu(e)]:[];f.forEach(C=>{i&&C.addEventListener("scroll",t,{passive:!0}),a&&C.addEventListener("resize",t)});const p=h&&c?$8(h,t):null;let y=-1,b=null;o&&(b=new ResizeObserver(C=>{let[_]=C;_&&_.target===h&&b&&(b.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var T;(T=b)==null||T.observe(e)})),t()}),h&&!d&&b.observe(h),b.observe(e));let A,S=d?Xa(n):null;d&&E();function E(){const C=Xa(n);S&&!gD(S,C)&&t(),S=C,A=requestAnimationFrame(E)}return t(),()=>{var C;f.forEach(_=>{i&&_.removeEventListener("scroll",t),a&&_.removeEventListener("resize",t)}),p?.(),(C=b)==null||C.disconnect(),b=null,d&&cancelAnimationFrame(A)}}const G8=g8,K8=y8,Y8=f8,X8=b8,W8=m8,hE=h8,Q8=v8,Z8=(n,e,t)=>{const s=new Map,i={platform:H8,...t},a={...i.platform,_c:s};return d8(n,e,{...i,platform:a})};var J8=typeof document<"u",eH=function(){},qh=J8?x.useLayoutEffect:eH;function gf(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,s,i;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(s=t;s--!==0;)if(!gf(n[s],e[s]))return!1;return!0}if(i=Object.keys(n),t=i.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!{}.hasOwnProperty.call(e,i[s]))return!1;for(s=t;s--!==0;){const a=i[s];if(!(a==="_owner"&&n.$$typeof)&&!gf(n[a],e[a]))return!1}return!0}return n!==n&&e!==e}function yD(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function fE(n,e){const t=yD(n);return Math.round(e*t)/t}function uy(n){const e=x.useRef(n);return qh(()=>{e.current=n}),e}function tH(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:s=[],platform:i,elements:{reference:a,floating:o}={},transform:c=!0,whileElementsMounted:d,open:h}=n,[f,p]=x.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[y,b]=x.useState(s);gf(y,s)||b(s);const[A,S]=x.useState(null),[E,C]=x.useState(null),_=x.useCallback(z=>{z!==k.current&&(k.current=z,S(z))},[]),T=x.useCallback(z=>{z!==N.current&&(N.current=z,C(z))},[]),R=a||A,M=o||E,k=x.useRef(null),N=x.useRef(null),P=x.useRef(f),j=d!=null,I=uy(d),H=uy(i),$=uy(h),K=x.useCallback(()=>{if(!k.current||!N.current)return;const z={placement:e,strategy:t,middleware:y};H.current&&(z.platform=H.current),Z8(k.current,N.current,z).then(Q=>{const me={...Q,isPositioned:$.current!==!1};Z.current&&!gf(P.current,me)&&(P.current=me,Nl.flushSync(()=>{p(me)}))})},[y,e,t,H,$]);qh(()=>{h===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,p(z=>({...z,isPositioned:!1})))},[h]);const Z=x.useRef(!1);qh(()=>(Z.current=!0,()=>{Z.current=!1}),[]),qh(()=>{if(R&&(k.current=R),M&&(N.current=M),R&&M){if(I.current)return I.current(R,M,K);K()}},[R,M,K,I,j]);const oe=x.useMemo(()=>({reference:k,floating:N,setReference:_,setFloating:T}),[_,T]),F=x.useMemo(()=>({reference:R,floating:M}),[R,M]),B=x.useMemo(()=>{const z={position:t,left:0,top:0};if(!F.floating)return z;const Q=fE(F.floating,f.x),me=fE(F.floating,f.y);return c?{...z,transform:"translate("+Q+"px, "+me+"px)",...yD(F.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Q,top:me}},[t,c,F.floating,f.x,f.y]);return x.useMemo(()=>({...f,update:K,refs:oe,elements:F,floatingStyles:B}),[f,K,oe,F,B])}const nH=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:s,padding:i}=typeof n=="function"?n(t):n;return s&&e(s)?s.current!=null?hE({element:s.current,padding:i}).fn(t):{}:s?hE({element:s,padding:i}).fn(t):{}}}},sH=(n,e)=>({...G8(n),options:[n,e]}),iH=(n,e)=>({...K8(n),options:[n,e]}),rH=(n,e)=>({...Q8(n),options:[n,e]}),aH=(n,e)=>({...Y8(n),options:[n,e]}),oH=(n,e)=>({...X8(n),options:[n,e]}),lH=(n,e)=>({...W8(n),options:[n,e]}),cH=(n,e)=>({...nH(n),options:[n,e]});var uH="Arrow",vD=x.forwardRef((n,e)=>{const{children:t,width:s=10,height:i=5,...a}=n;return g.jsx(ht.svg,{...a,ref:e,width:s,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});vD.displayName=uH;var dH=vD;function hH(n){const[e,t]=x.useState(void 0);return On(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,c;if("borderBoxSize"in a){const d=a.borderBoxSize,h=Array.isArray(d)?d[0]:d;o=h.inlineSize,c=h.blockSize}else o=n.offsetWidth,c=n.offsetHeight;t({width:o,height:c})});return s.observe(n,{box:"border-box"}),()=>s.unobserve(n)}else t(void 0)},[n]),e}var V0="Popper",[bD,Gf]=io(V0),[fH,xD]=bD(V0),wD=n=>{const{__scopePopper:e,children:t}=n,[s,i]=x.useState(null);return g.jsx(fH,{scope:e,anchor:s,onAnchorChange:i,children:t})};wD.displayName=V0;var SD="PopperAnchor",AD=x.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:s,...i}=n,a=xD(SD,t),o=x.useRef(null),c=Tt(e,o),d=x.useRef(null);return x.useEffect(()=>{const h=d.current;d.current=s?.current||o.current,h!==d.current&&a.onAnchorChange(d.current)}),s?null:g.jsx(ht.div,{...i,ref:c})});AD.displayName=SD;var H0="PopperContent",[mH,pH]=bD(H0),CD=x.forwardRef((n,e)=>{const{__scopePopper:t,side:s="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:p="partial",hideWhenDetached:y=!1,updatePositionStrategy:b="optimized",onPlaced:A,...S}=n,E=xD(H0,t),[C,_]=x.useState(null),T=Tt(e,W=>_(W)),[R,M]=x.useState(null),k=hH(R),N=k?.width??0,P=k?.height??0,j=s+(a!=="center"?"-"+a:""),I=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},H=Array.isArray(h)?h:[h],$=H.length>0,K={padding:I,boundary:H.filter(yH),altBoundary:$},{refs:Z,floatingStyles:oe,placement:F,isPositioned:B,middlewareData:z}=tH({strategy:"fixed",placement:j,whileElementsMounted:(...W)=>q8(...W,{animationFrame:b==="always"}),elements:{reference:E.anchor},middleware:[sH({mainAxis:i+P,alignmentAxis:o}),d&&iH({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?rH():void 0,...K}),d&&aH({...K}),oH({...K,apply:({elements:W,rects:Ae,availableWidth:xe,availableHeight:je})=>{const{width:we,height:ze}=Ae.reference,se=W.floating.style;se.setProperty("--radix-popper-available-width",`${xe}px`),se.setProperty("--radix-popper-available-height",`${je}px`),se.setProperty("--radix-popper-anchor-width",`${we}px`),se.setProperty("--radix-popper-anchor-height",`${ze}px`)}}),R&&cH({element:R,padding:c}),vH({arrowWidth:N,arrowHeight:P}),y&&lH({strategy:"referenceHidden",...K})]}),[Q,me]=TD(F),L=Ti(A);On(()=>{B&&L?.()},[B,L]);const X=z.arrow?.x,te=z.arrow?.y,ce=z.arrow?.centerOffset!==0,[ye,be]=x.useState();return On(()=>{C&&be(window.getComputedStyle(C).zIndex)},[C]),g.jsx("div",{ref:Z.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:B?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ye,"--radix-popper-transform-origin":[z.transformOrigin?.x,z.transformOrigin?.y].join(" "),...z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:g.jsx(mH,{scope:t,placedSide:Q,onArrowChange:M,arrowX:X,arrowY:te,shouldHideArrow:ce,children:g.jsx(ht.div,{"data-side":Q,"data-align":me,...S,ref:T,style:{...S.style,animation:B?void 0:"none"}})})})});CD.displayName=H0;var ED="PopperArrow",gH={top:"bottom",right:"left",bottom:"top",left:"right"},_D=x.forwardRef(function(e,t){const{__scopePopper:s,...i}=e,a=pH(ED,s),o=gH[a.placedSide];return g.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:g.jsx(dH,{...i,ref:t,style:{...i.style,display:"block"}})})});_D.displayName=ED;function yH(n){return n!==null}var vH=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:s,middlewareData:i}=e,o=i.arrow?.centerOffset!==0,c=o?0:n.arrowWidth,d=o?0:n.arrowHeight,[h,f]=TD(t),p={start:"0%",center:"50%",end:"100%"}[f],y=(i.arrow?.x??0)+c/2,b=(i.arrow?.y??0)+d/2;let A="",S="";return h==="bottom"?(A=o?p:`${y}px`,S=`${-d}px`):h==="top"?(A=o?p:`${y}px`,S=`${s.floating.height+d}px`):h==="right"?(A=`${-d}px`,S=o?p:`${b}px`):h==="left"&&(A=`${s.floating.width+d}px`,S=o?p:`${b}px`),{data:{x:A,y:S}}}});function TD(n){const[e,t="center"]=n.split("-");return[e,t]}var RD=wD,DD=AD,MD=CD,ND=_D,bH="Portal",Kf=x.forwardRef((n,e)=>{const{container:t,...s}=n,[i,a]=x.useState(!1);On(()=>a(!0),[]);const o=t||i&&globalThis?.document?.body;return o?QI.createPortal(g.jsx(ht.div,{...s,ref:e}),o):null});Kf.displayName=bH;function xH(n,e){return x.useReducer((t,s)=>e[t][s]??t,n)}var ra=n=>{const{present:e,children:t}=n,s=wH(e),i=typeof t=="function"?t({present:s.isPresent}):x.Children.only(t),a=Tt(s.ref,SH(i));return typeof t=="function"||s.isPresent?x.cloneElement(i,{ref:a}):null};ra.displayName="Presence";function wH(n){const[e,t]=x.useState(),s=x.useRef(null),i=x.useRef(n),a=x.useRef("none"),o=n?"mounted":"unmounted",[c,d]=xH(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const h=Ah(s.current);a.current=c==="mounted"?h:"none"},[c]),On(()=>{const h=s.current,f=i.current;if(f!==n){const y=a.current,b=Ah(h);n?d("MOUNT"):b==="none"||h?.display==="none"?d("UNMOUNT"):d(f&&y!==b?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,d]),On(()=>{if(e){let h;const f=e.ownerDocument.defaultView??window,p=b=>{const S=Ah(s.current).includes(CSS.escape(b.animationName));if(b.target===e&&S&&(d("ANIMATION_END"),!i.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",h=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},y=b=>{b.target===e&&(a.current=Ah(s.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",p),e.addEventListener("animationend",p),()=>{f.clearTimeout(h),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",p),e.removeEventListener("animationend",p)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:x.useCallback(h=>{s.current=h?getComputedStyle(h):null,t(h)},[])}}function Ah(n){return n?.animationName||"none"}function SH(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var dy="rovingFocusGroup.onEntryFocus",AH={bubbles:!1,cancelable:!0},zu="RovingFocusGroup",[pv,PD,CH]=k0(zu),[EH,kD]=io(zu,[CH]),[_H,TH]=EH(zu),OD=x.forwardRef((n,e)=>g.jsx(pv.Provider,{scope:n.__scopeRovingFocusGroup,children:g.jsx(pv.Slot,{scope:n.__scopeRovingFocusGroup,children:g.jsx(RH,{...n,ref:e})})}));OD.displayName=zu;var RH=x.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:s,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...p}=n,y=x.useRef(null),b=Tt(e,y),A=O0(a),[S,E]=bu({prop:o,defaultProp:c??null,onChange:d,caller:zu}),[C,_]=x.useState(!1),T=Ti(h),R=PD(t),M=x.useRef(!1),[k,N]=x.useState(0);return x.useEffect(()=>{const P=y.current;if(P)return P.addEventListener(dy,T),()=>P.removeEventListener(dy,T)},[T]),g.jsx(_H,{scope:t,orientation:s,dir:A,loop:i,currentTabStopId:S,onItemFocus:x.useCallback(P=>E(P),[E]),onItemShiftTab:x.useCallback(()=>_(!0),[]),onFocusableItemAdd:x.useCallback(()=>N(P=>P+1),[]),onFocusableItemRemove:x.useCallback(()=>N(P=>P-1),[]),children:g.jsx(ht.div,{tabIndex:C||k===0?-1:0,"data-orientation":s,...p,ref:b,style:{outline:"none",...n.style},onMouseDown:Fe(n.onMouseDown,()=>{M.current=!0}),onFocus:Fe(n.onFocus,P=>{const j=!M.current;if(P.target===P.currentTarget&&j&&!C){const I=new CustomEvent(dy,AH);if(P.currentTarget.dispatchEvent(I),!I.defaultPrevented){const H=R().filter(F=>F.focusable),$=H.find(F=>F.active),K=H.find(F=>F.id===S),oe=[$,K,...H].filter(Boolean).map(F=>F.ref.current);FD(oe,f)}}M.current=!1}),onBlur:Fe(n.onBlur,()=>_(!1))})})}),jD="RovingFocusGroupItem",LD=x.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:s=!0,active:i=!1,tabStopId:a,children:o,...c}=n,d=cr(),h=a||d,f=TH(jD,t),p=f.currentTabStopId===h,y=PD(t),{onFocusableItemAdd:b,onFocusableItemRemove:A,currentTabStopId:S}=f;return x.useEffect(()=>{if(s)return b(),()=>A()},[s,b,A]),g.jsx(pv.ItemSlot,{scope:t,id:h,focusable:s,active:i,children:g.jsx(ht.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...c,ref:e,onMouseDown:Fe(n.onMouseDown,E=>{s?f.onItemFocus(h):E.preventDefault()}),onFocus:Fe(n.onFocus,()=>f.onItemFocus(h)),onKeyDown:Fe(n.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){f.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const C=NH(E,f.orientation,f.dir);if(C!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let T=y().filter(R=>R.focusable).map(R=>R.ref.current);if(C==="last")T.reverse();else if(C==="prev"||C==="next"){C==="prev"&&T.reverse();const R=T.indexOf(E.currentTarget);T=f.loop?PH(T,R+1):T.slice(R+1)}setTimeout(()=>FD(T))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:S!=null}):o})})});LD.displayName=jD;var DH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function MH(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function NH(n,e,t){const s=MH(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return DH[s]}function FD(n,e=!1){const t=document.activeElement;for(const s of n)if(s===t||(s.focus({preventScroll:e}),document.activeElement!==t))return}function PH(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var kH=OD,OH=LD;function jH(n){const e=LH(n),t=x.forwardRef((s,i)=>{const{children:a,...o}=s,c=x.Children.toArray(a),d=c.find(IH);if(d){const h=d.props.children,f=c.map(p=>p===d?x.Children.count(h)>1?x.Children.only(null):x.isValidElement(h)?h.props.children:null:p);return g.jsx(e,{...o,ref:i,children:x.isValidElement(h)?x.cloneElement(h,void 0,f):null})}return g.jsx(e,{...o,ref:i,children:a})});return t.displayName=`${n}.Slot`,t}function LH(n){const e=x.forwardRef((t,s)=>{const{children:i,...a}=t;if(x.isValidElement(i)){const o=zH(i),c=BH(a,i.props);return i.type!==x.Fragment&&(c.ref=s?Mi(s,o):o),x.cloneElement(i,c)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var FH=Symbol("radix.slottable");function IH(n){return x.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===FH}function BH(n,e){const t={...e};for(const s in e){const i=n[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?t[s]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[s]=i):s==="style"?t[s]={...i,...a}:s==="className"&&(t[s]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}function zH(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var UH=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Wo=new WeakMap,Ch=new WeakMap,Eh={},hy=0,ID=function(n){return n&&(n.host||ID(n.parentNode))},VH=function(n,e){return e.map(function(t){if(n.contains(t))return t;var s=ID(t);return s&&n.contains(s)?s:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},HH=function(n,e,t,s){var i=VH(e,Array.isArray(n)?n:[n]);Eh[t]||(Eh[t]=new WeakMap);var a=Eh[t],o=[],c=new Set,d=new Set(i),h=function(p){!p||c.has(p)||(c.add(p),h(p.parentNode))};i.forEach(h);var f=function(p){!p||d.has(p)||Array.prototype.forEach.call(p.children,function(y){if(c.has(y))f(y);else try{var b=y.getAttribute(s),A=b!==null&&b!=="false",S=(Wo.get(y)||0)+1,E=(a.get(y)||0)+1;Wo.set(y,S),a.set(y,E),o.push(y),S===1&&A&&Ch.set(y,!0),E===1&&y.setAttribute(t,"true"),A||y.setAttribute(s,"true")}catch(C){console.error("aria-hidden: cannot operate on ",y,C)}})};return f(e),c.clear(),hy++,function(){o.forEach(function(p){var y=Wo.get(p)-1,b=a.get(p)-1;Wo.set(p,y),a.set(p,b),y||(Ch.has(p)||p.removeAttribute(s),Ch.delete(p)),b||p.removeAttribute(t)}),hy--,hy||(Wo=new WeakMap,Wo=new WeakMap,Ch=new WeakMap,Eh={})}},$0=function(n,e,t){t===void 0&&(t="data-aria-hidden");var s=Array.from(Array.isArray(n)?n:[n]),i=UH(n);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live], script"))),HH(s,i,t,"aria-hidden")):function(){return null}},xi=function(){return xi=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++){t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},xi.apply(this,arguments)};function BD(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t}function $H(n,e,t){if(t||arguments.length===2)for(var s=0,i=e.length,a;s<i;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return n.concat(a||Array.prototype.slice.call(e))}var Gh="right-scroll-bar-position",Kh="width-before-scroll-bar",qH="with-scroll-bars-hidden",GH="--removed-body-scroll-bar-size";function fy(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function KH(n,e){var t=x.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(s){var i=t.value;i!==s&&(t.value=s,t.callback(s,i))}}}})[0];return t.callback=e,t.facade}var YH=typeof window<"u"?x.useLayoutEffect:x.useEffect,mE=new WeakMap;function XH(n,e){var t=KH(null,function(s){return n.forEach(function(i){return fy(i,s)})});return YH(function(){var s=mE.get(t);if(s){var i=new Set(s),a=new Set(n),o=t.current;i.forEach(function(c){a.has(c)||fy(c,null)}),a.forEach(function(c){i.has(c)||fy(c,o)})}mE.set(t,n)},[n]),t}function WH(n){return n}function QH(n,e){e===void 0&&(e=WH);var t=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(a){var o=e(a,s);return t.push(o),function(){t=t.filter(function(c){return c!==o})}},assignSyncMedium:function(a){for(s=!0;t.length;){var o=t;t=[],o.forEach(a)}t={push:function(c){return a(c)},filter:function(){return t}}},assignMedium:function(a){s=!0;var o=[];if(t.length){var c=t;t=[],c.forEach(a),o=t}var d=function(){var f=o;o=[],f.forEach(a)},h=function(){return Promise.resolve().then(d)};h(),t={push:function(f){o.push(f),h()},filter:function(f){return o=o.filter(f),t}}}};return i}function ZH(n){n===void 0&&(n={});var e=QH(null);return e.options=xi({async:!0,ssr:!1},n),e}var zD=function(n){var e=n.sideCar,t=BD(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return x.createElement(s,xi({},t))};zD.isSideCarExport=!0;function JH(n,e){return n.useMedium(e),zD}var UD=ZH(),my=function(){},Yf=x.forwardRef(function(n,e){var t=x.useRef(null),s=x.useState({onScrollCapture:my,onWheelCapture:my,onTouchMoveCapture:my}),i=s[0],a=s[1],o=n.forwardProps,c=n.children,d=n.className,h=n.removeScrollBar,f=n.enabled,p=n.shards,y=n.sideCar,b=n.noRelative,A=n.noIsolation,S=n.inert,E=n.allowPinchZoom,C=n.as,_=C===void 0?"div":C,T=n.gapMode,R=BD(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=y,k=XH([t,e]),N=xi(xi({},R),i);return x.createElement(x.Fragment,null,f&&x.createElement(M,{sideCar:UD,removeScrollBar:h,shards:p,noRelative:b,noIsolation:A,inert:S,setCallbacks:a,allowPinchZoom:!!E,lockRef:t,gapMode:T}),o?x.cloneElement(x.Children.only(c),xi(xi({},N),{ref:k})):x.createElement(_,xi({},N,{className:d,ref:k}),c))});Yf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Yf.classNames={fullWidth:Kh,zeroRight:Gh};var e$=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function t$(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=e$();return e&&n.setAttribute("nonce",e),n}function n$(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function s$(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var i$=function(){var n=0,e=null;return{add:function(t){n==0&&(e=t$())&&(n$(e,t),s$(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},r$=function(){var n=i$();return function(e,t){x.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},VD=function(){var n=r$(),e=function(t){var s=t.styles,i=t.dynamic;return n(s,i),null};return e},a$={left:0,top:0,right:0,gap:0},py=function(n){return parseInt(n||"",10)||0},o$=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],s=e[n==="padding"?"paddingTop":"marginTop"],i=e[n==="padding"?"paddingRight":"marginRight"];return[py(t),py(s),py(i)]},l$=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return a$;var e=o$(n),t=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-t+e[2]-e[0])}},c$=VD(),pl="data-scroll-locked",u$=function(n,e,t,s){var i=n.left,a=n.top,o=n.right,c=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(qH,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(c,"px ").concat(s,`;
  }
  body[`).concat(pl,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(s,`;
    `),t==="padding"&&"padding-right: ".concat(c,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Gh,` {
    right: `).concat(c,"px ").concat(s,`;
  }
  
  .`).concat(Kh,` {
    margin-right: `).concat(c,"px ").concat(s,`;
  }
  
  .`).concat(Gh," .").concat(Gh,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Kh," .").concat(Kh,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(pl,`] {
    `).concat(GH,": ").concat(c,`px;
  }
`)},pE=function(){var n=parseInt(document.body.getAttribute(pl)||"0",10);return isFinite(n)?n:0},d$=function(){x.useEffect(function(){return document.body.setAttribute(pl,(pE()+1).toString()),function(){var n=pE()-1;n<=0?document.body.removeAttribute(pl):document.body.setAttribute(pl,n.toString())}},[])},h$=function(n){var e=n.noRelative,t=n.noImportant,s=n.gapMode,i=s===void 0?"margin":s;d$();var a=x.useMemo(function(){return l$(i)},[i]);return x.createElement(c$,{styles:u$(a,!e,i,t?"":"!important")})},gv=!1;if(typeof window<"u")try{var _h=Object.defineProperty({},"passive",{get:function(){return gv=!0,!0}});window.addEventListener("test",_h,_h),window.removeEventListener("test",_h,_h)}catch{gv=!1}var Qo=gv?{passive:!1}:!1,f$=function(n){return n.tagName==="TEXTAREA"},HD=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!f$(n)&&t[e]==="visible")},m$=function(n){return HD(n,"overflowY")},p$=function(n){return HD(n,"overflowX")},gE=function(n,e){var t=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=$D(n,s);if(i){var a=qD(n,s),o=a[1],c=a[2];if(o>c)return!0}s=s.parentNode}while(s&&s!==t.body);return!1},g$=function(n){var e=n.scrollTop,t=n.scrollHeight,s=n.clientHeight;return[e,t,s]},y$=function(n){var e=n.scrollLeft,t=n.scrollWidth,s=n.clientWidth;return[e,t,s]},$D=function(n,e){return n==="v"?m$(e):p$(e)},qD=function(n,e){return n==="v"?g$(e):y$(e)},v$=function(n,e){return n==="h"&&e==="rtl"?-1:1},b$=function(n,e,t,s,i){var a=v$(n,window.getComputedStyle(e).direction),o=a*s,c=t.target,d=e.contains(c),h=!1,f=o>0,p=0,y=0;do{if(!c)break;var b=qD(n,c),A=b[0],S=b[1],E=b[2],C=S-E-a*A;(A||C)&&$D(n,c)&&(p+=C,y+=A);var _=c.parentNode;c=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!d&&c!==document.body||d&&(e.contains(c)||e===c));return(f&&Math.abs(p)<1||!f&&Math.abs(y)<1)&&(h=!0),h},Th=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},yE=function(n){return[n.deltaX,n.deltaY]},vE=function(n){return n&&"current"in n?n.current:n},x$=function(n,e){return n[0]===e[0]&&n[1]===e[1]},w$=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},S$=0,Zo=[];function A$(n){var e=x.useRef([]),t=x.useRef([0,0]),s=x.useRef(),i=x.useState(S$++)[0],a=x.useState(VD)[0],o=x.useRef(n);x.useEffect(function(){o.current=n},[n]),x.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(i));var S=$H([n.lockRef.current],(n.shards||[]).map(vE),!0).filter(Boolean);return S.forEach(function(E){return E.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),S.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(i))})}}},[n.inert,n.lockRef.current,n.shards]);var c=x.useCallback(function(S,E){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!o.current.allowPinchZoom;var C=Th(S),_=t.current,T="deltaX"in S?S.deltaX:_[0]-C[0],R="deltaY"in S?S.deltaY:_[1]-C[1],M,k=S.target,N=Math.abs(T)>Math.abs(R)?"h":"v";if("touches"in S&&N==="h"&&k.type==="range")return!1;var P=window.getSelection(),j=P&&P.anchorNode,I=j?j===k||j.contains(k):!1;if(I)return!1;var H=gE(N,k);if(!H)return!0;if(H?M=N:(M=N==="v"?"h":"v",H=gE(N,k)),!H)return!1;if(!s.current&&"changedTouches"in S&&(T||R)&&(s.current=M),!M)return!0;var $=s.current||M;return b$($,E,S,$==="h"?T:R)},[]),d=x.useCallback(function(S){var E=S;if(!(!Zo.length||Zo[Zo.length-1]!==a)){var C="deltaY"in E?yE(E):Th(E),_=e.current.filter(function(M){return M.name===E.type&&(M.target===E.target||E.target===M.shadowParent)&&x$(M.delta,C)})[0];if(_&&_.should){E.cancelable&&E.preventDefault();return}if(!_){var T=(o.current.shards||[]).map(vE).filter(Boolean).filter(function(M){return M.contains(E.target)}),R=T.length>0?c(E,T[0]):!o.current.noIsolation;R&&E.cancelable&&E.preventDefault()}}},[]),h=x.useCallback(function(S,E,C,_){var T={name:S,delta:E,target:C,should:_,shadowParent:C$(C)};e.current.push(T),setTimeout(function(){e.current=e.current.filter(function(R){return R!==T})},1)},[]),f=x.useCallback(function(S){t.current=Th(S),s.current=void 0},[]),p=x.useCallback(function(S){h(S.type,yE(S),S.target,c(S,n.lockRef.current))},[]),y=x.useCallback(function(S){h(S.type,Th(S),S.target,c(S,n.lockRef.current))},[]);x.useEffect(function(){return Zo.push(a),n.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:y}),document.addEventListener("wheel",d,Qo),document.addEventListener("touchmove",d,Qo),document.addEventListener("touchstart",f,Qo),function(){Zo=Zo.filter(function(S){return S!==a}),document.removeEventListener("wheel",d,Qo),document.removeEventListener("touchmove",d,Qo),document.removeEventListener("touchstart",f,Qo)}},[]);var b=n.removeScrollBar,A=n.inert;return x.createElement(x.Fragment,null,A?x.createElement(a,{styles:w$(i)}):null,b?x.createElement(h$,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function C$(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const E$=JH(UD,A$);var Xf=x.forwardRef(function(n,e){return x.createElement(Yf,xi({},n,{ref:e,sideCar:E$}))});Xf.classNames=Yf.classNames;var yv=["Enter"," "],_$=["ArrowDown","PageUp","Home"],GD=["ArrowUp","PageDown","End"],T$=[..._$,...GD],R$={ltr:[...yv,"ArrowRight"],rtl:[...yv,"ArrowLeft"]},D$={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Uu="Menu",[Su,M$,N$]=k0(Uu),[ro,KD]=io(Uu,[N$,Gf,kD]),Wf=Gf(),YD=kD(),[P$,ao]=ro(Uu),[k$,Vu]=ro(Uu),XD=n=>{const{__scopeMenu:e,open:t=!1,children:s,dir:i,onOpenChange:a,modal:o=!0}=n,c=Wf(e),[d,h]=x.useState(null),f=x.useRef(!1),p=Ti(a),y=O0(i);return x.useEffect(()=>{const b=()=>{f.current=!0,document.addEventListener("pointerdown",A,{capture:!0,once:!0}),document.addEventListener("pointermove",A,{capture:!0,once:!0})},A=()=>f.current=!1;return document.addEventListener("keydown",b,{capture:!0}),()=>{document.removeEventListener("keydown",b,{capture:!0}),document.removeEventListener("pointerdown",A,{capture:!0}),document.removeEventListener("pointermove",A,{capture:!0})}},[]),g.jsx(RD,{...c,children:g.jsx(P$,{scope:e,open:t,onOpenChange:p,content:d,onContentChange:h,children:g.jsx(k$,{scope:e,onClose:x.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:f,dir:y,modal:o,children:s})})})};XD.displayName=Uu;var O$="MenuAnchor",q0=x.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n,i=Wf(t);return g.jsx(DD,{...i,...s,ref:e})});q0.displayName=O$;var G0="MenuPortal",[j$,WD]=ro(G0,{forceMount:void 0}),QD=n=>{const{__scopeMenu:e,forceMount:t,children:s,container:i}=n,a=ao(G0,e);return g.jsx(j$,{scope:e,forceMount:t,children:g.jsx(ra,{present:t||a.open,children:g.jsx(Kf,{asChild:!0,container:i,children:s})})})};QD.displayName=G0;var $s="MenuContent",[L$,K0]=ro($s),ZD=x.forwardRef((n,e)=>{const t=WD($s,n.__scopeMenu),{forceMount:s=t.forceMount,...i}=n,a=ao($s,n.__scopeMenu),o=Vu($s,n.__scopeMenu);return g.jsx(Su.Provider,{scope:n.__scopeMenu,children:g.jsx(ra,{present:s||a.open,children:g.jsx(Su.Slot,{scope:n.__scopeMenu,children:o.modal?g.jsx(F$,{...i,ref:e}):g.jsx(I$,{...i,ref:e})})})})}),F$=x.forwardRef((n,e)=>{const t=ao($s,n.__scopeMenu),s=x.useRef(null),i=Tt(e,s);return x.useEffect(()=>{const a=s.current;if(a)return $0(a)},[]),g.jsx(Y0,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Fe(n.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),I$=x.forwardRef((n,e)=>{const t=ao($s,n.__scopeMenu);return g.jsx(Y0,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),B$=jH("MenuContent.ScrollLock"),Y0=x.forwardRef((n,e)=>{const{__scopeMenu:t,loop:s=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:y,onDismiss:b,disableOutsideScroll:A,...S}=n,E=ao($s,t),C=Vu($s,t),_=Wf(t),T=YD(t),R=M$(t),[M,k]=x.useState(null),N=x.useRef(null),P=Tt(e,N,E.onContentChange),j=x.useRef(0),I=x.useRef(""),H=x.useRef(0),$=x.useRef(null),K=x.useRef("right"),Z=x.useRef(0),oe=A?Xf:x.Fragment,F=A?{as:B$,allowPinchZoom:!0}:void 0,B=Q=>{const me=I.current+Q,L=R().filter(W=>!W.disabled),X=document.activeElement,te=L.find(W=>W.ref.current===X)?.textValue,ce=L.map(W=>W.textValue),ye=Q$(ce,me,te),be=L.find(W=>W.textValue===ye)?.ref.current;(function W(Ae){I.current=Ae,window.clearTimeout(j.current),Ae!==""&&(j.current=window.setTimeout(()=>W(""),1e3))})(me),be&&setTimeout(()=>be.focus())};x.useEffect(()=>()=>window.clearTimeout(j.current),[]),j0();const z=x.useCallback(Q=>K.current===$.current?.side&&J$(Q,$.current?.area),[]);return g.jsx(L$,{scope:t,searchRef:I,onItemEnter:x.useCallback(Q=>{z(Q)&&Q.preventDefault()},[z]),onItemLeave:x.useCallback(Q=>{z(Q)||(N.current?.focus(),k(null))},[z]),onTriggerLeave:x.useCallback(Q=>{z(Q)&&Q.preventDefault()},[z]),pointerGraceTimerRef:H,onPointerGraceIntentChange:x.useCallback(Q=>{$.current=Q},[]),children:g.jsx(oe,{...F,children:g.jsx(Uf,{asChild:!0,trapped:i,onMountAutoFocus:Fe(a,Q=>{Q.preventDefault(),N.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:g.jsx(zf,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:y,onDismiss:b,children:g.jsx(kH,{asChild:!0,...T,dir:C.dir,orientation:"vertical",loop:s,currentTabStopId:M,onCurrentTabStopIdChange:k,onEntryFocus:Fe(d,Q=>{C.isUsingKeyboardRef.current||Q.preventDefault()}),preventScrollOnEntryFocus:!0,children:g.jsx(MD,{role:"menu","aria-orientation":"vertical","data-state":m2(E.open),"data-radix-menu-content":"",dir:C.dir,..._,...S,ref:P,style:{outline:"none",...S.style},onKeyDown:Fe(S.onKeyDown,Q=>{const L=Q.target.closest("[data-radix-menu-content]")===Q.currentTarget,X=Q.ctrlKey||Q.altKey||Q.metaKey,te=Q.key.length===1;L&&(Q.key==="Tab"&&Q.preventDefault(),!X&&te&&B(Q.key));const ce=N.current;if(Q.target!==ce||!T$.includes(Q.key))return;Q.preventDefault();const be=R().filter(W=>!W.disabled).map(W=>W.ref.current);GD.includes(Q.key)&&be.reverse(),X$(be)}),onBlur:Fe(n.onBlur,Q=>{Q.currentTarget.contains(Q.target)||(window.clearTimeout(j.current),I.current="")}),onPointerMove:Fe(n.onPointerMove,Au(Q=>{const me=Q.target,L=Z.current!==Q.clientX;if(Q.currentTarget.contains(me)&&L){const X=Q.clientX>Z.current?"right":"left";K.current=X,Z.current=Q.clientX}}))})})})})})})});ZD.displayName=$s;var z$="MenuGroup",X0=x.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n;return g.jsx(ht.div,{role:"group",...s,ref:e})});X0.displayName=z$;var U$="MenuLabel",JD=x.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n;return g.jsx(ht.div,{...s,ref:e})});JD.displayName=U$;var yf="MenuItem",bE="menu.itemSelect",Qf=x.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:s,...i}=n,a=x.useRef(null),o=Vu(yf,n.__scopeMenu),c=K0(yf,n.__scopeMenu),d=Tt(e,a),h=x.useRef(!1),f=()=>{const p=a.current;if(!t&&p){const y=new CustomEvent(bE,{bubbles:!0,cancelable:!0});p.addEventListener(bE,b=>s?.(b),{once:!0}),sD(p,y),y.defaultPrevented?h.current=!1:o.onClose()}};return g.jsx(e2,{...i,ref:d,disabled:t,onClick:Fe(n.onClick,f),onPointerDown:p=>{n.onPointerDown?.(p),h.current=!0},onPointerUp:Fe(n.onPointerUp,p=>{h.current||p.currentTarget?.click()}),onKeyDown:Fe(n.onKeyDown,p=>{const y=c.searchRef.current!=="";t||y&&p.key===" "||yv.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});Qf.displayName=yf;var e2=x.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:s=!1,textValue:i,...a}=n,o=K0(yf,t),c=YD(t),d=x.useRef(null),h=Tt(e,d),[f,p]=x.useState(!1),[y,b]=x.useState("");return x.useEffect(()=>{const A=d.current;A&&b((A.textContent??"").trim())},[a.children]),g.jsx(Su.ItemSlot,{scope:t,disabled:s,textValue:i??y,children:g.jsx(OH,{asChild:!0,...c,focusable:!s,children:g.jsx(ht.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...a,ref:h,onPointerMove:Fe(n.onPointerMove,Au(A=>{s?o.onItemLeave(A):(o.onItemEnter(A),A.defaultPrevented||A.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Fe(n.onPointerLeave,Au(A=>o.onItemLeave(A))),onFocus:Fe(n.onFocus,()=>p(!0)),onBlur:Fe(n.onBlur,()=>p(!1))})})})}),V$="MenuCheckboxItem",t2=x.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:s,...i}=n;return g.jsx(a2,{scope:n.__scopeMenu,checked:t,children:g.jsx(Qf,{role:"menuitemcheckbox","aria-checked":vf(t)?"mixed":t,...i,ref:e,"data-state":Q0(t),onSelect:Fe(i.onSelect,()=>s?.(vf(t)?!0:!t),{checkForDefaultPrevented:!1})})})});t2.displayName=V$;var n2="MenuRadioGroup",[H$,$$]=ro(n2,{value:void 0,onValueChange:()=>{}}),s2=x.forwardRef((n,e)=>{const{value:t,onValueChange:s,...i}=n,a=Ti(s);return g.jsx(H$,{scope:n.__scopeMenu,value:t,onValueChange:a,children:g.jsx(X0,{...i,ref:e})})});s2.displayName=n2;var i2="MenuRadioItem",r2=x.forwardRef((n,e)=>{const{value:t,...s}=n,i=$$(i2,n.__scopeMenu),a=t===i.value;return g.jsx(a2,{scope:n.__scopeMenu,checked:a,children:g.jsx(Qf,{role:"menuitemradio","aria-checked":a,...s,ref:e,"data-state":Q0(a),onSelect:Fe(s.onSelect,()=>i.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});r2.displayName=i2;var W0="MenuItemIndicator",[a2,q$]=ro(W0,{checked:!1}),o2=x.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:s,...i}=n,a=q$(W0,t);return g.jsx(ra,{present:s||vf(a.checked)||a.checked===!0,children:g.jsx(ht.span,{...i,ref:e,"data-state":Q0(a.checked)})})});o2.displayName=W0;var G$="MenuSeparator",l2=x.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n;return g.jsx(ht.div,{role:"separator","aria-orientation":"horizontal",...s,ref:e})});l2.displayName=G$;var K$="MenuArrow",c2=x.forwardRef((n,e)=>{const{__scopeMenu:t,...s}=n,i=Wf(t);return g.jsx(ND,{...i,...s,ref:e})});c2.displayName=K$;var Y$="MenuSub",[mX,u2]=ro(Y$),Yc="MenuSubTrigger",d2=x.forwardRef((n,e)=>{const t=ao(Yc,n.__scopeMenu),s=Vu(Yc,n.__scopeMenu),i=u2(Yc,n.__scopeMenu),a=K0(Yc,n.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:d}=a,h={__scopeMenu:n.__scopeMenu},f=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>f,[f]),x.useEffect(()=>{const p=c.current;return()=>{window.clearTimeout(p),d(null)}},[c,d]),g.jsx(q0,{asChild:!0,...h,children:g.jsx(e2,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":m2(t.open),...n,ref:Mi(e,i.onTriggerChange),onClick:p=>{n.onClick?.(p),!(n.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Fe(n.onPointerMove,Au(p=>{a.onItemEnter(p),!p.defaultPrevented&&!n.disabled&&!t.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{t.onOpenChange(!0),f()},100))})),onPointerLeave:Fe(n.onPointerLeave,Au(p=>{f();const y=t.content?.getBoundingClientRect();if(y){const b=t.content?.dataset.side,A=b==="right",S=A?-5:5,E=y[A?"left":"right"],C=y[A?"right":"left"];a.onPointerGraceIntentChange({area:[{x:p.clientX+S,y:p.clientY},{x:E,y:y.top},{x:C,y:y.top},{x:C,y:y.bottom},{x:E,y:y.bottom}],side:b}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(p),p.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Fe(n.onKeyDown,p=>{const y=a.searchRef.current!=="";n.disabled||y&&p.key===" "||R$[s.dir].includes(p.key)&&(t.onOpenChange(!0),t.content?.focus(),p.preventDefault())})})})});d2.displayName=Yc;var h2="MenuSubContent",f2=x.forwardRef((n,e)=>{const t=WD($s,n.__scopeMenu),{forceMount:s=t.forceMount,...i}=n,a=ao($s,n.__scopeMenu),o=Vu($s,n.__scopeMenu),c=u2(h2,n.__scopeMenu),d=x.useRef(null),h=Tt(e,d);return g.jsx(Su.Provider,{scope:n.__scopeMenu,children:g.jsx(ra,{present:s||a.open,children:g.jsx(Su.Slot,{scope:n.__scopeMenu,children:g.jsx(Y0,{id:c.contentId,"aria-labelledby":c.triggerId,...i,ref:h,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{o.isUsingKeyboardRef.current&&d.current?.focus(),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Fe(n.onFocusOutside,f=>{f.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Fe(n.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Fe(n.onKeyDown,f=>{const p=f.currentTarget.contains(f.target),y=D$[o.dir].includes(f.key);p&&y&&(a.onOpenChange(!1),c.trigger?.focus(),f.preventDefault())})})})})})});f2.displayName=h2;function m2(n){return n?"open":"closed"}function vf(n){return n==="indeterminate"}function Q0(n){return vf(n)?"indeterminate":n?"checked":"unchecked"}function X$(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function W$(n,e){return n.map((t,s)=>n[(e+s)%n.length])}function Q$(n,e,t){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let o=W$(n,Math.max(a,0));i.length===1&&(o=o.filter(h=>h!==t));const d=o.find(h=>h.toLowerCase().startsWith(i.toLowerCase()));return d!==t?d:void 0}function Z$(n,e){const{x:t,y:s}=n;let i=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const c=e[a],d=e[o],h=c.x,f=c.y,p=d.x,y=d.y;f>s!=y>s&&t<(p-h)*(s-f)/(y-f)+h&&(i=!i)}return i}function J$(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return Z$(t,e)}function Au(n){return e=>e.pointerType==="mouse"?n(e):void 0}var e7=XD,t7=q0,n7=QD,s7=ZD,i7=X0,r7=JD,a7=Qf,o7=t2,l7=s2,c7=r2,u7=o2,d7=l2,h7=c2,f7=d2,m7=f2,Zf="DropdownMenu",[p7]=io(Zf,[KD]),Yn=KD(),[g7,p2]=p7(Zf),g2=n=>{const{__scopeDropdownMenu:e,children:t,dir:s,open:i,defaultOpen:a,onOpenChange:o,modal:c=!0}=n,d=Yn(e),h=x.useRef(null),[f,p]=bu({prop:i,defaultProp:a??!1,onChange:o,caller:Zf});return g.jsx(g7,{scope:e,triggerId:cr(),triggerRef:h,contentId:cr(),open:f,onOpenChange:p,onOpenToggle:x.useCallback(()=>p(y=>!y),[p]),modal:c,children:g.jsx(e7,{...d,open:f,onOpenChange:p,dir:s,modal:c,children:t})})};g2.displayName=Zf;var y2="DropdownMenuTrigger",v2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:s=!1,...i}=n,a=p2(y2,t),o=Yn(t);return g.jsx(t7,{asChild:!0,...o,children:g.jsx(ht.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...i,ref:Mi(e,a.triggerRef),onPointerDown:Fe(n.onPointerDown,c=>{!s&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:Fe(n.onKeyDown,c=>{s||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});v2.displayName=y2;var y7="DropdownMenuPortal",b2=n=>{const{__scopeDropdownMenu:e,...t}=n,s=Yn(e);return g.jsx(n7,{...s,...t})};b2.displayName=y7;var x2="DropdownMenuContent",w2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=p2(x2,t),a=Yn(t),o=x.useRef(!1);return g.jsx(s7,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...s,ref:e,onCloseAutoFocus:Fe(n.onCloseAutoFocus,c=>{o.current||i.triggerRef.current?.focus(),o.current=!1,c.preventDefault()}),onInteractOutside:Fe(n.onInteractOutside,c=>{const d=c.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,f=d.button===2||h;(!i.modal||f)&&(o.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});w2.displayName=x2;var v7="DropdownMenuGroup",b7=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Yn(t);return g.jsx(i7,{...i,...s,ref:e})});b7.displayName=v7;var x7="DropdownMenuLabel",S2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Yn(t);return g.jsx(r7,{...i,...s,ref:e})});S2.displayName=x7;var w7="DropdownMenuItem",A2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Yn(t);return g.jsx(a7,{...i,...s,ref:e})});A2.displayName=w7;var S7="DropdownMenuCheckboxItem",C2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Yn(t);return g.jsx(o7,{...i,...s,ref:e})});C2.displayName=S7;var A7="DropdownMenuRadioGroup",C7=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Yn(t);return g.jsx(l7,{...i,...s,ref:e})});C7.displayName=A7;var E7="DropdownMenuRadioItem",E2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Yn(t);return g.jsx(c7,{...i,...s,ref:e})});E2.displayName=E7;var _7="DropdownMenuItemIndicator",_2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Yn(t);return g.jsx(u7,{...i,...s,ref:e})});_2.displayName=_7;var T7="DropdownMenuSeparator",T2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Yn(t);return g.jsx(d7,{...i,...s,ref:e})});T2.displayName=T7;var R7="DropdownMenuArrow",D7=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Yn(t);return g.jsx(h7,{...i,...s,ref:e})});D7.displayName=R7;var M7="DropdownMenuSubTrigger",R2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Yn(t);return g.jsx(f7,{...i,...s,ref:e})});R2.displayName=M7;var N7="DropdownMenuSubContent",D2=x.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...s}=n,i=Yn(t);return g.jsx(m7,{...i,...s,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});D2.displayName=N7;var P7=g2,k7=v2,O7=b2,M2=w2,N2=S2,P2=A2,k2=C2,O2=E2,j2=_2,L2=T2,F2=R2,I2=D2;const j7=P7,L7=k7,F7=x.forwardRef(({className:n,inset:e,children:t,...s},i)=>g.jsxs(F2,{ref:i,className:Ze("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",n),...s,children:[t,g.jsx(QR,{className:"ml-auto"})]}));F7.displayName=F2.displayName;const I7=x.forwardRef(({className:n,...e},t)=>g.jsx(I2,{ref:t,className:Ze("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",n),...e}));I7.displayName=I2.displayName;const B2=x.forwardRef(({className:n,sideOffset:e=4,...t},s)=>g.jsx(O7,{children:g.jsx(M2,{ref:s,sideOffset:e,className:Ze("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",n),...t})}));B2.displayName=M2.displayName;const z2=x.forwardRef(({className:n,inset:e,...t},s)=>g.jsx(P2,{ref:s,className:Ze("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",n),...t}));z2.displayName=P2.displayName;const B7=x.forwardRef(({className:n,children:e,checked:t,...s},i)=>g.jsxs(k2,{ref:i,className:Ze("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...s,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(j2,{children:g.jsx(M0,{className:"h-4 w-4"})})}),e]}));B7.displayName=k2.displayName;const z7=x.forwardRef(({className:n,children:e,...t},s)=>g.jsxs(O2,{ref:s,className:Ze("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(j2,{children:g.jsx(sU,{className:"h-2 w-2 fill-current"})})}),e]}));z7.displayName=O2.displayName;const U2=x.forwardRef(({className:n,inset:e,...t},s)=>g.jsx(N2,{ref:s,className:Ze("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));U2.displayName=N2.displayName;const V2=x.forwardRef(({className:n,...e},t)=>g.jsx(L2,{ref:t,className:Ze("-mx-1 my-1 h-px bg-muted",n),...e}));V2.displayName=L2.displayName;function U7({user:n}){const{t:e}=yn(),t=yV(),s=async()=>{try{await t.mutateAsync()}catch(o){console.error("Failed to logout:",o),window.location.href="/login"}},i=o=>o&&o.split(" ").map(c=>c[0]).join("").toUpperCase().slice(0,2)||"U",a=n?.roles?.find(o=>o.startsWith("EDO"))||null;return g.jsxs("div",{className:"flex items-center gap-2",children:[a&&g.jsx(P0,{variant:a==="EDO Admin"?"default":"secondary",className:"text-xs",children:a.replace("EDO ","")}),g.jsxs(j7,{children:[g.jsx(L7,{asChild:!0,children:g.jsxs(Ye,{variant:"ghost",className:"flex items-center gap-2 h-auto py-1.5 px-2",children:[n?.user_image?g.jsx("img",{src:n.user_image,alt:n.full_name,className:"w-8 h-8 rounded-full object-cover"}):g.jsx("div",{className:"w-8 h-8 bg-primary/10 text-primary rounded-full flex items-center justify-center text-sm font-medium",children:n?i(n.full_name):g.jsx(Kc,{className:"w-4 h-4"})}),g.jsx("span",{className:"text-sm font-medium hidden md:block max-w-32 truncate",children:n?.full_name||e("common.loading")}),g.jsx(Iu,{className:"w-4 h-4 text-muted-foreground"})]})}),g.jsxs(B2,{align:"end",className:"w-56",children:[g.jsx(U2,{children:g.jsxs("div",{className:"flex flex-col space-y-1",children:[g.jsx("p",{className:"text-sm font-medium truncate",children:n?.full_name}),g.jsx("p",{className:"text-xs text-muted-foreground truncate",children:n?.email})]})}),g.jsx(V2,{}),g.jsxs(z2,{onClick:s,className:"text-red-600 focus:text-red-600 focus:bg-red-50",children:[g.jsx(RU,{className:"w-4 h-4 mr-2"}),e("common.logout")]})]})]})]})}function V7({user:n}){return g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Ye,{variant:"ghost",size:"icon",className:"h-9 w-9",children:g.jsx(Bf,{className:"w-5 h-5"})}),g.jsxs(Ye,{variant:"ghost",size:"icon",className:"h-9 w-9 relative",children:[g.jsx(Iz,{className:"w-5 h-5"}),g.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full"})]}),g.jsx(pV,{}),g.jsx("div",{className:"w-px h-8 bg-border mx-2"}),g.jsx(U7,{user:n})]})}const H2=x.createContext(void 0);function H7({children:n}){const[e,t]=x.useState(""),[s,i]=x.useState(void 0),a=x.useCallback((c,d)=>{t(c),i(d)},[]),o=x.useMemo(()=>({title:e,subtitle:s,setHeader:a}),[e,s,a]);return g.jsx(H2.Provider,{value:o,children:n})}function $2(){const n=x.useContext(H2);if(n===void 0)throw new Error("useHeader must be used within a HeaderProvider");return n}const Na={all:["users"],lists:()=>[...Na.all,"list"],list:()=>[...Na.lists()],details:()=>[...Na.all,"detail"],detail:n=>[...Na.details(),n],current:()=>[...Na.all,"current"]};function Hu(){return Gn({queryKey:Na.current(),queryFn:()=>at.getCurrentUser(),staleTime:300*1e3})}function q2(){return Gn({queryKey:Na.list(),queryFn:()=>at.getUsers(),staleTime:300*1e3})}const $7=x.memo(function(){const{title:e,subtitle:t}=$2(),{data:s}=Hu();return g.jsxs("header",{className:"h-14 border-b bg-white flex items-center justify-between px-6 shrink-0",children:[g.jsx(Dz,{title:e,subtitle:t}),g.jsx(V7,{user:s||null})]})}),G2=x.createContext(void 0);function q7({children:n}){const[e,t]=x.useState([]),s=x.useCallback(a=>{const o=Math.random().toString(36).substring(7),c={...a,id:o,duration:a.duration??5e3};t(d=>[...d,c]),c.duration&&c.duration>0&&setTimeout(()=>{i(o)},c.duration)},[]),i=x.useCallback(a=>{t(o=>o.filter(c=>c.id!==a))},[]);return g.jsxs(G2.Provider,{value:{showToast:s},children:[n,typeof document<"u"&&Nl.createPortal(g.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 w-full max-w-sm pointer-events-none",children:e.map(a=>g.jsx("div",{className:"pointer-events-auto",children:g.jsx(G7,{toast:a,onClose:()=>i(a.id)})},a.id))}),document.body)]})}function G7({toast:n,onClose:e}){const t={success:Wr,error:df,warning:eV,info:vU},s={success:"bg-green-50 border-green-200 text-green-800",error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",info:"bg-blue-50 border-blue-200 text-blue-800"},i={success:"text-green-600",error:"text-red-600",warning:"text-yellow-600",info:"text-blue-600"},a=t[n.type];return g.jsxs("div",{className:Ze("flex items-start gap-3 p-4 rounded-lg border shadow-lg transition-all duration-300 ease-in-out",s[n.type]),style:{animation:"slideInRight 0.3s ease-out"},children:[g.jsx(a,{className:Ze("w-5 h-5 shrink-0 mt-0.5",i[n.type])}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"font-medium text-sm",children:n.title}),n.message&&g.jsx("p",{className:"text-sm mt-1 opacity-90",children:n.message})]}),g.jsx("button",{onClick:e,className:"shrink-0 text-current opacity-50 hover:opacity-100 transition-opacity p-1 -m-1","aria-label":"",children:g.jsx(ar,{className:"w-4 h-4"})})]})}function K7(){const n=x.useContext(G2);if(!n)throw new Error("useToast must be used within ToastProvider");return n}const $a=x.forwardRef(({className:n,...e},t)=>g.jsx("div",{ref:t,className:Ze("rounded-lg border bg-card text-card-foreground shadow-sm",n),...e}));$a.displayName="Card";const gl=x.forwardRef(({className:n,...e},t)=>g.jsx("div",{ref:t,className:Ze("flex flex-col space-y-1.5 p-6",n),...e}));gl.displayName="CardHeader";const yl=x.forwardRef(({className:n,...e},t)=>g.jsx("h3",{ref:t,className:Ze("text-2xl font-semibold leading-none tracking-tight",n),...e}));yl.displayName="CardTitle";const Y7=x.forwardRef(({className:n,...e},t)=>g.jsx("p",{ref:t,className:Ze("text-sm text-muted-foreground",n),...e}));Y7.displayName="CardDescription";const qa=x.forwardRef(({className:n,...e},t)=>g.jsx("div",{ref:t,className:Ze("p-6 pt-0",n),...e}));qa.displayName="CardContent";const X7=x.forwardRef(({className:n,...e},t)=>g.jsx("div",{ref:t,className:Ze("flex items-center p-6 pt-0",n),...e}));X7.displayName="CardFooter";function W7({documents:n,onNavigateToDocuments:e}){const{t}=yn(),s=n.length,i=n.filter(f=>f.status===t("documents.status.pending")||f.status===" ").length,a=n.filter(f=>f.status===t("documents.status.signed")||f.status==="").length,o=n.filter(f=>f.status===t("documents.status.archived")||f.status==="").length,c=[{title:t("dashboard.stats.total"),value:s,icon:Vs,color:"text-blue-600",bgColor:"bg-blue-50"},{title:t("dashboard.stats.pending"),value:i,icon:cl,color:"text-orange-600",bgColor:"bg-orange-50"},{title:t("dashboard.stats.signed"),value:a,icon:Wr,color:"text-green-600",bgColor:"bg-green-50"},{title:t("dashboard.stats.archived"),value:o,icon:Lz,color:"text-gray-600",bgColor:"bg-gray-50"}],d=[...n].sort((f,p)=>{const y=f.creation?new Date(f.creation).getTime():0;return(p.creation?new Date(p.creation).getTime():0)-y}).slice(0,5),h=n.filter(f=>f.status===t("documents.status.pending")||f.status===" ").slice(0,5);return g.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:g.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold",children:t("dashboard.title")}),g.jsx("p",{className:"text-muted-foreground",children:t("dashboard.subtitle")})]}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:c.map(f=>g.jsx($a,{children:g.jsx(qa,{className:"p-4",children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:`p-3 rounded-lg ${f.bgColor}`,children:g.jsx(f.icon,{className:`w-6 h-6 ${f.color}`})}),g.jsxs("div",{children:[g.jsx("p",{className:"text-2xl font-bold",children:f.value}),g.jsx("p",{className:"text-sm text-muted-foreground",children:f.title})]})]})})},f.title))}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[g.jsxs($a,{children:[g.jsx(gl,{className:"pb-3",children:g.jsxs(yl,{className:"text-lg flex items-center gap-2",children:[g.jsx(cl,{className:"w-5 h-5 text-orange-500"}),t("dashboard.pendingSignatures")]})}),g.jsx(qa,{children:h.length===0?g.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:t("dashboard.noPending")}):g.jsx("div",{className:"space-y-3",children:h.map(f=>g.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg cursor-pointer hover:bg-orange-100 transition-colors",onClick:e,children:[g.jsxs("div",{className:"min-w-0 flex-1",children:[g.jsx("p",{className:"font-medium text-sm truncate",children:f.title}),g.jsx("p",{className:"text-xs text-muted-foreground",children:f.document_type})]}),g.jsx("div",{className:"text-xs text-orange-600 shrink-0 ml-2",children:t("dashboard.waiting")})]},f.name))})})]}),g.jsxs($a,{children:[g.jsx(gl,{className:"pb-3",children:g.jsxs(yl,{className:"text-lg flex items-center gap-2",children:[g.jsx(ZU,{className:"w-5 h-5 text-blue-500"}),t("dashboard.recentDocuments")]})}),g.jsx(qa,{children:d.length===0?g.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:t("dashboard.noDocuments")}):g.jsx("div",{className:"space-y-3",children:d.map(f=>g.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg cursor-pointer hover:bg-muted transition-colors",onClick:e,children:[g.jsxs("div",{className:"min-w-0 flex-1",children:[g.jsx("p",{className:"font-medium text-sm truncate",children:f.title}),g.jsx("p",{className:"text-xs text-muted-foreground",children:f.creation&&new Date(f.creation).toLocaleDateString("ru-RU")})]}),g.jsx("div",{className:`text-xs shrink-0 ml-2 px-2 py-1 rounded ${f.status===t("documents.status.signed")||f.status===""?"bg-green-100 text-green-700":f.status===t("documents.status.pending")||f.status===" "?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-700"}`,children:f.status})]},f.name))})})]})]})]})})}function Q7({onNavigateToDocuments:n}){const[e,t]=x.useState([]);return x.useEffect(()=>{(async()=>{try{const i=await at.getDocuments();t(i)}catch(i){console.error("Failed to load documents for dashboard:",i)}})()},[]),g.jsx(Xr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex-1",children:g.jsx(W7,{documents:e,onNavigateToDocuments:n})},"dashboard")}var $u=n=>n.type==="checkbox",Ia=n=>n instanceof Date,os=n=>n==null;const K2=n=>typeof n=="object";var sn=n=>!os(n)&&!Array.isArray(n)&&K2(n)&&!Ia(n),Y2=n=>sn(n)&&n.target?$u(n.target)?n.target.checked:n.target.value:n,Z7=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,X2=(n,e)=>n.has(Z7(e)),J7=n=>{const e=n.constructor&&n.constructor.prototype;return sn(e)&&e.hasOwnProperty("isPrototypeOf")},Z0=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function en(n){if(n instanceof Date)return new Date(n);const e=typeof FileList<"u"&&n instanceof FileList;if(Z0&&(n instanceof Blob||e))return n;const t=Array.isArray(n);if(!t&&!(sn(n)&&J7(n)))return n;const s=t?[]:Object.create(Object.getPrototypeOf(n));for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=en(n[i]));return s}var Jf=n=>/^\w*$/.test(n),jt=n=>n===void 0,J0=n=>Array.isArray(n)?n.filter(Boolean):[],eb=n=>J0(n.replace(/["|']|\]/g,"").split(/\.|\[/)),Ce=(n,e,t)=>{if(!e||!sn(n))return t;const s=(Jf(e)?[e]:eb(e)).reduce((i,a)=>os(i)?i:i[a],n);return jt(s)||s===n?jt(n[e])?t:n[e]:s},bs=n=>typeof n=="boolean",Vn=n=>typeof n=="function",Rt=(n,e,t)=>{let s=-1;const i=Jf(e)?[e]:eb(e),a=i.length,o=a-1;for(;++s<a;){const c=i[s];let d=t;if(s!==o){const h=n[c];d=sn(h)||Array.isArray(h)?h:isNaN(+i[s+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;n[c]=d,n=n[c]}};const bf={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ni={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ji={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},W2=He.createContext(null);W2.displayName="HookFormControlContext";const tb=()=>He.useContext(W2);var Q2=(n,e,t,s=!0)=>{const i={defaultValues:e._defaultValues};for(const a in n)Object.defineProperty(i,a,{get:()=>{const o=a;return e._proxyFormState[o]!==ni.all&&(e._proxyFormState[o]=!s||ni.all),t&&(t[o]=!0),n[o]}});return i};const nb=typeof window<"u"?He.useLayoutEffect:He.useEffect;function e9(n){const e=tb(),{control:t=e,disabled:s,name:i,exact:a}=n||{},[o,c]=He.useState(t._formState),d=He.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return nb(()=>t._subscribe({name:i,formState:d.current,exact:a,callback:h=>{!s&&c({...t._formState,...h})}}),[i,s,a]),He.useEffect(()=>{d.current.isValid&&t._setValid(!0)},[t]),He.useMemo(()=>Q2(o,t,d.current,!1),[o,t])}var Ss=n=>typeof n=="string",vv=(n,e,t,s,i)=>Ss(n)?(s&&e.watch.add(n),Ce(t,n,i)):Array.isArray(n)?n.map(a=>(s&&e.watch.add(a),Ce(t,a))):(s&&(e.watchAll=!0),t),bv=n=>os(n)||!K2(n);function si(n,e,t=new WeakSet){if(bv(n)||bv(e))return Object.is(n,e);if(Ia(n)&&Ia(e))return Object.is(n.getTime(),e.getTime());const s=Object.keys(n),i=Object.keys(e);if(s.length!==i.length)return!1;if(t.has(n)||t.has(e))return!0;t.add(n),t.add(e);for(const a of s){const o=n[a];if(!i.includes(a))return!1;if(a!=="ref"){const c=e[a];if(Ia(o)&&Ia(c)||sn(o)&&sn(c)||Array.isArray(o)&&Array.isArray(c)?!si(o,c,t):!Object.is(o,c))return!1}}return!0}function cs(n){const e=tb(),{control:t=e,name:s,defaultValue:i,disabled:a,exact:o,compute:c}=n||{},d=He.useRef(i),h=He.useRef(c),f=He.useRef(void 0),p=He.useRef(t),y=He.useRef(s);h.current=c;const[b,A]=He.useState(()=>{const R=t._getWatch(s,d.current);return h.current?h.current(R):R}),S=He.useCallback(R=>{const M=vv(s,t._names,R||t._formValues,!1,d.current);return h.current?h.current(M):M},[t._formValues,t._names,s]),E=He.useCallback(R=>{if(!a){const M=vv(s,t._names,R||t._formValues,!1,d.current);if(h.current){const k=h.current(M);si(k,f.current)||(A(k),f.current=k)}else A(M)}},[t._formValues,t._names,a,s]);nb(()=>((p.current!==t||!si(y.current,s))&&(p.current=t,y.current=s,E()),t._subscribe({name:s,formState:{values:!0},exact:o,callback:R=>{E(R.values)}})),[t,o,s,E]),He.useEffect(()=>t._removeUnmounted());const C=p.current!==t,_=y.current,T=He.useMemo(()=>{if(a)return null;const R=!C&&!si(_,s);return C||R?S():null},[a,C,s,_,S]);return T!==null?T:b}function t9(n){const e=tb(),{name:t,disabled:s,control:i=e,shouldUnregister:a,defaultValue:o,exact:c=!0}=n,d=X2(i._names.array,t),h=He.useMemo(()=>Ce(i._formValues,t,Ce(i._defaultValues,t,o)),[i,t,o]),f=cs({control:i,name:t,defaultValue:h,exact:c}),p=e9({control:i,name:t,exact:c}),y=He.useRef(n),b=He.useRef(void 0),A=He.useRef(i.register(t,{...n.rules,value:f,...bs(n.disabled)?{disabled:n.disabled}:{}}));y.current=n;const S=He.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ce(p.errors,t)},isDirty:{enumerable:!0,get:()=>!!Ce(p.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!Ce(p.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!Ce(p.validatingFields,t)},error:{enumerable:!0,get:()=>Ce(p.errors,t)}}),[p,t]),E=He.useCallback(R=>A.current.onChange({target:{value:Y2(R),name:t},type:bf.CHANGE}),[t]),C=He.useCallback(()=>A.current.onBlur({target:{value:Ce(i._formValues,t),name:t},type:bf.BLUR}),[t,i._formValues]),_=He.useCallback(R=>{const M=Ce(i._fields,t);M&&M._f&&R&&(M._f.ref={focus:()=>Vn(R.focus)&&R.focus(),select:()=>Vn(R.select)&&R.select(),setCustomValidity:k=>Vn(R.setCustomValidity)&&R.setCustomValidity(k),reportValidity:()=>Vn(R.reportValidity)&&R.reportValidity()})},[i._fields,t]),T=He.useMemo(()=>({name:t,value:f,...bs(s)||p.disabled?{disabled:p.disabled||s}:{},onChange:E,onBlur:C,ref:_}),[t,s,p.disabled,E,C,_,f]);return He.useEffect(()=>{const R=i._options.shouldUnregister||a,M=b.current;M&&M!==t&&!d&&i.unregister(M),i.register(t,{...y.current.rules,...bs(y.current.disabled)?{disabled:y.current.disabled}:{}});const k=(N,P)=>{const j=Ce(i._fields,N);j&&j._f&&(j._f.mount=P)};if(k(t,!0),R){const N=en(Ce(i._options.defaultValues,t,y.current.defaultValue));Rt(i._defaultValues,t,N),jt(Ce(i._formValues,t))&&Rt(i._formValues,t,N)}return!d&&i.register(t),b.current=t,()=>{(d?R&&!i._state.action:R)?i.unregister(t):k(t,!1)}},[t,i,d,a]),He.useEffect(()=>{i._setDisabledField({disabled:s,name:t})},[s,t,i]),He.useMemo(()=>({field:T,formState:p,fieldState:S}),[T,p,S])}const Xc=n=>n.render(t9(n)),n9=He.createContext(null);n9.displayName="HookFormContext";var s9=(n,e,t,s,i)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[s]:i||!0}}:{},au=n=>Array.isArray(n)?n:[n],xE=()=>{let n=[];return{get observers(){return n},next:i=>{for(const a of n)a.next&&a.next(i)},subscribe:i=>(n.push(i),{unsubscribe:()=>{n=n.filter(a=>a!==i)}}),unsubscribe:()=>{n=[]}}};function Z2(n,e){const t={};for(const s in n)if(n.hasOwnProperty(s)){const i=n[s],a=e[s];if(i&&sn(i)&&a){const o=Z2(i,a);sn(o)&&(t[s]=o)}else n[s]&&(t[s]=a)}return t}var Fn=n=>sn(n)&&!Object.keys(n).length,sb=n=>n.type==="file",xf=n=>{if(!Z0)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},J2=n=>n.type==="select-multiple",ib=n=>n.type==="radio",i9=n=>ib(n)||$u(n),gy=n=>xf(n)&&n.isConnected;function r9(n,e){const t=e.slice(0,-1).length;let s=0;for(;s<t;)n=jt(n)?s++:n[e[s++]];return n}function a9(n){for(const e in n)if(n.hasOwnProperty(e)&&!jt(n[e]))return!1;return!0}function tn(n,e){const t=Array.isArray(e)?e:Jf(e)?[e]:eb(e),s=t.length===1?n:r9(n,t),i=t.length-1,a=t[i];return s&&delete s[a],i!==0&&(sn(s)&&Fn(s)||Array.isArray(s)&&a9(s))&&tn(n,t.slice(0,-1)),n}var o9=n=>{for(const e in n)if(Vn(n[e]))return!0;return!1};function eM(n){return Array.isArray(n)||sn(n)&&!o9(n)}function xv(n,e={}){for(const t in n){const s=n[t];eM(s)?(e[t]=Array.isArray(s)?[]:{},xv(s,e[t])):jt(s)||(e[t]=!0)}return e}function tl(n,e,t){t||(t=xv(e));for(const s in n){const i=n[s];if(eM(i))jt(e)||bv(t[s])?t[s]=xv(i,Array.isArray(i)?[]:{}):tl(i,os(e)?{}:e[s],t[s]);else{const a=e[s];t[s]=!si(i,a)}}return t}const wE={value:!1,isValid:!1},SE={value:!0,isValid:!0};var tM=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!jt(n[0].attributes.value)?jt(n[0].value)||n[0].value===""?SE:{value:n[0].value,isValid:!0}:SE:wE}return wE},nM=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:s})=>jt(n)?n:e?n===""?NaN:n&&+n:t&&Ss(n)?new Date(n):s?s(n):n;const AE={isValid:!1,value:null};var sM=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,AE):AE;function CE(n){const e=n.ref;return sb(e)?e.files:ib(e)?sM(n.refs).value:J2(e)?[...e.selectedOptions].map(({value:t})=>t):$u(e)?tM(n.refs).value:nM(jt(e.value)?n.ref.value:e.value,n)}var l9=(n,e,t,s)=>{const i={};for(const a of n){const o=Ce(e,a);o&&Rt(i,a,o._f)}return{criteriaMode:t,names:[...n],fields:i,shouldUseNativeValidation:s}},wf=n=>n instanceof RegExp,zc=n=>jt(n)?n:wf(n)?n.source:sn(n)?wf(n.value)?n.value.source:n.value:n,EE=n=>({isOnSubmit:!n||n===ni.onSubmit,isOnBlur:n===ni.onBlur,isOnChange:n===ni.onChange,isOnAll:n===ni.all,isOnTouch:n===ni.onTouched});const _E="AsyncFunction";var c9=n=>!!n&&!!n.validate&&!!(Vn(n.validate)&&n.validate.constructor.name===_E||sn(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===_E)),u9=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),TE=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(s=>n.startsWith(s)&&/^\.\w+/.test(n.slice(s.length))));const ou=(n,e,t,s)=>{for(const i of t||Object.keys(n)){const a=Ce(n,i);if(a){const{_f:o,...c}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!s)return!0;if(o.ref&&e(o.ref,o.name)&&!s)return!0;if(ou(c,e))break}else if(sn(c)&&ou(c,e))break}}};function RE(n,e,t){const s=Ce(n,t);if(s||Jf(t))return{error:s,name:t};const i=t.split(".");for(;i.length;){const a=i.join("."),o=Ce(e,a),c=Ce(n,a);if(o&&!Array.isArray(o)&&t!==a)return{name:t};if(c&&c.type)return{name:a,error:c};if(c&&c.root&&c.root.type)return{name:`${a}.root`,error:c.root};i.pop()}return{name:t}}var d9=(n,e,t,s)=>{t(n);const{name:i,...a}=n;return Fn(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!s||ni.all))},h9=(n,e,t)=>!n||!e||n===e||au(n).some(s=>s&&(t?s===e:s.startsWith(e)||e.startsWith(s))),f9=(n,e,t,s,i)=>i.isOnAll?!1:!t&&i.isOnTouch?!(e||n):(t?s.isOnBlur:i.isOnBlur)?!n:(t?s.isOnChange:i.isOnChange)?n:!0,m9=(n,e)=>!J0(Ce(n,e)).length&&tn(n,e),p9=(n,e,t)=>{const s=au(Ce(n,t));return Rt(s,"root",e[t]),Rt(n,t,s),n};function DE(n,e,t="validate"){if(Ss(n)||Array.isArray(n)&&n.every(Ss)||bs(n)&&!n)return{type:t,message:Ss(n)?n:"",ref:e}}var Jo=n=>sn(n)&&!wf(n)?n:{value:n,message:""},ME=async(n,e,t,s,i,a)=>{const{ref:o,refs:c,required:d,maxLength:h,minLength:f,min:p,max:y,pattern:b,validate:A,name:S,valueAsNumber:E,mount:C}=n._f,_=Ce(t,S);if(!C||e.has(S))return{};const T=c?c[0]:o,R=$=>{i&&T.reportValidity&&(T.setCustomValidity(bs($)?"":$||""),T.reportValidity())},M={},k=ib(o),N=$u(o),P=k||N,j=(E||sb(o))&&jt(o.value)&&jt(_)||xf(o)&&o.value===""||_===""||Array.isArray(_)&&!_.length,I=s9.bind(null,S,s,M),H=($,K,Z,oe=Ji.maxLength,F=Ji.minLength)=>{const B=$?K:Z;M[S]={type:$?oe:F,message:B,ref:o,...I($?oe:F,B)}};if(a?!Array.isArray(_)||!_.length:d&&(!P&&(j||os(_))||bs(_)&&!_||N&&!tM(c).isValid||k&&!sM(c).isValid)){const{value:$,message:K}=Ss(d)?{value:!!d,message:d}:Jo(d);if($&&(M[S]={type:Ji.required,message:K,ref:T,...I(Ji.required,K)},!s))return R(K),M}if(!j&&(!os(p)||!os(y))){let $,K;const Z=Jo(y),oe=Jo(p);if(!os(_)&&!isNaN(_)){const F=o.valueAsNumber||_&&+_;os(Z.value)||($=F>Z.value),os(oe.value)||(K=F<oe.value)}else{const F=o.valueAsDate||new Date(_),B=me=>new Date(new Date().toDateString()+" "+me),z=o.type=="time",Q=o.type=="week";Ss(Z.value)&&_&&($=z?B(_)>B(Z.value):Q?_>Z.value:F>new Date(Z.value)),Ss(oe.value)&&_&&(K=z?B(_)<B(oe.value):Q?_<oe.value:F<new Date(oe.value))}if(($||K)&&(H(!!$,Z.message,oe.message,Ji.max,Ji.min),!s))return R(M[S].message),M}if((h||f)&&!j&&(Ss(_)||a&&Array.isArray(_))){const $=Jo(h),K=Jo(f),Z=!os($.value)&&_.length>+$.value,oe=!os(K.value)&&_.length<+K.value;if((Z||oe)&&(H(Z,$.message,K.message),!s))return R(M[S].message),M}if(b&&!j&&Ss(_)){const{value:$,message:K}=Jo(b);if(wf($)&&!_.match($)&&(M[S]={type:Ji.pattern,message:K,ref:o,...I(Ji.pattern,K)},!s))return R(K),M}if(A){if(Vn(A)){const $=await A(_,t),K=DE($,T);if(K&&(M[S]={...K,...I(Ji.validate,K.message)},!s))return R(K.message),M}else if(sn(A)){let $={};for(const K in A){if(!Fn($)&&!s)break;const Z=DE(await A[K](_,t),T,K);Z&&($={...Z,...I(K,Z.message)},R(Z.message),s&&(M[S]=$))}if(!Fn($)&&(M[S]={ref:T,...$},!s))return M}}return R(!0),M};const g9={mode:ni.onSubmit,reValidateMode:ni.onChange,shouldFocusError:!0};function y9(n={}){let e={...g9,...n},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:Vn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},s={},i=sn(e.defaultValues)||sn(e.values)?en(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:en(i),o={action:!1,mount:!1,watch:!1,keepIsValid:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,h=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},p={...f};let y={...p};const b={array:xE(),state:xE()},A=e.criteriaMode===ni.all,S=U=>G=>{clearTimeout(h),h=setTimeout(U,G)},E=async U=>{if(!o.keepIsValid&&!e.disabled&&(p.isValid||y.isValid||U)){let G;e.resolver?(G=Fn((await P()).errors),C()):G=await I(s,!0),G!==t.isValid&&b.state.next({isValid:G})}},C=(U,G)=>{!e.disabled&&(p.isValidating||p.validatingFields||y.isValidating||y.validatingFields)&&((U||Array.from(c.mount)).forEach(ie=>{ie&&(G?Rt(t.validatingFields,ie,G):tn(t.validatingFields,ie))}),b.state.next({validatingFields:t.validatingFields,isValidating:!Fn(t.validatingFields)}))},_=(U,G=[],ie,pe,ge=!0,fe=!0)=>{if(pe&&ie&&!e.disabled){if(o.action=!0,fe&&Array.isArray(Ce(s,U))){const re=ie(Ce(s,U),pe.argA,pe.argB);ge&&Rt(s,U,re)}if(fe&&Array.isArray(Ce(t.errors,U))){const re=ie(Ce(t.errors,U),pe.argA,pe.argB);ge&&Rt(t.errors,U,re),m9(t.errors,U)}if((p.touchedFields||y.touchedFields)&&fe&&Array.isArray(Ce(t.touchedFields,U))){const re=ie(Ce(t.touchedFields,U),pe.argA,pe.argB);ge&&Rt(t.touchedFields,U,re)}(p.dirtyFields||y.dirtyFields)&&(t.dirtyFields=tl(i,a)),b.state.next({name:U,isDirty:$(U,G),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Rt(a,U,G)},T=(U,G)=>{Rt(t.errors,U,G),b.state.next({errors:t.errors})},R=U=>{t.errors=U,b.state.next({errors:t.errors,isValid:!1})},M=(U,G,ie,pe)=>{const ge=Ce(s,U);if(ge){const fe=Ce(a,U,jt(ie)?Ce(i,U):ie);jt(fe)||pe&&pe.defaultChecked||G?Rt(a,U,G?fe:CE(ge._f)):oe(U,fe),o.mount&&!o.action&&E()}},k=(U,G,ie,pe,ge)=>{let fe=!1,re=!1;const Te={name:U};if(!e.disabled){if(!ie||pe){(p.isDirty||y.isDirty)&&(re=t.isDirty,t.isDirty=Te.isDirty=$(),fe=re!==Te.isDirty);const qe=si(Ce(i,U),G);re=!!Ce(t.dirtyFields,U),qe?tn(t.dirtyFields,U):Rt(t.dirtyFields,U,!0),Te.dirtyFields=t.dirtyFields,fe=fe||(p.dirtyFields||y.dirtyFields)&&re!==!qe}if(ie){const qe=Ce(t.touchedFields,U);qe||(Rt(t.touchedFields,U,ie),Te.touchedFields=t.touchedFields,fe=fe||(p.touchedFields||y.touchedFields)&&qe!==ie)}fe&&ge&&b.state.next(Te)}return fe?Te:{}},N=(U,G,ie,pe)=>{const ge=Ce(t.errors,U),fe=(p.isValid||y.isValid)&&bs(G)&&t.isValid!==G;if(e.delayError&&ie?(d=S(()=>T(U,ie)),d(e.delayError)):(clearTimeout(h),d=null,ie?Rt(t.errors,U,ie):tn(t.errors,U)),(ie?!si(ge,ie):ge)||!Fn(pe)||fe){const re={...pe,...fe&&bs(G)?{isValid:G}:{},errors:t.errors,name:U};t={...t,...re},b.state.next(re)}},P=async U=>(C(U,!0),await e.resolver(a,e.context,l9(U||c.mount,s,e.criteriaMode,e.shouldUseNativeValidation))),j=async U=>{const{errors:G}=await P(U);if(C(U),U)for(const ie of U){const pe=Ce(G,ie);pe?Rt(t.errors,ie,pe):tn(t.errors,ie)}else t.errors=G;return G},I=async(U,G,ie={valid:!0})=>{for(const pe in U){const ge=U[pe];if(ge){const{_f:fe,...re}=ge;if(fe){const Te=c.array.has(fe.name),qe=ge._f&&c9(ge._f);qe&&p.validatingFields&&C([fe.name],!0);const yt=await ME(ge,c.disabled,a,A,e.shouldUseNativeValidation&&!G,Te);if(qe&&p.validatingFields&&C([fe.name]),yt[fe.name]&&(ie.valid=!1,G||n.shouldUseNativeValidation))break;!G&&(Ce(yt,fe.name)?Te?p9(t.errors,yt,fe.name):Rt(t.errors,fe.name,yt[fe.name]):tn(t.errors,fe.name))}!Fn(re)&&await I(re,G,ie)}}return ie.valid},H=()=>{for(const U of c.unMount){const G=Ce(s,U);G&&(G._f.refs?G._f.refs.every(ie=>!gy(ie)):!gy(G._f.ref))&&Ae(U)}c.unMount=new Set},$=(U,G)=>!e.disabled&&(U&&G&&Rt(a,U,G),!si(L(),i)),K=(U,G,ie)=>vv(U,c,{...o.mount?a:jt(G)?i:Ss(U)?{[U]:G}:G},ie,G),Z=U=>J0(Ce(o.mount?a:i,U,e.shouldUnregister?Ce(i,U,[]):[])),oe=(U,G,ie={})=>{const pe=Ce(s,U);let ge=G;if(pe){const fe=pe._f;fe&&(!fe.disabled&&Rt(a,U,nM(G,fe)),ge=xf(fe.ref)&&os(G)?"":G,J2(fe.ref)?[...fe.ref.options].forEach(re=>re.selected=ge.includes(re.value)):fe.refs?$u(fe.ref)?fe.refs.forEach(re=>{(!re.defaultChecked||!re.disabled)&&(Array.isArray(ge)?re.checked=!!ge.find(Te=>Te===re.value):re.checked=ge===re.value||!!ge)}):fe.refs.forEach(re=>re.checked=re.value===ge):sb(fe.ref)?fe.ref.value="":(fe.ref.value=ge,fe.ref.type||b.state.next({name:U,values:en(a)})))}(ie.shouldDirty||ie.shouldTouch)&&k(U,ge,ie.shouldTouch,ie.shouldDirty,!0),ie.shouldValidate&&me(U)},F=(U,G,ie)=>{for(const pe in G){if(!G.hasOwnProperty(pe))return;const ge=G[pe],fe=U+"."+pe,re=Ce(s,fe);(c.array.has(U)||sn(ge)||re&&!re._f)&&!Ia(ge)?F(fe,ge,ie):oe(fe,ge,ie)}},B=(U,G,ie={})=>{const pe=Ce(s,U),ge=c.array.has(U),fe=en(G);Rt(a,U,fe),ge?(b.array.next({name:U,values:en(a)}),(p.isDirty||p.dirtyFields||y.isDirty||y.dirtyFields)&&ie.shouldDirty&&b.state.next({name:U,dirtyFields:tl(i,a),isDirty:$(U,fe)})):pe&&!pe._f&&!os(fe)?F(U,fe,ie):oe(U,fe,ie),TE(U,c)?b.state.next({...t,name:U,values:en(a)}):b.state.next({name:o.mount?U:void 0,values:en(a)})},z=async U=>{o.mount=!0;const G=U.target;let ie=G.name,pe=!0;const ge=Ce(s,ie),fe=qe=>{pe=Number.isNaN(qe)||Ia(qe)&&isNaN(qe.getTime())||si(qe,Ce(a,ie,qe))},re=EE(e.mode),Te=EE(e.reValidateMode);if(ge){let qe,yt;const jn=G.type?CE(ge._f):Y2(U),Es=U.type===bf.BLUR||U.type===bf.FOCUS_OUT,Pi=!u9(ge._f)&&!e.resolver&&!Ce(t.errors,ie)&&!ge._f.deps||f9(Es,Ce(t.touchedFields,ie),t.isSubmitted,Te,re),rn=TE(ie,c,Es);Rt(a,ie,jn),Es?(!G||!G.readOnly)&&(ge._f.onBlur&&ge._f.onBlur(U),d&&d(0)):ge._f.onChange&&ge._f.onChange(U);const Xn=k(ie,jn,Es),vn=!Fn(Xn)||rn;if(!Es&&b.state.next({name:ie,type:U.type,values:en(a)}),Pi)return(p.isValid||y.isValid)&&(e.mode==="onBlur"?Es&&E():Es||E()),vn&&b.state.next({name:ie,...rn?{}:Xn});if(!Es&&rn&&b.state.next({...t}),e.resolver){const{errors:la}=await P([ie]);if(C([ie]),fe(jn),pe){const _e=RE(t.errors,s,ie),Yt=RE(la,s,_e.name||ie);qe=Yt.error,ie=Yt.name,yt=Fn(la)}}else C([ie],!0),qe=(await ME(ge,c.disabled,a,A,e.shouldUseNativeValidation))[ie],C([ie]),fe(jn),pe&&(qe?yt=!1:(p.isValid||y.isValid)&&(yt=await I(s,!0)));pe&&(ge._f.deps&&(!Array.isArray(ge._f.deps)||ge._f.deps.length>0)&&me(ge._f.deps),N(ie,yt,qe,Xn))}},Q=(U,G)=>{if(Ce(t.errors,G)&&U.focus)return U.focus(),1},me=async(U,G={})=>{let ie,pe;const ge=au(U);if(e.resolver){const fe=await j(jt(U)?U:ge);ie=Fn(fe),pe=U?!ge.some(re=>Ce(fe,re)):ie}else U?(pe=(await Promise.all(ge.map(async fe=>{const re=Ce(s,fe);return await I(re&&re._f?{[fe]:re}:re)}))).every(Boolean),!(!pe&&!t.isValid)&&E()):pe=ie=await I(s);return b.state.next({...!Ss(U)||(p.isValid||y.isValid)&&ie!==t.isValid?{}:{name:U},...e.resolver||!U?{isValid:ie}:{},errors:t.errors}),G.shouldFocus&&!pe&&ou(s,Q,U?ge:c.mount),pe},L=(U,G)=>{let ie={...o.mount?a:i};return G&&(ie=Z2(G.dirtyFields?t.dirtyFields:t.touchedFields,ie)),jt(U)?ie:Ss(U)?Ce(ie,U):U.map(pe=>Ce(ie,pe))},X=(U,G)=>({invalid:!!Ce((G||t).errors,U),isDirty:!!Ce((G||t).dirtyFields,U),error:Ce((G||t).errors,U),isValidating:!!Ce(t.validatingFields,U),isTouched:!!Ce((G||t).touchedFields,U)}),te=U=>{U&&au(U).forEach(G=>tn(t.errors,G)),b.state.next({errors:U?t.errors:{}})},ce=(U,G,ie)=>{const pe=(Ce(s,U,{_f:{}})._f||{}).ref,ge=Ce(t.errors,U)||{},{ref:fe,message:re,type:Te,...qe}=ge;Rt(t.errors,U,{...qe,...G,ref:pe}),b.state.next({name:U,errors:t.errors,isValid:!1}),ie&&ie.shouldFocus&&pe&&pe.focus&&pe.focus()},ye=(U,G)=>Vn(U)?b.state.subscribe({next:ie=>"values"in ie&&U(K(void 0,G),ie)}):K(U,G,!0),be=U=>b.state.subscribe({next:G=>{h9(U.name,G.name,U.exact)&&d9(G,U.formState||p,Ne,U.reRenderRoot)&&U.callback({values:{...a},...t,...G,defaultValues:i})}}).unsubscribe,W=U=>(o.mount=!0,y={...y,...U.formState},be({...U,formState:{...f,...U.formState}})),Ae=(U,G={})=>{for(const ie of U?au(U):c.mount)c.mount.delete(ie),c.array.delete(ie),G.keepValue||(tn(s,ie),tn(a,ie)),!G.keepError&&tn(t.errors,ie),!G.keepDirty&&tn(t.dirtyFields,ie),!G.keepTouched&&tn(t.touchedFields,ie),!G.keepIsValidating&&tn(t.validatingFields,ie),!e.shouldUnregister&&!G.keepDefaultValue&&tn(i,ie);b.state.next({values:en(a)}),b.state.next({...t,...G.keepDirty?{isDirty:$()}:{}}),!G.keepIsValid&&E()},xe=({disabled:U,name:G})=>{if(bs(U)&&o.mount||U||c.disabled.has(G)){const ge=c.disabled.has(G)!==!!U;U?c.disabled.add(G):c.disabled.delete(G),ge&&o.mount&&!o.action&&E()}},je=(U,G={})=>{let ie=Ce(s,U);const pe=bs(G.disabled)||bs(e.disabled);return Rt(s,U,{...ie||{},_f:{...ie&&ie._f?ie._f:{ref:{name:U}},name:U,mount:!0,...G}}),c.mount.add(U),ie?xe({disabled:bs(G.disabled)?G.disabled:e.disabled,name:U}):M(U,!0,G.value),{...pe?{disabled:G.disabled||e.disabled}:{},...e.progressive?{required:!!G.required,min:zc(G.min),max:zc(G.max),minLength:zc(G.minLength),maxLength:zc(G.maxLength),pattern:zc(G.pattern)}:{},name:U,onChange:z,onBlur:z,ref:ge=>{if(ge){je(U,G),ie=Ce(s,U);const fe=jt(ge.value)&&ge.querySelectorAll&&ge.querySelectorAll("input,select,textarea")[0]||ge,re=i9(fe),Te=ie._f.refs||[];if(re?Te.find(qe=>qe===fe):fe===ie._f.ref)return;Rt(s,U,{_f:{...ie._f,...re?{refs:[...Te.filter(gy),fe,...Array.isArray(Ce(i,U))?[{}]:[]],ref:{type:fe.type,name:U}}:{ref:fe}}}),M(U,!1,void 0,fe)}else ie=Ce(s,U,{}),ie._f&&(ie._f.mount=!1),(e.shouldUnregister||G.shouldUnregister)&&!(X2(c.array,U)&&o.action)&&c.unMount.add(U)}}},we=()=>e.shouldFocusError&&ou(s,Q,c.mount),ze=U=>{bs(U)&&(b.state.next({disabled:U}),ou(s,(G,ie)=>{const pe=Ce(s,ie);pe&&(G.disabled=pe._f.disabled||U,Array.isArray(pe._f.refs)&&pe._f.refs.forEach(ge=>{ge.disabled=pe._f.disabled||U}))},0,!1))},se=(U,G)=>async ie=>{let pe;ie&&(ie.preventDefault&&ie.preventDefault(),ie.persist&&ie.persist());let ge=en(a);if(b.state.next({isSubmitting:!0}),e.resolver){const{errors:fe,values:re}=await P();C(),t.errors=fe,ge=en(re)}else await I(s);if(c.disabled.size)for(const fe of c.disabled)tn(ge,fe);if(tn(t.errors,"root"),Fn(t.errors)){b.state.next({errors:{}});try{await U(ge,ie)}catch(fe){pe=fe}}else G&&await G({...t.errors},ie),we(),setTimeout(we);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Fn(t.errors)&&!pe,submitCount:t.submitCount+1,errors:t.errors}),pe)throw pe},he=(U,G={})=>{Ce(s,U)&&(jt(G.defaultValue)?B(U,en(Ce(i,U))):(B(U,G.defaultValue),Rt(i,U,en(G.defaultValue))),G.keepTouched||tn(t.touchedFields,U),G.keepDirty||(tn(t.dirtyFields,U),t.isDirty=G.defaultValue?$(U,en(Ce(i,U))):$()),G.keepError||(tn(t.errors,U),p.isValid&&E()),b.state.next({...t}))},ve=(U,G={})=>{const ie=U?en(U):i,pe=en(ie),ge=Fn(U),fe=ge?i:pe;if(G.keepDefaultValues||(i=ie),!G.keepValues){if(G.keepDirtyValues){const re=new Set([...c.mount,...Object.keys(tl(i,a))]);for(const Te of Array.from(re)){const qe=Ce(t.dirtyFields,Te),yt=Ce(a,Te),jn=Ce(fe,Te);qe&&!jt(yt)?Rt(fe,Te,yt):!qe&&!jt(jn)&&B(Te,jn)}}else{if(Z0&&jt(U))for(const re of c.mount){const Te=Ce(s,re);if(Te&&Te._f){const qe=Array.isArray(Te._f.refs)?Te._f.refs[0]:Te._f.ref;if(xf(qe)){const yt=qe.closest("form");if(yt){yt.reset();break}}}}if(G.keepFieldsRef)for(const re of c.mount)B(re,Ce(fe,re));else s={}}a=e.shouldUnregister?G.keepDefaultValues?en(i):{}:en(fe),b.array.next({values:{...fe}}),b.state.next({values:{...fe}})}c={mount:G.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!p.isValid||!!G.keepIsValid||!!G.keepDirtyValues||!e.shouldUnregister&&!Fn(fe),o.watch=!!e.shouldUnregister,o.keepIsValid=!!G.keepIsValid,o.action=!1,G.keepErrors||(t.errors={}),b.state.next({submitCount:G.keepSubmitCount?t.submitCount:0,isDirty:ge?!1:G.keepDirty?t.isDirty:!!(G.keepDefaultValues&&!si(U,i)),isSubmitted:G.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:ge?{}:G.keepDirtyValues?G.keepDefaultValues&&a?tl(i,a):t.dirtyFields:G.keepDefaultValues&&U?tl(i,U):G.keepDirty?t.dirtyFields:{},touchedFields:G.keepTouched?t.touchedFields:{},errors:G.keepErrors?t.errors:{},isSubmitSuccessful:G.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Se=(U,G)=>ve(Vn(U)?U(a):U,{...e.resetOptions,...G}),Ee=(U,G={})=>{const ie=Ce(s,U),pe=ie&&ie._f;if(pe){const ge=pe.refs?pe.refs[0]:pe.ref;ge.focus&&setTimeout(()=>{ge.focus(),G.shouldSelect&&Vn(ge.select)&&ge.select()})}},Ne=U=>{t={...t,...U}},Ke={control:{register:je,unregister:Ae,getFieldState:X,handleSubmit:se,setError:ce,_subscribe:be,_runSchema:P,_updateIsValidating:C,_focusError:we,_getWatch:K,_getDirty:$,_setValid:E,_setFieldArray:_,_setDisabledField:xe,_setErrors:R,_getFieldArray:Z,_reset:ve,_resetDefaultValues:()=>Vn(e.defaultValues)&&e.defaultValues().then(U=>{Se(U,e.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:H,_disableForm:ze,_subjects:b,_proxyFormState:p,get _fields(){return s},get _formValues(){return a},get _state(){return o},set _state(U){o=U},get _defaultValues(){return i},get _names(){return c},set _names(U){c=U},get _formState(){return t},get _options(){return e},set _options(U){e={...e,...U}}},subscribe:W,trigger:me,register:je,handleSubmit:se,watch:ye,setValue:B,getValues:L,reset:Se,resetField:he,clearErrors:te,unregister:Ae,setError:ce,setFocus:Ee,getFieldState:X};return{...Ke,formControl:Ke}}function v9(n={}){const e=He.useRef(void 0),t=He.useRef(void 0),[s,i]=He.useState({isDirty:!1,isValidating:!1,isLoading:Vn(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,isReady:!1,defaultValues:Vn(n.defaultValues)?void 0:n.defaultValues});if(!e.current)if(n.formControl)e.current={...n.formControl,formState:s},n.defaultValues&&!Vn(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions);else{const{formControl:o,...c}=y9(n);e.current={...c,formState:s}}const a=e.current.control;return a._options=n,nb(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(c=>({...c,isReady:!0})),a._formState.isReady=!0,o},[a]),He.useEffect(()=>a._disableForm(n.disabled),[a,n.disabled]),He.useEffect(()=>{n.mode&&(a._options.mode=n.mode),n.reValidateMode&&(a._options.reValidateMode=n.reValidateMode)},[a,n.mode,n.reValidateMode]),He.useEffect(()=>{n.errors&&(a._setErrors(n.errors),a._focusError())},[a,n.errors]),He.useEffect(()=>{n.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,n.shouldUnregister]),He.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==s.isDirty&&a._subjects.state.next({isDirty:o})}},[a,s.isDirty]),He.useEffect(()=>{var o;n.values&&!si(n.values,t.current)?(a._reset(n.values,{keepFieldsRef:!0,...a._options.resetOptions}),!((o=a._options.resetOptions)===null||o===void 0)&&o.keepIsValid||a._setValid(),t.current=n.values,i(c=>({...c}))):a._resetDefaultValues()},[a,n.values]),He.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=He.useMemo(()=>Q2(s,a),[a,s]),e.current}function nl({className:n,...e}){return g.jsx("div",{className:Ze("animate-pulse rounded-md bg-muted",n),...e})}const _n={all:["references"],documentTypes:()=>[..._n.all,"documentTypes"],correspondents:()=>[..._n.all,"correspondents"],priorities:()=>[..._n.all,"priorities"],statuses:()=>[..._n.all,"statuses"],classifications:()=>[..._n.all,"classifications"],deliveryMethods:()=>[..._n.all,"deliveryMethods"],resolutions:()=>[..._n.all,"resolutions"],receptionOffices:()=>[..._n.all,"receptionOffices"]};function iM(){return Gn({queryKey:_n.documentTypes(),queryFn:()=>at.getDocumentTypes(),staleTime:600*1e3})}function rM(){return Gn({queryKey:_n.correspondents(),queryFn:()=>at.getCorrespondents(),staleTime:600*1e3})}function aM(){return Gn({queryKey:_n.priorities(),queryFn:()=>at.getPriorities(),staleTime:600*1e3})}function b9(){return Gn({queryKey:_n.statuses(),queryFn:()=>at.getStatuses(),staleTime:600*1e3})}function x9(){return Gn({queryKey:_n.classifications(),queryFn:()=>at.getClassifications(),staleTime:600*1e3})}function w9(){return Gn({queryKey:_n.deliveryMethods(),queryFn:()=>at.getDeliveryMethods(),staleTime:600*1e3})}function S9(){return Gn({queryKey:_n.resolutions(),queryFn:()=>at.getResolutions(),staleTime:600*1e3})}function A9(){return Gn({queryKey:_n.receptionOffices(),queryFn:()=>at.getReceptionOffices(),staleTime:600*1e3})}function NE(n,[e,t]){return Math.min(t,Math.max(e,n))}function C9(n){const e=E9(n),t=x.forwardRef((s,i)=>{const{children:a,...o}=s,c=x.Children.toArray(a),d=c.find(T9);if(d){const h=d.props.children,f=c.map(p=>p===d?x.Children.count(h)>1?x.Children.only(null):x.isValidElement(h)?h.props.children:null:p);return g.jsx(e,{...o,ref:i,children:x.isValidElement(h)?x.cloneElement(h,void 0,f):null})}return g.jsx(e,{...o,ref:i,children:a})});return t.displayName=`${n}.Slot`,t}function E9(n){const e=x.forwardRef((t,s)=>{const{children:i,...a}=t;if(x.isValidElement(i)){const o=D9(i),c=R9(a,i.props);return i.type!==x.Fragment&&(c.ref=s?Mi(s,o):o),x.cloneElement(i,c)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var _9=Symbol("radix.slottable");function T9(n){return x.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===_9}function R9(n,e){const t={...e};for(const s in e){const i=n[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?t[s]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[s]=i):s==="style"?t[s]={...i,...a}:s==="className"&&(t[s]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}function D9(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function M9(n){const e=x.useRef({value:n,previous:n});return x.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var oM=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),N9="VisuallyHidden",P9=x.forwardRef((n,e)=>g.jsx(ht.span,{...n,ref:e,style:{...oM,...n.style}}));P9.displayName=N9;var k9=[" ","Enter","ArrowUp","ArrowDown"],O9=[" ","Enter"],Wa="Select",[em,tm,j9]=k0(Wa),[zl]=io(Wa,[j9,Gf]),nm=Gf(),[L9,aa]=zl(Wa),[F9,I9]=zl(Wa),lM=n=>{const{__scopeSelect:e,children:t,open:s,defaultOpen:i,onOpenChange:a,value:o,defaultValue:c,onValueChange:d,dir:h,name:f,autoComplete:p,disabled:y,required:b,form:A}=n,S=nm(e),[E,C]=x.useState(null),[_,T]=x.useState(null),[R,M]=x.useState(!1),k=O0(h),[N,P]=bu({prop:s,defaultProp:i??!1,onChange:a,caller:Wa}),[j,I]=bu({prop:o,defaultProp:c,onChange:d,caller:Wa}),H=x.useRef(null),$=E?A||!!E.closest("form"):!0,[K,Z]=x.useState(new Set),oe=Array.from(K).map(F=>F.props.value).join(";");return g.jsx(RD,{...S,children:g.jsxs(L9,{required:b,scope:e,trigger:E,onTriggerChange:C,valueNode:_,onValueNodeChange:T,valueNodeHasChildren:R,onValueNodeHasChildrenChange:M,contentId:cr(),value:j,onValueChange:I,open:N,onOpenChange:P,dir:k,triggerPointerDownPosRef:H,disabled:y,children:[g.jsx(em.Provider,{scope:e,children:g.jsx(F9,{scope:n.__scopeSelect,onNativeOptionAdd:x.useCallback(F=>{Z(B=>new Set(B).add(F))},[]),onNativeOptionRemove:x.useCallback(F=>{Z(B=>{const z=new Set(B);return z.delete(F),z})},[]),children:t})}),$?g.jsxs(PM,{"aria-hidden":!0,required:b,tabIndex:-1,name:f,autoComplete:p,value:j,onChange:F=>I(F.target.value),disabled:y,form:A,children:[j===void 0?g.jsx("option",{value:""}):null,Array.from(K)]},oe):null]})})};lM.displayName=Wa;var cM="SelectTrigger",uM=x.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:s=!1,...i}=n,a=nm(t),o=aa(cM,t),c=o.disabled||s,d=Tt(e,o.onTriggerChange),h=tm(t),f=x.useRef("touch"),[p,y,b]=OM(S=>{const E=h().filter(T=>!T.disabled),C=E.find(T=>T.value===o.value),_=jM(E,S,C);_!==void 0&&o.onValueChange(_.value)}),A=S=>{c||(o.onOpenChange(!0),b()),S&&(o.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)})};return g.jsx(DD,{asChild:!0,...a,children:g.jsx(ht.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":kM(o.value)?"":void 0,...i,ref:d,onClick:Fe(i.onClick,S=>{S.currentTarget.focus(),f.current!=="mouse"&&A(S)}),onPointerDown:Fe(i.onPointerDown,S=>{f.current=S.pointerType;const E=S.target;E.hasPointerCapture(S.pointerId)&&E.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&S.pointerType==="mouse"&&(A(S),S.preventDefault())}),onKeyDown:Fe(i.onKeyDown,S=>{const E=p.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&y(S.key),!(E&&S.key===" ")&&k9.includes(S.key)&&(A(),S.preventDefault())})})})});uM.displayName=cM;var dM="SelectValue",hM=x.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:i,children:a,placeholder:o="",...c}=n,d=aa(dM,t),{onValueNodeHasChildrenChange:h}=d,f=a!==void 0,p=Tt(e,d.onValueNodeChange);return On(()=>{h(f)},[h,f]),g.jsx(ht.span,{...c,ref:p,style:{pointerEvents:"none"},children:kM(d.value)?g.jsx(g.Fragment,{children:o}):a})});hM.displayName=dM;var B9="SelectIcon",fM=x.forwardRef((n,e)=>{const{__scopeSelect:t,children:s,...i}=n;return g.jsx(ht.span,{"aria-hidden":!0,...i,ref:e,children:s||""})});fM.displayName=B9;var z9="SelectPortal",mM=n=>g.jsx(Kf,{asChild:!0,...n});mM.displayName=z9;var Qa="SelectContent",pM=x.forwardRef((n,e)=>{const t=aa(Qa,n.__scopeSelect),[s,i]=x.useState();if(On(()=>{i(new DocumentFragment)},[]),!t.open){const a=s;return a?Nl.createPortal(g.jsx(gM,{scope:n.__scopeSelect,children:g.jsx(em.Slot,{scope:n.__scopeSelect,children:g.jsx("div",{children:n.children})})}),a):null}return g.jsx(yM,{...n,ref:e})});pM.displayName=Qa;var ei=10,[gM,oa]=zl(Qa),U9="SelectContentImpl",V9=C9("SelectContent.RemoveScroll"),yM=x.forwardRef((n,e)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:c,sideOffset:d,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:y,collisionPadding:b,sticky:A,hideWhenDetached:S,avoidCollisions:E,...C}=n,_=aa(Qa,t),[T,R]=x.useState(null),[M,k]=x.useState(null),N=Tt(e,W=>R(W)),[P,j]=x.useState(null),[I,H]=x.useState(null),$=tm(t),[K,Z]=x.useState(!1),oe=x.useRef(!1);x.useEffect(()=>{if(T)return $0(T)},[T]),j0();const F=x.useCallback(W=>{const[Ae,...xe]=$().map(ze=>ze.ref.current),[je]=xe.slice(-1),we=document.activeElement;for(const ze of W)if(ze===we||(ze?.scrollIntoView({block:"nearest"}),ze===Ae&&M&&(M.scrollTop=0),ze===je&&M&&(M.scrollTop=M.scrollHeight),ze?.focus(),document.activeElement!==we))return},[$,M]),B=x.useCallback(()=>F([P,T]),[F,P,T]);x.useEffect(()=>{K&&B()},[K,B]);const{onOpenChange:z,triggerPointerDownPosRef:Q}=_;x.useEffect(()=>{if(T){let W={x:0,y:0};const Ae=je=>{W={x:Math.abs(Math.round(je.pageX)-(Q.current?.x??0)),y:Math.abs(Math.round(je.pageY)-(Q.current?.y??0))}},xe=je=>{W.x<=10&&W.y<=10?je.preventDefault():T.contains(je.target)||z(!1),document.removeEventListener("pointermove",Ae),Q.current=null};return Q.current!==null&&(document.addEventListener("pointermove",Ae),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ae),document.removeEventListener("pointerup",xe,{capture:!0})}}},[T,z,Q]),x.useEffect(()=>{const W=()=>z(!1);return window.addEventListener("blur",W),window.addEventListener("resize",W),()=>{window.removeEventListener("blur",W),window.removeEventListener("resize",W)}},[z]);const[me,L]=OM(W=>{const Ae=$().filter(we=>!we.disabled),xe=Ae.find(we=>we.ref.current===document.activeElement),je=jM(Ae,W,xe);je&&setTimeout(()=>je.ref.current.focus())}),X=x.useCallback((W,Ae,xe)=>{const je=!oe.current&&!xe;(_.value!==void 0&&_.value===Ae||je)&&(j(W),je&&(oe.current=!0))},[_.value]),te=x.useCallback(()=>T?.focus(),[T]),ce=x.useCallback((W,Ae,xe)=>{const je=!oe.current&&!xe;(_.value!==void 0&&_.value===Ae||je)&&H(W)},[_.value]),ye=s==="popper"?wv:vM,be=ye===wv?{side:c,sideOffset:d,align:h,alignOffset:f,arrowPadding:p,collisionBoundary:y,collisionPadding:b,sticky:A,hideWhenDetached:S,avoidCollisions:E}:{};return g.jsx(gM,{scope:t,content:T,viewport:M,onViewportChange:k,itemRefCallback:X,selectedItem:P,onItemLeave:te,itemTextRefCallback:ce,focusSelectedItem:B,selectedItemText:I,position:s,isPositioned:K,searchRef:me,children:g.jsx(Xf,{as:V9,allowPinchZoom:!0,children:g.jsx(Uf,{asChild:!0,trapped:_.open,onMountAutoFocus:W=>{W.preventDefault()},onUnmountAutoFocus:Fe(i,W=>{_.trigger?.focus({preventScroll:!0}),W.preventDefault()}),children:g.jsx(zf,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:W=>W.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:g.jsx(ye,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:W=>W.preventDefault(),...C,...be,onPlaced:()=>Z(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:Fe(C.onKeyDown,W=>{const Ae=W.ctrlKey||W.altKey||W.metaKey;if(W.key==="Tab"&&W.preventDefault(),!Ae&&W.key.length===1&&L(W.key),["ArrowUp","ArrowDown","Home","End"].includes(W.key)){let je=$().filter(we=>!we.disabled).map(we=>we.ref.current);if(["ArrowUp","End"].includes(W.key)&&(je=je.slice().reverse()),["ArrowUp","ArrowDown"].includes(W.key)){const we=W.target,ze=je.indexOf(we);je=je.slice(ze+1)}setTimeout(()=>F(je)),W.preventDefault()}})})})})})})});yM.displayName=U9;var H9="SelectItemAlignedPosition",vM=x.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:s,...i}=n,a=aa(Qa,t),o=oa(Qa,t),[c,d]=x.useState(null),[h,f]=x.useState(null),p=Tt(e,N=>f(N)),y=tm(t),b=x.useRef(!1),A=x.useRef(!0),{viewport:S,selectedItem:E,selectedItemText:C,focusSelectedItem:_}=o,T=x.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&h&&S&&E&&C){const N=a.trigger.getBoundingClientRect(),P=h.getBoundingClientRect(),j=a.valueNode.getBoundingClientRect(),I=C.getBoundingClientRect();if(a.dir!=="rtl"){const we=I.left-P.left,ze=j.left-we,se=N.left-ze,he=N.width+se,ve=Math.max(he,P.width),Se=window.innerWidth-ei,Ee=NE(ze,[ei,Math.max(ei,Se-ve)]);c.style.minWidth=he+"px",c.style.left=Ee+"px"}else{const we=P.right-I.right,ze=window.innerWidth-j.right-we,se=window.innerWidth-N.right-ze,he=N.width+se,ve=Math.max(he,P.width),Se=window.innerWidth-ei,Ee=NE(ze,[ei,Math.max(ei,Se-ve)]);c.style.minWidth=he+"px",c.style.right=Ee+"px"}const H=y(),$=window.innerHeight-ei*2,K=S.scrollHeight,Z=window.getComputedStyle(h),oe=parseInt(Z.borderTopWidth,10),F=parseInt(Z.paddingTop,10),B=parseInt(Z.borderBottomWidth,10),z=parseInt(Z.paddingBottom,10),Q=oe+F+K+z+B,me=Math.min(E.offsetHeight*5,Q),L=window.getComputedStyle(S),X=parseInt(L.paddingTop,10),te=parseInt(L.paddingBottom,10),ce=N.top+N.height/2-ei,ye=$-ce,be=E.offsetHeight/2,W=E.offsetTop+be,Ae=oe+F+W,xe=Q-Ae;if(Ae<=ce){const we=H.length>0&&E===H[H.length-1].ref.current;c.style.bottom="0px";const ze=h.clientHeight-S.offsetTop-S.offsetHeight,se=Math.max(ye,be+(we?te:0)+ze+B),he=Ae+se;c.style.height=he+"px"}else{const we=H.length>0&&E===H[0].ref.current;c.style.top="0px";const se=Math.max(ce,oe+S.offsetTop+(we?X:0)+be)+xe;c.style.height=se+"px",S.scrollTop=Ae-ce+S.offsetTop}c.style.margin=`${ei}px 0`,c.style.minHeight=me+"px",c.style.maxHeight=$+"px",s?.(),requestAnimationFrame(()=>b.current=!0)}},[y,a.trigger,a.valueNode,c,h,S,E,C,a.dir,s]);On(()=>T(),[T]);const[R,M]=x.useState();On(()=>{h&&M(window.getComputedStyle(h).zIndex)},[h]);const k=x.useCallback(N=>{N&&A.current===!0&&(T(),_?.(),A.current=!1)},[T,_]);return g.jsx(q9,{scope:t,contentWrapper:c,shouldExpandOnScrollRef:b,onScrollButtonChange:k,children:g.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:g.jsx(ht.div,{...i,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});vM.displayName=H9;var $9="SelectPopperPosition",wv=x.forwardRef((n,e)=>{const{__scopeSelect:t,align:s="start",collisionPadding:i=ei,...a}=n,o=nm(t);return g.jsx(MD,{...o,...a,ref:e,align:s,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});wv.displayName=$9;var[q9,rb]=zl(Qa,{}),Sv="SelectViewport",bM=x.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:s,...i}=n,a=oa(Sv,t),o=rb(Sv,t),c=Tt(e,a.onViewportChange),d=x.useRef(0);return g.jsxs(g.Fragment,{children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),g.jsx(em.Slot,{scope:t,children:g.jsx(ht.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Fe(i.onScroll,h=>{const f=h.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:y}=o;if(y?.current&&p){const b=Math.abs(d.current-f.scrollTop);if(b>0){const A=window.innerHeight-ei*2,S=parseFloat(p.style.minHeight),E=parseFloat(p.style.height),C=Math.max(S,E);if(C<A){const _=C+b,T=Math.min(A,_),R=_-T;p.style.height=T+"px",p.style.bottom==="0px"&&(f.scrollTop=R>0?R:0,p.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});bM.displayName=Sv;var xM="SelectGroup",[G9,K9]=zl(xM),Y9=x.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,i=cr();return g.jsx(G9,{scope:t,id:i,children:g.jsx(ht.div,{role:"group","aria-labelledby":i,...s,ref:e})})});Y9.displayName=xM;var wM="SelectLabel",SM=x.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,i=K9(wM,t);return g.jsx(ht.div,{id:i.id,...s,ref:e})});SM.displayName=wM;var Sf="SelectItem",[X9,AM]=zl(Sf),CM=x.forwardRef((n,e)=>{const{__scopeSelect:t,value:s,disabled:i=!1,textValue:a,...o}=n,c=aa(Sf,t),d=oa(Sf,t),h=c.value===s,[f,p]=x.useState(a??""),[y,b]=x.useState(!1),A=Tt(e,_=>d.itemRefCallback?.(_,s,i)),S=cr(),E=x.useRef("touch"),C=()=>{i||(c.onValueChange(s),c.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return g.jsx(X9,{scope:t,value:s,disabled:i,textId:S,isSelected:h,onItemTextChange:x.useCallback(_=>{p(T=>T||(_?.textContent??"").trim())},[]),children:g.jsx(em.ItemSlot,{scope:t,value:s,disabled:i,textValue:f,children:g.jsx(ht.div,{role:"option","aria-labelledby":S,"data-highlighted":y?"":void 0,"aria-selected":h&&y,"data-state":h?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:A,onFocus:Fe(o.onFocus,()=>b(!0)),onBlur:Fe(o.onBlur,()=>b(!1)),onClick:Fe(o.onClick,()=>{E.current!=="mouse"&&C()}),onPointerUp:Fe(o.onPointerUp,()=>{E.current==="mouse"&&C()}),onPointerDown:Fe(o.onPointerDown,_=>{E.current=_.pointerType}),onPointerMove:Fe(o.onPointerMove,_=>{E.current=_.pointerType,i?d.onItemLeave?.():E.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Fe(o.onPointerLeave,_=>{_.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:Fe(o.onKeyDown,_=>{d.searchRef?.current!==""&&_.key===" "||(O9.includes(_.key)&&C(),_.key===" "&&_.preventDefault())})})})})});CM.displayName=Sf;var Wc="SelectItemText",EM=x.forwardRef((n,e)=>{const{__scopeSelect:t,className:s,style:i,...a}=n,o=aa(Wc,t),c=oa(Wc,t),d=AM(Wc,t),h=I9(Wc,t),[f,p]=x.useState(null),y=Tt(e,C=>p(C),d.onItemTextChange,C=>c.itemTextRefCallback?.(C,d.value,d.disabled)),b=f?.textContent,A=x.useMemo(()=>g.jsx("option",{value:d.value,disabled:d.disabled,children:b},d.value),[d.disabled,d.value,b]),{onNativeOptionAdd:S,onNativeOptionRemove:E}=h;return On(()=>(S(A),()=>E(A)),[S,E,A]),g.jsxs(g.Fragment,{children:[g.jsx(ht.span,{id:d.textId,...a,ref:y}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Nl.createPortal(a.children,o.valueNode):null]})});EM.displayName=Wc;var _M="SelectItemIndicator",TM=x.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return AM(_M,t).isSelected?g.jsx(ht.span,{"aria-hidden":!0,...s,ref:e}):null});TM.displayName=_M;var Av="SelectScrollUpButton",RM=x.forwardRef((n,e)=>{const t=oa(Av,n.__scopeSelect),s=rb(Av,n.__scopeSelect),[i,a]=x.useState(!1),o=Tt(e,s.onScrollButtonChange);return On(()=>{if(t.viewport&&t.isPositioned){let c=function(){const h=d.scrollTop>0;a(h)};const d=t.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),i?g.jsx(MM,{...n,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=t;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});RM.displayName=Av;var Cv="SelectScrollDownButton",DM=x.forwardRef((n,e)=>{const t=oa(Cv,n.__scopeSelect),s=rb(Cv,n.__scopeSelect),[i,a]=x.useState(!1),o=Tt(e,s.onScrollButtonChange);return On(()=>{if(t.viewport&&t.isPositioned){let c=function(){const h=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<h;a(f)};const d=t.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),i?g.jsx(MM,{...n,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=t;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});DM.displayName=Cv;var MM=x.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:s,...i}=n,a=oa("SelectScrollButton",t),o=x.useRef(null),c=tm(t),d=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>d(),[d]),On(()=>{c().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),g.jsx(ht.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Fe(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:Fe(i.onPointerMove,()=>{a.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:Fe(i.onPointerLeave,()=>{d()})})}),W9="SelectSeparator",NM=x.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n;return g.jsx(ht.div,{"aria-hidden":!0,...s,ref:e})});NM.displayName=W9;var Ev="SelectArrow",Q9=x.forwardRef((n,e)=>{const{__scopeSelect:t,...s}=n,i=nm(t),a=aa(Ev,t),o=oa(Ev,t);return a.open&&o.position==="popper"?g.jsx(ND,{...i,...s,ref:e}):null});Q9.displayName=Ev;var Z9="SelectBubbleInput",PM=x.forwardRef(({__scopeSelect:n,value:e,...t},s)=>{const i=x.useRef(null),a=Tt(s,i),o=M9(e);return x.useEffect(()=>{const c=i.current;if(!c)return;const d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==e&&f){const p=new Event("change",{bubbles:!0});f.call(c,e),c.dispatchEvent(p)}},[o,e]),g.jsx(ht.select,{...t,style:{...oM,...t.style},ref:a,defaultValue:e})});PM.displayName=Z9;function kM(n){return n===""||n===void 0}function OM(n){const e=Ti(n),t=x.useRef(""),s=x.useRef(0),i=x.useCallback(o=>{const c=t.current+o;e(c),(function d(h){t.current=h,window.clearTimeout(s.current),h!==""&&(s.current=window.setTimeout(()=>d(""),1e3))})(c)},[e]),a=x.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,i,a]}function jM(n,e,t){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let o=J9(n,Math.max(a,0));i.length===1&&(o=o.filter(h=>h!==t));const d=o.find(h=>h.textValue.toLowerCase().startsWith(i.toLowerCase()));return d!==t?d:void 0}function J9(n,e){return n.map((t,s)=>n[(e+s)%n.length])}var eq=lM,LM=uM,tq=hM,nq=fM,sq=mM,FM=pM,iq=bM,IM=SM,BM=CM,rq=EM,aq=TM,zM=RM,UM=DM,VM=NM;const zn=eq,Un=tq,Mn=x.forwardRef(({className:n,children:e,...t},s)=>g.jsxs(LM,{ref:s,className:Ze("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[e,g.jsx(nq,{asChild:!0,children:g.jsx(Iu,{className:"h-4 w-4 opacity-50"})})]}));Mn.displayName=LM.displayName;const HM=x.forwardRef(({className:n,...e},t)=>g.jsx(zM,{ref:t,className:Ze("flex cursor-default items-center justify-center py-1",n),...e,children:g.jsx(ZR,{className:"h-4 w-4"})}));HM.displayName=zM.displayName;const $M=x.forwardRef(({className:n,...e},t)=>g.jsx(UM,{ref:t,className:Ze("flex cursor-default items-center justify-center py-1",n),...e,children:g.jsx(Iu,{className:"h-4 w-4"})}));$M.displayName=UM.displayName;const Nn=x.forwardRef(({className:n,children:e,position:t="popper",...s},i)=>g.jsx(sq,{children:g.jsxs(FM,{ref:i,className:Ze("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...s,children:[g.jsx(HM,{}),g.jsx(iq,{className:Ze("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),g.jsx($M,{})]})}));Nn.displayName=FM.displayName;const oq=x.forwardRef(({className:n,...e},t)=>g.jsx(IM,{ref:t,className:Ze("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...e}));oq.displayName=IM.displayName;const mn=x.forwardRef(({className:n,children:e,...t},s)=>g.jsxs(BM,{ref:s,className:Ze("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(aq,{children:g.jsx(M0,{className:"h-4 w-4"})})}),g.jsx(rq,{children:e})]}));mn.displayName=BM.displayName;const lq=x.forwardRef(({className:n,...e},t)=>g.jsx(VM,{ref:t,className:Ze("-mx-1 my-1 h-px bg-muted",n),...e}));lq.displayName=VM.displayName;const cq=x.memo(function({control:e,onClear:t}){const{t:s}=yn(),i=cs({control:e,name:"status"}),a=cs({control:e,name:"document_type"}),o=cs({control:e,name:"priority"}),c=cs({control:e,name:"correspondent"}),d=x.useMemo(()=>[i,a,o,c].filter(Boolean).length,[i,a,o,c]);return d===0?null:g.jsxs(Ye,{variant:"outline",size:"sm",onClick:t,className:"w-full h-9 text-sm",children:[g.jsx(ar,{className:"w-4 h-4 mr-2"}),s("filters.clearFilters",{count:d})]})});function uq({statuses:n,documentTypes:e,priorities:t,correspondents:s,form:i,onClear:a}){const{t:o}=yn(),{control:c,reset:d,getValues:h}=i,f=x.useCallback(()=>{const p=h("search");d({search:p||"",status:"",document_type:"",priority:"",correspondent:""}),a?.()},[d,h,a]);return g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{className:"space-y-1.5",children:[g.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[g.jsx(XU,{className:"w-3.5 h-3.5"}),o("filters.status")]}),g.jsx(Xc,{name:"status",control:c,render:({field:p})=>g.jsxs(zn,{value:p.value||"",onValueChange:p.onChange,children:[g.jsx(Mn,{className:"h-9 text-sm",children:g.jsx(Un,{placeholder:o("filters.selectStatus")})}),g.jsx(Nn,{children:n.map(y=>g.jsx(mn,{value:y.name,children:y.status_name},y.name))})]})})]}),g.jsxs("div",{className:"space-y-1.5",children:[g.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[g.jsx(uU,{className:"w-3.5 h-3.5"}),o("filters.documentType")]}),g.jsx(Xc,{name:"document_type",control:c,render:({field:p})=>g.jsxs(zn,{value:p.value||"",onValueChange:p.onChange,children:[g.jsx(Mn,{className:"h-9 text-sm",children:g.jsx(Un,{placeholder:o("filters.selectDocumentType")})}),g.jsx(Nn,{children:e.map(y=>g.jsx(mn,{value:y.name,children:y.document_type_name},y.name))})]})})]}),g.jsxs("div",{className:"space-y-1.5",children:[g.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[g.jsx(df,{className:"w-3.5 h-3.5"}),o("filters.priority")]}),g.jsx(Xc,{name:"priority",control:c,render:({field:p})=>g.jsxs(zn,{value:p.value||"",onValueChange:p.onChange,children:[g.jsx(Mn,{className:"h-9 text-sm",children:g.jsx(Un,{placeholder:o("filters.selectPriority")})}),g.jsx(Nn,{children:t.map(y=>g.jsx(mn,{value:y.name,children:y.priority_name},y.name))})]})})]}),g.jsxs("div",{className:"space-y-1.5",children:[g.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[g.jsx(Vz,{className:"w-3.5 h-3.5"}),o("filters.correspondent")]}),g.jsx(Xc,{name:"correspondent",control:c,render:({field:p})=>g.jsxs(zn,{value:p.value||"",onValueChange:p.onChange,children:[g.jsx(Mn,{className:"h-9 text-sm",children:g.jsx(Un,{placeholder:o("filters.selectCorrespondent")})}),g.jsx(Nn,{children:s.map(y=>g.jsx(mn,{value:y.name,children:y.correspondent_name},y.name))})]})})]}),g.jsx(cq,{control:c,onClear:f})]})}const dq=x.memo(uq,(n,e)=>n.statuses===e.statuses&&n.documentTypes===e.documentTypes&&n.priorities===e.priorities&&n.correspondents===e.correspondents&&n.form===e.form);function hq(n,e,t,s){var i=this,a=x.useRef(null),o=x.useRef(0),c=x.useRef(0),d=x.useRef(null),h=x.useRef([]),f=x.useRef(),p=x.useRef(),y=x.useRef(n),b=x.useRef(!0),A=x.useRef(),S=x.useRef();y.current=n;var E=typeof window<"u",C=!e&&e!==0&&E;if(typeof n!="function")throw new TypeError("Expected a function");e=+e||0;var _=!!(t=t||{}).leading,T=!("trailing"in t)||!!t.trailing,R=!!t.flushOnExit&&T,M="maxWait"in t,k="debounceOnServer"in t&&!!t.debounceOnServer,N=M?Math.max(+t.maxWait||0,e):null,P=x.useMemo(function(){var j=function(F){var B=h.current,z=f.current;return h.current=f.current=null,o.current=F,c.current=c.current||F,p.current=y.current.apply(z,B)},I=function(F,B){C&&cancelAnimationFrame(d.current),d.current=C?requestAnimationFrame(F):setTimeout(F,B)},H=function(F){if(!b.current)return!1;var B=F-a.current;return!a.current||B>=e||B<0||M&&F-o.current>=N},$=function(F){return d.current=null,T&&h.current?j(F):(h.current=f.current=null,p.current)},K=function F(){var B=Date.now();if(_&&c.current===o.current&&Z(),H(B))return $(B);if(b.current){var z=e-(B-a.current),Q=M?Math.min(z,N-(B-o.current)):z;I(F,Q)}},Z=function(){},oe=function(){if(E||k){var F,B=Date.now(),z=H(B);if(h.current=[].slice.call(arguments),f.current=i,a.current=B,R&&!A.current&&(A.current=function(){var Q;((Q=global.document)==null?void 0:Q.visibilityState)==="hidden"&&S.current.flush()},(F=global.document)==null||F.addEventListener==null||F.addEventListener("visibilitychange",A.current)),z){if(!d.current&&b.current)return o.current=a.current,I(K,e),_?j(a.current):p.current;if(M)return I(K,e),j(a.current)}return d.current||I(K,e),p.current}};return oe.cancel=function(){var F=d.current;F&&(C?cancelAnimationFrame(d.current):clearTimeout(d.current)),o.current=0,h.current=a.current=f.current=d.current=null},oe.isPending=function(){return!!d.current},oe.flush=function(){return d.current?$(Date.now()):p.current},oe},[_,M,e,N,T,R,C,E,k,s]);return S.current=P,x.useEffect(function(){return b.current=!0,function(){var j;R&&S.current.flush(),A.current&&((j=global.document)==null||j.removeEventListener==null||j.removeEventListener("visibilitychange",A.current),A.current=null),b.current=!1}},[R]),P}function fq({defaultValues:n,onFiltersChange:e,debounceMs:t=500}){const s=x.useMemo(()=>n||{},[n]),i=v9({defaultValues:s,mode:"onChange"}),a=x.useRef(e);x.useEffect(()=>{a.current=e},[e]);const o=hq(f=>{a.current(f)},t);return x.useEffect(()=>{const f=i.watch(p=>{const y={search:p.search?.trim()||void 0,status:p.status||void 0,document_type:p.document_type||void 0,priority:p.priority||void 0,correspondent:p.correspondent||void 0};o(y)});return()=>f.unsubscribe()},[i,o]),{form:x.useMemo(()=>i,[i]),clearFilters:()=>{i.reset({search:"",status:"",document_type:"",priority:"",correspondent:""})},getActiveFiltersCount:()=>{const f=i.getValues();return[f.status,f.document_type,f.priority,f.correspondent].filter(Boolean).length},watch:i.watch}}const ls=x.forwardRef(({className:n,type:e,...t},s)=>g.jsx("input",{type:e,className:Ze("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:s,...t}));ls.displayName="Input";var mq=Symbol.for("react.lazy"),Af=Nf[" use ".trim().toString()];function pq(n){return typeof n=="object"&&n!==null&&"then"in n}function qM(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===mq&&"_payload"in n&&pq(n._payload)}function gq(n){const e=yq(n),t=x.forwardRef((s,i)=>{let{children:a,...o}=s;qM(a)&&typeof Af=="function"&&(a=Af(a._payload));const c=x.Children.toArray(a),d=c.find(bq);if(d){const h=d.props.children,f=c.map(p=>p===d?x.Children.count(h)>1?x.Children.only(null):x.isValidElement(h)?h.props.children:null:p);return g.jsx(e,{...o,ref:i,children:x.isValidElement(h)?x.cloneElement(h,void 0,f):null})}return g.jsx(e,{...o,ref:i,children:a})});return t.displayName=`${n}.Slot`,t}function yq(n){const e=x.forwardRef((t,s)=>{let{children:i,...a}=t;if(qM(i)&&typeof Af=="function"&&(i=Af(i._payload)),x.isValidElement(i)){const o=wq(i),c=xq(a,i.props);return i.type!==x.Fragment&&(c.ref=s?Mi(s,o):o),x.cloneElement(i,c)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var vq=Symbol("radix.slottable");function bq(n){return x.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===vq}function xq(n,e){const t={...e};for(const s in e){const i=n[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?t[s]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[s]=i):s==="style"?t[s]={...i,...a}:s==="className"&&(t[s]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}function wq(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var Sq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Aq=Sq.reduce((n,e)=>{const t=gq(`Primitive.${e}`),s=x.forwardRef((i,a)=>{const{asChild:o,...c}=i,d=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(d,{...c,ref:a})});return s.displayName=`Primitive.${e}`,{...n,[e]:s}},{}),Cq="Label",GM=x.forwardRef((n,e)=>g.jsx(Aq.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));GM.displayName=Cq;var KM=GM;const Eq=N0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ft=x.forwardRef(({className:n,...e},t)=>g.jsx(KM,{ref:t,className:Ze(Eq(),n),...e}));ft.displayName=KM.displayName;const $r=x.forwardRef(({className:n,...e},t)=>g.jsx("textarea",{className:Ze("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));$r.displayName="Textarea";function _q(n){const e=Tq(n),t=x.forwardRef((s,i)=>{const{children:a,...o}=s,c=x.Children.toArray(a),d=c.find(Dq);if(d){const h=d.props.children,f=c.map(p=>p===d?x.Children.count(h)>1?x.Children.only(null):x.isValidElement(h)?h.props.children:null:p);return g.jsx(e,{...o,ref:i,children:x.isValidElement(h)?x.cloneElement(h,void 0,f):null})}return g.jsx(e,{...o,ref:i,children:a})});return t.displayName=`${n}.Slot`,t}function Tq(n){const e=x.forwardRef((t,s)=>{const{children:i,...a}=t;if(x.isValidElement(i)){const o=Nq(i),c=Mq(a,i.props);return i.type!==x.Fragment&&(c.ref=s?Mi(s,o):o),x.cloneElement(i,c)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var Rq=Symbol("radix.slottable");function Dq(n){return x.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Rq}function Mq(n,e){const t={...e};for(const s in e){const i=n[s],a=e[s];/^on[A-Z]/.test(s)?i&&a?t[s]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[s]=i):s==="style"?t[s]={...i,...a}:s==="className"&&(t[s]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}function Nq(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var sm="Dialog",[YM]=io(sm),[Pq,oi]=YM(sm),XM=n=>{const{__scopeDialog:e,children:t,open:s,defaultOpen:i,onOpenChange:a,modal:o=!0}=n,c=x.useRef(null),d=x.useRef(null),[h,f]=bu({prop:s,defaultProp:i??!1,onChange:a,caller:sm});return g.jsx(Pq,{scope:e,triggerRef:c,contentRef:d,contentId:cr(),titleId:cr(),descriptionId:cr(),open:h,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(p=>!p),[f]),modal:o,children:t})};XM.displayName=sm;var WM="DialogTrigger",kq=x.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=oi(WM,t),a=Tt(e,i.triggerRef);return g.jsx(ht.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":lb(i.open),...s,ref:a,onClick:Fe(n.onClick,i.onOpenToggle)})});kq.displayName=WM;var ab="DialogPortal",[Oq,QM]=YM(ab,{forceMount:void 0}),ZM=n=>{const{__scopeDialog:e,forceMount:t,children:s,container:i}=n,a=oi(ab,e);return g.jsx(Oq,{scope:e,forceMount:t,children:x.Children.map(s,o=>g.jsx(ra,{present:t||a.open,children:g.jsx(Kf,{asChild:!0,container:i,children:o})}))})};ZM.displayName=ab;var Cf="DialogOverlay",JM=x.forwardRef((n,e)=>{const t=QM(Cf,n.__scopeDialog),{forceMount:s=t.forceMount,...i}=n,a=oi(Cf,n.__scopeDialog);return a.modal?g.jsx(ra,{present:s||a.open,children:g.jsx(Lq,{...i,ref:e})}):null});JM.displayName=Cf;var jq=_q("DialogOverlay.RemoveScroll"),Lq=x.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=oi(Cf,t);return g.jsx(Xf,{as:jq,allowPinchZoom:!0,shards:[i.contentRef],children:g.jsx(ht.div,{"data-state":lb(i.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),Za="DialogContent",eN=x.forwardRef((n,e)=>{const t=QM(Za,n.__scopeDialog),{forceMount:s=t.forceMount,...i}=n,a=oi(Za,n.__scopeDialog);return g.jsx(ra,{present:s||a.open,children:a.modal?g.jsx(Fq,{...i,ref:e}):g.jsx(Iq,{...i,ref:e})})});eN.displayName=Za;var Fq=x.forwardRef((n,e)=>{const t=oi(Za,n.__scopeDialog),s=x.useRef(null),i=Tt(e,t.contentRef,s);return x.useEffect(()=>{const a=s.current;if(a)return $0(a)},[]),g.jsx(tN,{...n,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Fe(n.onCloseAutoFocus,a=>{a.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Fe(n.onPointerDownOutside,a=>{const o=a.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&a.preventDefault()}),onFocusOutside:Fe(n.onFocusOutside,a=>a.preventDefault())})}),Iq=x.forwardRef((n,e)=>{const t=oi(Za,n.__scopeDialog),s=x.useRef(!1),i=x.useRef(!1);return g.jsx(tN,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{n.onCloseAutoFocus?.(a),a.defaultPrevented||(s.current||t.triggerRef.current?.focus(),a.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:a=>{n.onInteractOutside?.(a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;t.triggerRef.current?.contains(o)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),tN=x.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=n,c=oi(Za,t),d=x.useRef(null),h=Tt(e,d);return j0(),g.jsxs(g.Fragment,{children:[g.jsx(Uf,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:a,children:g.jsx(zf,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":lb(c.open),...o,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),g.jsxs(g.Fragment,{children:[g.jsx(Bq,{titleId:c.titleId}),g.jsx(Uq,{contentRef:d,descriptionId:c.descriptionId})]})]})}),ob="DialogTitle",nN=x.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=oi(ob,t);return g.jsx(ht.h2,{id:i.titleId,...s,ref:e})});nN.displayName=ob;var sN="DialogDescription",iN=x.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=oi(sN,t);return g.jsx(ht.p,{id:i.descriptionId,...s,ref:e})});iN.displayName=sN;var rN="DialogClose",aN=x.forwardRef((n,e)=>{const{__scopeDialog:t,...s}=n,i=oi(rN,t);return g.jsx(ht.button,{type:"button",...s,ref:e,onClick:Fe(n.onClick,()=>i.onOpenChange(!1))})});aN.displayName=rN;function lb(n){return n?"open":"closed"}var oN="DialogTitleWarning",[pX,lN]=bV(oN,{contentName:Za,titleName:ob,docsSlug:"dialog"}),Bq=({titleId:n})=>{const e=lN(oN),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return x.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},zq="DialogDescriptionWarning",Uq=({contentRef:n,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${lN(zq).contentName}}.`;return x.useEffect(()=>{const i=n.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(s))},[s,n,e]),null},Vq=XM,Hq=ZM,cN=JM,uN=eN,dN=nN,hN=iN,$q=aN;const qr=Vq,qq=Hq,fN=x.forwardRef(({className:n,...e},t)=>g.jsx(cN,{ref:t,className:Ze("fixed inset-0 z-50 bg-black/80",n),...e}));fN.displayName=cN.displayName;const sr=x.forwardRef(({className:n,children:e,...t},s)=>g.jsxs(qq,{children:[g.jsx(fN,{}),g.jsxs(uN,{ref:s,className:Ze("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg",n),...t,children:[e,g.jsxs($q,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[g.jsx(ar,{className:"h-4 w-4"}),g.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));sr.displayName=uN.displayName;const ir=({className:n,...e})=>g.jsx("div",{className:Ze("flex flex-col space-y-1.5 text-center sm:text-left",n),...e});ir.displayName="DialogHeader";const Pa=({className:n,...e})=>g.jsx("div",{className:Ze("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...e});Pa.displayName="DialogFooter";const rr=x.forwardRef(({className:n,...e},t)=>g.jsx(dN,{ref:t,className:Ze("text-lg font-semibold leading-none tracking-tight",n),...e}));rr.displayName=dN.displayName;const ka=x.forwardRef(({className:n,...e},t)=>g.jsx(hN,{ref:t,className:Ze("text-sm text-muted-foreground",n),...e}));ka.displayName=hN.displayName;function Gq(){return Di({mutationFn:async n=>at.uploadFile(n)})}function Kq({open:n,onOpenChange:e,onCorrespondentCreated:t}){const{t:s}=yn(),[i,a]=x.useState(!1),[o,c]=x.useState(""),[d,h]=x.useState(" "),[f,p]=x.useState(""),[y,b]=x.useState(""),[A,S]=x.useState(""),[E,C]=x.useState(""),[_,T]=x.useState(""),[R,M]=x.useState(""),k=async()=>{if(!o){alert(s("addCorrespondent.enterName"));return}a(!0);try{const P=await fetch(`${window.location.origin}/api/resource/EDO Correspondent`,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":at.getCSRFToken()},body:JSON.stringify({correspondent_name:o,correspondent_type:d,organization_name:f,inn:y,address:A,contact_person:E,phone:_,email:R})});if(!P.ok){const H=await P.json();throw new Error(H.message||"Failed to create correspondent")}const j=await P.json(),I={name:j.data.name,correspondent_name:j.data.correspondent_name};t?.(I),N(),e(!1)}catch(P){console.error("Failed to create correspondent:",P),alert(s("addCorrespondent.createError"))}finally{a(!1)}},N=()=>{c(""),h(" "),p(""),b(""),S(""),C(""),T(""),M("")};return g.jsx(qr,{open:n,onOpenChange:e,children:g.jsxs(sr,{className:"max-w-2xl",children:[g.jsx(ir,{className:"text-left",children:g.jsx(rr,{className:"text-xl",children:s("addCorrespondent.newCorrespondent")})}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs(ft,{htmlFor:"correspondent_name",children:[s("addCorrespondent.nameLabel")," ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx(ls,{id:"correspondent_name",placeholder:s("addCorrespondent.enterName"),value:o,onChange:P=>c(P.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{htmlFor:"correspondent_type",children:s("addCorrespondent.typeLabel")}),g.jsxs(zn,{value:d,onValueChange:h,children:[g.jsx(Mn,{children:g.jsx(Un,{})}),g.jsxs(Nn,{children:[g.jsx(mn,{value:" ",children:s("addCorrespondent.physicalPerson")}),g.jsx(mn,{value:" ",children:s("addCorrespondent.legalPerson")}),g.jsx(mn,{value:" ",children:s("addCorrespondent.stateOrg")})]})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{htmlFor:"organization",children:s("addCorrespondent.organizationLabel")}),g.jsx(ls,{id:"organization",placeholder:s("addCorrespondent.organizationPlaceholder"),value:f,onChange:P=>p(P.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{htmlFor:"inn",children:s("addCorrespondent.innLabel")}),g.jsx(ls,{id:"inn",placeholder:s("addCorrespondent.innPlaceholder"),value:y,onChange:P=>b(P.target.value)})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{htmlFor:"address",children:s("addCorrespondent.addressLabel")}),g.jsx($r,{id:"address",placeholder:s("addCorrespondent.addressPlaceholder"),rows:2,value:A,onChange:P=>S(P.target.value)})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{htmlFor:"contact_person",children:s("addCorrespondent.contactPersonLabel")}),g.jsx(ls,{id:"contact_person",placeholder:s("addCorrespondent.contactPersonPlaceholder"),value:E,onChange:P=>C(P.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{htmlFor:"phone",children:s("addCorrespondent.phoneLabel")}),g.jsx(ls,{id:"phone",placeholder:s("addCorrespondent.phonePlaceholder"),value:_,onChange:P=>T(P.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{htmlFor:"email",children:s("addCorrespondent.emailLabel")}),g.jsx(ls,{id:"email",type:"email",placeholder:s("addCorrespondent.emailPlaceholder"),value:R,onChange:P=>M(P.target.value)})]})]})]}),g.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 border-t",children:[g.jsx(Ye,{type:"button",variant:"outline",onClick:()=>{N(),e(!1)},children:s("common.cancel")}),g.jsx(Ye,{type:"button",onClick:k,disabled:i,className:"bg-blue-600 hover:bg-blue-700 text-white",children:s(i?"addCorrespondent.creating":"addCorrespondent.create")})]})]})})}function _v({users:n,value:e,onChange:t,placeholder:s,disabled:i=!1}){const{t:a}=yn(),[o,c]=x.useState(!1),[d,h]=x.useState(""),f=s??a("common.selectUser"),p=n.find(b=>b.name===e),y=x.useMemo(()=>{if(!d.trim())return n;const b=d.toLowerCase();return n.filter(A=>(A.full_name||"").toLowerCase().includes(b)||A.name.toLowerCase().includes(b)||(A.email||"").toLowerCase().includes(b))},[n,d]);return g.jsxs("div",{className:"relative",children:[g.jsxs(Ye,{type:"button",variant:"outline",role:"combobox","aria-expanded":o,disabled:i,className:"w-full justify-between font-normal",onClick:()=>c(!o),children:[p?g.jsxs("div",{className:"flex items-center gap-2",children:[p.user_image?g.jsx("img",{src:p.user_image,alt:"",className:"w-5 h-5 rounded-full"}):g.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-300 flex items-center justify-center text-xs",children:(p.full_name||p.name).charAt(0).toUpperCase()}),g.jsx("span",{className:"truncate",children:p.full_name||p.name})]}):g.jsx("span",{className:"text-muted-foreground",children:f}),g.jsx(Zz,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}),o&&g.jsxs("div",{className:"absolute z-50 mt-1 w-full rounded-md border bg-white shadow-lg",children:[g.jsx("div",{className:"p-2 border-b",children:g.jsxs("div",{className:"relative",children:[g.jsx(Bf,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),g.jsx(ls,{placeholder:a("common.searchPlaceholder"),value:d,onChange:b=>h(b.target.value),className:"pl-8",autoFocus:!0})]})}),g.jsx("div",{className:"max-h-60 overflow-y-auto p-1",children:y.length===0?g.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"  "}):y.map(b=>g.jsxs("div",{className:Ze("flex items-center gap-2 px-2 py-2 cursor-pointer rounded hover:bg-gray-100",e===b.name&&"bg-blue-50"),onClick:()=>{t(b.name),c(!1),h("")},children:[g.jsx(M0,{className:Ze("h-4 w-4",e===b.name?"opacity-100":"opacity-0")}),b.user_image?g.jsx("img",{src:b.user_image,alt:"",className:"w-6 h-6 rounded-full"}):g.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-xs",children:(b.full_name||b.name).charAt(0).toUpperCase()}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-sm font-medium truncate",children:b.full_name||b.name}),g.jsx("div",{className:"text-xs text-muted-foreground truncate",children:b.email})]})]},b.name))})]}),o&&g.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)})]})}function Tv({users:n,value:e,onChange:t,placeholder:s,disabled:i=!1,excludeUsers:a=[]}){const{t:o}=yn(),[c,d]=x.useState(!1),[h,f]=x.useState(""),p=s??o("common.selectUsers"),y=x.useMemo(()=>n.filter(C=>!a.includes(C.name)),[n,a]),b=x.useMemo(()=>{if(!h.trim())return y;const C=h.toLowerCase();return y.filter(_=>(_.full_name||"").toLowerCase().includes(C)||_.name.toLowerCase().includes(C)||(_.email||"").toLowerCase().includes(C))},[y,h]),A=n.filter(C=>e.includes(C.name)),S=C=>{e.includes(C)?t(e.filter(_=>_!==C)):t([...e,C])},E=C=>{t(e.filter(_=>_!==C))};return g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:Ze("min-h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm cursor-pointer",i&&"opacity-50 cursor-not-allowed"),onClick:()=>!i&&d(!c),children:A.length>0?g.jsx("div",{className:"flex flex-wrap gap-1",children:A.map(C=>g.jsxs("span",{className:"inline-flex items-center gap-1 bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs",children:[C.full_name||C.name,g.jsx(ar,{className:"h-3 w-3 cursor-pointer hover:text-blue-600",onClick:_=>{_.stopPropagation(),E(C.name)}})]},C.name))}):g.jsx("span",{className:"text-muted-foreground",children:p})}),c&&g.jsxs("div",{className:"absolute z-50 mt-1 w-full rounded-md border bg-white shadow-lg",children:[g.jsx("div",{className:"p-2 border-b",children:g.jsxs("div",{className:"relative",children:[g.jsx(Bf,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),g.jsx(ls,{placeholder:o("common.searchPlaceholder"),value:h,onChange:C=>f(C.target.value),className:"pl-8",autoFocus:!0})]})}),g.jsx("div",{className:"max-h-60 overflow-y-auto p-1",children:b.length===0?g.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:o("common.noUsersFound")}):b.map(C=>g.jsxs("div",{className:Ze("flex items-center gap-2 px-2 py-2 cursor-pointer rounded hover:bg-gray-100",e.includes(C.name)&&"bg-blue-50"),onClick:()=>S(C.name),children:[g.jsx("input",{type:"checkbox",checked:e.includes(C.name),onChange:()=>{},className:"rounded border-gray-300"}),C.user_image?g.jsx("img",{src:C.user_image,alt:"",className:"w-6 h-6 rounded-full"}):g.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-xs",children:(C.full_name||C.name).charAt(0).toUpperCase()}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-sm font-medium truncate",children:C.full_name||C.name}),g.jsx("div",{className:"text-xs text-muted-foreground truncate",children:C.email})]})]},C.name))})]}),c&&g.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)})]})}function mN({open:n,onOpenChange:e,onDocumentCreated:t,editDocument:s,onDocumentUpdated:i}){const{t:a}=yn(),o=!!s,[c,d]=x.useState(!1),h=Gq(),f=Gs(),[p,y]=x.useState(!1),{data:b=[]}=rM(),{data:A=[]}=iM(),{data:S=[]}=aM(),{data:E=[]}=x9(),{data:C=[]}=w9(),{data:_=[]}=A9(),{data:T=[]}=q2(),{data:R}=Hu(),[M,k]=x.useState(""),[N,P]=x.useState(""),[j,I]=x.useState(""),[H,$]=x.useState(""),[K,Z]=x.useState(""),[oe,F]=x.useState(""),[B,z]=x.useState(""),[Q,me]=x.useState(""),[L,X]=x.useState(""),[te,ce]=x.useState(""),[ye,be]=x.useState(""),[W,Ae]=x.useState(""),[xe,je]=x.useState(null),[we,ze]=x.useState([]),[se,he]=x.useState(null),[ve,Se]=x.useState([]),[Ee,Ne]=x.useState(""),[nt,Ke]=x.useState([]),U=b,G=A,ie=S,pe=E,ge=C,fe=_,re=T,Te=R?.roles||[];x.useEffect(()=>{n&&(s?(k(s.incoming_number||""),P(s.incoming_date||""),I(s.outgoing_number||""),$(s.outgoing_date||""),Z(s.title||""),F(s.correspondent||""),z(s.document_type||""),me(s.priority||""),X(s.brief_content||""),ce(s.classification||""),be(s.delivery_method||""),Ae(s.reception_office||""),Ne(s.executor||""),Ke(s.co_executors?.map(_e=>_e.user)||[]),he(s.main_document||null),Se(s.attachments||[])):P(new Date().toISOString().split("T")[0]))},[n,s]);const qe=Te.includes("EDO Manager")||Te.includes("EDO Admin"),yt=Te.includes("EDO Reception")||Te.includes("EDO Admin"),jn=_e=>{_e.target.files&&_e.target.files[0]&&je(_e.target.files[0])},Es=_e=>{if(_e.target.files){const Yt=Array.from(_e.target.files);ze([...we,...Yt])}},Pi=_e=>{ze(we.filter((Yt,Ys)=>Ys!==_e))},rn=_e=>{Se(ve.filter((Yt,Ys)=>Ys!==_e))},Xn=async _e=>{f.invalidateQueries({queryKey:_n.correspondents()}),F(_e.name)},vn=async()=>{if(!oe||!B){alert(a("addDocument.fillRequired"));return}if(qe&&!W){alert(a("addDocument.selectReception"));return}d(!0);try{let _e=se||"";xe&&(_e=await h.mutateAsync(xe));const Yt=[];for(const Wn of we){const ki=await h.mutateAsync(Wn);Yt.push({attachment:ki,file_name:Wn.name,file_size:Wn.size})}const Ys=[...ve,...Yt],li={incoming_number:M||void 0,incoming_date:N||void 0,outgoing_number:j||void 0,outgoing_date:H||void 0,title:K||void 0,correspondent:oe,document_type:B,priority:Q||void 0,brief_content:L||void 0,classification:te||void 0,delivery_method:ye||void 0,main_document:_e||void 0,attachments:Ys.length>0?Ys:void 0};if(qe&&W&&(li.reception_office=W),yt&&(Ee&&(li.executor=Ee),nt.length>0&&(li.co_executors=nt.map(Wn=>({user:Wn})))),o&&s){const Wn=await at.updateDocument(s.name,li);i?.(Wn)}else{const Wn=await at.createDocument(li);t?.(Wn)}la(),e(!1)}catch(_e){console.error(o?"Failed to update document:":"Failed to create document:",_e);let Yt=a(o?"addDocument.errorUpdate":"addDocument.errorCreate");_e?.message&&(Yt+=": "+_e.message),alert(Yt)}finally{d(!1)}},la=()=>{k(""),P(""),I(""),$(""),Z(""),F(""),z(""),me(""),X(""),ce(""),be(""),Ae(""),je(null),ze([]),Ne(""),Ke([]),he(null),Se([])};return g.jsxs(g.Fragment,{children:[g.jsx(qr,{open:n,onOpenChange:e,children:g.jsxs(sr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto custom-scrollbar",children:[g.jsx(ir,{className:"text-left",children:g.jsx(rr,{className:"text-xl",children:a(o?"addDocument.editDocument":"addDocument.newDocument")})}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-base font-semibold",children:a("addDocument.mainInfo")}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs(ft,{htmlFor:"incoming_number",children:[a("addDocument.incomingNumber")," ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx(ls,{id:"incoming_number",placeholder:a("addDocument.numberPlaceholder"),value:M,onChange:_e=>k(_e.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs(ft,{htmlFor:"incoming_date",children:[a("addDocument.incomingDate")," ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx(ls,{id:"incoming_date",type:"date",value:N,onChange:_e=>P(_e.target.value)})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{htmlFor:"outgoing_number",children:a("addDocument.outgoingNumber")}),g.jsx(ls,{id:"outgoing_number",placeholder:a("addDocument.numberPlaceholder"),value:j,onChange:_e=>I(_e.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{htmlFor:"outgoing_date",children:a("addDocument.outgoingDate")}),g.jsx(ls,{id:"outgoing_date",type:"date",placeholder:a("addDocument.datePlaceholder"),value:H,onChange:_e=>$(_e.target.value)})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{htmlFor:"title",children:a("addDocument.documentTitle")}),g.jsx(ls,{id:"title",placeholder:a("addDocument.titlePlaceholder"),value:K,onChange:_e=>Z(_e.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs(ft,{htmlFor:"correspondent",children:[a("addDocument.correspondent")," ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs(zn,{value:oe,onValueChange:F,children:[g.jsx(Mn,{className:"flex-1",children:g.jsx(Un,{placeholder:a("addDocument.correspondentPlaceholder")})}),g.jsx(Nn,{children:U.map(_e=>g.jsx(mn,{value:_e.name,children:_e.correspondent_name},_e.name))})]}),g.jsx(Ye,{type:"button",variant:"outline",className:"shrink-0",onClick:()=>y(!0),children:a("addDocument.add")})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs(ft,{htmlFor:"brief_content",children:[a("addDocument.briefContent")," ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx($r,{id:"brief_content",placeholder:a("addDocument.briefContentPlaceholder"),rows:3,value:L,onChange:_e=>X(_e.target.value)})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs(ft,{htmlFor:"document_type",children:[a("addDocument.documentType")," ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsxs(zn,{value:B,onValueChange:z,children:[g.jsx(Mn,{children:g.jsx(Un,{placeholder:a("addDocument.documentTypePlaceholder")})}),g.jsx(Nn,{children:G.map(_e=>g.jsx(mn,{value:_e.name,children:_e.document_type_name},_e.name))})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{htmlFor:"priority",children:a("addDocument.priority")}),g.jsxs(zn,{value:Q,onValueChange:me,children:[g.jsx(Mn,{children:g.jsx(Un,{placeholder:a("addDocument.priorityPlaceholder")})}),g.jsx(Nn,{children:ie.map(_e=>g.jsx(mn,{value:_e.name,children:_e.priority_name},_e.name))})]})]})]})]}),yt&&g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-base font-semibold",children:a("addDocument.executors")}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{children:a("addDocument.executor")}),g.jsx(_v,{users:re,value:Ee,onChange:Ne,placeholder:a("addDocument.executorSearchPlaceholder")})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{children:a("addDocument.coExecutors")}),g.jsx(Tv,{users:re,value:nt,onChange:Ke,excludeUsers:Ee?[Ee]:[],placeholder:a("addDocument.coExecutorsSearchPlaceholder")})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-base font-semibold",children:a("addDocument.additionalInfo")}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[qe&&g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{htmlFor:"reception_office",children:a("addDocument.receptionOffice")}),g.jsxs(zn,{value:W,onValueChange:Ae,children:[g.jsx(Mn,{children:g.jsx(Un,{placeholder:a("addDocument.receptionPlaceholder")})}),g.jsx(Nn,{children:fe.map(_e=>g.jsx(mn,{value:_e.name,children:_e.reception_office_name},_e.name))})]})]}),g.jsxs("div",{className:`space-y-2 ${qe?"":"col-span-2"}`,children:[g.jsx(ft,{htmlFor:"delivery_method",children:a("addDocument.deliveryMethod")}),g.jsxs(zn,{value:ye,onValueChange:be,children:[g.jsx(Mn,{children:g.jsx(Un,{placeholder:a("addDocument.deliveryPlaceholder")})}),g.jsx(Nn,{children:ge.map(_e=>g.jsx(mn,{value:_e.name,children:_e.delivery_method_name},_e.name))})]})]})]}),g.jsx("div",{className:"grid grid-cols-2 gap-4",children:g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{htmlFor:"classification",children:a("addDocument.classification")}),g.jsxs(zn,{value:te,onValueChange:ce,children:[g.jsx(Mn,{children:g.jsx(Un,{placeholder:a("addDocument.classificationPlaceholder")})}),g.jsx(Nn,{children:pe.map(_e=>g.jsx(mn,{value:_e.name,children:_e.classification_name},_e.name))})]})]})})]})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-base font-semibold",children:a("addDocument.documentFile")}),g.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[g.jsx(nV,{className:"w-12 h-12 mx-auto text-muted-foreground mb-3"}),g.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:a("addDocument.dragFileHint")}),g.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:a("addDocument.fileTypesHint")}),g.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:".pdf,.doc,.docx",onChange:jn}),g.jsx(Ye,{type:"button",variant:"outline",size:"sm",onClick:()=>document.getElementById("file-upload")?.click(),children:a("addDocument.selectFile")}),se&&!xe&&g.jsxs("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[g.jsx(Vs,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm font-medium text-green-900 truncate",children:se.split("/").pop()}),g.jsx("p",{className:"text-xs text-green-600",children:a("addDocument.currentFile")})]}),g.jsx("button",{type:"button",onClick:()=>he(null),className:"text-green-600 hover:text-red-600",title:a("addDocument.deleteFile"),children:g.jsx(ar,{className:"w-4 h-4"})})]}),xe&&g.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center gap-2",children:[g.jsx(Vs,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm font-medium text-blue-900 truncate",children:xe.name}),g.jsxs("p",{className:"text-xs text-blue-600",children:[(xe.size/1024).toFixed(1),"  (",a("addDocument.newFile"),")"]})]}),g.jsx("button",{type:"button",onClick:()=>je(null),className:"text-blue-600 hover:text-blue-800",children:g.jsx(ar,{className:"w-4 h-4"})})]})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-base font-semibold",children:a("addDocument.attachments")}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("input",{type:"file",id:"attachments-upload",className:"hidden",multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:Es}),g.jsx(Ye,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("attachments-upload")?.click(),children:a("addDocument.addFiles")}),ve.length>0&&g.jsxs("div",{className:"space-y-2 mt-2",children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:a("addDocument.currentAttachments")}),ve.map((_e,Yt)=>g.jsxs("div",{className:"p-2 bg-green-50 border border-green-200 rounded flex items-center gap-2",children:[g.jsx(Vs,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm text-green-900 truncate",children:_e.file_name}),_e.file_size&&g.jsxs("p",{className:"text-xs text-green-600",children:[(_e.file_size/1024).toFixed(1)," "]})]}),g.jsx("button",{type:"button",onClick:()=>rn(Yt),className:"text-green-600 hover:text-red-600",title:a("addDocument.deleteAttachment"),children:g.jsx(ar,{className:"w-4 h-4"})})]},`existing-${Yt}`))]}),we.length>0&&g.jsxs("div",{className:"space-y-2 mt-2",children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:a("addDocument.newAttachments")}),we.map((_e,Yt)=>g.jsxs("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded flex items-center gap-2",children:[g.jsx(Vs,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm text-blue-900 truncate",children:_e.name}),g.jsxs("p",{className:"text-xs text-blue-600",children:[(_e.size/1024).toFixed(1)," "]})]}),g.jsx("button",{type:"button",onClick:()=>Pi(Yt),className:"text-blue-600 hover:text-red-600",children:g.jsx(ar,{className:"w-4 h-4"})})]},Yt))]})]})]}),g.jsxs("div",{className:"space-y-3 text-sm",children:[g.jsx("h3",{className:"text-base font-semibold",children:a("addDocument.help")}),g.jsxs("div",{className:"space-y-2 text-muted-foreground",children:[g.jsx("p",{children:a("addDocument.helpIncomingNumber")}),g.jsx("p",{children:a("addDocument.helpCorrespondent")}),g.jsx("p",{children:a("addDocument.helpStamp")})]})]})]})]}),g.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[g.jsx(Ye,{type:"button",variant:"outline",onClick:()=>{la(),e(!1)},children:a("common.cancel")}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Ye,{type:"button",variant:"outline",disabled:c,children:a("addDocument.saveDraft")}),g.jsx(Ye,{type:"button",onClick:vn,disabled:c||h.isPending,className:"bg-blue-600 hover:bg-blue-700 text-white",children:h.isPending?a("addDocument.uploadingFile"):a(c?o?"addDocument.saving":"addDocument.creating":o?"addDocument.save":"addDocument.register")})]})]})]})}),g.jsx(Kq,{open:p,onOpenChange:y,onCorrespondentCreated:Xn})]})}const pN=x.memo(({showFilters:n,onToggle:e,filtersForm:t})=>{const{t:s}=yn(),i=cs({control:t.control,name:"status"}),a=cs({control:t.control,name:"document_type"}),o=cs({control:t.control,name:"priority"}),c=cs({control:t.control,name:"correspondent"}),d=x.useMemo(()=>[i,a,o,c].filter(Boolean).length,[i,a,o,c]);return g.jsx("div",{className:"p-3 border-b bg-muted/30",children:g.jsxs(Ye,{variant:"ghost",size:"sm",onClick:e,className:"w-full justify-between h-9",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(hU,{className:"w-4 h-4"}),g.jsx("span",{className:"text-sm font-medium",children:s("filters.title")}),d>0&&g.jsx(P0,{variant:"secondary",className:"ml-1 h-5 min-w-5 px-1.5 text-xs",children:d})]}),n?g.jsx(ZR,{className:"w-4 h-4 text-muted-foreground"}):g.jsx(Iu,{className:"w-4 h-4 text-muted-foreground"})]})})});pN.displayName="FilterToggleButton";const gN=x.memo(({filtersForm:n})=>{const e=cs({control:n.control,name:"search"}),t=cs({control:n.control,name:"status"}),s=cs({control:n.control,name:"document_type"}),i=cs({control:n.control,name:"priority"}),a=cs({control:n.control,name:"correspondent"});return x.useMemo(()=>!!(e||t||s||i||a),[e,t,s,i,a])?g.jsx("p",{className:"text-xs text-muted-foreground",children:"     "}):null});gN.displayName="EmptyStateMessage";const yN=x.memo(({statuses:n,documentTypes:e,priorities:t,correspondents:s,filtersForm:i})=>g.jsx("div",{className:"p-3 border-b bg-muted/20 space-y-3 animate-in slide-in-from-top-2 duration-200",children:g.jsx(dq,{statuses:n||[],documentTypes:e||[],priorities:t||[],correspondents:s||[],form:i})}));yN.displayName="FiltersPanel";function Yq({documents:n,selectedDocument:e,onSelectDocument:t,loading:s,error:i,onDocumentsRefresh:a,filtersForm:o}){const{t:c}=yn(),{data:d}=Hu(),[h,f]=x.useState(!1),[p,y]=x.useState(!1),{data:b=[]}=b9(),{data:A=[]}=iM(),{data:S=[]}=aM(),{data:E=[]}=rM(),C=d?.roles?.includes("EDO Admin")||d?.roles?.includes("EDO Manager"),_=()=>{f(!0)},T=async M=>{a&&(await a(),M&&setTimeout(()=>{t(M)},100))},R=M=>M===c("documents.status.signed")||M===""?"default":M===c("documents.status.pending")||M===" "?"secondary":M===c("documents.status.archived")||M===""?"outline":"secondary";return s?g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"p-3 border-b",children:g.jsx(nl,{className:"h-9 w-full"})}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:Array.from({length:5}).map((M,k)=>g.jsxs("div",{className:"p-4 border-b",children:[g.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[g.jsx(nl,{className:"h-4 w-3/4"}),g.jsx(nl,{className:"h-5 w-16 shrink-0"})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(nl,{className:"h-3 w-24"}),g.jsx(nl,{className:"h-3 w-20"})]})]},k))})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"p-3 border-b",children:g.jsxs("div",{className:"relative",children:[g.jsx(Bf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),g.jsx(Xc,{name:"search",control:o.control,render:({field:M})=>g.jsx("input",{...M,type:"text",placeholder:c("documentSidebar.searchPlaceholder"),className:"w-full pl-9 pr-3 py-2 text-sm border rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-ring"})})]})}),g.jsx(pN,{showFilters:p,onToggle:()=>y(!p),filtersForm:o}),p&&g.jsx(yN,{statuses:b,documentTypes:A,priorities:S,correspondents:E,filtersForm:o}),C&&g.jsx("div",{className:"p-3 border-b bg-muted/30",children:g.jsxs(Ye,{onClick:_,className:"w-full",size:"sm",children:[g.jsx(JR,{className:"w-4 h-4 mr-2"}),c("documentSidebar.addDocument")]})}),i&&g.jsx("div",{className:"p-3 border-b",children:g.jsxs("div",{className:"text-sm text-destructive bg-destructive/10 p-2 rounded",children:[c("common.error"),": ",i]})}),g.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:n.length===0&&!s?g.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[g.jsx(Vs,{className:"w-12 h-12 text-muted-foreground mb-3"}),g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:c("documentSidebar.noDocuments")}),g.jsx(gN,{filtersForm:o})]}):n.map(M=>g.jsxs("div",{onClick:()=>t(M),className:Ze("p-4 border-b cursor-pointer transition-colors hover:bg-muted/50",e?.name===M.name&&"bg-muted"),children:[g.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[g.jsx("h3",{className:"font-medium text-sm line-clamp-2",children:M.title}),g.jsx(P0,{variant:R(M.status),className:"text-xs shrink-0",children:M.status})]}),g.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[M.document_type&&g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx(Vs,{className:"w-3 h-3"}),M.document_type]}),M.document_date&&g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx($z,{className:"w-3 h-3"}),new Date(M.document_date).toLocaleDateString("ru-RU")]})]})]},M.name))})]}),g.jsx(mN,{open:h,onOpenChange:f,onDocumentCreated:T})]})}const Xq=x.memo(Yq,(n,e)=>(n.documents===e.documents||n.documents.length===e.documents.length&&n.documents.every((s,i)=>s.name===e.documents[i]?.name))&&n.selectedDocument?.name===e.selectedDocument?.name&&n.loading===e.loading&&n.error===e.error&&n.filtersForm===e.filtersForm),Wq="_editor_191r9_2",Qq={editor:Wq};function Zq({value:n,onChange:e,placeholder:t}){const s=x.useRef(null),i=x.useRef(null),a=x.useRef(!0),[o,c]=x.useState(!1);x.useEffect(()=>{a.current&&s.current&&n&&(s.current.innerHTML=n,a.current=!1)},[]),x.useEffect(()=>{s.current&&n===""&&s.current.innerHTML!==""&&(s.current.innerHTML="")},[n]);const d=()=>{s.current&&e(s.current.innerHTML)},h=()=>{c(!0)},f=()=>{c(!1)},p=(b,A)=>{document.execCommand(b,!1,A),s.current?.focus()},y=()=>{const b=window.prompt(" URL:");b&&p("createLink",b)};return g.jsxs(Xr.div,{ref:i,animate:{scale:o?1.005:1},transition:{type:"spring",stiffness:400,damping:30},className:`relative border border-input rounded-xl overflow-hidden focus-within:border-primary focus-within:ring-1 focus-within:ring-primary/20 transition-all bg-background ${Qq.editor}`,children:[g.jsxs("div",{className:"flex items-center gap-1 px-4 py-2.5 border-b border-border/60 bg-slate-50/50",children:[g.jsx("button",{type:"button",onClick:()=>p("bold"),className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:" (Ctrl+B)",children:g.jsx(zz,{className:"h-4 w-4",strokeWidth:2.5})}),g.jsx("button",{type:"button",onClick:()=>p("italic"),className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:" (Ctrl+I)",children:g.jsx(xU,{className:"h-4 w-4",strokeWidth:2.5})}),g.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1.5"}),g.jsx("button",{type:"button",onClick:()=>p("insertUnorderedList"),className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:" ",children:g.jsx(_U,{className:"h-4 w-4",strokeWidth:2.5})}),g.jsx("button",{type:"button",onClick:()=>p("insertOrderedList"),className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:" ",children:g.jsx(CU,{className:"h-4 w-4",strokeWidth:2.5})}),g.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1.5"}),g.jsx("button",{type:"button",onClick:y,className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:"  (Ctrl+K)",children:g.jsx(SU,{className:"h-4 w-4",strokeWidth:2.5})})]}),g.jsx("div",{ref:s,contentEditable:!0,onInput:d,onFocus:h,onBlur:f,className:"min-h-[140px] max-h-[500px] overflow-y-auto px-4 py-3.5 text-[15px] leading-relaxed focus:outline-none","data-placeholder":t,style:{wordBreak:"break-word"}})]})}const Cu={all:["comments"],lists:()=>[...Cu.all,"list"],list:(n,e)=>[...Cu.lists(),n,e]};function Jq(n,e){return Gn({queryKey:Cu.list(n,e||""),queryFn:()=>at.getComments(n,e),enabled:!!e,staleTime:3e4})}function eG(){const n=Gs();return Di({mutationFn:async e=>at.addComment(e.doctype,e.docname,e.content),onSuccess:(e,t)=>{n.invalidateQueries({queryKey:Cu.list(t.doctype,t.docname)})}})}function tG(){const n=Gs();return Di({mutationFn:async e=>at.deleteComment(e.commentName),onSuccess:(e,t)=>{n.invalidateQueries({queryKey:Cu.list(t.doctype,t.docname)})}})}const nG="_customScrollbar_1a8f8_2",sG="_commentContent_1a8f8_31",PE={customScrollbar:nG,commentContent:sG};function iG({doctype:n,docname:e,refreshTrigger:t}){const{t:s}=yn(),{data:i=[],isLoading:a}=Jq(n,e),{data:o}=Hu(),c=eG(),d=tG(),[h,f]=x.useState([]),[p,y]=x.useState(5),[b,A]=x.useState(""),[S,E]=x.useState(null),C=x.useRef(null),_=x.useRef(null),T=x.useRef(null),R=o?.roles?.includes("EDO Admin")||!1;x.useEffect(()=>{if(i.length>0){const $=i.filter(K=>{const Z=K.content||"",oe=document.createElement("div");oe.innerHTML=Z;const F=(oe.textContent||oe.innerText||"").toLowerCase();return!["","resolution","   ",":",":","executor:","co-executor:"].some(Q=>F.includes(Q.toLowerCase()))});f($.reverse())}else f([])},[i,t]);const M=$=>{const K=$.currentTarget;K.scrollHeight-K.scrollTop<=K.clientHeight+50&&p<h.length&&y(oe=>Math.min(oe+5,h.length))},k=h.slice(0,p),N=p<h.length,P=async $=>{$.preventDefault();const K=document.createElement("div");if(K.innerHTML=b,!!(K.textContent||K.innerText||"").trim())try{const oe=await c.mutateAsync({doctype:n,docname:e,content:b});A(""),E(oe.name),setTimeout(()=>{_.current&&_.current.scrollTo({top:0,behavior:"smooth"})},100)}catch(oe){console.error("Failed to add comment:",oe)}},j=$=>{const K=new Date($);return new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(K)},I=$=>$&&$.split(" ").map(K=>K[0]).join("").toUpperCase().slice(0,2)||"U",H=async $=>{if(!R)return;const K=s("deleteCommentConfirm")||" ,     ?";if(confirm(K))try{await d.mutateAsync({commentName:$,doctype:n,docname:e})}catch(Z){console.error("Failed to delete comment:",Z);const oe=s("deleteCommentError")||"   ";alert(oe)}};return g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[g.jsx(MU,{className:"h-4 w-4"}),s("comments"),g.jsxs("span",{className:"text-muted-foreground",children:["(",h.length,")"]})]}),a?g.jsxs("div",{className:"text-sm text-muted-foreground",children:[s("loading"),"..."]}):g.jsx("div",{ref:_,className:`pr-2 ${PE.customScrollbar}`,onScroll:M,style:{maxHeight:"300px",overflowY:"scroll"},children:g.jsxs("div",{ref:C,className:"space-y-3",children:[g.jsx(vu,{mode:"popLayout",children:k.map($=>{const K=$.name===S;return g.jsxs(Xr.div,{layout:!0,initial:K?{opacity:0,x:-100}:!1,animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{type:"spring",stiffness:400,damping:30,mass:.8},className:"flex gap-3",children:[g.jsx("div",{className:"h-8 w-8 rounded-full bg-primary flex items-center justify-center shrink-0",children:g.jsx("span",{className:"text-xs font-medium text-primary-foreground",children:I($.comment_by)})}),g.jsxs("div",{className:"flex-1 space-y-1",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-sm font-medium",children:$.comment_by}),g.jsx("span",{className:"text-xs text-muted-foreground",children:j($.creation)})]}),R&&g.jsx(Ye,{variant:"ghost",size:"sm",onClick:()=>H($.name),className:"h-6 w-6 p-0 text-muted-foreground hover:text-destructive",children:g.jsx(eD,{className:"h-3 w-3"})})]}),g.jsx("div",{className:`text-sm text-foreground ${PE.commentContent}`,dangerouslySetInnerHTML:{__html:$.content}})]})]},$.name)})}),N&&g.jsx("div",{className:"text-center py-2 text-xs text-muted-foreground",children:"    ..."})]})}),g.jsxs(Xr.form,{ref:T,onSubmit:P,className:"space-y-2",animate:c.isPending?{scale:.98}:{scale:1},transition:{type:"spring",stiffness:500,damping:30},children:[g.jsx(Zq,{value:b,onChange:A,placeholder:s("addComment")}),g.jsxs(Ye,{type:"submit",size:"sm",disabled:c.isPending,children:[g.jsx(UU,{className:"h-4 w-4 mr-2"}),c.isPending?s("sending"):s("send")]})]})]})}const vN=x.forwardRef(({className:n,value:e=0,...t},s)=>g.jsx("div",{ref:s,className:Ze("relative h-4 w-full overflow-hidden rounded-full bg-secondary",n),...t,children:g.jsx("div",{className:"h-full bg-primary transition-all duration-300 ease-in-out",style:{width:`${Math.min(100,Math.max(0,e))}%`}})}));vN.displayName="Progress";const In=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Rv=[.001,0,0,.001,0,0],yy=1.35,ys={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},wi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Eu="pdfjs_internal_editor_",We={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ct={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},bN={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Cn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},lu={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Gt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},sl={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},qu={ERRORS:0,WARNINGS:1,INFOS:5},_l={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Rh={moveTo:0,lineTo:1,curveTo:2,closePath:3},xN={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let im=qu.WARNINGS;function rG(n){Number.isInteger(n)&&(im=n)}function aG(){return im}function rm(n){im>=qu.INFOS&&console.info(`Info: ${n}`)}function Qe(n){im>=qu.WARNINGS&&console.warn(`Warning: ${n}`)}function _t(n){throw new Error(n)}function dt(n,e){n||_t(e)}function oG(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function cb(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=hG(n)}catch{}const s=e?URL.parse(n,e):URL.parse(n);return oG(s)?s:null}function ub(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&cb(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function tt(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const oo=(function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e})();class kE extends oo{constructor(e,t){super(e,"PasswordException"),this.code=t}}class vy extends oo{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Ef extends oo{constructor(e){super(e,"InvalidPDFException")}}class _u extends oo{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class lG extends oo{constructor(e){super(e,"FormatError")}}class mr extends oo{constructor(e){super(e,"AbortException")}}function wN(n){(typeof n!="object"||n?.length===void 0)&&_t("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<e;i+=t){const a=Math.min(i+t,e),o=n.subarray(i,a);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function Gu(n){typeof n!="string"&&_t("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function cG(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function uG(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function dG(){try{return new Function(""),!0}catch{return!1}}class gn{static get isLittleEndian(){return tt(this,"isLittleEndian",uG())}static get isEvalSupported(){return tt(this,"isEvalSupported",dG())}static get isOffscreenCanvasSupported(){return tt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return tt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return tt(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return tt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const by=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class De{static makeHexColor(e,t,s){return`#${by[e]}${by[t]}${by[s]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,s=0){const i=e[s],a=e[s+1];e[s]=i*t[0]+a*t[2]+t[4],e[s+1]=i*t[1]+a*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const i=t[0],a=t[1],o=t[2],c=t[3],d=t[4],h=t[5];for(let f=0;f<6;f+=2){const p=e[s+f],y=e[s+f+1];e[s+f]=p*i+y*o+d,e[s+f+1]=p*a+y*c+h}}static applyInverseTransform(e,t){const s=e[0],i=e[1],a=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/a,e[1]=(-s*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/a}static axialAlignedBoundingBox(e,t,s){const i=t[0],a=t[1],o=t[2],c=t[3],d=t[4],h=t[5],f=e[0],p=e[1],y=e[2],b=e[3];let A=i*f+d,S=A,E=i*y+d,C=E,_=c*p+h,T=_,R=c*b+h,M=R;if(a!==0||o!==0){const k=a*f,N=a*y,P=o*p,j=o*b;A+=P,C+=P,E+=j,S+=j,_+=k,M+=k,R+=N,T+=N}s[0]=Math.min(s[0],A,E,S,C),s[1]=Math.min(s[1],_,R,T,M),s[2]=Math.max(s[2],A,E,S,C),s[3]=Math.max(s[3],_,R,T,M)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],i=e[1],a=e[2],o=e[3],c=s**2+i**2,d=s*a+i*o,h=a**2+o**2,f=(c+h)/2,p=Math.sqrt(f**2-(c*h-d**2));t[0]=Math.sqrt(f+p||1),t[1]=Math.sqrt(f-p||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>o?null:[s,a,i,o]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,i,a){a[0]=Math.min(a[0],e,s),a[1]=Math.min(a[1],t,i),a[2]=Math.max(a[2],e,s),a[3]=Math.max(a[3],t,i)}static#e(e,t,s,i,a,o,c,d,h,f){if(h<=0||h>=1)return;const p=1-h,y=h*h,b=y*h,A=p*(p*(p*e+3*h*t)+3*y*s)+b*i,S=p*(p*(p*a+3*h*o)+3*y*c)+b*d;f[0]=Math.min(f[0],A),f[1]=Math.min(f[1],S),f[2]=Math.max(f[2],A),f[3]=Math.max(f[3],S)}static#t(e,t,s,i,a,o,c,d,h,f,p,y){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&this.#e(e,t,s,i,a,o,c,d,-p/f,y);return}const b=f**2-4*p*h;if(b<0)return;const A=Math.sqrt(b),S=2*h;this.#e(e,t,s,i,a,o,c,d,(-f+A)/S,y),this.#e(e,t,s,i,a,o,c,d,(-f-A)/S,y)}static bezierBoundingBox(e,t,s,i,a,o,c,d,h){h[0]=Math.min(h[0],e,c),h[1]=Math.min(h[1],t,d),h[2]=Math.max(h[2],e,c),h[3]=Math.max(h[3],t,d),this.#t(e,s,a,c,t,i,o,d,3*(-e+3*(s-a)+c),6*(e-2*s+a),3*(s-e),h),this.#t(e,s,a,c,t,i,o,d,3*(-t+3*(i-o)+d),6*(t-2*i+o),3*(i-t),h)}}function hG(n){return decodeURIComponent(escape(n))}let xy=null,OE=null;function SN(n){return xy||(xy=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,OE=new Map([["","t"]])),n.replaceAll(xy,(e,t,s)=>t?t.normalize("NFKC"):OE.get(s))}function db(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),wN(n)}const hb="pdfjs_internal_id_";function fG(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,i,...a]=t;if(!n(s)&&!Number.isInteger(s)||!e(i))return!1;const o=a.length;let c=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;c=!1;break;default:return!1}for(const d of a)if(!(typeof d=="number"||c&&d===null))return!1;return!0}function Dn(n,e,t){return Math.min(Math.max(n,e),t)}function AN(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(wN(n))}function mG(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Gu(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class Tu{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function i(a){if(!a)return;let o=null;const c=a.name;if(c==="#text")o=a.value;else if(Tu.shouldBuildText(c))a?.attributes?.textContent?o=a.attributes.textContent:a.value&&(o=a.value);else return;if(o!==null&&t.push({str:o}),!!a.children)for(const d of a.children)i(d)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class fb{static setupStorage(e,t,s,i,a){const o=i.getValue(t,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),a==="print")break;e.addEventListener("input",c=>{i.setValue(t,{value:c.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",c=>{i.setValue(t,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),a==="print")break;e.addEventListener("input",c=>{i.setValue(t,{value:c.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const c of s.children)c.attributes.value===o.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}e.addEventListener("input",c=>{const d=c.target.options,h=d.selectedIndex===-1?"":d[d.selectedIndex].value;i.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:i,linkService:a}){const{attributes:o}=t,c=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[d,h]of Object.entries(o))if(h!=null)switch(d){case"class":h.length&&e.setAttribute(d,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!c||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,h)}c&&a.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,t,s)}static render(e){const t=e.annotationStorage,s=e.linkService,i=e.xfaHtml,a=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:a,linkService:s});const c=a!=="richText",d=e.div;if(d.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=p}c&&d.setAttribute("class","xfaLayer xfaFont");const h=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);o.append(p),c&&Tu.shouldBuildText(i.name)&&h.push(p)}return{textDivs:h}}const f=[[i,-1,o]];for(;f.length>0;){const[p,y,b]=f.at(-1);if(y+1===p.children.length){f.pop();continue}const A=p.children[++f.at(-1)[1]];if(A===null)continue;const{name:S}=A;if(S==="#text"){const C=document.createTextNode(A.value);h.push(C),b.append(C);continue}const E=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,S):document.createElement(S);if(b.append(E),A.attributes&&this.setAttributes({html:E,element:A,storage:t,intent:a,linkService:s}),A.children?.length>0)f.push([A,-1,E]);else if(A.value){const C=document.createTextNode(A.value);c&&Tu.shouldBuildText(S)&&h.push(C),E.append(C)}}for(const p of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const er="http://www.w3.org/2000/svg";class Ja{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Ul(n,e="text"){if(Qc(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class Ku{constructor({viewBox:e,userUnit:t,scale:s,rotation:i,offsetX:a=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=i,this.offsetX=a,this.offsetY=o,s*=t;const d=(e[2]+e[0])/2,h=(e[3]+e[1])/2;let f,p,y,b;switch(i%=360,i<0&&(i+=360),i){case 180:f=-1,p=0,y=0,b=1;break;case 90:f=0,p=1,y=1,b=0;break;case 270:f=0,p=-1,y=-1,b=0;break;case 0:f=1,p=0,y=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(y=-y,b=-b);let A,S,E,C;f===0?(A=Math.abs(h-e[1])*s+a,S=Math.abs(d-e[0])*s+o,E=(e[3]-e[1])*s,C=(e[2]-e[0])*s):(A=Math.abs(d-e[0])*s+a,S=Math.abs(h-e[1])*s+o,E=(e[2]-e[0])*s,C=(e[3]-e[1])*s),this.transform=[f*s,p*s,y*s,b*s,A-f*s*d-y*s*h,S-p*s*d-b*s*h],this.width=E,this.height=C}get rawDims(){const e=this.viewBox;return tt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new Ku({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:a})}convertToViewportPoint(e,t){const s=[e,t];return De.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];De.applyTransform(t,this.transform);const s=[e[2],e[3]];return De.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return De.applyInverseTransform(s,this.transform),s}}class am extends oo{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Yu(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function om(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function CN(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function EN(n,e="document.pdf"){if(typeof n!="string")return e;if(Yu(n))return Qe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const i=c=>{try{let d=decodeURIComponent(c);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:c):d}catch{return c}},a=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(a.test(o))return i(o);if(s.searchParams.size>0){const c=Array.from(s.searchParams.values()).reverse();for(const h of c)if(a.test(h))return i(h);const d=Array.from(s.searchParams.keys()).reverse();for(const h of d)if(a.test(h))return i(h)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return i(d[0])}return e}class jE{started=Object.create(null);times=[];time(e){e in this.started&&Qe(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Qe(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:i,end:a}of this.times)e.push(`${s.padEnd(t)} ${a-i}ms
`);return e.join("")}}function Qc(n,e){const t=e?URL.parse(n,e):URL.parse(n);return t?.protocol==="http:"||t?.protocol==="https:"}function Cs(n){n.preventDefault()}function Ft(n){n.preventDefault(),n.stopPropagation()}function pG(n){console.log("Deprecated API usage: "+n)}class _f{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const s=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let c=parseInt(t[5],10);c=c>=0&&c<=59?c:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const h=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let p=parseInt(t[9],10)||0;return p=p>=0&&p<=59?p:0,h==="-"?(o+=f,c+=p):h==="+"&&(o-=f,c-=p),new Date(Date.UTC(s,i,a,o,c,d))}}function _N(n,{scale:e=1,rotation:t=0}){const{width:s,height:i}=n.attributes.style,a=[0,0,parseInt(s),parseInt(i)];return new Ku({viewBox:a,userUnit:1,scale:e,rotation:t})}function Vl(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Qe(`Not a valid color format: "${n}"`),[0,0,0])}function gG(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,Vl(s))}e.remove()}function Lt(n){const{a:e,b:t,c:s,d:i,e:a,f:o}=n.getTransform();return[e,t,s,i,a,o]}function pi(n){const{a:e,b:t,c:s,d:i,e:a,f:o}=n.getTransform().invertSelf();return[e,t,s,i,a,o]}function na(n,e,t=!1,s=!0){if(e instanceof Ku){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:o}=n,c=gn.isCSSRoundSupported,d=`var(--total-scale-factor) * ${i}px`,h=`var(--total-scale-factor) * ${a}px`,f=c?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,p=c?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!t||e.rotation%180===0?(o.width=f,o.height=p):(o.width=p,o.height=f)}s&&n.setAttribute("data-main-rotation",e.rotation)}class ai{constructor(){const{pixelRatio:e}=ai;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,i,a=-1){let o=1/0,c=1/0,d=1/0;s=ai.capPixels(s,a),s>0&&(o=Math.sqrt(s/(e*t))),i!==-1&&(c=i/e,d=i/t);const h=Math.min(o,c,d);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const Tf=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class yG{static get isDarkMode(){return tt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class TN{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:s}=window.getComputedStyle(e);return e.remove(),tt(this,"commentForegroundColor",Vl(s))}}function RN(n,e,t,s){s=Math.min(Math.max(s??1,0),1);const i=255*(1-s);return n=Math.round(n*s+i),e=Math.round(e*s+i),t=Math.round(t*s+i),[n,e,t]}function LE(n,e){const t=n[0]/255,s=n[1]/255,i=n[2]/255,a=Math.max(t,s,i),o=Math.min(t,s,i),c=(a+o)/2;if(a===o)e[0]=e[1]=0;else{const d=a-o;switch(e[1]=c<.5?d/(a+o):d/(2-a-o),a){case t:e[0]=((s-i)/d+(s<i?6:0))*60;break;case s:e[0]=((i-t)/d+2)*60;break;case i:e[0]=((t-s)/d+4)*60;break}}e[2]=c}function Dv(n,e){const t=n[0],s=n[1],i=n[2],a=(1-Math.abs(2*i-1))*s,o=a*(1-Math.abs(t/60%2-1)),c=i-a/2;switch(Math.floor(t/60)){case 0:e[0]=a+c,e[1]=o+c,e[2]=c;break;case 1:e[0]=o+c,e[1]=a+c,e[2]=c;break;case 2:e[0]=c,e[1]=a+c,e[2]=o+c;break;case 3:e[0]=c,e[1]=o+c,e[2]=a+c;break;case 4:e[0]=o+c,e[1]=c,e[2]=a+c;break;case 5:case 6:e[0]=a+c,e[1]=c,e[2]=o+c;break}}function FE(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function IE(n,e,t){Dv(n,t),t.map(FE);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];Dv(e,t),t.map(FE);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return s>i?(s+.05)/(i+.05):(i+.05)/(s+.05)}const BE=new Map;function DN(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let s=BE.get(t);if(s)return s;const i=new Float32Array(9),a=i.subarray(0,3),o=i.subarray(3,6);LE(n,o);const c=i.subarray(6,9);LE(e,c);const d=c[2]<.5,h=d?12:4.5;if(o[2]=d?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),IE(o,c,a)<h){let f,p;d?(f=o[2],p=1):(f=0,p=o[2]);const y=.005;for(;p-f>y;){const b=o[2]=(f+p)/2;d===IE(o,c,a)<h?f=b:p=b}o[2]=d?p:f}return Dv(o,a),s=De.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),BE.set(t,s),s}function mb({html:n,dir:e,className:t},s){const i=document.createDocumentFragment();if(typeof n=="string"){const a=document.createElement("p");a.dir=e||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let c=0,d=o.length;c<d;++c){const h=o[c];a.append(document.createTextNode(h)),c<d-1&&a.append(document.createElement("br"))}i.append(a)}else fb.render({xfaHtml:n,div:i,intent:"richText"});i.firstChild.classList.add("richText",t),s.append(i)}class cu{#e=null;#t=null;#s;#n=null;#i=null;#r=null;#a=null;#o=null;static#c=null;constructor(e){this.#s=e,cu.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#s._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Cs,{signal:t}),e.addEventListener("pointerdown",cu.#l,{signal:t}));const s=this.#n=document.createElement("div");s.className="buttons",e.append(s);const i=this.#s.toolbarPosition;if(i){const{style:a}=e,o=this.#s._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*o}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#s._focusEventsAllowed=!1,Ft(e)}#d(e){this.#s._focusEventsAllowed=!0,Ft(e)}#f(e){const t=this.#s._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Cs,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#i?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#s,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",cu.#c[e]),this.#f(s)&&s.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#n.append(s)}get#g(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#n.append(t,this.#g),this.#i=e}addComment(e,t=null){if(this.#r)return;const s=e.renderForToolbar();if(!s)return;this.#f(s);const i=this.#a=this.#g;t?(this.#n.insertBefore(s,t),this.#n.insertBefore(i,t)):this.#n.append(s,i),this.#r=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#n.append(t,this.#g)}async addEditSignatureButton(e){const t=this.#o=await e.renderEditButton(this.#s);this.#f(t),this.#n.append(t,this.#g)}removeButton(e){e==="comment"&&(this.#r?.removeToolbarCommentButton(),this.#r=null,this.#a?.remove(),this.#a=null)}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,s){const i=this.#n.querySelector(s);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class vG{#e=null;#t=null;#s;constructor(e){this.#s=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#s._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Cs,{signal:t});const s=this.#e=document.createElement("div");return s.className="buttons",e.append(s),this.#s.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#s.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#s.highlightSelection("floating_button")}),e}#i(e,t){let s=0,i=0;for(const a of e){const o=a.y+a.height;if(o<s)continue;const c=a.x+(t?a.width:0);if(o>s){i=c,s=o;continue}t?c>i&&(i=c):c<i&&(i=c)}return[t?1-i:i,s]}show(e,t,s){const[i,a]=this.#i(t,s),{style:o}=this.#t||=this.#n();e.append(this.#t),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#r(e,t,s,i){const a=document.createElement("button");a.classList.add("basic",e),a.tabIndex=0,a.setAttribute("data-l10n-id",t);const o=document.createElement("span");a.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",s);const c=this.#s._signal;c instanceof AbortSignal&&!c.aborted&&(a.addEventListener("contextmenu",Cs,{signal:c}),a.addEventListener("click",i,{signal:c})),this.#e.append(a)}}function MN(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}class bG{#e=0;get id(){return`${Eu}${this.#e++}`}}class pb{#e=db();#t=0;#s=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return tt(this,"_isSVGFittingCanvas",a)}async#n(e,t){this.#s||=new Map;let s=this.#s.get(e);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(s.url=t,i=await Ul(t,"blob")):t instanceof File?i=s.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const a=pb._isSVGFittingCanvas,o=new FileReader,c=new Image,d=new Promise((h,f)=>{c.onload=()=>{s.bitmap=c,s.isSvg=!0,h()},o.onload=async()=>{const p=s.svgUrl=o.result;c.src=await a?`${p}#svgView(preserveAspectRatio(none))`:p},c.onerror=o.onerror=f});o.readAsDataURL(i),await d}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){Qe(i),s=null}return this.#s.set(e,s),s&&this.#s.set(s.id,s),s}async getFromFile(e){const{lastModified:t,name:s,size:i,type:a}=e;return this.#n(`${t}_${s}_${i}_${a}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const s=await t;return this.#n(e,s)}async getFromId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#s||=new Map;let s=this.#s.get(e);if(s?.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#s.set(e,s),this.#s.set(s.id,s),s}getSvgUrl(e){const t=this.#s.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=i.convertToBlob()}s.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class xG{#e=[];#t=!1;#s;#n=-1;constructor(e=128){this.#s=e}add({cmd:e,undo:t,post:s,mustExec:i,type:a=NaN,overwriteIfSameType:o=!1,keepUndo:c=!1}){if(i&&e(),this.#t)return;const d={cmd:e,undo:t,post:s,type:a};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(d);return}if(o&&this.#e[this.#n].type===a){c&&(d.undo=this.#e[this.#n].undo),this.#e[this.#n]=d;return}const h=this.#n+1;h===this.#s?this.#e.splice(0,1):(this.#n=h,h<this.#e.length&&this.#e.splice(h)),this.#e.push(d)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class Xu{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=gn.platform;for(const[s,i,a={}]of e)for(const o of s){const c=o.startsWith("mac+");t&&c?(this.callbacks.set(o.slice(4),{callback:i,options:a}),this.allKeys.add(o.split("+").at(-1))):!t&&!c&&(this.callbacks.set(o,{callback:i,options:a}),this.allKeys.add(o.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(this.#e(t));if(!s)return;const{callback:i,options:{bubbles:a=!1,args:o=[],checker:c=null}}=s;c&&!c(e,t)||(i.bind(e,...o,t)(),a||Ft(t))}}class gb{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return gG(e),tt(this,"_colors",e)}convert(e){const t=Vl(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,i]of this._colors)if(i.every((a,o)=>a===t[o]))return gb._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?De.makeHexColor(...t):e}}class pr{#e=new AbortController;#t=null;#s=null;#n=new Map;#i=new Map;#r=null;#a=null;#o=null;#c=new xG;#l=null;#h=null;#d=null;#f=0;#g=new Set;#m=null;#u=null;#p=new Set;_editorUndoBar=null;#y=!1;#b=!1;#v=!1;#C=null;#S=null;#x=null;#_=null;#A=!1;#E=null;#M=new bG;#R=!1;#D=!1;#F=!1;#P=null;#O=null;#I=null;#j=null;#$=null;#T=We.NONE;#w=new Set;#k=null;#B=null;#U=null;#K=null;#G=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#V=[0,0];#L=null;#q=null;#Z=null;#J=null;#z=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=pr.prototype,t=o=>o.#q.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:c})=>{if(c instanceof HTMLInputElement){const{type:d}=c;return d!=="text"&&d!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return tt(this,"_keyboardManager",new Xu([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&o.#q.contains(c)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&o.#q.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}constructor(e,t,s,i,a,o,c,d,h,f,p,y,b,A,S,E){const C=this._signal=this.#e.signal;this.#q=e,this.#Z=t,this.#J=s,this.#r=i,this.#l=a,this.#B=o,this.#G=d,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:C}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:C}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:C}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:C}),c._on("setpreference",this.onSetPreference.bind(this),{signal:C}),c._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:C}),window.addEventListener("pointerdown",()=>{this.#D=!0},{capture:!0,signal:C}),window.addEventListener("pointerup",()=>{this.#D=!1},{capture:!0,signal:C}),this.#le(),this.#he(),this.#te(),this.#a=d.annotationStorage,this.#C=d.filterFactory,this.#U=h,this.#_=f||null,this.#y=p,this.#b=y,this.#v=b,this.#$=A||null,this.viewParameters={realScale:Ja.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=E!==!1,a?.setSidebarUiManager(this)}destroy(){this.#z?.resolve(),this.#z=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#i.values())e.destroy();this.#i.clear(),this.#n.clear(),this.#p.clear(),this.#j?.clear(),this.#t=null,this.#w.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#B?.destroy(),this.#E?.hide(),this.#E=null,this.#I?.destroy(),this.#I=null,this.#s=null,this.#S&&(clearTimeout(this.#S),this.#S=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy(),this.#G=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#$}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return tt(this,"hcmFilter",this.#U?this.#C.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return tt(this,"direction",getComputedStyle(this.#q).direction)}get _highlightColors(){return tt(this,"_highlightColors",this.#_?new Map(this.#_.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return tt(this,"highlightColors",null);const t=new Map,s=!!this.#U;for(const[i,a]of e){const o=i.endsWith("_HCM");if(s&&o){t.set(i.replace("_HCM",""),a);continue}!s&&!o&&t.set(i,a)}return tt(this,"highlightColors",t)}get highlightColorNames(){return tt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=e}setMainHighlightColorPicker(e){this.#I=e}editAltText(e,t=!1){this.#r?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,s,i){this.#l?.showDialog(this,e,t,s,i)}selectComment(e,t){this.#i.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,t,s=void 0){this.#l?.toggleCommentPopup(e,t,s)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#i.has(e-1))return;const{resolve:t,promise:s}=Promise.withResolvers(),i=a=>{a.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await s}getSignature(e){this.#B?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#B}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){e==="enableNewAltTextWhenAddingImage"&&(this.#v=t)}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#q.focus()}findParent(e,t){for(const s of this.#i.values()){const{x:i,y:a,width:o,height:c}=s.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=a&&t<=a+c)return s}return null}disableUserSelect(e=!1){this.#Z.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Ja.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Q({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of this.#i.values())if(s.hasTextLayer(e))return s;return null}highlightSelection(e="",t=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:i,anchorOffset:a,focusNode:o,focusOffset:c}=s,d=s.toString(),f=this.#Q(s).closest(".textLayer"),p=this.getSelectionBoxes(f);if(!p)return;s.empty();const y=this.#ee(f),b=this.#T===We.NONE,A=()=>{const S=y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:p,anchorNode:i,anchorOffset:a,focusNode:o,focusOffset:c,text:d});b&&this.showAllEditors("highlight",!0,!0),t&&S?.editComment()};if(b){this.switchToMode(We.HIGHLIGHT,A);return}A()}commentSelection(e=""){this.highlightSelection(e,!0)}#ae(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=this.#Q(e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(this.#E||=new vG(this),this.#E.show(s,i,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#a)return null;const t=`${Eu}${e}`,s=this.#a.getRawValue(t);return s&&this.#a.remove(t),s}addToAnnotationStorage(e){!e.isEmpty()&&this.#a&&!this.#a.has(e.id)&&this.#a.setValue(e.id,e)}a11yAlert(e,t=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}#oe(){const e=document.getSelection();if(!e||e.isCollapsed){this.#k&&(this.#E?.hide(),this.#k=null,this.#N({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#k)return;const i=this.#Q(e).closest(".textLayer");if(!i){this.#k&&(this.#E?.hide(),this.#k=null,this.#N({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#k=t,this.#N({hasSelectedText:!0}),!(this.#T!==We.HIGHLIGHT&&this.#T!==We.NONE)&&(this.#T===We.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#T===We.HIGHLIGHT?this.#ee(i):null;if(a?.toggleDrawing(),this.#D){const o=new AbortController,c=this.combinedSignal(o),d=h=>{h.type==="pointerup"&&h.button!==0||(o.abort(),a?.toggleDrawing(!0),h.type==="pointerup"&&this.#X("main_toolbar"))};window.addEventListener("pointerup",d,{signal:c}),window.addEventListener("blur",d,{signal:c})}else a?.toggleDrawing(!0),this.#X("main_toolbar")}}#X(e=""){this.#T===We.HIGHLIGHT?this.highlightSelection(e):this.#y&&this.#ae()}#le(){document.addEventListener("selectionchange",this.#oe.bind(this),{signal:this._signal})}#ce(){if(this.#x)return;this.#x=new AbortController;const e=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ue(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#X("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#w)if(t.div.contains(e)){this.#O=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[e,t]=this.#O;this.#O=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#P)return;this.#P=new AbortController;const e=this.combinedSignal(this.#P);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#de(){this.#P?.abort(),this.#P=null}#ne(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#se(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.#ne()}removeEditListeners(){this.#de(),this.#se()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of this.#w){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const o of this.#u)if(o.isHandlingMimeForPasting(a.type)){o.paste(a,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(a){Qe(`paste: "${a.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const d of s){const h=await i.deserialize(d);if(!h)return;a.push(h)}const o=()=>{for(const d of a)this.#ie(d);this.#re(a)},c=()=>{for(const d of a)d.remove()};this.addCommands({cmd:o,undo:c,mustExec:!0})}catch(a){Qe(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==We.NONE&&!this.isEditorHandlingKeyboard&&pr._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#X("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#N(e){Object.entries(e).some(([s,i])=>this.#Y[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,e)}),this.#T===We.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#H([[ct.HIGHLIGHT_FREE,!0]]))}#H(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ce(),this.#ne(),this.#N({isEditing:this.#T!==We.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ue(),this.#se(),this.#N({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#u){this.#u=e;for(const t of this.#u)this.#H(t.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#i.get(this.#f)}getLayer(e){return this.#i.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#i.set(e.pageIndex,e),this.#R?e.enable():e.disable()}removeLayer(e){this.#i.delete(e.pageIndex)}async updateMode(e,t=null,s=!1,i=!1,a=!1){if(this.#T!==e&&!(this.#z&&(await this.#z.promise,!this.#z))){if(this.#z=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#T===We.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=e,e===We.NONE){this.setEditingState(!1),this.#me();for(const o of this.#n.values())o.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#z.resolve();return}for(const o of this.#n.values())o.addStandaloneCommentButton();e===We.SIGNATURE&&await this.#B?.loadSignatures(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const o of this.#i.values())o.updateMode(e);if(e===We.POPUP){this.#s||=await this.#G.getAnnotationsByType(new Set(this.#u.map(d=>d._editorType)));const o=new Set,c=[];for(const d of this.#n.values()){const{annotationElementId:h,hasComment:f,deleted:p}=d;h&&o.add(h),f&&!p&&c.push(d.getData())}for(const d of this.#s){const{id:h,popupRef:f,contentsObj:p}=d;f&&p?.str&&!o.has(h)&&!this.#g.has(h)&&c.push(d)}this.#l?.showSidebar(c)}if(!t){s&&this.addNewEditorFromKeyboard(),this.#z.resolve();return}for(const o of this.#n.values())o.uid===t?(this.setSelected(o),a?o.editComment():i?o.enterInEditMode():o.focus()):o.unselect();this.#z.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#u){switch(e){case ct.CREATE:this.currentLayer.addNewEditor(t);return;case ct.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#K||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const s of this.#w)s.updateParams(e,t);else for(const s of this.#u)s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){for(const a of this.#n.values())a.editorType===e&&a.show(t);(this.#K?.get(ct.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#H([[ct.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#F!==e){this.#F=e;for(const t of this.#i.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#R){this.#R=!0;const e=[];for(const t of this.#i.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#me(){if(this.unselectAll(),this.#R){this.#R=!1;for(const e of this.#i.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const t of this.#n.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#S&&clearTimeout(this.#S),this.#S=setTimeout(()=>{this.focusMainContainer(),this.#S=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#j?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#a?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ie(e){const t=this.#i.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#H(e.propertiesToUpdate))}get#pe(){let e=null;for(e of this.#w);return e}updateUI(e){this.#pe===e&&this.#H(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#H(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#N({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#H(e.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#d?.commitOrRemove();for(const t of this.#w)t!==e&&t.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#H(e.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#N({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#N({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(e){this.#c.add(e),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(e){this.#c.cleanType(e)}#W(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#w],s=()=>{this._editorUndoBar?.show(i,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},i=()=>{for(const a of t)this.#ie(a)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#re(e){for(const t of this.#w)t.unselect();this.#w.clear();for(const t of e)t.isEmpty()||(this.#w.add(t),t.select());this.#N({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#re(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#T!==We.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#N({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#V[0]+=e,this.#V[1]+=t;const[i,a]=this.#V,o=[...this.#w],c=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#V[0]=this.#V[1]=0,this.addCommands({cmd:()=>{for(const d of o)this.#n.has(d.id)&&(d.translateInPage(i,a),d.translationDone())},undo:()=>{for(const d of o)this.#n.has(d.id)&&(d.translateInPage(-i,-a),d.translationDone())},mustExec:!1})},c);for(const d of o)d.translateInPage(e,t),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const e of this.#w)this.#m.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const e=this.#m;this.#m=null;let t=!1;for(const[{x:i,y:a,pageIndex:o},c]of e)c.newX=i,c.newY=a,c.newPageIndex=o,t||=i!==c.savedX||a!==c.savedY||o!==c.savedPageIndex;if(!t)return!1;const s=(i,a,o,c)=>{if(this.#n.has(i.id)){const d=this.#i.get(c);d?i._setParentAndPosition(d,a,o):(i.pageIndex=c,i.x=a,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:o,newPageIndex:c}]of e)s(i,a,o,c)},undo:()=>{for(const[i,{savedX:a,savedY:o,savedPageIndex:c}]of e)s(i,a,o,c)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#m)for(const s of this.#m.keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#T}isEditingMode(){return this.#T!==We.NONE}get imageManager(){return tt(this,"imageManager",new pb)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,f=t.rangeCount;h<f;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:s,y:i,width:a,height:o}=e.getBoundingClientRect();let c;switch(e.getAttribute("data-main-rotation")){case"90":c=(h,f,p,y)=>({x:(f-i)/o,y:1-(h+p-s)/a,width:y/o,height:p/a});break;case"180":c=(h,f,p,y)=>({x:1-(h+p-s)/a,y:1-(f+y-i)/o,width:p/a,height:y/o});break;case"270":c=(h,f,p,y)=>({x:1-(f+y-i)/o,y:(h-s)/a,width:y/o,height:p/a});break;default:c=(h,f,p,y)=>({x:(h-s)/a,y:(f-i)/o,width:p/a,height:y/o});break}const d=[];for(let h=0,f=t.rangeCount;h<f;h++){const p=t.getRangeAt(h);if(!p.collapsed)for(const{x:y,y:b,width:A,height:S}of p.getClientRects())A===0||S===0||d.push(c(y,b,A,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#o||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const t=this.#o?.get(e.data.id);if(!t)return;const s=this.#a.getRawValue(t);s&&(this.#T===We.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){const i=this.#j?.get(e);i&&(i.setCanvas(t,s),this.#j.delete(e))}addMissingCanvas(e,t){(this.#j||=new Map).set(e,t)}}class vi{#e=null;#t=!1;#s=null;#n=null;#i=null;#r=null;#a=!1;#o=null;#c=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#d=e._uiManager.useNewAltTextFlow,vi.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){vi._l10n??=e}async render(){const e=this.#s=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",vi.#f.missing),t.setAttribute("data-l10n-id",vi.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;e.addEventListener("contextmenu",Cs,{signal:s}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:s});const i=a=>{a.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#d&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#a=!0,i(a))},{signal:s}),await this.#m(),e}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await vi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#m())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:i,cancel:a=!1}){s&&(this.#l=s,this.#h=i),!(this.#e===e&&this.#t===t)&&(a||(this.#e=e,this.#t=t),this.#m())}toggle(e=!1){this.#s&&(!e&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#s.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#s?.remove(),this.#s=null,this.#n=null,this.#i=null,this.#o?.remove(),this.#o=null}async#m(){const e=this.#s;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",vi.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",vi.#f[`${this.#g}-label`]),!this.#e){this.#i?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#i?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#i;if(!t){this.#i=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const i=100,a=this.#c._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#i.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:a}),e.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#i?.classList.remove("show")},{signal:a})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class Dh{#e=null;#t=null;#s=!1;#n=null;#i=null;#r=null;#a=null;#o=null;#c=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#n.commentButtonPosition;if(t){const{style:s}=e;s.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=this.#n.commentButtonColor;i&&(s.backgroundColor=i)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:s}=this.#e.getBoundingClientRect(),{x:i,y:a,width:o,height:c}=this.#n.parent.boundingClientRect;return[(e-i)/o,(t+s-a)/c]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=this.#n._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return e;e.addEventListener("contextmenu",Cs,{signal:s}),t&&(e.addEventListener("focusin",a=>{this.#n._focusEventsAllowed=!1,Ft(a)},{capture:!0,signal:s}),e.addEventListener("focusout",a=>{this.#n._focusEventsAllowed=!0,Ft(a)},{capture:!0,signal:s})),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:s});const i=a=>{a.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#s=!0,i(a))},{signal:s}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:s}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:s}),e}edit(e){const t=this.commentPopupPositionInLayer;let s,i;if(t)[s,i]=t;else{[s,i]=this.#n.commentButtonPosition;const{width:f,height:p,x:y,y:b}=this.#n;s=y+s*f,i=b+i*p}const a=this.#n.parent.boundingClientRect,{x:o,y:c,width:d,height:h}=a;this.#n._uiManager.editComment(this.#n,o+s*d,c+i*h,{...e,parentDimensions:a})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#s}),this.#s=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#i}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#a&&(this.#r=null),e===null){this.#a="",this.#c=!0;return}this.#a=e,this.#o=new Date,this.#c=!1}setInitialText(e,t=null){this.#i=e,this.data=e,this.#o=null,this.#r=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#a="",this.#r=null,this.#o=null,this.#n=null,this.#s=!1,this.#c=!1}}class Wu{#e;#t=!1;#s=null;#n;#i;#r;#a;#o=null;#c;#l=null;#h;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:o=null,signal:c}){this.#e=e,this.#s=s,this.#n=t,this.#i=i,this.#r=a,this.#a=o,this.#h=new AbortController,this.#c=AbortSignal.any([c,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ai.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const i=this.#o=new AbortController,a=AbortSignal.any([this.#c,i.signal]),o=this.#e,c={capture:!0,signal:a,passive:!1},d=h=>{h.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};o.addEventListener("pointerdown",h=>{h.pointerType==="touch"&&(Ft(h),d(h))},c),o.addEventListener("pointerup",d,c),o.addEventListener("pointercancel",d,c);return}if(!this.#d){this.#d=new AbortController;const i=AbortSignal.any([this.#c,this.#d.signal]),a=this.#e,o={signal:i,capture:!1,passive:!1};a.addEventListener("touchmove",this.#g.bind(this),o);const c=this.#m.bind(this);a.addEventListener("touchend",c,o),a.addEventListener("touchcancel",c,o),o.capture=!0,a.addEventListener("pointerdown",Ft,o),a.addEventListener("pointermove",Ft,o),a.addEventListener("pointercancel",Ft,o),a.addEventListener("pointerup",Ft,o),this.#i?.()}if(Ft(e),e.touches.length!==2||this.#s?.()){this.#l=null;return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#g(e){if(!this.#l||e.touches.length!==2)return;Ft(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:i,screenY:a}=t,{screenX:o,screenY:c}=s,d=this.#l,{touch0X:h,touch0Y:f,touch1X:p,touch1Y:y}=d,b=p-h,A=y-f,S=o-i,E=c-a,C=Math.hypot(S,E)||1,_=Math.hypot(b,A)||1;if(!this.#t&&Math.abs(_-C)<=Wu.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=i,d.touch0Y=a,d.touch1X=o,d.touch1Y=c,!this.#t){this.#t=!0;return}const T=[(i+o)/2,(a+c)/2];this.#r?.(T,_,C)}#m(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#a?.()),this.#l&&(Ft(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class Be{#e=null;#t=null;#s=null;#n=null;#i=null;#r=!1;#a=null;#o="";#c=null;#l=null;#h=null;#d=null;#f=null;#g="";#m=!1;#u=null;#p=!1;#y=!1;#b=!1;#v=null;#C=0;#S=0;#x=null;#_=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#E=Be._zIndex++;static _borderLineWidth=-1;static _colorManager=new gb;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=Be.prototype._resizeWithKeyboard,t=pr.TRANSLATE_SMALL,s=pr.TRANSLATE_BIG;return tt(this,"_resizerKeyboardManager",new Xu([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],Be.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:i,pageX:a,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[a,o];const[c,d]=this.parentDimensions;this.x=e.x/c,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return tt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new wG({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Be._l10n??=e,Be._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Be._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Be._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){_t("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(e){this.#A=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#L(),this.#d?.remove(),this.#d=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,i){const[a,o]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/a,this.y=(t+i)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,i]=this.parentDimensions;this.setAt(e*s,t*i,this.width*s,this.height*i),this._onTranslated()}#M([e,t],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#M(this.parentDimensions,e,t)}translateInPage(e,t){this.#u||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[d,h]=this.getBaseTranslation();o+=d,c+=h;const{style:f}=s;f.left=`${(100*o).toFixed(2)}%`,f.top=`${(100*c).toFixed(2)}%`,this._onTranslating(o,c),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=Be,i=s/e,a=s/t;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,i]}=this;let{x:a,y:o,width:c,height:d}=this;if(c*=s,d*=i,a*=s,o*=i,this._mustFixPosition)switch(e){case 0:a=Dn(a,0,s-c),o=Dn(o,0,i-d);break;case 90:a=Dn(a,0,s-d),o=Dn(o,c,i);break;case 180:a=Dn(a,c,s),o=Dn(o,d,i);break;case 270:a=Dn(a,d,s),o=Dn(o,0,i-c);break}this.x=a/=s,this.y=o/=i;const[h,f]=this.getBaseTranslation();a+=h,o+=f,t.left=`${(100*a).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#R(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return Be.#R(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return Be.#R(e,t,360-this.parentRotation)}#D(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(){const{div:{style:e},width:t,height:s}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#F(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const i=document.createElement("div");this.#c.append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",this.#P.bind(this,s),{signal:t}),i.addEventListener("contextmenu",Cs,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#c)}#P(e,t){t.preventDefault();const{isMac:s}=gn.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#s?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const a=new AbortController,o=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#j.bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Ft,{passive:!1,signal:o}),window.addEventListener("contextmenu",Cs,{signal:o}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const h=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=c,this.div.style.cursor=d,this.#I()};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})}#O(e,t,s,i){this.width=s,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#I(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:i}=this.#h;this.#h=null;const a=this.x,o=this.y,c=this.width,d=this.height;a===e&&o===t&&c===s&&d===i||this.addCommands({cmd:this.#O.bind(this,a,o,c,d),undo:this.#O.bind(this,e,t,s,i),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#j(e,t){const[s,i]=this.parentDimensions,a=this.x,o=this.y,c=this.width,d=this.height,h=Be.MIN_SIZE/s,f=Be.MIN_SIZE/i,p=this.#D(this.rotation),y=(F,B)=>[p[0]*F+p[2]*B,p[1]*F+p[3]*B],b=this.#D(360-this.rotation),A=(F,B)=>[b[0]*F+b[2]*B,b[1]*F+b[3]*B];let S,E,C=!1,_=!1;switch(e){case"topLeft":C=!0,S=(F,B)=>[0,0],E=(F,B)=>[F,B];break;case"topMiddle":S=(F,B)=>[F/2,0],E=(F,B)=>[F/2,B];break;case"topRight":C=!0,S=(F,B)=>[F,0],E=(F,B)=>[0,B];break;case"middleRight":_=!0,S=(F,B)=>[F,B/2],E=(F,B)=>[0,B/2];break;case"bottomRight":C=!0,S=(F,B)=>[F,B],E=(F,B)=>[0,0];break;case"bottomMiddle":S=(F,B)=>[F/2,B],E=(F,B)=>[F/2,0];break;case"bottomLeft":C=!0,S=(F,B)=>[0,B],E=(F,B)=>[F,0];break;case"middleLeft":_=!0,S=(F,B)=>[0,B/2],E=(F,B)=>[F,B/2];break}const T=S(c,d),R=E(c,d);let M=y(...R);const k=Be._round(a+M[0]),N=Be._round(o+M[1]);let P=1,j=1,I,H;if(t.fromKeyboard)({deltaX:I,deltaY:H}=t);else{const{screenX:F,screenY:B}=t,[z,Q]=this.#l;[I,H]=this.screenToPageTranslation(F-z,B-Q),this.#l[0]=F,this.#l[1]=B}if([I,H]=A(I/s,H/i),C){const F=Math.hypot(c,d);P=j=Math.max(Math.min(Math.hypot(R[0]-T[0]-I,R[1]-T[1]-H)/F,1/c,1/d),h/c,f/d)}else _?P=Dn(Math.abs(R[0]-T[0]-I),h,1)/c:j=Dn(Math.abs(R[1]-T[1]-H),f,1)/d;const $=Be._round(c*P),K=Be._round(d*j);M=y(...E($,K));const Z=k-M[0],oe=N-M[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=$,this.height=K,this.x=Z,this.y=oe,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new cu(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#s?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||(vi.initialize(Be._l10n),this.#s=new vi(this),this.#e&&(this.#s.data=this.#e,this.#e=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(e){this.#s&&(this.#s.data=e)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(e){await this.#s?.setGuessedText(e)}serializeAltText(e){return this.#s?.serialize(e)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new Dh(this)}addStandaloneCommentButton(){if(this.#i){this._uiManager.isEditingMode()&&this.#i.classList.remove("hidden");return}this.hasComment&&(this.#i=this.#n.renderForStandalone(),this.div.append(this.#i))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#i=null}hideStandaloneCommentButton(){this.#i?.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:s,deleted:i}}=this.#n;return{text:t,richText:e,date:s,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new Dh(this),this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:s}){if(!t||(this.#n||=new Dh(this),this.#n.setInitialText(e,s),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new Dh(this),this.#n.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[a]=this.pageDimensions,[o]=this.pageTranslation,c=o+a+1,d=i-100,h=c+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[c,d,h,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#n.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#r?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#U();const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),MN(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#_||=new Wu({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#$.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#$(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(e,t,s){let a=.7*(s/t)+1-.7;if(a===1)return;const o=this.#D(this.rotation),c=(k,N)=>[o[0]*k+o[2]*N,o[1]*k+o[3]*N],[d,h]=this.parentDimensions,f=this.x,p=this.y,y=this.width,b=this.height,A=Be.MIN_SIZE/d,S=Be.MIN_SIZE/h;a=Math.max(Math.min(a,1/y,1/b),A/y,S/b);const E=Be._round(y*a),C=Be._round(b*a);if(E===y&&C===b)return;this.#u||=[f,p,y,b];const _=c(y/2,b/2),T=Be._round(f+_[0]),R=Be._round(p+_[1]),M=c(E/2,C/2);this.x=T-M[0],this.y=R-M[1],this.width=E,this.height=C,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#I()}pointerdown(e){const{isMac:t}=gn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#B(e);return}this.#k(e)}#k(e){const{isMac:t}=gn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#B(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:a},c=h=>{i.abort(),this.#a=null,this.#m=!1,this._uiManager.endDragSession()||this.#k(h),s&&this._onStopDragging()};t&&(this.#C=e.clientX,this.#S=e.clientY,this.#a=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",h=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:p,pointerId:y}=h;if(y!==this.#a){Ft(h);return}const[b,A]=this.screenToPageTranslation(f-this.#C,p-this.#S);this.#C=f,this.#S=p,this._uiManager.dragSelectedEditors(b,A)},o),window.addEventListener("touchmove",Ft,o),window.addEventListener("pointerdown",h=>{h.pointerType===this.#o&&(this.#_||h.isPrimary)&&c(h),Ft(h)},o));const d=h=>{if(!this.#a||this.#a===h.pointerId){c(h);return}Ft(h)};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const i=this.parentScale,[a,o]=this.pageDimensions,[c,d]=this.pageTranslation,h=e/i,f=t/i,p=this.x*a,y=this.y*o,b=this.width*a,A=this.height*o;switch(s){case 0:return[p+h+c,o-y-f-A+d,p+h+b+c,o-y-f+d];case 90:return[p+f+c,o-y+h+d,p+f+A+c,o-y+h+b+d];case 180:return[p-h-b+c,o-y+f+d,p-h+c,o-y+f+A+d];case 270:return[p-f-A+c,o-y-h-b+d,p-f+c,o-y-h+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,i,a,o]=e,c=a-s,d=o-i;switch(this.rotation){case 0:return[s,t-o,c,d];case 90:return[s,t-i,d,c];case 180:return[a,t-i,c,d];case 270:return[a,t-o,d,c];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Be._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:s,opacity:i,deleted:a,richText:o},uid:c,pageIndex:d,creationDate:h,modificationDate:f}=this;return{id:c,pageIndex:d,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:h,modificationDate:s||f,popupRef:!a,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:o}=window;return t<o&&i>0&&e<a&&s>0}#U(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#U()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,s){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,i.#e=e.accessibilityData,i._isCopy=e.isCopy||!1;const[a,o]=i.pageDimensions,[c,d,h,f]=i.getRectInCurrentCoords(e.rect,o);return i.x=c/a,i.y=d/o,i.width=h/a,i.height=f/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#L(),this.removeEditToolbar(),this.#x){for(const e of this.#x.values())clearTimeout(e);this.#x=null}this.parent=null,this.#_?.destroy(),this.#_=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#F(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[s,i,a,o]=this.getPDFRect();return[Be._round(s+(a-s)*e),Be._round(i+(o-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const o=this.#K.bind(this),c=this.#G.bind(this),d=this._uiManager._signal;for(const h of this.#t){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:d}),h.addEventListener("blur",c,{signal:d}),h.addEventListener("focus",this.#Y.bind(this,f),{signal:d}),h.setAttribute("data-l10n-id",Be._l10nResizer[f])}}const s=this.#t[0];let i=0;for(const o of t){if(o===s)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(a!==i){if(a<i)for(let c=0;c<i-a;c++)this.#c.append(this.#c.firstChild);else if(a>i)for(let c=0;c<a-i;c++)this.#c.firstChild.before(this.#c.lastChild);let o=0;for(const c of t){const h=this.#t[o++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Be._l10nResizer[h])}}this.#V(0),this.#b=!0,this.#c.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#K(e){Be._resizerKeyboardManager.exec(this,e)}#G(e){this.#b&&e.relatedTarget?.parentNode!==this.#c&&this.#L()}#Y(e){this.#g=this.#b?e:""}#V(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#b&&this.#j(this.#g,{deltaX:e,deltaY:t,fromKeyboard:!0})}#L(){this.#b=!1,this.#V(-1),this.#I()}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#x||=new Map;const{action:s}=e;let i=this.#x.get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#x.delete(s),this.#x.size===0&&(this.#x=null)},Be._telemetryTimeout),this.#x.set(s,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(e){if(!this.#d&&!this.deleted){this.#d=e.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class wG extends Be{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const zE=3285377520,Ls=4294901760,gi=65535;class NN{constructor(e){this.h1=e?e&4294967295:zE,this.h2=e?e&4294967295:zE}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let S=0,E=e.length;S<E;S++){const C=e.charCodeAt(S);C<=255?t[s++]=C:(t[s++]=C>>>8,t[s++]=C&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,a=s-i*4,o=new Uint32Array(t.buffer,0,i);let c=0,d=0,h=this.h1,f=this.h2;const p=3432918353,y=461845907,b=p&gi,A=y&gi;for(let S=0;S<i;S++)S&1?(c=o[S],c=c*p&Ls|c*b&gi,c=c<<15|c>>>17,c=c*y&Ls|c*A&gi,h^=c,h=h<<13|h>>>19,h=h*5+3864292196):(d=o[S],d=d*p&Ls|d*b&gi,d=d<<15|d>>>17,d=d*y&Ls|d*A&gi,f^=d,f=f<<13|f>>>19,f=f*5+3864292196);switch(c=0,a){case 3:c^=t[i*4+2]<<16;case 2:c^=t[i*4+1]<<8;case 1:c^=t[i*4],c=c*p&Ls|c*b&gi,c=c<<15|c>>>17,c=c*y&Ls|c*A&gi,i&1?h^=c:f^=c}this.h1=h,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ls|e*36045&gi,t=t*4283543511&Ls|((t<<16|e>>>16)*2950163797&Ls)>>>16,e^=t>>>1,e=e*444984403&Ls|e*60499&gi,t=t*3301882366&Ls|((t<<16|e>>>16)*3120437893&Ls)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Mv=Object.freeze({map:null,hash:"",transfer:void 0});class yb{#e=!1;#t=null;#s=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=this.#n.get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return this.#n.get(e)}remove(e){const t=this.#n.get(e);if(t!==void 0&&(t instanceof Be&&this.#s.delete(t.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#n.values())if(s instanceof Be)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=this.#n.get(e);let i=!1;if(s!==void 0)for(const[a,o]of Object.entries(t))s[a]!==o&&(i=!0,s[a]=o);else i=!0,this.#n.set(e,t);i&&this.#i(),t instanceof Be&&((this.#s||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#i(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new PN(this)}get serializable(){if(this.#n.size===0)return Mv;const e=new Map,t=new NN,s=[],i=Object.create(null);let a=!1;for(const[o,c]of this.#n){const d=c instanceof Be?c.serialize(!1,i):c;d&&(e.set(o,d),t.update(`${o}:${JSON.stringify(d)}`),a||=!!d.bitmap)}if(a)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:Mv}get editorStats(){let e=null;const t=new Map;let s=0,i=0;for(const a of this.#n.values()){if(!(a instanceof Be)){a.popup&&(a.popup.deleted?i+=1:s+=1);continue}a.isCommentDeleted?i+=1:a.hasEditedComment&&(s+=1);const o=a.telemetryFinalData;if(!o)continue;const{type:c}=o;t.has(c)||t.set(c,Object.getPrototypeOf(a).constructor),e||=Object.create(null);const d=e[c]||=new Map;for(const[h,f]of Object.entries(o)){if(h==="type")continue;let p=d.get(h);p||(p=new Map,d.set(h,p));const y=p.get(f)??0;p.set(f,y+1)}}if((i>0||s>0)&&(e||=Object.create(null),e.comments={deleted:i,edited:s}),!e)return null;for(const[a,o]of t)e[a]=o.computeTelemetryFinalData(e[a]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const s=this.#s?.get(e);return s?(s.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#s?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#s)for(const t of this.#s.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class PN extends yb{#e;constructor(e){super();const{map:t,hash:s,transfer:i}=e.serializable,a=structuredClone(t,i?{transfer:i}:null);this.#e={map:a,hash:s,transfer:i}}get print(){_t("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return tt(this,"modifiedIds",{ids:new Set,hash:""})}}class SG{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||this.#e.has(e.loadedName))){if(dt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:o}=e,c=new FontFace(i,a,o);this.addNativeFontFace(c);try{await c.load(),this.#e.add(i),s?.(e)}catch{Qe(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}_t("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw Qe(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return tt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return tt(this,"isSyncFontLoadingSupported",In||gn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(dt(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const a=s.shift();setTimeout(a.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:t,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return tt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(R,M){return R.charCodeAt(M)<<24|R.charCodeAt(M+1)<<16|R.charCodeAt(M+2)<<8|R.charCodeAt(M+3)&255}function i(R,M,k,N){const P=R.substring(0,M),j=R.substring(M+k);return P+N+j}let a,o;const c=this._document.createElement("canvas");c.width=1,c.height=1;const d=c.getContext("2d");let h=0;function f(R,M){if(++h>30){Qe("Load test font never loaded."),M();return}if(d.font="30px "+R,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){M();return}setTimeout(f.bind(null,R,M))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=i(y,976,p.length,p);const A=16,S=1482184792;let E=s(y,A);for(a=0,o=p.length-3;a<o;a+=4)E=E-S+s(p,a)|0;a<p.length&&(E=E-S+s(p+"XXX",a)|0),y=i(y,A,4,cG(E));const C=`url(data:font/opentype;base64,${btoa(y)});`,_=`@font-face {font-family:"${p}";src:${C}}`;this.insertRule(_);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const R of[e.loadedName,p]){const M=this._document.createElement("span");M.textContent="Hi",M.style.fontFamily=R,T.append(M)}this._document.body.append(T),f(p,()=>{T.remove(),t.complete()})}}class AG{#e;constructor(e,t=null,s,i){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,s&&Object.assign(this,s),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${AN(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let i;try{i=e.get(s)}catch(o){Qe(`getPathGenerator - ignoring character: "${o}".`)}const a=new Path2D(i||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=a}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}function CG(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(In)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function EG(n){if(In&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Gu(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Mh(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const Nv=n=>typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0,_G=n=>typeof n=="object"&&typeof n?.name=="string",kN=fG.bind(null,Nv,_G);class TG{#e=new Map;#t=Promise.resolve();postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,s)})}addEventListener(e,t,s=null){let i=null;if(s?.signal instanceof AbortSignal){const{signal:a}=s;if(a.aborted){Qe("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);i=()=>a.removeEventListener("abort",o),a.addEventListener("abort",o)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const Nh={DATA:1,ERROR:2},Jt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function UE(){}function rs(n){if(n instanceof mr||n instanceof Ef||n instanceof kE||n instanceof _u||n instanceof vy)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||_t('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new mr(n.message);case"InvalidPDFException":return new Ef(n.message);case"PasswordException":return new kE(n.message,n.code);case"ResponseException":return new _u(n.message,n.status,n.missing);case"UnknownErrorException":return new vy(n.message,n.details)}return new vy(n.message,n.toString())}class Zc{#e=new AbortController;constructor(e,t,s){this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const s=e.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Nh.DATA)i.resolve(e.data);else if(e.callback===Nh.ERROR)i.reject(rs(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(t,e.data).then(function(o){a.postMessage({sourceName:s,targetName:i,callback:Nh.DATA,callbackId:e.callbackId,data:o})},function(o){a.postMessage({sourceName:s,targetName:i,callback:Nh.ERROR,callbackId:e.callbackId,reason:rs(o)})});return}if(e.streamId){this.#s(e);return}t(e.data)}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},s)}catch(o){a.reject(o)}return a.promise}sendWithStream(e,t,s,i){const a=this.streamId++,o=this.sourceName,c=this.targetName,d=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[a]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:o,targetName:c,action:e,streamId:a,data:t,desiredSize:h.desiredSize},i),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[a].pullCall=f,d.postMessage({sourceName:o,targetName:c,stream:Jt.PULL,streamId:a,desiredSize:h.desiredSize}),f.promise},cancel:h=>{dt(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[a].cancelCall=f,this.streamControllers[a].isClosed=!0,d.postMessage({sourceName:o,targetName:c,stream:Jt.CANCEL,streamId:a,reason:rs(h)}),f.promise}},s)}#s(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,a=this.comObj,o=this,c=this.actionHandler[e.action],d={enqueue(h,f=1,p){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=f,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:s,targetName:i,stream:Jt.ENQUEUE,streamId:t,chunk:h},p)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:s,targetName:i,stream:Jt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(h){dt(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:s,targetName:i,stream:Jt.ERROR,streamId:t,reason:rs(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,Promise.try(c,e.data,d).then(function(){a.postMessage({sourceName:s,targetName:i,stream:Jt.START_COMPLETE,streamId:t,success:!0})},function(h){a.postMessage({sourceName:s,targetName:i,stream:Jt.START_COMPLETE,streamId:t,reason:rs(h)})})}#n(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,a=this.comObj,o=this.streamControllers[t],c=this.streamSinks[t];switch(e.stream){case Jt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(rs(e.reason));break;case Jt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(rs(e.reason));break;case Jt.PULL:if(!c){a.postMessage({sourceName:s,targetName:i,stream:Jt.PULL_COMPLETE,streamId:t,success:!0});break}c.desiredSize<=0&&e.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=e.desiredSize,Promise.try(c.onPull||UE).then(function(){a.postMessage({sourceName:s,targetName:i,stream:Jt.PULL_COMPLETE,streamId:t,success:!0})},function(h){a.postMessage({sourceName:s,targetName:i,stream:Jt.PULL_COMPLETE,streamId:t,reason:rs(h)})});break;case Jt.ENQUEUE:if(dt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Jt.CLOSE:if(dt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#i(o,t);break;case Jt.ERROR:dt(o,"error should have stream controller"),o.controller.error(rs(e.reason)),this.#i(o,t);break;case Jt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(rs(e.reason)),this.#i(o,t);break;case Jt.CANCEL:if(!c)break;const d=rs(e.reason);Promise.try(c.onCancel||UE,d).then(function(){a.postMessage({sourceName:s,targetName:i,stream:Jt.CANCEL_COMPLETE,streamId:t,success:!0})},function(h){a.postMessage({sourceName:s,targetName:i,stream:Jt.CANCEL_COMPLETE,streamId:t,reason:rs(h)})}),c.sinkCapability.reject(d),c.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#i(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class ON{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){_t("Abstract method `_createCanvas` called.")}}class RG extends ON{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class jN{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){_t("Abstract method `_fetch` called.")}}class VE extends jN{async _fetch(e){const t=await Ul(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Gu(t)}}class LN{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,i,a){return"none"}destroy(e=!1){}}class DG extends LN{#e;#t;#s;#n;#i;#r;#a=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#i=t}get#o(){return this.#t||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#s){const e=this.#i.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const s=this.#i.createElementNS(er,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#s=this.#i.createElementNS(er,"defs"),e.append(s),s.append(this.#s),this.#i.body.append(e)}return this.#s}#h(e){if(e.length===1){const d=e[0],h=new Array(256);for(let p=0;p<256;p++)h[p]=d[p]/255;const f=h.join(",");return[f,f,f]}const[t,s,i]=e,a=new Array(256),o=new Array(256),c=new Array(256);for(let d=0;d<256;d++)a[d]=t[d]/255,o[d]=s[d]/255,c[d]=i[d]/255;return[a.join(","),o.join(","),c.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#i.URL;t!==this.#i.baseURI&&(Yu(t)?Qe('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=ub(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[s,i,a]=this.#h(e),o=e.length===1?s:`${s}${i}${a}`;if(t=this.#o.get(o),t)return this.#o.set(e,t),t;const c=`g_${this.#n}_transfer_map_${this.#a++}`,d=this.#d(c);this.#o.set(e,d),this.#o.set(o,d);const h=this.#m(c);return this.#p(s,i,a,h),d}addHCMFilter(e,t){const s=`${e}-${t}`,i="base";let a=this.#c.get(i);if(a?.key===s||(a?(a.filter?.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},this.#c.set(i,a)),!e||!t))return a.url;const o=this.#b(e);e=De.makeHexColor(...o);const c=this.#b(t);if(t=De.makeHexColor(...c),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return a.url;const d=new Array(256);for(let b=0;b<=255;b++){const A=b/255;d[b]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const h=d.join(","),f=`g_${this.#n}_hcm_filter`,p=a.filter=this.#m(f);this.#p(h,h,h,p),this.#g(p);const y=(b,A)=>{const S=o[b]/255,E=c[b]/255,C=new Array(A+1);for(let _=0;_<=A;_++)C[_]=S+_/A*(E-S);return C.join(",")};return this.#p(y(0,5),y(1,5),y(2,5),p),a.url=this.#d(f),a.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[s]=this.#h([e]),i=`alpha_${s}`;if(t=this.#o.get(i),t)return this.#o.set(e,t),t;const a=`g_${this.#n}_alpha_map_${this.#a++}`,o=this.#d(a);this.#o.set(e,o),this.#o.set(i,o);const c=this.#m(a);return this.#y(s,c),o}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let s,i;if(e?([s]=this.#h([e]),i=`luminosity_${s}`):i="luminosity",t=this.#o.get(i),t)return this.#o.set(e,t),t;const a=`g_${this.#n}_luminosity_map_${this.#a++}`,o=this.#d(a);this.#o.set(e,o),this.#o.set(i,o);const c=this.#m(a);return this.#f(c),e&&this.#y(s,c),o}addHighlightHCMFilter(e,t,s,i,a){const o=`${t}-${s}-${i}-${a}`;let c=this.#c.get(e);if(c?.key===o||(c?(c.filter?.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},this.#c.set(e,c)),!t||!s))return c.url;const[d,h]=[t,s].map(this.#b.bind(this));let f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[y,b]=[i,a].map(this.#b.bind(this));p<f&&([f,p,y,b]=[p,f,b,y]),this.#l.style.color="";const A=(C,_,T)=>{const R=new Array(256),M=(p-f)/T,k=C/255,N=(_-C)/(255*T);let P=0;for(let j=0;j<=T;j++){const I=Math.round(f+j*M),H=k+j*N;for(let $=P;$<=I;$++)R[$]=H;P=I+1}for(let j=P;j<256;j++)R[j]=R[P-1];return R.join(",")},S=`g_${this.#n}_hcm_${e}_filter`,E=c.filter=this.#m(S);return this.#g(E),this.#p(A(y[0],b[0],5),A(y[1],b[1],5),A(y[2],b[2],5),E),c.url=this.#d(S),c.url}destroy(e=!1){e&&this.#r?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#t?.clear(),this.#t=null,this.#r?.clear(),this.#r=null,this.#a=0)}#f(e){const t=this.#i.createElementNS(er,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#g(e){const t=this.#i.createElementNS(er,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#m(e){const t=this.#i.createElementNS(er,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#u(e,t,s){const i=this.#i.createElementNS(er,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),e.append(i)}#p(e,t,s,i){const a=this.#i.createElementNS(er,"feComponentTransfer");i.append(a),this.#u(a,"feFuncR",e),this.#u(a,"feFuncG",t),this.#u(a,"feFuncB",s)}#y(e,t){const s=this.#i.createElementNS(er,"feComponentTransfer");t.append(s),this.#u(s,"feFuncA",e)}#b(e){return this.#l.style.color=e,Vl(getComputedStyle(this.#l).getPropertyValue("color"))}}class FN{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){_t("Abstract method `_fetch` called.")}}class HE extends FN{async _fetch(e){const t=await Ul(e,"arraybuffer");return new Uint8Array(t)}}class IN{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){_t("Abstract method `_fetch` called.")}}class $E extends IN{async _fetch(e){const t=await Ul(e,"arraybuffer");return new Uint8Array(t)}}In&&Qe("Please use the `legacy` build in Node.js environments.");async function vb(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class MG extends LN{}class NG extends ON{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class PG extends jN{async _fetch(e){return vb(e)}}class kG extends FN{async _fetch(e){return vb(e)}}class OG extends IN{async _fetch(e){return vb(e)}}const el="__forcedDependency",{floor:qE,ceil:GE}=Math;function Ph(n,e,t,s,i,a){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],s),n[e*4+2]=Math.max(n[e*4+2],i),n[e*4+3]=Math.max(n[e*4+3],a)}const Pv=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class jG{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===Pv}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const kh=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};class LG{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[el]:[]};#s=new Map;#n=[];#i=[];#r=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#d=new Map;#f;#g;#m;#u;#p;constructor(e,t,s=!1){this.#f=e.width,this.#g=e.height,this.#y(t),s&&(this.#p=new Map)}growOperationsCount(e){e>=this.#u.length&&this.#y(e,this.#u)}#y(e,t){const s=new ArrayBuffer(e*4);this.#m=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),t&&t.length>0?(this.#u.set(t),this.#u.fill(Pv,t.length)):this.#u.fill(Pv)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[el]:{__proto__:this.#t[el]}},this.#a={__proto__:this.#a},this.#n.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#a=Object.getPrototypeOf(this.#a);const s=this.#n.pop();return s!==void 0&&(kh(this.#p,e)?.dependencies.add(s),this.#u[e]=this.#u[s]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const t=this.#n.pop();return t!==void 0&&(kh(this.#p,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}beginMarkedContent(e){return this.#i.push(e),this}endMarkedContent(e){const t=this.#i.pop();return t!==void 0&&(kh(this.#p,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}pushBaseTransform(e){return this.#r.push(De.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#s.set(e,t),this}recordSimpleDataFromNamed(e,t,s){this.#e[e]=this.#s.get(t)??s}recordFutureForcedDependency(e,t){return this.recordIncrementalData(el,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(el,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,t,s,i,a,o){const c=De.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform()),d=[1/0,1/0,-1/0,-1/0];De.axialAlignedBoundingBox([s,a,i,o],c,d);const h=De.intersect(this.#a,d);return h?(this.#a[0]=h[0],this.#a[1]=h[1],this.#a[2]=h[2],this.#a[3]=h[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(e,t,s,i,a,o){const c=this.#a;if(c[0]===1/0)return this;const d=De.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform());if(c[0]===-1/0)return De.axialAlignedBoundingBox([s,a,i,o],d,this.#o),this;const h=[1/0,1/0,-1/0,-1/0];return De.axialAlignedBoundingBox([s,a,i,o],d,h),this.#o[0]=Math.min(this.#o[0],Math.max(h[0],c[0])),this.#o[1]=Math.min(this.#o[1],Math.max(h[1],c[1])),this.#o[2]=Math.max(this.#o[2],Math.min(h[2],c[2])),this.#o[3]=Math.max(this.#o[3],Math.min(h[3],c[3])),this}recordCharacterBBox(e,t,s,i=1,a=0,o=0,c){const d=s.bbox;let h,f;if(d&&(h=d[2]!==d[0]&&d[3]!==d[1]&&this.#d.get(s),h!==!1&&(f=[0,0,0,0],De.axialAlignedBoundingBox(d,s.fontMatrix,f),(i!==1||a!==0||o!==0)&&De.scaleMinMax([i,0,0,-i,a,o],f),h)))return this.recordBBox(e,t,f[0],f[2],f[1],f[3]);if(!c)return this.recordFullPageBBox(e);const p=c();return d&&f&&h===void 0&&(h=f[0]<=a-p.actualBoundingBoxLeft&&f[2]>=a+p.actualBoundingBoxRight&&f[1]<=o-p.actualBoundingBoxAscent&&f[3]>=o+p.actualBoundingBoxDescent,this.#d.set(s,h),h)?this.recordBBox(e,t,f[0],f[2],f[1],f[3]):this.recordBBox(e,t,a-p.actualBoundingBoxLeft,a+p.actualBoundingBoxRight,o-p.actualBoundingBoxAscent,o+p.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#g,this.#a[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const s=this.#l,i=this.#e,a=this.#t;for(const o of t)o in this.#e?s.add(i[o]):o in a&&a[o].forEach(s.add,s);return this}recordNamedDependency(e,t){return this.#s.has(t)&&this.#l.add(this.#s.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[el]),this.#p){const s=kh(this.#p,e),{dependencies:i}=s;this.#l.forEach(i.add,i),this.#n.forEach(i.add,i),this.#i.forEach(i.add,i),i.delete(e),s.isRenderingOperation=!0}if(this.#c===e){const s=qE(this.#o[0]*256/this.#f),i=qE(this.#o[1]*256/this.#g),a=GE(this.#o[2]*256/this.#f),o=GE(this.#o[3]*256/this.#g);Ph(this.#m,e,s,i,a,o);for(const c of this.#l)c!==e&&Ph(this.#m,c,s,i,a,o);for(const c of this.#n)c!==e&&Ph(this.#m,c,s,i,a,o);for(const c of this.#i)c!==e&&Ph(this.#m,c,s,i,a,o);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const s=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of s)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#d.clear(),new jG(this.#u,this.#m)}takeDebugMetadata(){return this.#p}}class Rf{#e;#t;#s;#n=0;#i=0;constructor(e,t,s){if(e instanceof Rf&&e.#s===!!s)return e;this.#e=e,this.#t=t,this.#s=!!s}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#i++,this.#e.save(this.#t),this}restore(e){return this.#i>0&&(this.#e.restore(this.#t),this.#i--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,s){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#s||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,s,i,a,o){return this.#s||this.#e.recordClipBox(this.#t,t,s,i,a,o),this}recordBBox(e,t,s,i,a,o){return this.#s||this.#e.recordBBox(this.#t,t,s,i,a,o),this}recordCharacterBBox(e,t,s,i,a,o,c){return this.#s||this.#e.recordCharacterBBox(this.#t,t,s,i,a,o,c),this}recordFullPageBBox(e){return this.#s||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#s||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Fs={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Tn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function kv(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,s),n.clip(i)}class bb{isModifyingCurrentTransform(){return!1}getPattern(){_t("Abstract method `getPattern` called.")}}class FG extends bb{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,i){let a;if(i===Tn.STROKE||i===Tn.FILL){const o=t.current.getClippedPathBoundingBox(i,Lt(e))||[0,0,0,0],c=Math.ceil(o[2]-o[0])||1,d=Math.ceil(o[3]-o[1])||1,h=t.cachedCanvases.getCanvas("pattern",c,d),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-o[0],-o[1]),s=De.transform(s,[1,0,0,1,o[0],o[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),kv(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),a=e.createPattern(h.canvas,"no-repeat");const p=new DOMMatrix(s);a.setTransform(p)}else kv(e,this._bbox),a=this._createGradient(e);return a}}function wy(n,e,t,s,i,a,o,c){const d=e.coords,h=e.colors,f=n.data,p=n.width*4;let y;d[t+1]>d[s+1]&&(y=t,t=s,s=y,y=a,a=o,o=y),d[s+1]>d[i+1]&&(y=s,s=i,i=y,y=o,o=c,c=y),d[t+1]>d[s+1]&&(y=t,t=s,s=y,y=a,a=o,o=y);const b=(d[t]+e.offsetX)*e.scaleX,A=(d[t+1]+e.offsetY)*e.scaleY,S=(d[s]+e.offsetX)*e.scaleX,E=(d[s+1]+e.offsetY)*e.scaleY,C=(d[i]+e.offsetX)*e.scaleX,_=(d[i+1]+e.offsetY)*e.scaleY;if(A>=_)return;const T=h[a],R=h[a+1],M=h[a+2],k=h[o],N=h[o+1],P=h[o+2],j=h[c],I=h[c+1],H=h[c+2],$=Math.round(A),K=Math.round(_);let Z,oe,F,B,z,Q,me,L;for(let X=$;X<=K;X++){if(X<E){const W=X<A?0:(A-X)/(A-E);Z=b-(b-S)*W,oe=T-(T-k)*W,F=R-(R-N)*W,B=M-(M-P)*W}else{let W;X>_?W=1:E===_?W=0:W=(E-X)/(E-_),Z=S-(S-C)*W,oe=k-(k-j)*W,F=N-(N-I)*W,B=P-(P-H)*W}let te;X<A?te=0:X>_?te=1:te=(A-X)/(A-_),z=b-(b-C)*te,Q=T-(T-j)*te,me=R-(R-I)*te,L=M-(M-H)*te;const ce=Math.round(Math.min(Z,z)),ye=Math.round(Math.max(Z,z));let be=p*X+ce*4;for(let W=ce;W<=ye;W++)te=(Z-W)/(Z-z),te<0?te=0:te>1&&(te=1),f[be++]=oe-(oe-Q)*te|0,f[be++]=F-(F-me)*te|0,f[be++]=B-(B-L)*te|0,f[be++]=255}}function IG(n,e,t){const s=e.coords,i=e.colors;let a,o;switch(e.type){case"lattice":const c=e.verticesPerRow,d=Math.floor(s.length/c)-1,h=c-1;for(a=0;a<d;a++){let f=a*c;for(let p=0;p<h;p++,f++)wy(n,t,s[f],s[f+1],s[f+c],i[f],i[f+1],i[f+c]),wy(n,t,s[f+c+1],s[f+1],s[f+c],i[f+c+1],i[f+1],i[f+c])}break;case"triangles":for(a=0,o=s.length;a<o;a+=3)wy(n,t,s[a],s[a+1],s[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class BG extends bb{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const c=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-c,f=Math.ceil(this._bounds[3])-d,p=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),b=h/p,A=f/y,S={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-d,scaleX:1/b,scaleY:1/A},E=p+4,C=y+4,_=s.getCanvas("mesh",E,C),T=_.context,R=T.createImageData(p,y);if(t){const k=R.data;for(let N=0,P=k.length;N<P;N+=4)k[N]=t[0],k[N+1]=t[1],k[N+2]=t[2],k[N+3]=255}for(const k of this._figures)IG(R,k,S);return T.putImageData(R,2,2),{canvas:_.canvas,offsetX:c-2*b,offsetY:d-2*A,scaleX:b,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,i){kv(e,this._bbox);const a=new Float32Array(2);if(i===Tn.SHADING)De.singularValueDecompose2dScale(Lt(e),a);else if(this.matrix){De.singularValueDecompose2dScale(this.matrix,a);const[c,d]=a;De.singularValueDecompose2dScale(t.baseTransform,a),a[0]*=c,a[1]*=d}else De.singularValueDecompose2dScale(t.baseTransform,a);const o=this._createMeshCanvas(a,i===Tn.SHADING?null:this._background,t.cachedCanvases);return i!==Tn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class zG extends bb{getPattern(){return"hotpink"}}function UG(n){switch(n[0]){case"RadialAxial":return new FG(n);case"Mesh":return new BG(n);case"Dummy":return new zG}throw new Error(`Unknown IR type: ${n[0]}`)}const KE={COLORED:1,UNCOLORED:2};class xb{static MAX_PATTERN_SIZE=3e3;constructor(e,t,s,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e,t){const{bbox:s,operatorList:i,paintType:a,tilingType:o,color:c,canvasGraphicsFactory:d}=this;let{xstep:h,ystep:f}=this;h=Math.abs(h),f=Math.abs(f),rm("TilingType: "+o);const p=s[0],y=s[1],b=s[2],A=s[3],S=b-p,E=A-y,C=new Float32Array(2);De.singularValueDecompose2dScale(this.matrix,C);const[_,T]=C;De.singularValueDecompose2dScale(this.baseTransform,C);const R=_*C[0],M=T*C[1];let k=S,N=E,P=!1,j=!1;const I=Math.ceil(h*R),H=Math.ceil(f*M),$=Math.ceil(S*R),K=Math.ceil(E*M);I>=$?k=h:P=!0,H>=K?N=f:j=!0;const Z=this.getSizeAndScale(k,this.ctx.canvas.width,R),oe=this.getSizeAndScale(N,this.ctx.canvas.height,M),F=e.cachedCanvases.getCanvas("pattern",Z.size,oe.size),B=F.context,z=d.createCanvasGraphics(B,t);if(z.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(z,a,c),B.translate(-Z.scale*p,-oe.scale*y),z.transform(0,Z.scale,0,0,oe.scale,0,0),B.save(),z.dependencyTracker?.save(),this.clipBbox(z,p,y,b,A),z.baseTransform=Lt(z.ctx),z.executeOperatorList(i),z.endDrawing(),z.dependencyTracker?.restore(),B.restore(),P||j){const Q=F.canvas;P&&(k=h),j&&(N=f);const me=this.getSizeAndScale(k,this.ctx.canvas.width,R),L=this.getSizeAndScale(N,this.ctx.canvas.height,M),X=me.size,te=L.size,ce=e.cachedCanvases.getCanvas("pattern-workaround",X,te),ye=ce.context,be=P?Math.floor(S/h):0,W=j?Math.floor(E/f):0;for(let Ae=0;Ae<=be;Ae++)for(let xe=0;xe<=W;xe++)ye.drawImage(Q,X*Ae,te*xe,X,te,0,0,X,te);return{canvas:ce.canvas,scaleX:me.scale,scaleY:L.scale,offsetX:p,offsetY:y}}return{canvas:F.canvas,scaleX:Z.scale,scaleY:oe.scale,offsetX:p,offsetY:y}}getSizeAndScale(e,t,s){const i=Math.max(xb.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*s);return a>=i?a=i:s=a/e,{scale:s,size:a}}clipBbox(e,t,s,i,a){const o=i-t,c=a-s;e.ctx.rect(t,s,o,c),De.axialAlignedBoundingBox([t,s,i,a],Lt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const i=e.ctx,a=e.current;switch(t){case KE.COLORED:const{fillStyle:o,strokeStyle:c}=this.ctx;i.fillStyle=a.fillColor=o,i.strokeStyle=a.strokeColor=c;break;case KE.UNCOLORED:i.fillStyle=i.strokeStyle=s,a.fillColor=a.strokeColor=s;break;default:throw new lG(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,i,a){let o=s;i!==Tn.SHADING&&(o=De.transform(o,t.baseTransform),this.matrix&&(o=De.transform(o,this.matrix)));const c=this.createPatternCanvas(t,a);let d=new DOMMatrix(o);d=d.translate(c.offsetX,c.offsetY),d=d.scale(1/c.scaleX,1/c.scaleY);const h=e.createPattern(c.canvas,"repeat");return h.setTransform(d),h}}function VG({src:n,srcPos:e=0,dest:t,width:s,height:i,nonBlackColor:a=4294967295,inverseDecode:o=!1}){const c=gn.isLittleEndian?4278190080:255,[d,h]=o?[a,c]:[c,a],f=s>>3,p=s&7,y=n.length;t=new Uint32Array(t.buffer);let b=0;for(let A=0;A<i;A++){for(const E=e+f;e<E;e++){const C=e<y?n[e]:255;t[b++]=C&128?h:d,t[b++]=C&64?h:d,t[b++]=C&32?h:d,t[b++]=C&16?h:d,t[b++]=C&8?h:d,t[b++]=C&4?h:d,t[b++]=C&2?h:d,t[b++]=C&1?h:d}if(p===0)continue;const S=e<y?n[e++]:255;for(let E=0;E<p;E++)t[b++]=S&1<<7-E?h:d}return{srcPos:e,destPos:b}}const YE=16,XE=100,HG=15,WE=10,as=16,Sy=new DOMMatrix,xs=new Float32Array(2),ul=new Float32Array([1/0,1/0,-1/0,-1/0]);function $G(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,i,a,o,c){e.transform(t,s,i,a,o,c),this.__originalTransform(t,s,i,a,o,c)},n.setTransform=function(t,s,i,a,o,c){e.setTransform(t,s,i,a,o,c),this.__originalSetTransform(t,s,i,a,o,c)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,i,a,o,c){e.bezierCurveTo(t,s,i,a,o,c),this.__originalBezierCurveTo(t,s,i,a,o,c)},n.rect=function(t,s,i,a){e.rect(t,s,i,a),this.__originalRect(t,s,i,a)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class qG{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,s)):(i=this.canvasFactory.create(t,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Oh(n,e,t,s,i,a,o,c,d,h){const[f,p,y,b,A,S]=Lt(n);if(p===0&&y===0){const _=o*f+A,T=Math.round(_),R=c*b+S,M=Math.round(R),k=(o+d)*f+A,N=Math.abs(Math.round(k)-T)||1,P=(c+h)*b+S,j=Math.abs(Math.round(P)-M)||1;return n.setTransform(Math.sign(f),0,0,Math.sign(b),T,M),n.drawImage(e,t,s,i,a,0,0,N,j),n.setTransform(f,p,y,b,A,S),[N,j]}if(f===0&&b===0){const _=c*y+A,T=Math.round(_),R=o*p+S,M=Math.round(R),k=(c+h)*y+A,N=Math.abs(Math.round(k)-T)||1,P=(o+d)*p+S,j=Math.abs(Math.round(P)-M)||1;return n.setTransform(0,Math.sign(p),Math.sign(y),0,T,M),n.drawImage(e,t,s,i,a,0,0,j,N),n.setTransform(f,p,y,b,A,S),[j,N]}n.drawImage(e,t,s,i,a,o,c,d,h);const E=Math.hypot(f,p),C=Math.hypot(y,b);return[E*d,C*h]}class QE{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Rv;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Cn.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,s){s?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=ul.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Tn.FILL,t=null){const s=this.minMax.slice();if(e===Tn.STROKE){t||_t("Stroke bounding box must include transform."),De.singularValueDecompose2dScale(t,xs);const i=xs[0]*this.lineWidth/2,a=xs[1]*this.lineWidth/2;s[0]-=i,s[1]-=a,s[2]+=i,s[3]+=a}return s}updateClipFromPath(){const e=De.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(ul,0)}getClippedPathBoundingBox(e=Tn.FILL,t=null){return De.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function ZE(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,i=t%as,a=(t-i)/as,o=i===0?a:a+1,c=n.createImageData(s,as);let d=0,h;const f=e.data,p=c.data;let y,b,A,S;if(e.kind===lu.GRAYSCALE_1BPP){const E=f.byteLength,C=new Uint32Array(p.buffer,0,p.byteLength>>2),_=C.length,T=s+7>>3,R=4294967295,M=gn.isLittleEndian?4278190080:255;for(y=0;y<o;y++){for(A=y<a?as:i,h=0,b=0;b<A;b++){const k=E-d;let N=0;const P=k>T?s:k*8-7,j=P&-8;let I=0,H=0;for(;N<j;N+=8)H=f[d++],C[h++]=H&128?R:M,C[h++]=H&64?R:M,C[h++]=H&32?R:M,C[h++]=H&16?R:M,C[h++]=H&8?R:M,C[h++]=H&4?R:M,C[h++]=H&2?R:M,C[h++]=H&1?R:M;for(;N<P;N++)I===0&&(H=f[d++],I=128),C[h++]=H&I?R:M,I>>=1}for(;h<_;)C[h++]=0;n.putImageData(c,0,y*as)}}else if(e.kind===lu.RGBA_32BPP){for(b=0,S=s*as*4,y=0;y<a;y++)p.set(f.subarray(d,d+S)),d+=S,n.putImageData(c,0,b),b+=as;y<o&&(S=s*i*4,p.set(f.subarray(d,d+S)),n.putImageData(c,0,b))}else if(e.kind===lu.RGB_24BPP)for(A=as,S=s*A,y=0;y<o;y++){for(y>=a&&(A=i,S=s*A),h=0,b=S;b--;)p[h++]=f[d++],p[h++]=f[d++],p[h++]=f[d++],p[h++]=255;n.putImageData(c,0,y*as)}else throw new Error(`bad image kind: ${e.kind}`)}function JE(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,i=t%as,a=(t-i)/as,o=i===0?a:a+1,c=n.createImageData(s,as);let d=0;const h=e.data,f=c.data;for(let p=0;p<o;p++){const y=p<a?as:i;({srcPos:d}=VG({src:h,srcPos:d,dest:f,width:s,height:y,nonBlackColor:0})),n.putImageData(c,0,p*as)}}function Uc(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function jh(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function e_(n,e){if(e)return!0;De.singularValueDecompose2dScale(n,xs);const t=Math.fround(ai.pixelRatio*Ja.PDF_TO_CSS_UNITS);return xs[0]<=t&&xs[1]<=t}const GG=["butt","round","square"],KG=["miter","round","bevel"],YG={},t_={};class vl{constructor(e,t,s,i,a,{optionalContentConfig:o,markedContentStack:c=null},d,h,f){this.ctx=e,this.current=new QE(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=o,this.cachedCanvases=new qG(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,t,s=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):s}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:i=null}){const a=this.ctx.canvas.width,o=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,o),this.ctx.fillStyle=c,s){const d=this.cachedCanvases.getCanvas("transparent",a,o);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Lt(this.compositeCtx))}this.ctx.save(),jh(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Lt(this.ctx)}executeOperatorList(e,t,s,i,a){const o=e.argsArray,c=e.fnArray;let d=t||0;const h=o.length;if(h===d)return d;const f=h-d>WE&&typeof s=="function",p=f?Date.now()+HG:0;let y=0;const b=this.commonObjs,A=this.objs;let S,E;for(;;){if(i!==void 0&&d===i.nextBreakPoint)return i.breakIt(d,s),d;if(!a||a(d))if(S=c[d],E=o[d]??null,S!==_l.dependency)E===null?this[S](d):this[S](d,...E);else for(const C of E){this.dependencyTracker?.recordNamedData(C,d);const _=C.startsWith("g_")?b:A;if(!_.has(C))return _.get(C,s),d}if(d++,d===h)return d;if(f&&++y>WE){if(Date.now()>p)return s(),d;y=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const s=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),c=s,d=i,h="prescale1",f,p;for(;a>2&&c>1||o>2&&d>1;){let y=c,b=d;a>2&&c>1&&(y=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),a/=c/y),o>2&&d>1&&(b=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,o/=d/b),f=this.cachedCanvases.getCanvas(h,y,b),p=f.context,p.clearRect(0,0,y,b),p.drawImage(e,0,0,c,d,0,0,y,b),e=f.canvas,c=y,d=b,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:d}}_createMaskCanvas(e,t){const s=this.ctx,{width:i,height:a}=t,o=this.current.fillColor,c=this.current.patternFill,d=Lt(s);let h,f,p,y;if((t.bitmap||t.data)&&t.count>1){const I=t.bitmap||t.data.buffer;f=JSON.stringify(c?d:[d.slice(0,4),o]),h=this._cachedBitmapsMap.get(I),h||(h=new Map,this._cachedBitmapsMap.set(I,h));const H=h.get(f);if(H&&!c){const $=Math.round(Math.min(d[0],d[2])+d[4]),K=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(e,Fs.transformAndFill),{canvas:H,offsetX:$,offsetY:K}}p=H}p||(y=this.cachedCanvases.getCanvas("maskCanvas",i,a),JE(y.context,t));let b=De.transform(d,[1/i,0,0,-1/a,0,0]);b=De.transform(b,[1,0,0,1,0,-a]);const A=ul.slice();De.axialAlignedBoundingBox([0,0,i,a],b,A);const[S,E,C,_]=A,T=Math.round(C-S)||1,R=Math.round(_-E)||1,M=this.cachedCanvases.getCanvas("fillCanvas",T,R),k=M.context,N=S,P=E;k.translate(-N,-P),k.transform(...b),p||(p=this._scaleImage(y.canvas,pi(k)),p=p.img,h&&c&&h.set(f,p)),k.imageSmoothingEnabled=e_(Lt(k),t.interpolate),Oh(k,p,0,0,p.width,p.height,0,0,i,a),k.globalCompositeOperation="source-in";const j=De.transform(pi(k),[1,0,0,1,-N,-P]);return k.fillStyle=c?o.getPattern(s,this,j,Tn.FILL,e):o,k.fillRect(0,0,i,a),h&&!c&&(this.cachedCanvases.delete("fillCanvas"),h.set(f,M.canvas)),this.dependencyTracker?.recordDependencies(e,Fs.transformAndFill),{canvas:M.canvas,offsetX:Math.round(N),offsetY:Math.round(P)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=GG[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=KG[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,s){this.dependencyTracker?.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=s)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[s,i]of t)switch(s){case"LW":this.setLineWidth(e,i);break;case"LC":this.setLineCap(e,i);break;case"LJ":this.setLineJoin(e,i);break;case"ML":this.setMiterLimit(e,i);break;case"D":this.setDash(e,i[0],i[1]);break;case"RI":this.setRenderingIntent(e,i);break;case"FL":this.setFlatness(e,i);break;case"Font":this.setFont(e,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,t,s);this.suspendedCtx=this.ctx;const o=this.ctx=a.context;o.setTransform(this.suspendedCtx.getTransform()),Uc(this.suspendedCtx,o),$G(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Uc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,i){const a=i[0],o=i[1],c=i[2]-a,d=i[3]-o;c===0||d===0||(this.genericComposeSMask(t.context,s,c,d,t.subtype,t.backdrop,t.transferMap,a,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,i,a,o,c,d,h,f,p){let y=e.canvas,b=d-f,A=h-p;if(o)if(b<0||A<0||b+s>y.width||A+i>y.height){const E=this.cachedCanvases.getCanvas("maskExtension",s,i),C=E.context;C.drawImage(y,-b,-A),C.globalCompositeOperation="destination-atop",C.fillStyle=o,C.fillRect(0,0,s,i),C.globalCompositeOperation="source-over",y=E.canvas,b=A=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(b,A,s,i),e.clip(E),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(b,A,s,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&c?t.filter=this.filterFactory.addAlphaFilter(c):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(c));const S=new Path2D;S.rect(d,h,s,i),t.clip(S),t.globalCompositeOperation="destination-in",t.drawImage(y,b,A,s,i,d,h,s,i),t.restore()}save(e){this.inSMaskMode&&Uc(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Uc(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,i,a,o,c){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,s,i,a,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s,i){let[a]=s;if(!i){a||=s[0]=new Path2D,this[t](e,a);return}if(this.dependencyTracker!==null){const o=t===_l.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-o,i[2]+o,i[1]-o,i[3]+o).recordDependencies(e,["transform"])}if(!(a instanceof Path2D)){const o=s[0]=new Path2D;for(let c=0,d=a.length;c<d;)switch(a[c++]){case Rh.moveTo:o.moveTo(a[c++],a[c++]);break;case Rh.lineTo:o.lineTo(a[c++],a[c++]);break;case Rh.curveTo:o.bezierCurveTo(a[c++],a[c++],a[c++],a[c++],a[c++],a[c++]);break;case Rh.closePath:o.closePath();break;default:Qe(`Unrecognized drawing path operator: ${a[c-1]}`);break}a=o}De.axialAlignedBoundingBox(i,Lt(this.ctx),this.current.minMax),this[t](e,a),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,s=!0){const i=this.ctx,a=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){const o=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=a.getPattern(i,this,pi(i),Tn.STROKE,e),o){const c=new Path2D;c.addPath(t,i.getTransform().invertSelf().multiplySelf(o)),t=c}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,Fs.stroke),s&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Tn.STROKE,Lt(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,s=!0){const i=this.ctx,a=this.current.fillColor,o=this.current.patternFill;let c=!1;if(o){const h=a.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(e),i.save(),i.fillStyle=a.getPattern(i,this,pi(i),Tn.FILL,e),h){const f=new Path2D;f.addPath(t,i.getTransform().invertSelf().multiplySelf(h)),t=f}c=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),this.dependencyTracker?.recordDependencies(e,Fs.fill),c&&(i.restore(),this.dependencyTracker?.restore(e)),s&&this.consumePath(e,t,d)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,Fs.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=YG}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=t_}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,a=s.getTransform().invertSelf();for(const{transform:o,x:c,y:d,fontSize:h,path:f}of t)f&&i.addPath(f,new DOMMatrix(o).preMultiplySelf(a).translate(c,d).scale(h,-h));s.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,s){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),a=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=i.fontMatrix||Rv,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&Qe("Invalid font matrix for font "+t),s<0?(s=-s,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=s,i.isType3Font)return;const o=i.loadedName||"sans-serif",c=i.systemFontInfo?.css||`"${o}", ${i.fallbackName}`;let d="normal";i.black?d="900":i.bold&&(d="bold");const h=i.italic?"italic":"normal";let f=s;s<YE?f=YE:s>XE&&(f=XE),this.current.fontSizeScale=s/f,this.ctx.font=`${h} ${d} ${f}px ${c}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,t,s){this.setLeading(e,-s),this.moveText(e,t,s)}setTextMatrix(e,t){this.dependencyTracker?.recordSimpleData("textMatrix",e);const{current:s}=this;s.textMatrix=t,s.textMatrixScale=Math.hypot(t[0],t[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#s(e,t,s){const i=new Path2D;return i.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),i}paintChar(e,t,s,i,a,o){const c=this.ctx,d=this.current,h=d.font,f=d.textRenderingMode,p=d.fontSize/d.fontSizeScale,y=f&Cn.FILL_STROKE_MASK,b=!!(f&Cn.ADD_TO_PATH_FLAG),A=d.patternFill&&!h.missingFile,S=d.patternStroke&&!h.missingFile;let E;if((h.disableFontFace||b||A||S)&&!h.missingFile&&(E=h.getPathGenerator(this.commonObjs,t)),E&&(h.disableFontFace||A||S)){c.save(),c.translate(s,i),c.scale(p,-p),this.dependencyTracker?.recordCharacterBBox(e,c,h);let C;if(y===Cn.FILL||y===Cn.FILL_STROKE)if(a){C=c.getTransform(),c.setTransform(...a);const _=this.#s(E,C,a);c.fill(_)}else c.fill(E);if(y===Cn.STROKE||y===Cn.FILL_STROKE)if(o){C||=c.getTransform(),c.setTransform(...o);const{a:_,b:T,c:R,d:M}=C,k=De.inverseTransform(o),N=De.transform([_,T,R,M,0,0],k);De.singularValueDecompose2dScale(N,xs),c.lineWidth*=Math.max(xs[0],xs[1])/p,c.stroke(this.#s(E,C,o))}else c.lineWidth/=p,c.stroke(E);c.restore()}else(y===Cn.FILL||y===Cn.FILL_STROKE)&&(c.fillText(t,s,i),this.dependencyTracker?.recordCharacterBBox(e,c,h,p,s,i,()=>c.measureText(t))),(y===Cn.STROKE||y===Cn.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,c,h,p,s,i,()=>c.measureText(t)).recordDependencies(e,Fs.stroke),c.strokeText(t,s,i));b&&((this.pendingTextPaths||=[]).push({transform:Lt(c),x:s,y:i,fontSize:p,path:E}),this.dependencyTracker?.recordCharacterBBox(e,c,h,p,s,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){s=!0;break}return tt(this,"isFontSubpixelAAEnabled",s)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Fs.showText).resetBBox(e),this.current.textRenderingMode&Cn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,i=s.font;if(i.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const a=s.fontSize;if(a===0){this.dependencyTracker?.recordOperation(e);return}const o=this.ctx,c=s.fontSizeScale,d=s.charSpacing,h=s.wordSpacing,f=s.fontDirection,p=s.textHScale*f,y=t.length,b=i.vertical,A=b?1:-1,S=i.defaultVMetrics,E=a*s.fontMatrix[0],C=s.textRenderingMode===Cn.FILL&&!i.disableFontFace&&!s.patternFill;o.save(),s.textMatrix&&o.transform(...s.textMatrix),o.translate(s.x,s.y+s.textRise),f>0?o.scale(p,-1):o.scale(p,1);let _,T;if(s.patternFill){o.save();const P=s.fillColor.getPattern(o,this,pi(o),Tn.FILL,e);_=Lt(o),o.restore(),o.fillStyle=P}if(s.patternStroke){o.save();const P=s.strokeColor.getPattern(o,this,pi(o),Tn.STROKE,e);T=Lt(o),o.restore(),o.strokeStyle=P}let R=s.lineWidth;const M=s.textMatrixScale;if(M===0||R===0){const P=s.textRenderingMode&Cn.FILL_STROKE_MASK;(P===Cn.STROKE||P===Cn.FILL_STROKE)&&(R=this.getSinglePixelWidth())}else R/=M;if(c!==1&&(o.scale(c,c),R/=c),o.lineWidth=R,i.isInvalidPDFjsFont){const P=[];let j=0;for(const H of t)P.push(H.unicode),j+=H.width;const I=P.join("");if(o.fillText(I,0,0),this.dependencyTracker!==null){const H=o.measureText(I);this.dependencyTracker.recordBBox(e,this.ctx,-H.actualBoundingBoxLeft,H.actualBoundingBoxRight,-H.actualBoundingBoxAscent,H.actualBoundingBoxDescent).recordShowTextOperation(e)}s.x+=j*E*p,o.restore(),this.compose();return}let k=0,N;for(N=0;N<y;++N){const P=t[N];if(typeof P=="number"){k+=A*P*a/1e3;continue}let j=!1;const I=(P.isSpace?h:0)+d,H=P.fontChar,$=P.accent;let K,Z,oe=P.width;if(b){const z=P.vmetric||S,Q=-(P.vmetric?z[1]:oe*.5)*E,me=z[2]*E;oe=z?-z[0]:oe,K=Q/c,Z=(k+me)/c}else K=k/c,Z=0;let F;if(i.remeasure&&oe>0){F=o.measureText(H);const z=F.width*1e3/a*c;if(oe<z&&this.isFontSubpixelAAEnabled){const Q=oe/z;j=!0,o.save(),o.scale(Q,1),K/=Q}else oe!==z&&(K+=(oe-z)/2e3*a/c)}if(this.contentVisible&&(P.isInFont||i.missingFile)){if(C&&!$)o.fillText(H,K,Z),this.dependencyTracker?.recordCharacterBBox(e,o,F?{bbox:null}:i,a/c,K,Z,()=>F??o.measureText(H));else if(this.paintChar(e,H,K,Z,_,T),$){const z=K+a*$.offset.x/c,Q=Z-a*$.offset.y/c;this.paintChar(e,$.fontChar,z,Q,_,T)}}const B=b?oe*E-I*f:oe*E+I*f;k+=B,j&&o.restore()}b?s.y-=k:s.x+=k*p,o.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const s=this.ctx,i=this.current,a=i.font,o=i.fontSize,c=i.fontDirection,d=a.vertical?1:-1,h=i.charSpacing,f=i.wordSpacing,p=i.textHScale*c,y=i.fontMatrix||Rv,b=t.length,A=i.textRenderingMode===Cn.INVISIBLE;let S,E,C,_;if(A||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),i.textMatrix&&s.transform(...i.textMatrix),s.translate(i.x,i.y+i.textRise),s.scale(p,c);const T=this.dependencyTracker;for(this.dependencyTracker=T?new Rf(T,e):null,S=0;S<b;++S){if(E=t[S],typeof E=="number"){_=d*E*o/1e3,this.ctx.translate(_,0),i.x+=_*p;continue}const R=(E.isSpace?f:0)+h,M=a.charProcOperatorList[E.operatorListId];M?this.contentVisible&&(this.save(),s.scale(o,o),s.transform(...y),this.executeOperatorList(M),this.restore()):Qe(`Type3 character "${E.operatorListId}" is not available.`);const k=[E.width,0];De.applyTransform(k,y),C=k[0]*o+R,s.translate(C,0),i.x+=C*p}s.restore(),T&&(this.dependencyTracker=T)}setCharWidth(e,t,s){}setCharWidthAndBounds(e,t,s,i,a,o,c){const d=new Path2D;d.rect(i,a,o-i,c-a),this.ctx.clip(d),this.dependencyTracker?.recordBBox(e,this.ctx,i,o,a,c).recordClipBox(e,this.ctx,i,o,a,c),this.endPath(e)}getColorN_Pattern(e,t){let s;if(t[0]==="TilingPattern"){const i=this.baseTransform||Lt(this.ctx),a={createCanvasGraphics:(o,c)=>new vl(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Rf(this.dependencyTracker,c,!0):null)};s=new xb(t,this.ctx,a,i)}else s=this._getPattern(e,t[1],t[2]);return s}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,s=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=UG(this.getObject(e,t)),this.cachedPatterns.set(t,i)),s&&(i.matrix=s),i}shadingFill(e,t){if(!this.contentVisible)return;const s=this.ctx;this.save(e);const i=this._getPattern(e,t);s.fillStyle=i.getPattern(s,this,pi(s),Tn.SHADING,e);const a=pi(s);if(a){const{width:o,height:c}=s.canvas,d=ul.slice();De.axialAlignedBoundingBox([0,0,o,c],a,d);const[h,f,p,y]=d;this.ctx.fillRect(h,f,p-h,y-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Fs.transform).recordDependencies(e,Fs.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){_t("Should not call beginInlineImage")}beginImageData(){_t("Should not call beginImageData")}paintFormXObjectBegin(e,t,s){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Lt(this.ctx),s)){De.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[i,a,o,c]=s,d=new Path2D;d.rect(i,a,o-i,c-a),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(e,this.ctx,i,o,a,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||rm("TODO: Support non-isolated groups."),t.knockout&&Qe("Knockout groups not supported.");const i=Lt(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=ul.slice();De.axialAlignedBoundingBox(t.bbox,Lt(s),a);const o=[0,0,s.canvas.width,s.canvas.height];a=De.intersect(a,o)||[0,0,0,0];const c=Math.floor(a[0]),d=Math.floor(a[1]),h=Math.max(Math.ceil(a[2])-c,1),f=Math.max(Math.ceil(a[3])-d,1);this.current.startNewPathAndClipBox([0,0,h,f]);let p="groupAt"+this.groupLevel;t.smask&&(p+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(p,h,f),b=y.context;b.translate(-c,-d),b.transform(...i);let A=new Path2D;const[S,E,C,_]=t.bbox;if(A.rect(S,E,C-S,_-E),t.matrix){const T=new Path2D;T.addPath(A,new DOMMatrix(t.matrix)),A=T}b.clip(A),t.smask&&this.smaskStack.push({canvas:y.canvas,context:b,offsetX:c,offsetY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(c,d),s.save()),Uc(s,b),this.ctx=b,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=Lt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const o=ul.slice();De.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],a,o),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,s,i,a,o){if(this.#e(),jh(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const c=s[2]-s[0],d=s[3]-s[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=s[0],i[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=c,s[3]=d,De.singularValueDecompose2dScale(Lt(this.ctx),xs);const{viewportScale:h}=this,f=Math.ceil(c*this.outputScaleX*h),p=Math.ceil(d*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(f,p);const{canvas:y,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(xs[0],0,0,-xs[1],0,d*xs[1]),jh(this.ctx)}else{jh(this.ctx),this.endPath(e);const h=new Path2D;h.rect(s[0],s[1],c,d),this.ctx.clip(h)}}this.current=new QE(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...a)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const s=t.count;t=this.getObject(e,t.data,t),t.count=s;const i=this.ctx,a=this._createMaskCanvas(e,t),o=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,a.offsetX,a.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,a.offsetX,a.offsetX+o.width,a.offsetY,a.offsetY+o.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s,i=0,a=0,o,c){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const d=this.ctx;d.save();const h=Lt(d);d.transform(s,i,a,o,0,0);const f=this._createMaskCanvas(e,t);d.setTransform(1,0,0,1,f.offsetX-h[4],f.offsetY-h[5]),this.dependencyTracker?.resetBBox(e);for(let p=0,y=c.length;p<y;p+=2){const b=De.transform(h,[s,i,a,o,c[p],c[p+1]]);d.drawImage(f.canvas,b[4],b[5]),this.dependencyTracker?.recordBBox(e,this.ctx,b[4],b[4]+f.canvas.width,b[5],b[5]+f.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx,i=this.current.fillColor,a=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,Fs.transformAndFill);for(const o of t){const{data:c,width:d,height:h,transform:f}=o,p=this.cachedCanvases.getCanvas("maskCanvas",d,h),y=p.context;y.save();const b=this.getObject(e,c,o);JE(y,b),y.globalCompositeOperation="source-in",y.fillStyle=a?i.getPattern(y,this,pi(s),Tn.FILL,e):i,y.fillRect(0,0,d,h),y.restore(),s.save(),s.transform(...f),s.scale(1,-1),Oh(s,p.canvas,0,0,d,h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,s,0,d,0,h),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){Qe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,s)}paintImageXObjectRepeat(e,t,s,i,a){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){Qe("Dependent image isn't ready yet");return}const c=o.width,d=o.height,h=[];for(let f=0,p=a.length;f<p;f+=2)h.push({transform:[s,0,0,i,a[f],a[f+1]],x:0,y:0,w:c,h:d});this.paintInlineImageXObjectGroup(e,o,h)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",s,i),o=a.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",a.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const s=t.width,i=t.height,a=this.ctx;this.save(e);const{filter:o}=a;o!=="none"&&o!==""&&(a.filter="none"),a.scale(1/s,-1/i);let c;if(t.bitmap)c=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)c=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",s,i).context;ZE(f,t),c=this.applyTransferMapsToCanvas(f)}const d=this._scaleImage(c,pi(a));a.imageSmoothingEnabled=e_(Lt(a),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,a,0,s,-i,0).recordDependencies(e,Fs.imageXObject).recordOperation(e),Oh(a,d.img,0,0,d.paintWidth,d.paintHeight,0,-i,s,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,s){if(!this.contentVisible)return;const i=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const o=t.width,c=t.height,h=this.cachedCanvases.getCanvas("inlineImage",o,c).context;ZE(h,t),a=this.applyTransferMapsToCanvas(h)}this.dependencyTracker?.resetBBox(e);for(const o of s)i.save(),i.transform(...o.transform),i.scale(1,-1),Oh(i,a,o.x,o.y,o.w,o.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Fs.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,s){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,s){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,s){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const a=this.ctx;this.pendingClip?(i||(this.pendingClip===t_?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Lt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:i,d:a}=this.ctx.getTransform();let o,c;if(s===0&&i===0){const d=Math.abs(t),h=Math.abs(a);if(d===h)if(e===0)o=c=1/d;else{const f=d*e;o=c=f<1?1/f:1}else if(e===0)o=1/d,c=1/h;else{const f=d*e,p=h*e;o=f<1?1/f:1,c=p<1?1/p:1}}else{const d=Math.abs(t*a-s*i),h=Math.hypot(t,s),f=Math.hypot(i,a);if(e===0)o=f/d,c=h/d;else{const p=e*d;o=f>p?f/p:1,c=h>p?h/p:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:i}}=this,[a,o]=this.getScaleForStroking();if(a===o){s.lineWidth=(i||1)*a,s.stroke(e);return}const c=s.getLineDash();t&&s.save(),s.scale(a,o),Sy.a=1/a,Sy.d=1/o;const d=new Path2D;if(d.addPath(e,Sy),c.length>0){const h=Math.max(a,o);s.setLineDash(c.map(f=>f/h)),s.lineDashOffset/=h}s.lineWidth=i||1,s.stroke(d),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in _l)vl.prototype[n]!==void 0&&(vl.prototype[_l[n]]=vl.prototype[n]);class bl{#e;#t;#s;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,s={};let i=0;for(const h of bl.strings){const f=t.encode(e[h]);s[h]=f,i+=4+f.length}const a=new ArrayBuffer(i),o=new Uint8Array(a),c=new DataView(a);let d=0;for(const h of bl.strings){const f=s[h],p=f.length;c.setUint32(d,p),o.set(f,d+4),d+=4+p}return dt(d===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#s=new TextDecoder}#n(e){dt(e<bl.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const s=this.#t.getUint32(t);return this.#s.decode(new Uint8Array(this.#e,t+4,s))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class xl{#e;#t;#s;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,s={};let i=0;for(const y of xl.strings){const b=t.encode(e[y]);s[y]=b,i+=4+b.length}i+=4;let a,o,c=1+i;e.style&&(a=t.encode(e.style.style),o=t.encode(e.style.weight),c+=4+a.length+4+o.length);const d=new ArrayBuffer(c),h=new Uint8Array(d),f=new DataView(d);let p=0;f.setUint8(p++,e.guessFallback?1:0),f.setUint32(p,0),p+=4,i=0;for(const y of xl.strings){const b=s[y],A=b.length;i+=4+A,f.setUint32(p,A),h.set(b,p+4),p+=4+A}return f.setUint32(p-i-4,i),e.style&&(f.setUint32(p,a.length),h.set(a,p+4),p+=4+a.length,f.setUint32(p,o.length),h.set(o,p+4),p+=4+o.length),dt(p<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(p)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#s=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){dt(e<xl.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const s=this.#t.getUint32(t);return this.#s.decode(new Uint8Array(this.#e,t+4,s))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),s=this.#s.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const i=this.#t.getUint32(e),a=this.#s.decode(new Uint8Array(this.#e,e+4,i));return{style:s,weight:a}}}class At{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#s=this.#t+1+8;static#n=this.#s+1+48;static#i=this.#n+1+6;#r;#a;#o;constructor({data:e,extra:t}){this.#r=e,this.#a=new TextDecoder,this.#o=new DataView(this.#r),t&&Object.assign(this,t)}#c(e){dt(e<At.bools.length,"Invalid boolean index");const t=Math.floor(e/4),s=e*2%8,i=this.#o.getUint8(t)>>s&3;return i===0?void 0:i===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return dt(e<At.numbers.length,"Invalid number index"),this.#o.getFloat64(At.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=At.#t;if(this.#o.getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<4;i++)s.push(this.#o.getInt16(e,!0)),e+=2;return s}get fontMatrix(){let e=At.#s;if(this.#o.getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<6;i++)s.push(this.#o.getFloat64(e,!0)),e+=8;return s}get defaultVMetrics(){let e=At.#n;if(this.#o.getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<3;i++)s.push(this.#o.getInt16(e,!0)),e+=2;return s}#h(e){dt(e<At.strings.length,"Invalid string index");let t=At.#i+4;for(let a=0;a<e;a++)t+=this.#o.getUint32(t)+4;const s=this.#o.getUint32(t),i=new Uint8Array(s);return i.set(new Uint8Array(this.#r,t+4,s)),this.#a.decode(i)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=At.#i;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);e+=4+s;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);if(a!==0)return new Uint8Array(this.#r,e+4,a)}clearData(){let e=At.#i;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);e+=4+s;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);new Uint8Array(this.#r,e+4,a).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=At.#i;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);e+=4+s;const i=this.#o.getUint32(e);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(this.#r,e+4,i)),new bl(a.buffer)}get systemFontInfo(){let e=At.#i;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);if(s===0)return null;const i=new Uint8Array(s);return i.set(new Uint8Array(this.#r,e+4,s)),new xl(i.buffer)}static write(e){const t=e.systemFontInfo?xl.write(e.systemFontInfo):null,s=e.cssFontInfo?bl.write(e.cssFontInfo):null,i=new TextEncoder,a={};let o=0;for(const S of At.strings)a[S]=i.encode(e[S]),o+=4+a[S].length;const c=At.#i+4+o+4+(t?t.byteLength:0)+4+(s?s.byteLength:0)+4+(e.data?e.data.length:0),d=new ArrayBuffer(c),h=new Uint8Array(d),f=new DataView(d);let p=0;const y=At.bools.length;let b=0,A=0;for(let S=0;S<y;S++){const E=e[At.bools[S]];b|=(E===void 0?0:E?2:1)<<A,A+=2,(A===8||S===y-1)&&(f.setUint8(p++,b),b=0,A=0)}dt(p===At.#e,"FontInfo.write: Boolean properties offset mismatch");for(const S of At.numbers)f.setFloat64(p,e[S]),p+=8;if(dt(p===At.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(p++,4);for(const S of e.bbox)f.setInt16(p,S,!0),p+=2}else f.setUint8(p++,0),p+=8;if(dt(p===At.#s,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(p++,6);for(const S of e.fontMatrix)f.setFloat64(p,S,!0),p+=8}else f.setUint8(p++,0),p+=48;if(dt(p===At.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(p++,1);for(const S of e.defaultVMetrics)f.setInt16(p,S,!0),p+=2}else f.setUint8(p++,0),p+=6;dt(p===At.#i,"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(At.#i,0),p+=4;for(const S of At.strings){const E=a[S],C=E.length;f.setUint32(p,C),h.set(E,p+4),p+=4+C}if(f.setUint32(At.#i,p-At.#i-4),!t)f.setUint32(p,0),p+=4;else{const S=t.byteLength;f.setUint32(p,S),dt(p+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),h.set(new Uint8Array(t),p+4),p+=4+S}if(!s)f.setUint32(p,0),p+=4;else{const S=s.byteLength;f.setUint32(p,S),dt(p+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),h.set(new Uint8Array(s),p+4),p+=4+S}return e.data===void 0?(f.setUint32(p,0),p+=4):(f.setUint32(p,e.data.length),h.set(e.data,p+4),p+=4+e.data.length),dt(p<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(p)}}class Qr{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class XG{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const il=Symbol("INTERNAL");class WG{#e=!1;#t=!1;#s=!1;#n=!0;constructor(e,{name:t,intent:s,usage:i,rbGroups:a}){this.#e=!!(e&ys.DISPLAY),this.#t=!!(e&ys.PRINT),this.name=t,this.intent=s,this.usage=i,this.rbGroups=a}get visible(){if(this.#s)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,s=!1){e!==il&&_t("Internal method `_setVisible` called."),this.#s=s,this.#n=t}}class QG{#e=null;#t=new Map;#s=null;#n=null;constructor(e,t=ys.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const s of e.groups)this.#t.set(s.id,new WG(t,s));if(e.baseState==="OFF")for(const s of this.#t.values())s._setVisible(il,!1);for(const s of e.on)this.#t.get(s)._setVisible(il,!0);for(const s of e.off)this.#t.get(s)._setVisible(il,!1);this.#s=this.getHash()}}#i(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let i=1;i<t;i++){const a=e[i];let o;if(Array.isArray(a))o=this.#i(a);else if(this.#t.has(a))o=this.#t.get(a).visible;else return Qe(`Optional content group not found: ${a}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return rm("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Qe(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#i(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return Qe(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return Qe(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return Qe(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return Qe(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Qe(`Unknown optional content policy ${e.policy}.`),!0}return Qe(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){const i=this.#t.get(e);if(!i){Qe(`Optional content group not found: ${e}`);return}if(s&&t&&i.rbGroups.length)for(const a of i.rbGroups)for(const o of a)o!==e&&this.#t.get(o)?._setVisible(il,!1,!0);i._setVisible(il,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const a=this.#t.get(i);if(a)switch(s){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!a.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new NN;for(const[t,s]of this.#t)e.update(`${t}:${s.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class ZG{constructor(e,{disableRange:t=!1,disableStream:s=!1}){dt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:o,contentDispositionFilename:c}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=c,a?.length>0){const d=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,h)=>{this._onReceiveData({begin:d,chunk:h})}),e.addProgressListener((d,h)=>{this._onProgress({loaded:d,total:h})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(s),!0)});dt(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){dt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new JG(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new eK(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class JG{constructor(e,t,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=om(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class eK{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function tK(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let f=c(t);return f=unescape(f),f=d(f),f=h(f),a(f)}if(t=o(n),t){const f=h(t);return a(f)}if(t=s("filename","i").exec(n),t){t=t[1];let f=c(t);return f=h(f),a(f)}function s(f,p){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function i(f,p){if(f){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const y=new TextDecoder(f,{fatal:!0}),b=Gu(p);p=y.decode(b),e=!1}catch{}}return p}function a(f){return e&&/[\x80-\xff]/.test(f)&&(f=i("utf-8",f),e&&(f=i("iso-8859-1",f))),f}function o(f){const p=[];let y;const b=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=b.exec(f))!==null;){let[,S,E,C]=y;if(S=parseInt(S,10),S in p){if(S===0)break;continue}p[S]=[E,C]}const A=[];for(let S=0;S<p.length&&S in p;++S){let[E,C]=p[S];C=c(C),E&&(C=unescape(C),S===0&&(C=d(C))),A.push(C)}return A.join("")}function c(f){if(f.startsWith('"')){const p=f.slice(1).split('\\"');for(let y=0;y<p.length;++y){const b=p[y].indexOf('"');b!==-1&&(p[y]=p[y].slice(0,b),p.length=y+1),p[y]=p[y].replaceAll(/\\(.)/g,"$1")}f=p.join('"')}return f}function d(f){const p=f.indexOf("'");if(p===-1)return f;const y=f.slice(0,p),A=f.slice(p+1).replace(/^[^']*'/,"");return i(y,A)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,y,b,A){if(b==="q"||b==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,E){return String.fromCharCode(parseInt(E,16))}),i(y,A);try{A=atob(A)}catch{}return i(y,A)})}return""}function BN(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const i=e[s];i!==void 0&&t.append(s,i)}return t}function lm(n){return URL.parse(n)?.origin??null}function zN({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(n.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function UN(n){const e=n.get("Content-Disposition");if(e){let t=tK(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(om(t))return t}return null}function Qu(n,e){return new _u(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function VN(n){return n===200||n===206}function HN(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function $N(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Qe(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class nK{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=BN(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return dt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new sK(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new iK(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class sK{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),i=t.url;fetch(i,HN(s,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=lm(a.url),!VN(a.status))throw Qu(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const o=a.headers,{allowRangeRequests:c,suggestedLength:d}=zN({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=d||this._contentLength,this._filename=UN(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new mr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:$N(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class iK{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${t}-${s-1}`);const o=i.url;fetch(o,HN(a,this._withCredentials,this._abortController)).then(c=>{const d=lm(c.url);if(d!==e._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${e._responseOrigin}".`);if(!VN(c.status))throw Qu(c.status,o);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:$N(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Ay=200,Cy=206;function rK(n){const e=n.response;return typeof e!="string"?e:Gu(e).buffer}class aK{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:s}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=BN(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[a,o]of this.headers)t.setRequestHeader(a,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Cy):i.expectedStatus=Ay,t.responseType="arraybuffer",dt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){const s=this.pendingRequests[e];s&&s.onProgress?.(t)}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){s.onError(i.status);return}const a=i.status||Ay;if(!(a===Ay&&s.expectedStatus===Cy)&&a!==s.expectedStatus){s.onError(i.status);return}const c=rK(i);if(a===Cy){const d=i.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);h?s.onDone({begin:parseInt(h[1],10),chunk:c}):(Qe('Missing or invalid "Content-Range" header.'),s.onError(0))}else c?s.onDone({begin:0,chunk:c}):s.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class oK{constructor(e){this._source=e,this._manager=new aK(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return dt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new lK(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new cK(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class lK{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=lm(t.responseURL);const s=t.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[d,...h]=c.split(": ");return[d,h.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:o}=zN({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=UN(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Qu(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class cK{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=lm(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=Qu(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const uK=/^[a-z][a-z0-9\-+.]+:/i;function dK(n){if(uK.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class hK{constructor(e){this.source=e,this.url=dK(e.url),dt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return dt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new fK(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new mK(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class fK{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Qu(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new mr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class mK{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Vc=Symbol("INITIAL_DATA");class qN{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Vc}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const s=this.#e[e];if(!s||s.data===Vc)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=this.#e[e];return!!t&&t.data!==Vc}delete(e){const t=this.#e[e];return!t||t.data===Vc?!1:(delete this.#e[e],!0)}resolve(e,t=null){const s=this.#t(e);s.data=t,s.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==Vc&&(yield[e,t])}}}const pK=1e5,n_=30;let Ru=class Is{#e=Promise.withResolvers();#t=null;#s=!1;#n=!!globalThis.FontInspector?.enabled;#i=null;#r=null;#a=0;#o=0;#c=null;#l=null;#h=0;#d=0;#f=Object.create(null);#g=[];#m=null;#u=[];#p=new WeakMap;#y=null;static#b=new Map;static#v=new Map;static#C=new WeakMap;static#S=null;static#x=new Set;constructor({textContentSource:e,container:t,viewport:s}){if(e instanceof ReadableStream)this.#m=e;else if(typeof e=="object")this.#m=new ReadableStream({start(d){d.enqueue(e),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#d=s.scale*ai.pixelRatio,this.#h=s.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:a,pageX:o,pageY:c}=s.rawDims;this.#y=[1,0,0,-1,-o,c+a],this.#o=i,this.#a=a,Is.#D(),na(t,s),this.#e.promise.finally(()=>{Is.#x.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=gn.platform;return tt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:s})=>{if(s){this.#e.resolve();return}this.#i??=t.lang,Object.assign(this.#f,t.styles),this.#_(t.items),e()},this.#e.reject)};return this.#c=this.#m.getReader(),Is.#x.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const s=e.scale*ai.pixelRatio,i=e.rotation;if(i!==this.#h&&(t?.(),this.#h=i,na(this.#l,{rotation:i})),s!==this.#d){t?.(),this.#d=s;const a={div:null,properties:null,ctx:Is.#M(this.#i)};for(const o of this.#u)a.properties=this.#p.get(o),a.div=o,this.#E(a)}}cancel(){const e=new mr("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#_(e){if(this.#s)return;this.#r.ctx??=Is.#M(this.#i);const t=this.#u,s=this.#g;for(const i of e){if(t.length>pK){Qe("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const a=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id&&this.#t.setAttribute("id",`${i.id}`),a.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}s.push(i.str),this.#A(i)}}#A(e){const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#u.push(t);const i=De.transform(this.#y,e.transform);let a=Math.atan2(i[1],i[0]);const o=this.#f[e.fontName];o.vertical&&(a+=Math.PI/2);let c=this.#n&&o.fontSubstitution||o.fontFamily;c=Is.fontFamilyMap.get(c)||c;const d=Math.hypot(i[2],i[3]),h=d*Is.#F(c,o,this.#i);let f,p;a===0?(f=i[4],p=i[5]-h):(f=i[4]+h*Math.sin(a),p=i[5]-h*Math.cos(a));const y="calc(var(--total-scale-factor) *",b=t.style;this.#t===this.#l?(b.left=`${(100*f/this.#o).toFixed(2)}%`,b.top=`${(100*p/this.#a).toFixed(2)}%`):(b.left=`${y}${f.toFixed(2)}px)`,b.top=`${y}${p.toFixed(2)}px)`),b.fontSize=`${y}${(Is.#S*d).toFixed(2)}px)`,b.fontFamily=c,s.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),a!==0&&(s.angle=a*(180/Math.PI));let A=!1;if(e.str.length>1)A=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),E=Math.abs(e.transform[3]);S!==E&&Math.max(S,E)/Math.min(S,E)>1.5&&(A=!0)}if(A&&(s.canvasWidth=o.vertical?e.height:e.width),this.#p.set(t,s),this.#r.div=t,this.#r.properties=s,this.#E(this.#r),s.hasText&&this.#t.append(t),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#t.append(S)}}#E(e){const{div:t,properties:s,ctx:i}=e,{style:a}=t;let o="";if(Is.#S>1&&(o=`scale(${1/Is.#S})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=a,{canvasWidth:d,fontSize:h}=s;Is.#R(i,h*this.#d,c);const{width:f}=i.measureText(t.textContent);f>0&&(o=`scaleX(${d*this.#d/f}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(a.transform=o)}static cleanup(){if(!(this.#x.size>0)){this.#b.clear();for(const{canvas:e}of this.#v.values())e.remove();this.#v.clear()}}static#M(e=null){let t=this.#v.get(e||="");if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(e,t),this.#C.set(t,{size:0,family:""})}return t}static#R(e,t,s){const i=this.#C.get(e);t===i.size&&s===i.family||(e.font=`${t}px ${s}`,i.size=t,i.family=s)}static#D(){if(this.#S!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#S=e.getBoundingClientRect().height,e.remove()}static#F(e,t,s){const i=this.#b.get(e);if(i)return i;const a=this.#M(s);a.canvas.width=a.canvas.height=n_,this.#R(a,n_,e);const o=a.measureText(""),c=o.fontBoundingBoxAscent,d=Math.abs(o.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let h=.8;return c?h=c/(c+d):(gn.platform.isFirefox&&Qe("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?h=t.ascent:t.descent&&(h=1+t.descent)),this.#b.set(e,h),h}};const gK=100;function wb(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new Sb,{docId:t}=e,s=n.url?CG(n.url):null,i=n.data?EG(n.data):null,a=n.httpHeaders||null,o=n.withCredentials===!0,c=n.password??null,d=n.range instanceof Ab?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let f=n.worker instanceof Tl?n.worker:null;const p=n.verbosity,y=typeof n.docBaseUrl=="string"&&!Yu(n.docBaseUrl)?n.docBaseUrl:null,b=Mh(n.cMapUrl),A=n.cMapPacked!==!1,S=n.CMapReaderFactory||(In?PG:VE),E=Mh(n.iccUrl),C=Mh(n.standardFontDataUrl),_=n.StandardFontDataFactory||(In?kG:HE),T=Mh(n.wasmUrl),R=n.WasmFactory||(In?OG:$E),M=n.stopAtErrors!==!0,k=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,N=n.isEvalSupported!==!1,P=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!In,j=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!In&&(gn.platform.isFirefox||!globalThis.chrome),I=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,H=typeof n.disableFontFace=="boolean"?n.disableFontFace:In,$=n.fontExtraProperties===!0,K=n.enableXfa===!0,Z=n.ownerDocument||globalThis.document,oe=n.disableRange===!0,F=n.disableStream===!0,B=n.disableAutoFetch===!0,z=n.pdfBug===!0,Q=n.CanvasFactory||(In?NG:RG),me=n.FilterFactory||(In?MG:DG),L=n.enableHWA===!0,X=n.useWasm!==!1,te=d?d.length:n.length??NaN,ce=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!In&&!H,ye=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(S===VE&&_===HE&&R===$E&&b&&C&&T&&Qc(b,document.baseURI)&&Qc(C,document.baseURI)&&Qc(T,document.baseURI)),be=null;rG(p);const W={canvasFactory:new Q({ownerDocument:Z,enableHWA:L}),filterFactory:new me({docId:t,ownerDocument:Z}),cMapReaderFactory:ye?null:new S({baseUrl:b,isCompressed:A}),standardFontDataFactory:ye?null:new _({baseUrl:C}),wasmFactory:ye?null:new R({baseUrl:T})};f||(f=Tl.create({verbosity:p,port:Qr.workerPort}),e._worker=f);const Ae={docId:t,apiVersion:"5.4.296",data:i,password:c,disableAutoFetch:B,rangeChunkSize:h,length:te,docBaseUrl:y,enableXfa:K,evaluatorOptions:{maxImageSize:k,disableFontFace:H,ignoreErrors:M,isEvalSupported:N,isOffscreenCanvasSupported:P,isImageDecoderSupported:j,canvasMaxAreaInBytes:I,fontExtraProperties:$,useSystemFonts:ce,useWasm:X,useWorkerFetch:ye,cMapUrl:b,iccUrl:E,standardFontDataUrl:C,wasmUrl:T}},xe={ownerDocument:Z,pdfBug:z,styleElement:be,loadingParams:{disableAutoFetch:B,enableXfa:K}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const je=f.messageHandler.sendWithPromise("GetDocRequest",Ae,i?[i.buffer]:null);let we;if(d)we=new ZG(d,{disableRange:oe,disableStream:F});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");const ze=Qc(s)?nK:In?hK:oK;we=new ze({url:s,length:te,httpHeaders:a,withCredentials:o,rangeChunkSize:h,disableRange:oe,disableStream:F})}return je.then(ze=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const se=new Zc(t,ze,f.port),he=new bK(se,e,we,xe,W,L);e._transport=he,se.send("Ready",null)})}).catch(e._capability.reject),e}class Sb{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Sb.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let Ab=class{#e=Promise.withResolvers();#t=[];#s=[];#n=[];#i=[];constructor(e,t,s=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=i}addRangeListener(e){this.#i.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#s.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const s of this.#i)s(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const s of this.#n)s(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#s)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){_t("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class yK{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return tt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class vK{#e=!1;constructor(e,t,s,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=i?new jE:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new qN,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:a=!1}={}){return new Ku({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return tt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:s,intent:i="display",annotationMode:a=wi.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:d=null,annotationCanvasMap:h=null,pageColors:f=null,printAnnotationStorage:p=null,isEditing:y=!1,recordOperations:b=!1,operationsFilter:A=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(i,a,p,y),{renderingIntent:E,cacheKey:C}=S;this.#e=!1,d||=this._transport.getOptionalContentConfig(E);let _=this._intentStates.get(C);_||(_=Object.create(null),this._intentStates.set(C,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const T=!!(E&ys.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const R=!!(this._pdfBug&&globalThis.StepperManager?.enabled),M=!this.recordedBBoxes&&(b||R),k=j=>{if(_.renderTasks.delete(N),M){const I=N.gfx?.dependencyTracker.take();I&&(N.stepper&&N.stepper.setOperatorBBoxes(I,N.gfx.dependencyTracker.takeDebugMetadata()),b&&(this.recordedBBoxes=I))}T&&(this.#e=!0),this.#t(),j?(N.capability.reject(j),this._abortOperatorList({intentState:_,reason:j instanceof Error?j:new Error(j)})):N.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},N=new dl({callback:k,params:{canvas:t,canvasContext:e,dependencyTracker:M?new LG(t,_.operatorList.length,R):null,viewport:s,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:A});(_.renderTasks||=new Set).add(N);const P=N.task;return Promise.all([_.displayReadyCapability.promise,d]).then(([j,I])=>{if(this.destroyed){k();return}if(this._stats?.time("Rendering"),!(I.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");N.initializeGraphics({transparency:j,optionalContentConfig:I}),N.operatorListChanged()}).catch(k),P}getOperatorList({intent:e="display",annotationMode:t=wi.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(d))}const o=this._transport.getRenderingIntent(e,t,s,i,!0);let c=this._intentStates.get(o.cacheKey);c||(c=Object.create(null),this._intentStates.set(o.cacheKey,c));let d;return c.opListReadCapability||(d=Object.create(null),d.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(d),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Tu.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,i){function a(){o.read().then(function({value:d,done:h}){if(h){s(c);return}c.lang??=d.lang,Object.assign(c.styles,d.styles),c.items.push(...d.items),a()},i)}const o=t.getReader(),c={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new jE),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const s=this._intentStates.get(t);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let s=0,i=e.length;s<i;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:i}){const{map:a,transfer:o}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:i},o).getReader(),h=this._intentStates.get(t);h.streamReader=d;const f=()=>{d.read().then(({value:p,done:y})=>{if(y){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,h),f())},p=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const y of h.renderTasks)y.operatorListChanged();this.#t()}if(h.displayReadyCapability)h.displayReadyCapability.reject(p);else if(h.opListReadCapability)h.opListReadCapability.reject(p);else throw p}})};f()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof am){let i=gK;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new mr(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var Gr,ti,nr,za,Df,Ua,Va,qn,Yh,GN,KN,Jc,Al,Xh;const Ot=class Ot{constructor({name:e=null,port:t=null,verbosity:s=aG()}={}){fi(this,qn);fi(this,Gr,Promise.withResolvers());fi(this,ti,null);fi(this,nr,null);fi(this,za,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(kt(Ot,Va).has(t))throw new Error("Cannot use more than one PDFWorker per port.");kt(Ot,Va).set(t,this),mi(this,qn,GN).call(this,t)}else mi(this,qn,KN).call(this)}get promise(){return kt(this,Gr).promise}get port(){return kt(this,nr)}get messageHandler(){return kt(this,ti)}destroy(){this.destroyed=!0,kt(this,za)?.terminate(),is(this,za,null),kt(Ot,Va).delete(kt(this,nr)),is(this,nr,null),kt(this,ti)?.destroy(),is(this,ti,null)}static create(e){const t=kt(this,Va).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ot(e)}static get workerSrc(){if(Qr.workerSrc)return Qr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return tt(this,"_setupFakeWorkerGlobal",(async()=>kt(this,Al,Xh)?kt(this,Al,Xh):(await import(this.workerSrc)).WorkerMessageHandler)())}};Gr=new WeakMap,ti=new WeakMap,nr=new WeakMap,za=new WeakMap,Df=new WeakMap,Ua=new WeakMap,Va=new WeakMap,qn=new WeakSet,Yh=function(){kt(this,Gr).resolve(),kt(this,ti).send("configure",{verbosity:this.verbosity})},GN=function(e){is(this,nr,e),is(this,ti,new Zc("main","worker",e)),kt(this,ti).on("ready",()=>{}),mi(this,qn,Yh).call(this)},KN=function(){if(kt(Ot,Ua)||kt(Ot,Al,Xh)){mi(this,qn,Jc).call(this);return}let{workerSrc:e}=Ot;try{Ot._isSameOrigin(window.location,e)||(e=Ot._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Zc("main","worker",t),i=()=>{a.abort(),s.destroy(),t.terminate(),this.destroyed?kt(this,Gr).reject(new Error("Worker was destroyed")):mi(this,qn,Jc).call(this)},a=new AbortController;t.addEventListener("error",()=>{kt(this,za)||i()},{signal:a.signal}),s.on("test",c=>{if(a.abort(),this.destroyed||!c){i();return}is(this,ti,s),is(this,nr,t),is(this,za,t),mi(this,qn,Yh).call(this)}),s.on("ready",c=>{if(a.abort(),this.destroyed){i();return}try{o()}catch{mi(this,qn,Jc).call(this)}});const o=()=>{const c=new Uint8Array;s.send("test",c,[c.buffer])};o();return}catch{rm("The worker has been disabled.")}mi(this,qn,Jc).call(this)},Jc=function(){kt(Ot,Ua)||(Qe("Setting up fake worker."),is(Ot,Ua,!0)),Ot._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){kt(this,Gr).reject(new Error("Worker was destroyed"));return}const t=new TG;is(this,nr,t);const s=`fake${D1(Ot,Df)._++}`,i=new Zc(s+"_worker",s,t);e.setup(i,t),is(this,ti,new Zc(s,s+"_worker",t)),mi(this,qn,Yh).call(this)}).catch(e=>{kt(this,Gr).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Al=new WeakSet,Xh=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},fi(Ot,Al),fi(Ot,Df,0),fi(Ot,Ua,!1),fi(Ot,Va,new WeakMap),In&&(is(Ot,Ua,!0),Qr.workerSrc||="./pdf.worker.mjs"),Ot._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!s?.origin||s.origin==="null")return!1;const i=new URL(t,s);return s.origin===i.origin},Ot._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Ot.fromPort=e=>{if(pG("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Ot.create(e)};let Tl=Ot;class bK{#e=new Map;#t=new Map;#s=new Map;#n=new Map;#i=null;constructor(e,t,s,i,a,o){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new qN,this.fontLoader=new SG({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}#r(e,t=null){const s=this.#e.get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return tt(this,"annotationStorage",new yb)}getRenderingIntent(e,t=wi.ENABLE,s=null,i=!1,a=!1){let o=ys.DISPLAY,c=Mv;switch(e){case"any":o=ys.ANY;break;case"display":break;case"print":o=ys.PRINT;break;default:Qe(`getRenderingIntent - invalid intent: ${e}`)}const d=o&ys.PRINT&&s instanceof PN?s:this.annotationStorage;switch(t){case wi.DISABLE:o+=ys.ANNOTATIONS_DISABLE;break;case wi.ENABLE:break;case wi.ENABLE_FORMS:o+=ys.ANNOTATIONS_FORMS;break;case wi.ENABLE_STORAGE:o+=ys.ANNOTATIONS_STORAGE,c=d.serializable;break;default:Qe(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=ys.IS_EDITING),a&&(o+=ys.OPLIST);const{ids:h,hash:f}=d.modifiedIds,p=[o,c.hash,f];return{renderingIntent:o,cacheKey:p.join("_"),annotationStorageSerializable:c,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of this.#t.values())e.push(s._destroy());this.#t.clear(),this.#s.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Ru.cleanup(),this._networkStream?.cancelAllRequests(new mr("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,i)=>{dt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:o}){if(o){i.close();return}dt(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:o}=this._fullReader;return(!i||!a)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{t.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:o}}),e.on("GetRangeReader",(s,i)=>{dt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(s.begin,s.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:o,done:c}){if(c){i.close();return}dt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{a.cancel(o),i.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new yK(s,this))}),e.on("DocException",s=>{t._capability.reject(rs(s))}),e.on("PasswordRequest",s=>{this.#i=Promise.withResolvers();try{if(!t.onPassword)throw rs(s);const i=a=>{a instanceof Error?this.#i.reject(a):this.#i.resolve({password:a})};t.onPassword(i,s.code)}catch(i){this.#i.reject(i)}return this.#i.promise}),e.on("DataLoaded",s=>{t.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;this.#t.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,a])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":if("error"in a){const f=a.error;Qe(`Error during font loading: ${f}`),this.commonObjs.resolve(s,f);break}const o=new At(a),c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,d=new AG(o,c,a.extra,a.charProcOperatorList);this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:h}=a;dt(h,"The imageRef must be defined.");for(const f of this.#t.values())for(const[,p]of f.objs)if(p?.ref===h)return p.dataLen?(this.commonObjs.resolve(s,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,a);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,a,o])=>{if(this.destroyed)return;const c=this.#t.get(i);if(!c.objs.has(s)){if(c._intentStates.size===0){o?.bitmap?.close();return}switch(a){case"Image":case"Pattern":c.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",s=>{this.destroyed||t.onProgress?.({loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[s.type];if(!i)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Qe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=this.#s.get(t);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#n.set(a.refStr,e);const o=new vK(t,a,this,this._params.pdfBug);return this.#t.set(t,o),o});return this.#s.set(t,i),i}getPageIndex(e){return Nv(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#r("GetFieldObjects")}hasJSActions(){return this.#r("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#r("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#r("GetOptionalContentConfig").then(t=>new QG(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new XG(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Ru.cleanup()}}cachedPageNumber(e){if(!Nv(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(t)??null}}class xK{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class dl{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:s,commonObjs:i,annotationCanvasMap:a,operatorList:o,pageIndex:c,canvasFactory:d,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:p=!1,pageColors:y=null,enableHWA:b=!1,operationsFilter:A=null}){this.callback=e,this.params=t,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=c,this.canvasFactory=d,this.filterFactory=h,this._pdfBug=p,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new xK(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=b,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=A}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(dl.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");dl.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:i,background:a,dependencyTracker:o}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new vl(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),dl.#t.delete(this._canvas),e||=new am(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),dl.#t.delete(this._canvas),this.callback())))}}const Cb="5.4.296",YN="f56dc8601";class vs{#e=null;#t=null;#s;#n=null;#i=!1;#r=!1;#a=null;#o;#c=null;#l=null;static#h=null;static get _keyboardManager(){return tt(this,"_keyboardManager",new Xu([[["Escape","mac+Escape"],vs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],vs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],vs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],vs.prototype._moveToPrevious],[["Home","mac+Home"],vs.prototype._moveToBeginning],[["End","mac+End"],vs.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#r=!1,this.#a=e):this.#r=!0,this.#l=e?._uiManager||t,this.#o=this.#l._eventBus,this.#s=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",vs.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#a&&(e.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#m.bind(this),{signal:t}),e.addEventListener("keydown",this.#g.bind(this),{signal:t});const s=this.#t=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#s,e.append(s),e}renderMainDropdown(){const e=this.#n=this.#d();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#d(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",Cs,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(e.id=`${this.#a.id}_colorpicker_dropdown`);for(const[s,i]of this.#l.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=s,a.setAttribute("data-l10n-id",vs.#h[s]);const o=document.createElement("span");a.append(o),o.className="swatch",o.style.backgroundColor=i,a.ariaSelected=i===this.#s,a.addEventListener("click",this.#f.bind(this,i),{signal:t}),e.append(a)}return e.addEventListener("keydown",this.#g.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:ct.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#m(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#p){this.#m(e);return}if(e.target===this.#e){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#e){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#p){this.#m(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#p){this.#m(e);return}this.#n.lastChild?.focus()}#g(e){vs._keyboardManager.exec(this,e)}#m(e){if(this.#p){this.hideDropdown();return}if(this.#i=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#d();this.#e.append(t)}#u(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#p){this.#a?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#i})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#l.highlightColors.values();for(const s of this.#n.children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class Du{#e=null;#t=null;#s=null;static#n=null;constructor(e){this.#t=e,this.#s=e._uiManager,Du.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,colorValue:s}=this.#t,i=this.#e=document.createElement("input");return i.type="color",i.value=s||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",Du.#n[e]),i.addEventListener("input",()=>{this.#s.updateParams(t,i.value)},{signal:this.#s._signal}),i}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function s_(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Hc(n){return Math.max(0,Math.min(255,255*n))}class i_{static CMYK_G([e,t,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Hc(e),[e,e,e]}static G_HTML([e]){const t=s_(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(Hc)}static RGB_HTML(e){return`#${e.map(s_).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,s,i]){return[Hc(1-Math.min(1,e+i)),Hc(1-Math.min(1,s+i)),Hc(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const i=1-e,a=1-t,o=1-s,c=Math.min(i,a,o);return["CMYK",i,a,o,c]}}class wK{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){_t("Abstract method `_createSVG` called.")}}class Mu extends wK{_createSVG(e){return document.createElementNS(er,e)}}const SK=9,eo=new WeakSet,AK=new Date().getTimezoneOffset()*60*1e3;class r_{static create(e){switch(e.data.annotationType){case Gt.LINK:return new Eb(e);case Gt.TEXT:return new EK(e);case Gt.WIDGET:switch(e.data.fieldType){case"Tx":return new _K(e);case"Btn":return e.data.radioButton?new XN(e):e.data.checkBox?new RK(e):new DK(e);case"Ch":return new MK(e);case"Sig":return new TK(e)}return new lo(e);case Gt.POPUP:return new Ov(e);case Gt.FREETEXT:return new WN(e);case Gt.LINE:return new PK(e);case Gt.SQUARE:return new kK(e);case Gt.CIRCLE:return new OK(e);case Gt.POLYLINE:return new QN(e);case Gt.CARET:return new LK(e);case Gt.INK:return new _b(e);case Gt.POLYGON:return new jK(e);case Gt.HIGHLIGHT:return new ZN(e);case Gt.UNDERLINE:return new FK(e);case Gt.SQUIGGLY:return new IK(e);case Gt.STRIKEOUT:return new BK(e);case Gt.STAMP:return new JN(e);case Gt.FILEATTACHMENT:return new zK(e);default:return new zt(e)}}}class zt{#e=null;#t=!1;#s=null;constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return zt._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:s,rect:i}=this.data;let a=-1/0,o=-1/0;if(t?.length>=8){for(let c=0;c<t.length;c+=8)t[c+1]>o?(o=t[c+1],a=t[c+2]):t[c+1]===o&&(a=Math.max(a,t[c+2]));return[a,o]}if(s?.length>=1){for(const c of s)for(let d=0,h=c.length;d<h;d+=2)c[d+1]>o?(o=c[d+1],a=c[d]):c[d+1]===o&&(a=Math.max(a,c[d]));if(a!==1/0)return[a,o]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:i,pageX:a,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-a)/s,e[1]=100*(e[1]-o)/i,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${Eu}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,s={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:s})||this.annotationStorage.setValue(`${Eu}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#s?.popup||this.popup)?.remove(),this.#s=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:s}=e;t&&this.#n(t);let i=this.#s?.popup||this.popup;!i&&s?.text&&(this._createPopup(s),i=this.#s.popup),i&&(i.updateEdited(e),s?.deleted&&(i.remove(),this.#s=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#s?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:o,pageX:c,pageY:d}}}}=this;s?.splice(0,4,...e),t.left=`${100*(e[0]-c)/a}%`,t.top=`${100*(o-e[3]+d)/o}%`,i===0?(t.width=`${100*(e[2]-e[0])/a}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:s,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),!(this instanceof lo)&&!(this instanceof Eb)&&(a.tabIndex=0);const{style:o}=a;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof Ov){const{rotation:S}=t;return!t.hasOwnCanvas&&S!==0&&this.setRotation(S,a),a}const{width:c,height:d}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const S=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(S>0||E>0){const _=`calc(${S}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;o.borderRadius=_}else if(this instanceof XN){const _=`calc(${c}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;o.borderRadius=_}switch(t.borderStyle.style){case sl.SOLID:o.borderStyle="solid";break;case sl.DASHED:o.borderStyle="dashed";break;case sl.BEVELED:Qe("Unimplemented border style: beveled");break;case sl.INSET:Qe("Unimplemented border style: inset");break;case sl.UNDERLINE:o.borderBottomStyle="solid";break}const C=t.borderColor||null;C?(this.#t=!0,o.borderColor=De.makeHexColor(C[0]|0,C[1]|0,C[2]|0)):o.borderWidth=0}const h=De.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:f,pageHeight:p,pageX:y,pageY:b}=i.rawDims;o.left=`${100*(h[0]-y)/f}%`,o.top=`${100*(h[1]-b)/p}%`;const{rotation:A}=t;return t.hasOwnCanvas||A===0?(o.width=`${100*c/f}%`,o.height=`${100*d/p}%`):this.setRotation(A,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:o}=this;e%180!==0&&([a,o]=[o,a]),t.style.width=`${100*a/s}%`,t.style.height=`${100*o/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,i)=>{const a=i.detail[t],o=a[0],c=a.slice(1);i.target.style[s]=i_[`${o}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[s]:i_[`${o}_rgb`](c)})};return tt(this,"_commonActions",{display:t=>{const{display:s}=t.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||s[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[i,a]of Object.entries(t)){const o=s[i];if(o){const c={detail:{[i]:a},target:e};o(c),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,i,a]=this.data.rect.map(S=>Math.fround(S));if(e.length===8){const[S,E,C,_]=e.subarray(2,6);if(i===S&&a===E&&t===C&&s===_)return}const{style:o}=this.container;let c;if(this.#t){const{borderColor:S,borderWidth:E}=o;o.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const d=i-t,h=a-s,{svgFactory:f}=this,p=f.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const y=f.createElement("defs");p.append(y);const b=f.createElement("clipPath"),A=`clippath_${this.data.id}`;b.setAttribute("id",A),b.setAttribute("clipPathUnits","objectBoundingBox"),y.append(b);for(let S=2,E=e.length;S<E;S+=8){const C=e[S],_=e[S+1],T=e[S+2],R=e[S+3],M=f.createElement("rect"),k=(T-t)/d,N=(a-_)/h,P=(C-T)/d,j=(_-R)/h;M.setAttribute("x",k),M.setAttribute("y",N),M.setAttribute("width",P),M.setAttribute("height",j),b.append(M),c?.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${N}" width="${P}" height="${j}"/>`)}this.#t&&(c.push("</g></svg>')"),o.backgroundImage=c.join("")),this.container.append(p),this.container.style.clipPath=`url(#${A})`}_createPopup(e=null){const{data:t}=this;let s,i;e?(s={str:e.text},i=e.date):(s=t.contentsObj,i=t.modificationDate);const a=this.#s=new Ov({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:s,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(a.render())}get hasPopupElement(){return!!(this.#s||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#s}render(){_t("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:o,exportValues:c}of i){if(a===-1||o===t)continue;const d=typeof c=="string"?c:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!eo.has(h)){Qe(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:d,domElement:h})}return s}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,o=i.getAttribute("data-element-id");o!==t&&eo.has(i)&&s.push({id:o,exportValue:a,domElement:i})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class CK extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class Eb extends zt{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(s,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(s,e.action,e.overlaidText),i=!0):e.attachment?(this.#t(s,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(this.#s(s,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(s,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),i=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,s=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),s&&(e.title=s)}_bindNamedAction(e,t,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),s&&(e.title=s),this.#e()}#t(e,t,s="",i=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:s&&(e.title=s),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#e()}#s(e,t,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),s&&(e.title=s),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const a=s.get(i);a&&(e[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Qe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{s?.();const{fields:i,refs:a,include:o}=t,c=[];if(i.length!==0||a.length!==0){const f=new Set(a);for(const p of i){const y=this._fieldObjects[p]||[];for(const{id:b}of y)f.add(b)}for(const p of Object.values(this._fieldObjects))for(const y of p)f.has(y.id)===o&&c.push(y)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const d=this.annotationStorage,h=[];for(const f of c){const{id:p}=f;switch(h.push(p),f.type){case"text":{const b=f.defaultValue||"";d.setValue(p,{value:b});break}case"checkbox":case"radiobutton":{const b=f.defaultValue===f.exportValues;d.setValue(p,{value:b});break}case"combobox":case"listbox":{const b=f.defaultValue||"";d.setValue(p,{value:b});break}default:continue}const y=document.querySelector(`[data-element-id="${p}"]`);if(y){if(!eo.has(y)){Qe(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class EK extends zt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class lo extends zt{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return gn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,i,a){s.includes("mouse")?e.addEventListener(s,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{if(s==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(o)}})})}_setEventListeners(e,t,s,i){for(const[a,o]of s)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,a,o,i),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":De.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||SK,a=e.style;let o;const c=2,d=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c),f=Math.round(h/(yy*i))||1,p=h/f;o=Math.min(i,d(p/yy))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c);o=Math.min(i,d(h/yy))}a.fontSize=`calc(${o}px * var(--total-scale-factor))`,a.color=De.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class _K extends lo{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,i){const a=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=s),a.setValue(o.id,{[i]:s})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let a=i.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let c=i.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=c??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",c??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),eo.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:p}=this.data,y=!!f&&this.enableScripting;h&&(s.title=h),this._setRequired(s,this.data.required),o&&(s.maxLength=o),s.addEventListener("input",A=>{e.setValue(t,{value:A.target.value}),this.setPropertyOnSiblings(s,"value",A.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",A=>{const S=this.data.defaultFieldValue??"";s.value=d.userValue=S,d.formattedValue=null});let b=A=>{const{formattedValue:S}=d;S!=null&&(A.target.value=S),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(d.focused)return;const{target:E}=S;if(y&&(E.type=f,p&&(E.step=p)),d.userValue){const C=d.userValue;if(y)if(f==="time"){const _=new Date(C),T=[_.getHours(),_.getMinutes(),_.getSeconds()];E.value=T.map(R=>R.toString().padStart(2,"0")).join(":")}else E.value=new Date(C-AK).toISOString().split(f==="date"?"T":".",1)[0];else E.value=C}d.lastCommittedValue=E.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const E={value(C){d.userValue=C.detail.value??"",y||e.setValue(t,{value:d.userValue.toString()}),C.target.value=d.userValue},formattedValue(C){const{formattedValue:_}=C.detail;d.formattedValue=_,_!=null&&C.target!==document.activeElement&&(C.target.value=_);const T={formattedValue:_};y&&(T.value=_),e.setValue(t,T)},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{const{charLimit:_}=C.detail,{target:T}=C;if(_===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",_);let R=d.userValue;!R||R.length<=_||(R=R.slice(0,_),T.value=d.userValue=R,e.setValue(t,{value:R}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(E,S)}),s.addEventListener("keydown",S=>{d.commitKey=1;let E=-1;if(S.key==="Escape"?E=0:S.key==="Enter"&&!this.data.multiLine?E=2:S.key==="Tab"&&(d.commitKey=3),E===-1)return;const{value:C}=S.target;d.lastCommittedValue!==C&&(d.lastCommittedValue=C,d.userValue=C,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:E,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const A=b;b=null,s.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:E}=S;let{value:C}=E;if(y){if(C&&f==="time"){const _=C.split(":").map(T=>parseInt(T,10));C=new Date(2e3,0,1,_[0],_[1],_[2]||0).valueOf(),E.step=""}else C.includes("T")||(C=`${C}T00:00`),C=new Date(C).valueOf();E.type="text"}d.userValue=C,d.lastCommittedValue!==C&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),A(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:E,target:C}=S,{value:_,selectionStart:T,selectionEnd:R}=C;let M=T,k=R;switch(S.inputType){case"deleteWordBackward":{const N=_.substring(0,T).match(/\w*[^\w]*$/);N&&(M-=N[0].length);break}case"deleteWordForward":{const N=_.substring(T).match(/^[^\w]*\w*/);N&&(k+=N[0].length);break}case"deleteContentBackward":T===R&&(M-=1);break;case"deleteContentForward":T===R&&(k+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,change:E||"",willCommit:!1,selStart:M,selEnd:k}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(b&&s.addEventListener("blur",b),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/o;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class TK extends lo{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class RK extends lo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return eo.add(a),a.setAttribute("data-element-id",s),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=0,a.addEventListener("change",o=>{const{name:c,checked:d}=o.target;for(const h of this._getElementsByName(c,s)){const f=d&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}e.setValue(s,{value:d})}),a.addEventListener("resetform",o=>{const c=t.defaultFieldValue||"Off";o.target.checked=c===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",o=>{const c={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class XN extends lo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(s,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,s))e.setValue(o.id,{value:!1});const a=document.createElement("input");if(eo.add(a),a.setAttribute("data-element-id",s),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",o=>{const{name:c,checked:d}=o.target;for(const h of this._getElementsByName(c,s))e.setValue(h.id,{value:!1});e.setValue(s,{value:d})}),a.addEventListener("resetform",o=>{const c=t.defaultFieldValue;o.target.checked=c!=null&&c===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;a.addEventListener("updatefromsandbox",c=>{const d={value:h=>{const f=o===h.detail.value;for(const p of this._getElementsByName(h.target.name)){const y=f&&p.id===s;p.domElement&&(p.domElement.checked=y),e.setValue(p.id,{value:y})}}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class DK extends Eb{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class MK extends lo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");eo.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue;for(const y of i.options)y.selected=y.value===p});for(const f of this.data.options){const p=document.createElement("option");p.textContent=f.displayValue,p.value=f.exportValue,s.value.includes(f.exportValue)&&(p.setAttribute("selected",!0),a=!1),i.append(p)}let o=null;if(a){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),i.prepend(f),o=()=>{f.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const c=f=>{const p=f?"value":"textContent",{options:y,multiple:b}=i;return b?Array.prototype.filter.call(y,A=>A.selected).map(A=>A[p]):y.selectedIndex===-1?null:y[y.selectedIndex][p]};let d=c(!1);const h=f=>{const p=f.target.options;return Array.prototype.map.call(p,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",f=>{const p={value(y){o?.();const b=y.detail.value,A=new Set(Array.isArray(b)?b:[b]);for(const S of i.options)S.selected=A.has(S.value);e.setValue(t,{value:c(!0)}),d=c(!1)},multipleSelection(y){i.multiple=!0},remove(y){const b=i.options,A=y.detail.remove;b[A].selected=!1,i.remove(A),b.length>0&&Array.prototype.findIndex.call(b,E=>E.selected)===-1&&(b[0].selected=!0),e.setValue(t,{value:c(!0),items:h(y)}),d=c(!1)},clear(y){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),d=c(!1)},insert(y){const{index:b,displayValue:A,exportValue:S}=y.detail.insert,E=i.children[b],C=document.createElement("option");C.textContent=A,C.value=S,E?E.before(C):i.append(C),e.setValue(t,{value:c(!0),items:h(y)}),d=c(!1)},items(y){const{items:b}=y.detail;for(;i.length!==0;)i.remove(0);for(const A of b){const{displayValue:S,exportValue:E}=A,C=document.createElement("option");C.textContent=S,C.value=E,i.append(C)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:c(!0),items:h(y)}),d=c(!1)},indices(y){const b=new Set(y.detail.indices);for(const A of y.target.options)A.selected=b.has(A.index);e.setValue(t,{value:c(!0)}),d=c(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(p,f)}),i.addEventListener("input",f=>{const p=c(!0),y=c(!1);e.setValue(t,{value:p}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:y,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):i.addEventListener("input",function(f){e.setValue(t,{value:c(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Ov extends zt{constructor(e){const{data:t,elements:s,parent:i}=e,a=!!i._commentManager;if(super(e,{isRenderable:!a&&zt._hasPopupData(t)}),this.elements=s,a&&zt._hasPopupData(t)){const o=this.popup=this.#e();for(const c of s)c.popup=o}else this.popup=null}#e(){return new NK({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),s=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${hb}${i}`).join(",")),this.container}}class NK{#e=null;#t=this.#$.bind(this);#s=this.#B.bind(this);#n=this.#k.bind(this);#i=this.#w.bind(this);#r=null;#a=null;#o=null;#c=null;#l=null;#h=null;#d=null;#f=!1;#g=null;#m=null;#u=null;#p=null;#y=null;#b=null;#v=null;#C=null;#S=null;#x=null;#_=!1;#A=null;#E=null;constructor({container:e,color:t,elements:s,titleObj:i,modificationDate:a,contentsObj:o,richText:c,parent:d,rect:h,parentRect:f,open:p,commentManager:y=null}){this.#a=e,this.#S=i,this.#o=o,this.#C=c,this.#h=d,this.#r=t,this.#v=h,this.#d=f,this.#l=s,this.#e=y,this.#A=s[0],this.#c=_f.toDateObject(a),this.trigger=s.flatMap(b=>b.getElementsToTriggerPopup()),y?this.renderCommentButton():(this.#M(),this.#a.hidden=!0,p&&this.#w())}#M(){if(this.#m)return;this.#m=new AbortController;const{signal:e}=this.#m;for(const t of this.trigger)t.addEventListener("click",this.#i,{signal:e}),t.addEventListener("pointerenter",this.#n,{signal:e}),t.addEventListener("pointerleave",this.#s,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#R(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#y=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#p||(this.#y||this.#R(),!this.#y))return;const{signal:e}=this.#m=new AbortController,t=!!this.#A.extraPopupElement,s=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},i=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},a=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#p=this.#A.container;for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",this.#t,{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",a,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=this.#p=document.createElement("button");o.className="annotationCommentButton";const c=this.#A.container;o.style.zIndex=c.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#F(),this.#D(),o.addEventListener("keydown",this.#t,{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",a,{signal:e}),c.after(o)}}#D(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.renderCommentButton();const[e,t]=this.#y,{style:s}=this.#p;s.left=`calc(${e}%)`,s.top=`calc(${t}% - var(--comment-button-dim))`}#F(){this.#A.extraPopupElement||(this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#A.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:e,color:t,opacity:s,creationDate:i,modificationDate:a}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:s,creationDate:i,modificationDate:a}}get elementBeforePopup(){return this.#p}get comment(){return this.#E||=this.#A.commentText,this.#E}set comment(e){e!==this.comment&&(this.#A.commentText=this.#E=e)}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#p&&(this.#p.classList.toggle("selected",e),this.#p.ariaExpanded=t)}setSelectedCommentButton(e){this.#p.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:e,y:t,height:s}=this.#p.getBoundingClientRect(),{x:i,y:a,width:o,height:c}=this.#A.layer.getBoundingClientRect();return[(e-i)/o,(t+s-a)/c]}set commentPopupPosition(e){this.#b=e}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,s]=this.#b||this.commentButtonPosition.map(h=>h/100),i=this.parentBoundingClientRect,{x:a,y:o,width:c,height:d}=i;this.#e.showDialog(null,this,a+t*c,o+s*d,{...e,parentDimensions:i})}render(){if(this.#g)return;const e=this.#g=document.createElement("div");if(e.className="popup",this.#r){const s=e.style.outlineColor=De.makeHexColor(...this.#r);e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#S?.str){const s=document.createElement("span");s.className="title",t.append(s),{dir:s.dir,str:s.textContent}=this.#S}if(e.append(t),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),t.append(s)}mb({html:this.#P||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#a.append(e)}get#P(){const e=this.#C,t=this.#o;return e?.str&&(!t?.str||t.str===e.str)&&this.#C.html||null}get#O(){return this.#P?.attributes?.style?.fontSize||0}get#I(){return this.#P?.attributes?.style?.color||null}#j(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#I,fontSize:this.#O?`calc(${this.#O}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))t.push({name:"span",value:a,attributes:i});return s}#$(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:e,popup:t,deleted:s}){if(this.#e){s?(this.remove(),this.#E=null):t&&(t.deleted?this.remove():(this.#F(),this.#E=t.text)),e&&(this.#y=null,this.#R(),this.#D());return}if(s||t?.deleted){this.remove();return}this.#M(),this.#x||={contentsObj:this.#o,richText:this.#C},e&&(this.#u=null),t&&t.text&&(this.#C=this.#j(t.text),this.#c=_f.toDateObject(t.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#x&&({contentsObj:this.#o,richText:this.#C}=this.#x,this.#x=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#_=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:i,pageY:a}}}=this.#h;let o=!!this.#d,c=o?this.#d:this.#v;for(const A of this.#l)if(!c||De.intersect(A.data.rect,c)!==null){c=A.data.rect,o=!0;break}const d=De.normalizeRect([c[0],e[3]-c[1]+e[1],c[2],e[3]-c[3]+e[1]]),f=o?c[2]-c[0]+5:0,p=d[0]+f,y=d[1];this.#u=[100*(p-i)/t,100*(y-a)/s];const{style:b}=this.#a;b.left=`${this.#u[0]}%`,b.top=`${this.#u[1]}%`}#w(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#k(),this.#a.addEventListener("click",this.#i),this.#a.addEventListener("keydown",this.#t)):(this.#B(),this.#a.removeEventListener("click",this.#i),this.#a.removeEventListener("keydown",this.#t))}#k(){this.#g||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#T(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#B(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#_=this.isVisible,this.#_&&(this.#a.hidden=!0)}maybeShow(){this.#e||(this.#M(),this.#_&&(this.#g||this.#k(),this.#_=!1,this.#a.hidden=!1))}get isVisible(){return this.#e?!1:this.#a.hidden===!1}}class WN extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=We.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class PK extends zt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:s}=this,i=this.svgFactory.create(t,s,!0),a=this.#e=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class kK extends zt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:s}=this,i=this.svgFactory.create(t,s,!0),a=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",t-a),o.setAttribute("height",s-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class OK extends zt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:s}=this,i=this.svgFactory.create(t,s,!0),a=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",t/2),o.setAttribute("cy",s/2),o.setAttribute("rx",t/2-a/2),o.setAttribute("ry",s/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class QN extends zt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:s,popupRef:i},width:a,height:o}=this;if(!t)return this.container;const c=this.svgFactory.create(a,o,!0);let d=[];for(let f=0,p=t.length;f<p;f+=2){const y=t[f]-e[0],b=e[3]-t[f+1];d.push(`${y},${b}`)}d=d.join(" ");const h=this.#e=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",d),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class jK extends QN{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class LK extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class _b extends zt{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?We.HIGHLIGHT:We.INK}#s(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:s,borderStyle:i,popupRef:a}}=this,{transform:o,width:c,height:d}=this.#s(t,e),h=this.svgFactory.create(c,d,!0),f=this.#e=this.svgFactory.createElement("svg:g");h.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",o);for(let p=0,y=s.length;p<y;p++){const b=this.svgFactory.createElement(this.svgElementName);this.#t.push(b),b.setAttribute("points",s[p].join(",")),f.append(b)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:s,rect:i}=e,a=this.#e;if(t>=0&&a.setAttribute("stroke-width",t||1),s)for(let o=0,c=this.#t.length;o<c;o++)this.#t[o].setAttribute("points",s[o].join(","));if(i){const{transform:o,width:c,height:d}=this.#s(this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class ZN extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=We.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class FK extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class IK extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class BK extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class JN extends zt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=We.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class zK extends zt{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let s;t.hasAppearance||t.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#t.bind(this)),this.#e=s;const{isMac:i}=gn.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let Tb=class eP{#e=null;#t=null;#s=null;#n=new Map;#i=null;#r=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:i,page:a,viewport:o,structTreeLayer:c,commentManager:d,linkService:h,annotationStorage:f}){this.div=e,this.#e=t,this.#t=s,this.#i=c||null,this.#r=h||null,this.#s=f||new yb,this.page=a,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async#a(e,t,s){const i=e.firstChild||e,a=i.id=`${hb}${t}`,o=await this.#i?.getAriaAttributes(a);if(o)for(const[c,d]of o)i.setAttribute(c,d);s?s.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,i,!1))}async render(e){const{annotations:t}=e,s=this.div;na(s,this.viewport);const i=new Map,a={data:null,layer:s,linkService:this.#r,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Mu,annotationStorage:this.#s,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const c=o.annotationType===Gt.POPUP;if(c){const f=i.get(o.id);if(!f)continue;a.elements=f}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;a.data=o;const d=r_.create(a);if(!d.isRenderable)continue;if(!c&&o.popupRef){const f=i.get(o.popupRef);f?f.push(d):i.set(o.popupRef,[d])}const h=d.render();o.hidden&&(h.style.visibility="hidden"),await this.#a(h,o.id,a.elements),d.extraPopupElement?.popup?.renderCommentButton(),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#o()}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#r,svgFactory:new Mu,parent:this};for(const s of e){s.borderStyle||=eP._defaultBorderStyle,t.data=s;const i=r_.create(t);if(!i.isRenderable)continue;const a=i.render();await this.#a(a,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,na(t,{rotation:e.rotation}),this.#o(),t.hidden=!1}#o(){if(!this.#t)return;const e=this.div;for(const[t,s]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(s):a.classList.contains("annotationContent")?a.after(s):a.before(s):i.append(s);const o=this.#n.get(t);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,i.id,s),o._hasNoCanvas=!1):o.canvas=s)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:s,rotation:i}=e,a=new CK({data:{id:s,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#s}),o=a.render();return t.append(o),this.#e?.moveElementInDOM(t,o,o,!1),a.createOrUpdatePopup(),a}static get _defaultBorderStyle(){return tt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:sl.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const Lh=/\r\n?|\n/g;class hn extends Be{#e="";#t=`${this.id}-editor`;#s=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=hn.prototype,t=a=>a.isEmpty(),s=pr.TRANSLATE_SMALL,i=pr.TRANSLATE_BIG;return tt(this,"_keyboardManager",new Xu([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=We.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||hn._defaultColor||Be._defaultLineColor,this.#n=e.fontSize||hn._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){Be.initialize(e,t);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case ct.FREETEXT_SIZE:hn._defaultFontSize=t;break;case ct.FREETEXT_COLOR:hn._defaultColor=t;break}}updateParams(e,t){switch(e){case ct.FREETEXT_SIZE:this.#i(t);break;case ct.FREETEXT_COLOR:this.#r(t);break}}static get defaultPropertiesToUpdate(){return[[ct.FREETEXT_SIZE,hn._defaultFontSize],[ct.FREETEXT_COLOR,hn._defaultColor||Be._defaultLineColor]]}get propertiesToUpdate(){return[[ct.FREETEXT_SIZE,this.#n],[ct.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Du(this),[["colorPicker",this._colorPicker]]}get colorType(){return ct.FREETEXT_COLOR}#i(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#n)*this.parentScale),this.#n=i,this.#o()},s=this.#n;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(e){const t=i=>{this.color=i,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-hn._internalPadding*e,-(hn._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const e=this._uiManager.combinedSignal(this.#s);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const e=[];this.editorDiv.normalize();let t=null;for(const s of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(e.push(hn.#c(s)),t=s);return e.join(`
`)}#o(){const[e,t]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,o=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/t):(this.width=s.height/e,this.height=s.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#a().trimEnd();if(e===t)return;const s=i=>{if(this.#e=i,!i){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(t)},undo:()=>{s(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){hn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[h,f]=this.pageDimensions,[p,y]=this.pageTranslation;let b,A;switch(this.rotation){case 0:b=e+(o[0]-p)/h,A=t+this.height-(o[1]-y)/f;break;case 90:b=e+(o[0]-p)/h,A=t-(o[1]-y)/f,[c,d]=[d,-c];break;case 180:b=e-this.width+(o[0]-p)/h,A=t-(o[1]-y)/f,[c,d]=[-c,-d];break;case 270:b=e+(o[0]-p-this.height*f)/h,A=t+(o[1]-y-this.width*h)/f,[c,d]=[-d,c];break}this.setAt(b*i,A*a,c,d)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Lh,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:s}=t;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const i=hn.#d(t.getData("text")||"").replaceAll(Lh,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:d}=o,h=[],f=[];if(c.nodeType===Node.TEXT_NODE){const b=c.parentElement;if(f.push(c.nodeValue.slice(d).replaceAll(Lh,"")),b!==this.editorDiv){let A=h;for(const S of this.editorDiv.childNodes){if(S===b){A=f;continue}A.push(hn.#c(S))}}h.push(c.nodeValue.slice(0,d).replaceAll(Lh,""))}else if(c===this.editorDiv){let b=h,A=0;for(const S of this.editorDiv.childNodes)A++===d&&(b=f),b.push(hn.#c(S))}this.#e=`${h.join(`
`)}${i}${f.join(`
`)}`,this.#l();const p=new Range;let y=Math.sumPrecise(h.map(b=>b.length));for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const A=b.nodeValue.length;if(y<=A){p.setStart(b,y),p.setEnd(b,y);break}y-=A}a.removeAllRanges(),a.addRange(p)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll(""," ")}static#d(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=hn._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,s){let i=null;if(e instanceof WN){const{data:{defaultAppearanceData:{fontSize:o,fontColor:c},rect:d,rotation:h,id:f,popupRef:p,richText:y,contentsObj:b,creationDate:A,modificationDate:S},textContent:E,textPosition:C,parent:{page:{pageNumber:_}}}=e;if(!E||E.length===0)return null;i=e={annotationType:We.FREETEXT,color:Array.from(c),fontSize:o,value:E.join(`
`),position:C,pageIndex:_-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:b?.str||null,richText:y,creationDate:A,modificationDate:S}}const a=await super.deserialize(e,t,s);return a.#n=e.fontSize,a.color=De.makeHexColor(...e.color),a.#e=hn.#d(e.value),a._initialData=i,e.comment&&a.setCommentData(e),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Be._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(e),{color:t,fontSize:this.#n,value:this.#h()});return this.addComment(s),e?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(e){const{value:t,fontSize:s,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==s||e.color.some((o,c)=>o!==i[c])||e.pageIndex!==a}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:s}=t;s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,t.replaceChildren();for(const i of this.#e.split(`
`)){const a=document.createElement("div");a.append(i?document.createTextNode(i):document.createElement("br")),t.append(a)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class Re{static PRECISION=1e-4;toSVGPath(){_t("Abstract method `toSVGPath` must be implemented.")}get box(){_t("Abstract getter `box` must be implemented.")}serialize(e,t){_t("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,i,a,o){o||=new Float32Array(e.length);for(let c=0,d=e.length;c<d;c+=2)o[c]=t+e[c]*i,o[c+1]=s+e[c+1]*a;return o}static _rescaleAndSwap(e,t,s,i,a,o){o||=new Float32Array(e.length);for(let c=0,d=e.length;c<d;c+=2)o[c]=t+e[c+1]*i,o[c+1]=s+e[c]*a;return o}static _translate(e,t,s,i){i||=new Float32Array(e.length);for(let a=0,o=e.length;a<o;a+=2)i[a]=t+e[a],i[a+1]=s+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,i,a){switch(a){case 90:return[1-t/s,e/i];case 180:return[1-e/s,1-t/i];case 270:return[t/s,1-e/i];default:return[e/s,t/i]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,i,a,o){return[(e+5*s)/6,(t+5*i)/6,(5*s+a)/6,(5*i+o)/6,(s+a)/2,(i+o)/2]}}class Ba{#e;#t=[];#s;#n;#i=[];#r=new Float32Array(18);#a;#o;#c;#l;#h;#d;#f=[];static#g=8;static#m=2;static#u=Ba.#g+Ba.#m;constructor({x:e,y:t},s,i,a,o,c=0){this.#e=s,this.#d=a*i,this.#n=o,this.#r.set([NaN,NaN,NaN,NaN,e,t],6),this.#s=c,this.#l=Ba.#g*i,this.#c=Ba.#u*i,this.#h=i,this.#f.push(e,t)}isEmpty(){return isNaN(this.#r[8])}#p(){const e=this.#r.subarray(4,6),t=this.#r.subarray(16,18),[s,i,a,o]=this.#e;return[(this.#a+(e[0]-t[0])/2-s)/a,(this.#o+(e[1]-t[1])/2-i)/o,(this.#a+(t[0]-e[0])/2-s)/a,(this.#o+(t[1]-e[1])/2-i)/o]}add({x:e,y:t}){this.#a=e,this.#o=t;const[s,i,a,o]=this.#e;let[c,d,h,f]=this.#r.subarray(8,12);const p=e-h,y=t-f,b=Math.hypot(p,y);if(b<this.#c)return!1;const A=b-this.#l,S=A/b,E=S*p,C=S*y;let _=c,T=d;c=h,d=f,h+=E,f+=C,this.#f?.push(e,t);const R=-C/A,M=E/A,k=R*this.#d,N=M*this.#d;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([h+k,f+N],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([h-k,f-N],16),isNaN(this.#r[6])?(this.#i.length===0&&(this.#r.set([c+k,d+N],2),this.#i.push(NaN,NaN,NaN,NaN,(c+k-s)/a,(d+N-i)/o),this.#r.set([c-k,d-N],14),this.#t.push(NaN,NaN,NaN,NaN,(c-k-s)/a,(d-N-i)/o)),this.#r.set([_,T,c,d,h,f],6),!this.isEmpty()):(this.#r.set([_,T,c,d,h,f],6),Math.abs(Math.atan2(T-d,_-c)-Math.atan2(C,E))<Math.PI/2?([c,d,h,f]=this.#r.subarray(2,6),this.#i.push(NaN,NaN,NaN,NaN,((c+h)/2-s)/a,((d+f)/2-i)/o),[c,d,_,T]=this.#r.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((_+c)/2-s)/a,((T+d)/2-i)/o),!0):([_,T,c,d,h,f]=this.#r.subarray(0,6),this.#i.push(((_+5*c)/6-s)/a,((T+5*d)/6-i)/o,((5*c+h)/6-s)/a,((5*d+f)/6-i)/o,((c+h)/2-s)/a,((d+f)/2-i)/o),[h,f,c,d,_,T]=this.#r.subarray(12,18),this.#t.push(((_+5*c)/6-s)/a,((T+5*d)/6-i)/o,((5*c+h)/6-s)/a,((5*d+f)/6-i)/o,((c+h)/2-s)/a,((d+f)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#i,t=this.#t;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#v(s);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#b(s),s.join(" ")}#y(){const[e,t,s,i]=this.#e,[a,o,c,d]=this.#p();return`M${(this.#r[2]-e)/s} ${(this.#r[3]-t)/i} L${(this.#r[4]-e)/s} ${(this.#r[5]-t)/i} L${a} ${o} L${c} ${d} L${(this.#r[16]-e)/s} ${(this.#r[17]-t)/i} L${(this.#r[14]-e)/s} ${(this.#r[15]-t)/i} Z`}#b(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#v(e){const[t,s,i,a]=this.#e,o=this.#r.subarray(4,6),c=this.#r.subarray(16,18),[d,h,f,p]=this.#p();e.push(`L${(o[0]-t)/i} ${(o[1]-s)/a} L${d} ${h} L${f} ${p} L${(c[0]-t)/i} ${(c[1]-s)/a}`)}newFreeDrawOutline(e,t,s,i,a,o){return new tP(e,t,s,i,a,o)}getOutlines(){const e=this.#i,t=this.#t,s=this.#r,[i,a,o,c]=this.#e,d=new Float32Array((this.#f?.length??0)+2);for(let p=0,y=d.length-2;p<y;p+=2)d[p]=(this.#f[p]-i)/o,d[p+1]=(this.#f[p+1]-a)/c;if(d[d.length-2]=(this.#a-i)/o,d[d.length-1]=(this.#o-a)/c,isNaN(s[6])&&!this.isEmpty())return this.#C(d);const h=new Float32Array(this.#i.length+24+this.#t.length);let f=e.length;for(let p=0;p<f;p+=2){if(isNaN(e[p])){h[p]=h[p+1]=NaN;continue}h[p]=e[p],h[p+1]=e[p+1]}f=this.#x(h,f);for(let p=t.length-6;p>=6;p-=6)for(let y=0;y<6;y+=2){if(isNaN(t[p+y])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=t[p+y],h[f+1]=t[p+y+1],f+=2}return this.#S(h,f),this.newFreeDrawOutline(h,d,this.#e,this.#h,this.#s,this.#n)}#C(e){const t=this.#r,[s,i,a,o]=this.#e,[c,d,h,f]=this.#p(),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(t[2]-s)/a,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-s)/a,(t[5]-i)/o,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(t[16]-s)/a,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-s)/a,(t[15]-i)/o],0),this.newFreeDrawOutline(p,e,this.#e,this.#h,this.#s,this.#n)}#S(e,t){const s=this.#t;return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6}#x(e,t){const s=this.#r.subarray(4,6),i=this.#r.subarray(16,18),[a,o,c,d]=this.#e,[h,f,p,y]=this.#p();return e.set([NaN,NaN,NaN,NaN,(s[0]-a)/c,(s[1]-o)/d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,p,y,NaN,NaN,NaN,NaN,(i[0]-a)/c,(i[1]-o)/d],t),t+=24}}class tP extends Re{#e;#t=new Float32Array(4);#s;#n;#i;#r;#a;constructor(e,t,s,i,a,o){super(),this.#a=e,this.#i=t,this.#e=s,this.#r=i,this.#s=a,this.#n=o,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(o);const[c,d,h,f]=this.#t;for(let p=0,y=e.length;p<y;p+=2)e[p]=(e[p]-c)/h,e[p+1]=(e[p+1]-d)/f;for(let p=0,y=t.length;p<y;p+=2)t[p]=(t[p]-c)/h,t[p+1]=(t[p+1]-d)/f}toSVGPath(){const e=[`M${this.#a[4]} ${this.#a[5]}`];for(let t=6,s=this.#a.length;t<s;t+=6){if(isNaN(this.#a[t])){e.push(`L${this.#a[t+4]} ${this.#a[t+5]}`);continue}e.push(`C${this.#a[t]} ${this.#a[t+1]} ${this.#a[t+2]} ${this.#a[t+3]} ${this.#a[t+4]} ${this.#a[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,s,i],a){const o=s-e,c=i-t;let d,h;switch(a){case 0:d=Re._rescale(this.#a,e,i,o,-c),h=Re._rescale(this.#i,e,i,o,-c);break;case 90:d=Re._rescaleAndSwap(this.#a,e,t,o,c),h=Re._rescaleAndSwap(this.#i,e,t,o,c);break;case 180:d=Re._rescale(this.#a,s,t,-o,c),h=Re._rescale(this.#i,s,t,-o,c);break;case 270:d=Re._rescaleAndSwap(this.#a,s,i,-o,-c),h=Re._rescaleAndSwap(this.#i,s,i,-o,-c);break}return{outline:Array.from(d),points:[Array.from(h)]}}#o(e){const t=this.#a;let s=t[4],i=t[5];const a=[s,i,s,i];let o=s,c=i,d=s,h=i;const f=e?Math.max:Math.min,p=new Float32Array(4);for(let b=6,A=t.length;b<A;b+=6){const S=t[b+4],E=t[b+5];isNaN(t[b])?(De.pointBoundingBox(S,E,a),c>E?(o=S,c=E):c===E&&(o=f(o,S)),h<E?(d=S,h=E):h===E&&(d=f(d,S))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,De.bezierBoundingBox(s,i,...t.slice(b,b+6),p),De.rectBoundingBox(p[0],p[1],p[2],p[3],a),c>p[1]?(o=p[0],c=p[1]):c===p[1]&&(o=f(o,p[0])),h<p[3]?(d=p[2],h=p[3]):h===p[3]&&(d=f(d,p[2]))),s=S,i=E}const y=this.#t;y[0]=a[0]-this.#s,y[1]=a[1]-this.#s,y[2]=a[2]-a[0]+2*this.#s,y[3]=a[3]-a[1]+2*this.#s,this.firstPoint=[o,c],this.lastPoint=[d,h]}get box(){return this.#t}newOutliner(e,t,s,i,a,o=0){return new Ba(e,t,s,i,a,o)}getNewOutline(e,t){const[s,i,a,o]=this.#t,[c,d,h,f]=this.#e,p=a*h,y=o*f,b=s*h+c,A=i*f+d,S=this.newOutliner({x:this.#i[0]*p+b,y:this.#i[1]*y+A},this.#e,this.#r,e,this.#n,t??this.#s);for(let E=2;E<this.#i.length;E+=2)S.add({x:this.#i[E]*p+b,y:this.#i[E+1]*y+A});return S.getOutlines()}}class jv{#e;#t;#s;#n=[];#i=[];constructor(e,t=0,s=0,i=!0){const a=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:S,y:E,width:C,height:_}of e){const T=Math.floor((S-t)/o)*o,R=Math.ceil((S+C+t)/o)*o,M=Math.floor((E-t)/o)*o,k=Math.ceil((E+_+t)/o)*o,N=[T,M,k,!0],P=[R,M,k,!1];this.#n.push(N,P),De.rectBoundingBox(T,M,R,k,a)}const c=a[2]-a[0]+2*s,d=a[3]-a[1]+2*s,h=a[0]-s,f=a[1]-s;let p=i?-1/0:1/0,y=1/0;const b=this.#n.at(i?-1:-2),A=[b[0],b[2]];for(const S of this.#n){const[E,C,_,T]=S;!T&&i?C<y?(y=C,p=E):C===y&&(p=Math.max(p,E)):T&&!i&&(C<y?(y=C,p=E):C===y&&(p=Math.min(p,E))),S[0]=(E-h)/c,S[1]=(C-f)/d,S[2]=(_-f)/d}this.#e=new Float32Array([h,f,c,d]),this.#t=[p,y],this.#s=A}getOutlines(){this.#n.sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#l(t)),this.#o(t)):(this.#c(t),e.push(...this.#l(t)));return this.#r(e)}#r(e){const t=[],s=new Set;for(const o of e){const[c,d,h]=o;t.push([c,d,o],[c,h,o])}t.sort((o,c)=>o[1]-c[1]||o[0]-c[0]);for(let o=0,c=t.length;o<c;o+=2){const d=t[o][2],h=t[o+1][2];d.push(h),h.push(d),s.add(d),s.add(h)}const i=[];let a;for(;s.size>0;){const o=s.values().next().value;let[c,d,h,f,p]=o;s.delete(o);let y=c,b=d;for(a=[c,h],i.push(a);;){let A;if(s.has(f))A=f;else if(s.has(p))A=p;else break;s.delete(A),[c,d,h,f,p]=A,y!==c&&(a.push(y,b,c,b===d?d:h),y=c),b=b===d?h:d}a.push(y,b)}return new UK(i,this.#e,this.#t,this.#s)}#a(e){const t=this.#i;let s=0,i=t.length-1;for(;s<=i;){const a=s+i>>1,o=t[a][0];if(o===e)return a;o<e?s=a+1:i=a-1}return i+1}#o([,e,t]){const s=this.#a(e);this.#i.splice(s,0,[e,t])}#c([,e,t]){const s=this.#a(e);for(let i=s;i<this.#i.length;i++){const[a,o]=this.#i[i];if(a!==e)break;if(a===e&&o===t){this.#i.splice(i,1);return}}for(let i=s-1;i>=0;i--){const[a,o]=this.#i[i];if(a!==e)break;if(a===e&&o===t){this.#i.splice(i,1);return}}}#l(e){const[t,s,i]=e,a=[[t,s,i]],o=this.#a(i);for(let c=0;c<o;c++){const[d,h]=this.#i[c];for(let f=0,p=a.length;f<p;f++){const[,y,b]=a[f];if(!(h<=y||b<=d)){if(y>=d){if(b>h)a[f][1]=h;else{if(p===1)return[];a.splice(f,1),f--,p--}continue}a[f][2]=d,b>h&&a.push([t,h,b])}}}return a}}class UK extends Re{#e;#t;constructor(e,t,s,i){super(),this.#t=e,this.#e=t,this.firstPoint=s,this.lastPoint=i}toSVGPath(){const e=[];for(const t of this.#t){let[s,i]=t;e.push(`M${s} ${i}`);for(let a=2;a<t.length;a+=2){const o=t[a],c=t[a+1];o===s?(e.push(`V${c}`),i=c):c===i&&(e.push(`H${o}`),s=o)}e.push("Z")}return e.join(" ")}serialize([e,t,s,i],a){const o=[],c=s-e,d=i-t;for(const h of this.#t){const f=new Array(h.length);for(let p=0;p<h.length;p+=2)f[p]=e+h[p]*c,f[p+1]=i-h[p+1]*d;o.push(f)}return o}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class Lv extends Ba{newFreeDrawOutline(e,t,s,i,a,o){return new VK(e,t,s,i,a,o)}}class VK extends tP{newOutliner(e,t,s,i,a,o=0){return new Lv(e,t,s,i,a,o)}}class Kt extends Be{#e=null;#t=0;#s;#n=null;#i=null;#r=null;#a=null;#o=0;#c=null;#l=null;#h=null;#d=!1;#f=null;#g=null;#m=null;#u="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=We.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Kt.prototype;return tt(this,"_keyboardManager",new Xu([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Kt._defaultColor,this.#p=e.thickness||Kt._defaultThickness,this.opacity=e.opacity||Kt._defaultOpacity,this.#s=e.boxes||null,this.#y=e.methodOfCreation||"",this.#u=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#v(e),this.#A()):this.#s&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#a=e.focusNode,this.#o=e.focusOffset,this.#b(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#b(){const e=new jv(this.#s,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new jv(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#r=t.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:i}=this.#r;this.#g=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#v({highlightOutlines:e,highlightId:t,clipPathId:s}){this.#l=e;const i=1.5;if(this.#r=e.getNewOutline(this.#p/2+i,.0025),t>=0)this.#h=t,this.#n=s,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:Kt.#E(this.#l.box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:Kt.#E(this.#r.box,p),path:{d:this.#r.toSVGPath()}})}const[a,o,c,d]=e.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=c,this.height=d;break;case 90:{const[p,y]=this.parentDimensions;this.x=o,this.y=1-a,this.width=c*y/p,this.height=d*p/y;break}case 180:this.x=1-a,this.y=1-o,this.width=c,this.height=d;break;case 270:{const[p,y]=this.parentDimensions;this.x=1-o,this.y=a,this.width=c*y/p,this.height=d*p/y;break}}const{firstPoint:h}=e;this.#f=[(h[0]-a)/c,(h[1]-o)/d];const{lastPoint:f}=this.#r;this.#g=[(f[0]-a)/c,(f[1]-o)/d]}static initialize(e,t){Be.initialize(e,t),Kt._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case ct.HIGHLIGHT_COLOR:Kt._defaultColor=t;break;case ct.HIGHLIGHT_THICKNESS:Kt._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case ct.HIGHLIGHT_COLOR:this.#C(t);break;case ct.HIGHLIGHT_THICKNESS:this.#S(t);break}}static get defaultPropertiesToUpdate(){return[[ct.HIGHLIGHT_COLOR,Kt._defaultColor],[ct.HIGHLIGHT_THICKNESS,Kt._defaultThickness]]}get propertiesToUpdate(){return[[ct.HIGHLIGHT_COLOR,this.color||Kt._defaultColor],[ct.HIGHLIGHT_THICKNESS,this.#p||Kt._defaultThickness],[ct.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#i?.updateColor(this.color),super.onUpdatedColor()}#C(e){const t=(a,o)=>{this.color=a,this.opacity=o,this.onUpdatedColor()},s=this.color,i=this.opacity;this.addCommands({cmd:t.bind(this,e,Kt._defaultOpacity),undo:t.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#S(e){const t=this.#p,s=i=>{this.#p=i,this.#x(i)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ct.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#i=new vs({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#D())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#D())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#_(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#_():e&&(this.#A(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#x(e){this.#d&&(this.#v({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#_(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#A(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#n))}static#E([e,t,s,i],a){switch(a){case 90:return[1-t-i,e,i,s];case 180:return[1-e-s,1-t-i,s,i];case 270:return[t,1-e-s,i,s]}return[e,t,s,i]}rotate(e){const{drawLayer:t}=this.parent;let s;this.#d?(e=(e-this.rotation+360)%360,s=Kt.#E(this.#l.box,e)):s=Kt.#E([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:s,root:{"data-main-rotation":e}}),t.updateProperties(this.#m,{bbox:Kt.#E(this.#r.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#u&&(e.setAttribute("aria-label",this.#u),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#M.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n,this.setDims(this.width,this.height),MN(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#M(e){Kt._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#a,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#d||this.#R(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!e}}))}#D(){return this.#d?this.rotation:0}#F(){if(this.#d)return null;const[e,t]=this.pageDimensions,[s,i]=this.pageTranslation,a=this.#s,o=new Float32Array(a.length*8);let c=0;for(const{x:d,y:h,width:f,height:p}of a){const y=d*e+s,b=(1-h)*t+i;o[c]=o[c+4]=y,o[c+1]=o[c+3]=b,o[c+2]=o[c+6]=y+f*e,o[c+5]=o[c+7]=b-p*t,c+=8}return o}#P(e){return this.#l.serialize(e,this.#D())}static startHighlighting(e,t,{target:s,x:i,y:a}){const{x:o,y:c,width:d,height:h}=s.getBoundingClientRect(),f=new AbortController,p=e.combinedSignal(f),y=b=>{f.abort(),this.#I(e,b)};window.addEventListener("blur",y,{signal:p}),window.addEventListener("pointerup",y,{signal:p}),window.addEventListener("pointerdown",Ft,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",Cs,{signal:p}),s.addEventListener("pointermove",this.#O.bind(this,e),{signal:p}),this._freeHighlight=new Lv({x:i,y:a},[o,c,d,h],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#O(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#I(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,s){let i=null;if(e instanceof ZN){const{data:{quadPoints:A,rect:S,rotation:E,id:C,color:_,opacity:T,popupRef:R,richText:M,contentsObj:k,creationDate:N,modificationDate:P},parent:{page:{pageNumber:j}}}=e;i=e={annotationType:We.HIGHLIGHT,color:Array.from(_),opacity:T,quadPoints:A,boxes:null,pageIndex:j-1,rect:S.slice(0),rotation:E,annotationElementId:C,id:C,deleted:!1,popupRef:R,richText:M,comment:k?.str||null,creationDate:N,modificationDate:P}}else if(e instanceof _b){const{data:{inkLists:A,rect:S,rotation:E,id:C,color:_,borderStyle:{rawWidth:T},popupRef:R,richText:M,contentsObj:k,creationDate:N,modificationDate:P},parent:{page:{pageNumber:j}}}=e;i=e={annotationType:We.HIGHLIGHT,color:Array.from(_),thickness:T,inkLists:A,boxes:null,pageIndex:j-1,rect:S.slice(0),rotation:E,annotationElementId:C,id:C,deleted:!1,popupRef:R,richText:M,comment:k?.str||null,creationDate:N,modificationDate:P}}const{color:a,quadPoints:o,inkLists:c,opacity:d}=e,h=await super.deserialize(e,t,s);h.color=De.makeHexColor(...a),h.opacity=d||1,c&&(h.#p=e.thickness),h._initialData=i,e.comment&&h.setCommentData(e);const[f,p]=h.pageDimensions,[y,b]=h.pageTranslation;if(o){const A=h.#s=[];for(let S=0;S<o.length;S+=8)A.push({x:(o[S]-y)/f,y:1-(o[S+1]-b)/p,width:(o[S+2]-o[S])/f,height:(o[S+1]-o[S+5])/p});h.#b(),h.#A(),h.rotate(h.rotation)}else if(c){h.#d=!0;const A=c[0],S={x:A[0]-y,y:p-(A[1]-b)},E=new Lv(S,[0,0,f,p],1,h.#p/2,!0,.001);for(let T=0,R=A.length;T<R;T+=2)S.x=A[T]-y,S.y=p-(A[T+1]-b),E.add(S);const{id:C,clipPathId:_}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);h.#v({highlightOutlines:E.getOutlines(),highlightId:C,clipPathId:_}),h.#A(),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=Be._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(e);return Object.assign(s,{color:t,opacity:this.opacity,thickness:this.#p,quadPoints:this.#F(),outlines:this.#P(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#j(s)?null:(s.id=this.annotationElementId,s)}#j(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((s,i)=>s!==t[i])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class nP{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){_t("Not implemented")}}class Ve extends Be{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#n=null;static#i=null;static#r=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#l(e),this.#f())}#l({drawOutlines:e,drawId:t,drawingOptions:s}){this.#e=e,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#u(e.box)}#h(e,t){const{id:s}=t.drawLayer.draw(Ve._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(e,t){const s=new Set(Object.keys(e));for(const[i,a]of Object.entries(t))s.has(i)?Object.assign(e[i],a):e[i]=a;return e}static getDefaultDrawingOptions(e){_t("Not implemented")}static get typesMap(){_t("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,t),this._currentParent&&(Ve.#s.updateProperty(s,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)e.push([s,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[s,i]of this.constructor.typesMap)e.push([s,t[i]]);return e}_updateProperty(e,t,s){const i=this._drawingOptions,a=i[t],o=c=>{i.updateProperty(t,c);const d=this.#e.updateProperty(t,c);d&&this.#u(d),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,s),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Ve._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#m()),{bbox:this.#p()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Ve._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#m()),{bbox:this.#p()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#p()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Ve._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#m(),this.parentDimensions),{bbox:this.#p()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#d()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#g([e,t,s,i]){const{parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[t,1-e,s*(o/a),i*(a/o)];case 180:return[1-e,1-t,s,i];case 270:return[1-t,e,s*(o/a),i*(a/o)];default:return[e,t,s,i]}}#m(){const{x:e,y:t,width:s,height:i,parentDimensions:[a,o],rotation:c}=this;switch(c){case 90:return[1-t,e,s*(a/o),i*(o/a)];case 180:return[1-e,1-t,s,i];case 270:return[t,1-e,s*(a/o),i*(o/a)];default:return[e,t,s,i]}}#u(e){[this.x,this.y,this.width,this.height]=this.#g(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#p(){const{x:e,y:t,width:s,height:i,rotation:a,parentRotation:o,parentDimensions:[c,d]}=this;switch((a*4+o)/90){case 1:return[1-t-i,e,i,s];case 2:return[1-e-s,1-t-i,s,i];case 3:return[t,1-e-s,i,s];case 4:return[e,t-s*(c/d),i*(d/c),s*(c/d)];case 5:return[1-t,e,s*(c/d),i*(d/c)];case 6:return[1-e-i*(d/c),1-t,i*(d/c),s*(c/d)];case 7:return[t-s*(c/d),1-e-i*(d/c),s*(c/d),i*(d/c)];case 8:return[e-s,t-i,s,i];case 9:return[1-t,e-s,i,s];case 10:return[1-e,1-t,s,i];case 11:return[t-i,1-e,i,s];case 12:return[e-i*(d/c),t,i*(d/c),s*(c/d)];case 13:return[1-t-s*(c/d),e-i*(d/c),s*(c/d),i*(d/c)];case 14:return[1-e,1-t-s*(c/d),i*(d/c),s*(c/d)];case 15:return[t,1-e,s*(c/d),i*(d/c)];default:return[e,t,s,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ve._mergeSVGProperties({bbox:this.#p()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");return s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),s}static createDrawerInstance(e,t,s,i,a){_t("Not implemented")}static startDrawing(e,t,s,i){const{target:a,offsetX:o,offsetY:c,pointerId:d,pointerType:h}=i;if(Ve.#a&&Ve.#a!==h)return;const{viewport:{rotation:f}}=e,{width:p,height:y}=a.getBoundingClientRect(),b=Ve.#n=new AbortController,A=e.combinedSignal(b);if(Ve.#r||=d,Ve.#a??=h,window.addEventListener("pointerup",S=>{Ve.#r===S.pointerId?this._endDraw(S):Ve.#o?.delete(S.pointerId)},{signal:A}),window.addEventListener("pointercancel",S=>{Ve.#r===S.pointerId?this._currentParent.endDrawingSession():Ve.#o?.delete(S.pointerId)},{signal:A}),window.addEventListener("pointerdown",S=>{Ve.#a===S.pointerType&&((Ve.#o||=new Set).add(S.pointerId),Ve.#s.isCancellable()&&(Ve.#s.removeLastElement(),Ve.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",Cs,{signal:A}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),a.addEventListener("touchmove",S=>{S.timeStamp===Ve.#c&&Ft(S)},{signal:A}),e.toggleDrawing(),t._editorUndoBar?.hide(),Ve.#s){e.drawLayer.updateProperties(this._currentDrawId,Ve.#s.startNew(o,c,p,y,f));return}t.updateUIForDefaultProperties(this),Ve.#s=this.createDrawerInstance(o,c,p,y,f),Ve.#i=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Ve.#i.toSVGProperties(),Ve.#s.defaultSVGProperties),!0,!1)}static _drawMove(e){if(Ve.#c=-1,!Ve.#s)return;const{offsetX:t,offsetY:s,pointerId:i}=e;if(Ve.#r===i){if(Ve.#o?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ve.#s.add(t,s)),Ve.#c=e.timeStamp,Ft(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,Ve.#s=null,Ve.#i=null,Ve.#a=null,Ve.#c=NaN),Ve.#n&&(Ve.#n.abort(),Ve.#n=null,Ve.#r=NaN,Ve.#o=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,Ve.#s.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=Ve.#s,i=this._currentDrawId,a=s.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(i,s.setLastElement(a))},undo:()=>{t.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:ct.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(ct.DRAW_STEP),!Ve.#s.isEmpty()){const{pageDimensions:[s,i],scale:a}=t,o=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ve.#s.getOutlines(s*a,i*a,a,this._INNER_MARGIN),drawingOptions:Ve.#i,mustBeCommitted:!e});return this._cleanup(!0),o}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,s,i,a,o){_t("Not implemented")}static async deserialize(e,t,s){const{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:c}}=t.viewport,d=this.deserializeDraw(o,c,i,a,this._INNER_MARGIN,e),h=await super.deserialize(e,t,s);return h.createDrawingOptions(e),h.#l({drawOutlines:d}),h.#f(),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[t,s]=this.pageTranslation,[i,a]=this.pageDimensions;return this.#e.serialize([t,s,i,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class HK{#e=new Float64Array(6);#t;#s;#n;#i;#r;#a="";#o=0;#c=new Zu;#l;#h;constructor(e,t,s,i,a,o){this.#l=s,this.#h=i,this.#n=a,this.#i=o,[e,t]=this.#d(e,t);const c=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t],this.#s=[{line:c,points:this.#r}],this.#e.set(c,0)}updateProperty(e,t){e==="stroke-width"&&(this.#i=t)}#d(e,t){return Re._normalizePoint(e,t,this.#l,this.#h,this.#n)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#r.length<=10}add(e,t){[e,t]=this.#d(e,t);const[s,i,a,o]=this.#e.subarray(2,6),c=e-a,d=t-o;return Math.hypot(this.#l*c,this.#h*d)<=2?null:(this.#r.push(e,t),isNaN(s)?(this.#e.set([a,o,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([s,i,a,o,e,t],0),this.#t.push(...Re.createBezierPoints(s,i,a,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,i,a){this.#l=s,this.#h=i,this.#n=a,[e,t]=this.#d(e,t);const o=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t];const c=this.#s.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#s.push({line:o,points:this.#r}),this.#e.set(o,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(e){return this.#s?(this.#s.push(e),this.#t=e.line,this.#r=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#s)return this.#c.removeLastElement();this.#s.pop(),this.#a="";for(let e=0,t=this.#s.length;e<t;e++){const{line:s,points:i}=this.#s[e];this.#t=s,this.#r=i,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const e=Re.svgRound(this.#t[4]),t=Re.svgRound(this.#t[5]);if(this.#r.length===2)return this.#a=`${this.#a} M ${e} ${t} Z`,this.#a;if(this.#r.length<=6){const i=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,i)} M ${e} ${t}`,this.#o=6}if(this.#r.length===4){const i=Re.svgRound(this.#t[10]),a=Re.svgRound(this.#t[11]);return this.#a=`${this.#a} L ${i} ${a}`,this.#o=12,this.#a}const s=[];this.#o===0&&(s.push(`M ${e} ${t}`),this.#o=6);for(let i=this.#o,a=this.#t.length;i<a;i+=6){const[o,c,d,h,f,p]=this.#t.slice(i,i+6).map(Re.svgRound);s.push(`C${o} ${c} ${d} ${h} ${f} ${p}`)}return this.#a+=s.join(" "),this.#o=this.#t.length,this.#a}getOutlines(e,t,s,i){const a=this.#s.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#c.build(this.#s,e,t,s,this.#n,this.#i,i),this.#e=null,this.#t=null,this.#s=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Zu extends Re{#e;#t=0;#s;#n;#i;#r;#a;#o;#c;build(e,t,s,i,a,o,c){this.#i=t,this.#r=s,this.#a=i,this.#o=a,this.#c=o,this.#s=c??0,this.#n=e,this.#d()}get thickness(){return this.#c}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${Re.svgRound(t[4])} ${Re.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${Re.svgRound(t[10])} ${Re.svgRound(t[11])}`);continue}for(let s=6,i=t.length;s<i;s+=6){const[a,o,c,d,h,f]=t.subarray(s,s+6).map(Re.svgRound);e.push(`C${a} ${o} ${c} ${d} ${h} ${f}`)}}return e.join("")}serialize([e,t,s,i],a){const o=[],c=[],[d,h,f,p]=this.#h();let y,b,A,S,E,C,_,T,R;switch(this.#o){case 0:R=Re._rescale,y=e,b=t+i,A=s,S=-i,E=e+d*s,C=t+(1-h-p)*i,_=e+(d+f)*s,T=t+(1-h)*i;break;case 90:R=Re._rescaleAndSwap,y=e,b=t,A=s,S=i,E=e+h*s,C=t+d*i,_=e+(h+p)*s,T=t+(d+f)*i;break;case 180:R=Re._rescale,y=e+s,b=t,A=-s,S=i,E=e+(1-d-f)*s,C=t+h*i,_=e+(1-d)*s,T=t+(h+p)*i;break;case 270:R=Re._rescaleAndSwap,y=e+s,b=t+i,A=-s,S=-i,E=e+(1-h-p)*s,C=t+(1-d-f)*i,_=e+(1-h)*s,T=t+(1-d)*i;break}for(const{line:M,points:k}of this.#n)o.push(R(M,y,b,A,S,a?new Array(M.length):null)),c.push(R(k,y,b,A,S,a?new Array(k.length):null));return{lines:o,points:c,rect:[E,C,_,T]}}static deserialize(e,t,s,i,a,{paths:{lines:o,points:c},rotation:d,thickness:h}){const f=[];let p,y,b,A,S;switch(d){case 0:S=Re._rescale,p=-e/s,y=t/i+1,b=1/s,A=-1/i;break;case 90:S=Re._rescaleAndSwap,p=-t/i,y=-e/s,b=1/i,A=1/s;break;case 180:S=Re._rescale,p=e/s+1,y=-t/i,b=-1/s,A=1/i;break;case 270:S=Re._rescaleAndSwap,p=t/i+1,y=e/s+1,b=-1/i,A=-1/s;break}if(!o){o=[];for(const C of c){const _=C.length;if(_===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1]]));continue}if(_===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1],NaN,NaN,NaN,NaN,C[2],C[3]]));continue}const T=new Float32Array(3*(_-2));o.push(T);let[R,M,k,N]=C.subarray(0,4);T.set([NaN,NaN,NaN,NaN,R,M],0);for(let P=4;P<_;P+=2){const j=C[P],I=C[P+1];T.set(Re.createBezierPoints(R,M,k,N,j,I),(P-2)*3),[R,M,k,N]=[k,N,j,I]}}}for(let C=0,_=o.length;C<_;C++)f.push({line:S(o[C].map(T=>T??NaN),p,y,b,A),points:S(c[C].map(T=>T??NaN),p,y,b,A)});const E=new this.prototype.constructor;return E.build(f,s,i,1,d,h,a),E}#l(e=this.#c){const t=this.#s+e/2*this.#a;return this.#o%180===0?[t/this.#i,t/this.#r]:[t/this.#r,t/this.#i]}#h(){const[e,t,s,i]=this.#e,[a,o]=this.#l(0);return[e+a,t+o,s-2*a,i-2*o]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#n){if(i.length<=12){for(let c=4,d=i.length;c<d;c+=6)De.pointBoundingBox(i[c],i[c+1],e);continue}let a=i[4],o=i[5];for(let c=6,d=i.length;c<d;c+=6){const[h,f,p,y,b,A]=i.subarray(c,c+6);De.bezierBoundingBox(a,o,h,f,p,y,b,A,e),a=b,o=A}}const[t,s]=this.#l();e[0]=Dn(e[0]-t,0,1),e[1]=Dn(e[1]-s,0,1),e[2]=Dn(e[2]+t,0,1),e[3]=Dn(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,s]=this.#l();this.#c=e;const[i,a]=this.#l(),[o,c]=[i-t,a-s],d=this.#e;return d[0]-=o,d[1]-=c,d[2]+=2*o,d[3]+=2*c,d}updateParentDimensions([e,t],s){const[i,a]=this.#l();this.#i=e,this.#r=t,this.#a=s;const[o,c]=this.#l(),d=o-i,h=c-a,f=this.#e;return f[0]-=d,f[1]-=h,f[2]+=2*d,f[3]+=2*h,f}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(Re.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Re.svgRound(e)} ${Re.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let s=0,i=0,a=0,o=0,c=0,d=0;switch(this.#t){case 90:i=t/e,a=-e/t,c=e;break;case 180:s=-1,o=-1,c=e,d=t;break;case 270:i=-t/e,a=e/t,d=t;break;default:return""}return`matrix(${s} ${i} ${a} ${o} ${Re.svgRound(c)} ${Re.svgRound(d)})`}getPathResizingSVGProperties([e,t,s,i]){const[a,o]=this.#l(),[c,d,h,f]=this.#e;if(Math.abs(h-a)<=Re.PRECISION||Math.abs(f-o)<=Re.PRECISION){const S=e+s/2-(c+h/2),E=t+i/2-(d+f/2);return{path:{"transform-origin":`${Re.svgRound(e)} ${Re.svgRound(t)}`,transform:`${this.rotationTransform} translate(${S} ${E})`}}}const p=(s-2*a)/(h-2*a),y=(i-2*o)/(f-2*o),b=h/s,A=f/i;return{path:{"transform-origin":`${Re.svgRound(c)} ${Re.svgRound(d)}`,transform:`${this.rotationTransform} scale(${b} ${A}) translate(${Re.svgRound(a)} ${Re.svgRound(o)}) scale(${p} ${y}) translate(${Re.svgRound(-a)} ${Re.svgRound(-o)})`}}}getPathResizedSVGProperties([e,t,s,i]){const[a,o]=this.#l(),c=this.#e,[d,h,f,p]=c;if(c[0]=e,c[1]=t,c[2]=s,c[3]=i,Math.abs(f-a)<=Re.PRECISION||Math.abs(p-o)<=Re.PRECISION){const E=e+s/2-(d+f/2),C=t+i/2-(h+p/2);for(const{line:_,points:T}of this.#n)Re._translate(_,E,C,_),Re._translate(T,E,C,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Re.svgRound(e)} ${Re.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(s-2*a)/(f-2*a),b=(i-2*o)/(p-2*o),A=-y*(d+a)+e+a,S=-b*(h+o)+t+o;if(y!==1||b!==1||A!==0||S!==0)for(const{line:E,points:C}of this.#n)Re._rescale(E,A,S,y,b,E),Re._rescale(C,A,S,y,b,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Re.svgRound(e)} ${Re.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],s){const[i,a]=s,o=this.#e,c=e-o[0],d=t-o[1];if(this.#i===i&&this.#r===a)for(const{line:h,points:f}of this.#n)Re._translate(h,c,d,h),Re._translate(f,c,d,f);else{const h=this.#i/i,f=this.#r/a;this.#i=i,this.#r=a;for(const{line:p,points:y}of this.#n)Re._rescale(p,c,d,h,f,p),Re._rescale(y,c,d,h,f,y);o[2]*=h,o[3]*=f}return o[0]=e,o[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Re.svgRound(e)} ${Re.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Re.svgRound(e[0])} ${Re.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class cm extends nP{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Be._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new cm(this._viewParameters);return e.updateAll(this),e}}class Rb extends Ve{static _type="ink";static _editorType=We.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){Be.initialize(e,t),this._defaultDrawingOptions=new cm(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return tt(this,"typesMap",new Map([[ct.INK_THICKNESS,"stroke-width"],[ct.INK_COLOR,"stroke"],[ct.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,s,i,a){return new HK(e,t,s,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,s,i,a,o){return Zu.deserialize(e,t,s,i,a,o)}static async deserialize(e,t,s){let i=null;if(e instanceof _b){const{data:{inkLists:o,rect:c,rotation:d,id:h,color:f,opacity:p,borderStyle:{rawWidth:y},popupRef:b,richText:A,contentsObj:S,creationDate:E,modificationDate:C},parent:{page:{pageNumber:_}}}=e;i=e={annotationType:We.INK,color:Array.from(f),thickness:y,opacity:p,paths:{points:o},boxes:null,pageIndex:_-1,rect:c.slice(0),rotation:d,annotationElementId:h,id:h,deleted:!1,popupRef:b,richText:A,comment:S?.str||null,creationDate:E,modificationDate:C}}const a=await super.deserialize(e,t,s);return a._initialData=i,e.comment&&a.setCommentData(e),a}get toolbarButtons(){return this._colorPicker||=new Du(this),[["colorPicker",this._colorPicker]]}get colorType(){return ct.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:s}=this;t.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:s}){this._drawingOptions=Rb.getDefaultDrawingOptions({stroke:De.makeHexColor(...e),"stroke-width":t,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:s}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":a,"stroke-width":o}}=this,c=Object.assign(super.serialize(e),{color:Be._colorManager.convert(i),opacity:a,thickness:o,paths:{lines:t,points:s}});return this.addComment(c),e?(c.isCopy=!0,c):this.annotationElementId&&!this.#e(c)?null:(c.id=this.annotationElementId,c)}#e(e){const{color:t,thickness:s,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((o,c)=>o!==t[c])||e.thickness!==s||e.opacity!==i||e.pageIndex!==a}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class Fv extends Zu{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Fh=8,$c=3;class Oa{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,s,i){return s-=e,i-=t,s===0?i>0?0:4:s===1?i+6:2-i}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,s,i,a,o,c){const d=this.#t(s,i,a,o);for(let h=0;h<8;h++){const f=(-h+d-c+16)%8,p=this.#s[2*f],y=this.#s[2*f+1];if(e[(s+p)*t+(i+y)]!==0)return f}return-1}static#i(e,t,s,i,a,o,c){const d=this.#t(s,i,a,o);for(let h=0;h<8;h++){const f=(h+d+c+16)%8,p=this.#s[2*f],y=this.#s[2*f+1];if(e[(s+p)*t+(i+y)]!==0)return f}return-1}static#r(e,t,s,i){const a=e.length,o=new Int32Array(a);for(let f=0;f<a;f++)o[f]=e[f]<=i?1:0;for(let f=1;f<s-1;f++)o[f*t]=o[f*t+t-1]=0;for(let f=0;f<t;f++)o[f]=o[t*s-1-f]=0;let c=1,d;const h=[];for(let f=1;f<s-1;f++){d=1;for(let p=1;p<t-1;p++){const y=f*t+p,b=o[y];if(b===0)continue;let A=f,S=p;if(b===1&&o[y-1]===0)c+=1,S-=1;else if(b>=1&&o[y+1]===0)c+=1,S+=1,b>1&&(d=b);else{b!==1&&(d=Math.abs(b));continue}const E=[p,f],C=S===p+1,_={isHole:C,points:E,id:c,parent:0};h.push(_);let T;for(const H of h)if(H.id===d){T=H;break}T?T.isHole?_.parent=C?T.parent:d:_.parent=C?d:T.parent:_.parent=C?d:0;const R=this.#n(o,t,f,p,A,S,0);if(R===-1){o[y]=-c,o[y]!==1&&(d=Math.abs(o[y]));continue}let M=this.#s[2*R],k=this.#s[2*R+1];const N=f+M,P=p+k;A=N,S=P;let j=f,I=p;for(;;){const H=this.#i(o,t,j,I,A,S,1);M=this.#s[2*H],k=this.#s[2*H+1];const $=j+M,K=I+k;E.push(K,$);const Z=j*t+I;if(o[Z+1]===0?o[Z]=-c:o[Z]===1&&(o[Z]=c),$===f&&K===p&&j===N&&I===P){o[y]!==1&&(d=Math.abs(o[y]));break}else A=j,S=I,j=$,I=K}}}return h}static#a(e,t,s,i){if(s-t<=4){for(let N=t;N<s-2;N+=2)i.push(e[N],e[N+1]);return}const a=e[t],o=e[t+1],c=e[s-4]-a,d=e[s-3]-o,h=Math.hypot(c,d),f=c/h,p=d/h,y=f*o-p*a,b=d/c,A=1/h,S=Math.atan(b),E=Math.cos(S),C=Math.sin(S),_=A*(Math.abs(E)+Math.abs(C)),T=A*(1-_+_**2),R=Math.max(Math.atan(Math.abs(C+E)*T),Math.atan(Math.abs(C-E)*T));let M=0,k=t;for(let N=t+2;N<s-2;N+=2){const P=Math.abs(y-f*e[N+1]+p*e[N]);P>M&&(k=N,M=P)}M>(h*R)**2?(this.#a(e,t,k+2,i),this.#a(e,k,s,i)):i.push(a,o)}static#o(e){const t=[],s=e.length;return this.#a(e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t}static#c(e,t,s,i,a,o){const c=new Float32Array(o**2),d=-2*i**2,h=o>>1;for(let S=0;S<o;S++){const E=(S-h)**2;for(let C=0;C<o;C++)c[S*o+C]=Math.exp((E+(C-h)**2)/d)}const f=new Float32Array(256),p=-2*a**2;for(let S=0;S<256;S++)f[S]=Math.exp(S**2/p);const y=e.length,b=new Uint8Array(y),A=new Uint32Array(256);for(let S=0;S<s;S++)for(let E=0;E<t;E++){const C=S*t+E,_=e[C];let T=0,R=0;for(let k=0;k<o;k++){const N=S+k-h;if(!(N<0||N>=s))for(let P=0;P<o;P++){const j=E+P-h;if(j<0||j>=t)continue;const I=e[N*t+j],H=c[k*o+P]*f[Math.abs(I-_)];T+=I*H,R+=H}}const M=b[C]=Math.round(T/R);A[M]++}return[b,A]}static#l(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t}static#h(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let i=-1/0,a=1/0;for(let c=0,d=s.length;c<d;c++){const h=s[c]=e[c<<2];i=Math.max(i,h),a=Math.min(a,h)}const o=255/(i-a);for(let c=0,d=s.length;c<d;c++)s[c]=(s[c]-a)*o;return s}static#d(e){let t,s=-1/0,i=-1/0;const a=e.findIndex(d=>d!==0);let o=a,c=a;for(t=a;t<256;t++){const d=e[t];d>s&&(t-o>i&&(i=t-o,c=t-1),s=d,o=t)}for(t=c-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:s,height:i}=e,{maxDim:a}=this.#e;let o=s,c=i;if(s>a||i>a){let y=s,b=i,A=Math.log2(Math.max(s,i)/a);const S=Math.floor(A);A=A===S?S-1:S;for(let C=0;C<A;C++){o=Math.ceil(y/2),c=Math.ceil(b/2);const _=new OffscreenCanvas(o,c);_.getContext("2d").drawImage(e,0,0,y,b,0,0,o,c),y=o,b=c,e!==t&&e.close(),e=_.transferToImageBitmap()}const E=Math.min(a/o,a/c);o=Math.round(o*E),c=Math.round(c*E)}const h=new OffscreenCanvas(o,c).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,o,c),h.filter="grayscale(1)",h.drawImage(e,0,0,e.width,e.height,0,0,o,c);const f=h.getImageData(0,0,o,c).data;return[this.#h(f),o,c]}static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:i},a,o,c,d){let h=new OffscreenCanvas(1,1),f=h.getContext("2d",{alpha:!1});const p=200,y=f.font=`${s} ${i} ${p}px ${t}`,{actualBoundingBoxLeft:b,actualBoundingBoxRight:A,actualBoundingBoxAscent:S,actualBoundingBoxDescent:E,fontBoundingBoxAscent:C,fontBoundingBoxDescent:_,width:T}=f.measureText(e),R=1.5,M=Math.ceil(Math.max(Math.abs(b)+Math.abs(A)||0,T)*R),k=Math.ceil(Math.max(Math.abs(S)+Math.abs(E)||p,Math.abs(C)+Math.abs(_)||p)*R);h=new OffscreenCanvas(M,k),f=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=y,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,M,k),f.fillStyle="black",f.fillText(e,M*(R-1)/2,k*(3-R)/2);const N=this.#h(f.getImageData(0,0,M,k).data),P=this.#l(N),j=this.#d(P),I=this.#r(N,M,k,j);return this.processDrawnLines({lines:{curves:I,width:M,height:k},pageWidth:a,pageHeight:o,rotation:c,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(e,t,s,i,a){const[o,c,d]=this.#f(e),[h,f]=this.#c(o,c,d,Math.hypot(c,d)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),p=this.#d(f),y=this.#r(h,c,d,p);return this.processDrawnLines({lines:{curves:y,width:c,height:d},pageWidth:t,pageHeight:s,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:i,innerMargin:a,mustSmooth:o,areContours:c}){i%180!==0&&([t,s]=[s,t]);const{curves:d,width:h,height:f}=e,p=e.thickness??0,y=[],b=Math.min(t/h,s/f),A=b/t,S=b/s,E=[];for(const{points:_}of d){const T=o?this.#o(_):_;if(!T)continue;E.push(T);const R=T.length,M=new Float32Array(R),k=new Float32Array(3*(R===2?2:R-2));if(y.push({line:k,points:M}),R===2){M[0]=T[0]*A,M[1]=T[1]*S,k.set([NaN,NaN,NaN,NaN,M[0],M[1]],0);continue}let[N,P,j,I]=T;N*=A,P*=S,j*=A,I*=S,M.set([N,P,j,I],0),k.set([NaN,NaN,NaN,NaN,N,P],0);for(let H=4;H<R;H+=2){const $=M[H]=T[H]*A,K=M[H+1]=T[H+1]*S;k.set(Re.createBezierPoints(N,P,j,I,$,K),(H-2)*3),[N,P,j,I]=[j,I,$,K]}}if(y.length===0)return null;const C=c?new Fv:new Zu;return C.build(y,t,s,1,i,c?0:p,a),{outline:C,newCurves:E,areContours:c,thickness:p,width:h,height:f}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:i,height:a}){let o=1/0,c=-1/0,d=0;for(const T of e){d+=T.length;for(let R=2,M=T.length;R<M;R++){const k=T[R]-T[R-2];o=Math.min(o,k),c=Math.max(c,k)}}let h;o>=-128&&c<=127?h=Int8Array:o>=-32768&&c<=32767?h=Int16Array:h=Int32Array;const f=e.length,p=Fh+$c*f,y=new Uint32Array(p);let b=0;y[b++]=p*Uint32Array.BYTES_PER_ELEMENT+(d-2*f)*h.BYTES_PER_ELEMENT,y[b++]=0,y[b++]=i,y[b++]=a,y[b++]=t?0:1,y[b++]=Math.max(0,Math.floor(s??0)),y[b++]=f,y[b++]=h.BYTES_PER_ELEMENT;for(const T of e)y[b++]=T.length-2,y[b++]=T[0],y[b++]=T[1];const A=new CompressionStream("deflate-raw"),S=A.writable.getWriter();await S.ready,S.write(y);const E=h.prototype.constructor;for(const T of e){const R=new E(T.length-2);for(let M=2,k=T.length;M<k;M++)R[M-2]=T[M]-T[M-2];S.write(R)}S.close();const C=await new Response(A.readable).arrayBuffer(),_=new Uint8Array(C);return AN(_)}static async decompressSignature(e){try{const t=mG(e),{readable:s,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(t).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let o=null,c=0;for await(const T of s)o||=new Uint8Array(new Uint32Array(T.buffer,0,4)[0]),o.set(T,c),c+=T.length;const d=new Uint32Array(o.buffer,0,o.length>>2),h=d[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const f=d[2],p=d[3],y=d[4]===0,b=d[5],A=d[6],S=d[7],E=[],C=(Fh+$c*A)*Uint32Array.BYTES_PER_ELEMENT;let _;switch(S){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(o.buffer,C);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(o.buffer,C);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(o.buffer,C);break}c=0;for(let T=0;T<A;T++){const R=d[$c*T+Fh],M=new Float32Array(R+2);E.push(M);for(let k=0;k<$c-1;k++)M[k]=d[$c*T+Fh+k+1];for(let k=0;k<R;k++)M[k+2]=M[k]+_[c++]}return{areContours:y,thickness:b,outlines:E,width:f,height:p}}catch(t){return Qe(`decompressSignature: ${t}`),null}}}class Db extends nP{constructor(){super(),super.updateProperties({fill:Be._defaultLineColor,"stroke-width":0})}clone(){const e=new Db;return e.updateAll(this),e}}class Mb extends cm{constructor(e){super(e),super.updateProperties({stroke:Be._defaultLineColor,"stroke-width":1})}clone(){const e=new Mb(this._viewParameters);return e.updateAll(this),e}}class yi extends Ve{#e=!1;#t=null;#s=null;#n=null;static _type="signature";static _editorType=We.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){Be.initialize(e,t),this._defaultDrawingOptions=new Db,this._defaultDrawnSignatureOptions=new Mb(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return tt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:i,mustSmooth:a,areContours:o,description:c,uuid:d,heightInPage:h}=this.#s,{rawDims:{pageWidth:f,pageHeight:p},rotation:y}=this.parent.viewport,b=Oa.processDrawnLines({lines:i,pageWidth:f,pageHeight:p,rotation:y,innerMargin:yi._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(b,h,c,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:s,width:i,height:a}=this.#s,o=Math.max(i,a),c=Oa.processDrawnLines({lines:{curves:e.map(d=>({points:d})),thickness:s,width:i,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,s,i){const{x:a,y:o}=this,{outline:c}=this.#s=e;this.#e=c instanceof Fv,this.description=s;let d;this.#e?d=yi.getDefaultDrawingOptions():(d=yi._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:d});const[,h]=this.pageDimensions;let f=t/h;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:s},rotation:i}=this.parent.viewport;return Oa.process(e,t,s,i,yi._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:s,pageHeight:i},rotation:a}=this.parent.viewport;return Oa.extractContoursFromText(e,t,s,i,a,yi._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:s},rotation:i}=this.parent.viewport;return Oa.processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:i,innerMargin:yi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=yi.getDefaultDrawingOptions():(this._drawingOptions=yi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,a=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:i});return this.addComment(a),e?(a.paths={lines:t,points:s},a.uuid=this.#n,a.isCopy=!0):a.lines=t,this.#t&&(a.accessibilityData={type:"Figure",alt:this.#t}),a}static deserializeDraw(e,t,s,i,a,o){return o.areContours?Fv.deserialize(e,t,s,i,a,o):Zu.deserialize(e,t,s,i,a,o)}static async deserialize(e,t,s){const i=await super.deserialize(e,t,s);return i.#e=e.areContours,i.description=e.accessibilityData?.alt||"",i.#n=e.uuid,i}}class $K extends Be{#e=null;#t=null;#s=null;#n=null;#i=null;#r="";#a=null;#o=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=We.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#i=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){Be.initialize(e,t)}static isHandlingMimeForPasting(e){return Tf.includes(e)}static paste(e,t){t.pasteEditor({mode:We.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#r=e.file.name),this.#m()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:o}=e||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:i,width:a,height:o,channels:i.length/(a*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),t&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(s=>this.#d(s,!0)).finally(()=>this.#f());return}if(this.#n){const s=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(s).then(i=>this.#d(i)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(s).then(i=>this.#d(i)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=Tf.join(",");const t=this._uiManager._signal;this.#s=new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(i)}s()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#a===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#s||this.#e||this.#n||this.#i||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#t=s,i&&(this.#e=i),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},e)}#m(){const{div:e}=this;let{width:t,height:s}=this.#e;const[i,a]=this.pageDimensions,o=.75;if(this.width)t=this.width*i,s=this.height*a;else if(t>o*i||s>o*a){const d=Math.min(o*i/t,o*a/s);t*=d,s*=d}this._uiManager.enableWaiting(!1);const c=this.#a=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=t/i,this.height=s/a,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#p(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,s=!1){e||(e=224);const{width:i,height:a}=this.#e,o=new ai;let c=this.#e,d=i,h=a,f=null;if(t){if(i>t||a>t){const k=Math.min(t/i,t/a);d=Math.floor(i*k),h=Math.floor(a*k)}f=document.createElement("canvas");const y=f.width=Math.ceil(d*o.sx),b=f.height=Math.ceil(h*o.sy);this.#l||(c=this.#u(y,b));const A=f.getContext("2d");A.filter=this._uiManager.hcmFilter;let S="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":yG.isDarkMode&&(S="#8f8f9d",E="#42414d");const C=15,_=C*o.sx,T=C*o.sy,R=new OffscreenCanvas(_*2,T*2),M=R.getContext("2d");M.fillStyle=S,M.fillRect(0,0,_*2,T*2),M.fillStyle=E,M.fillRect(0,0,_,T),M.fillRect(_,T,_,T),A.fillStyle=A.createPattern(R,"repeat"),A.fillRect(0,0,y,b),A.drawImage(c,0,0,c.width,c.height,0,0,y,b)}let p=null;if(s){let y,b;if(o.symmetric&&c.width<e&&c.height<e)y=c.width,b=c.height;else if(c=this.#e,i>e||a>e){const E=Math.min(e/i,e/a);y=Math.floor(i*E),b=Math.floor(a*E),this.#l||(c=this.#u(y,b))}const S=new OffscreenCanvas(y,b).getContext("2d",{willReadFrequently:!0});S.drawImage(c,0,0,c.width,c.height,0,0,y,b),p={width:y,height:b,data:S.getImageData(0,0,y,b).data}}return{canvas:f,width:d,height:h,imageData:p}}#u(e,t){const{width:s,height:i}=this.#e;let a=s,o=i,c=this.#e;for(;a>2*e||o>2*t;){const d=a,h=o;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const f=new OffscreenCanvas(a,o);f.getContext("2d").drawImage(c,0,0,d,h,0,0,a,o),c=f.transferToImageBitmap()}return c}#p(){const[e,t]=this.parentDimensions,{width:s,height:i}=this,a=new ai,o=Math.ceil(s*e*a.sx),c=Math.ceil(i*t*a.sy),d=this.#a;if(!d||d.width===o&&d.height===c)return;d.width=o,d.height=c;const h=this.#l?this.#e:this.#u(o,c),f=d.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,o,c)}#y(e){if(e){if(this.#l){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,s]=this.pageDimensions,i=Math.round(this.width*t*Ja.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*Ja.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,a);return o.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,a),o.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,s){let i=null,a=!1;if(e instanceof JN){const{data:{rect:S,rotation:E,id:C,structParent:_,popupRef:T,richText:R,contentsObj:M,creationDate:k,modificationDate:N},container:P,parent:{page:{pageNumber:j}},canvas:I}=e;let H,$;I?(delete e.canvas,{id:H,bitmap:$}=s.imageManager.getFromCanvas(P.id,I),I.remove()):(a=!0,e._hasNoCanvas=!0);const K=(await t._structTree.getAriaAttributes(`${hb}${C}`))?.get("aria-label")||"";i=e={annotationType:We.STAMP,bitmapId:H,bitmap:$,pageIndex:j-1,rect:S.slice(0),rotation:E,annotationElementId:C,id:C,deleted:!1,accessibilityData:{decorative:!1,altText:K},isSvg:!1,structParent:_,popupRef:T,richText:R,comment:M?.str||null,creationDate:k,modificationDate:N}}const o=await super.deserialize(e,t,s),{rect:c,bitmap:d,bitmapUrl:h,bitmapId:f,isSvg:p,accessibilityData:y}=e;a?(s.addMissingCanvas(e.id,o),o.#o=!0):f&&s.imageManager.isValidId(f)?(o.#t=f,d&&(o.#e=d)):o.#n=h,o.#l=p;const[b,A]=o.pageDimensions;return o.width=(c[2]-c[0])/b,o.height=(c[3]-c[1])/A,y&&(o.altTextData=y),o._initialData=i,e.comment&&o.setCommentData(e),o.#h=!!i,o}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(s),e)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=this.#b(s);return c.isSame?null:(c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(t===null)return s;t.stamps||=new Map;const o=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:o,serialized:s}),s.bitmap=this.#y(!1);else if(this.#l){const c=t.stamps.get(this.#t);o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=this.#y(!1))}return s}#b(e){const{pageIndex:t,accessibilityData:{altText:s}}=this._initialData,i=e.pageIndex===t,a=(e.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class bi{#e;#t=!1;#s=null;#n=null;#i=null;#r=new Map;#a=!1;#o=!1;#c=!1;#l=null;#h=null;#d=null;#f=null;#g=null;#m=-1;#u;static _initialized=!1;static#p=new Map([hn,Rb,$K,Kt,yi].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:i,accessibilityManager:a,annotationLayer:o,drawLayer:c,textLayer:d,viewport:h,l10n:f}){const p=[...bi.#p.values()];if(!bi._initialized){bi._initialized=!0;for(const y of p)y.initialize(f,e)}e.registerEditorTypes(p),this.#u=e,this.pageIndex=t,this.div=s,this.#e=a,this.#s=o,this.viewport=h,this.#d=d,this.drawLayer=c,this._structTree=i,this.#u.addLayer(this)}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===We.NONE}updateToolbar(e){this.#u.updateToolbar(e)}updateMode(e=this.#u.getMode()){switch(this.#x(),e){case We.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case We.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case We.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===We.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const s of bi.#p.values())t.toggle(`${s._type}Editing`,e===s._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#u.setEditingState(e)}addCommands(e){this.#u.addCommands(e)}cleanUndoStack(e){this.#u.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#s?.div.classList.toggle("disabled",!e)}get#y(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const e=new Set;for(const s of this.#y)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),e.add(s.annotationElementId));const t=this.#s;if(t)for(const s of t.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#g){this.#g=new AbortController;const s=this.#u.combinedSignal(this.#g);this.#d.div.addEventListener("pointerdown",i=>{const{clientX:o,clientY:c,timeStamp:d}=i,h=this.#m;if(d-h>500){this.#m=d;return}this.#m=-1;const{classList:f}=this.div;f.toggle("getElements",!0);const p=document.elementsFromPoint(o,c);if(f.toggle("getElements",!1),!this.div.contains(p[0]))return;let y;const b=new RegExp(`^${Eu}[0-9]+$`);for(const S of p)if(b.test(S.id)){y=S.id;break}if(!y)return;const A=this.#r.get(y);A?.annotationElementId===null&&(i.stopPropagation(),i.preventDefault(),A.dblclick(i))},{signal:s,capture:!0})}const e=this.#s;if(e){const s=new Map,i=new Map;for(const o of this.#y){if(o.disableEditing(),!o.annotationElementId){o.updateFakeAnnotationElement(e);continue}if(o.serialize()!==null){s.set(o.annotationElementId,o);continue}else i.set(o.annotationElementId,o);this.getEditableAnnotation(o.annotationElementId)?.show(),o.remove()}const a=e.getEditableAnnotations();for(const o of a){const{id:c}=o.data;if(this.#u.isDeletedAnnotationElement(c)){o.updateEdited({deleted:!0});continue}let d=i.get(c);if(d){d.resetAnnotationElement(o),d.show(!1),o.show();continue}d=s.get(c),d&&(this.#u.addChangedExistingAnnotation(d),d.renderAnnotationElement(o)&&d.show(!1)),o.show()}}this.#x(),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const s of bi.#p.values())t.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(e){return this.#s?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#u.getActive()!==e&&this.#u.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#u.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#b.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#b(e){this.#u.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:s}=gn.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),Kt.startHighlighting(this,this.#u.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#r.set(e.id,e);const{annotationElementId:t}=e;t&&this.#u.isDeletedAnnotationElement(t)&&this.#u.removeDeletedAnnotationElement(e)}detach(e){this.#r.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#u.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#u.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#u.addDeletedAnnotationElement(e.annotationElementId),Be.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#u.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#u.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#i&&(e._focusEventsAllowed=!1,this.#i=setTimeout(()=>{this.#i=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getEditorByUID(e){for(const t of this.#r.values())if(t.uid===e)return t;return null}getNextId(){return this.#u.getId()}get#v(){return bi.#p.get(this.#u.getMode())}combinedSignal(e){return this.#u.combinedSignal(e)}#C(e){const t=this.#v;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#u.updateMode(e.mode);const{offsetX:s,offsetY:i}=this.#S(),a=this.getNextId(),o=this.#C({parent:this,id:a,x:s,y:i,uiManager:this.#u,isCentered:!0,...t});o&&this.add(o)}async deserialize(e){return await bi.#p.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#u)||null}createAndAddNewEditor(e,t,s={}){const i=this.getNextId(),a=this.#C({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#u,isCentered:t,...s});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}#S(){const{x:e,y:t,width:s,height:i}=this.boundingClientRect,a=Math.max(0,e),o=Math.max(0,t),c=Math.min(window.innerWidth,e+s),d=Math.min(window.innerHeight,t+i),h=(a+c)/2-e,f=(o+d)/2-t,[p,y]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:p,offsetY:y}}addNewEditor(e={}){this.createAndAddNewEditor(this.#S(),!0,e)}setSelected(e){this.#u.setSelected(e)}toggleSelected(e){this.#u.toggleSelected(e)}unselect(e){this.#u.unselect(e)}pointerup(e){const{isMac:t}=gn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#a||(this.#a=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const s=this.#u.getMode();if(s===We.STAMP||s===We.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#u.getMode()===We.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:t}=gn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#a=!0,this.#v?.isDrawer){this.startDrawingSession(e);return}const s=this.#u.getActive();this.#t=!s||s.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,e);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#v.startDrawing(this,this.#u,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#v.endDrawing(e)):null}findNewParent(e,t,s){const i=this.#u.findParent(t,s);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#i&&(clearTimeout(this.#i),this.#i=null);for(const e of this.#r.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#x(){for(const e of this.#r.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,na(this.div,e);for(const t of this.#u.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#u.commitOrRemove(),this.#x();const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,na(this.div,{rotation:s}),t!==s)for(const i of this.#r.values())i.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#u.viewParameters.realScale}}class fn{#e=null;#t=new Map;#s=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return tt(this,"_svgFactory",new Mu)}static#i(e,[t,s,i,a]){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*a}%`}#r(){const e=fn._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#a(e,t){const s=fn._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${t}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const a=fn._svgFactory.createElement("use");return s.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),i}#o(e,t){for(const[s,i]of Object.entries(t))i===null?e.removeAttribute(s):e.setAttribute(s,i)}draw(e,t=!1,s=!1){const i=fn.#n++,a=this.#r(),o=fn._svgFactory.createElement("defs");a.append(o);const c=fn._svgFactory.createElement("path");o.append(c);const d=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",d),c.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#s.set(i,c);const h=s?this.#a(o,d):null,f=fn._svgFactory.createElement("use");return a.append(f),f.setAttribute("href",`#${d}`),this.updateProperties(a,e),this.#t.set(i,a),{id:i,clipPathId:`url(#${h})`}}drawOutline(e,t){const s=fn.#n++,i=this.#r(),a=fn._svgFactory.createElement("defs");i.append(a);const o=fn._svgFactory.createElement("path");a.append(o);const c=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke");let d;if(t){const p=fn._svgFactory.createElement("mask");a.append(p),d=`mask_p${this.pageIndex}_${s}`,p.setAttribute("id",d),p.setAttribute("maskUnits","objectBoundingBox");const y=fn._svgFactory.createElement("rect");p.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const b=fn._svgFactory.createElement("use");p.append(b),b.setAttribute("href",`#${c}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const h=fn._svgFactory.createElement("use");i.append(h),h.setAttribute("href",`#${c}`),d&&h.setAttribute("mask",`url(#${d})`);const f=h.cloneNode();return i.append(f),h.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#t.set(s,i),s}finalizeDraw(e,t){this.#s.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:s,bbox:i,rootClass:a,path:o}=t,c=typeof e=="number"?this.#t.get(e):e;if(c){if(s&&this.#o(c,s),i&&fn.#i(c,i),a){const{classList:d}=c;for(const[h,f]of Object.entries(a))d.toggle(h,f)}if(o){const h=c.firstChild.firstChild;this.#o(h,o)}}}updateParent(e,t){if(t===this)return;const s=this.#t.get(e);s&&(t.#e.append(s),this.#t.delete(e),t.#t.set(e,s))}remove(e){this.#s.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#s.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:jv};globalThis.pdfjsLib={AbortException:mr,AnnotationEditorLayer:bi,AnnotationEditorParamsType:ct,AnnotationEditorType:We,AnnotationEditorUIManager:pr,AnnotationLayer:Tb,AnnotationMode:wi,AnnotationType:Gt,applyOpacity:RN,build:YN,ColorPicker:vs,createValidAbsoluteUrl:cb,CSSConstants:TN,DOMSVGFactory:Mu,DrawLayer:fn,FeatureTest:gn,fetchData:Ul,findContrastColor:DN,getDocument:wb,getFilenameFromUrl:CN,getPdfFilenameFromUrl:EN,getRGB:Vl,getUuid:db,getXfaPageViewport:_N,GlobalWorkerOptions:Qr,ImageKind:lu,InvalidPDFException:Ef,isDataScheme:Yu,isPdfFile:om,isValidExplicitDest:kN,MathClamp:Dn,noContextMenu:Cs,normalizeUnicode:SN,OPS:_l,OutputScale:ai,PasswordResponses:xN,PDFDataRangeTransport:Ab,PDFDateString:_f,PDFWorker:Tl,PermissionFlag:bN,PixelsPerInch:Ja,RenderingCancelledException:am,renderRichText:mb,ResponseException:_u,setLayerDimensions:na,shadow:tt,SignatureExtractor:Oa,stopEvent:Ft,SupportedImageMimeTypes:Tf,TextLayer:Ru,TouchManager:Wu,updateUrlHash:ub,Util:De,VerbosityLevel:qu,version:Cb,XfaLayer:fb};const qK=Object.freeze(Object.defineProperty({__proto__:null,AbortException:mr,AnnotationEditorLayer:bi,AnnotationEditorParamsType:ct,AnnotationEditorType:We,AnnotationEditorUIManager:pr,AnnotationLayer:Tb,AnnotationMode:wi,AnnotationType:Gt,CSSConstants:TN,ColorPicker:vs,DOMSVGFactory:Mu,DrawLayer:fn,FeatureTest:gn,GlobalWorkerOptions:Qr,ImageKind:lu,InvalidPDFException:Ef,MathClamp:Dn,OPS:_l,OutputScale:ai,PDFDataRangeTransport:Ab,PDFDateString:_f,PDFWorker:Tl,PasswordResponses:xN,PermissionFlag:bN,PixelsPerInch:Ja,RenderingCancelledException:am,ResponseException:_u,SignatureExtractor:Oa,SupportedImageMimeTypes:Tf,TextLayer:Ru,TouchManager:Wu,Util:De,VerbosityLevel:qu,XfaLayer:fb,applyOpacity:RN,build:YN,createValidAbsoluteUrl:cb,fetchData:Ul,findContrastColor:DN,getDocument:wb,getFilenameFromUrl:CN,getPdfFilenameFromUrl:EN,getRGB:Vl,getUuid:db,getXfaPageViewport:_N,isDataScheme:Yu,isPdfFile:om,isValidExplicitDest:kN,noContextMenu:Cs,normalizeUnicode:SN,renderRichText:mb,setLayerDimensions:na,shadow:tt,stopEvent:Ft,updateUrlHash:ub,version:Cb},Symbol.toStringTag,{value:"Module"}));var a_=Object.prototype.hasOwnProperty;function o_(n,e,t){for(t of n.keys())if(wl(t,e))return t}function wl(n,e){var t,s,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((s=n.length)===e.length)for(;s--&&wl(n[s],e[s]););return s===-1}if(t===Set){if(n.size!==e.size)return!1;for(s of n)if(i=s,i&&typeof i=="object"&&(i=o_(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(s of n)if(i=s[0],i&&typeof i=="object"&&(i=o_(e,i),!i)||!wl(s[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((s=n.byteLength)===e.byteLength)for(;s--&&n.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(n)){if((s=n.byteLength)===e.byteLength)for(;s--&&n[s]===e[s];);return s===-1}if(!t||typeof n=="object"){s=0;for(t in n)if(a_.call(n,t)&&++s&&!a_.call(e,t)||!(t in e)||!wl(n[t],e[t]))return!1;return Object.keys(e).length===s}}return n!==n&&e!==e}function Ju(n){let e=!1;return{promise:new Promise((s,i)=>{n.then(a=>!e&&s(a)).catch(a=>!e&&i(a))}),cancel(){e=!0}}}const GK=["onCopy","onCut","onPaste"],KK=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],YK=["onFocus","onBlur"],XK=["onInput","onInvalid","onReset","onSubmit"],WK=["onLoad","onError"],QK=["onKeyDown","onKeyPress","onKeyUp"],ZK=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],JK=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],eY=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],tY=["onSelect"],nY=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],sY=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],iY=["onScroll"],rY=["onWheel"],aY=["onAnimationStart","onAnimationEnd","onAnimationIteration"],oY=["onTransitionEnd"],lY=["onToggle"],cY=["onChange"],uY=[...GK,...KK,...YK,...XK,...WK,...QK,...ZK,...JK,...eY,...tY,...nY,...sY,...iY,...rY,...aY,...oY,...cY,...lY];function sP(n,e){const t={};for(const s of uY){const i=n[s];i&&(e?t[s]=(a=>i(a,e(s))):t[s]=i)}return t}var dY="Invariant failed";function Et(n,e){if(!n)throw new Error(dY)}var Ey,l_;function hY(){if(l_)return Ey;l_=1;var n=function(){};return Ey=n,Ey}var fY=hY();const Pn=zv(fY),iP=x.createContext(null),mY="noopener noreferrer nofollow";class pY{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Et(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Et(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||mY,e.target=s?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{Et(this.pdfDocument),Et(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Et(Array.isArray(t));const s=t[0];new Promise(i=>{Et(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(a=>{i(a)}).catch(()=>{Et(!1)}):typeof s=="number"?i(s):Et(!1)}).then(i=>{const a=i+1;Et(this.pdfViewer),Et(a>=1&&a<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:i,pageNumber:a})})})}goToPage(e){const t=e-1;Et(this.pdfViewer),Et(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function Sl({children:n,type:e}){return g.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const c_={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function gY(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function Rl(){return x.useReducer(gY,{value:void 0,error:void 0})}const um=typeof window<"u",rP=um&&window.location.protocol==="file:";function yY(n){return typeof n<"u"}function Ra(n){return yY(n)&&n!==null}function vY(n){return typeof n=="string"}function bY(n){return n instanceof ArrayBuffer}function xY(n){return Et(um),n instanceof Blob}function Iv(n){return vY(n)&&/^data:/.test(n)}function u_(n){Et(Iv(n));const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function wY(){return um&&window.devicePixelRatio||1}const aP="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function d_(){Pn(!rP,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${aP}`)}function SY(){Pn(!rP,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${aP}`)}function to(n){n?.cancel&&n.cancel()}function Bv(n,e){return Object.defineProperty(n,"width",{get(){return this.getViewport({scale:e}).width},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.getViewport({scale:e}).height},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),n}function oP(n){return n.name==="AbortException"||n.name==="RenderingCancelledException"}function AY(n){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=i=>{if(!i.target)return t(new Error("Error while reading a file."));const{error:a}=i.target;if(!a)return t(new Error("Error while reading a file."));switch(a.code){case a.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case a.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case a.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:CY}=qK,EY=(n,e)=>{switch(e){case c_.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case c_.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function h_(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const _Y=x.forwardRef(function({children:e,className:t,error:s="Failed to load PDF file.",externalLinkRel:i,externalLinkTarget:a,file:o,inputRef:c,imageResourcesPath:d,loading:h="Loading PDF",noData:f="No PDF file specified.",onItemClick:p,onLoadError:y,onLoadProgress:b,onLoadSuccess:A,onPassword:S=EY,onSourceError:E,onSourceSuccess:C,options:_,renderMode:T,rotate:R,scale:M,...k},N){const[P,j]=Rl(),{value:I,error:H}=P,[$,K]=Rl(),{value:Z,error:oe}=$,F=x.useRef(new pY),B=x.useRef([]),z=x.useRef(void 0),Q=x.useRef(void 0);o&&o!==z.current&&h_(o)&&(Pn(!wl(o,z.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),z.current=o),_&&_!==Q.current&&(Pn(!wl(_,Q.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Q.current=_);const me=x.useRef({scrollPageIntoView:se=>{const{dest:he,pageNumber:ve,pageIndex:Se=ve-1}=se;if(p){p({dest:he,pageIndex:Se,pageNumber:ve});return}const Ee=B.current[Se];if(Ee){Ee.scrollIntoView();return}Pn(!1,`An internal link leading to page ${ve} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});x.useImperativeHandle(N,()=>({linkService:F,pages:B,viewer:me}),[]);function L(){C&&C()}function X(){H&&(Pn(!1,H.toString()),E&&E(H))}function te(){j({type:"RESET"})}x.useEffect(te,[o,j]);const ce=x.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return Iv(o)?{data:u_(o)}:(d_(),{url:o});if(o instanceof CY)return{range:o};if(bY(o))return{data:o};if(um&&xY(o))return{data:await AY(o)};if(Et(typeof o=="object"),Et(h_(o)),"url"in o&&typeof o.url=="string"){if(Iv(o.url)){const{url:se,...he}=o;return{data:u_(se),...he}}d_()}return o},[o]);x.useEffect(()=>{const se=Ju(ce());return se.promise.then(he=>{j({type:"RESOLVE",value:he})}).catch(he=>{j({type:"REJECT",error:he})}),()=>{to(se)}},[ce,j]),x.useEffect(()=>{if(!(typeof I>"u")){if(I===!1){X();return}L()}},[I]);function ye(){Z&&(A&&A(Z),B.current=new Array(Z.numPages),F.current.setDocument(Z))}function be(){oe&&(Pn(!1,oe.toString()),y&&y(oe))}x.useEffect(function(){K({type:"RESET"})},[K,I]),x.useEffect(function(){if(!I)return;const he=_?{...I,..._}:I,ve=wb(he);b&&(ve.onProgress=b),S&&(ve.onPassword=S);const Se=ve;return Se.promise.then(Ee=>{Se.destroyed||K({type:"RESOLVE",value:Ee})}).catch(Ee=>{Se.destroyed||K({type:"REJECT",error:Ee})}),()=>{Se.destroy()}},[_,K,I]),x.useEffect(()=>{if(!(typeof Z>"u")){if(Z===!1){be();return}ye()}},[Z]),x.useEffect(function(){F.current.setViewer(me.current),F.current.setExternalLinkRel(i),F.current.setExternalLinkTarget(a)},[i,a]);const W=x.useCallback((se,he)=>{B.current[se]=he},[]),Ae=x.useCallback(se=>{delete B.current[se]},[]),xe=x.useMemo(()=>({imageResourcesPath:d,linkService:F.current,onItemClick:p,pdf:Z,registerPage:W,renderMode:T,rotate:R,scale:M,unregisterPage:Ae}),[d,p,Z,W,T,R,M,Ae]),je=x.useMemo(()=>sP(k,()=>Z),[k,Z]);function we(){function se(ve){return!!ve?.pdf}if(!se(xe))throw new Error("pdf is undefined");const he=typeof e=="function"?e(xe):e;return g.jsx(iP.Provider,{value:xe,children:he})}function ze(){return o?Z==null?g.jsx(Sl,{type:"loading",children:typeof h=="function"?h():h}):Z===!1?g.jsx(Sl,{type:"error",children:typeof s=="function"?s():s}):we():g.jsx(Sl,{type:"no-data",children:typeof f=="function"?f():f})}return g.jsx("div",{className:jl("react-pdf__Document",t),ref:c,...je,children:ze()})});function lP(){return x.useContext(iP)}function cP(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(a){for(var o=0,c=t;o<c.length;o++){var d=c[o];typeof d=="function"?d(a):d&&(d.current=a)}}}const uP=x.createContext(null);function dm(){return x.useContext(uP)}function TY(){const n=lP(),e=dm();Et(e);const t={...n,...e},{filterAnnotations:s,imageResourcesPath:i,linkService:a,onGetAnnotationsError:o,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:d,onRenderAnnotationLayerSuccess:h,page:f,pdf:p,renderForms:y,rotate:b,scale:A=1}=t;Et(p),Et(f),Et(a);const[S,E]=Rl(),{value:C,error:_}=S,T=x.useRef(null);Pn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function R(){C&&c&&c(C)}function M(){_&&(Pn(!1,_.toString()),o&&o(_))}x.useEffect(function(){E({type:"RESET"})},[E,f]),x.useEffect(function(){if(!f)return;const I=Ju(f.getAnnotations()),H=I;return I.promise.then($=>{E({type:"RESOLVE",value:$})}).catch($=>{E({type:"REJECT",error:$})}),()=>{to(H)}},[E,f]),x.useEffect(()=>{if(C!==void 0){if(C===!1){M();return}R()}},[C]);function k(){h&&h()}function N(j){Pn(!1,`${j}`),d&&d(j)}const P=x.useMemo(()=>f.getViewport({scale:A,rotation:b}),[f,b,A]);return x.useEffect(function(){if(!p||!f||!a||!C)return;const{current:I}=T;if(!I)return;const H=P.clone({dontFlip:!0}),$={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:p.annotationStorage,commentManager:null,div:I,l10n:null,linkService:a,page:f,structTreeLayer:null,viewport:H},K={annotations:s?s({annotations:C}):C,annotationStorage:p.annotationStorage,div:I,imageResourcesPath:i,linkService:a,page:f,renderForms:y,viewport:H};I.innerHTML="";try{new Tb($).render(K),k()}catch(Z){N(Z)}return()=>{}},[C,s,i,a,f,p,y,P]),g.jsx("div",{className:jl("react-pdf__Page__annotations","annotationLayer"),ref:T})}const dP={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},RY=/^H(\d+)$/;function DY(n){return n in dP}function hm(n){return"children"in n}function hP(n){return hm(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function MY(n){const e={};if(hm(n)){const{role:t}=n,s=t.match(RY);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(DY(t)){const i=dP[t];i&&(e.role=i)}}return e}function fP(n){const e={};if(hm(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),hP(n)){const[t]=n.children;if(t){const s=fP(t);return{...e,...s}}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function NY(n){return n?{...MY(n),...fP(n)}:null}function mP({className:n,node:e}){const t=x.useMemo(()=>NY(e),[e]),s=x.useMemo(()=>!hm(e)||hP(e)?null:e.children.map((i,a)=>g.jsx(mP,{node:i},a)),[e]);return g.jsx("span",{className:n,...t,children:s})}function PY(){const n=dm();Et(n);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[s,i]=Rl(),{value:a,error:o}=s,{customTextRenderer:c,page:d}=n;function h(){a&&t&&t(a)}function f(){o&&(Pn(!1,o.toString()),e&&e(o))}return x.useEffect(function(){i({type:"RESET"})},[i,d]),x.useEffect(function(){if(c||!d)return;const y=Ju(d.getStructTree()),b=y;return y.promise.then(A=>{i({type:"RESOLVE",value:A})}).catch(A=>{i({type:"REJECT",error:A})}),()=>to(b)},[c,d,i]),x.useEffect(()=>{if(a!==void 0){if(a===!1){f();return}h()}},[a]),a?g.jsx(mP,{className:"react-pdf__Page__structTree structTree",node:a}):null}const f_=wi;function kY(n){const e=dm();Et(e);const t={...e,...n},{_className:s,canvasBackground:i,devicePixelRatio:a=wY(),onRenderError:o,onRenderSuccess:c,page:d,renderForms:h,renderTextLayer:f,rotate:p,scale:y}=t,{canvasRef:b}=n;Et(d);const A=x.useRef(null);function S(){d&&c&&c(Bv(d,y))}function E(R){oP(R)||(Pn(!1,R.toString()),o&&o(R))}const C=x.useMemo(()=>d.getViewport({scale:y*a,rotation:p}),[a,d,p,y]),_=x.useMemo(()=>d.getViewport({scale:y,rotation:p}),[d,p,y]);x.useEffect(function(){if(!d)return;d.cleanup();const{current:M}=A;if(!M)return;M.width=C.width,M.height=C.height,M.style.width=`${Math.floor(_.width)}px`,M.style.height=`${Math.floor(_.height)}px`,M.style.visibility="hidden";const k={annotationMode:h?f_.ENABLE_FORMS:f_.ENABLE,canvas:M,canvasContext:M.getContext("2d",{alpha:!1}),viewport:C};i&&(k.background=i);const N=d.render(k),P=N;return N.promise.then(()=>{M.style.visibility="",S()}).catch(E),()=>to(P)},[i,d,h,C,_]);const T=x.useCallback(()=>{const{current:R}=A;R&&(R.width=0,R.height=0)},[]);return x.useEffect(()=>T,[T]),g.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:cP(b,A),style:{display:"block",userSelect:"none"},children:f?g.jsx(PY,{}):null})}function OY(n){return"str"in n}function jY(){const n=dm();Et(n);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:i,onRenderTextLayerSuccess:a,page:o,pageIndex:c,pageNumber:d,rotate:h,scale:f}=n;Et(o);const[p,y]=Rl(),{value:b,error:A}=p,S=x.useRef(null);Pn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function E(){b&&s&&s(b)}function C(){A&&(Pn(!1,A.toString()),t&&t(A))}x.useEffect(function(){y({type:"RESET"})},[o,y]),x.useEffect(function(){if(!o)return;const P=Ju(o.getTextContent()),j=P;return P.promise.then(I=>{y({type:"RESOLVE",value:I})}).catch(I=>{y({type:"REJECT",error:I})}),()=>to(j)},[o,y]),x.useEffect(()=>{if(b!==void 0){if(b===!1){C();return}E()}},[b]);const _=x.useCallback(()=>{a&&a()},[a]),T=x.useCallback(N=>{oP(N)||(Pn(!1,N.toString()),i&&i(N))},[i]);function R(){const N=S.current;N&&N.classList.add("selecting")}function M(){const N=S.current;N&&N.classList.remove("selecting")}const k=x.useMemo(()=>o.getViewport({scale:f,rotation:h}),[o,h,f]);return x.useLayoutEffect(function(){if(!o||!b)return;const{current:P}=S;if(!P)return;P.innerHTML="";const j=o.streamTextContent({includeMarkedContent:!0}),I={container:P,textContentSource:j,viewport:k},H=new Ru(I),$=H;return H.render().then(()=>{const K=document.createElement("div");K.className="endOfContent",P.append(K);const Z=P.querySelectorAll('[role="presentation"]');if(e){let oe=0;b.items.forEach((F,B)=>{if(!OY(F))return;const z=Z[oe];if(!z)return;const Q=e({pageIndex:c,pageNumber:d,itemIndex:B,...F});z.innerHTML=Q,oe+=F.str&&F.hasEOL?2:1})}_()}).catch(T),()=>to($)},[e,T,_,o,c,d,b,k]),g.jsx("div",{className:jl("react-pdf__Page__textContent","textLayer"),onMouseUp:M,onMouseDown:R,ref:S})}const m_=1;function LY(n){const t={...lP(),...n},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:a,canvasRef:o,children:c,className:d,customRenderer:h,customTextRenderer:f,devicePixelRatio:p,error:y="Failed to load the page.",filterAnnotations:b,height:A,inputRef:S,loading:E="Loading page",noData:C="No page specified.",onGetAnnotationsError:_,onGetAnnotationsSuccess:T,onGetStructTreeError:R,onGetStructTreeSuccess:M,onGetTextError:k,onGetTextSuccess:N,onLoadError:P,onLoadSuccess:j,onRenderAnnotationLayerError:I,onRenderAnnotationLayerSuccess:H,onRenderError:$,onRenderSuccess:K,onRenderTextLayerError:Z,onRenderTextLayerSuccess:oe,pageIndex:F,pageNumber:B,pdf:z,registerPage:Q,renderAnnotationLayer:me=!0,renderForms:L=!1,renderMode:X="canvas",renderTextLayer:te=!0,rotate:ce,scale:ye=m_,unregisterPage:be,width:W,...Ae}=t,[xe,je]=Rl(),{value:we,error:ze}=xe,se=x.useRef(null);Et(z);const he=Ra(B)?B-1:F??null,ve=B??(Ra(F)?F+1:null),Se=ce??(we?we.rotate:null),Ee=x.useMemo(()=>{if(!we)return null;let Te=1;const qe=ye??m_;if(W||A){const yt=we.getViewport({scale:1,rotation:Se});W?Te=W/yt.width:A&&(Te=A/yt.height)}return qe*Te},[A,we,Se,ye,W]);x.useEffect(function(){return()=>{Ra(he)&&i&&be&&be(he)}},[i,z,he,be]);function Ne(){if(j){if(!we||!Ee)return;j(Bv(we,Ee))}if(i&&Q){if(!Ra(he)||!se.current)return;Q(he,se.current)}}function nt(){ze&&(Pn(!1,ze.toString()),P&&P(ze))}x.useEffect(function(){je({type:"RESET"})},[je,z,he]),x.useEffect(function(){if(!z||!ve)return;const qe=Ju(z.getPage(ve)),yt=qe;return qe.promise.then(jn=>{je({type:"RESOLVE",value:jn})}).catch(jn=>{je({type:"REJECT",error:jn})}),()=>to(yt)},[je,z,ve]),x.useEffect(()=>{if(we!==void 0){if(we===!1){nt();return}Ne()}},[we,Ee]);const Ke=x.useMemo(()=>Ra(he)&&ve&&Ra(Se)&&Ra(Ee)?{_className:s,canvasBackground:a,customTextRenderer:f,devicePixelRatio:p,filterAnnotations:b,onGetAnnotationsError:_,onGetAnnotationsSuccess:T,onGetStructTreeError:R,onGetStructTreeSuccess:M,onGetTextError:k,onGetTextSuccess:N,onRenderAnnotationLayerError:I,onRenderAnnotationLayerSuccess:H,onRenderError:$,onRenderSuccess:K,onRenderTextLayerError:Z,onRenderTextLayerSuccess:oe,page:we,pageIndex:he,pageNumber:ve,renderForms:L,renderTextLayer:te,rotate:Se,scale:Ee}:null,[s,a,f,p,b,_,T,R,M,k,N,I,H,$,K,Z,oe,we,he,ve,L,te,Se,Ee]),U=x.useMemo(()=>sP(Ae,()=>we&&(Ee?Bv(we,Ee):void 0)),[Ae,we,Ee]),G=`${he}@${Ee}/${Se}`;function ie(){switch(X){case"custom":return Et(h),g.jsx(h,{},`${G}_custom`);case"none":return null;default:return g.jsx(kY,{canvasRef:o},`${G}_canvas`)}}function pe(){return te?g.jsx(jY,{},`${G}_text`):null}function ge(){return me?g.jsx(TY,{},`${G}_annotations`):null}function fe(){function Te(yt){return!!yt?.page}if(!Te(Ke))throw new Error("page is undefined");const qe=typeof c=="function"?c(Ke):c;return g.jsxs(uP.Provider,{value:Ke,children:[ie(),pe(),ge(),qe]})}function re(){return ve?z===null||we===void 0||we===null?g.jsx(Sl,{type:"loading",children:typeof E=="function"?E():E}):z===!1||we===!1?g.jsx(Sl,{type:"error",children:typeof y=="function"?y():y}):fe():g.jsx(Sl,{type:"no-data",children:typeof C=="function"?C():C})}return g.jsx("div",{className:jl(s,d),"data-page-number":ve,ref:cP(S,se),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Ee}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...U,children:re()})}SY();Qr.workerSrc="pdf.worker.mjs";const pn={all:["documents"],lists:()=>[...pn.all,"list"],list:n=>[...pn.lists(),n],details:()=>[...pn.all,"detail"],detail:n=>[...pn.details(),n]};function FY(n){return Gn({queryKey:pn.list(n),queryFn:()=>at.getDocuments(n),staleTime:3e4,placeholderData:$O})}function IY(n,e=!0){return Gn({queryKey:pn.detail(n||""),queryFn:()=>at.getDocument(n),enabled:e&&!!n,staleTime:3e4})}function BY(){const n=Gs();return Di({mutationFn:async e=>at.updateDocument(e.name,e.updates),onSuccess:e=>{n.invalidateQueries({queryKey:pn.lists()}),n.setQueryData(pn.detail(e.name),e)}})}function zY(){const n=Gs();return Di({mutationFn:async e=>at.directorApproveWithFiska(e.name,e.comment,e.signedPdfBase64,e.pkcs7Base64),onSuccess:e=>{n.invalidateQueries({queryKey:pn.lists()}),n.setQueryData(pn.detail(e.name),e)}})}function UY(){const n=Gs();return Di({mutationFn:async e=>at.directorRejectDocument(e.name,e.comment),onSuccess:e=>{n.invalidateQueries({queryKey:pn.lists()}),n.setQueryData(pn.detail(e.name),e)}})}function VY(){const n=Gs();return Di({mutationFn:async e=>at.executorSignDocument(e.name,e.comment),onSuccess:e=>{n.invalidateQueries({queryKey:pn.lists()}),n.setQueryData(pn.detail(e.name),e)}})}function HY(){const n=Gs();return Di({mutationFn:async e=>at.receptionSubmitToDirector(e.documentName,e.resolution,e.resolutionText,e.executor,e.coExecutors),onSuccess:e=>{n.invalidateQueries({queryKey:pn.lists()}),n.setQueryData(pn.detail(e.name),e)}})}const hl={all:["stamps"],lists:()=>[...hl.all,"list"],list:()=>[...hl.lists()],preview:(n,e)=>[...hl.all,"preview",n,e],pdfInfo:n=>[...hl.all,"pdfInfo",n]};function $Y(){return Gn({queryKey:hl.list(),queryFn:()=>at.getStamps(),staleTime:600*1e3})}function qY(n){return Gn({queryKey:hl.pdfInfo(n||""),queryFn:async()=>{try{return await at.getPdfInfo(n)}catch(e){const t=String(e?.message||""),s=String(e);if(t.includes("417")||t.includes("EXPECTATION FAILED")||t.includes("Main document is not a PDF file")||t.includes("not a PDF")||t.includes("ValidationError")||t.includes("frappe.exceptions.ValidationError")||s.includes("Main document is not a PDF file")||s.includes("frappe.exceptions.ValidationError"))return{page_count:1,pages:[{width:595,height:842}]};throw e}},enabled:!!n,staleTime:300*1e3,retry:!1,refetchOnWindowFocus:!1,throwOnError:!1})}function GY(){const n=Gs();return Di({mutationFn:async e=>at.applyStamps(e.documentName,e.stamps),onSuccess:(e,t)=>{n.invalidateQueries({queryKey:pn.detail(t.documentName)}),n.invalidateQueries({queryKey:pn.lists()})}})}Qr.workerSrc=`//unpkg.com/pdfjs-dist@${Cb}/build/pdf.worker.min.mjs`;const p_=[{value:"top-left",key:"positionTopLeft"},{value:"top-center",key:"positionTopCenter"},{value:"top-right",key:"positionTopRight"},{value:"center",key:"positionCenter"},{value:"bottom-left",key:"positionBottomLeft"},{value:"bottom-center",key:"positionBottomCenter"},{value:"bottom-right",key:"positionBottomRight"},{value:"custom",key:"positionCustom"}];function KY({documentName:n,pdfUrl:e,onClose:t,onStampApplied:s}){const{t:i}=yn(),{data:a=[],isLoading:o}=$Y(),{data:c,isLoading:d,error:h}=qY(n),f=GY(),[p,y]=x.useState(1),[b,A]=x.useState(""),[S,E]=x.useState("bottom-right"),C=.15,[_,T]=x.useState([]),[R,M]=x.useState({x:50,y:50}),[k,N]=x.useState(!1),[P,j]=x.useState({x:0,y:0}),[I,H]=x.useState(null),[$,K]=x.useState({}),[Z,oe]=x.useState({}),F=o||d,B=a;x.useEffect(()=>{h&&console.error("Failed to load PDF info:",h)},[h]);const z=c||null,Q=x.useRef(null),me=x.useRef(null),[L,X]=x.useState({width:0,height:0}),te=se=>{if(!se)return console.warn("getFullImageUrl: empty imageUrl"),"";if(se.startsWith("http://")||se.startsWith("https://"))return console.log("getFullImageUrl: already full URL:",se),se;if(se.includes(window.location.origin))return console.log("getFullImageUrl: URL contains origin:",se),se;if(se.startsWith("/api/")){const ve=`${window.location.origin}${se}`;return console.log("getFullImageUrl: API endpoint:",ve),ve}const he=`${window.location.origin}${se.startsWith("/")?"":"/"}${se}`;return console.log("getFullImageUrl: constructed URL:",he,"from:",se),he};x.useEffect(()=>{if(!B.length||!n)return;async function se(){const he={},ve={};await Promise.all(B.map(async Se=>{if(Se.stamp_image){try{const Ne=await at.getStampPreview(Se.name,n);ve[Se.name]=Ne}catch(Ne){console.warn(`Failed to load preview for stamp ${Se.name}:`,Ne),ve[Se.name]=te(Se.stamp_image)}const Ee=ve[Se.name]||te(Se.stamp_image);try{const Ne=new Image;await new Promise((nt,Ke)=>{Ne.onload=()=>{he[Se.stamp_image]={width:Ne.width,height:Ne.height},nt(null)},Ne.onerror=Ke,Ne.src=Ee})}catch(Ne){console.warn(`Failed to load image dimensions for stamp ${Se.name}:`,Ne),he[Se.stamp_image]={width:150,height:50}}}})),K(he),oe(ve)}se()},[B,n]),x.useEffect(()=>{B.length>0&&!b&&A(B[0].name)},[B,b]);const ce=x.useCallback(({width:se,height:he})=>{X({width:se,height:he})},[]),ye=()=>{if(!b)return;const se=B.find(Ee=>Ee.name===b);if(!se)return;let he,ve;if(S==="custom")if(I&&z?.pages[p-1]){const Ee=z.pages[p-1],Ne=L.width/Ee.width,nt=L.height/Ee.height;he=I.x/Ne,ve=(L.height-I.y)/nt}else R.x&&R.y&&(he=R.x,ve=R.y);const Se={id:`stamp-${Date.now()}`,stamp_name:b,stamp_title:se.title,stamp_image:se.stamp_image,page_number:p-1,position:S,scale:C,x:he,y:ve};if(T([..._,Se]),S==="custom"&&L.width&&L.height){const Ee=z?.pages[p-1];if(Ee){const Ne=L.width/2,nt=L.height/2;H({x:Ne,y:nt}),M({x:Ee.width/2,y:Ee.height/2})}}else H(null)},be=se=>{T(_.filter(he=>he.id!==se))},W=async()=>{if(_.length!==0)try{const se=_.map(ve=>({stamp_name:ve.stamp_name,page_number:ve.page_number,position:ve.position,x:ve.x,y:ve.y,scale:ve.scale}));console.log("Applying stamps:",se);const he=await f.mutateAsync({documentName:n,stamps:se});if(console.log("Apply stamps result:",he),he&&he.success)s();else{const ve=he?.message||i("stamps.applyError");alert(ve),console.error("Failed to apply stamps:",he)}}catch(se){const he=se?.message||i("stamps.applyErrorGeneric");alert(he),console.error("Failed to apply stamps:",se)}},Ae=se=>{if(S!=="custom"||!Q.current||!b||se.target.closest(".stamp-preview-draggable"))return;const he=Q.current.getBoundingClientRect(),ve=se.clientX-he.left,Se=se.clientY-he.top;H({x:ve,y:Se});const Ee=z?.pages[p-1];if(Ee){const Ne=L.width/Ee.width,nt=L.height/Ee.height,Ke=ve/Ne,U=(L.height-Se)/nt;M({x:Ke,y:U})}else{const Ne=ve/he.width*595,nt=(he.height-Se)/he.height*842;M({x:Ne,y:nt})}},xe=se=>{if(S!=="custom"||!b||!me.current)return;se.preventDefault(),N(!0);const he=me.current.getBoundingClientRect();j({x:se.clientX-he.left-he.width/2,y:se.clientY-he.top-he.height/2})};x.useEffect(()=>{if(S==="custom"&&b&&Q.current&&L.width&&L.height){const se=z?.pages[p-1];if(se&&R.x&&R.y){const he=L.width/se.width,ve=L.height/se.height,Se=R.x*he,Ee=L.height-R.y*ve;H({x:Se,y:Ee})}else I||H({x:L.width/2,y:L.height/2})}else S!=="custom"&&H(null)},[S,b,R,p,L,z]),x.useEffect(()=>{if(S==="custom"&&b&&L.width&&L.height){I||H({x:L.width/2,y:L.height/2});const se=z?.pages[p-1];se&&(!R.x||!R.y)&&M({x:se.width/2,y:se.height/2})}},[S,b,L,z,p]),x.useEffect(()=>{if(k){const se=ve=>{if(!Q.current)return;const Se=Q.current.getBoundingClientRect(),Ee=ve.clientX-Se.left-P.x,Ne=ve.clientY-Se.top-P.y,nt=Math.max(0,Math.min(Ee,Se.width)),Ke=Math.max(0,Math.min(Ne,Se.height));H({x:nt,y:Ke});const U=z?.pages[p-1];if(U){const G=L.width/U.width,ie=L.height/U.height,pe=nt/G,ge=(L.height-Ke)/ie;M({x:pe,y:ge})}},he=()=>{N(!1)};return window.addEventListener("mousemove",se),window.addEventListener("mouseup",he),()=>{window.removeEventListener("mousemove",se),window.removeEventListener("mouseup",he)}}},[k,P,L,z,p]);const je=_.filter(se=>se.page_number===p-1),we=se=>{if(!L.width||!L.height)return{};const he=z?.pages[se.page_number];if(!he)return{};const ve=L.width/he.width,Se=L.height/he.height,Ee=$[se.stamp_image]||{width:150,height:50},Ne=Ee.width*se.scale*ve,nt=Ee.height*se.scale*Se,Ke=20*ve;let U=0,G=0;switch(se.position){case"top-left":U=Ke,G=Ke;break;case"top-center":U=(L.width-Ne)/2,G=Ke;break;case"top-right":U=L.width-Ne-Ke,G=Ke;break;case"center":U=(L.width-Ne)/2,G=(L.height-nt)/2;break;case"bottom-left":U=Ke,G=L.height-nt-Ke;break;case"bottom-center":U=(L.width-Ne)/2,G=L.height-nt-Ke;break;case"bottom-right":U=L.width-Ne-Ke,G=L.height-nt-Ke;break;case"custom":if(se.x!==void 0&&se.y!==void 0){const ie=se.x*ve,pe=L.height-se.y*Se;U=ie-Ne/2,G=pe-nt/2}break}return{left:`${U}px`,top:`${G}px`,width:`${Ne}px`,height:`${nt}px`}},ze=()=>{if(!b||!L.width||!L.height)return null;const se=z?.pages[p-1];if(!se)return null;const he=L.width/se.width,ve=L.height/se.height,Se=B.find(ie=>ie.name===b),Ee=Se?.stamp_image?$[Se.stamp_image]||{width:150,height:50}:{width:150,height:50},Ne=Ee.width*C*he,nt=Ee.height*C*ve,Ke=20*he;let U=0,G=0;switch(S){case"top-left":U=Ke,G=Ke;break;case"top-center":U=(L.width-Ne)/2,G=Ke;break;case"top-right":U=L.width-Ne-Ke,G=Ke;break;case"center":U=(L.width-Ne)/2,G=(L.height-nt)/2;break;case"bottom-left":U=Ke,G=L.height-nt-Ke;break;case"bottom-center":U=(L.width-Ne)/2,G=L.height-nt-Ke;break;case"bottom-right":U=L.width-Ne-Ke,G=L.height-nt-Ke;break;case"custom":return I?{left:`${I.x}px`,top:`${I.y}px`,width:`${Ne}px`,height:`${nt}px`,transform:"translate(-50%, -50%)"}:null}return{left:`${U}px`,top:`${G}px`,width:`${Ne}px`,height:`${nt}px`}};return F?g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg p-8",children:[g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),g.jsx("p",{className:"mt-4 text-gray-600",children:i("stamps.loading")})]})}):g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] flex flex-col",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[g.jsx("h2",{className:"text-xl font-semibold",children:i("stamps.addStampTitle")}),g.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full",children:g.jsx(ar,{className:"w-5 h-5"})})]}),g.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[g.jsxs("div",{className:"flex-1 p-4 overflow-auto bg-gray-100",children:[g.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[g.jsx(Ye,{variant:"outline",size:"sm",onClick:()=>y(se=>Math.max(1,se-1)),disabled:p<=1,children:g.jsx(Yz,{className:"w-4 h-4"})}),g.jsxs("span",{className:"text-sm",children:[" ",p,"  ",z?.page_count||1]}),g.jsx(Ye,{variant:"outline",size:"sm",onClick:()=>y(se=>Math.min(z?.page_count||1,se+1)),disabled:p>=(z?.page_count||1),children:g.jsx(QR,{className:"w-4 h-4"})})]}),g.jsxs("div",{ref:Q,className:"relative inline-block mx-auto cursor-crosshair",onClick:Ae,style:{userSelect:"none"},children:[g.jsx(_Y,{file:e,loading:g.jsx("div",{className:"p-8 text-center",children:i("stamps.loadingPdf")}),children:g.jsx(LY,{pageNumber:p,width:500,onLoadSuccess:ce,renderTextLayer:!1,renderAnnotationLayer:!1})}),je.map(se=>g.jsx("div",{className:"absolute pointer-events-none border-2 border-dashed border-blue-500 bg-blue-100/30 z-10",style:we(se),children:g.jsx("img",{src:Z[se.stamp_name]||te(se.stamp_image),alt:se.stamp_title,className:"w-full h-full object-contain opacity-70"})},se.id)),b&&ze()&&g.jsxs("div",{className:`absolute pointer-events-none border-2 border-dashed border-green-500 bg-green-100/30 z-20 ${S==="custom"?"stamp-preview-draggable cursor-move bg-yellow-50/90 rounded shadow-lg pointer-events-auto":""}`,style:ze(),ref:S==="custom"?me:void 0,onMouseDown:S==="custom"?xe:void 0,children:[S==="custom"&&g.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap pointer-events-none z-20",children:"   "}),(()=>{const se=B.find(ve=>ve.name===b);if(!se||!se.stamp_image)return g.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"  "});const he=Z[se.name]||te(se.stamp_image);return g.jsx("img",{src:he,alt:"Preview",className:`w-full h-full object-contain ${S==="custom"?"":"opacity-70"}`,onError:ve=>{console.error("Failed to load preview stamp image:",he);const Se=ve.target;Se.style.display="none";const Ee=Se.parentElement;if(Ee&&!Ee.querySelector(".error-placeholder")){const Ne=document.createElement("div");Ne.className="error-placeholder text-center text-gray-400 text-sm py-4",Ne.textContent=i("stamps.imageNotLoaded"),Ee.appendChild(Ne)}},onLoad:ve=>{const Se=ve.target;Se.style.display="block";const Ne=Se.parentElement?.querySelector(".error-placeholder");Ne&&Ne.remove()}})})()]})]})]}),g.jsxs("div",{className:"w-80 p-4 border-l flex flex-col",children:[g.jsx("h3",{className:"font-medium mb-4",children:i("stamps.settingsTitle")}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:i("stamps.stampLabel")}),g.jsxs(zn,{value:b,onValueChange:A,children:[g.jsx(Mn,{children:g.jsx(Un,{placeholder:i("stamps.selectStamp")})}),g.jsx(Nn,{children:B.map(se=>g.jsx(mn,{value:se.name,children:se.title},se.name))})]}),b&&g.jsx("div",{className:"mt-2 p-2 border rounded bg-gray-50 min-h-[80px] flex items-center justify-center relative",children:(()=>{const se=B.find(ve=>ve.name===b);if(!se)return g.jsx("div",{className:"text-center text-gray-400 text-sm py-4",children:i("stamps.stampNotFound")});const he=se.stamp_image?Z[se.name]||te(se.stamp_image):"";return he?g.jsxs(g.Fragment,{children:[g.jsx("img",{src:he,alt:"Preview",className:"max-w-full max-h-20 mx-auto",onError:ve=>{console.error("Failed to load stamp image:",he);const Se=ve.target;Se.style.display="none";const Ee=Se.parentElement;if(Ee&&!Ee.querySelector(".preview-placeholder")){const Ne=document.createElement("div");Ne.className="preview-placeholder text-center text-gray-400 text-sm py-4",Ne.textContent=i("stamps.imageNotLoaded"),Ee.appendChild(Ne)}},onLoad:ve=>{const Se=ve.target,Ne=Se.parentElement?.querySelector(".preview-placeholder");Ne&&Ne.remove(),Se.style.display="block"}},he),!he&&g.jsx("div",{className:"text-center text-gray-400 text-sm py-4",children:"URL  "})]}):g.jsx("div",{className:"text-center text-gray-400 text-sm py-4",children:"  "})})()})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:i("stamps.position")}),g.jsxs(zn,{value:S,onValueChange:E,children:[g.jsx(Mn,{children:g.jsx(Un,{})}),g.jsx(Nn,{children:p_.map(se=>g.jsx(mn,{value:se.value,children:i(`stamps.${se.key}`)},se.value))})]}),S==="custom"&&g.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[g.jsx(PU,{className:"w-3 h-3 inline mr-1"}),"  PDF      "]})]}),g.jsx("div",{className:"mb-4",children:g.jsxs("label",{className:"block text-sm font-medium mb-1",children:[": ",C.toFixed(1),"x (",Math.round(C*100),"%   )"]})}),g.jsxs("div",{className:"mb-4",children:[g.jsxs(Ye,{onClick:ye,disabled:!b||S==="custom"&&!I,className:"w-full",children:[g.jsx(JR,{className:"w-4 h-4 mr-2"})," "]}),S==="custom"&&!I&&g.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"     PDF"})]}),g.jsxs("div",{className:"flex-1 overflow-auto",children:[g.jsxs("h4",{className:"font-medium mb-2 text-sm",children:["  (",_.length,")"]}),_.length===0?g.jsx("p",{className:"text-sm text-gray-500",children:i("stamps.noStampsAdded")}):g.jsx("div",{className:"space-y-2",children:_.map(se=>g.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm",children:[g.jsxs("div",{children:[g.jsx("div",{className:"font-medium",children:se.stamp_title}),g.jsxs("div",{className:"text-xs text-gray-500",children:[". ",se.page_number+1," |"," ",(()=>{const he=p_.find(ve=>ve.value===se.position);return he?i(`stamps.${he.key}`):se.position})()]})]}),g.jsx("button",{onClick:()=>be(se.id),className:"p-1 hover:bg-red-100 rounded text-red-600",children:g.jsx(eD,{className:"w-4 h-4"})})]},se.id))})]})]})]}),g.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t",children:[g.jsx(Ye,{variant:"outline",onClick:t,children:i("common.cancel")}),g.jsx(Ye,{onClick:W,disabled:_.length===0||f.isPending,children:f.isPending?i("stamps.applying"):i("stamps.applyStamps")})]})]})})}function YY({document:n,loading:e}){const{t}=yn(),[s,i]=x.useState("document"),[a,o]=x.useState(null),[c,d]=x.useState(!1),[h,f]=x.useState(0),[p,y]=x.useState(!0);x.useEffect(()=>{(async()=>{if(!n){o(null),y(!1);return}try{y(!0);const M=await at.getDocument(n.name);o(M)}catch(M){console.error("Failed to load full document:",M),o(n),y(!1)}})()},[n?.name,n?.modified,n?.status,n?.director_approved,n?.director_rejected,n?.signatures?.length]),x.useEffect(()=>{a?.main_document&&y(!0)},[a?.main_document,h]);const b=()=>{if(!a)return[];const R=[];return a.executor&&R.push(a.executor),a.co_executors&&a.co_executors.forEach(M=>{M.user&&!R.includes(M.user)&&R.push(M.user)}),R},A=()=>!a||!a.signatures?[]:a.signatures.map(R=>R.user),S=()=>{const R=b(),M=A();if(R.length===0)return{signed:0,total:0,percentage:0};const k=M.length,N=R.length,P=k/N*100;return{signed:k,total:N,percentage:P}},E=()=>{if(!a)return[];const R=[];if(R.push({label:t("documentContent.statusCreatedByManager"),status:"completed",date:a.creation,icon:Vs}),a.reception_user&&a.reception_decision_date?R.push({label:t("documentContent.statusProcessedReception"),status:"completed",date:a.reception_decision_date,icon:cl}):R.push({label:t("documentContent.statusProcessingReception"),status:"pending",date:void 0,icon:cl}),a.reception_user&&a.reception_decision_date)if(a.director_approved)R.push({label:t("documentContent.statusApprovedDirector"),status:"completed",date:a.director_decision_date||void 0,icon:Wr});else{if(a.director_rejected)return R.push({label:t("documentContent.statusRejectedDirector"),status:"rejected",date:a.director_decision_date||void 0,icon:uv}),R;R.push({label:t("documentContent.statusPendingDirector"),status:"pending",date:void 0,icon:HU})}const M=b();if(M.length>0&&(a.director_approved||a.reception_user)){const k=S();a.status===""?R.push({label:t("documentContent.statusSigningExecutors",{signed:k.signed,total:k.total}),status:"completed",date:a.modified,icon:Ma}):a.status===" "?R.push({label:t("documentContent.statusSigningExecutors",{signed:k.signed,total:k.total}),status:"pending",date:void 0,icon:Ma}):R.push({label:t("documentContent.statusSigningExecutors",{signed:0,total:M.length}),status:"pending",date:void 0,icon:Ma})}return a.status===""?R.push({label:t("documentContent.statusCompleted"),status:"completed",date:a.modified,icon:iy}):R.push({label:t("documentContent.statusCompleted"),status:"pending",date:void 0,icon:iy}),R};if(e)return g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsx("div",{className:"text-muted-foreground",children:t("documentContent.loading")})});if(!n)return g.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[g.jsx(Vs,{className:"w-16 h-16 text-muted-foreground mb-4"}),g.jsx("h2",{className:"text-xl font-semibold mb-2",children:t("documentContent.noDocumentSelected")}),g.jsx("p",{className:"text-muted-foreground",children:t("documentContent.selectDocumentMessage")})]});const C=a||n,_=E(),T=S();return g.jsxs("div",{className:"h-full flex flex-col",children:[g.jsx("div",{className:"border-b px-6 pt-2",children:g.jsxs("div",{className:"flex gap-6",children:[g.jsx("button",{onClick:()=>i("document"),className:`relative pb-3 px-1 text-sm font-medium transition-colors ${s==="document"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"}`,children:t("documentContent.tabs.document")}),g.jsxs("button",{onClick:()=>i("signatures"),className:`relative pb-3 px-1 text-sm font-medium transition-colors ${s==="signatures"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"}`,children:[t("documentContent.tabs.signatures")," (",T.signed,"/",T.total,")"]}),g.jsx("button",{onClick:()=>i("history"),className:`relative pb-3 px-1 text-sm font-medium transition-colors ${s==="history"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"}`,children:t("documentContent.tabs.history")})]})}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar-blue",children:[s==="document"&&g.jsxs(g.Fragment,{children:[C.main_document?g.jsxs("div",{className:"bg-white border rounded-lg shadow-sm mb-6",children:[g.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[g.jsx("h3",{className:"text-sm font-medium",children:t("documentContent.documentPreview")}),C.main_document.toLowerCase().endsWith(".pdf")&&g.jsxs(Ye,{variant:"outline",size:"sm",onClick:()=>d(!0),children:[g.jsx(KU,{className:"w-4 h-4 mr-2"})," "]})]}),g.jsxs("div",{className:"w-full relative bg-gray-50",style:{height:"800px"},children:[g.jsx(vu,{children:p&&g.jsx(Xr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"absolute inset-0 z-10 flex flex-col items-center justify-center gap-4 overflow-hidden",children:g.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center gap-4 p-8",children:[g.jsx("div",{className:"w-full max-w-2xl bg-white rounded shadow-lg animate-pulse",style:{height:"280px"},children:g.jsxs("div",{className:"h-full flex flex-col p-6 gap-4",children:[g.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),g.jsxs("div",{className:"flex-1 flex flex-col gap-3 mt-4",children:[g.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-4/5"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]})]})}),g.jsx("div",{className:"w-full max-w-2xl bg-white rounded shadow-lg animate-pulse opacity-60",style:{height:"280px",marginTop:"-20px"},children:g.jsxs("div",{className:"h-full flex flex-col p-6 gap-4",children:[g.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/5"}),g.jsxs("div",{className:"flex-1 flex flex-col gap-3 mt-4",children:[g.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]})]})})]})})}),g.jsx("iframe",{src:`${C.main_document}?v=${h}#toolbar=0`,className:`w-full h-full border-0 ${p?"opacity-0":"opacity-100"} transition-opacity duration-300`,title:"Document Preview",onLoad:()=>{setTimeout(()=>{y(!1)},300)},onError:()=>{y(!1)}},`pdf-${h}-${C.main_document}`)]})]}):g.jsxs("div",{className:"bg-white border rounded-lg shadow-sm mb-6 p-12 text-center text-muted-foreground",children:[g.jsx(Vs,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),g.jsx("p",{children:t("documentContent.documentNotLoaded")})]}),C.attachments&&C.attachments.length>0&&g.jsxs("div",{className:"bg-white border rounded-lg shadow-sm mb-6",children:[g.jsx("div",{className:"p-4 border-b",children:g.jsx("h3",{className:"text-sm font-medium",children:t("documentContent.attachments")})}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{className:"bg-muted/50",children:g.jsxs("tr",{children:[g.jsx("th",{className:"text-left p-3 text-xs font-medium text-muted-foreground",children:""}),g.jsx("th",{className:"text-left p-3 text-xs font-medium text-muted-foreground",children:""}),g.jsx("th",{className:"text-right p-3 text-xs font-medium text-muted-foreground",children:""})]})}),g.jsx("tbody",{children:C.attachments.map((R,M)=>{const k=R.file_size?`${(R.file_size/1024).toFixed(2)} KB`:"-";return g.jsxs("tr",{className:"border-t hover:bg-muted/30",children:[g.jsx("td",{className:"p-3",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Vs,{className:"w-4 h-4 text-muted-foreground"}),g.jsx("span",{className:"text-sm",children:R.file_name||` ${M+1}`})]})}),g.jsx("td",{className:"p-3 text-sm text-muted-foreground",children:k}),g.jsx("td",{className:"p-3 text-right",children:g.jsx("a",{href:R.attachment,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline text-sm",children:""})})]},M)})})]})})]}),g.jsx("div",{className:"mt-8 border-t pt-6",children:g.jsx(iG,{doctype:"EDO Document",docname:C.name,refreshTrigger:C.modified?new Date(C.modified).getTime():void 0})})]}),s==="signatures"&&g.jsxs("div",{className:"space-y-6",children:[C.status!==""&&C.status_name!==""&&g.jsxs($a,{className:"border-2 shadow-md",children:[g.jsx(gl,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 border-b py-3",children:g.jsxs(yl,{className:"text-sm flex items-center gap-2",children:[g.jsx(iy,{className:"w-4 h-4 text-blue-600"})," "]})}),g.jsx(qa,{className:"pt-4 pb-4",children:g.jsx("div",{className:"space-y-4",children:_.map((R,M)=>{const k=R.icon;return g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsxs("div",{className:"flex flex-col items-center",children:[g.jsx("div",{className:`relative p-1.5 rounded-full transition-all ${R.status==="completed"?"bg-green-100 dark:bg-green-900/30 ring-2 ring-green-500":R.status==="rejected"?"bg-red-100 dark:bg-red-900/30 ring-2 ring-red-500":"bg-gray-100 dark:bg-gray-800 ring-2 ring-gray-300 dark:ring-gray-700"}`,children:g.jsx(k,{className:`w-4 h-4 ${R.status==="completed"?"text-green-600 dark:text-green-400":R.status==="rejected"?"text-red-600 dark:text-red-400":"text-gray-400"}`})}),M<_.length-1&&g.jsx("div",{className:`w-0.5 h-8 mt-1 transition-all ${R.status==="completed"?"bg-gradient-to-b from-green-500 to-green-300":R.status==="rejected"?"bg-gradient-to-b from-red-500 to-red-300":"bg-gray-300 dark:bg-gray-700"}`})]}),g.jsxs("div",{className:"flex-1 pt-0.5",children:[g.jsx("p",{className:`font-medium text-sm transition-colors ${R.status==="completed"?"text-green-700 dark:text-green-400":R.status==="rejected"?"text-red-700 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:R.label}),R.date&&g.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5 flex items-center gap-1",children:[g.jsx(cl,{className:"w-3 h-3"}),new Date(R.date).toLocaleString("ru-RU")]})]})]},M)})})})]}),g.jsxs($a,{className:"border-2 shadow-lg",children:[g.jsx(gl,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 border-b",children:g.jsxs(yl,{className:"text-base flex items-center gap-2",children:[g.jsx(Ma,{className:"w-5 h-5 text-blue-600"})," "]})}),g.jsxs(qa,{className:"pt-6",children:[T.total>0?g.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 rounded-lg border-2 border-blue-200 dark:border-blue-800",children:[g.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[g.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:" "}),g.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:[T.signed,"  ",T.total]})]}),g.jsx(vN,{value:T.percentage,className:"h-2"})]}):g.jsx("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-800",children:g.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"     "})}),g.jsx("div",{className:"space-y-3",children:b().length>0?b().map(R=>{const M=C.signatures?.find(N=>N.user===R),k=C.executor===R?{name:C.executor_full_name||R,image:C.executor_image}:C.co_executors?.find(N=>N.user===R)?{name:C.co_executors.find(N=>N.user===R)?.user_full_name||R,image:C.co_executors.find(N=>N.user===R)?.user_image}:{name:R,image:void 0};return g.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-lg border-2 transition-all ${M?"bg-green-50 dark:bg-green-950/30 border-green-200 dark:border-green-800 shadow-sm":"bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-800"}`,children:[k.image?g.jsx("img",{src:k.image,alt:k.name,className:"w-12 h-12 rounded-full ring-2 ring-offset-2 ring-blue-500"}):g.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-white font-bold text-base ring-2 ring-offset-2 ring-blue-500",children:k.name.charAt(0).toUpperCase()}),g.jsxs("div",{className:"flex-1",children:[g.jsx("p",{className:"font-semibold text-sm text-gray-800 dark:text-gray-200",children:k.name}),M?g.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[g.jsxs("p",{className:"flex items-center gap-1",children:[g.jsx(Wr,{className:"w-3 h-3 text-green-600"}),":"," ",M.signed_at?new Date(M.signed_at).toLocaleString("ru-RU"):""]}),M.comment&&g.jsx("p",{className:"mt-1 p-2 bg-white dark:bg-gray-800 rounded text-gray-700 dark:text-gray-300 text-xs",children:M.comment})]}):g.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:" "})]}),M?g.jsx("div",{className:"p-1.5 bg-green-100 dark:bg-green-900/50 rounded-full",children:g.jsx(Wr,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}):g.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center",children:g.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-300 dark:bg-gray-600"})})]},R)}):g.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[g.jsx(Ma,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),g.jsx("p",{className:"text-sm",children:t("documentContent.noExecutors")})]})})]})]})]}),s==="history"&&g.jsxs($a,{className:"border-2 shadow-lg",children:[g.jsx(gl,{className:"bg-gradient-to-r from-slate-50 to-gray-50 dark:from-slate-900 dark:to-gray-900 border-b",children:g.jsxs(yl,{className:"text-base flex items-center gap-2",children:[g.jsx(gU,{className:"w-5 h-5 text-gray-600"})," "]})}),g.jsx(qa,{className:"pt-6",children:g.jsx("div",{className:"space-y-4",children:_.map((R,M)=>{const k=R.icon;return g.jsxs("div",{className:"flex items-start gap-3 pb-4 border-b last:border-0 last:pb-0",children:[g.jsx("div",{className:`p-1.5 rounded-full ${R.status==="completed"?"bg-green-100 dark:bg-green-900/30":R.status==="rejected"?"bg-red-100 dark:bg-red-900/30":"bg-gray-100 dark:bg-gray-800"}`,children:g.jsx(k,{className:`w-4 h-4 ${R.status==="completed"?"text-green-600 dark:text-green-400":R.status==="rejected"?"text-red-600 dark:text-red-400":"text-gray-400"}`})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("p",{className:`font-medium text-sm ${R.status==="completed"?"text-green-700 dark:text-green-400":R.status==="rejected"?"text-red-700 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:R.label}),R.date&&g.jsxs("p",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-1",children:[g.jsx(cl,{className:"w-3 h-3"}),new Date(R.date).toLocaleString("ru-RU")]})]})]},M)})})})]})]}),c&&C.main_document&&g.jsx(KY,{documentName:C.name,pdfUrl:C.main_document,onClose:()=>d(!1),onStampApplied:async()=>{if(d(!1),n)try{await new Promise(M=>setTimeout(M,500));const R=await at.getDocument(n.name);o(R),f(M=>M+1),y(!0),console.log("Document reloaded after stamp application:",R),console.log("New main_document:",R.main_document)}catch(R){console.error("Failed to reload document after stamp application:",R),alert(t("documentContent.stampsUpdateError"))}}})]})}(function(){var n=window.Base64,e="2.1.4",t;typeof module<"u"&&module.exports&&(t=require("buffer").Buffer);var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=(function(N){for(var P={},j=0,I=N.length;j<I;j++)P[N.charAt(j)]=j;return P})(s),a=String.fromCharCode,o=function(N){if(N.length<2){var P=N.charCodeAt(0);return P<128?N:P<2048?a(192|P>>>6)+a(128|P&63):a(224|P>>>12&15)+a(128|P>>>6&63)+a(128|P&63)}else{var P=65536+(N.charCodeAt(0)-55296)*1024+(N.charCodeAt(1)-56320);return a(240|P>>>18&7)+a(128|P>>>12&63)+a(128|P>>>6&63)+a(128|P&63)}},c=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,d=function(N){return N.replace(c,o)},h=function(N){var P=N.charCodeAt(0)<<16|(N.length>1?N.charCodeAt(1):0)<<8|(N.length>2?N.charCodeAt(2):0),j=[0,2,1][N.length%3],I=[s.charAt(P>>>18),s.charAt(P>>>12&63),j>=2?"=":s.charAt(P>>>6&63),j>=1?"=":s.charAt(P&63)];return I.join("")},f=window.btoa?function(N){return window.btoa(N)}:function(N){return N.replace(/[\s\S]{1,3}/g,h)},p=t?function(N){return new t(N).toString("base64")}:function(N){return f(d(N))},y=function(N,P){return P?p(N).replace(/[+\/]/g,function(j){return j=="+"?"-":"_"}).replace(/=/g,""):p(N)},b=function(N){return y(N,!0)},A=new RegExp(["[-][-]","[-][-]{2}","[-][-]{3}"].join("|"),"g"),S=function(N){switch(N.length){case 3:return a((15&N.charCodeAt(0))<<12|(63&N.charCodeAt(1))<<6|63&N.charCodeAt(2));case 4:var P=(7&N.charCodeAt(0))<<18|(63&N.charCodeAt(1))<<12|(63&N.charCodeAt(2))<<6|63&N.charCodeAt(3),j=P-65536;return a((j>>>10)+55296)+a((j&1023)+56320);default:return a((31&N.charCodeAt(0))<<6|63&N.charCodeAt(1))}},E=function(N){return N.replace(A,S)},C=function(N){var P=N.length,j=(P>0?i[N.charAt(0)]<<18:0)|(P>1?i[N.charAt(1)]<<12:0)|(P>2?i[N.charAt(2)]<<6:0)|(P>3?i[N.charAt(3)]:0),I=[a(j>>>16),a(j>>>8&255),a(j&255)],H=P%4;return I.length-=[0,0,2,1][H],I.join("")},_=window.atob?function(N){return window.atob(N)}:function(N){return N.replace(/[\s\S]{1,4}/g,C)},T=t?function(N){return new t(N,"base64").toString()}:function(N){return E(_(N))},R=function(N){return T(N.replace(/[-_]/g,function(P){return P=="-"?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},M=function(){var N=window.Base64;return window.Base64=n,N};if(window.Base64={atob:_,btoa:f,btou:E,decode:R,encode:y,encodeURI:b,fromBase64:R,noConflict:M,toBase64:y,utob:d,VERSION:e},typeof Object.defineProperty=="function"){var k=function(N){return{configurable:!0,enumerable:!1,value:N,writable:!0}};window.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",k(function(){return R(this)})),Object.defineProperty(String.prototype,"toBase64",k(function(N){return y(this,N)})),Object.defineProperty(String.prototype,"toBase64URI",k(function(){return y(this,!0)}))}}})();const tr={apidoc:function(n,e){if(!window.WebSocket){e&&e();return}var t;try{t=new WebSocket(this.URL)}catch(s){e(s)}t.onerror=function(s){e&&e(s)},t.onmessage=function(s){var i=JSON.parse(s.data);t.close(),n(s,i)},t.onopen=function(){var s={name:"apidoc"};t.send(JSON.stringify(s))}},apikey:function(n,e,t){if(!window.WebSocket){t&&t();return}var s;try{s=new WebSocket(this.URL)}catch(i){t(i)}s.onerror=function(i){t&&t(i)},s.onmessage=function(i){var a=JSON.parse(i.data);s.close(),e&&e(i,a)},s.onopen=function(){var i={arguments:n,name:"apikey"};s.send(JSON.stringify(i))}},callFunction:function(n,e,t){if(!window.WebSocket){t&&t();return}var s;try{s=new WebSocket(this.URL)}catch(i){t(i)}s.onerror=function(i){t&&t(i)},s.onmessage=function(i){var a=JSON.parse(i.data);s.close(),e(i,a)},s.onopen=function(){s.send(JSON.stringify(n))}},URL:(window.location.protocol.toLowerCase()==="https:"?"wss://127.0.0.1:64443":"ws://127.0.0.1:64646")+"/service/cryptapi",version:function(n,e){if(!window.WebSocket){e&&e();return}var t;try{t=new WebSocket(this.URL)}catch(s){e(s)}t.onerror=function(s){e&&e(s)},t.onmessage=function(s){var i=JSON.parse(s.data);t.close(),n(s,i)},t.onopen=function(){var s={name:"version"};t.send(JSON.stringify(s))}}},Nb={};Nb.encode=function(n){let e=n.replace(/[\u0080-\u07ff]/g,function(t){const s=t.charCodeAt(0);return String.fromCharCode(192|s>>6,128|s&63)});return e=e.replace(/[\u0800-\uffff]/g,function(t){const s=t.charCodeAt(0);return String.fromCharCode(224|s>>12,128|s>>6&63,128|s&63)}),e};Nb.decode=function(n){let e=n.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(t){const s=(t.charCodeAt(0)&15)<<12|(t.charCodeAt(1)&63)<<6|t.charCodeAt(2)&63;return String.fromCharCode(s)});return e=e.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(t){const s=(t.charCodeAt(0)&31)<<6|t.charCodeAt(1)&63;return String.fromCharCode(s)}),e};function XY(){this.a_table="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D",this.b_table=this.a_table.split(" ").map(function(n){return parseInt(n,16)}),this.calc=function(n){let e=-1;for(let s=0,i=n.length;s<i;s++)e=e>>>8^this.b_table[(e^n.charCodeAt(s))&255];return((e^-1)>>>0).toString(16)},this.calcHex=function(n){let e=-1;for(let s=0,i=n.length;s<i;s+=2)e=e>>>8^this.b_table[(e^parseInt(n.substring(s,s+2),16))&255];const t=(e^-1)>>>0;return this.pad(t.toString(16),8)},this.pad=function(n,e,t){return t=t||"0",n=n+"",n.length>=e?n:new Array(e-n.length+1).join(t)+n}}function WY(n){this.site_id=n,this.makeQRCode=function(e,t){if(!this.site_id||!e||!t)return;const i=new QY().gosthash(t);let a=this.site_id+e+i;const c=new XY().calcHex(a);return a+=c,[i,a]}}function QY(){this.rol=function(n,e){return n<<(e&31)|n>>>32-(e&31)},this.ch2hex=function(n){const e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return e[n>>>4&15]+e[n&15]},this.str2bytes=function(n){const e=Array(n.length);for(let t=0;t<n.length;++t)e[t]=n.charCodeAt(t)&255;return e},this.hexStr2bytes=function(n){const e=n.toLowerCase(),t="0123456789abcdef",s=Array(n.length/2);for(let i=0,a=0;i<e.length;i+=2,++a)s[a]=((t.indexOf(e.charAt(i))&15)<<4)+(t.indexOf(e.charAt(i+1))&15);return s},this.toHex=function(n){let e="";for(let t=0;t<n.length;t++)e+=""+n.charCodeAt(t).toString(16);return e},this.hash=new Array(8),this.sum=new Array(8),this.message=new Array(32),this.length=0,this.r=0,this.l=0,this.gost_sbox=new Array(4);for(let n=0;n<4;n++)this.gost_sbox[n]=new Array(256);this.sbox=[[10,4,5,6,8,1,3,7,13,12,14,0,9,2,11,15],[5,15,4,0,2,13,11,9,1,7,6,3,12,14,10,8],[7,15,12,14,9,4,1,0,3,11,5,2,6,10,8,13],[4,10,7,12,0,15,2,8,14,1,6,5,13,11,9,3],[7,6,4,11,9,12,2,10,1,8,0,14,15,13,3,5],[7,6,2,4,13,9,15,0,10,1,5,11,8,14,12,3],[13,14,4,1,7,0,5,10,3,12,8,15,6,2,9,11],[1,3,10,9,5,11,4,15,8,6,7,14,13,0,2,12]],this.gost_init=function(){for(let n=0;n<8;n++)this.hash[n]=0,this.sum[n]=0,this.message[4*n]=0,this.message[4*n+1]=0,this.message[4*n+2]=0,this.message[4*n+3]=0;this.length=0},this.GOST_ENCRYPT_ROUND=function(n,e){let t=n+this.r;this.l^=this.gost_sbox[0][t&255]^this.gost_sbox[1][t>>>8&255]^this.gost_sbox[2][t>>>16&255]^this.gost_sbox[3][t>>>24&255],t=e+this.l,this.r^=this.gost_sbox[0][t&255]^this.gost_sbox[1][t>>>8&255]^this.gost_sbox[2][t>>>16&255]^this.gost_sbox[3][t>>>24&255]},this.GOST_ENCRYPT=function(n,e,t){return this.r=t[n],this.l=t[n+1],this.GOST_ENCRYPT_ROUND(e[0],e[1]),this.GOST_ENCRYPT_ROUND(e[2],e[3]),this.GOST_ENCRYPT_ROUND(e[4],e[5]),this.GOST_ENCRYPT_ROUND(e[6],e[7]),this.GOST_ENCRYPT_ROUND(e[0],e[1]),this.GOST_ENCRYPT_ROUND(e[2],e[3]),this.GOST_ENCRYPT_ROUND(e[4],e[5]),this.GOST_ENCRYPT_ROUND(e[6],e[7]),this.GOST_ENCRYPT_ROUND(e[0],e[1]),this.GOST_ENCRYPT_ROUND(e[2],e[3]),this.GOST_ENCRYPT_ROUND(e[4],e[5]),this.GOST_ENCRYPT_ROUND(e[6],e[7]),this.GOST_ENCRYPT_ROUND(e[7],e[6]),this.GOST_ENCRYPT_ROUND(e[5],e[4]),this.GOST_ENCRYPT_ROUND(e[3],e[2]),this.GOST_ENCRYPT_ROUND(e[1],e[0]),[this.l,this.r]},this.gost_block_compress=function(n){const e=new Array(8),t=new Array(8),s=new Array(8),i=new Array(8),a=new Array(8);for(var o=0;o<8;o++)t[o]=this.hash[o],s[o]=n[o];i[0]=t[0]^s[0],i[1]=t[1]^s[1],i[2]=t[2]^s[2],i[3]=t[3]^s[3],i[4]=t[4]^s[4],i[5]=t[5]^s[5],i[6]=t[6]^s[6],i[7]=t[7]^s[7];for(var o=0;;o+=2){e[0]=i[0]&255|(i[2]&255)<<8|(i[4]&255)<<16|(i[6]&255)<<24,e[1]=(i[0]&65280)>>>8|i[2]&65280|(i[4]&65280)<<8|(i[6]&65280)<<16,e[2]=(i[0]&16711680)>>>16|(i[2]&16711680)>>>8|i[4]&16711680|(i[6]&16711680)<<8,e[3]=(i[0]&4278190080)>>>24|(i[2]&4278190080)>>>16|(i[4]&4278190080)>>>8|i[6]&4278190080,e[4]=i[1]&255|(i[3]&255)<<8|(i[5]&255)<<16|(i[7]&255)<<24,e[5]=(i[1]&65280)>>>8|i[3]&65280|(i[5]&65280)<<8|(i[7]&65280)<<16,e[6]=(i[1]&16711680)>>>16|(i[3]&16711680)>>>8|i[5]&16711680|(i[7]&16711680)<<8,e[7]=(i[1]&4278190080)>>>24|(i[3]&4278190080)>>>16|(i[5]&4278190080)>>>8|i[7]&4278190080;const d=this.GOST_ENCRYPT(o,e,this.hash);if(a[o]=d[0],a[o+1]=d[1],o==0)i[0]=t[2]^s[4],i[1]=t[3]^s[5],i[2]=t[4]^s[6],i[3]=t[5]^s[7],i[4]=t[6]^(s[0]^=s[2]),i[5]=t[7]^(s[1]^=s[3]),i[6]=(t[0]^=t[2])^(s[2]^=s[4]),i[7]=(t[1]^=t[3])^(s[3]^=s[5]);else if((o&2)!=0){if(o==6)break;t[2]^=t[4]^255,t[3]^=t[5]^4278255615,t[4]^=4278255360,t[5]^=4278255360,t[6]^=16711935,t[7]^=16711935,t[0]^=16776960,t[1]^=4278190335,i[0]=t[4]^s[0],i[2]=t[6]^s[2],i[4]=t[0]^(s[4]^=s[6]),i[6]=t[2]^(s[6]^=s[0]),i[1]=t[5]^s[1],i[3]=t[7]^s[3],i[5]=t[1]^(s[5]^=s[7]),i[7]=t[3]^(s[7]^=s[1])}else i[0]=t[6]^s[4],i[1]=t[7]^s[5],i[2]=t[0]^s[6],i[3]=t[1]^s[7],i[4]=t[2]^(s[0]^=s[2]),i[5]=t[3]^(s[1]^=s[3]),i[6]=(t[4]^=t[6])^(s[2]^=s[4]),i[7]=(t[5]^=t[7])^(s[3]^=s[5])}t[0]=n[0]^a[6],t[1]=n[1]^a[7],t[2]=n[2]^a[0]<<16^a[0]>>>16^a[0]&65535^a[1]&65535^a[1]>>>16^a[2]<<16^a[6]^a[6]<<16^a[7]&4294901760^a[7]>>>16,t[3]=n[3]^a[0]&65535^a[0]<<16^a[1]&65535^a[1]<<16^a[1]>>>16^a[2]<<16^a[2]>>>16^a[3]<<16^a[6]^a[6]<<16^a[6]>>>16^a[7]&65535^a[7]<<16^a[7]>>>16,t[4]=n[4]^a[0]&4294901760^a[0]<<16^a[0]>>>16^a[1]&4294901760^a[1]>>>16^a[2]<<16^a[2]>>>16^a[3]<<16^a[3]>>>16^a[4]<<16^a[6]<<16^a[6]>>>16^a[7]&65535^a[7]<<16^a[7]>>>16,t[5]=n[5]^a[0]<<16^a[0]>>>16^a[0]&4294901760^a[1]&65535^a[2]^a[2]>>>16^a[3]<<16^a[3]>>>16^a[4]<<16^a[4]>>>16^a[5]<<16^a[6]<<16^a[6]>>>16^a[7]&4294901760^a[7]<<16^a[7]>>>16,t[6]=n[6]^a[0]^a[1]>>>16^a[2]<<16^a[3]^a[3]>>>16^a[4]<<16^a[4]>>>16^a[5]<<16^a[5]>>>16^a[6]^a[6]<<16^a[6]>>>16^a[7]<<16,t[7]=n[7]^a[0]&4294901760^a[0]<<16^a[1]&65535^a[1]<<16^a[2]>>>16^a[3]<<16^a[4]^a[4]>>>16^a[5]<<16^a[5]>>>16^a[6]>>>16^a[7]&65535^a[7]<<16^a[7]>>>16,s[0]=this.hash[0]^t[1]<<16^t[0]>>>16,s[1]=this.hash[1]^t[2]<<16^t[1]>>>16,s[2]=this.hash[2]^t[3]<<16^t[2]>>>16,s[3]=this.hash[3]^t[4]<<16^t[3]>>>16,s[4]=this.hash[4]^t[5]<<16^t[4]>>>16,s[5]=this.hash[5]^t[6]<<16^t[5]>>>16,s[6]=this.hash[6]^t[7]<<16^t[6]>>>16,s[7]=this.hash[7]^t[0]&4294901760^t[0]<<16^t[1]&4294901760^t[1]<<16^t[6]<<16^t[7]&4294901760^t[7]>>>16,this.hash[0]=s[0]&4294901760^s[0]<<16^s[0]>>>16^s[1]>>>16^s[1]&4294901760^s[2]<<16^s[3]>>>16^s[4]<<16^s[5]>>>16^s[5]^s[6]>>>16^s[7]<<16^s[7]>>>16^s[7]&65535,this.hash[1]=s[0]<<16^s[0]>>>16^s[0]&4294901760^s[1]&65535^s[2]^s[2]>>>16^s[3]<<16^s[4]>>>16^s[5]<<16^s[6]<<16^s[6]^s[7]&4294901760^s[7]>>>16,this.hash[2]=s[0]&65535^s[0]<<16^s[1]<<16^s[1]>>>16^s[1]&4294901760^s[2]<<16^s[3]>>>16^s[3]^s[4]<<16^s[5]>>>16^s[6]^s[6]>>>16^s[7]&65535^s[7]<<16^s[7]>>>16,this.hash[3]=s[0]<<16^s[0]>>>16^s[0]&4294901760^s[1]&4294901760^s[1]>>>16^s[2]<<16^s[2]>>>16^s[2]^s[3]<<16^s[4]>>>16^s[4]^s[5]<<16^s[6]<<16^s[7]&65535^s[7]>>>16,this.hash[4]=s[0]>>>16^s[1]<<16^s[1]^s[2]>>>16^s[2]^s[3]<<16^s[3]>>>16^s[3]^s[4]<<16^s[5]>>>16^s[5]^s[6]<<16^s[6]>>>16^s[7]<<16,this.hash[5]=s[0]<<16^s[0]&4294901760^s[1]<<16^s[1]>>>16^s[1]&4294901760^s[2]<<16^s[2]^s[3]>>>16^s[3]^s[4]<<16^s[4]>>>16^s[4]^s[5]<<16^s[6]<<16^s[6]>>>16^s[6]^s[7]<<16^s[7]>>>16^s[7]&4294901760,this.hash[6]=s[0]^s[2]^s[2]>>>16^s[3]^s[3]<<16^s[4]^s[4]>>>16^s[5]<<16^s[5]>>>16^s[5]^s[6]<<16^s[6]>>>16^s[6]^s[7]<<16^s[7],this.hash[7]=s[0]^s[0]>>>16^s[1]<<16^s[1]>>>16^s[2]<<16^s[3]>>>16^s[3]^s[4]<<16^s[4]^s[5]>>>16^s[5]^s[6]<<16^s[6]>>>16^s[7]<<16^s[7]},this.gost_compute_sum_and_hash=function(n){let e=0,t=0;for(let s=0;s<8;s++)t=this.sum[s]>>>24,this.sum[s]=(this.sum[s]&16777215)+(n[s]&16777215)+e,t=t+(n[s]>>>24)+(this.sum[s]>>>24),this.sum[s]=this.sum[s]&16777215|(t&255)<<24,e=(t&256)!=0?1:0;this.gost_block_compress(n)},this.gost_update=function(n,e){const t=this.length&31;let s=n,i=0,a=e;const o=new Array(8);if(this.length+=a,t!=0){const d=32-t;if(a<d){for(var c=0;c<a;c++)this.message[t+c]=s[c];return}else for(var c=0;c<d;c++)this.message[t+c]=s[c];for(var c=0;c<8;c++)o[c]=this.message[4*c]&255|(this.message[4*c+1]&255)<<8|(this.message[4*c+2]&255)<<16|(this.message[4*c+3]&255)<<24;this.gost_compute_sum_and_hash(o),i+=d,a-=d}for(;a>=32;){for(var c=0;c<8;c++)this.message[4*c]=s[i+4*c],this.message[4*c+1]=s[i+4*c+1],this.message[4*c+2]=s[i+4*c+2],this.message[4*c+3]=s[i+4*c+3],o[c]=this.message[4*c]&255|(this.message[4*c+1]&255)<<8|(this.message[4*c+2]&255)<<16|(this.message[4*c+3]&255)<<24;this.gost_compute_sum_and_hash(o),i+=32,a-=32}if(a!=0)for(var c=0;c<a;c++)this.message[c]=s[i+c]},this.gost_final=function(){const n=this.length&31,e=new Array(8);if(n>0){for(var t=0;t<32-n;t++)this.message[n+t]=0;for(var t=0;t<8;t++)e[t]=this.message[4*t]&255|(this.message[4*t+1]&255)<<8|(this.message[4*t+2]&255)<<16|(this.message[4*t+3]&255)<<24;this.gost_compute_sum_and_hash(e)}e[0]=this.length<<3,e[1]=this.length>>>29;for(var t=2;t<8;t++)e[t]=0;this.gost_block_compress(e),this.gost_block_compress(this.sum)},this.gost_init_table=function(){let n,e,t,s;for(let i=0,a=0;i<16;i++){n=this.sbox[1][i]<<15,e=this.sbox[3][i]<<23,t=this.rol(this.sbox[5][i],31),s=this.sbox[7][i]<<7;for(let o=0;o<16;o++,a++)this.gost_sbox[0][a]=n|this.sbox[0][o]<<11,this.gost_sbox[1][a]=e|this.sbox[2][o]<<19,this.gost_sbox[2][a]=t|this.sbox[4][o]<<27,this.gost_sbox[3][a]=s|this.sbox[6][o]<<3}},this.gosthash=function(n){const e=new Array(8),t=this.str2bytes(Nb.encode(n));this.gost_init(),this.gost_init_table(),this.gost_update(t,t.length),this.gost_final();for(let s=0;s<8;s++)e[s]=this.ch2hex(this.hash[s]&255)+this.ch2hex(this.hash[s]>>>8&255)+this.ch2hex(this.hash[s]>>>16&255)+this.ch2hex(this.hash[s]>>>24&255);return e.join("")},this.gosthashHex=function(n){const e=new Array(8),t=this.hexStr2bytes(n);this.gost_init(),this.gost_init_table(),this.gost_update(t,t.length),this.gost_final();for(let s=0;s<8;s++)e[s]=this.ch2hex(this.hash[s]&255)+this.ch2hex(this.hash[s]>>>8&255)+this.ch2hex(this.hash[s]>>>16&255)+this.ch2hex(this.hash[s]>>>24&255);return e.join("")}}const ZY={},Ih={callDeeplink:function(n){window.open("eimzo://sign?qc="+n)},checkUserAgent:()=>{const n=navigator.userAgent.toLowerCase();return/android|webos|iphone|ipad|ipod|blackberry|windows phone|opera mini|iemobile|mobile/i.test(n)},hash:function(n,e,t){return new WY(n).makeQRCode(e,t)},parseValidDate:n=>new Date(n.split(" ")[0].split(".").join(",")),timestamper:(n,e)=>{ZY.getTimestamp(n).then(({data:t})=>{t&&e(t.pkcs7b64)}).catch(t=>{})}},JY=["localhost","96D0C1491615C82B9A54D9989779DF825B690748224C2B04F500F370D51827CE2644D8D4A82C18184D73AB8530BB8ED537269603F61DB0D03D2104ABF789970B","127.0.0.1","A7BCFA5D490B351BE0754130DF03A068F855DB4333D43921125B9CF2670EF6A40370C646B90401955E1F7BC9CDBF59CE0B2C5467D820BE189C845D0B79CFC96F","null","E0A205EC4E7B78BBB56AFF83A733A1BB9FD39D562E67978CC5E7D73B0951DB1954595A20672A63332535E13CC6EC1E1FC8857BB09E0855D7E76E411B6FA16E9D"];let _y=!1;const eX=()=>new Promise(n=>{if(_y){console.log("[E-IMZO] Already initialized"),n();return}console.log("[E-IMZO] Initializing...");try{tr.apikey(JY,(e,t)=>{t.success?(_y=!0,console.log("[E-IMZO] Initialized successfully"),n()):(console.warn("[E-IMZO] Init response:",t),_y=!0,n())},e=>{console.warn("[E-IMZO] Init error (plugin may not be running):",e),n()})}catch(e){console.warn("[E-IMZO] Init exception:",e),n()}}),tX=n=>{const e={};return n&&n.split(",").forEach(t=>{const s=t.indexOf("=");if(s>0){const i=t.substring(0,s).trim().toLowerCase(),a=t.substring(s+1).trim();e[i]=a}}),e},nX=async()=>((await no.getAllCertificatesPfx())?.certificates||[]).map(t=>{const s=tX(t.alias);return{...t,inn:s["1.2.860.3.16.1.2"]||s.uid||"",serialNumber:t.serialNumber||t.alias,parsedAlias:s,type:"pfx"}}),no={getAllCertificatesCertkey:()=>new Promise((n,e)=>{tr.callFunction({name:"list_all_certificates",plugin:"certkey"},(t,s)=>{n(s)},t=>{e(t)})}),getAllCertificatesPfx:()=>new Promise((n,e)=>{tr.callFunction({name:"list_all_certificates",plugin:"pfx"},(t,s)=>{n(s)},t=>{e(t)})}),loadPfxKey:(n,e,t,s=!0)=>new Promise((i,a)=>{tr.callFunction({arguments:[n.disk,n.path,n.name,n.alias],name:"load_key",plugin:"pfx"},(o,c)=>{if(c.success){const d=c.keyId;window.sessionStorage.setItem(n.serialNumber,d),(t==="attach"?no.postLoadKeyAttach:no.postLoadKey)(d,e,s).then(f=>{i(f)},f=>{a(f)})}else a(c.reason)},o=>{a(o)})}),postLoadKey:(n,e,t)=>new Promise((s,i)=>{const a=btoa(unescape(encodeURIComponent(e)));tr.callFunction({arguments:[a,n,"no"],name:"create_pkcs7",plugin:"pkcs7"},(o,c)=>{if(c.success){const d=c.pkcs7_64;t?Ih.timestamper&&Ih.timestamper(d,h=>{s(h)}):s(d)}else i(c.reason)})}),postLoadKeyAttach:(n,e)=>new Promise((t,s)=>{tr.callFunction({arguments:[e,n],name:"append_pkcs7_attached",plugin:"pkcs7"},(i,a)=>{if(a.success){const o=a.pkcs7_64;Ih.timestamper?Ih.timestamper(o,c=>{t(c)}):t(o)}else s(a.reason)},i=>{s(i)})}),preLoadKey:n=>new Promise((e,t)=>{tr.callFunction({arguments:[n.disk,n.path,n.name,n.serialNumber],name:"load_key",plugin:"certkey"},(s,i)=>{i.success?e(i.keyId):t(i.reason)})}),loadKey:n=>new Promise((e,t)=>{tr.callFunction({plugin:"pfx",name:"load_key",arguments:[n.disk,n.path,n.name,n.alias]},(s,i)=>{i.success?e(i.keyId):t(new Error(i.reason||"   "))},s=>{t(new Error(s?.message||"   E-IMZO"))})}),createPkcs7:(n,e,t="no")=>new Promise((s,i)=>{tr.callFunction({plugin:"pkcs7",name:"create_pkcs7",arguments:[e,n,t]},(a,o)=>{o.success?s(o.pkcs7_64):i(new Error(o.reason||"   "))},a=>{i(new Error(a?.message||"  "))})})},sX=async(n,e)=>{const t=await no.loadKey(n);return await no.createPkcs7(t,e,"no")};function iX({open:n,onOpenChange:e,onKeySelected:t,useFiskaFlow:s=!1,documentName:i,onDocumentSigned:a}){const[o,c]=x.useState([]),[d,h]=x.useState(!1),[f,p]=x.useState(null),[y,b]=x.useState(null),[A,S]=x.useState(!1),E=x.useRef(null),{showToast:C}=K7(),{t:_}=yn();x.useEffect(()=>{n?T():(c([]),b(null),p(null),S(!1))},[n]),x.useEffect(()=>{const j=I=>{E.current&&!E.current.contains(I.target)&&S(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const T=async()=>{h(!0),p(null);try{const j=await nX();if(j.length===0){p(_("eImzo.keysNotFound")),h(!1);return}c(j),j.length>0&&b(0)}catch(j){console.error("  :",j),p(j instanceof Error?j.message:_("eImzo.loadKeysError"))}finally{h(!1)}},R=async()=>{if(!(y===null||!o[y])){if(s){t(o[y]),e(!1);return}if(!i){console.error("[E-IMZO] documentName is required"),p(_("eImzo.documentNotSpecified"));return}h(!0),p(null);try{const j=o[y],I=await at.getDocument(i);if(!I.main_document)throw new Error(_("eImzo.noPdfFile"));const H=await fetch(I.main_document);if(!H.ok)throw new Error(_("eImzo.loadPdfError"));const K=await(await H.blob()).arrayBuffer(),Z=btoa(new Uint8Array(K).reduce((z,Q)=>z+String.fromCharCode(Q),"")),oe=await no.loadKey(j),F=await no.createPkcs7(oe,Z,"no");console.log("[E-IMZO] PKCS7:",F);const B=await at.signDocumentWithPkcs7(i,F);console.log("[E-IMZO]  :",B),C({title:_("eImzo.signSuccess"),message:_("eImzo.signSuccessMessage"),type:"success"}),e(!1),a&&a()}catch(j){console.error("[E-IMZO]  :",j);let I=_("eImzo.signError"),H="our_side";if(j instanceof Error){I=j.message;const K=j.structuredError;K&&(H=K.source||"our_side",I=K.message||I)}const $=_(H==="lexdoc"?"eImzo.errorSideLexdoc":"eImzo.errorSideOur");C({title:`${_("eImzo.errorSidePrefix")} ${$}`,message:I,type:"error",duration:8e3})}finally{h(!1)}}},M=j=>{if(!j)return"";const I=j.split(" ")[0].split(".");return I.length===3?`${I[2]}.${I[1]}.${I[0]}`:j},k=j=>{const I=j.parsedAlias||{};return{fio:I.cn?.toUpperCase()||_("eImzo.unknownKey"),serialNumber:I.serialnumber||"",pinfl:I["1.2.860.3.16.1.2"]||"",validFrom:M(I.validfrom),validTo:M(I.validto)}},N=y!==null?o[y]:null,P=N?k(N):null;return g.jsx(qr,{open:n,onOpenChange:e,children:g.jsxs(sr,{className:"sm:max-w-[550px]",children:[g.jsxs(ir,{children:[g.jsxs(rr,{className:"flex items-center gap-2 text-xl",children:[g.jsx(Wr,{className:"w-6 h-6 text-green-600"}),_("eImzo.dialogTitle")]}),g.jsx(ka,{className:"text-base pt-2",children:_("eImzo.selectKeyTitle")})]}),g.jsxs("div",{className:"py-4",children:[d&&g.jsx(nl,{className:"h-24 w-full rounded-lg"}),f&&g.jsxs("div",{className:"flex items-center justify-between gap-3 p-4 bg-destructive/10 border border-destructive/20 rounded-md",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(df,{className:"w-5 h-5 text-destructive shrink-0"}),g.jsx("p",{className:"text-sm text-destructive/90",children:_("eImzo.loadKeysErrorShort")})]}),g.jsx(Ye,{variant:"ghost",size:"sm",onClick:T,children:g.jsx(IU,{className:"w-4 h-4"})})]}),!d&&!f&&o.length>0&&g.jsxs("div",{className:"relative",ref:E,children:[g.jsxs("button",{type:"button",onClick:()=>S(!A),className:"w-full text-left p-4 border-2 rounded-lg bg-background hover:border-primary/50 transition-colors focus:outline-none focus:ring-2 focus:ring-ring",children:[P?g.jsxs("div",{className:"space-y-1 pr-8",children:[g.jsxs("p",{className:"text-sm",children:[g.jsx("span",{className:"font-medium text-muted-foreground",children:_("eImzo.serialNumber")})," ",P.serialNumber]}),g.jsxs("p",{className:"text-sm flex items-center gap-2 flex-wrap",children:[g.jsx("span",{className:"font-medium text-muted-foreground",children:_("eImzo.pinfl")})," ",P.pinfl,g.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded font-medium",children:_("eImzo.physicalPerson")})]}),g.jsxs("p",{className:"text-sm",children:[g.jsx("span",{className:"font-medium text-muted-foreground",children:_("eImzo.fio")})," ",P.fio]}),g.jsxs("p",{className:"text-sm",children:[g.jsx("span",{className:"font-medium text-muted-foreground",children:_("eImzo.validPeriod")})," ",P.validFrom," - ",P.validTo]})]}):g.jsx("span",{className:"text-muted-foreground",children:_("eImzo.selectCertificate")}),g.jsx(Iu,{className:`absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground transition-transform ${A?"rotate-180":""}`})]}),A&&o.length>1&&g.jsx("div",{className:"absolute z-50 w-full mt-1 border rounded-lg bg-background shadow-lg max-h-[300px] overflow-y-auto",children:o.map((j,I)=>{const H=k(j),$=y===I;return g.jsx("button",{type:"button",onClick:()=>{b(I),S(!1)},className:`w-full text-left p-4 border-b last:border-b-0 hover:bg-muted/50 transition-colors ${$?"bg-primary/5":""}`,children:g.jsxs("div",{className:"space-y-1",children:[g.jsxs("p",{className:"text-sm",children:[g.jsx("span",{className:"font-medium text-muted-foreground",children:_("eImzo.serialNumber")})," ",H.serialNumber]}),g.jsxs("p",{className:"text-sm flex items-center gap-2 flex-wrap",children:[g.jsx("span",{className:"font-medium text-muted-foreground",children:_("eImzo.pinfl")})," ",H.pinfl,g.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded font-medium",children:_("eImzo.physicalPerson")})]}),g.jsxs("p",{className:"text-sm",children:[g.jsx("span",{className:"font-medium text-muted-foreground",children:_("eImzo.fio")})," ",H.fio]}),g.jsxs("p",{className:"text-sm",children:[g.jsx("span",{className:"font-medium text-muted-foreground",children:_("eImzo.validPeriod")})," ",H.validFrom," - ",H.validTo]})]})},j.serialNumber||I)})})]}),!d&&!f&&o.length===0&&g.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[g.jsx(df,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),g.jsx("p",{children:_("eImzo.keysNotFound")})]})]}),g.jsxs(Pa,{children:[g.jsx(Ye,{variant:"outline",onClick:()=>e(!1),children:_("common.cancel")}),g.jsx(Ye,{onClick:R,disabled:d||y===null||o.length===0,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700",children:_("eImzo.selectKey")})]})]})})}function rX({document:n,canEdit:e=!1,onEdit:t,onDocumentUpdate:s}){const{t:i,i18n:a}=yn(),{data:o}=Hu(),c=o?.roles?.includes("EDO Reception")??!1,d=o?.roles?.includes("EDO Director")??!1,h=n?.executor===o?.email,f=n?.co_executors?.some(re=>re.user===o?.email)??!1,p=(h||f)&&(o?.roles?.includes("EDO Executor")??!1),y=zY(),b=UY(),A=VY(),S=HY(),E=BY(),{data:C=[]}=S9(),{data:_=[]}=q2(),[T,R]=x.useState(!1),[M,k]=x.useState(!1),[N,P]=x.useState(!1),[j,I]=x.useState(!1),[H,$]=x.useState(!1),[K,Z]=x.useState(!1),[oe,F]=x.useState(null),[B,z]=x.useState(null),[Q,me]=x.useState(!1),[L,X]=x.useState(""),[te,ce]=x.useState(""),[ye,be]=x.useState(""),[W,Ae]=x.useState(!1),[xe,je]=x.useState(""),[we,ze]=x.useState([]),se=C,he=_,ve=()=>{Z(!0)},Se=async re=>{if(n){F(re);try{const Te=await at.getFiskaPdf(n.name);if(!Te?.pdf_base64)throw new Error("  PDF ");z(Te.pdf_base64),R(!0)}catch(Te){console.error("getFiskaPdf error:",Te),alert(Te instanceof Error?Te.message:i("documentMetadata.errorApproval")),Z(!1)}}},Ee=async()=>{if(!(!n||!oe||!B)){me(!0);try{const re=await sX(oe,B),Te=await y.mutateAsync({name:n.name,comment:L,signedPdfBase64:B,pkcs7Base64:re});R(!1),Z(!1),X(""),F(null),z(null),s&&s(Te);const qe=Te?.verification_url;qe&&console.log("Verification URL:",qe)}catch(re){console.error("Signing error:",re),alert(re instanceof Error?re.message:i("documentMetadata.errorApproval"))}finally{me(!1)}}},Ne=async()=>{if(n)try{const re=await b.mutateAsync({name:n.name,comment:L});k(!1),X(""),s&&s(re)}catch(re){alert(re instanceof Error?re.message:i("documentMetadata.errorReject"))}},nt=async()=>{if(n)try{const re=await A.mutateAsync({name:n.name,comment:L});P(!1),X(""),s&&s(re)}catch(re){alert(re instanceof Error?re.message:i("documentMetadata.errorApproval"))}},Ke=async()=>{if(n){if(!W&&!te){alert(i("documentMetadata.validationSelectResolution"));return}if(W&&!ye.trim()){alert(i("documentMetadata.validationEnterResolution"));return}if(!xe){alert(i("documentMetadata.validationSelectExecutor"));return}try{const re=await S.mutateAsync({documentName:n.name,resolution:W?void 0:te,resolutionText:W?ye:void 0,executor:xe,coExecutors:we});I(!1),ce(""),be(""),Ae(!1),je(""),ze([]),s&&s(re)}catch(re){alert(re instanceof Error?re.message:i("documentMetadata.errorReceptionSubmit"))}}},U=async()=>{if(n){if(!W&&!te){alert(i("documentMetadata.validationSelectResolution"));return}if(W&&!ye.trim()){alert(i("documentMetadata.validationEnterResolution"));return}if(!xe){alert(i("documentMetadata.validationSelectExecutor"));return}try{const re=await E.mutateAsync({name:n.name,updates:{resolution:W?void 0:te,resolution_text:W?ye:void 0,executor:xe,co_executors:we.map(Te=>({user:Te}))}});$(!1),ce(""),be(""),Ae(!1),je(""),ze([]),s&&s(re)}catch(re){alert(re instanceof Error?re.message:i("documentMetadata.errorDirectorEdit"))}}};if(!n)return null;const G=re=>re===i("documents.status.signed")||re===""||re===""||re===""?"text-green-600":re===i("documents.status.pending")||re===" "||re===" "?"text-orange-500":re===i("documents.status.archived")||re===""?"text-gray-500":re===""?"text-red-600":"text-gray-500",ie=re=>{const Te=a.language==="uz"?"uz-UZ":a.language==="en"?"en-US":"ru-RU";return new Date(re).toLocaleDateString(Te)},pe=n.status==="",ge=n.status===" ",fe=n.status===" ";return g.jsxs("div",{className:"h-full overflow-y-auto custom-scrollbar",children:[g.jsxs("div",{className:"p-4 space-y-6",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:i("documentMetadata.documentInfo")}),g.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-3",children:[g.jsxs("div",{className:"col-span-2",children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:i("documentMetadata.documentNumber")}),g.jsx("p",{className:"font-medium",children:n.name})]}),n.title&&g.jsxs("div",{className:"col-span-2",children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:i("documentMetadata.title")}),g.jsx("p",{className:"font-medium",children:n.title})]}),n.incoming_number&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:i("documentMetadata.incomingNumber")}),g.jsx("p",{className:"font-medium",children:n.incoming_number})]}),n.incoming_date&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:i("documentMetadata.incomingDate")}),g.jsx("p",{className:"font-medium",children:ie(n.incoming_date)})]}),n.outgoing_number&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:i("documentMetadata.outgoingNumber")}),g.jsx("p",{className:"font-medium",children:n.outgoing_number})]}),n.outgoing_date&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:i("documentMetadata.outgoingDate")}),g.jsx("p",{className:"font-medium",children:ie(n.outgoing_date)})]}),n.document_type&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:i("documentMetadata.documentType")}),g.jsx("p",{className:"font-medium",children:n.document_type_name||n.document_type})]}),n.correspondent&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:i("documentMetadata.correspondent")}),g.jsx("p",{className:"font-medium",children:n.correspondent_name||n.correspondent})]}),n.priority&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:i("documentMetadata.priority")}),g.jsx("p",{className:"font-medium",children:n.priority_name||n.priority})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:i("documentMetadata.status")}),g.jsx("p",{className:`font-medium ${G(n.status)}`,children:n.status})]}),n.classification&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:i("documentMetadata.classification")}),g.jsx("p",{className:"font-medium",children:n.classification_name||n.classification})]}),n.delivery_method&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:i("documentMetadata.deliveryMethod")}),g.jsx("p",{className:"font-medium",children:n.delivery_method_name||n.delivery_method})]}),n.creation&&g.jsxs("div",{className:"col-span-2",children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:i("documentMetadata.creationDate")}),g.jsx("p",{className:"font-medium",children:ie(n.creation)})]})]})]}),(n.resolution_name||n.resolution_text||n.resolution_text_from_link)&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:i("documentMetadata.resolution")}),g.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950/30 dark:to-pink-950/30 rounded-lg border border-purple-200 dark:border-purple-800 p-4 space-y-4",children:[(n.resolution_name||n.resolution_text||n.resolution_text_from_link)&&g.jsxs("div",{className:"space-y-2",children:[n.resolution_name&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Vs,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),g.jsx("p",{className:"text-sm font-semibold text-purple-900 dark:text-purple-100",children:n.resolution_name})]}),(n.resolution_text||n.resolution_text_from_link)&&g.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 pl-6 whitespace-pre-wrap",children:n.resolution_text_from_link||n.resolution_text})]}),(n.executor||n.co_executors&&n.co_executors.length>0)&&g.jsxs("div",{className:"pt-3 border-t border-purple-200 dark:border-purple-800 space-y-3",children:[n.executor&&g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"flex-shrink-0",children:n.executor_image?g.jsx("img",{src:n.executor_image,alt:"",className:"w-10 h-10 rounded-full object-cover border-2 border-purple-300 dark:border-purple-700"}):g.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center border-2 border-purple-300 dark:border-purple-700",children:g.jsx(Kc,{className:"w-5 h-5 text-white"})})}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:n.executor_full_name||n.executor}),g.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:i("documentMetadata.executorLabel").replace(" *","")})]})]}),n.co_executors&&n.co_executors.length>0&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{className:"text-xs font-medium text-purple-700 dark:text-purple-300 flex items-center gap-1",children:[g.jsx(Ma,{className:"w-3 h-3"}),i("documentMetadata.coExecutors")," (",n.co_executors.length,")"]}),g.jsx("div",{className:"space-y-2 pl-2",children:n.co_executors.map((re,Te)=>g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"flex-shrink-0",children:re.user_image?g.jsx("img",{src:re.user_image,alt:"",className:"w-8 h-8 rounded-full object-cover border border-purple-200 dark:border-purple-800"}):g.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-400 dark:bg-purple-600 flex items-center justify-center border border-purple-200 dark:border-purple-800",children:g.jsx(Kc,{className:"w-4 h-4 text-white"})})}),g.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:re.user_full_name||re.user})]},Te))})]})]})]})]}),!(n.resolution_name||n.resolution_text||n.resolution_text_from_link)&&(n.executor||n.co_executors&&n.co_executors.length>0)&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:i("documentMetadata.executorsSection")}),g.jsxs("div",{className:"space-y-3",children:[n.executor&&g.jsxs("div",{className:"flex items-center gap-3 p-2 bg-blue-50 rounded-lg",children:[n.executor_image?g.jsx("img",{src:n.executor_image,alt:"",className:"w-8 h-8 rounded-full object-cover"}):g.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center",children:g.jsx(Kc,{className:"w-4 h-4 text-white"})}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium text-sm",children:n.executor_full_name||n.executor}),g.jsx("p",{className:"text-xs text-blue-600",children:i("documentMetadata.executorLabel").replace(" *","")})]})]}),n.co_executors&&n.co_executors.length>0&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[g.jsx(Ma,{className:"w-3 h-3"}),i("documentMetadata.coExecutors")," (",n.co_executors.length,")"]}),n.co_executors.map((re,Te)=>g.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[re.user_image?g.jsx("img",{src:re.user_image,alt:"",className:"w-7 h-7 rounded-full object-cover"}):g.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-400 flex items-center justify-center",children:g.jsx(Kc,{className:"w-3 h-3 text-white"})}),g.jsx("p",{className:"text-sm",children:re.user_full_name||re.user})]},Te))]})]})]}),n.brief_content&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:i("documentMetadata.briefContent")}),g.jsx("p",{className:"text-sm whitespace-pre-wrap",children:n.brief_content})]}),n.director_comment&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:i("documentMetadata.directorComment")}),g.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/30 rounded-lg border border-blue-200 dark:border-blue-800",children:g.jsx("p",{className:"text-sm whitespace-pre-wrap",children:n.director_comment})})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:i("documentMetadata.actions")}),g.jsxs("div",{className:"space-y-2",children:[c&&pe&&g.jsxs(Ye,{className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white shadow-md",size:"sm",onClick:()=>I(!0),children:[g.jsx(HC,{className:"w-4 h-4 mr-2"}),i("documentMetadata.receptionSubmit")]}),d&&fe&&g.jsxs(g.Fragment,{children:[g.jsxs(Ye,{className:"w-full bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white shadow-md",size:"sm",onClick:()=>{n.resolution?(ce(n.resolution),Ae(!1)):n.resolution_text&&(be(n.resolution_text),Ae(!0)),je(n.executor||""),ze(n.co_executors?.map(re=>re.user).filter(Boolean)||[]),$(!0)},children:[g.jsx(ry,{className:"w-4 h-4 mr-2"}),i("documentMetadata.directorEditResolution")]}),g.jsxs(Ye,{className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white shadow-md",size:"sm",onClick:ve,children:[g.jsx(Wr,{className:"w-4 h-4 mr-2"}),i("documentMetadata.approve")]}),g.jsxs(Ye,{variant:"destructive",className:"w-full bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 shadow-md",size:"sm",onClick:()=>k(!0),children:[g.jsx(uv,{className:"w-4 h-4 mr-2"}),i("documentMetadata.reject")]})]}),p&&ge&&g.jsxs(Ye,{className:"w-full bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white shadow-md",size:"sm",onClick:()=>P(!0),children:[g.jsx($C,{className:"w-4 h-4 mr-2"}),i("documentMetadata.signDocument")]}),e&&!o?.roles?.includes("EDO Executor")&&g.jsxs(Ye,{className:"w-full bg-blue-600 hover:bg-blue-700",size:"sm",onClick:t,children:[g.jsx(ry,{className:"w-4 h-4"}),i("documentMetadata.editDocument")]}),g.jsxs(Ye,{variant:"outline",className:"w-full",size:"sm",children:[g.jsx(aU,{className:"w-4 h-4"}),i("documentMetadata.download")]}),g.jsxs(Ye,{variant:"outline",className:"w-full",size:"sm",children:[g.jsx(LU,{className:"w-4 h-4"}),i("documentMetadata.print")]})]})]})]}),g.jsx(qr,{open:T,onOpenChange:R,children:g.jsxs(sr,{className:"sm:max-w-[500px]",children:[g.jsxs(ir,{children:[g.jsxs(rr,{className:"flex items-center gap-2 text-xl",children:[g.jsx(Wr,{className:"w-6 h-6 text-green-600"}),i("documentMetadata.approveTitle")]}),g.jsx(ka,{className:"text-base pt-2",children:i("documentMetadata.approveDescription")})]}),g.jsx("div",{className:"space-y-4 py-4",children:g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium mb-2 block",children:i("documentMetadata.commentOptional")}),g.jsx($r,{value:L,onChange:re=>X(re.target.value),placeholder:i("documentMetadata.commentPlaceholder"),rows:4,className:"resize-none"})]})}),g.jsxs(Pa,{children:[g.jsx(Ye,{variant:"outline",onClick:()=>R(!1),children:""}),g.jsx(Ye,{onClick:Ee,disabled:y.isPending||Q,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700",children:Q?i("documentMetadata.signing"):y.isPending?i("documentMetadata.approving"):i("documentMetadata.approve")})]})]})}),g.jsx(qr,{open:M,onOpenChange:k,children:g.jsxs(sr,{className:"sm:max-w-[500px]",children:[g.jsxs(ir,{children:[g.jsxs(rr,{className:"flex items-center gap-2 text-xl",children:[g.jsx(uv,{className:"w-6 h-6 text-red-600"}),i("documentMetadata.rejectTitle")]}),g.jsx(ka,{className:"text-base pt-2",children:i("documentMetadata.rejectDescription")})]}),g.jsx("div",{className:"space-y-4 py-4",children:g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium mb-2 block",children:i("documentMetadata.rejectReasonLabel")}),g.jsx($r,{value:L,onChange:re=>X(re.target.value),placeholder:i("documentMetadata.rejectReasonPlaceholder"),rows:4,className:"resize-none"})]})}),g.jsxs(Pa,{children:[g.jsx(Ye,{variant:"outline",onClick:()=>k(!1),children:""}),g.jsx(Ye,{variant:"destructive",onClick:Ne,disabled:b.isPending,className:"bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700",children:b.isPending?i("documentMetadata.rejecting"):i("documentMetadata.reject")})]})]})}),g.jsx(qr,{open:N,onOpenChange:P,children:g.jsxs(sr,{className:"sm:max-w-[500px]",children:[g.jsxs(ir,{children:[g.jsxs(rr,{className:"flex items-center gap-2 text-xl",children:[g.jsx($C,{className:"w-6 h-6 text-blue-600"}),i("documentMetadata.signDocument")]}),g.jsx(ka,{className:"text-base pt-2",children:i("documentMetadata.signDescription")})]}),g.jsx("div",{className:"space-y-4 py-4",children:g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium mb-2 block",children:i("documentMetadata.commentOptional")}),g.jsx($r,{value:L,onChange:re=>X(re.target.value),placeholder:i("documentMetadata.commentPlaceholder"),rows:4,className:"resize-none"})]})}),g.jsxs(Pa,{children:[g.jsx(Ye,{variant:"outline",onClick:()=>P(!1),children:""}),g.jsx(Ye,{onClick:nt,disabled:A.isPending,className:"bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700",children:A.isPending?i("documentMetadata.signing"):i("documentMetadata.signDocument")})]})]})}),g.jsx(qr,{open:H,onOpenChange:$,children:g.jsxs(sr,{className:"sm:max-w-[600px]",children:[g.jsxs(ir,{children:[g.jsxs(rr,{className:"flex items-center gap-2 text-xl",children:[g.jsx(ry,{className:"w-6 h-6 text-purple-600"}),i("documentMetadata.directorEditResolution")]}),g.jsx(ka,{className:"text-base pt-2",children:i("documentMetadata.directorEditDescription")})]}),g.jsxs("div",{className:"space-y-4 py-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("input",{type:"checkbox",id:"use_custom_resolution_director",checked:W,onChange:re=>{Ae(re.target.checked),re.target.checked?ce(""):be("")},className:"w-4 h-4"}),g.jsx(ft,{htmlFor:"use_custom_resolution_director",className:"cursor-pointer",children:"  "})]}),W?g.jsxs(g.Fragment,{children:[g.jsx(ft,{htmlFor:"resolution_text_director",children:i("documentMetadata.resolutionTextLabel")}),g.jsx($r,{id:"resolution_text_director",value:ye,onChange:re=>be(re.target.value),placeholder:i("documentMetadata.resolutionTextPlaceholder"),rows:4,className:"resize-none"})]}):g.jsxs(g.Fragment,{children:[g.jsx(ft,{htmlFor:"resolution_director",children:i("documentMetadata.resolutionRequired")}),g.jsxs(zn,{value:te,onValueChange:ce,children:[g.jsx(Mn,{children:g.jsx(Un,{placeholder:i("documentMetadata.resolutionPlaceholder")})}),g.jsx(Nn,{children:se.map(re=>g.jsx(mn,{value:re.name,children:re.resolution_name},re.name))})]})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{children:i("documentMetadata.executorLabel")}),g.jsx(_v,{users:he,value:xe,onChange:je,placeholder:i("documentMetadata.executorSearchPlaceholder")})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{children:i("documentMetadata.coExecutors")}),g.jsx(Tv,{users:he,value:we,onChange:ze,excludeUsers:xe?[xe]:[],placeholder:i("documentMetadata.coExecutorsSearchPlaceholder")})]})]}),g.jsxs(Pa,{children:[g.jsx(Ye,{variant:"outline",onClick:()=>$(!1),children:""}),g.jsx(Ye,{onClick:U,disabled:E.isPending||!W&&!te||W&&!ye.trim()||!xe,className:"bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700",children:E.isPending?i("documentMetadata.saving"):i("common.save")})]})]})}),g.jsx(qr,{open:j,onOpenChange:I,children:g.jsxs(sr,{className:"sm:max-w-[600px]",children:[g.jsxs(ir,{children:[g.jsxs(rr,{className:"flex items-center gap-2 text-xl",children:[g.jsx(HC,{className:"w-6 h-6 text-purple-600"}),i("documentMetadata.receptionDialogTitle")]}),g.jsx(ka,{className:"text-base pt-2",children:i("documentMetadata.receptionDialogDescription")})]}),g.jsxs("div",{className:"space-y-4 py-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("input",{type:"checkbox",id:"use_custom_resolution",checked:W,onChange:re=>{Ae(re.target.checked),re.target.checked?ce(""):be("")},className:"w-4 h-4"}),g.jsx(ft,{htmlFor:"use_custom_resolution",className:"cursor-pointer",children:"  "})]}),W?g.jsxs(g.Fragment,{children:[g.jsx(ft,{htmlFor:"resolution_text",children:i("documentMetadata.resolutionTextLabel")}),g.jsx($r,{id:"resolution_text",value:ye,onChange:re=>be(re.target.value),placeholder:i("documentMetadata.resolutionTextPlaceholder"),rows:4,className:"resize-none"})]}):g.jsxs(g.Fragment,{children:[g.jsx(ft,{htmlFor:"resolution",children:i("documentMetadata.resolutionRequired")}),g.jsxs(zn,{value:te,onValueChange:ce,children:[g.jsx(Mn,{children:g.jsx(Un,{placeholder:i("documentMetadata.resolutionPlaceholder")})}),g.jsx(Nn,{children:se.map(re=>g.jsx(mn,{value:re.name,children:re.resolution_name},re.name))})]})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{children:i("documentMetadata.executorLabel")}),g.jsx(_v,{users:he,value:xe,onChange:je,placeholder:i("documentMetadata.executorSearchPlaceholder")})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(ft,{children:i("documentMetadata.coExecutors")}),g.jsx(Tv,{users:he,value:we,onChange:ze,excludeUsers:xe?[xe]:[],placeholder:i("documentMetadata.coExecutorsSearchPlaceholder")})]})]}),g.jsxs(Pa,{children:[g.jsx(Ye,{variant:"outline",onClick:()=>I(!1),children:""}),g.jsx(Ye,{onClick:Ke,disabled:S.isPending||!W&&!te||W&&!ye.trim()||!xe,className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700",children:S.isPending?i("sending"):i("documentMetadata.sendToDirector")})]})]})}),g.jsx(iX,{open:K,onOpenChange:Z,onKeySelected:Se,useFiskaFlow:!0,documentName:n?.name,onDocumentSigned:()=>{n&&s&&at.getDocument(n.name).then(s)}})]})}function aX({canEdit:n=!1}){const[e,t]=x.useState(null),[s,i]=x.useState(!1),[a,o]=x.useState(),c=x.useCallback(M=>{o(M)},[]),{form:d}=fq({onFiltersChange:c}),h=x.useMemo(()=>({search:a?.search?.trim()||void 0,status:a?.status||void 0,document_type:a?.document_type||void 0,priority:a?.priority||void 0,correspondent:a?.correspondent||void 0}),[a]),{data:f=[],isLoading:p,error:y,refetch:b}=FY(h),{data:A,isLoading:S}=IY(e,!!e),E=x.useCallback(M=>{t(M.name)},[]),C=x.useCallback(()=>{A&&i(!0)},[A]),_=x.useCallback(async M=>{t(M.name),b()},[b]),T=x.useCallback(()=>{b()},[b]);x.useEffect(()=>{f.length>0&&!e&&!p&&E(f[0])},[f,e,p,E]);const R=y instanceof Error?y.message:y?String(y):null;return g.jsxs("div",{className:"flex flex-1 min-h-0 overflow-hidden",children:[g.jsx("aside",{className:"w-80 shrink-0 border-r bg-background overflow-hidden flex flex-col",children:g.jsx(Xq,{documents:f,selectedDocument:A||null,onSelectDocument:E,loading:p,error:R,onDocumentsRefresh:T,filtersForm:d})}),g.jsx(Xr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex flex-1 flex-col min-h-0 overflow-hidden min-w-0",children:g.jsxs("section",{className:"flex flex-1 min-h-0 overflow-hidden",children:[g.jsx("main",{className:"flex-1 overflow-hidden relative min-w-0",children:g.jsx(vu,{mode:"wait",children:g.jsx(Xr.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,ease:"easeInOut"},className:"h-full",children:g.jsx(YY,{document:A||null,loading:S})},A?.name||"empty")})}),g.jsx("aside",{className:"w-96 border-l bg-background shrink-0 overflow-hidden relative",children:g.jsx(vu,{mode:"wait",children:g.jsx(Xr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"h-full",children:g.jsx(rX,{document:A||null,canEdit:n,onEdit:C})},A?.name||"empty")})})]})},"documents"),g.jsx(mN,{open:s,onOpenChange:i,editDocument:A||null,onDocumentUpdated:_})]})}const oX=n=>{const e={"/documents":"documents","/":"dashboard"};return e[n]?e[n]:n.startsWith("/documents")?"documents":"dashboard"};function lX(){const n=G_(),e=sa(),{t}=yn(),{setHeader:s}=$2(),[i,a]=x.useState(!1),o=oX(e.pathname);x.useEffect(()=>{o==="documents"?s(t("documents.title"),t("documents.subtitle")):s(t("dashboard.title"),t("dashboard.subtitle"))},[o,s,t]),x.useEffect(()=>{c()},[]);const c=async()=>{try{const h=await at.canEditDocument();a(h)}catch(h){console.error("Failed to check edit permission:",h)}},d=h=>{n(h==="dashboard"?"/":"/documents")};return g.jsxs("div",{className:"h-screen flex bg-background",children:[g.jsx(Rz,{currentPage:o,onNavigate:d}),g.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[g.jsx($7,{}),g.jsx(vu,{mode:"wait",children:g.jsxs(yI,{location:e,children:[g.jsx(Iy,{path:"/",element:g.jsx(Q7,{onNavigateToDocuments:()=>d("documents")})}),g.jsx(Iy,{path:"/documents/*",element:g.jsx(aX,{canEdit:i})})]},e.pathname)})]})]})}function cX(){return g.jsx(UI,{children:g.jsx(q7,{children:g.jsx(H7,{children:g.jsx(lX,{})})})})}eX();const uX=new lj({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:(n,e)=>e?.response?.status===401||e?.response?.status===403||e?.response?.status===404?!1:n<1,retryDelay:n=>Math.min(1e3*2**n,3e4),staleTime:3e4},mutations:{retry:!1}}});FO.createRoot(document.getElementById("root")).render(g.jsx(x.StrictMode,{children:g.jsx(cj,{client:uX,children:g.jsx(cX,{})})}));
