var Rw=s=>{throw TypeError(s)};var im=(s,t,e)=>t.has(s)||Rw("Cannot "+e);var xe=(s,t,e)=>(im(s,t,"read from private field"),e?e.call(s):t.get(s)),Fs=(s,t,e)=>t.has(s)?Rw("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),Ln=(s,t,e,n)=>(im(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),Bs=(s,t,e)=>(im(s,t,"access private method"),e);var Nw=(s,t,e,n)=>({set _(a){Ln(s,t,a,e)},get _(){return xe(s,t,n)}});function xD(s,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in s)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(s,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}function ry(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var am={exports:{}},Vl={};var Dw;function wD(){if(Dw)return Vl;Dw=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var c in a)c!=="key"&&(o[c]=a[c])}else o=a;return a=o.ref,{$$typeof:s,type:n,key:l,ref:a!==void 0?a:null,props:o}}return Vl.Fragment=t,Vl.jsx=e,Vl.jsxs=e,Vl}var Mw;function SD(){return Mw||(Mw=1,am.exports=wD()),am.exports}var g=SD(),rm={exports:{}},Pt={};var kw;function AD(){if(kw)return Pt;kw=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function x(F){return F===null||typeof F!="object"?null:(F=y&&F[y]||F["@@iterator"],typeof F=="function"?F:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,C={};function E(F,G,tt){this.props=F,this.context=G,this.refs=C,this.updater=tt||A}E.prototype.isReactComponent={},E.prototype.setState=function(F,G){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,G,"setState")},E.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function T(){}T.prototype=E.prototype;function R(F,G,tt){this.props=F,this.context=G,this.refs=C,this.updater=tt||A}var N=R.prototype=new T;N.constructor=R,w(N,E.prototype),N.isPureReactComponent=!0;var D=Array.isArray;function L(){}var k={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function P(F,G,tt){var lt=tt.ref;return{$$typeof:s,type:F,key:G,ref:lt!==void 0?lt:null,props:tt}}function U(F,G){return P(F.type,G,F.props)}function H(F){return typeof F=="object"&&F!==null&&F.$$typeof===s}function J(F){var G={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(tt){return G[tt]})}var at=/\/+/g;function q(F,G){return typeof F=="object"&&F!==null&&F.key!=null?J(""+F.key):G.toString(36)}function rt(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(L,L):(F.status="pending",F.then(function(G){F.status==="pending"&&(F.status="fulfilled",F.value=G)},function(G){F.status==="pending"&&(F.status="rejected",F.reason=G)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function O(F,G,tt,lt,mt){var st=typeof F;(st==="undefined"||st==="boolean")&&(F=null);var et=!1;if(F===null)et=!0;else switch(st){case"bigint":case"string":case"number":et=!0;break;case"object":switch(F.$$typeof){case s:case t:et=!0;break;case p:return et=F._init,O(et(F._payload),G,tt,lt,mt)}}if(et)return mt=mt(F),et=lt===""?"."+q(F,0):lt,D(mt)?(tt="",et!=null&&(tt=et.replace(at,"$&/")+"/"),O(mt,G,tt,"",function(Tt){return Tt})):mt!=null&&(H(mt)&&(mt=U(mt,tt+(mt.key==null||F&&F.key===mt.key?"":(""+mt.key).replace(at,"$&/")+"/")+et)),G.push(mt)),1;et=0;var yt=lt===""?".":lt+":";if(D(F))for(var vt=0;vt<F.length;vt++)lt=F[vt],st=yt+q(lt,vt),et+=O(lt,G,tt,st,mt);else if(vt=x(F),typeof vt=="function")for(F=vt.call(F),vt=0;!(lt=F.next()).done;)lt=lt.value,st=yt+q(lt,vt++),et+=O(lt,G,tt,st,mt);else if(st==="object"){if(typeof F.then=="function")return O(rt(F),G,tt,lt,mt);throw G=String(F),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return et}function B(F,G,tt){if(F==null)return F;var lt=[],mt=0;return O(F,lt,"","",function(st){return G.call(tt,st,mt++)}),lt}function I(F){if(F._status===-1){var G=F._result;G=G(),G.then(function(tt){(F._status===0||F._status===-1)&&(F._status=1,F._result=tt)},function(tt){(F._status===0||F._status===-1)&&(F._status=2,F._result=tt)}),F._status===-1&&(F._status=0,F._result=G)}if(F._status===1)return F._result.default;throw F._result}var Y=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},ft={map:B,forEach:function(F,G,tt){B(F,function(){G.apply(this,arguments)},tt)},count:function(F){var G=0;return B(F,function(){G++}),G},toArray:function(F){return B(F,function(G){return G})||[]},only:function(F){if(!H(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Pt.Activity=m,Pt.Children=ft,Pt.Component=E,Pt.Fragment=e,Pt.Profiler=a,Pt.PureComponent=R,Pt.StrictMode=n,Pt.Suspense=d,Pt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Pt.__COMPILER_RUNTIME={__proto__:null,c:function(F){return k.H.useMemoCache(F)}},Pt.cache=function(F){return function(){return F.apply(null,arguments)}},Pt.cacheSignal=function(){return null},Pt.cloneElement=function(F,G,tt){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var lt=w({},F.props),mt=F.key;if(G!=null)for(st in G.key!==void 0&&(mt=""+G.key),G)!j.call(G,st)||st==="key"||st==="__self"||st==="__source"||st==="ref"&&G.ref===void 0||(lt[st]=G[st]);var st=arguments.length-2;if(st===1)lt.children=tt;else if(1<st){for(var et=Array(st),yt=0;yt<st;yt++)et[yt]=arguments[yt+2];lt.children=et}return P(F.type,mt,lt)},Pt.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:o,_context:F},F},Pt.createElement=function(F,G,tt){var lt,mt={},st=null;if(G!=null)for(lt in G.key!==void 0&&(st=""+G.key),G)j.call(G,lt)&&lt!=="key"&&lt!=="__self"&&lt!=="__source"&&(mt[lt]=G[lt]);var et=arguments.length-2;if(et===1)mt.children=tt;else if(1<et){for(var yt=Array(et),vt=0;vt<et;vt++)yt[vt]=arguments[vt+2];mt.children=yt}if(F&&F.defaultProps)for(lt in et=F.defaultProps,et)mt[lt]===void 0&&(mt[lt]=et[lt]);return P(F,st,mt)},Pt.createRef=function(){return{current:null}},Pt.forwardRef=function(F){return{$$typeof:c,render:F}},Pt.isValidElement=H,Pt.lazy=function(F){return{$$typeof:p,_payload:{_status:-1,_result:F},_init:I}},Pt.memo=function(F,G){return{$$typeof:h,type:F,compare:G===void 0?null:G}},Pt.startTransition=function(F){var G=k.T,tt={};k.T=tt;try{var lt=F(),mt=k.S;mt!==null&&mt(tt,lt),typeof lt=="object"&&lt!==null&&typeof lt.then=="function"&&lt.then(L,Y)}catch(st){Y(st)}finally{G!==null&&tt.types!==null&&(G.types=tt.types),k.T=G}},Pt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Pt.use=function(F){return k.H.use(F)},Pt.useActionState=function(F,G,tt){return k.H.useActionState(F,G,tt)},Pt.useCallback=function(F,G){return k.H.useCallback(F,G)},Pt.useContext=function(F){return k.H.useContext(F)},Pt.useDebugValue=function(){},Pt.useDeferredValue=function(F,G){return k.H.useDeferredValue(F,G)},Pt.useEffect=function(F,G){return k.H.useEffect(F,G)},Pt.useEffectEvent=function(F){return k.H.useEffectEvent(F)},Pt.useId=function(){return k.H.useId()},Pt.useImperativeHandle=function(F,G,tt){return k.H.useImperativeHandle(F,G,tt)},Pt.useInsertionEffect=function(F,G){return k.H.useInsertionEffect(F,G)},Pt.useLayoutEffect=function(F,G){return k.H.useLayoutEffect(F,G)},Pt.useMemo=function(F,G){return k.H.useMemo(F,G)},Pt.useOptimistic=function(F,G){return k.H.useOptimistic(F,G)},Pt.useReducer=function(F,G,tt){return k.H.useReducer(F,G,tt)},Pt.useRef=function(F){return k.H.useRef(F)},Pt.useState=function(F){return k.H.useState(F)},Pt.useSyncExternalStore=function(F,G,tt){return k.H.useSyncExternalStore(F,G,tt)},Pt.useTransition=function(){return k.H.useTransition()},Pt.version="19.2.3",Pt}var Lw;function fh(){return Lw||(Lw=1,rm.exports=AD()),rm.exports}var S=fh();const sa=ry(S),oy=xD({__proto__:null,default:sa},[S]);var om={exports:{}},Hl={},lm={exports:{}},cm={};var jw;function CD(){return jw||(jw=1,(function(s){function t(O,B){var I=O.length;O.push(B);t:for(;0<I;){var Y=I-1>>>1,ft=O[Y];if(0<a(ft,B))O[Y]=B,O[I]=ft,I=Y;else break t}}function e(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var B=O[0],I=O.pop();if(I!==B){O[0]=I;t:for(var Y=0,ft=O.length,F=ft>>>1;Y<F;){var G=2*(Y+1)-1,tt=O[G],lt=G+1,mt=O[lt];if(0>a(tt,I))lt<ft&&0>a(mt,tt)?(O[Y]=mt,O[lt]=I,Y=lt):(O[Y]=tt,O[G]=I,Y=G);else if(lt<ft&&0>a(mt,I))O[Y]=mt,O[lt]=I,Y=lt;else break t}}return B}function a(O,B){var I=O.sortIndex-B.sortIndex;return I!==0?I:O.id-B.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();s.unstable_now=function(){return l.now()-c}}var d=[],h=[],p=1,m=null,y=3,x=!1,A=!1,w=!1,C=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function N(O){for(var B=e(h);B!==null;){if(B.callback===null)n(h);else if(B.startTime<=O)n(h),B.sortIndex=B.expirationTime,t(d,B);else break;B=e(h)}}function D(O){if(w=!1,N(O),!A)if(e(d)!==null)A=!0,L||(L=!0,J());else{var B=e(h);B!==null&&rt(D,B.startTime-O)}}var L=!1,k=-1,j=5,P=-1;function U(){return C?!0:!(s.unstable_now()-P<j)}function H(){if(C=!1,L){var O=s.unstable_now();P=O;var B=!0;try{t:{A=!1,w&&(w=!1,T(k),k=-1),x=!0;var I=y;try{e:{for(N(O),m=e(d);m!==null&&!(m.expirationTime>O&&U());){var Y=m.callback;if(typeof Y=="function"){m.callback=null,y=m.priorityLevel;var ft=Y(m.expirationTime<=O);if(O=s.unstable_now(),typeof ft=="function"){m.callback=ft,N(O),B=!0;break e}m===e(d)&&n(d),N(O)}else n(d);m=e(d)}if(m!==null)B=!0;else{var F=e(h);F!==null&&rt(D,F.startTime-O),B=!1}}break t}finally{m=null,y=I,x=!1}B=void 0}}finally{B?J():L=!1}}}var J;if(typeof R=="function")J=function(){R(H)};else if(typeof MessageChannel<"u"){var at=new MessageChannel,q=at.port2;at.port1.onmessage=H,J=function(){q.postMessage(null)}}else J=function(){E(H,0)};function rt(O,B){k=E(function(){O(s.unstable_now())},B)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(O){O.callback=null},s.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<O?Math.floor(1e3/O):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_next=function(O){switch(y){case 1:case 2:case 3:var B=3;break;default:B=y}var I=y;y=B;try{return O()}finally{y=I}},s.unstable_requestPaint=function(){C=!0},s.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var I=y;y=O;try{return B()}finally{y=I}},s.unstable_scheduleCallback=function(O,B,I){var Y=s.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?Y+I:Y):I=Y,O){case 1:var ft=-1;break;case 2:ft=250;break;case 5:ft=1073741823;break;case 4:ft=1e4;break;default:ft=5e3}return ft=I+ft,O={id:p++,callback:B,priorityLevel:O,startTime:I,expirationTime:ft,sortIndex:-1},I>Y?(O.sortIndex=I,t(h,O),e(d)===null&&O===e(h)&&(w?(T(k),k=-1):w=!0,rt(D,I-Y))):(O.sortIndex=ft,t(d,O),A||x||(A=!0,L||(L=!0,J()))),O},s.unstable_shouldYield=U,s.unstable_wrapCallback=function(O){var B=y;return function(){var I=y;y=B;try{return O.apply(this,arguments)}finally{y=I}}}})(cm)),cm}var Ow;function ED(){return Ow||(Ow=1,lm.exports=CD()),lm.exports}var um={exports:{}},ln={};var Pw;function _D(){if(Pw)return ln;Pw=1;var s=fh();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var l=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ln.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return o(d,h,null,p)},ln.flushSync=function(d){var h=l.T,p=n.p;try{if(l.T=null,n.p=2,d)return d()}finally{l.T=h,n.p=p,n.d.f()}},ln.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},ln.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},ln.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:x}):p==="script"&&n.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},ln.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},ln.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin);n.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},ln.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=c(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},ln.requestFormReset=function(d){n.d.r(d)},ln.unstable_batchedUpdates=function(d,h){return d(h)},ln.useFormState=function(d,h,p){return l.H.useFormState(d,h,p)},ln.useFormStatus=function(){return l.H.useHostTransitionStatus()},ln.version="19.2.3",ln}var Fw;function GA(){if(Fw)return um.exports;Fw=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),um.exports=_D(),um.exports}var Bw;function TD(){if(Bw)return Hl;Bw=1;var s=ED(),t=fh(),e=GA();function n(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)r+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var r=i,u=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(u=r.return),i=r.return;while(i)}return r.tag===3?u:null}function l(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function c(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function h(i){var r=i.alternate;if(!r){if(r=o(i),r===null)throw Error(n(188));return r!==i?null:i}for(var u=i,f=r;;){var v=u.return;if(v===null)break;var b=v.alternate;if(b===null){if(f=v.return,f!==null){u=f;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===u)return d(v),i;if(b===f)return d(v),r;b=b.sibling}throw Error(n(188))}if(u.return!==f.return)u=v,f=b;else{for(var _=!1,M=v.child;M;){if(M===u){_=!0,u=v,f=b;break}if(M===f){_=!0,f=v,u=b;break}M=M.sibling}if(!_){for(M=b.child;M;){if(M===u){_=!0,u=b,f=v;break}if(M===f){_=!0,f=b,u=v;break}M=M.sibling}if(!_)throw Error(n(189))}}if(u.alternate!==f)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?i:r}function p(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=p(i),r!==null)return r;i=i.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),R=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function J(i){return i===null||typeof i!="object"?null:(i=H&&i[H]||i["@@iterator"],typeof i=="function"?i:null)}var at=Symbol.for("react.client.reference");function q(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===at?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case E:return"Profiler";case C:return"StrictMode";case D:return"Suspense";case L:return"SuspenseList";case P:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case R:return i.displayName||"Context";case T:return(i._context.displayName||"Context")+".Consumer";case N:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case k:return r=i.displayName||null,r!==null?r:q(i.type)||"Memo";case j:r=i._payload,i=i._init;try{return q(i(r))}catch{}}return null}var rt=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},Y=[],ft=-1;function F(i){return{current:i}}function G(i){0>ft||(i.current=Y[ft],Y[ft]=null,ft--)}function tt(i,r){ft++,Y[ft]=i.current,i.current=r}var lt=F(null),mt=F(null),st=F(null),et=F(null);function yt(i,r){switch(tt(st,r),tt(mt,i),tt(lt,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?Qx(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=Qx(r),i=Zx(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}G(lt),tt(lt,i)}function vt(){G(lt),G(mt),G(st)}function Tt(i){i.memoizedState!==null&&tt(et,i);var r=lt.current,u=Zx(r,i.type);r!==u&&(tt(mt,i),tt(lt,u))}function X(i){mt.current===i&&(G(lt),G(mt)),et.current===i&&(G(et),Bl._currentValue=I)}var ut,ht;function pt(i){if(ut===void 0)try{throw Error()}catch(u){var r=u.stack.trim().match(/\n( *(at )?)/);ut=r&&r[1]||"",ht=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ut+i+ht}var Z=!1;function dt(i,r){if(!i||Z)return"";Z=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(r){var ct=function(){throw Error()};if(Object.defineProperty(ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ct,[])}catch(nt){var Q=nt}Reflect.construct(i,[],ct)}else{try{ct.call()}catch(nt){Q=nt}i.call(ct.prototype)}}else{try{throw Error()}catch(nt){Q=nt}(ct=i())&&typeof ct.catch=="function"&&ct.catch(function(){})}}catch(nt){if(nt&&Q&&typeof nt.stack=="string")return[nt.stack,Q.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),_=b[0],M=b[1];if(_&&M){var z=_.split(`
`),K=M.split(`
`);for(v=f=0;f<z.length&&!z[f].includes("DetermineComponentFrameRoot");)f++;for(;v<K.length&&!K[v].includes("DetermineComponentFrameRoot");)v++;if(f===z.length||v===K.length)for(f=z.length-1,v=K.length-1;1<=f&&0<=v&&z[f]!==K[v];)v--;for(;1<=f&&0<=v;f--,v--)if(z[f]!==K[v]){if(f!==1||v!==1)do if(f--,v--,0>v||z[f]!==K[v]){var it=`
`+z[f].replace(" at new "," at ");return i.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",i.displayName)),it}while(1<=f&&0<=v);break}}}finally{Z=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?pt(u):""}function _t(i,r){switch(i.tag){case 26:case 27:case 5:return pt(i.type);case 16:return pt("Lazy");case 13:return i.child!==r&&r!==null?pt("Suspense Fallback"):pt("Suspense");case 19:return pt("SuspenseList");case 0:case 15:return dt(i.type,!1);case 11:return dt(i.type.render,!1);case 1:return dt(i.type,!0);case 31:return pt("Activity");default:return""}}function Lt(i){try{var r="",u=null;do r+=_t(i,u),u=i,i=i.return;while(i);return r}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var qt=Object.prototype.hasOwnProperty,te=s.unstable_scheduleCallback,Bn=s.unstable_cancelCallback,Jn=s.unstable_shouldYield,Ca=s.unstable_requestPaint,Ge=s.unstable_now,Qo=s.unstable_getCurrentPriorityLevel,Js=s.unstable_ImmediatePriority,vr=s.unstable_UserBlockingPriority,mn=s.unstable_NormalPriority,Ms=s.unstable_LowPriority,on=s.unstable_IdlePriority,Di=s.log,Hh=s.unstable_setDisableYieldValue,Ea=null,gn=null;function ks(i){if(typeof Di=="function"&&Hh(i),gn&&typeof gn.setStrictMode=="function")try{gn.setStrictMode(Ea,i)}catch{}}var yn=Math.clz32?Math.clz32:gt,$h=Math.log,Wc=Math.LN2;function gt(i){return i>>>=0,i===0?32:31-($h(i)/Wc|0)|0}var ve=256,In=262144,ts=4194304;function Ue(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Mi(i,r,u){var f=i.pendingLanes;if(f===0)return 0;var v=0,b=i.suspendedLanes,_=i.pingedLanes;i=i.warmLanes;var M=f&134217727;return M!==0?(f=M&~b,f!==0?v=Ue(f):(_&=M,_!==0?v=Ue(_):u||(u=M&~i,u!==0&&(v=Ue(u))))):(M=f&~b,M!==0?v=Ue(M):_!==0?v=Ue(_):u||(u=f&~i,u!==0&&(v=Ue(u)))),v===0?0:r!==0&&r!==v&&(r&b)===0&&(b=v&-v,u=r&-r,b>=u||b===32&&(u&4194048)!==0)?r:v}function _a(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function o2(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kv(){var i=ts;return ts<<=1,(ts&62914560)===0&&(ts=4194304),i}function Gh(i){for(var r=[],u=0;31>u;u++)r.push(i);return r}function Zo(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function l2(i,r,u,f,v,b){var _=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var M=i.entanglements,z=i.expirationTimes,K=i.hiddenUpdates;for(u=_&~u;0<u;){var it=31-yn(u),ct=1<<it;M[it]=0,z[it]=-1;var Q=K[it];if(Q!==null)for(K[it]=null,it=0;it<Q.length;it++){var nt=Q[it];nt!==null&&(nt.lane&=-536870913)}u&=~ct}f!==0&&Lv(i,f,0),b!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=b&~(_&~r))}function Lv(i,r,u){i.pendingLanes|=r,i.suspendedLanes&=~r;var f=31-yn(r);i.entangledLanes|=r,i.entanglements[f]=i.entanglements[f]|1073741824|u&261930}function jv(i,r){var u=i.entangledLanes|=r;for(i=i.entanglements;u;){var f=31-yn(u),v=1<<f;v&r|i[f]&r&&(i[f]|=r),u&=~v}}function Ov(i,r){var u=r&-r;return u=(u&42)!==0?1:qh(u),(u&(i.suspendedLanes|r))!==0?0:u}function qh(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Xh(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Pv(){var i=B.p;return i!==0?i:(i=window.event,i===void 0?32:ww(i.type))}function Fv(i,r){var u=B.p;try{return B.p=i,r()}finally{B.p=u}}var ki=Math.random().toString(36).slice(2),Ze="__reactFiber$"+ki,_n="__reactProps$"+ki,br="__reactContainer$"+ki,Yh="__reactEvents$"+ki,c2="__reactListeners$"+ki,u2="__reactHandles$"+ki,Bv="__reactResources$"+ki,Jo="__reactMarker$"+ki;function Wh(i){delete i[Ze],delete i[_n],delete i[Yh],delete i[c2],delete i[u2]}function xr(i){var r=i[Ze];if(r)return r;for(var u=i.parentNode;u;){if(r=u[br]||u[Ze]){if(u=r.alternate,r.child!==null||u!==null&&u.child!==null)for(i=aw(i);i!==null;){if(u=i[Ze])return u;i=aw(i)}return r}i=u,u=i.parentNode}return null}function wr(i){if(i=i[Ze]||i[br]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function tl(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(n(33))}function Sr(i){var r=i[Bv];return r||(r=i[Bv]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function qe(i){i[Jo]=!0}var Iv=new Set,zv={};function Ta(i,r){Ar(i,r),Ar(i+"Capture",r)}function Ar(i,r){for(zv[i]=r,i=0;i<r.length;i++)Iv.add(r[i])}var d2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Uv={},Vv={};function h2(i){return qt.call(Vv,i)?!0:qt.call(Uv,i)?!1:d2.test(i)?Vv[i]=!0:(Uv[i]=!0,!1)}function Kc(i,r,u){if(h2(r))if(u===null)i.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var f=r.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+u)}}function Qc(i,r,u){if(u===null)i.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+u)}}function ti(i,r,u,f){if(f===null)i.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(r,u,""+f)}}function es(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Hv(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function f2(i,r,u){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,b=f.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return v.call(this)},set:function(_){u=""+_,b.call(this,_)}}),Object.defineProperty(i,r,{enumerable:f.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Kh(i){if(!i._valueTracker){var r=Hv(i)?"checked":"value";i._valueTracker=f2(i,r,""+i[r])}}function $v(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var u=r.getValue(),f="";return i&&(f=Hv(i)?i.checked?"true":"false":i.value),i=f,i!==u?(r.setValue(i),!0):!1}function Zc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var p2=/[\n"\\]/g;function ns(i){return i.replace(p2,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Qh(i,r,u,f,v,b,_,M){i.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.type=_:i.removeAttribute("type"),r!=null?_==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+es(r)):i.value!==""+es(r)&&(i.value=""+es(r)):_!=="submit"&&_!=="reset"||i.removeAttribute("value"),r!=null?Zh(i,_,es(r)):u!=null?Zh(i,_,es(u)):f!=null&&i.removeAttribute("value"),v==null&&b!=null&&(i.defaultChecked=!!b),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?i.name=""+es(M):i.removeAttribute("name")}function Gv(i,r,u,f,v,b,_,M){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),r!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||r!=null)){Kh(i);return}u=u!=null?""+es(u):"",r=r!=null?""+es(r):u,M||r===i.value||(i.value=r),i.defaultValue=r}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=M?i.checked:!!f,i.defaultChecked=!!f,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.name=_),Kh(i)}function Zh(i,r,u){r==="number"&&Zc(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function Cr(i,r,u,f){if(i=i.options,r){r={};for(var v=0;v<u.length;v++)r["$"+u[v]]=!0;for(u=0;u<i.length;u++)v=r.hasOwnProperty("$"+i[u].value),i[u].selected!==v&&(i[u].selected=v),v&&f&&(i[u].defaultSelected=!0)}else{for(u=""+es(u),r=null,v=0;v<i.length;v++){if(i[v].value===u){i[v].selected=!0,f&&(i[v].defaultSelected=!0);return}r!==null||i[v].disabled||(r=i[v])}r!==null&&(r.selected=!0)}}function qv(i,r,u){if(r!=null&&(r=""+es(r),r!==i.value&&(i.value=r),u==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=u!=null?""+es(u):""}function Xv(i,r,u,f){if(r==null){if(f!=null){if(u!=null)throw Error(n(92));if(rt(f)){if(1<f.length)throw Error(n(93));f=f[0]}u=f}u==null&&(u=""),r=u}u=es(r),i.defaultValue=u,f=i.textContent,f===u&&f!==""&&f!==null&&(i.value=f),Kh(i)}function Er(i,r){if(r){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=r;return}}i.textContent=r}var m2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yv(i,r,u){var f=r.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":f?i.setProperty(r,u):typeof u!="number"||u===0||m2.has(r)?r==="float"?i.cssFloat=u:i[r]=(""+u).trim():i[r]=u+"px"}function Wv(i,r,u){if(r!=null&&typeof r!="object")throw Error(n(62));if(i=i.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||r!=null&&r.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var v in r)f=r[v],r.hasOwnProperty(v)&&u[v]!==f&&Yv(i,v,f)}else for(var b in r)r.hasOwnProperty(b)&&Yv(i,b,r[b])}function Jh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var g2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),y2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jc(i){return y2.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ei(){}var tf=null;function ef(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var _r=null,Tr=null;function Kv(i){var r=wr(i);if(r&&(i=r.stateNode)){var u=i[_n]||null;t:switch(i=r.stateNode,r.type){case"input":if(Qh(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),r=u.name,u.type==="radio"&&r!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+ns(""+r)+'"][type="radio"]'),r=0;r<u.length;r++){var f=u[r];if(f!==i&&f.form===i.form){var v=f[_n]||null;if(!v)throw Error(n(90));Qh(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(r=0;r<u.length;r++)f=u[r],f.form===i.form&&$v(f)}break t;case"textarea":qv(i,u.value,u.defaultValue);break t;case"select":r=u.value,r!=null&&Cr(i,!!u.multiple,r,!1)}}}var nf=!1;function Qv(i,r,u){if(nf)return i(r,u);nf=!0;try{var f=i(r);return f}finally{if(nf=!1,(_r!==null||Tr!==null)&&(zu(),_r&&(r=_r,i=Tr,Tr=_r=null,Kv(r),i)))for(r=0;r<i.length;r++)Kv(i[r])}}function el(i,r){var u=i.stateNode;if(u===null)return null;var f=u[_n]||null;if(f===null)return null;u=f[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break t;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(n(231,r,typeof u));return u}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sf=!1;if(ni)try{var nl={};Object.defineProperty(nl,"passive",{get:function(){sf=!0}}),window.addEventListener("test",nl,nl),window.removeEventListener("test",nl,nl)}catch{sf=!1}var Li=null,af=null,tu=null;function Zv(){if(tu)return tu;var i,r=af,u=r.length,f,v="value"in Li?Li.value:Li.textContent,b=v.length;for(i=0;i<u&&r[i]===v[i];i++);var _=u-i;for(f=1;f<=_&&r[u-f]===v[b-f];f++);return tu=v.slice(i,1<f?1-f:void 0)}function eu(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function nu(){return!0}function Jv(){return!1}function Tn(i){function r(u,f,v,b,_){this._reactName=u,this._targetInst=v,this.type=f,this.nativeEvent=b,this.target=_,this.currentTarget=null;for(var M in i)i.hasOwnProperty(M)&&(u=i[M],this[M]=u?u(b):b[M]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?nu:Jv,this.isPropagationStopped=Jv,this}return m(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=nu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=nu)},persist:function(){},isPersistent:nu}),r}var Ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},su=Tn(Ra),sl=m({},Ra,{view:0,detail:0}),v2=Tn(sl),rf,of,il,iu=m({},sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cf,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==il&&(il&&i.type==="mousemove"?(rf=i.screenX-il.screenX,of=i.screenY-il.screenY):of=rf=0,il=i),rf)},movementY:function(i){return"movementY"in i?i.movementY:of}}),t0=Tn(iu),b2=m({},iu,{dataTransfer:0}),x2=Tn(b2),w2=m({},sl,{relatedTarget:0}),lf=Tn(w2),S2=m({},Ra,{animationName:0,elapsedTime:0,pseudoElement:0}),A2=Tn(S2),C2=m({},Ra,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),E2=Tn(C2),_2=m({},Ra,{data:0}),e0=Tn(_2),T2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D2(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=N2[i])?!!r[i]:!1}function cf(){return D2}var M2=m({},sl,{key:function(i){if(i.key){var r=T2[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=eu(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?R2[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cf,charCode:function(i){return i.type==="keypress"?eu(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?eu(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),k2=Tn(M2),L2=m({},iu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),n0=Tn(L2),j2=m({},sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cf}),O2=Tn(j2),P2=m({},Ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),F2=Tn(P2),B2=m({},iu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),I2=Tn(B2),z2=m({},Ra,{newState:0,oldState:0}),U2=Tn(z2),V2=[9,13,27,32],uf=ni&&"CompositionEvent"in window,al=null;ni&&"documentMode"in document&&(al=document.documentMode);var H2=ni&&"TextEvent"in window&&!al,s0=ni&&(!uf||al&&8<al&&11>=al),i0=" ",a0=!1;function r0(i,r){switch(i){case"keyup":return V2.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function o0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Rr=!1;function $2(i,r){switch(i){case"compositionend":return o0(r);case"keypress":return r.which!==32?null:(a0=!0,i0);case"textInput":return i=r.data,i===i0&&a0?null:i;default:return null}}function G2(i,r){if(Rr)return i==="compositionend"||!uf&&r0(i,r)?(i=Zv(),tu=af=Li=null,Rr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return s0&&r.locale!=="ko"?null:r.data;default:return null}}var q2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l0(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!q2[i.type]:r==="textarea"}function c0(i,r,u,f){_r?Tr?Tr.push(f):Tr=[f]:_r=f,r=Xu(r,"onChange"),0<r.length&&(u=new su("onChange","change",null,u,f),i.push({event:u,listeners:r}))}var rl=null,ol=null;function X2(i){Gx(i,0)}function au(i){var r=tl(i);if($v(r))return i}function u0(i,r){if(i==="change")return r}var d0=!1;if(ni){var df;if(ni){var hf="oninput"in document;if(!hf){var h0=document.createElement("div");h0.setAttribute("oninput","return;"),hf=typeof h0.oninput=="function"}df=hf}else df=!1;d0=df&&(!document.documentMode||9<document.documentMode)}function f0(){rl&&(rl.detachEvent("onpropertychange",p0),ol=rl=null)}function p0(i){if(i.propertyName==="value"&&au(ol)){var r=[];c0(r,ol,i,ef(i)),Qv(X2,r)}}function Y2(i,r,u){i==="focusin"?(f0(),rl=r,ol=u,rl.attachEvent("onpropertychange",p0)):i==="focusout"&&f0()}function W2(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return au(ol)}function K2(i,r){if(i==="click")return au(r)}function Q2(i,r){if(i==="input"||i==="change")return au(r)}function Z2(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var zn=typeof Object.is=="function"?Object.is:Z2;function ll(i,r){if(zn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var u=Object.keys(i),f=Object.keys(r);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var v=u[f];if(!qt.call(r,v)||!zn(i[v],r[v]))return!1}return!0}function m0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function g0(i,r){var u=m0(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=r&&f>=r)return{node:u,offset:r-i};i=f}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=m0(u)}}function y0(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?y0(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function v0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Zc(i.document);r instanceof i.HTMLIFrameElement;){try{var u=typeof r.contentWindow.location.href=="string"}catch{u=!1}if(u)i=r.contentWindow;else break;r=Zc(i.document)}return r}function ff(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var J2=ni&&"documentMode"in document&&11>=document.documentMode,Nr=null,pf=null,cl=null,mf=!1;function b0(i,r,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;mf||Nr==null||Nr!==Zc(f)||(f=Nr,"selectionStart"in f&&ff(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),cl&&ll(cl,f)||(cl=f,f=Xu(pf,"onSelect"),0<f.length&&(r=new su("onSelect","select",null,r,u),i.push({event:r,listeners:f}),r.target=Nr)))}function Na(i,r){var u={};return u[i.toLowerCase()]=r.toLowerCase(),u["Webkit"+i]="webkit"+r,u["Moz"+i]="moz"+r,u}var Dr={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionrun:Na("Transition","TransitionRun"),transitionstart:Na("Transition","TransitionStart"),transitioncancel:Na("Transition","TransitionCancel"),transitionend:Na("Transition","TransitionEnd")},gf={},x0={};ni&&(x0=document.createElement("div").style,"AnimationEvent"in window||(delete Dr.animationend.animation,delete Dr.animationiteration.animation,delete Dr.animationstart.animation),"TransitionEvent"in window||delete Dr.transitionend.transition);function Da(i){if(gf[i])return gf[i];if(!Dr[i])return i;var r=Dr[i],u;for(u in r)if(r.hasOwnProperty(u)&&u in x0)return gf[i]=r[u];return i}var w0=Da("animationend"),S0=Da("animationiteration"),A0=Da("animationstart"),tN=Da("transitionrun"),eN=Da("transitionstart"),nN=Da("transitioncancel"),C0=Da("transitionend"),E0=new Map,yf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yf.push("scrollEnd");function bs(i,r){E0.set(i,r),Ta(r,[i])}var ru=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},ss=[],Mr=0,vf=0;function ou(){for(var i=Mr,r=vf=Mr=0;r<i;){var u=ss[r];ss[r++]=null;var f=ss[r];ss[r++]=null;var v=ss[r];ss[r++]=null;var b=ss[r];if(ss[r++]=null,f!==null&&v!==null){var _=f.pending;_===null?v.next=v:(v.next=_.next,_.next=v),f.pending=v}b!==0&&_0(u,v,b)}}function lu(i,r,u,f){ss[Mr++]=i,ss[Mr++]=r,ss[Mr++]=u,ss[Mr++]=f,vf|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function bf(i,r,u,f){return lu(i,r,u,f),cu(i)}function Ma(i,r){return lu(i,null,null,r),cu(i)}function _0(i,r,u){i.lanes|=u;var f=i.alternate;f!==null&&(f.lanes|=u);for(var v=!1,b=i.return;b!==null;)b.childLanes|=u,f=b.alternate,f!==null&&(f.childLanes|=u),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(v=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,v&&r!==null&&(v=31-yn(u),i=b.hiddenUpdates,f=i[v],f===null?i[v]=[r]:f.push(r),r.lane=u|536870912),b):null}function cu(i){if(50<Ml)throw Ml=0,Rp=null,Error(n(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var kr={};function sN(i,r,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(i,r,u,f){return new sN(i,r,u,f)}function xf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function si(i,r){var u=i.alternate;return u===null?(u=Un(i.tag,r,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=r,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,r=i.dependencies,u.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function T0(i,r){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,r=u.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function uu(i,r,u,f,v,b){var _=0;if(f=i,typeof i=="function")xf(i)&&(_=1);else if(typeof i=="string")_=lD(i,u,lt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case P:return i=Un(31,u,r,v),i.elementType=P,i.lanes=b,i;case w:return ka(u.children,v,b,r);case C:_=8,v|=24;break;case E:return i=Un(12,u,r,v|2),i.elementType=E,i.lanes=b,i;case D:return i=Un(13,u,r,v),i.elementType=D,i.lanes=b,i;case L:return i=Un(19,u,r,v),i.elementType=L,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:_=10;break t;case T:_=9;break t;case N:_=11;break t;case k:_=14;break t;case j:_=16,f=null;break t}_=29,u=Error(n(130,i===null?"null":typeof i,"")),f=null}return r=Un(_,u,r,v),r.elementType=i,r.type=f,r.lanes=b,r}function ka(i,r,u,f){return i=Un(7,i,f,r),i.lanes=u,i}function wf(i,r,u){return i=Un(6,i,null,r),i.lanes=u,i}function R0(i){var r=Un(18,null,null,0);return r.stateNode=i,r}function Sf(i,r,u){return r=Un(4,i.children!==null?i.children:[],i.key,r),r.lanes=u,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var N0=new WeakMap;function is(i,r){if(typeof i=="object"&&i!==null){var u=N0.get(i);return u!==void 0?u:(r={value:i,source:r,stack:Lt(r)},N0.set(i,r),r)}return{value:i,source:r,stack:Lt(r)}}var Lr=[],jr=0,du=null,ul=0,as=[],rs=0,ji=null,Ls=1,js="";function ii(i,r){Lr[jr++]=ul,Lr[jr++]=du,du=i,ul=r}function D0(i,r,u){as[rs++]=Ls,as[rs++]=js,as[rs++]=ji,ji=i;var f=Ls;i=js;var v=32-yn(f)-1;f&=~(1<<v),u+=1;var b=32-yn(r)+v;if(30<b){var _=v-v%5;b=(f&(1<<_)-1).toString(32),f>>=_,v-=_,Ls=1<<32-yn(r)+v|u<<v|f,js=b+i}else Ls=1<<b|u<<v|f,js=i}function Af(i){i.return!==null&&(ii(i,1),D0(i,1,0))}function Cf(i){for(;i===du;)du=Lr[--jr],Lr[jr]=null,ul=Lr[--jr],Lr[jr]=null;for(;i===ji;)ji=as[--rs],as[rs]=null,js=as[--rs],as[rs]=null,Ls=as[--rs],as[rs]=null}function M0(i,r){as[rs++]=Ls,as[rs++]=js,as[rs++]=ji,Ls=r.id,js=r.overflow,ji=i}var Je=null,pe=null,Kt=!1,Oi=null,os=!1,Ef=Error(n(519));function Pi(i){var r=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw dl(is(r,i)),Ef}function k0(i){var r=i.stateNode,u=i.type,f=i.memoizedProps;switch(r[Ze]=i,r[_n]=f,u){case"dialog":Gt("cancel",r),Gt("close",r);break;case"iframe":case"object":case"embed":Gt("load",r);break;case"video":case"audio":for(u=0;u<Ll.length;u++)Gt(Ll[u],r);break;case"source":Gt("error",r);break;case"img":case"image":case"link":Gt("error",r),Gt("load",r);break;case"details":Gt("toggle",r);break;case"input":Gt("invalid",r),Gv(r,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Gt("invalid",r);break;case"textarea":Gt("invalid",r),Xv(r,f.value,f.defaultValue,f.children)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||r.textContent===""+u||f.suppressHydrationWarning===!0||Wx(r.textContent,u)?(f.popover!=null&&(Gt("beforetoggle",r),Gt("toggle",r)),f.onScroll!=null&&Gt("scroll",r),f.onScrollEnd!=null&&Gt("scrollend",r),f.onClick!=null&&(r.onclick=ei),r=!0):r=!1,r||Pi(i,!0)}function L0(i){for(Je=i.return;Je;)switch(Je.tag){case 5:case 31:case 13:os=!1;return;case 27:case 3:os=!0;return;default:Je=Je.return}}function Or(i){if(i!==Je)return!1;if(!Kt)return L0(i),Kt=!0,!1;var r=i.tag,u;if((u=r!==3&&r!==27)&&((u=r===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||Hp(i.type,i.memoizedProps)),u=!u),u&&pe&&Pi(i),L0(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));pe=iw(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));pe=iw(i)}else r===27?(r=pe,Ki(i.type)?(i=Yp,Yp=null,pe=i):pe=r):pe=Je?cs(i.stateNode.nextSibling):null;return!0}function La(){pe=Je=null,Kt=!1}function _f(){var i=Oi;return i!==null&&(Mn===null?Mn=i:Mn.push.apply(Mn,i),Oi=null),i}function dl(i){Oi===null?Oi=[i]:Oi.push(i)}var Tf=F(null),ja=null,ai=null;function Fi(i,r,u){tt(Tf,r._currentValue),r._currentValue=u}function ri(i){i._currentValue=Tf.current,G(Tf)}function Rf(i,r,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),i===u)break;i=i.return}}function Nf(i,r,u,f){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var b=v.dependencies;if(b!==null){var _=v.child;b=b.firstContext;t:for(;b!==null;){var M=b;b=v;for(var z=0;z<r.length;z++)if(M.context===r[z]){b.lanes|=u,M=b.alternate,M!==null&&(M.lanes|=u),Rf(b.return,u,i),f||(_=null);break t}b=M.next}}else if(v.tag===18){if(_=v.return,_===null)throw Error(n(341));_.lanes|=u,b=_.alternate,b!==null&&(b.lanes|=u),Rf(_,u,i),_=null}else _=v.child;if(_!==null)_.return=v;else for(_=v;_!==null;){if(_===i){_=null;break}if(v=_.sibling,v!==null){v.return=_.return,_=v;break}_=_.return}v=_}}function Pr(i,r,u,f){i=null;for(var v=r,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var _=v.alternate;if(_===null)throw Error(n(387));if(_=_.memoizedProps,_!==null){var M=v.type;zn(v.pendingProps.value,_.value)||(i!==null?i.push(M):i=[M])}}else if(v===et.current){if(_=v.alternate,_===null)throw Error(n(387));_.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(Bl):i=[Bl])}v=v.return}i!==null&&Nf(r,i,u,f),r.flags|=262144}function hu(i){for(i=i.firstContext;i!==null;){if(!zn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Oa(i){ja=i,ai=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function tn(i){return j0(ja,i)}function fu(i,r){return ja===null&&Oa(i),j0(i,r)}function j0(i,r){var u=r._currentValue;if(r={context:r,memoizedValue:u,next:null},ai===null){if(i===null)throw Error(n(308));ai=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else ai=ai.next=r;return u}var iN=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(u,f){i.push(f)}};this.abort=function(){r.aborted=!0,i.forEach(function(u){return u()})}},aN=s.unstable_scheduleCallback,rN=s.unstable_NormalPriority,Oe={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Df(){return{controller:new iN,data:new Map,refCount:0}}function hl(i){i.refCount--,i.refCount===0&&aN(rN,function(){i.controller.abort()})}var fl=null,Mf=0,Fr=0,Br=null;function oN(i,r){if(fl===null){var u=fl=[];Mf=0,Fr=jp(),Br={status:"pending",value:void 0,then:function(f){u.push(f)}}}return Mf++,r.then(O0,O0),r}function O0(){if(--Mf===0&&fl!==null){Br!==null&&(Br.status="fulfilled");var i=fl;fl=null,Fr=0,Br=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function lN(i,r){var u=[],f={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return i.then(function(){f.status="fulfilled",f.value=r;for(var v=0;v<u.length;v++)(0,u[v])(r)},function(v){for(f.status="rejected",f.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),f}var P0=O.S;O.S=function(i,r){bx=Ge(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&oN(i,r),P0!==null&&P0(i,r)};var Pa=F(null);function kf(){var i=Pa.current;return i!==null?i:ue.pooledCache}function pu(i,r){r===null?tt(Pa,Pa.current):tt(Pa,r.pool)}function F0(){var i=kf();return i===null?null:{parent:Oe._currentValue,pool:i}}var Ir=Error(n(460)),Lf=Error(n(474)),mu=Error(n(542)),gu={then:function(){}};function B0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function I0(i,r,u){switch(u=i[u],u===void 0?i.push(r):u!==r&&(r.then(ei,ei),r=u),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,U0(i),i;default:if(typeof r.status=="string")r.then(ei,ei);else{if(i=ue,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=r,i.status="pending",i.then(function(f){if(r.status==="pending"){var v=r;v.status="fulfilled",v.value=f}},function(f){if(r.status==="pending"){var v=r;v.status="rejected",v.reason=f}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,U0(i),i}throw Ba=r,Ir}}function Fa(i){try{var r=i._init;return r(i._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Ba=u,Ir):u}}var Ba=null;function z0(){if(Ba===null)throw Error(n(459));var i=Ba;return Ba=null,i}function U0(i){if(i===Ir||i===mu)throw Error(n(483))}var zr=null,pl=0;function yu(i){var r=pl;return pl+=1,zr===null&&(zr=[]),I0(zr,i,r)}function ml(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function vu(i,r){throw r.$$typeof===y?Error(n(525)):(i=Object.prototype.toString.call(r),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function V0(i){function r($,V){if(i){var W=$.deletions;W===null?($.deletions=[V],$.flags|=16):W.push(V)}}function u($,V){if(!i)return null;for(;V!==null;)r($,V),V=V.sibling;return null}function f($){for(var V=new Map;$!==null;)$.key!==null?V.set($.key,$):V.set($.index,$),$=$.sibling;return V}function v($,V){return $=si($,V),$.index=0,$.sibling=null,$}function b($,V,W){return $.index=W,i?(W=$.alternate,W!==null?(W=W.index,W<V?($.flags|=67108866,V):W):($.flags|=67108866,V)):($.flags|=1048576,V)}function _($){return i&&$.alternate===null&&($.flags|=67108866),$}function M($,V,W,ot){return V===null||V.tag!==6?(V=wf(W,$.mode,ot),V.return=$,V):(V=v(V,W),V.return=$,V)}function z($,V,W,ot){var Rt=W.type;return Rt===w?it($,V,W.props.children,ot,W.key):V!==null&&(V.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===j&&Fa(Rt)===V.type)?(V=v(V,W.props),ml(V,W),V.return=$,V):(V=uu(W.type,W.key,W.props,null,$.mode,ot),ml(V,W),V.return=$,V)}function K($,V,W,ot){return V===null||V.tag!==4||V.stateNode.containerInfo!==W.containerInfo||V.stateNode.implementation!==W.implementation?(V=Sf(W,$.mode,ot),V.return=$,V):(V=v(V,W.children||[]),V.return=$,V)}function it($,V,W,ot,Rt){return V===null||V.tag!==7?(V=ka(W,$.mode,ot,Rt),V.return=$,V):(V=v(V,W),V.return=$,V)}function ct($,V,W){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=wf(""+V,$.mode,W),V.return=$,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case x:return W=uu(V.type,V.key,V.props,null,$.mode,W),ml(W,V),W.return=$,W;case A:return V=Sf(V,$.mode,W),V.return=$,V;case j:return V=Fa(V),ct($,V,W)}if(rt(V)||J(V))return V=ka(V,$.mode,W,null),V.return=$,V;if(typeof V.then=="function")return ct($,yu(V),W);if(V.$$typeof===R)return ct($,fu($,V),W);vu($,V)}return null}function Q($,V,W,ot){var Rt=V!==null?V.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Rt!==null?null:M($,V,""+W,ot);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case x:return W.key===Rt?z($,V,W,ot):null;case A:return W.key===Rt?K($,V,W,ot):null;case j:return W=Fa(W),Q($,V,W,ot)}if(rt(W)||J(W))return Rt!==null?null:it($,V,W,ot,null);if(typeof W.then=="function")return Q($,V,yu(W),ot);if(W.$$typeof===R)return Q($,V,fu($,W),ot);vu($,W)}return null}function nt($,V,W,ot,Rt){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return $=$.get(W)||null,M(V,$,""+ot,Rt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case x:return $=$.get(ot.key===null?W:ot.key)||null,z(V,$,ot,Rt);case A:return $=$.get(ot.key===null?W:ot.key)||null,K(V,$,ot,Rt);case j:return ot=Fa(ot),nt($,V,W,ot,Rt)}if(rt(ot)||J(ot))return $=$.get(W)||null,it(V,$,ot,Rt,null);if(typeof ot.then=="function")return nt($,V,W,yu(ot),Rt);if(ot.$$typeof===R)return nt($,V,W,fu(V,ot),Rt);vu(V,ot)}return null}function wt($,V,W,ot){for(var Rt=null,ee=null,Et=V,zt=V=0,Yt=null;Et!==null&&zt<W.length;zt++){Et.index>zt?(Yt=Et,Et=null):Yt=Et.sibling;var ne=Q($,Et,W[zt],ot);if(ne===null){Et===null&&(Et=Yt);break}i&&Et&&ne.alternate===null&&r($,Et),V=b(ne,V,zt),ee===null?Rt=ne:ee.sibling=ne,ee=ne,Et=Yt}if(zt===W.length)return u($,Et),Kt&&ii($,zt),Rt;if(Et===null){for(;zt<W.length;zt++)Et=ct($,W[zt],ot),Et!==null&&(V=b(Et,V,zt),ee===null?Rt=Et:ee.sibling=Et,ee=Et);return Kt&&ii($,zt),Rt}for(Et=f(Et);zt<W.length;zt++)Yt=nt(Et,$,zt,W[zt],ot),Yt!==null&&(i&&Yt.alternate!==null&&Et.delete(Yt.key===null?zt:Yt.key),V=b(Yt,V,zt),ee===null?Rt=Yt:ee.sibling=Yt,ee=Yt);return i&&Et.forEach(function(ea){return r($,ea)}),Kt&&ii($,zt),Rt}function Dt($,V,W,ot){if(W==null)throw Error(n(151));for(var Rt=null,ee=null,Et=V,zt=V=0,Yt=null,ne=W.next();Et!==null&&!ne.done;zt++,ne=W.next()){Et.index>zt?(Yt=Et,Et=null):Yt=Et.sibling;var ea=Q($,Et,ne.value,ot);if(ea===null){Et===null&&(Et=Yt);break}i&&Et&&ea.alternate===null&&r($,Et),V=b(ea,V,zt),ee===null?Rt=ea:ee.sibling=ea,ee=ea,Et=Yt}if(ne.done)return u($,Et),Kt&&ii($,zt),Rt;if(Et===null){for(;!ne.done;zt++,ne=W.next())ne=ct($,ne.value,ot),ne!==null&&(V=b(ne,V,zt),ee===null?Rt=ne:ee.sibling=ne,ee=ne);return Kt&&ii($,zt),Rt}for(Et=f(Et);!ne.done;zt++,ne=W.next())ne=nt(Et,$,zt,ne.value,ot),ne!==null&&(i&&ne.alternate!==null&&Et.delete(ne.key===null?zt:ne.key),V=b(ne,V,zt),ee===null?Rt=ne:ee.sibling=ne,ee=ne);return i&&Et.forEach(function(bD){return r($,bD)}),Kt&&ii($,zt),Rt}function le($,V,W,ot){if(typeof W=="object"&&W!==null&&W.type===w&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case x:t:{for(var Rt=W.key;V!==null;){if(V.key===Rt){if(Rt=W.type,Rt===w){if(V.tag===7){u($,V.sibling),ot=v(V,W.props.children),ot.return=$,$=ot;break t}}else if(V.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===j&&Fa(Rt)===V.type){u($,V.sibling),ot=v(V,W.props),ml(ot,W),ot.return=$,$=ot;break t}u($,V);break}else r($,V);V=V.sibling}W.type===w?(ot=ka(W.props.children,$.mode,ot,W.key),ot.return=$,$=ot):(ot=uu(W.type,W.key,W.props,null,$.mode,ot),ml(ot,W),ot.return=$,$=ot)}return _($);case A:t:{for(Rt=W.key;V!==null;){if(V.key===Rt)if(V.tag===4&&V.stateNode.containerInfo===W.containerInfo&&V.stateNode.implementation===W.implementation){u($,V.sibling),ot=v(V,W.children||[]),ot.return=$,$=ot;break t}else{u($,V);break}else r($,V);V=V.sibling}ot=Sf(W,$.mode,ot),ot.return=$,$=ot}return _($);case j:return W=Fa(W),le($,V,W,ot)}if(rt(W))return wt($,V,W,ot);if(J(W)){if(Rt=J(W),typeof Rt!="function")throw Error(n(150));return W=Rt.call(W),Dt($,V,W,ot)}if(typeof W.then=="function")return le($,V,yu(W),ot);if(W.$$typeof===R)return le($,V,fu($,W),ot);vu($,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,V!==null&&V.tag===6?(u($,V.sibling),ot=v(V,W),ot.return=$,$=ot):(u($,V),ot=wf(W,$.mode,ot),ot.return=$,$=ot),_($)):u($,V)}return function($,V,W,ot){try{pl=0;var Rt=le($,V,W,ot);return zr=null,Rt}catch(Et){if(Et===Ir||Et===mu)throw Et;var ee=Un(29,Et,null,$.mode);return ee.lanes=ot,ee.return=$,ee}}}var Ia=V0(!0),H0=V0(!1),Bi=!1;function jf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Of(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ii(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function zi(i,r,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(se&2)!==0){var v=f.pending;return v===null?r.next=r:(r.next=v.next,v.next=r),f.pending=r,r=cu(i),_0(i,null,u),r}return lu(i,f,r,u),cu(i)}function gl(i,r,u){if(r=r.updateQueue,r!==null&&(r=r.shared,(u&4194048)!==0)){var f=r.lanes;f&=i.pendingLanes,u|=f,r.lanes=u,jv(i,u)}}function Pf(i,r){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var v=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var _={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?v=b=_:b=b.next=_,u=u.next}while(u!==null);b===null?v=b=r:b=b.next=r}else v=b=r;u={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=r:i.next=r,u.lastBaseUpdate=r}var Ff=!1;function yl(){if(Ff){var i=Br;if(i!==null)throw i}}function vl(i,r,u,f){Ff=!1;var v=i.updateQueue;Bi=!1;var b=v.firstBaseUpdate,_=v.lastBaseUpdate,M=v.shared.pending;if(M!==null){v.shared.pending=null;var z=M,K=z.next;z.next=null,_===null?b=K:_.next=K,_=z;var it=i.alternate;it!==null&&(it=it.updateQueue,M=it.lastBaseUpdate,M!==_&&(M===null?it.firstBaseUpdate=K:M.next=K,it.lastBaseUpdate=z))}if(b!==null){var ct=v.baseState;_=0,it=K=z=null,M=b;do{var Q=M.lane&-536870913,nt=Q!==M.lane;if(nt?(Xt&Q)===Q:(f&Q)===Q){Q!==0&&Q===Fr&&(Ff=!0),it!==null&&(it=it.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});t:{var wt=i,Dt=M;Q=r;var le=u;switch(Dt.tag){case 1:if(wt=Dt.payload,typeof wt=="function"){ct=wt.call(le,ct,Q);break t}ct=wt;break t;case 3:wt.flags=wt.flags&-65537|128;case 0:if(wt=Dt.payload,Q=typeof wt=="function"?wt.call(le,ct,Q):wt,Q==null)break t;ct=m({},ct,Q);break t;case 2:Bi=!0}}Q=M.callback,Q!==null&&(i.flags|=64,nt&&(i.flags|=8192),nt=v.callbacks,nt===null?v.callbacks=[Q]:nt.push(Q))}else nt={lane:Q,tag:M.tag,payload:M.payload,callback:M.callback,next:null},it===null?(K=it=nt,z=ct):it=it.next=nt,_|=Q;if(M=M.next,M===null){if(M=v.shared.pending,M===null)break;nt=M,M=nt.next,nt.next=null,v.lastBaseUpdate=nt,v.shared.pending=null}}while(!0);it===null&&(z=ct),v.baseState=z,v.firstBaseUpdate=K,v.lastBaseUpdate=it,b===null&&(v.shared.lanes=0),Gi|=_,i.lanes=_,i.memoizedState=ct}}function $0(i,r){if(typeof i!="function")throw Error(n(191,i));i.call(r)}function G0(i,r){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)$0(u[i],r)}var Ur=F(null),bu=F(0);function q0(i,r){i=mi,tt(bu,i),tt(Ur,r),mi=i|r.baseLanes}function Bf(){tt(bu,mi),tt(Ur,Ur.current)}function If(){mi=bu.current,G(Ur),G(bu)}var Vn=F(null),ls=null;function Ui(i){var r=i.alternate;tt(De,De.current&1),tt(Vn,i),ls===null&&(r===null||Ur.current!==null||r.memoizedState!==null)&&(ls=i)}function zf(i){tt(De,De.current),tt(Vn,i),ls===null&&(ls=i)}function X0(i){i.tag===22?(tt(De,De.current),tt(Vn,i),ls===null&&(ls=i)):Vi()}function Vi(){tt(De,De.current),tt(Vn,Vn.current)}function Hn(i){G(Vn),ls===i&&(ls=null),G(De)}var De=F(0);function xu(i){for(var r=i;r!==null;){if(r.tag===13){var u=r.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||qp(u)||Xp(u)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var oi=0,It=null,re=null,Pe=null,wu=!1,Vr=!1,za=!1,Su=0,bl=0,Hr=null,cN=0;function Te(){throw Error(n(321))}function Uf(i,r){if(r===null)return!1;for(var u=0;u<r.length&&u<i.length;u++)if(!zn(i[u],r[u]))return!1;return!0}function Vf(i,r,u,f,v,b){return oi=b,It=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,O.H=i===null||i.memoizedState===null?Db:sp,za=!1,b=u(f,v),za=!1,Vr&&(b=W0(r,u,f,v)),Y0(i),b}function Y0(i){O.H=Sl;var r=re!==null&&re.next!==null;if(oi=0,Pe=re=It=null,wu=!1,bl=0,Hr=null,r)throw Error(n(300));i===null||Fe||(i=i.dependencies,i!==null&&hu(i)&&(Fe=!0))}function W0(i,r,u,f){It=i;var v=0;do{if(Vr&&(Hr=null),bl=0,Vr=!1,25<=v)throw Error(n(301));if(v+=1,Pe=re=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}O.H=Mb,b=r(u,f)}while(Vr);return b}function uN(){var i=O.H,r=i.useState()[0];return r=typeof r.then=="function"?xl(r):r,i=i.useState()[0],(re!==null?re.memoizedState:null)!==i&&(It.flags|=1024),r}function Hf(){var i=Su!==0;return Su=0,i}function $f(i,r,u){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~u}function Gf(i){if(wu){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}wu=!1}oi=0,Pe=re=It=null,Vr=!1,bl=Su=0,Hr=null}function vn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?It.memoizedState=Pe=i:Pe=Pe.next=i,Pe}function Me(){if(re===null){var i=It.alternate;i=i!==null?i.memoizedState:null}else i=re.next;var r=Pe===null?It.memoizedState:Pe.next;if(r!==null)Pe=r,re=i;else{if(i===null)throw It.alternate===null?Error(n(467)):Error(n(310));re=i,i={memoizedState:re.memoizedState,baseState:re.baseState,baseQueue:re.baseQueue,queue:re.queue,next:null},Pe===null?It.memoizedState=Pe=i:Pe=Pe.next=i}return Pe}function Au(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xl(i){var r=bl;return bl+=1,Hr===null&&(Hr=[]),i=I0(Hr,i,r),r=It,(Pe===null?r.memoizedState:Pe.next)===null&&(r=r.alternate,O.H=r===null||r.memoizedState===null?Db:sp),i}function Cu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return xl(i);if(i.$$typeof===R)return tn(i)}throw Error(n(438,String(i)))}function qf(i){var r=null,u=It.updateQueue;if(u!==null&&(r=u.memoCache),r==null){var f=It.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(r={data:f.data.map(function(v){return v.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),u===null&&(u=Au(),It.updateQueue=u),u.memoCache=r,u=r.data[r.index],u===void 0)for(u=r.data[r.index]=Array(i),f=0;f<i;f++)u[f]=U;return r.index++,u}function li(i,r){return typeof r=="function"?r(i):r}function Eu(i){var r=Me();return Xf(r,re,i)}function Xf(i,r,u){var f=i.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=u;var v=i.baseQueue,b=f.pending;if(b!==null){if(v!==null){var _=v.next;v.next=b.next,b.next=_}r.baseQueue=v=b,f.pending=null}if(b=i.baseState,v===null)i.memoizedState=b;else{r=v.next;var M=_=null,z=null,K=r,it=!1;do{var ct=K.lane&-536870913;if(ct!==K.lane?(Xt&ct)===ct:(oi&ct)===ct){var Q=K.revertLane;if(Q===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ct===Fr&&(it=!0);else if((oi&Q)===Q){K=K.next,Q===Fr&&(it=!0);continue}else ct={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},z===null?(M=z=ct,_=b):z=z.next=ct,It.lanes|=Q,Gi|=Q;ct=K.action,za&&u(b,ct),b=K.hasEagerState?K.eagerState:u(b,ct)}else Q={lane:ct,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},z===null?(M=z=Q,_=b):z=z.next=Q,It.lanes|=ct,Gi|=ct;K=K.next}while(K!==null&&K!==r);if(z===null?_=b:z.next=M,!zn(b,i.memoizedState)&&(Fe=!0,it&&(u=Br,u!==null)))throw u;i.memoizedState=b,i.baseState=_,i.baseQueue=z,f.lastRenderedState=b}return v===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function Yf(i){var r=Me(),u=r.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=i;var f=u.dispatch,v=u.pending,b=r.memoizedState;if(v!==null){u.pending=null;var _=v=v.next;do b=i(b,_.action),_=_.next;while(_!==v);zn(b,r.memoizedState)||(Fe=!0),r.memoizedState=b,r.baseQueue===null&&(r.baseState=b),u.lastRenderedState=b}return[b,f]}function K0(i,r,u){var f=It,v=Me(),b=Kt;if(b){if(u===void 0)throw Error(n(407));u=u()}else u=r();var _=!zn((re||v).memoizedState,u);if(_&&(v.memoizedState=u,Fe=!0),v=v.queue,Qf(J0.bind(null,f,v,i),[i]),v.getSnapshot!==r||_||Pe!==null&&Pe.memoizedState.tag&1){if(f.flags|=2048,$r(9,{destroy:void 0},Z0.bind(null,f,v,u,r),null),ue===null)throw Error(n(349));b||(oi&127)!==0||Q0(f,r,u)}return u}function Q0(i,r,u){i.flags|=16384,i={getSnapshot:r,value:u},r=It.updateQueue,r===null?(r=Au(),It.updateQueue=r,r.stores=[i]):(u=r.stores,u===null?r.stores=[i]:u.push(i))}function Z0(i,r,u,f){r.value=u,r.getSnapshot=f,tb(r)&&eb(i)}function J0(i,r,u){return u(function(){tb(r)&&eb(i)})}function tb(i){var r=i.getSnapshot;i=i.value;try{var u=r();return!zn(i,u)}catch{return!0}}function eb(i){var r=Ma(i,2);r!==null&&kn(r,i,2)}function Wf(i){var r=vn();if(typeof i=="function"){var u=i;if(i=u(),za){ks(!0);try{u()}finally{ks(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:i},r}function nb(i,r,u,f){return i.baseState=u,Xf(i,re,typeof f=="function"?f:li)}function dN(i,r,u,f,v){if(Ru(i))throw Error(n(485));if(i=r.action,i!==null){var b={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){b.listeners.push(_)}};O.T!==null?u(!0):b.isTransition=!1,f(b),u=r.pending,u===null?(b.next=r.pending=b,sb(r,b)):(b.next=u.next,r.pending=u.next=b)}}function sb(i,r){var u=r.action,f=r.payload,v=i.state;if(r.isTransition){var b=O.T,_={};O.T=_;try{var M=u(v,f),z=O.S;z!==null&&z(_,M),ib(i,r,M)}catch(K){Kf(i,r,K)}finally{b!==null&&_.types!==null&&(b.types=_.types),O.T=b}}else try{b=u(v,f),ib(i,r,b)}catch(K){Kf(i,r,K)}}function ib(i,r,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){ab(i,r,f)},function(f){return Kf(i,r,f)}):ab(i,r,u)}function ab(i,r,u){r.status="fulfilled",r.value=u,rb(r),i.state=u,r=i.pending,r!==null&&(u=r.next,u===r?i.pending=null:(u=u.next,r.next=u,sb(i,u)))}function Kf(i,r,u){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do r.status="rejected",r.reason=u,rb(r),r=r.next;while(r!==f)}i.action=null}function rb(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function ob(i,r){return r}function lb(i,r){if(Kt){var u=ue.formState;if(u!==null){t:{var f=It;if(Kt){if(pe){e:{for(var v=pe,b=os;v.nodeType!==8;){if(!b){v=null;break e}if(v=cs(v.nextSibling),v===null){v=null;break e}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){pe=cs(v.nextSibling),f=v.data==="F!";break t}}Pi(f)}f=!1}f&&(r=u[0])}}return u=vn(),u.memoizedState=u.baseState=r,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ob,lastRenderedState:r},u.queue=f,u=Tb.bind(null,It,f),f.dispatch=u,f=Wf(!1),b=np.bind(null,It,!1,f.queue),f=vn(),v={state:r,dispatch:null,action:i,pending:null},f.queue=v,u=dN.bind(null,It,v,b,u),v.dispatch=u,f.memoizedState=i,[r,u,!1]}function cb(i){var r=Me();return ub(r,re,i)}function ub(i,r,u){if(r=Xf(i,r,ob)[0],i=Eu(li)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var f=xl(r)}catch(_){throw _===Ir?mu:_}else f=r;r=Me();var v=r.queue,b=v.dispatch;return u!==r.memoizedState&&(It.flags|=2048,$r(9,{destroy:void 0},hN.bind(null,v,u),null)),[f,b,i]}function hN(i,r){i.action=r}function db(i){var r=Me(),u=re;if(u!==null)return ub(r,u,i);Me(),r=r.memoizedState,u=Me();var f=u.queue.dispatch;return u.memoizedState=i,[r,f,!1]}function $r(i,r,u,f){return i={tag:i,create:u,deps:f,inst:r,next:null},r=It.updateQueue,r===null&&(r=Au(),It.updateQueue=r),u=r.lastEffect,u===null?r.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,r.lastEffect=i),i}function hb(){return Me().memoizedState}function _u(i,r,u,f){var v=vn();It.flags|=i,v.memoizedState=$r(1|r,{destroy:void 0},u,f===void 0?null:f)}function Tu(i,r,u,f){var v=Me();f=f===void 0?null:f;var b=v.memoizedState.inst;re!==null&&f!==null&&Uf(f,re.memoizedState.deps)?v.memoizedState=$r(r,b,u,f):(It.flags|=i,v.memoizedState=$r(1|r,b,u,f))}function fb(i,r){_u(8390656,8,i,r)}function Qf(i,r){Tu(2048,8,i,r)}function fN(i){It.flags|=4;var r=It.updateQueue;if(r===null)r=Au(),It.updateQueue=r,r.events=[i];else{var u=r.events;u===null?r.events=[i]:u.push(i)}}function pb(i){var r=Me().memoizedState;return fN({ref:r,nextImpl:i}),function(){if((se&2)!==0)throw Error(n(440));return r.impl.apply(void 0,arguments)}}function mb(i,r){return Tu(4,2,i,r)}function gb(i,r){return Tu(4,4,i,r)}function yb(i,r){if(typeof r=="function"){i=i();var u=r(i);return function(){typeof u=="function"?u():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function vb(i,r,u){u=u!=null?u.concat([i]):null,Tu(4,4,yb.bind(null,r,i),u)}function Zf(){}function bb(i,r){var u=Me();r=r===void 0?null:r;var f=u.memoizedState;return r!==null&&Uf(r,f[1])?f[0]:(u.memoizedState=[i,r],i)}function xb(i,r){var u=Me();r=r===void 0?null:r;var f=u.memoizedState;if(r!==null&&Uf(r,f[1]))return f[0];if(f=i(),za){ks(!0);try{i()}finally{ks(!1)}}return u.memoizedState=[f,r],f}function Jf(i,r,u){return u===void 0||(oi&1073741824)!==0&&(Xt&261930)===0?i.memoizedState=r:(i.memoizedState=u,i=wx(),It.lanes|=i,Gi|=i,u)}function wb(i,r,u,f){return zn(u,r)?u:Ur.current!==null?(i=Jf(i,u,f),zn(i,r)||(Fe=!0),i):(oi&42)===0||(oi&1073741824)!==0&&(Xt&261930)===0?(Fe=!0,i.memoizedState=u):(i=wx(),It.lanes|=i,Gi|=i,r)}function Sb(i,r,u,f,v){var b=B.p;B.p=b!==0&&8>b?b:8;var _=O.T,M={};O.T=M,np(i,!1,r,u);try{var z=v(),K=O.S;if(K!==null&&K(M,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var it=lN(z,f);wl(i,r,it,qn(i))}else wl(i,r,f,qn(i))}catch(ct){wl(i,r,{then:function(){},status:"rejected",reason:ct},qn())}finally{B.p=b,_!==null&&M.types!==null&&(_.types=M.types),O.T=_}}function pN(){}function tp(i,r,u,f){if(i.tag!==5)throw Error(n(476));var v=Ab(i).queue;Sb(i,v,r,I,u===null?pN:function(){return Cb(i),u(f)})}function Ab(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:I},next:null};var u={};return r.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:u},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Cb(i){var r=Ab(i);r.next===null&&(r=i.alternate.memoizedState),wl(i,r.next.queue,{},qn())}function ep(){return tn(Bl)}function Eb(){return Me().memoizedState}function _b(){return Me().memoizedState}function mN(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var u=qn();i=Ii(u);var f=zi(r,i,u);f!==null&&(kn(f,r,u),gl(f,r,u)),r={cache:Df()},i.payload=r;return}r=r.return}}function gN(i,r,u){var f=qn();u={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ru(i)?Rb(r,u):(u=bf(i,r,u,f),u!==null&&(kn(u,i,f),Nb(u,r,f)))}function Tb(i,r,u){var f=qn();wl(i,r,u,f)}function wl(i,r,u,f){var v={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Ru(i))Rb(r,v);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=r.lastRenderedReducer,b!==null))try{var _=r.lastRenderedState,M=b(_,u);if(v.hasEagerState=!0,v.eagerState=M,zn(M,_))return lu(i,r,v,0),ue===null&&ou(),!1}catch{}if(u=bf(i,r,v,f),u!==null)return kn(u,i,f),Nb(u,r,f),!0}return!1}function np(i,r,u,f){if(f={lane:2,revertLane:jp(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Ru(i)){if(r)throw Error(n(479))}else r=bf(i,u,f,2),r!==null&&kn(r,i,2)}function Ru(i){var r=i.alternate;return i===It||r!==null&&r===It}function Rb(i,r){Vr=wu=!0;var u=i.pending;u===null?r.next=r:(r.next=u.next,u.next=r),i.pending=r}function Nb(i,r,u){if((u&4194048)!==0){var f=r.lanes;f&=i.pendingLanes,u|=f,r.lanes=u,jv(i,u)}}var Sl={readContext:tn,use:Cu,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useLayoutEffect:Te,useInsertionEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useSyncExternalStore:Te,useId:Te,useHostTransitionStatus:Te,useFormState:Te,useActionState:Te,useOptimistic:Te,useMemoCache:Te,useCacheRefresh:Te};Sl.useEffectEvent=Te;var Db={readContext:tn,use:Cu,useCallback:function(i,r){return vn().memoizedState=[i,r===void 0?null:r],i},useContext:tn,useEffect:fb,useImperativeHandle:function(i,r,u){u=u!=null?u.concat([i]):null,_u(4194308,4,yb.bind(null,r,i),u)},useLayoutEffect:function(i,r){return _u(4194308,4,i,r)},useInsertionEffect:function(i,r){_u(4,2,i,r)},useMemo:function(i,r){var u=vn();r=r===void 0?null:r;var f=i();if(za){ks(!0);try{i()}finally{ks(!1)}}return u.memoizedState=[f,r],f},useReducer:function(i,r,u){var f=vn();if(u!==void 0){var v=u(r);if(za){ks(!0);try{u(r)}finally{ks(!1)}}}else v=r;return f.memoizedState=f.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},f.queue=i,i=i.dispatch=gN.bind(null,It,i),[f.memoizedState,i]},useRef:function(i){var r=vn();return i={current:i},r.memoizedState=i},useState:function(i){i=Wf(i);var r=i.queue,u=Tb.bind(null,It,r);return r.dispatch=u,[i.memoizedState,u]},useDebugValue:Zf,useDeferredValue:function(i,r){var u=vn();return Jf(u,i,r)},useTransition:function(){var i=Wf(!1);return i=Sb.bind(null,It,i.queue,!0,!1),vn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,u){var f=It,v=vn();if(Kt){if(u===void 0)throw Error(n(407));u=u()}else{if(u=r(),ue===null)throw Error(n(349));(Xt&127)!==0||Q0(f,r,u)}v.memoizedState=u;var b={value:u,getSnapshot:r};return v.queue=b,fb(J0.bind(null,f,b,i),[i]),f.flags|=2048,$r(9,{destroy:void 0},Z0.bind(null,f,b,u,r),null),u},useId:function(){var i=vn(),r=ue.identifierPrefix;if(Kt){var u=js,f=Ls;u=(f&~(1<<32-yn(f)-1)).toString(32)+u,r="_"+r+"R_"+u,u=Su++,0<u&&(r+="H"+u.toString(32)),r+="_"}else u=cN++,r="_"+r+"r_"+u.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:ep,useFormState:lb,useActionState:lb,useOptimistic:function(i){var r=vn();r.memoizedState=r.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=u,r=np.bind(null,It,!0,u),u.dispatch=r,[i,r]},useMemoCache:qf,useCacheRefresh:function(){return vn().memoizedState=mN.bind(null,It)},useEffectEvent:function(i){var r=vn(),u={impl:i};return r.memoizedState=u,function(){if((se&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}},sp={readContext:tn,use:Cu,useCallback:bb,useContext:tn,useEffect:Qf,useImperativeHandle:vb,useInsertionEffect:mb,useLayoutEffect:gb,useMemo:xb,useReducer:Eu,useRef:hb,useState:function(){return Eu(li)},useDebugValue:Zf,useDeferredValue:function(i,r){var u=Me();return wb(u,re.memoizedState,i,r)},useTransition:function(){var i=Eu(li)[0],r=Me().memoizedState;return[typeof i=="boolean"?i:xl(i),r]},useSyncExternalStore:K0,useId:Eb,useHostTransitionStatus:ep,useFormState:cb,useActionState:cb,useOptimistic:function(i,r){var u=Me();return nb(u,re,i,r)},useMemoCache:qf,useCacheRefresh:_b};sp.useEffectEvent=pb;var Mb={readContext:tn,use:Cu,useCallback:bb,useContext:tn,useEffect:Qf,useImperativeHandle:vb,useInsertionEffect:mb,useLayoutEffect:gb,useMemo:xb,useReducer:Yf,useRef:hb,useState:function(){return Yf(li)},useDebugValue:Zf,useDeferredValue:function(i,r){var u=Me();return re===null?Jf(u,i,r):wb(u,re.memoizedState,i,r)},useTransition:function(){var i=Yf(li)[0],r=Me().memoizedState;return[typeof i=="boolean"?i:xl(i),r]},useSyncExternalStore:K0,useId:Eb,useHostTransitionStatus:ep,useFormState:db,useActionState:db,useOptimistic:function(i,r){var u=Me();return re!==null?nb(u,re,i,r):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:qf,useCacheRefresh:_b};Mb.useEffectEvent=pb;function ip(i,r,u,f){r=i.memoizedState,u=u(f,r),u=u==null?r:m({},r,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var ap={enqueueSetState:function(i,r,u){i=i._reactInternals;var f=qn(),v=Ii(f);v.payload=r,u!=null&&(v.callback=u),r=zi(i,v,f),r!==null&&(kn(r,i,f),gl(r,i,f))},enqueueReplaceState:function(i,r,u){i=i._reactInternals;var f=qn(),v=Ii(f);v.tag=1,v.payload=r,u!=null&&(v.callback=u),r=zi(i,v,f),r!==null&&(kn(r,i,f),gl(r,i,f))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var u=qn(),f=Ii(u);f.tag=2,r!=null&&(f.callback=r),r=zi(i,f,u),r!==null&&(kn(r,i,u),gl(r,i,u))}};function kb(i,r,u,f,v,b,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,b,_):r.prototype&&r.prototype.isPureReactComponent?!ll(u,f)||!ll(v,b):!0}function Lb(i,r,u,f){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(u,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(u,f),r.state!==i&&ap.enqueueReplaceState(r,r.state,null)}function Ua(i,r){var u=r;if("ref"in r){u={};for(var f in r)f!=="ref"&&(u[f]=r[f])}if(i=i.defaultProps){u===r&&(u=m({},u));for(var v in i)u[v]===void 0&&(u[v]=i[v])}return u}function jb(i){ru(i)}function Ob(i){console.error(i)}function Pb(i){ru(i)}function Nu(i,r){try{var u=i.onUncaughtError;u(r.value,{componentStack:r.stack})}catch(f){setTimeout(function(){throw f})}}function Fb(i,r,u){try{var f=i.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function rp(i,r,u){return u=Ii(u),u.tag=3,u.payload={element:null},u.callback=function(){Nu(i,r)},u}function Bb(i){return i=Ii(i),i.tag=3,i}function Ib(i,r,u,f){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var b=f.value;i.payload=function(){return v(b)},i.callback=function(){Fb(r,u,f)}}var _=u.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(i.callback=function(){Fb(r,u,f),typeof v!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var M=f.stack;this.componentDidCatch(f.value,{componentStack:M!==null?M:""})})}function yN(i,r,u,f,v){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(r=u.alternate,r!==null&&Pr(r,u,v,!0),u=Vn.current,u!==null){switch(u.tag){case 31:case 13:return ls===null?Uu():u.alternate===null&&Re===0&&(Re=3),u.flags&=-257,u.flags|=65536,u.lanes=v,f===gu?u.flags|=16384:(r=u.updateQueue,r===null?u.updateQueue=new Set([f]):r.add(f),Mp(i,f,v)),!1;case 22:return u.flags|=65536,f===gu?u.flags|=16384:(r=u.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=r):(u=r.retryQueue,u===null?r.retryQueue=new Set([f]):u.add(f)),Mp(i,f,v)),!1}throw Error(n(435,u.tag))}return Mp(i,f,v),Uu(),!1}if(Kt)return r=Vn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=v,f!==Ef&&(i=Error(n(422),{cause:f}),dl(is(i,u)))):(f!==Ef&&(r=Error(n(423),{cause:f}),dl(is(r,u))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,f=is(f,u),v=rp(i.stateNode,f,v),Pf(i,v),Re!==4&&(Re=2)),!1;var b=Error(n(520),{cause:f});if(b=is(b,u),Dl===null?Dl=[b]:Dl.push(b),Re!==4&&(Re=2),r===null)return!0;f=is(f,u),u=r;do{switch(u.tag){case 3:return u.flags|=65536,i=v&-v,u.lanes|=i,i=rp(u.stateNode,f,i),Pf(u,i),!1;case 1:if(r=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(qi===null||!qi.has(b))))return u.flags|=65536,v&=-v,u.lanes|=v,v=Bb(v),Ib(v,i,u,f),Pf(u,v),!1}u=u.return}while(u!==null);return!1}var op=Error(n(461)),Fe=!1;function en(i,r,u,f){r.child=i===null?H0(r,null,u,f):Ia(r,i.child,u,f)}function zb(i,r,u,f,v){u=u.render;var b=r.ref;if("ref"in f){var _={};for(var M in f)M!=="ref"&&(_[M]=f[M])}else _=f;return Oa(r),f=Vf(i,r,u,_,b,v),M=Hf(),i!==null&&!Fe?($f(i,r,v),ci(i,r,v)):(Kt&&M&&Af(r),r.flags|=1,en(i,r,f,v),r.child)}function Ub(i,r,u,f,v){if(i===null){var b=u.type;return typeof b=="function"&&!xf(b)&&b.defaultProps===void 0&&u.compare===null?(r.tag=15,r.type=b,Vb(i,r,b,f,v)):(i=uu(u.type,null,f,r,r.mode,v),i.ref=r.ref,i.return=r,r.child=i)}if(b=i.child,!mp(i,v)){var _=b.memoizedProps;if(u=u.compare,u=u!==null?u:ll,u(_,f)&&i.ref===r.ref)return ci(i,r,v)}return r.flags|=1,i=si(b,f),i.ref=r.ref,i.return=r,r.child=i}function Vb(i,r,u,f,v){if(i!==null){var b=i.memoizedProps;if(ll(b,f)&&i.ref===r.ref)if(Fe=!1,r.pendingProps=f=b,mp(i,v))(i.flags&131072)!==0&&(Fe=!0);else return r.lanes=i.lanes,ci(i,r,v)}return lp(i,r,u,f,v)}function Hb(i,r,u,f){var v=f.children,b=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((r.flags&128)!==0){if(b=b!==null?b.baseLanes|u:u,i!==null){for(f=r.child=i.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~b}else f=0,r.child=null;return $b(i,r,b,u,f)}if((u&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&pu(r,b!==null?b.cachePool:null),b!==null?q0(r,b):Bf(),X0(r);else return f=r.lanes=536870912,$b(i,r,b!==null?b.baseLanes|u:u,u,f)}else b!==null?(pu(r,b.cachePool),q0(r,b),Vi(),r.memoizedState=null):(i!==null&&pu(r,null),Bf(),Vi());return en(i,r,v,u),r.child}function Al(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function $b(i,r,u,f,v){var b=kf();return b=b===null?null:{parent:Oe._currentValue,pool:b},r.memoizedState={baseLanes:u,cachePool:b},i!==null&&pu(r,null),Bf(),X0(r),i!==null&&Pr(i,r,f,!0),r.childLanes=v,null}function Du(i,r){return r=ku({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function Gb(i,r,u){return Ia(r,i.child,null,u),i=Du(r,r.pendingProps),i.flags|=2,Hn(r),r.memoizedState=null,i}function vN(i,r,u){var f=r.pendingProps,v=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Kt){if(f.mode==="hidden")return i=Du(r,f),r.lanes=536870912,Al(null,i);if(zf(r),(i=pe)?(i=sw(i,os),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:ji!==null?{id:Ls,overflow:js}:null,retryLane:536870912,hydrationErrors:null},u=R0(i),u.return=r,r.child=u,Je=r,pe=null)):i=null,i===null)throw Pi(r);return r.lanes=536870912,null}return Du(r,f)}var b=i.memoizedState;if(b!==null){var _=b.dehydrated;if(zf(r),v)if(r.flags&256)r.flags&=-257,r=Gb(i,r,u);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(n(558));else if(Fe||Pr(i,r,u,!1),v=(u&i.childLanes)!==0,Fe||v){if(f=ue,f!==null&&(_=Ov(f,u),_!==0&&_!==b.retryLane))throw b.retryLane=_,Ma(i,_),kn(f,i,_),op;Uu(),r=Gb(i,r,u)}else i=b.treeContext,pe=cs(_.nextSibling),Je=r,Kt=!0,Oi=null,os=!1,i!==null&&M0(r,i),r=Du(r,f),r.flags|=4096;return r}return i=si(i.child,{mode:f.mode,children:f.children}),i.ref=r.ref,r.child=i,i.return=r,i}function Mu(i,r){var u=r.ref;if(u===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(i===null||i.ref!==u)&&(r.flags|=4194816)}}function lp(i,r,u,f,v){return Oa(r),u=Vf(i,r,u,f,void 0,v),f=Hf(),i!==null&&!Fe?($f(i,r,v),ci(i,r,v)):(Kt&&f&&Af(r),r.flags|=1,en(i,r,u,v),r.child)}function qb(i,r,u,f,v,b){return Oa(r),r.updateQueue=null,u=W0(r,f,u,v),Y0(i),f=Hf(),i!==null&&!Fe?($f(i,r,b),ci(i,r,b)):(Kt&&f&&Af(r),r.flags|=1,en(i,r,u,b),r.child)}function Xb(i,r,u,f,v){if(Oa(r),r.stateNode===null){var b=kr,_=u.contextType;typeof _=="object"&&_!==null&&(b=tn(_)),b=new u(f,b),r.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=ap,r.stateNode=b,b._reactInternals=r,b=r.stateNode,b.props=f,b.state=r.memoizedState,b.refs={},jf(r),_=u.contextType,b.context=typeof _=="object"&&_!==null?tn(_):kr,b.state=r.memoizedState,_=u.getDerivedStateFromProps,typeof _=="function"&&(ip(r,u,_,f),b.state=r.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(_=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),_!==b.state&&ap.enqueueReplaceState(b,b.state,null),vl(r,f,b,v),yl(),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308),f=!0}else if(i===null){b=r.stateNode;var M=r.memoizedProps,z=Ua(u,M);b.props=z;var K=b.context,it=u.contextType;_=kr,typeof it=="object"&&it!==null&&(_=tn(it));var ct=u.getDerivedStateFromProps;it=typeof ct=="function"||typeof b.getSnapshotBeforeUpdate=="function",M=r.pendingProps!==M,it||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(M||K!==_)&&Lb(r,b,f,_),Bi=!1;var Q=r.memoizedState;b.state=Q,vl(r,f,b,v),yl(),K=r.memoizedState,M||Q!==K||Bi?(typeof ct=="function"&&(ip(r,u,ct,f),K=r.memoizedState),(z=Bi||kb(r,u,z,f,Q,K,_))?(it||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(r.flags|=4194308)):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=K),b.props=f,b.state=K,b.context=_,f=z):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{b=r.stateNode,Of(i,r),_=r.memoizedProps,it=Ua(u,_),b.props=it,ct=r.pendingProps,Q=b.context,K=u.contextType,z=kr,typeof K=="object"&&K!==null&&(z=tn(K)),M=u.getDerivedStateFromProps,(K=typeof M=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_!==ct||Q!==z)&&Lb(r,b,f,z),Bi=!1,Q=r.memoizedState,b.state=Q,vl(r,f,b,v),yl();var nt=r.memoizedState;_!==ct||Q!==nt||Bi||i!==null&&i.dependencies!==null&&hu(i.dependencies)?(typeof M=="function"&&(ip(r,u,M,f),nt=r.memoizedState),(it=Bi||kb(r,u,it,f,Q,nt,z)||i!==null&&i.dependencies!==null&&hu(i.dependencies))?(K||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,nt,z),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,nt,z)),typeof b.componentDidUpdate=="function"&&(r.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof b.componentDidUpdate!="function"||_===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=nt),b.props=f,b.state=nt,b.context=z,f=it):(typeof b.componentDidUpdate!="function"||_===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),f=!1)}return b=f,Mu(i,r),f=(r.flags&128)!==0,b||f?(b=r.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:b.render(),r.flags|=1,i!==null&&f?(r.child=Ia(r,i.child,null,v),r.child=Ia(r,null,u,v)):en(i,r,u,v),r.memoizedState=b.state,i=r.child):i=ci(i,r,v),i}function Yb(i,r,u,f){return La(),r.flags|=256,en(i,r,u,f),r.child}var cp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function up(i){return{baseLanes:i,cachePool:F0()}}function dp(i,r,u){return i=i!==null?i.childLanes&~u:0,r&&(i|=Gn),i}function Wb(i,r,u){var f=r.pendingProps,v=!1,b=(r.flags&128)!==0,_;if((_=b)||(_=i!==null&&i.memoizedState===null?!1:(De.current&2)!==0),_&&(v=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,i===null){if(Kt){if(v?Ui(r):Vi(),(i=pe)?(i=sw(i,os),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:ji!==null?{id:Ls,overflow:js}:null,retryLane:536870912,hydrationErrors:null},u=R0(i),u.return=r,r.child=u,Je=r,pe=null)):i=null,i===null)throw Pi(r);return Xp(i)?r.lanes=32:r.lanes=536870912,null}var M=f.children;return f=f.fallback,v?(Vi(),v=r.mode,M=ku({mode:"hidden",children:M},v),f=ka(f,v,u,null),M.return=r,f.return=r,M.sibling=f,r.child=M,f=r.child,f.memoizedState=up(u),f.childLanes=dp(i,_,u),r.memoizedState=cp,Al(null,f)):(Ui(r),hp(r,M))}var z=i.memoizedState;if(z!==null&&(M=z.dehydrated,M!==null)){if(b)r.flags&256?(Ui(r),r.flags&=-257,r=fp(i,r,u)):r.memoizedState!==null?(Vi(),r.child=i.child,r.flags|=128,r=null):(Vi(),M=f.fallback,v=r.mode,f=ku({mode:"visible",children:f.children},v),M=ka(M,v,u,null),M.flags|=2,f.return=r,M.return=r,f.sibling=M,r.child=f,Ia(r,i.child,null,u),f=r.child,f.memoizedState=up(u),f.childLanes=dp(i,_,u),r.memoizedState=cp,r=Al(null,f));else if(Ui(r),Xp(M)){if(_=M.nextSibling&&M.nextSibling.dataset,_)var K=_.dgst;_=K,f=Error(n(419)),f.stack="",f.digest=_,dl({value:f,source:null,stack:null}),r=fp(i,r,u)}else if(Fe||Pr(i,r,u,!1),_=(u&i.childLanes)!==0,Fe||_){if(_=ue,_!==null&&(f=Ov(_,u),f!==0&&f!==z.retryLane))throw z.retryLane=f,Ma(i,f),kn(_,i,f),op;qp(M)||Uu(),r=fp(i,r,u)}else qp(M)?(r.flags|=192,r.child=i.child,r=null):(i=z.treeContext,pe=cs(M.nextSibling),Je=r,Kt=!0,Oi=null,os=!1,i!==null&&M0(r,i),r=hp(r,f.children),r.flags|=4096);return r}return v?(Vi(),M=f.fallback,v=r.mode,z=i.child,K=z.sibling,f=si(z,{mode:"hidden",children:f.children}),f.subtreeFlags=z.subtreeFlags&65011712,K!==null?M=si(K,M):(M=ka(M,v,u,null),M.flags|=2),M.return=r,f.return=r,f.sibling=M,r.child=f,Al(null,f),f=r.child,M=i.child.memoizedState,M===null?M=up(u):(v=M.cachePool,v!==null?(z=Oe._currentValue,v=v.parent!==z?{parent:z,pool:z}:v):v=F0(),M={baseLanes:M.baseLanes|u,cachePool:v}),f.memoizedState=M,f.childLanes=dp(i,_,u),r.memoizedState=cp,Al(i.child,f)):(Ui(r),u=i.child,i=u.sibling,u=si(u,{mode:"visible",children:f.children}),u.return=r,u.sibling=null,i!==null&&(_=r.deletions,_===null?(r.deletions=[i],r.flags|=16):_.push(i)),r.child=u,r.memoizedState=null,u)}function hp(i,r){return r=ku({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function ku(i,r){return i=Un(22,i,null,r),i.lanes=0,i}function fp(i,r,u){return Ia(r,i.child,null,u),i=hp(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Kb(i,r,u){i.lanes|=r;var f=i.alternate;f!==null&&(f.lanes|=r),Rf(i.return,r,u)}function pp(i,r,u,f,v,b){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:v,treeForkCount:b}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=u,_.tailMode=v,_.treeForkCount=b)}function Qb(i,r,u){var f=r.pendingProps,v=f.revealOrder,b=f.tail;f=f.children;var _=De.current,M=(_&2)!==0;if(M?(_=_&1|2,r.flags|=128):_&=1,tt(De,_),en(i,r,f,u),f=Kt?ul:0,!M&&i!==null&&(i.flags&128)!==0)t:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Kb(i,u,r);else if(i.tag===19)Kb(i,u,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break t;for(;i.sibling===null;){if(i.return===null||i.return===r)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(v){case"forwards":for(u=r.child,v=null;u!==null;)i=u.alternate,i!==null&&xu(i)===null&&(v=u),u=u.sibling;u=v,u===null?(v=r.child,r.child=null):(v=u.sibling,u.sibling=null),pp(r,!1,v,u,b,f);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=r.child,r.child=null;v!==null;){if(i=v.alternate,i!==null&&xu(i)===null){r.child=v;break}i=v.sibling,v.sibling=u,u=v,v=i}pp(r,!0,u,null,b,f);break;case"together":pp(r,!1,null,null,void 0,f);break;default:r.memoizedState=null}return r.child}function ci(i,r,u){if(i!==null&&(r.dependencies=i.dependencies),Gi|=r.lanes,(u&r.childLanes)===0)if(i!==null){if(Pr(i,r,u,!1),(u&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(n(153));if(r.child!==null){for(i=r.child,u=si(i,i.pendingProps),r.child=u,u.return=r;i.sibling!==null;)i=i.sibling,u=u.sibling=si(i,i.pendingProps),u.return=r;u.sibling=null}return r.child}function mp(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&hu(i)))}function bN(i,r,u){switch(r.tag){case 3:yt(r,r.stateNode.containerInfo),Fi(r,Oe,i.memoizedState.cache),La();break;case 27:case 5:Tt(r);break;case 4:yt(r,r.stateNode.containerInfo);break;case 10:Fi(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,zf(r),null;break;case 13:var f=r.memoizedState;if(f!==null)return f.dehydrated!==null?(Ui(r),r.flags|=128,null):(u&r.child.childLanes)!==0?Wb(i,r,u):(Ui(r),i=ci(i,r,u),i!==null?i.sibling:null);Ui(r);break;case 19:var v=(i.flags&128)!==0;if(f=(u&r.childLanes)!==0,f||(Pr(i,r,u,!1),f=(u&r.childLanes)!==0),v){if(f)return Qb(i,r,u);r.flags|=128}if(v=r.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),tt(De,De.current),f)break;return null;case 22:return r.lanes=0,Hb(i,r,u,r.pendingProps);case 24:Fi(r,Oe,i.memoizedState.cache)}return ci(i,r,u)}function Zb(i,r,u){if(i!==null)if(i.memoizedProps!==r.pendingProps)Fe=!0;else{if(!mp(i,u)&&(r.flags&128)===0)return Fe=!1,bN(i,r,u);Fe=(i.flags&131072)!==0}else Fe=!1,Kt&&(r.flags&1048576)!==0&&D0(r,ul,r.index);switch(r.lanes=0,r.tag){case 16:t:{var f=r.pendingProps;if(i=Fa(r.elementType),r.type=i,typeof i=="function")xf(i)?(f=Ua(i,f),r.tag=1,r=Xb(null,r,i,f,u)):(r.tag=0,r=lp(null,r,i,f,u));else{if(i!=null){var v=i.$$typeof;if(v===N){r.tag=11,r=zb(null,r,i,f,u);break t}else if(v===k){r.tag=14,r=Ub(null,r,i,f,u);break t}}throw r=q(i)||i,Error(n(306,r,""))}}return r;case 0:return lp(i,r,r.type,r.pendingProps,u);case 1:return f=r.type,v=Ua(f,r.pendingProps),Xb(i,r,f,v,u);case 3:t:{if(yt(r,r.stateNode.containerInfo),i===null)throw Error(n(387));f=r.pendingProps;var b=r.memoizedState;v=b.element,Of(i,r),vl(r,f,null,u);var _=r.memoizedState;if(f=_.cache,Fi(r,Oe,f),f!==b.cache&&Nf(r,[Oe],u,!0),yl(),f=_.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=b,r.memoizedState=b,r.flags&256){r=Yb(i,r,f,u);break t}else if(f!==v){v=is(Error(n(424)),r),dl(v),r=Yb(i,r,f,u);break t}else for(i=r.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,pe=cs(i.firstChild),Je=r,Kt=!0,Oi=null,os=!0,u=H0(r,null,f,u),r.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(La(),f===v){r=ci(i,r,u);break t}en(i,r,f,u)}r=r.child}return r;case 26:return Mu(i,r),i===null?(u=cw(r.type,null,r.pendingProps,null))?r.memoizedState=u:Kt||(u=r.type,i=r.pendingProps,f=Yu(st.current).createElement(u),f[Ze]=r,f[_n]=i,nn(f,u,i),qe(f),r.stateNode=f):r.memoizedState=cw(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Tt(r),i===null&&Kt&&(f=r.stateNode=rw(r.type,r.pendingProps,st.current),Je=r,os=!0,v=pe,Ki(r.type)?(Yp=v,pe=cs(f.firstChild)):pe=v),en(i,r,r.pendingProps.children,u),Mu(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Kt&&((v=f=pe)&&(f=WN(f,r.type,r.pendingProps,os),f!==null?(r.stateNode=f,Je=r,pe=cs(f.firstChild),os=!1,v=!0):v=!1),v||Pi(r)),Tt(r),v=r.type,b=r.pendingProps,_=i!==null?i.memoizedProps:null,f=b.children,Hp(v,b)?f=null:_!==null&&Hp(v,_)&&(r.flags|=32),r.memoizedState!==null&&(v=Vf(i,r,uN,null,null,u),Bl._currentValue=v),Mu(i,r),en(i,r,f,u),r.child;case 6:return i===null&&Kt&&((i=u=pe)&&(u=KN(u,r.pendingProps,os),u!==null?(r.stateNode=u,Je=r,pe=null,i=!0):i=!1),i||Pi(r)),null;case 13:return Wb(i,r,u);case 4:return yt(r,r.stateNode.containerInfo),f=r.pendingProps,i===null?r.child=Ia(r,null,f,u):en(i,r,f,u),r.child;case 11:return zb(i,r,r.type,r.pendingProps,u);case 7:return en(i,r,r.pendingProps,u),r.child;case 8:return en(i,r,r.pendingProps.children,u),r.child;case 12:return en(i,r,r.pendingProps.children,u),r.child;case 10:return f=r.pendingProps,Fi(r,r.type,f.value),en(i,r,f.children,u),r.child;case 9:return v=r.type._context,f=r.pendingProps.children,Oa(r),v=tn(v),f=f(v),r.flags|=1,en(i,r,f,u),r.child;case 14:return Ub(i,r,r.type,r.pendingProps,u);case 15:return Vb(i,r,r.type,r.pendingProps,u);case 19:return Qb(i,r,u);case 31:return vN(i,r,u);case 22:return Hb(i,r,u,r.pendingProps);case 24:return Oa(r),f=tn(Oe),i===null?(v=kf(),v===null&&(v=ue,b=Df(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=u),v=b),r.memoizedState={parent:f,cache:v},jf(r),Fi(r,Oe,v)):((i.lanes&u)!==0&&(Of(i,r),vl(r,null,null,u),yl()),v=i.memoizedState,b=r.memoizedState,v.parent!==f?(v={parent:f,cache:f},r.memoizedState=v,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=v),Fi(r,Oe,f)):(f=b.cache,Fi(r,Oe,f),f!==v.cache&&Nf(r,[Oe],u,!0))),en(i,r,r.pendingProps.children,u),r.child;case 29:throw r.pendingProps}throw Error(n(156,r.tag))}function ui(i){i.flags|=4}function gp(i,r,u,f,v){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(v&335544128)===v)if(i.stateNode.complete)i.flags|=8192;else if(Ex())i.flags|=8192;else throw Ba=gu,Lf}else i.flags&=-16777217}function Jb(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!pw(r))if(Ex())i.flags|=8192;else throw Ba=gu,Lf}function Lu(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?kv():536870912,i.lanes|=r,Yr|=r)}function Cl(i,r){if(!Kt)switch(i.tailMode){case"hidden":r=i.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function me(i){var r=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(r)for(var v=i.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)u|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=f,i.childLanes=u,r}function xN(i,r,u){var f=r.pendingProps;switch(Cf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return me(r),null;case 1:return me(r),null;case 3:return u=r.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),ri(Oe),vt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(Or(r)?ui(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,_f())),me(r),null;case 26:var v=r.type,b=r.memoizedState;return i===null?(ui(r),b!==null?(me(r),Jb(r,b)):(me(r),gp(r,v,null,f,u))):b?b!==i.memoizedState?(ui(r),me(r),Jb(r,b)):(me(r),r.flags&=-16777217):(i=i.memoizedProps,i!==f&&ui(r),me(r),gp(r,v,i,f,u)),null;case 27:if(X(r),u=st.current,v=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==f&&ui(r);else{if(!f){if(r.stateNode===null)throw Error(n(166));return me(r),null}i=lt.current,Or(r)?k0(r):(i=rw(v,f,u),r.stateNode=i,ui(r))}return me(r),null;case 5:if(X(r),v=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==f&&ui(r);else{if(!f){if(r.stateNode===null)throw Error(n(166));return me(r),null}if(b=lt.current,Or(r))k0(r);else{var _=Yu(st.current);switch(b){case 1:b=_.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:b=_.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":b=_.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":b=_.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":b=_.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof f.is=="string"?_.createElement("select",{is:f.is}):_.createElement("select"),f.multiple?b.multiple=!0:f.size&&(b.size=f.size);break;default:b=typeof f.is=="string"?_.createElement(v,{is:f.is}):_.createElement(v)}}b[Ze]=r,b[_n]=f;t:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)b.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break t;for(;_.sibling===null;){if(_.return===null||_.return===r)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=b;t:switch(nn(b,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break t;case"img":f=!0;break t;default:f=!1}f&&ui(r)}}return me(r),gp(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,u),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==f&&ui(r);else{if(typeof f!="string"&&r.stateNode===null)throw Error(n(166));if(i=st.current,Or(r)){if(i=r.stateNode,u=r.memoizedProps,f=null,v=Je,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}i[Ze]=r,i=!!(i.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||Wx(i.nodeValue,u)),i||Pi(r,!0)}else i=Yu(i).createTextNode(f),i[Ze]=r,r.stateNode=i}return me(r),null;case 31:if(u=r.memoizedState,i===null||i.memoizedState!==null){if(f=Or(r),u!==null){if(i===null){if(!f)throw Error(n(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[Ze]=r}else La(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;me(r),i=!1}else u=_f(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=u),i=!0;if(!i)return r.flags&256?(Hn(r),r):(Hn(r),null);if((r.flags&128)!==0)throw Error(n(558))}return me(r),null;case 13:if(f=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=Or(r),f!==null&&f.dehydrated!==null){if(i===null){if(!v)throw Error(n(318));if(v=r.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[Ze]=r}else La(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;me(r),v=!1}else v=_f(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return r.flags&256?(Hn(r),r):(Hn(r),null)}return Hn(r),(r.flags&128)!==0?(r.lanes=u,r):(u=f!==null,i=i!==null&&i.memoizedState!==null,u&&(f=r.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==v&&(f.flags|=2048)),u!==i&&u&&(r.child.flags|=8192),Lu(r,r.updateQueue),me(r),null);case 4:return vt(),i===null&&Bp(r.stateNode.containerInfo),me(r),null;case 10:return ri(r.type),me(r),null;case 19:if(G(De),f=r.memoizedState,f===null)return me(r),null;if(v=(r.flags&128)!==0,b=f.rendering,b===null)if(v)Cl(f,!1);else{if(Re!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(b=xu(i),b!==null){for(r.flags|=128,Cl(f,!1),i=b.updateQueue,r.updateQueue=i,Lu(r,i),r.subtreeFlags=0,i=u,u=r.child;u!==null;)T0(u,i),u=u.sibling;return tt(De,De.current&1|2),Kt&&ii(r,f.treeForkCount),r.child}i=i.sibling}f.tail!==null&&Ge()>Bu&&(r.flags|=128,v=!0,Cl(f,!1),r.lanes=4194304)}else{if(!v)if(i=xu(b),i!==null){if(r.flags|=128,v=!0,i=i.updateQueue,r.updateQueue=i,Lu(r,i),Cl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!b.alternate&&!Kt)return me(r),null}else 2*Ge()-f.renderingStartTime>Bu&&u!==536870912&&(r.flags|=128,v=!0,Cl(f,!1),r.lanes=4194304);f.isBackwards?(b.sibling=r.child,r.child=b):(i=f.last,i!==null?i.sibling=b:r.child=b,f.last=b)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Ge(),i.sibling=null,u=De.current,tt(De,v?u&1|2:u&1),Kt&&ii(r,f.treeForkCount),i):(me(r),null);case 22:case 23:return Hn(r),If(),f=r.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(r.flags|=8192):f&&(r.flags|=8192),f?(u&536870912)!==0&&(r.flags&128)===0&&(me(r),r.subtreeFlags&6&&(r.flags|=8192)):me(r),u=r.updateQueue,u!==null&&Lu(r,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==u&&(r.flags|=2048),i!==null&&G(Pa),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),ri(Oe),me(r),null;case 25:return null;case 30:return null}throw Error(n(156,r.tag))}function wN(i,r){switch(Cf(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return ri(Oe),vt(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return X(r),null;case 31:if(r.memoizedState!==null){if(Hn(r),r.alternate===null)throw Error(n(340));La()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Hn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(n(340));La()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return G(De),null;case 4:return vt(),null;case 10:return ri(r.type),null;case 22:case 23:return Hn(r),If(),i!==null&&G(Pa),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return ri(Oe),null;case 25:return null;default:return null}}function tx(i,r){switch(Cf(r),r.tag){case 3:ri(Oe),vt();break;case 26:case 27:case 5:X(r);break;case 4:vt();break;case 31:r.memoizedState!==null&&Hn(r);break;case 13:Hn(r);break;case 19:G(De);break;case 10:ri(r.type);break;case 22:case 23:Hn(r),If(),i!==null&&G(Pa);break;case 24:ri(Oe)}}function El(i,r){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var v=f.next;u=v;do{if((u.tag&i)===i){f=void 0;var b=u.create,_=u.inst;f=b(),_.destroy=f}u=u.next}while(u!==v)}}catch(M){ae(r,r.return,M)}}function Hi(i,r,u){try{var f=r.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var b=v.next;f=b;do{if((f.tag&i)===i){var _=f.inst,M=_.destroy;if(M!==void 0){_.destroy=void 0,v=r;var z=u,K=M;try{K()}catch(it){ae(v,z,it)}}}f=f.next}while(f!==b)}}catch(it){ae(r,r.return,it)}}function ex(i){var r=i.updateQueue;if(r!==null){var u=i.stateNode;try{G0(r,u)}catch(f){ae(i,i.return,f)}}}function nx(i,r,u){u.props=Ua(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(f){ae(i,r,f)}}function _l(i,r){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof u=="function"?i.refCleanup=u(f):u.current=f}}catch(v){ae(i,r,v)}}function Os(i,r){var u=i.ref,f=i.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(v){ae(i,r,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){ae(i,r,v)}else u.current=null}function sx(i){var r=i.type,u=i.memoizedProps,f=i.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break t;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(v){ae(i,i.return,v)}}function yp(i,r,u){try{var f=i.stateNode;HN(f,i.type,u,r),f[_n]=r}catch(v){ae(i,i.return,v)}}function ix(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ki(i.type)||i.tag===4}function vp(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||ix(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ki(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function bp(i,r,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,r?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,r):(r=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,r.appendChild(i),u=u._reactRootContainer,u!=null||r.onclick!==null||(r.onclick=ei));else if(f!==4&&(f===27&&Ki(i.type)&&(u=i.stateNode,r=null),i=i.child,i!==null))for(bp(i,r,u),i=i.sibling;i!==null;)bp(i,r,u),i=i.sibling}function ju(i,r,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,r?u.insertBefore(i,r):u.appendChild(i);else if(f!==4&&(f===27&&Ki(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(ju(i,r,u),i=i.sibling;i!==null;)ju(i,r,u),i=i.sibling}function ax(i){var r=i.stateNode,u=i.memoizedProps;try{for(var f=i.type,v=r.attributes;v.length;)r.removeAttributeNode(v[0]);nn(r,f,u),r[Ze]=i,r[_n]=u}catch(b){ae(i,i.return,b)}}var di=!1,Be=!1,xp=!1,rx=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function SN(i,r){if(i=i.containerInfo,Up=ed,i=v0(i),ff(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else t:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var v=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break t}var _=0,M=-1,z=-1,K=0,it=0,ct=i,Q=null;e:for(;;){for(var nt;ct!==u||v!==0&&ct.nodeType!==3||(M=_+v),ct!==b||f!==0&&ct.nodeType!==3||(z=_+f),ct.nodeType===3&&(_+=ct.nodeValue.length),(nt=ct.firstChild)!==null;)Q=ct,ct=nt;for(;;){if(ct===i)break e;if(Q===u&&++K===v&&(M=_),Q===b&&++it===f&&(z=_),(nt=ct.nextSibling)!==null)break;ct=Q,Q=ct.parentNode}ct=nt}u=M===-1||z===-1?null:{start:M,end:z}}else u=null}u=u||{start:0,end:0}}else u=null;for(Vp={focusedElem:i,selectionRange:u},ed=!1,Xe=r;Xe!==null;)if(r=Xe,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,Xe=i;else for(;Xe!==null;){switch(r=Xe,b=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(u=0;u<i.length;u++)v=i[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,u=r,v=b.memoizedProps,b=b.memoizedState,f=u.stateNode;try{var wt=Ua(u.type,v);i=f.getSnapshotBeforeUpdate(wt,b),f.__reactInternalSnapshotBeforeUpdate=i}catch(Dt){ae(u,u.return,Dt)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,u=i.nodeType,u===9)Gp(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Gp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=r.sibling,i!==null){i.return=r.return,Xe=i;break}Xe=r.return}}function ox(i,r,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:fi(i,u),f&4&&El(5,u);break;case 1:if(fi(i,u),f&4)if(i=u.stateNode,r===null)try{i.componentDidMount()}catch(_){ae(u,u.return,_)}else{var v=Ua(u.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(v,r,i.__reactInternalSnapshotBeforeUpdate)}catch(_){ae(u,u.return,_)}}f&64&&ex(u),f&512&&_l(u,u.return);break;case 3:if(fi(i,u),f&64&&(i=u.updateQueue,i!==null)){if(r=null,u.child!==null)switch(u.child.tag){case 27:case 5:r=u.child.stateNode;break;case 1:r=u.child.stateNode}try{G0(i,r)}catch(_){ae(u,u.return,_)}}break;case 27:r===null&&f&4&&ax(u);case 26:case 5:fi(i,u),r===null&&f&4&&sx(u),f&512&&_l(u,u.return);break;case 12:fi(i,u);break;case 31:fi(i,u),f&4&&ux(i,u);break;case 13:fi(i,u),f&4&&dx(i,u),f&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=MN.bind(null,u),QN(i,u))));break;case 22:if(f=u.memoizedState!==null||di,!f){r=r!==null&&r.memoizedState!==null||Be,v=di;var b=Be;di=f,(Be=r)&&!b?pi(i,u,(u.subtreeFlags&8772)!==0):fi(i,u),di=v,Be=b}break;case 30:break;default:fi(i,u)}}function lx(i){var r=i.alternate;r!==null&&(i.alternate=null,lx(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Wh(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var be=null,Rn=!1;function hi(i,r,u){for(u=u.child;u!==null;)cx(i,r,u),u=u.sibling}function cx(i,r,u){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Ea,u)}catch{}switch(u.tag){case 26:Be||Os(u,r),hi(i,r,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Be||Os(u,r);var f=be,v=Rn;Ki(u.type)&&(be=u.stateNode,Rn=!1),hi(i,r,u),Ol(u.stateNode),be=f,Rn=v;break;case 5:Be||Os(u,r);case 6:if(f=be,v=Rn,be=null,hi(i,r,u),be=f,Rn=v,be!==null)if(Rn)try{(be.nodeType===9?be.body:be.nodeName==="HTML"?be.ownerDocument.body:be).removeChild(u.stateNode)}catch(b){ae(u,r,b)}else try{be.removeChild(u.stateNode)}catch(b){ae(u,r,b)}break;case 18:be!==null&&(Rn?(i=be,ew(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),no(i)):ew(be,u.stateNode));break;case 4:f=be,v=Rn,be=u.stateNode.containerInfo,Rn=!0,hi(i,r,u),be=f,Rn=v;break;case 0:case 11:case 14:case 15:Hi(2,u,r),Be||Hi(4,u,r),hi(i,r,u);break;case 1:Be||(Os(u,r),f=u.stateNode,typeof f.componentWillUnmount=="function"&&nx(u,r,f)),hi(i,r,u);break;case 21:hi(i,r,u);break;case 22:Be=(f=Be)||u.memoizedState!==null,hi(i,r,u),Be=f;break;default:hi(i,r,u)}}function ux(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{no(i)}catch(u){ae(r,r.return,u)}}}function dx(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{no(i)}catch(u){ae(r,r.return,u)}}function AN(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new rx),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new rx),r;default:throw Error(n(435,i.tag))}}function Ou(i,r){var u=AN(i);r.forEach(function(f){if(!u.has(f)){u.add(f);var v=kN.bind(null,i,f);f.then(v,v)}})}function Nn(i,r){var u=r.deletions;if(u!==null)for(var f=0;f<u.length;f++){var v=u[f],b=i,_=r,M=_;t:for(;M!==null;){switch(M.tag){case 27:if(Ki(M.type)){be=M.stateNode,Rn=!1;break t}break;case 5:be=M.stateNode,Rn=!1;break t;case 3:case 4:be=M.stateNode.containerInfo,Rn=!0;break t}M=M.return}if(be===null)throw Error(n(160));cx(b,_,v),be=null,Rn=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)hx(r,i),r=r.sibling}var xs=null;function hx(i,r){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Nn(r,i),Dn(i),f&4&&(Hi(3,i,i.return),El(3,i),Hi(5,i,i.return));break;case 1:Nn(r,i),Dn(i),f&512&&(Be||u===null||Os(u,u.return)),f&64&&di&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var v=xs;if(Nn(r,i),Dn(i),f&512&&(Be||u===null||Os(u,u.return)),f&4){var b=u!==null?u.memoizedState:null;if(f=i.memoizedState,u===null)if(f===null)if(i.stateNode===null){t:{f=i.type,u=i.memoizedProps,v=v.ownerDocument||v;e:switch(f){case"title":b=v.getElementsByTagName("title")[0],(!b||b[Jo]||b[Ze]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(f),v.head.insertBefore(b,v.querySelector("head > title"))),nn(b,f,u),b[Ze]=i,qe(b),f=b;break t;case"link":var _=hw("link","href",v).get(f+(u.href||""));if(_){for(var M=0;M<_.length;M++)if(b=_[M],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){_.splice(M,1);break e}}b=v.createElement(f),nn(b,f,u),v.head.appendChild(b);break;case"meta":if(_=hw("meta","content",v).get(f+(u.content||""))){for(M=0;M<_.length;M++)if(b=_[M],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){_.splice(M,1);break e}}b=v.createElement(f),nn(b,f,u),v.head.appendChild(b);break;default:throw Error(n(468,f))}b[Ze]=i,qe(b),f=b}i.stateNode=f}else fw(v,i.type,i.stateNode);else i.stateNode=dw(v,f,i.memoizedProps);else b!==f?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,f===null?fw(v,i.type,i.stateNode):dw(v,f,i.memoizedProps)):f===null&&i.stateNode!==null&&yp(i,i.memoizedProps,u.memoizedProps)}break;case 27:Nn(r,i),Dn(i),f&512&&(Be||u===null||Os(u,u.return)),u!==null&&f&4&&yp(i,i.memoizedProps,u.memoizedProps);break;case 5:if(Nn(r,i),Dn(i),f&512&&(Be||u===null||Os(u,u.return)),i.flags&32){v=i.stateNode;try{Er(v,"")}catch(wt){ae(i,i.return,wt)}}f&4&&i.stateNode!=null&&(v=i.memoizedProps,yp(i,v,u!==null?u.memoizedProps:v)),f&1024&&(xp=!0);break;case 6:if(Nn(r,i),Dn(i),f&4){if(i.stateNode===null)throw Error(n(162));f=i.memoizedProps,u=i.stateNode;try{u.nodeValue=f}catch(wt){ae(i,i.return,wt)}}break;case 3:if(Qu=null,v=xs,xs=Wu(r.containerInfo),Nn(r,i),xs=v,Dn(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{no(r.containerInfo)}catch(wt){ae(i,i.return,wt)}xp&&(xp=!1,fx(i));break;case 4:f=xs,xs=Wu(i.stateNode.containerInfo),Nn(r,i),Dn(i),xs=f;break;case 12:Nn(r,i),Dn(i);break;case 31:Nn(r,i),Dn(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ou(i,f)));break;case 13:Nn(r,i),Dn(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Fu=Ge()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ou(i,f)));break;case 22:v=i.memoizedState!==null;var z=u!==null&&u.memoizedState!==null,K=di,it=Be;if(di=K||v,Be=it||z,Nn(r,i),Be=it,di=K,Dn(i),f&8192)t:for(r=i.stateNode,r._visibility=v?r._visibility&-2:r._visibility|1,v&&(u===null||z||di||Be||Va(i)),u=null,r=i;;){if(r.tag===5||r.tag===26){if(u===null){z=u=r;try{if(b=z.stateNode,v)_=b.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{M=z.stateNode;var ct=z.memoizedProps.style,Q=ct!=null&&ct.hasOwnProperty("display")?ct.display:null;M.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(wt){ae(z,z.return,wt)}}}else if(r.tag===6){if(u===null){z=r;try{z.stateNode.nodeValue=v?"":z.memoizedProps}catch(wt){ae(z,z.return,wt)}}}else if(r.tag===18){if(u===null){z=r;try{var nt=z.stateNode;v?nw(nt,!0):nw(z.stateNode,!1)}catch(wt){ae(z,z.return,wt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break t;for(;r.sibling===null;){if(r.return===null||r.return===i)break t;u===r&&(u=null),r=r.return}u===r&&(u=null),r.sibling.return=r.return,r=r.sibling}f&4&&(f=i.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,Ou(i,u))));break;case 19:Nn(r,i),Dn(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ou(i,f)));break;case 30:break;case 21:break;default:Nn(r,i),Dn(i)}}function Dn(i){var r=i.flags;if(r&2){try{for(var u,f=i.return;f!==null;){if(ix(f)){u=f;break}f=f.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var v=u.stateNode,b=vp(i);ju(i,b,v);break;case 5:var _=u.stateNode;u.flags&32&&(Er(_,""),u.flags&=-33);var M=vp(i);ju(i,M,_);break;case 3:case 4:var z=u.stateNode.containerInfo,K=vp(i);bp(i,K,z);break;default:throw Error(n(161))}}catch(it){ae(i,i.return,it)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function fx(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;fx(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function fi(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)ox(i,r.alternate,r),r=r.sibling}function Va(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Hi(4,r,r.return),Va(r);break;case 1:Os(r,r.return);var u=r.stateNode;typeof u.componentWillUnmount=="function"&&nx(r,r.return,u),Va(r);break;case 27:Ol(r.stateNode);case 26:case 5:Os(r,r.return),Va(r);break;case 22:r.memoizedState===null&&Va(r);break;case 30:Va(r);break;default:Va(r)}i=i.sibling}}function pi(i,r,u){for(u=u&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var f=r.alternate,v=i,b=r,_=b.flags;switch(b.tag){case 0:case 11:case 15:pi(v,b,u),El(4,b);break;case 1:if(pi(v,b,u),f=b,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(K){ae(f,f.return,K)}if(f=b,v=f.updateQueue,v!==null){var M=f.stateNode;try{var z=v.shared.hiddenCallbacks;if(z!==null)for(v.shared.hiddenCallbacks=null,v=0;v<z.length;v++)$0(z[v],M)}catch(K){ae(f,f.return,K)}}u&&_&64&&ex(b),_l(b,b.return);break;case 27:ax(b);case 26:case 5:pi(v,b,u),u&&f===null&&_&4&&sx(b),_l(b,b.return);break;case 12:pi(v,b,u);break;case 31:pi(v,b,u),u&&_&4&&ux(v,b);break;case 13:pi(v,b,u),u&&_&4&&dx(v,b);break;case 22:b.memoizedState===null&&pi(v,b,u),_l(b,b.return);break;case 30:break;default:pi(v,b,u)}r=r.sibling}}function wp(i,r){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&hl(u))}function Sp(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&hl(i))}function ws(i,r,u,f){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)px(i,r,u,f),r=r.sibling}function px(i,r,u,f){var v=r.flags;switch(r.tag){case 0:case 11:case 15:ws(i,r,u,f),v&2048&&El(9,r);break;case 1:ws(i,r,u,f);break;case 3:ws(i,r,u,f),v&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&hl(i)));break;case 12:if(v&2048){ws(i,r,u,f),i=r.stateNode;try{var b=r.memoizedProps,_=b.id,M=b.onPostCommit;typeof M=="function"&&M(_,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(z){ae(r,r.return,z)}}else ws(i,r,u,f);break;case 31:ws(i,r,u,f);break;case 13:ws(i,r,u,f);break;case 23:break;case 22:b=r.stateNode,_=r.alternate,r.memoizedState!==null?b._visibility&2?ws(i,r,u,f):Tl(i,r):b._visibility&2?ws(i,r,u,f):(b._visibility|=2,Gr(i,r,u,f,(r.subtreeFlags&10256)!==0||!1)),v&2048&&wp(_,r);break;case 24:ws(i,r,u,f),v&2048&&Sp(r.alternate,r);break;default:ws(i,r,u,f)}}function Gr(i,r,u,f,v){for(v=v&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var b=i,_=r,M=u,z=f,K=_.flags;switch(_.tag){case 0:case 11:case 15:Gr(b,_,M,z,v),El(8,_);break;case 23:break;case 22:var it=_.stateNode;_.memoizedState!==null?it._visibility&2?Gr(b,_,M,z,v):Tl(b,_):(it._visibility|=2,Gr(b,_,M,z,v)),v&&K&2048&&wp(_.alternate,_);break;case 24:Gr(b,_,M,z,v),v&&K&2048&&Sp(_.alternate,_);break;default:Gr(b,_,M,z,v)}r=r.sibling}}function Tl(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var u=i,f=r,v=f.flags;switch(f.tag){case 22:Tl(u,f),v&2048&&wp(f.alternate,f);break;case 24:Tl(u,f),v&2048&&Sp(f.alternate,f);break;default:Tl(u,f)}r=r.sibling}}var Rl=8192;function qr(i,r,u){if(i.subtreeFlags&Rl)for(i=i.child;i!==null;)mx(i,r,u),i=i.sibling}function mx(i,r,u){switch(i.tag){case 26:qr(i,r,u),i.flags&Rl&&i.memoizedState!==null&&cD(u,xs,i.memoizedState,i.memoizedProps);break;case 5:qr(i,r,u);break;case 3:case 4:var f=xs;xs=Wu(i.stateNode.containerInfo),qr(i,r,u),xs=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=Rl,Rl=16777216,qr(i,r,u),Rl=f):qr(i,r,u));break;default:qr(i,r,u)}}function gx(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Nl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var u=0;u<r.length;u++){var f=r[u];Xe=f,vx(f,i)}gx(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)yx(i),i=i.sibling}function yx(i){switch(i.tag){case 0:case 11:case 15:Nl(i),i.flags&2048&&Hi(9,i,i.return);break;case 3:Nl(i);break;case 12:Nl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Pu(i)):Nl(i);break;default:Nl(i)}}function Pu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var u=0;u<r.length;u++){var f=r[u];Xe=f,vx(f,i)}gx(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Hi(8,r,r.return),Pu(r);break;case 22:u=r.stateNode,u._visibility&2&&(u._visibility&=-3,Pu(r));break;default:Pu(r)}i=i.sibling}}function vx(i,r){for(;Xe!==null;){var u=Xe;switch(u.tag){case 0:case 11:case 15:Hi(8,u,r);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:hl(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,Xe=f;else t:for(u=i;Xe!==null;){f=Xe;var v=f.sibling,b=f.return;if(lx(f),f===u){Xe=null;break t}if(v!==null){v.return=b,Xe=v;break t}Xe=b}}}var CN={getCacheForType:function(i){var r=tn(Oe),u=r.data.get(i);return u===void 0&&(u=i(),r.data.set(i,u)),u},cacheSignal:function(){return tn(Oe).controller.signal}},EN=typeof WeakMap=="function"?WeakMap:Map,se=0,ue=null,$t=null,Xt=0,ie=0,$n=null,$i=!1,Xr=!1,Ap=!1,mi=0,Re=0,Gi=0,Ha=0,Cp=0,Gn=0,Yr=0,Dl=null,Mn=null,Ep=!1,Fu=0,bx=0,Bu=1/0,Iu=null,qi=null,Ve=0,Xi=null,Wr=null,gi=0,_p=0,Tp=null,xx=null,Ml=0,Rp=null;function qn(){return(se&2)!==0&&Xt!==0?Xt&-Xt:O.T!==null?jp():Pv()}function wx(){if(Gn===0)if((Xt&536870912)===0||Kt){var i=In;In<<=1,(In&3932160)===0&&(In=262144),Gn=i}else Gn=536870912;return i=Vn.current,i!==null&&(i.flags|=32),Gn}function kn(i,r,u){(i===ue&&(ie===2||ie===9)||i.cancelPendingCommit!==null)&&(Kr(i,0),Yi(i,Xt,Gn,!1)),Zo(i,u),((se&2)===0||i!==ue)&&(i===ue&&((se&2)===0&&(Ha|=u),Re===4&&Yi(i,Xt,Gn,!1)),Ps(i))}function Sx(i,r,u){if((se&6)!==0)throw Error(n(327));var f=!u&&(r&127)===0&&(r&i.expiredLanes)===0||_a(i,r),v=f?RN(i,r):Dp(i,r,!0),b=f;do{if(v===0){Xr&&!f&&Yi(i,r,0,!1);break}else{if(u=i.current.alternate,b&&!_N(u)){v=Dp(i,r,!1),b=!1;continue}if(v===2){if(b=r,i.errorRecoveryDisabledLanes&b)var _=0;else _=i.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;t:{var M=i;v=Dl;var z=M.current.memoizedState.isDehydrated;if(z&&(Kr(M,_).flags|=256),_=Dp(M,_,!1),_!==2){if(Ap&&!z){M.errorRecoveryDisabledLanes|=b,Ha|=b,v=4;break t}b=Mn,Mn=v,b!==null&&(Mn===null?Mn=b:Mn.push.apply(Mn,b))}v=_}if(b=!1,v!==2)continue}}if(v===1){Kr(i,0),Yi(i,r,0,!0);break}t:{switch(f=i,b=v,b){case 0:case 1:throw Error(n(345));case 4:if((r&4194048)!==r)break;case 6:Yi(f,r,Gn,!$i);break t;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((r&62914560)===r&&(v=Fu+300-Ge(),10<v)){if(Yi(f,r,Gn,!$i),Mi(f,0,!0)!==0)break t;gi=r,f.timeoutHandle=Jx(Ax.bind(null,f,u,Mn,Iu,Ep,r,Gn,Ha,Yr,$i,b,"Throttled",-0,0),v);break t}Ax(f,u,Mn,Iu,Ep,r,Gn,Ha,Yr,$i,b,null,-0,0)}}break}while(!0);Ps(i)}function Ax(i,r,u,f,v,b,_,M,z,K,it,ct,Q,nt){if(i.timeoutHandle=-1,ct=r.subtreeFlags,ct&8192||(ct&16785408)===16785408){ct={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ei},mx(r,b,ct);var wt=(b&62914560)===b?Fu-Ge():(b&4194048)===b?bx-Ge():0;if(wt=uD(ct,wt),wt!==null){gi=b,i.cancelPendingCommit=wt(Mx.bind(null,i,r,b,u,f,v,_,M,z,it,ct,null,Q,nt)),Yi(i,b,_,!K);return}}Mx(i,r,b,u,f,v,_,M,z)}function _N(i){for(var r=i;;){var u=r.tag;if((u===0||u===11||u===15)&&r.flags&16384&&(u=r.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var v=u[f],b=v.getSnapshot;v=v.value;try{if(!zn(b(),v))return!1}catch{return!1}}if(u=r.child,r.subtreeFlags&16384&&u!==null)u.return=r,r=u;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Yi(i,r,u,f){r&=~Cp,r&=~Ha,i.suspendedLanes|=r,i.pingedLanes&=~r,f&&(i.warmLanes|=r),f=i.expirationTimes;for(var v=r;0<v;){var b=31-yn(v),_=1<<b;f[b]=-1,v&=~_}u!==0&&Lv(i,u,r)}function zu(){return(se&6)===0?(kl(0),!1):!0}function Np(){if($t!==null){if(ie===0)var i=$t.return;else i=$t,ai=ja=null,Gf(i),zr=null,pl=0,i=$t;for(;i!==null;)tx(i.alternate,i),i=i.return;$t=null}}function Kr(i,r){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,qN(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),gi=0,Np(),ue=i,$t=u=si(i.current,null),Xt=r,ie=0,$n=null,$i=!1,Xr=_a(i,r),Ap=!1,Yr=Gn=Cp=Ha=Gi=Re=0,Mn=Dl=null,Ep=!1,(r&8)!==0&&(r|=r&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=r;0<f;){var v=31-yn(f),b=1<<v;r|=i[v],f&=~b}return mi=r,ou(),u}function Cx(i,r){It=null,O.H=Sl,r===Ir||r===mu?(r=z0(),ie=3):r===Lf?(r=z0(),ie=4):ie=r===op?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,$n=r,$t===null&&(Re=1,Nu(i,is(r,i.current)))}function Ex(){var i=Vn.current;return i===null?!0:(Xt&4194048)===Xt?ls===null:(Xt&62914560)===Xt||(Xt&536870912)!==0?i===ls:!1}function _x(){var i=O.H;return O.H=Sl,i===null?Sl:i}function Tx(){var i=O.A;return O.A=CN,i}function Uu(){Re=4,$i||(Xt&4194048)!==Xt&&Vn.current!==null||(Xr=!0),(Gi&134217727)===0&&(Ha&134217727)===0||ue===null||Yi(ue,Xt,Gn,!1)}function Dp(i,r,u){var f=se;se|=2;var v=_x(),b=Tx();(ue!==i||Xt!==r)&&(Iu=null,Kr(i,r)),r=!1;var _=Re;t:do try{if(ie!==0&&$t!==null){var M=$t,z=$n;switch(ie){case 8:Np(),_=6;break t;case 3:case 2:case 9:case 6:Vn.current===null&&(r=!0);var K=ie;if(ie=0,$n=null,Qr(i,M,z,K),u&&Xr){_=0;break t}break;default:K=ie,ie=0,$n=null,Qr(i,M,z,K)}}TN(),_=Re;break}catch(it){Cx(i,it)}while(!0);return r&&i.shellSuspendCounter++,ai=ja=null,se=f,O.H=v,O.A=b,$t===null&&(ue=null,Xt=0,ou()),_}function TN(){for(;$t!==null;)Rx($t)}function RN(i,r){var u=se;se|=2;var f=_x(),v=Tx();ue!==i||Xt!==r?(Iu=null,Bu=Ge()+500,Kr(i,r)):Xr=_a(i,r);t:do try{if(ie!==0&&$t!==null){r=$t;var b=$n;e:switch(ie){case 1:ie=0,$n=null,Qr(i,r,b,1);break;case 2:case 9:if(B0(b)){ie=0,$n=null,Nx(r);break}r=function(){ie!==2&&ie!==9||ue!==i||(ie=7),Ps(i)},b.then(r,r);break t;case 3:ie=7;break t;case 4:ie=5;break t;case 7:B0(b)?(ie=0,$n=null,Nx(r)):(ie=0,$n=null,Qr(i,r,b,7));break;case 5:var _=null;switch($t.tag){case 26:_=$t.memoizedState;case 5:case 27:var M=$t;if(_?pw(_):M.stateNode.complete){ie=0,$n=null;var z=M.sibling;if(z!==null)$t=z;else{var K=M.return;K!==null?($t=K,Vu(K)):$t=null}break e}}ie=0,$n=null,Qr(i,r,b,5);break;case 6:ie=0,$n=null,Qr(i,r,b,6);break;case 8:Np(),Re=6;break t;default:throw Error(n(462))}}NN();break}catch(it){Cx(i,it)}while(!0);return ai=ja=null,O.H=f,O.A=v,se=u,$t!==null?0:(ue=null,Xt=0,ou(),Re)}function NN(){for(;$t!==null&&!Jn();)Rx($t)}function Rx(i){var r=Zb(i.alternate,i,mi);i.memoizedProps=i.pendingProps,r===null?Vu(i):$t=r}function Nx(i){var r=i,u=r.alternate;switch(r.tag){case 15:case 0:r=qb(u,r,r.pendingProps,r.type,void 0,Xt);break;case 11:r=qb(u,r,r.pendingProps,r.type.render,r.ref,Xt);break;case 5:Gf(r);default:tx(u,r),r=$t=T0(r,mi),r=Zb(u,r,mi)}i.memoizedProps=i.pendingProps,r===null?Vu(i):$t=r}function Qr(i,r,u,f){ai=ja=null,Gf(r),zr=null,pl=0;var v=r.return;try{if(yN(i,v,r,u,Xt)){Re=1,Nu(i,is(u,i.current)),$t=null;return}}catch(b){if(v!==null)throw $t=v,b;Re=1,Nu(i,is(u,i.current)),$t=null;return}r.flags&32768?(Kt||f===1?i=!0:Xr||(Xt&536870912)!==0?i=!1:($i=i=!0,(f===2||f===9||f===3||f===6)&&(f=Vn.current,f!==null&&f.tag===13&&(f.flags|=16384))),Dx(r,i)):Vu(r)}function Vu(i){var r=i;do{if((r.flags&32768)!==0){Dx(r,$i);return}i=r.return;var u=xN(r.alternate,r,mi);if(u!==null){$t=u;return}if(r=r.sibling,r!==null){$t=r;return}$t=r=i}while(r!==null);Re===0&&(Re=5)}function Dx(i,r){do{var u=wN(i.alternate,i);if(u!==null){u.flags&=32767,$t=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!r&&(i=i.sibling,i!==null)){$t=i;return}$t=i=u}while(i!==null);Re=6,$t=null}function Mx(i,r,u,f,v,b,_,M,z){i.cancelPendingCommit=null;do Hu();while(Ve!==0);if((se&6)!==0)throw Error(n(327));if(r!==null){if(r===i.current)throw Error(n(177));if(b=r.lanes|r.childLanes,b|=vf,l2(i,u,b,_,M,z),i===ue&&($t=ue=null,Xt=0),Wr=r,Xi=i,gi=u,_p=b,Tp=v,xx=f,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,LN(mn,function(){return Px(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||f){f=O.T,O.T=null,v=B.p,B.p=2,_=se,se|=4;try{SN(i,r,u)}finally{se=_,B.p=v,O.T=f}}Ve=1,kx(),Lx(),jx()}}function kx(){if(Ve===1){Ve=0;var i=Xi,r=Wr,u=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||u){u=O.T,O.T=null;var f=B.p;B.p=2;var v=se;se|=4;try{hx(r,i);var b=Vp,_=v0(i.containerInfo),M=b.focusedElem,z=b.selectionRange;if(_!==M&&M&&M.ownerDocument&&y0(M.ownerDocument.documentElement,M)){if(z!==null&&ff(M)){var K=z.start,it=z.end;if(it===void 0&&(it=K),"selectionStart"in M)M.selectionStart=K,M.selectionEnd=Math.min(it,M.value.length);else{var ct=M.ownerDocument||document,Q=ct&&ct.defaultView||window;if(Q.getSelection){var nt=Q.getSelection(),wt=M.textContent.length,Dt=Math.min(z.start,wt),le=z.end===void 0?Dt:Math.min(z.end,wt);!nt.extend&&Dt>le&&(_=le,le=Dt,Dt=_);var $=g0(M,Dt),V=g0(M,le);if($&&V&&(nt.rangeCount!==1||nt.anchorNode!==$.node||nt.anchorOffset!==$.offset||nt.focusNode!==V.node||nt.focusOffset!==V.offset)){var W=ct.createRange();W.setStart($.node,$.offset),nt.removeAllRanges(),Dt>le?(nt.addRange(W),nt.extend(V.node,V.offset)):(W.setEnd(V.node,V.offset),nt.addRange(W))}}}}for(ct=[],nt=M;nt=nt.parentNode;)nt.nodeType===1&&ct.push({element:nt,left:nt.scrollLeft,top:nt.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<ct.length;M++){var ot=ct[M];ot.element.scrollLeft=ot.left,ot.element.scrollTop=ot.top}}ed=!!Up,Vp=Up=null}finally{se=v,B.p=f,O.T=u}}i.current=r,Ve=2}}function Lx(){if(Ve===2){Ve=0;var i=Xi,r=Wr,u=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||u){u=O.T,O.T=null;var f=B.p;B.p=2;var v=se;se|=4;try{ox(i,r.alternate,r)}finally{se=v,B.p=f,O.T=u}}Ve=3}}function jx(){if(Ve===4||Ve===3){Ve=0,Ca();var i=Xi,r=Wr,u=gi,f=xx;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ve=5:(Ve=0,Wr=Xi=null,Ox(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(qi=null),Xh(u),r=r.stateNode,gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Ea,r,void 0,(r.current.flags&128)===128)}catch{}if(f!==null){r=O.T,v=B.p,B.p=2,O.T=null;try{for(var b=i.onRecoverableError,_=0;_<f.length;_++){var M=f[_];b(M.value,{componentStack:M.stack})}}finally{O.T=r,B.p=v}}(gi&3)!==0&&Hu(),Ps(i),v=i.pendingLanes,(u&261930)!==0&&(v&42)!==0?i===Rp?Ml++:(Ml=0,Rp=i):Ml=0,kl(0)}}function Ox(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,hl(r)))}function Hu(){return kx(),Lx(),jx(),Px()}function Px(){if(Ve!==5)return!1;var i=Xi,r=_p;_p=0;var u=Xh(gi),f=O.T,v=B.p;try{B.p=32>u?32:u,O.T=null,u=Tp,Tp=null;var b=Xi,_=gi;if(Ve=0,Wr=Xi=null,gi=0,(se&6)!==0)throw Error(n(331));var M=se;if(se|=4,yx(b.current),px(b,b.current,_,u),se=M,kl(0,!1),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Ea,b)}catch{}return!0}finally{B.p=v,O.T=f,Ox(i,r)}}function Fx(i,r,u){r=is(u,r),r=rp(i.stateNode,r,2),i=zi(i,r,2),i!==null&&(Zo(i,2),Ps(i))}function ae(i,r,u){if(i.tag===3)Fx(i,i,u);else for(;r!==null;){if(r.tag===3){Fx(r,i,u);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(qi===null||!qi.has(f))){i=is(u,i),u=Bb(2),f=zi(r,u,2),f!==null&&(Ib(u,f,r,i),Zo(f,2),Ps(f));break}}r=r.return}}function Mp(i,r,u){var f=i.pingCache;if(f===null){f=i.pingCache=new EN;var v=new Set;f.set(r,v)}else v=f.get(r),v===void 0&&(v=new Set,f.set(r,v));v.has(u)||(Ap=!0,v.add(u),i=DN.bind(null,i,r,u),r.then(i,i))}function DN(i,r,u){var f=i.pingCache;f!==null&&f.delete(r),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,ue===i&&(Xt&u)===u&&(Re===4||Re===3&&(Xt&62914560)===Xt&&300>Ge()-Fu?(se&2)===0&&Kr(i,0):Cp|=u,Yr===Xt&&(Yr=0)),Ps(i)}function Bx(i,r){r===0&&(r=kv()),i=Ma(i,r),i!==null&&(Zo(i,r),Ps(i))}function MN(i){var r=i.memoizedState,u=0;r!==null&&(u=r.retryLane),Bx(i,u)}function kN(i,r){var u=0;switch(i.tag){case 31:case 13:var f=i.stateNode,v=i.memoizedState;v!==null&&(u=v.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(n(314))}f!==null&&f.delete(r),Bx(i,u)}function LN(i,r){return te(i,r)}var $u=null,Zr=null,kp=!1,Gu=!1,Lp=!1,Wi=0;function Ps(i){i!==Zr&&i.next===null&&(Zr===null?$u=Zr=i:Zr=Zr.next=i),Gu=!0,kp||(kp=!0,ON())}function kl(i,r){if(!Lp&&Gu){Lp=!0;do for(var u=!1,f=$u;f!==null;){if(i!==0){var v=f.pendingLanes;if(v===0)var b=0;else{var _=f.suspendedLanes,M=f.pingedLanes;b=(1<<31-yn(42|i)+1)-1,b&=v&~(_&~M),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,Vx(f,b))}else b=Xt,b=Mi(f,f===ue?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||_a(f,b)||(u=!0,Vx(f,b));f=f.next}while(u);Lp=!1}}function jN(){Ix()}function Ix(){Gu=kp=!1;var i=0;Wi!==0&&GN()&&(i=Wi);for(var r=Ge(),u=null,f=$u;f!==null;){var v=f.next,b=zx(f,r);b===0?(f.next=null,u===null?$u=v:u.next=v,v===null&&(Zr=u)):(u=f,(i!==0||(b&3)!==0)&&(Gu=!0)),f=v}Ve!==0&&Ve!==5||kl(i),Wi!==0&&(Wi=0)}function zx(i,r){for(var u=i.suspendedLanes,f=i.pingedLanes,v=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var _=31-yn(b),M=1<<_,z=v[_];z===-1?((M&u)===0||(M&f)!==0)&&(v[_]=o2(M,r)):z<=r&&(i.expiredLanes|=M),b&=~M}if(r=ue,u=Xt,u=Mi(i,i===r?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,u===0||i===r&&(ie===2||ie===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&Bn(f),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||_a(i,u)){if(r=u&-u,r===i.callbackPriority)return r;switch(f!==null&&Bn(f),Xh(u)){case 2:case 8:u=vr;break;case 32:u=mn;break;case 268435456:u=on;break;default:u=mn}return f=Ux.bind(null,i),u=te(u,f),i.callbackPriority=r,i.callbackNode=u,r}return f!==null&&f!==null&&Bn(f),i.callbackPriority=2,i.callbackNode=null,2}function Ux(i,r){if(Ve!==0&&Ve!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(Hu()&&i.callbackNode!==u)return null;var f=Xt;return f=Mi(i,i===ue?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(Sx(i,f,r),zx(i,Ge()),i.callbackNode!=null&&i.callbackNode===u?Ux.bind(null,i):null)}function Vx(i,r){if(Hu())return null;Sx(i,r,!0)}function ON(){XN(function(){(se&6)!==0?te(Js,jN):Ix()})}function jp(){if(Wi===0){var i=Fr;i===0&&(i=ve,ve<<=1,(ve&261888)===0&&(ve=256)),Wi=i}return Wi}function Hx(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Jc(""+i)}function $x(i,r){var u=r.ownerDocument.createElement("input");return u.name=r.name,u.value=r.value,i.id&&u.setAttribute("form",i.id),r.parentNode.insertBefore(u,r),i=new FormData(i),u.parentNode.removeChild(u),i}function PN(i,r,u,f,v){if(r==="submit"&&u&&u.stateNode===v){var b=Hx((v[_n]||null).action),_=f.submitter;_&&(r=(r=_[_n]||null)?Hx(r.formAction):_.getAttribute("formAction"),r!==null&&(b=r,_=null));var M=new su("action","action",null,f,v);i.push({event:M,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Wi!==0){var z=_?$x(v,_):new FormData(v);tp(u,{pending:!0,data:z,method:v.method,action:b},null,z)}}else typeof b=="function"&&(M.preventDefault(),z=_?$x(v,_):new FormData(v),tp(u,{pending:!0,data:z,method:v.method,action:b},b,z))},currentTarget:v}]})}}for(var Op=0;Op<yf.length;Op++){var Pp=yf[Op],FN=Pp.toLowerCase(),BN=Pp[0].toUpperCase()+Pp.slice(1);bs(FN,"on"+BN)}bs(w0,"onAnimationEnd"),bs(S0,"onAnimationIteration"),bs(A0,"onAnimationStart"),bs("dblclick","onDoubleClick"),bs("focusin","onFocus"),bs("focusout","onBlur"),bs(tN,"onTransitionRun"),bs(eN,"onTransitionStart"),bs(nN,"onTransitionCancel"),bs(C0,"onTransitionEnd"),Ar("onMouseEnter",["mouseout","mouseover"]),Ar("onMouseLeave",["mouseout","mouseover"]),Ar("onPointerEnter",["pointerout","pointerover"]),Ar("onPointerLeave",["pointerout","pointerover"]),Ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ta("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function Gx(i,r){r=(r&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],v=f.event;f=f.listeners;t:{var b=void 0;if(r)for(var _=f.length-1;0<=_;_--){var M=f[_],z=M.instance,K=M.currentTarget;if(M=M.listener,z!==b&&v.isPropagationStopped())break t;b=M,v.currentTarget=K;try{b(v)}catch(it){ru(it)}v.currentTarget=null,b=z}else for(_=0;_<f.length;_++){if(M=f[_],z=M.instance,K=M.currentTarget,M=M.listener,z!==b&&v.isPropagationStopped())break t;b=M,v.currentTarget=K;try{b(v)}catch(it){ru(it)}v.currentTarget=null,b=z}}}}function Gt(i,r){var u=r[Yh];u===void 0&&(u=r[Yh]=new Set);var f=i+"__bubble";u.has(f)||(qx(r,i,2,!1),u.add(f))}function Fp(i,r,u){var f=0;r&&(f|=4),qx(u,i,f,r)}var qu="_reactListening"+Math.random().toString(36).slice(2);function Bp(i){if(!i[qu]){i[qu]=!0,Iv.forEach(function(u){u!=="selectionchange"&&(IN.has(u)||Fp(u,!1,i),Fp(u,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[qu]||(r[qu]=!0,Fp("selectionchange",!1,r))}}function qx(i,r,u,f){switch(ww(r)){case 2:var v=fD;break;case 8:v=pD;break;default:v=Jp}u=v.bind(null,r,u,i),v=void 0,!sf||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(v=!0),f?v!==void 0?i.addEventListener(r,u,{capture:!0,passive:v}):i.addEventListener(r,u,!0):v!==void 0?i.addEventListener(r,u,{passive:v}):i.addEventListener(r,u,!1)}function Ip(i,r,u,f,v){var b=f;if((r&1)===0&&(r&2)===0&&f!==null)t:for(;;){if(f===null)return;var _=f.tag;if(_===3||_===4){var M=f.stateNode.containerInfo;if(M===v)break;if(_===4)for(_=f.return;_!==null;){var z=_.tag;if((z===3||z===4)&&_.stateNode.containerInfo===v)return;_=_.return}for(;M!==null;){if(_=xr(M),_===null)return;if(z=_.tag,z===5||z===6||z===26||z===27){f=b=_;continue t}M=M.parentNode}}f=f.return}Qv(function(){var K=b,it=ef(u),ct=[];t:{var Q=E0.get(i);if(Q!==void 0){var nt=su,wt=i;switch(i){case"keypress":if(eu(u)===0)break t;case"keydown":case"keyup":nt=k2;break;case"focusin":wt="focus",nt=lf;break;case"focusout":wt="blur",nt=lf;break;case"beforeblur":case"afterblur":nt=lf;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nt=t0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nt=x2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nt=O2;break;case w0:case S0:case A0:nt=A2;break;case C0:nt=F2;break;case"scroll":case"scrollend":nt=v2;break;case"wheel":nt=I2;break;case"copy":case"cut":case"paste":nt=E2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nt=n0;break;case"toggle":case"beforetoggle":nt=U2}var Dt=(r&4)!==0,le=!Dt&&(i==="scroll"||i==="scrollend"),$=Dt?Q!==null?Q+"Capture":null:Q;Dt=[];for(var V=K,W;V!==null;){var ot=V;if(W=ot.stateNode,ot=ot.tag,ot!==5&&ot!==26&&ot!==27||W===null||$===null||(ot=el(V,$),ot!=null&&Dt.push(jl(V,ot,W))),le)break;V=V.return}0<Dt.length&&(Q=new nt(Q,wt,null,u,it),ct.push({event:Q,listeners:Dt}))}}if((r&7)===0){t:{if(Q=i==="mouseover"||i==="pointerover",nt=i==="mouseout"||i==="pointerout",Q&&u!==tf&&(wt=u.relatedTarget||u.fromElement)&&(xr(wt)||wt[br]))break t;if((nt||Q)&&(Q=it.window===it?it:(Q=it.ownerDocument)?Q.defaultView||Q.parentWindow:window,nt?(wt=u.relatedTarget||u.toElement,nt=K,wt=wt?xr(wt):null,wt!==null&&(le=o(wt),Dt=wt.tag,wt!==le||Dt!==5&&Dt!==27&&Dt!==6)&&(wt=null)):(nt=null,wt=K),nt!==wt)){if(Dt=t0,ot="onMouseLeave",$="onMouseEnter",V="mouse",(i==="pointerout"||i==="pointerover")&&(Dt=n0,ot="onPointerLeave",$="onPointerEnter",V="pointer"),le=nt==null?Q:tl(nt),W=wt==null?Q:tl(wt),Q=new Dt(ot,V+"leave",nt,u,it),Q.target=le,Q.relatedTarget=W,ot=null,xr(it)===K&&(Dt=new Dt($,V+"enter",wt,u,it),Dt.target=W,Dt.relatedTarget=le,ot=Dt),le=ot,nt&&wt)e:{for(Dt=zN,$=nt,V=wt,W=0,ot=$;ot;ot=Dt(ot))W++;ot=0;for(var Rt=V;Rt;Rt=Dt(Rt))ot++;for(;0<W-ot;)$=Dt($),W--;for(;0<ot-W;)V=Dt(V),ot--;for(;W--;){if($===V||V!==null&&$===V.alternate){Dt=$;break e}$=Dt($),V=Dt(V)}Dt=null}else Dt=null;nt!==null&&Xx(ct,Q,nt,Dt,!1),wt!==null&&le!==null&&Xx(ct,le,wt,Dt,!0)}}t:{if(Q=K?tl(K):window,nt=Q.nodeName&&Q.nodeName.toLowerCase(),nt==="select"||nt==="input"&&Q.type==="file")var ee=u0;else if(l0(Q))if(d0)ee=Q2;else{ee=W2;var Et=Y2}else nt=Q.nodeName,!nt||nt.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&Jh(K.elementType)&&(ee=u0):ee=K2;if(ee&&(ee=ee(i,K))){c0(ct,ee,u,it);break t}Et&&Et(i,Q,K),i==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&Zh(Q,"number",Q.value)}switch(Et=K?tl(K):window,i){case"focusin":(l0(Et)||Et.contentEditable==="true")&&(Nr=Et,pf=K,cl=null);break;case"focusout":cl=pf=Nr=null;break;case"mousedown":mf=!0;break;case"contextmenu":case"mouseup":case"dragend":mf=!1,b0(ct,u,it);break;case"selectionchange":if(J2)break;case"keydown":case"keyup":b0(ct,u,it)}var zt;if(uf)t:{switch(i){case"compositionstart":var Yt="onCompositionStart";break t;case"compositionend":Yt="onCompositionEnd";break t;case"compositionupdate":Yt="onCompositionUpdate";break t}Yt=void 0}else Rr?r0(i,u)&&(Yt="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Yt="onCompositionStart");Yt&&(s0&&u.locale!=="ko"&&(Rr||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Rr&&(zt=Zv()):(Li=it,af="value"in Li?Li.value:Li.textContent,Rr=!0)),Et=Xu(K,Yt),0<Et.length&&(Yt=new e0(Yt,i,null,u,it),ct.push({event:Yt,listeners:Et}),zt?Yt.data=zt:(zt=o0(u),zt!==null&&(Yt.data=zt)))),(zt=H2?$2(i,u):G2(i,u))&&(Yt=Xu(K,"onBeforeInput"),0<Yt.length&&(Et=new e0("onBeforeInput","beforeinput",null,u,it),ct.push({event:Et,listeners:Yt}),Et.data=zt)),PN(ct,i,K,u,it)}Gx(ct,r)})}function jl(i,r,u){return{instance:i,listener:r,currentTarget:u}}function Xu(i,r){for(var u=r+"Capture",f=[];i!==null;){var v=i,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=el(i,u),v!=null&&f.unshift(jl(i,v,b)),v=el(i,r),v!=null&&f.push(jl(i,v,b))),i.tag===3)return f;i=i.return}return[]}function zN(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Xx(i,r,u,f,v){for(var b=r._reactName,_=[];u!==null&&u!==f;){var M=u,z=M.alternate,K=M.stateNode;if(M=M.tag,z!==null&&z===f)break;M!==5&&M!==26&&M!==27||K===null||(z=K,v?(K=el(u,b),K!=null&&_.unshift(jl(u,K,z))):v||(K=el(u,b),K!=null&&_.push(jl(u,K,z)))),u=u.return}_.length!==0&&i.push({event:r,listeners:_})}var UN=/\r\n?/g,VN=/\u0000|\uFFFD/g;function Yx(i){return(typeof i=="string"?i:""+i).replace(UN,`
`).replace(VN,"")}function Wx(i,r){return r=Yx(r),Yx(i)===r}function oe(i,r,u,f,v,b){switch(u){case"children":typeof f=="string"?r==="body"||r==="textarea"&&f===""||Er(i,f):(typeof f=="number"||typeof f=="bigint")&&r!=="body"&&Er(i,""+f);break;case"className":Qc(i,"class",f);break;case"tabIndex":Qc(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Qc(i,u,f);break;case"style":Wv(i,f,b);break;case"data":if(r!=="object"){Qc(i,"data",f);break}case"src":case"href":if(f===""&&(r!=="a"||u!=="href")){i.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(u);break}f=Jc(""+f),i.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(r!=="input"&&oe(i,r,"name",v.name,v,null),oe(i,r,"formEncType",v.formEncType,v,null),oe(i,r,"formMethod",v.formMethod,v,null),oe(i,r,"formTarget",v.formTarget,v,null)):(oe(i,r,"encType",v.encType,v,null),oe(i,r,"method",v.method,v,null),oe(i,r,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(u);break}f=Jc(""+f),i.setAttribute(u,f);break;case"onClick":f!=null&&(i.onclick=ei);break;case"onScroll":f!=null&&Gt("scroll",i);break;case"onScrollEnd":f!=null&&Gt("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}u=Jc(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,""+f):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":f===!0?i.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,f):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(u,f):i.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(u):i.setAttribute(u,f);break;case"popover":Gt("beforetoggle",i),Gt("toggle",i),Kc(i,"popover",f);break;case"xlinkActuate":ti(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":ti(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":ti(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":ti(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":ti(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":ti(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":ti(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":ti(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":ti(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Kc(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=g2.get(u)||u,Kc(i,u,f))}}function zp(i,r,u,f,v,b){switch(u){case"style":Wv(i,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(u=f.__html,u!=null){if(v.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"children":typeof f=="string"?Er(i,f):(typeof f=="number"||typeof f=="bigint")&&Er(i,""+f);break;case"onScroll":f!=null&&Gt("scroll",i);break;case"onScrollEnd":f!=null&&Gt("scrollend",i);break;case"onClick":f!=null&&(i.onclick=ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zv.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),r=u.slice(2,v?u.length-7:void 0),b=i[_n]||null,b=b!=null?b[u]:null,typeof b=="function"&&i.removeEventListener(r,b,v),typeof f=="function")){typeof b!="function"&&b!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(r,f,v);break t}u in i?i[u]=f:f===!0?i.setAttribute(u,""):Kc(i,u,f)}}}function nn(i,r,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",i),Gt("load",i);var f=!1,v=!1,b;for(b in u)if(u.hasOwnProperty(b)){var _=u[b];if(_!=null)switch(b){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:oe(i,r,b,_,u,null)}}v&&oe(i,r,"srcSet",u.srcSet,u,null),f&&oe(i,r,"src",u.src,u,null);return;case"input":Gt("invalid",i);var M=b=_=v=null,z=null,K=null;for(f in u)if(u.hasOwnProperty(f)){var it=u[f];if(it!=null)switch(f){case"name":v=it;break;case"type":_=it;break;case"checked":z=it;break;case"defaultChecked":K=it;break;case"value":b=it;break;case"defaultValue":M=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(n(137,r));break;default:oe(i,r,f,it,u,null)}}Gv(i,b,M,z,K,_,v,!1);return;case"select":Gt("invalid",i),f=_=b=null;for(v in u)if(u.hasOwnProperty(v)&&(M=u[v],M!=null))switch(v){case"value":b=M;break;case"defaultValue":_=M;break;case"multiple":f=M;default:oe(i,r,v,M,u,null)}r=b,u=_,i.multiple=!!f,r!=null?Cr(i,!!f,r,!1):u!=null&&Cr(i,!!f,u,!0);return;case"textarea":Gt("invalid",i),b=v=f=null;for(_ in u)if(u.hasOwnProperty(_)&&(M=u[_],M!=null))switch(_){case"value":f=M;break;case"defaultValue":v=M;break;case"children":b=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(n(91));break;default:oe(i,r,_,M,u,null)}Xv(i,f,v,b);return;case"option":for(z in u)u.hasOwnProperty(z)&&(f=u[z],f!=null)&&(z==="selected"?i.selected=f&&typeof f!="function"&&typeof f!="symbol":oe(i,r,z,f,u,null));return;case"dialog":Gt("beforetoggle",i),Gt("toggle",i),Gt("cancel",i),Gt("close",i);break;case"iframe":case"object":Gt("load",i);break;case"video":case"audio":for(f=0;f<Ll.length;f++)Gt(Ll[f],i);break;case"image":Gt("error",i),Gt("load",i);break;case"details":Gt("toggle",i);break;case"embed":case"source":case"link":Gt("error",i),Gt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in u)if(u.hasOwnProperty(K)&&(f=u[K],f!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:oe(i,r,K,f,u,null)}return;default:if(Jh(r)){for(it in u)u.hasOwnProperty(it)&&(f=u[it],f!==void 0&&zp(i,r,it,f,u,void 0));return}}for(M in u)u.hasOwnProperty(M)&&(f=u[M],f!=null&&oe(i,r,M,f,u,null))}function HN(i,r,u,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,_=null,M=null,z=null,K=null,it=null;for(nt in u){var ct=u[nt];if(u.hasOwnProperty(nt)&&ct!=null)switch(nt){case"checked":break;case"value":break;case"defaultValue":z=ct;default:f.hasOwnProperty(nt)||oe(i,r,nt,null,f,ct)}}for(var Q in f){var nt=f[Q];if(ct=u[Q],f.hasOwnProperty(Q)&&(nt!=null||ct!=null))switch(Q){case"type":b=nt;break;case"name":v=nt;break;case"checked":K=nt;break;case"defaultChecked":it=nt;break;case"value":_=nt;break;case"defaultValue":M=nt;break;case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(n(137,r));break;default:nt!==ct&&oe(i,r,Q,nt,f,ct)}}Qh(i,_,M,z,K,it,b,v);return;case"select":nt=_=M=Q=null;for(b in u)if(z=u[b],u.hasOwnProperty(b)&&z!=null)switch(b){case"value":break;case"multiple":nt=z;default:f.hasOwnProperty(b)||oe(i,r,b,null,f,z)}for(v in f)if(b=f[v],z=u[v],f.hasOwnProperty(v)&&(b!=null||z!=null))switch(v){case"value":Q=b;break;case"defaultValue":M=b;break;case"multiple":_=b;default:b!==z&&oe(i,r,v,b,f,z)}r=M,u=_,f=nt,Q!=null?Cr(i,!!u,Q,!1):!!f!=!!u&&(r!=null?Cr(i,!!u,r,!0):Cr(i,!!u,u?[]:"",!1));return;case"textarea":nt=Q=null;for(M in u)if(v=u[M],u.hasOwnProperty(M)&&v!=null&&!f.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:oe(i,r,M,null,f,v)}for(_ in f)if(v=f[_],b=u[_],f.hasOwnProperty(_)&&(v!=null||b!=null))switch(_){case"value":Q=v;break;case"defaultValue":nt=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(n(91));break;default:v!==b&&oe(i,r,_,v,f,b)}qv(i,Q,nt);return;case"option":for(var wt in u)Q=u[wt],u.hasOwnProperty(wt)&&Q!=null&&!f.hasOwnProperty(wt)&&(wt==="selected"?i.selected=!1:oe(i,r,wt,null,f,Q));for(z in f)Q=f[z],nt=u[z],f.hasOwnProperty(z)&&Q!==nt&&(Q!=null||nt!=null)&&(z==="selected"?i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":oe(i,r,z,Q,f,nt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Dt in u)Q=u[Dt],u.hasOwnProperty(Dt)&&Q!=null&&!f.hasOwnProperty(Dt)&&oe(i,r,Dt,null,f,Q);for(K in f)if(Q=f[K],nt=u[K],f.hasOwnProperty(K)&&Q!==nt&&(Q!=null||nt!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(137,r));break;default:oe(i,r,K,Q,f,nt)}return;default:if(Jh(r)){for(var le in u)Q=u[le],u.hasOwnProperty(le)&&Q!==void 0&&!f.hasOwnProperty(le)&&zp(i,r,le,void 0,f,Q);for(it in f)Q=f[it],nt=u[it],!f.hasOwnProperty(it)||Q===nt||Q===void 0&&nt===void 0||zp(i,r,it,Q,f,nt);return}}for(var $ in u)Q=u[$],u.hasOwnProperty($)&&Q!=null&&!f.hasOwnProperty($)&&oe(i,r,$,null,f,Q);for(ct in f)Q=f[ct],nt=u[ct],!f.hasOwnProperty(ct)||Q===nt||Q==null&&nt==null||oe(i,r,ct,Q,f,nt)}function Kx(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function $N(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,u=performance.getEntriesByType("resource"),f=0;f<u.length;f++){var v=u[f],b=v.transferSize,_=v.initiatorType,M=v.duration;if(b&&M&&Kx(_)){for(_=0,M=v.responseEnd,f+=1;f<u.length;f++){var z=u[f],K=z.startTime;if(K>M)break;var it=z.transferSize,ct=z.initiatorType;it&&Kx(ct)&&(z=z.responseEnd,_+=it*(z<M?1:(M-K)/(z-K)))}if(--f,r+=8*(b+_)/(v.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Up=null,Vp=null;function Yu(i){return i.nodeType===9?i:i.ownerDocument}function Qx(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zx(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Hp(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var $p=null;function GN(){var i=window.event;return i&&i.type==="popstate"?i===$p?!1:($p=i,!0):($p=null,!1)}var Jx=typeof setTimeout=="function"?setTimeout:void 0,qN=typeof clearTimeout=="function"?clearTimeout:void 0,tw=typeof Promise=="function"?Promise:void 0,XN=typeof queueMicrotask=="function"?queueMicrotask:typeof tw<"u"?function(i){return tw.resolve(null).then(i).catch(YN)}:Jx;function YN(i){setTimeout(function(){throw i})}function Ki(i){return i==="head"}function ew(i,r){var u=r,f=0;do{var v=u.nextSibling;if(i.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(f===0){i.removeChild(v),no(r);return}f--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")f++;else if(u==="html")Ol(i.ownerDocument.documentElement);else if(u==="head"){u=i.ownerDocument.head,Ol(u);for(var b=u.firstChild;b;){var _=b.nextSibling,M=b.nodeName;b[Jo]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&b.rel.toLowerCase()==="stylesheet"||u.removeChild(b),b=_}}else u==="body"&&Ol(i.ownerDocument.body);u=v}while(u);no(r)}function nw(i,r){var u=i;i=0;do{var f=u.nextSibling;if(u.nodeType===1?r?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(r?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(i===0)break;i--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||i++;u=f}while(u)}function Gp(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var u=r;switch(r=r.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Gp(u),Wh(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function WN(i,r,u,f){for(;i.nodeType===1;){var v=u;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[Jo])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=cs(i.nextSibling),i===null)break}return null}function KN(i,r,u){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=cs(i.nextSibling),i===null))return null;return i}function sw(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=cs(i.nextSibling),i===null))return null;return i}function qp(i){return i.data==="$?"||i.data==="$~"}function Xp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function QN(i,r){var u=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||u.readyState!=="loading")r();else{var f=function(){r(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function cs(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Yp=null;function iw(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"||u==="/&"){if(r===0)return cs(i.nextSibling);r--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||r++}i=i.nextSibling}return null}function aw(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(r===0)return i;r--}else u!=="/$"&&u!=="/&"||r++}i=i.previousSibling}return null}function rw(i,r,u){switch(r=Yu(u),i){case"html":if(i=r.documentElement,!i)throw Error(n(452));return i;case"head":if(i=r.head,!i)throw Error(n(453));return i;case"body":if(i=r.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Ol(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Wh(i)}var us=new Map,ow=new Set;function Wu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var yi=B.d;B.d={f:ZN,r:JN,D:tD,C:eD,L:nD,m:sD,X:aD,S:iD,M:rD};function ZN(){var i=yi.f(),r=zu();return i||r}function JN(i){var r=wr(i);r!==null&&r.tag===5&&r.type==="form"?Cb(r):yi.r(i)}var Jr=typeof document>"u"?null:document;function lw(i,r,u){var f=Jr;if(f&&typeof r=="string"&&r){var v=ns(r);v='link[rel="'+i+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),ow.has(v)||(ow.add(v),i={rel:i,crossOrigin:u,href:r},f.querySelector(v)===null&&(r=f.createElement("link"),nn(r,"link",i),qe(r),f.head.appendChild(r)))}}function tD(i){yi.D(i),lw("dns-prefetch",i,null)}function eD(i,r){yi.C(i,r),lw("preconnect",i,r)}function nD(i,r,u){yi.L(i,r,u);var f=Jr;if(f&&i&&r){var v='link[rel="preload"][as="'+ns(r)+'"]';r==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+ns(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+ns(u.imageSizes)+'"]')):v+='[href="'+ns(i)+'"]';var b=v;switch(r){case"style":b=to(i);break;case"script":b=eo(i)}us.has(b)||(i=m({rel:"preload",href:r==="image"&&u&&u.imageSrcSet?void 0:i,as:r},u),us.set(b,i),f.querySelector(v)!==null||r==="style"&&f.querySelector(Pl(b))||r==="script"&&f.querySelector(Fl(b))||(r=f.createElement("link"),nn(r,"link",i),qe(r),f.head.appendChild(r)))}}function sD(i,r){yi.m(i,r);var u=Jr;if(u&&i){var f=r&&typeof r.as=="string"?r.as:"script",v='link[rel="modulepreload"][as="'+ns(f)+'"][href="'+ns(i)+'"]',b=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=eo(i)}if(!us.has(b)&&(i=m({rel:"modulepreload",href:i},r),us.set(b,i),u.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Fl(b)))return}f=u.createElement("link"),nn(f,"link",i),qe(f),u.head.appendChild(f)}}}function iD(i,r,u){yi.S(i,r,u);var f=Jr;if(f&&i){var v=Sr(f).hoistableStyles,b=to(i);r=r||"default";var _=v.get(b);if(!_){var M={loading:0,preload:null};if(_=f.querySelector(Pl(b)))M.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":r},u),(u=us.get(b))&&Wp(i,u);var z=_=f.createElement("link");qe(z),nn(z,"link",i),z._p=new Promise(function(K,it){z.onload=K,z.onerror=it}),z.addEventListener("load",function(){M.loading|=1}),z.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Ku(_,r,f)}_={type:"stylesheet",instance:_,count:1,state:M},v.set(b,_)}}}function aD(i,r){yi.X(i,r);var u=Jr;if(u&&i){var f=Sr(u).hoistableScripts,v=eo(i),b=f.get(v);b||(b=u.querySelector(Fl(v)),b||(i=m({src:i,async:!0},r),(r=us.get(v))&&Kp(i,r),b=u.createElement("script"),qe(b),nn(b,"link",i),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(v,b))}}function rD(i,r){yi.M(i,r);var u=Jr;if(u&&i){var f=Sr(u).hoistableScripts,v=eo(i),b=f.get(v);b||(b=u.querySelector(Fl(v)),b||(i=m({src:i,async:!0,type:"module"},r),(r=us.get(v))&&Kp(i,r),b=u.createElement("script"),qe(b),nn(b,"link",i),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(v,b))}}function cw(i,r,u,f){var v=(v=st.current)?Wu(v):null;if(!v)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(r=to(u.href),u=Sr(v).hoistableStyles,f=u.get(r),f||(f={type:"style",instance:null,count:0,state:null},u.set(r,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=to(u.href);var b=Sr(v).hoistableStyles,_=b.get(i);if(_||(v=v.ownerDocument||v,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,_),(b=v.querySelector(Pl(i)))&&!b._p&&(_.instance=b,_.state.loading=5),us.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},us.set(i,u),b||oD(v,i,u,_.state))),r&&f===null)throw Error(n(528,""));return _}if(r&&f!==null)throw Error(n(529,""));return null;case"script":return r=u.async,u=u.src,typeof u=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=eo(u),u=Sr(v).hoistableScripts,f=u.get(r),f||(f={type:"script",instance:null,count:0,state:null},u.set(r,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function to(i){return'href="'+ns(i)+'"'}function Pl(i){return'link[rel="stylesheet"]['+i+"]"}function uw(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function oD(i,r,u,f){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?f.loading=1:(r=i.createElement("link"),f.preload=r,r.addEventListener("load",function(){return f.loading|=1}),r.addEventListener("error",function(){return f.loading|=2}),nn(r,"link",u),qe(r),i.head.appendChild(r))}function eo(i){return'[src="'+ns(i)+'"]'}function Fl(i){return"script[async]"+i}function dw(i,r,u){if(r.count++,r.instance===null)switch(r.type){case"style":var f=i.querySelector('style[data-href~="'+ns(u.href)+'"]');if(f)return r.instance=f,qe(f),f;var v=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),qe(f),nn(f,"style",v),Ku(f,u.precedence,i),r.instance=f;case"stylesheet":v=to(u.href);var b=i.querySelector(Pl(v));if(b)return r.state.loading|=4,r.instance=b,qe(b),b;f=uw(u),(v=us.get(v))&&Wp(f,v),b=(i.ownerDocument||i).createElement("link"),qe(b);var _=b;return _._p=new Promise(function(M,z){_.onload=M,_.onerror=z}),nn(b,"link",f),r.state.loading|=4,Ku(b,u.precedence,i),r.instance=b;case"script":return b=eo(u.src),(v=i.querySelector(Fl(b)))?(r.instance=v,qe(v),v):(f=u,(v=us.get(b))&&(f=m({},u),Kp(f,v)),i=i.ownerDocument||i,v=i.createElement("script"),qe(v),nn(v,"link",f),i.head.appendChild(v),r.instance=v);case"void":return null;default:throw Error(n(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(f=r.instance,r.state.loading|=4,Ku(f,u.precedence,i));return r.instance}function Ku(i,r,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,b=v,_=0;_<f.length;_++){var M=f[_];if(M.dataset.precedence===r)b=M;else if(b!==v)break}b?b.parentNode.insertBefore(i,b.nextSibling):(r=u.nodeType===9?u.head:u,r.insertBefore(i,r.firstChild))}function Wp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Kp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Qu=null;function hw(i,r,u){if(Qu===null){var f=new Map,v=Qu=new Map;v.set(u,f)}else v=Qu,f=v.get(u),f||(f=new Map,v.set(u,f));if(f.has(i))return f;for(f.set(i,null),u=u.getElementsByTagName(i),v=0;v<u.length;v++){var b=u[v];if(!(b[Jo]||b[Ze]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var _=b.getAttribute(r)||"";_=i+_;var M=f.get(_);M?M.push(b):f.set(_,[b])}}return f}function fw(i,r,u){i=i.ownerDocument||i,i.head.insertBefore(u,r==="title"?i.querySelector("head > title"):null)}function lD(i,r,u){if(u===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(i=r.disabled,typeof r.precedence=="string"&&i==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function pw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function cD(i,r,u,f){if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=to(f.href),b=r.querySelector(Pl(v));if(b){r=b._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Zu.bind(i),r.then(i,i)),u.state.loading|=4,u.instance=b,qe(b);return}b=r.ownerDocument||r,f=uw(f),(v=us.get(v))&&Wp(f,v),b=b.createElement("link"),qe(b);var _=b;_._p=new Promise(function(M,z){_.onload=M,_.onerror=z}),nn(b,"link",f),u.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(u,r),(r=u.state.preload)&&(u.state.loading&3)===0&&(i.count++,u=Zu.bind(i),r.addEventListener("load",u),r.addEventListener("error",u))}}var Qp=0;function uD(i,r){return i.stylesheets&&i.count===0&&td(i,i.stylesheets),0<i.count||0<i.imgCount?function(u){var f=setTimeout(function(){if(i.stylesheets&&td(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+r);0<i.imgBytes&&Qp===0&&(Qp=62500*$N());var v=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&td(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>Qp?50:800)+r);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function Zu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)td(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ju=null;function td(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ju=new Map,r.forEach(dD,i),Ju=null,Zu.call(i))}function dD(i,r){if(!(r.state.loading&4)){var u=Ju.get(i);if(u)var f=u.get(null);else{u=new Map,Ju.set(i,u);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var _=v[b];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(u.set(_.dataset.precedence,_),f=_)}f&&u.set(null,f)}v=r.instance,_=v.getAttribute("data-precedence"),b=u.get(_)||f,b===f&&u.set(null,v),u.set(_,v),this.count++,f=Zu.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),b?b.parentNode.insertBefore(v,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),r.state.loading|=4}}var Bl={$$typeof:R,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function hD(i,r,u,f,v,b,_,M,z){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gh(0),this.hiddenUpdates=Gh(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function mw(i,r,u,f,v,b,_,M,z,K,it,ct){return i=new hD(i,r,u,_,z,K,it,ct,M),r=1,b===!0&&(r|=24),b=Un(3,null,null,r),i.current=b,b.stateNode=i,r=Df(),r.refCount++,i.pooledCache=r,r.refCount++,b.memoizedState={element:f,isDehydrated:u,cache:r},jf(b),i}function gw(i){return i?(i=kr,i):kr}function yw(i,r,u,f,v,b){v=gw(v),f.context===null?f.context=v:f.pendingContext=v,f=Ii(r),f.payload={element:u},b=b===void 0?null:b,b!==null&&(f.callback=b),u=zi(i,f,r),u!==null&&(kn(u,i,r),gl(u,i,r))}function vw(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<r?u:r}}function Zp(i,r){vw(i,r),(i=i.alternate)&&vw(i,r)}function bw(i){if(i.tag===13||i.tag===31){var r=Ma(i,67108864);r!==null&&kn(r,i,67108864),Zp(i,67108864)}}function xw(i){if(i.tag===13||i.tag===31){var r=qn();r=qh(r);var u=Ma(i,r);u!==null&&kn(u,i,r),Zp(i,r)}}var ed=!0;function fD(i,r,u,f){var v=O.T;O.T=null;var b=B.p;try{B.p=2,Jp(i,r,u,f)}finally{B.p=b,O.T=v}}function pD(i,r,u,f){var v=O.T;O.T=null;var b=B.p;try{B.p=8,Jp(i,r,u,f)}finally{B.p=b,O.T=v}}function Jp(i,r,u,f){if(ed){var v=tm(f);if(v===null)Ip(i,r,f,nd,u),Sw(i,f);else if(gD(v,i,r,u,f))f.stopPropagation();else if(Sw(i,f),r&4&&-1<mD.indexOf(i)){for(;v!==null;){var b=wr(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var _=Ue(b.pendingLanes);if(_!==0){var M=b;for(M.pendingLanes|=2,M.entangledLanes|=2;_;){var z=1<<31-yn(_);M.entanglements[1]|=z,_&=~z}Ps(b),(se&6)===0&&(Bu=Ge()+500,kl(0))}}break;case 31:case 13:M=Ma(b,2),M!==null&&kn(M,b,2),zu(),Zp(b,2)}if(b=tm(f),b===null&&Ip(i,r,f,nd,u),b===v)break;v=b}v!==null&&f.stopPropagation()}else Ip(i,r,f,null,u)}}function tm(i){return i=ef(i),em(i)}var nd=null;function em(i){if(nd=null,i=xr(i),i!==null){var r=o(i);if(r===null)i=null;else{var u=r.tag;if(u===13){if(i=l(r),i!==null)return i;i=null}else if(u===31){if(i=c(r),i!==null)return i;i=null}else if(u===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return nd=i,null}function ww(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qo()){case Js:return 2;case vr:return 8;case mn:case Ms:return 32;case on:return 268435456;default:return 32}default:return 32}}var nm=!1,Qi=null,Zi=null,Ji=null,Il=new Map,zl=new Map,ta=[],mD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sw(i,r){switch(i){case"focusin":case"focusout":Qi=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":Ji=null;break;case"pointerover":case"pointerout":Il.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(r.pointerId)}}function Ul(i,r,u,f,v,b){return i===null||i.nativeEvent!==b?(i={blockedOn:r,domEventName:u,eventSystemFlags:f,nativeEvent:b,targetContainers:[v]},r!==null&&(r=wr(r),r!==null&&bw(r)),i):(i.eventSystemFlags|=f,r=i.targetContainers,v!==null&&r.indexOf(v)===-1&&r.push(v),i)}function gD(i,r,u,f,v){switch(r){case"focusin":return Qi=Ul(Qi,i,r,u,f,v),!0;case"dragenter":return Zi=Ul(Zi,i,r,u,f,v),!0;case"mouseover":return Ji=Ul(Ji,i,r,u,f,v),!0;case"pointerover":var b=v.pointerId;return Il.set(b,Ul(Il.get(b)||null,i,r,u,f,v)),!0;case"gotpointercapture":return b=v.pointerId,zl.set(b,Ul(zl.get(b)||null,i,r,u,f,v)),!0}return!1}function Aw(i){var r=xr(i.target);if(r!==null){var u=o(r);if(u!==null){if(r=u.tag,r===13){if(r=l(u),r!==null){i.blockedOn=r,Fv(i.priority,function(){xw(u)});return}}else if(r===31){if(r=c(u),r!==null){i.blockedOn=r,Fv(i.priority,function(){xw(u)});return}}else if(r===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function sd(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var u=tm(i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);tf=f,u.target.dispatchEvent(f),tf=null}else return r=wr(u),r!==null&&bw(r),i.blockedOn=u,!1;r.shift()}return!0}function Cw(i,r,u){sd(i)&&u.delete(r)}function yD(){nm=!1,Qi!==null&&sd(Qi)&&(Qi=null),Zi!==null&&sd(Zi)&&(Zi=null),Ji!==null&&sd(Ji)&&(Ji=null),Il.forEach(Cw),zl.forEach(Cw)}function id(i,r){i.blockedOn===r&&(i.blockedOn=null,nm||(nm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,yD)))}var ad=null;function Ew(i){ad!==i&&(ad=i,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){ad===i&&(ad=null);for(var r=0;r<i.length;r+=3){var u=i[r],f=i[r+1],v=i[r+2];if(typeof f!="function"){if(em(f||u)===null)continue;break}var b=wr(u);b!==null&&(i.splice(r,3),r-=3,tp(b,{pending:!0,data:v,method:u.method,action:f},f,v))}}))}function no(i){function r(z){return id(z,i)}Qi!==null&&id(Qi,i),Zi!==null&&id(Zi,i),Ji!==null&&id(Ji,i),Il.forEach(r),zl.forEach(r);for(var u=0;u<ta.length;u++){var f=ta[u];f.blockedOn===i&&(f.blockedOn=null)}for(;0<ta.length&&(u=ta[0],u.blockedOn===null);)Aw(u),u.blockedOn===null&&ta.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var v=u[f],b=u[f+1],_=v[_n]||null;if(typeof b=="function")_||Ew(u);else if(_){var M=null;if(b&&b.hasAttribute("formAction")){if(v=b,_=b[_n]||null)M=_.formAction;else if(em(v)!==null)continue}else M=_.action;typeof M=="function"?u[f+1]=M:(u.splice(f,3),f-=3),Ew(u)}}}function _w(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(_){return v=_})},focusReset:"manual",scroll:"manual"})}function r(){v!==null&&(v(),v=null),f||setTimeout(u,20)}function u(){if(!f&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(u,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),v!==null&&(v(),v=null)}}}function sm(i){this._internalRoot=i}rd.prototype.render=sm.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(n(409));var u=r.current,f=qn();yw(u,f,i,r,null,null)},rd.prototype.unmount=sm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;yw(i.current,2,null,i,null,null),zu(),r[br]=null}};function rd(i){this._internalRoot=i}rd.prototype.unstable_scheduleHydration=function(i){if(i){var r=Pv();i={blockedOn:null,target:i,priority:r};for(var u=0;u<ta.length&&r!==0&&r<ta[u].priority;u++);ta.splice(u,0,i),u===0&&Aw(i)}};var Tw=t.version;if(Tw!=="19.2.3")throw Error(n(527,Tw,"19.2.3"));B.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=h(r),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var vD={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!od.isDisabled&&od.supportsFiber)try{Ea=od.inject(vD),gn=od}catch{}}return Hl.createRoot=function(i,r){if(!a(i))throw Error(n(299));var u=!1,f="",v=jb,b=Ob,_=Pb;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(v=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=mw(i,1,!1,null,null,u,f,null,v,b,_,_w),i[br]=r.current,Bp(i),new sm(r)},Hl.hydrateRoot=function(i,r,u){if(!a(i))throw Error(n(299));var f=!1,v="",b=jb,_=Ob,M=Pb,z=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(M=u.onRecoverableError),u.formState!==void 0&&(z=u.formState)),r=mw(i,1,!0,r,u??null,f,v,z,b,_,M,_w),r.context=gw(null),u=r.current,f=qn(),f=qh(f),v=Ii(f),v.callback=null,zi(u,v,f),u=f,r.current.lanes=u,Zo(r,u),Ps(r),i[br]=r.current,Bp(i),new rd(r)},Hl.version="19.2.3",Hl}var Iw;function RD(){if(Iw)return om.exports;Iw=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),om.exports=TD(),om.exports}var ND=RD();const Ot=s=>typeof s=="string",$l=()=>{let s,t;const e=new Promise((n,a)=>{s=n,t=a});return e.resolve=s,e.reject=t,e},zw=s=>s==null?"":""+s,DD=(s,t,e)=>{s.forEach(n=>{t[n]&&(e[n]=t[n])})},MD=/###/g,Uw=s=>s&&s.indexOf("###")>-1?s.replace(MD,"."):s,Vw=s=>!s||Ot(s),rc=(s,t,e)=>{const n=Ot(t)?t.split("."):t;let a=0;for(;a<n.length-1;){if(Vw(s))return{};const o=Uw(n[a]);!s[o]&&e&&(s[o]=new e),Object.prototype.hasOwnProperty.call(s,o)?s=s[o]:s={},++a}return Vw(s)?{}:{obj:s,k:Uw(n[a])}},Hw=(s,t,e)=>{const{obj:n,k:a}=rc(s,t,Object);if(n!==void 0||t.length===1){n[a]=e;return}let o=t[t.length-1],l=t.slice(0,t.length-1),c=rc(s,l,Object);for(;c.obj===void 0&&l.length;)o=`${l[l.length-1]}.${o}`,l=l.slice(0,l.length-1),c=rc(s,l,Object),c?.obj&&typeof c.obj[`${c.k}.${o}`]<"u"&&(c.obj=void 0);c.obj[`${c.k}.${o}`]=e},kD=(s,t,e,n)=>{const{obj:a,k:o}=rc(s,t,Object);a[o]=a[o]||[],a[o].push(e)},Hd=(s,t)=>{const{obj:e,k:n}=rc(s,t);if(e&&Object.prototype.hasOwnProperty.call(e,n))return e[n]},LD=(s,t,e)=>{const n=Hd(s,e);return n!==void 0?n:Hd(t,e)},qA=(s,t,e)=>{for(const n in t)n!=="__proto__"&&n!=="constructor"&&(n in s?Ot(s[n])||s[n]instanceof String||Ot(t[n])||t[n]instanceof String?e&&(s[n]=t[n]):qA(s[n],t[n],e):s[n]=t[n]);return s},so=s=>s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var jD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const OD=s=>Ot(s)?s.replace(/[&<>"'\/]/g,t=>jD[t]):s;class PD{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const e=this.regExpMap.get(t);if(e!==void 0)return e;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}const FD=[" ",",","?","!",";"],BD=new PD(20),ID=(s,t,e)=>{t=t||"",e=e||"";const n=FD.filter(l=>t.indexOf(l)<0&&e.indexOf(l)<0);if(n.length===0)return!0;const a=BD.getRegExp(`(${n.map(l=>l==="?"?"\\?":l).join("|")})`);let o=!a.test(s);if(!o){const l=s.indexOf(e);l>0&&!a.test(s.substring(0,l))&&(o=!0)}return o},sg=(s,t,e=".")=>{if(!s)return;if(s[t])return Object.prototype.hasOwnProperty.call(s,t)?s[t]:void 0;const n=t.split(e);let a=s;for(let o=0;o<n.length;){if(!a||typeof a!="object")return;let l,c="";for(let d=o;d<n.length;++d)if(d!==o&&(c+=e),c+=n[d],l=a[c],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&d<n.length-1)continue;o+=d-o+1;break}a=l}return a},pc=s=>s?.replace("_","-"),zD={type:"logger",log(s){this.output("log",s)},warn(s){this.output("warn",s)},error(s){this.output("error",s)},output(s,t){console?.[s]?.apply?.(console,t)}};class $d{constructor(t,e={}){this.init(t,e)}init(t,e={}){this.prefix=e.prefix||"i18next:",this.logger=t||zD,this.options=e,this.debug=e.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,e,n,a){return a&&!this.debug?null:(Ot(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[e](t))}create(t){return new $d(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new $d(this.logger,t)}}var qs=new $d;class ph{constructor(){this.observers={}}on(t,e){return t.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const a=this.observers[n].get(e)||0;this.observers[n].set(e,a+1)}),this}off(t,e){if(this.observers[t]){if(!e){delete this.observers[t];return}this.observers[t].delete(e)}}emit(t,...e){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([a,o])=>{for(let l=0;l<o;l++)a(...e)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([a,o])=>{for(let l=0;l<o;l++)a.apply(a,[t,...e])})}}class $w extends ph{constructor(t,e={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}getResource(t,e,n,a={}){const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,l=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;t.indexOf(".")>-1?c=t.split("."):(c=[t,e],n&&(Array.isArray(n)?c.push(...n):Ot(n)&&o?c.push(...n.split(o)):c.push(n)));const d=Hd(this.data,c);return!d&&!e&&!n&&t.indexOf(".")>-1&&(t=c[0],e=c[1],n=c.slice(2).join(".")),d||!l||!Ot(n)?d:sg(this.data?.[t]?.[e],n,o)}addResource(t,e,n,a,o={silent:!1}){const l=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let c=[t,e];n&&(c=c.concat(l?n.split(l):n)),t.indexOf(".")>-1&&(c=t.split("."),a=e,e=c[1]),this.addNamespaces(e),Hw(this.data,c,a),o.silent||this.emit("added",t,e,n,a)}addResources(t,e,n,a={silent:!1}){for(const o in n)(Ot(n[o])||Array.isArray(n[o]))&&this.addResource(t,e,o,n[o],{silent:!0});a.silent||this.emit("added",t,e,n)}addResourceBundle(t,e,n,a,o,l={silent:!1,skipCopy:!1}){let c=[t,e];t.indexOf(".")>-1&&(c=t.split("."),a=n,n=e,e=c[1]),this.addNamespaces(e);let d=Hd(this.data,c)||{};l.skipCopy||(n=JSON.parse(JSON.stringify(n))),a?qA(d,n,o):d={...d,...n},Hw(this.data,c,d),l.silent||this.emit("added",t,e,n)}removeResourceBundle(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}hasResourceBundle(t,e){return this.getResource(t,e)!==void 0}getResourceBundle(t,e){return e||(e=this.options.defaultNS),this.getResource(t,e)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find(a=>e[a]&&Object.keys(e[a]).length>0)}toJSON(){return this.data}}var XA={processors:{},addPostProcessor(s){this.processors[s.name]=s},handle(s,t,e,n,a){return s.forEach(o=>{t=this.processors[o]?.process(t,e,n,a)??t}),t}};const YA=Symbol("i18next/PATH_KEY");function UD(){const s=[],t=Object.create(null);let e;return t.get=(n,a)=>(e?.revoke?.(),a===YA?s:(s.push(a),e=Proxy.revocable(n,t),e.proxy)),Proxy.revocable(Object.create(null),t).proxy}function ig(s,t){const{[YA]:e}=s(UD());return e.join(t?.keySeparator??".")}const Gw={},dm=s=>!Ot(s)&&typeof s!="boolean"&&typeof s!="number";class Gd extends ph{constructor(t,e={}){super(),DD(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=qs.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,e={interpolation:{}}){const n={...e};if(t==null)return!1;const a=this.resolve(t,n);if(a?.res===void 0)return!1;const o=dm(a.res);return!(n.returnObjects===!1&&o)}extractFromKey(t,e){let n=e.nsSeparator!==void 0?e.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const a=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator;let o=e.ns||this.options.defaultNS||[];const l=n&&t.indexOf(n)>-1,c=!this.options.userDefinedKeySeparator&&!e.keySeparator&&!this.options.userDefinedNsSeparator&&!e.nsSeparator&&!ID(t,n,a);if(l&&!c){const d=t.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:t,namespaces:Ot(o)?[o]:o};const h=t.split(n);(n!==a||n===a&&this.options.ns.indexOf(h[0])>-1)&&(o=h.shift()),t=h.join(a)}return{key:t,namespaces:Ot(o)?[o]:o}}translate(t,e,n){let a=typeof e=="object"?{...e}:e;if(typeof a!="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),typeof a=="object"&&(a={...a}),a||(a={}),t==null)return"";typeof t=="function"&&(t=ig(t,{...this.options,...a})),Array.isArray(t)||(t=[String(t)]);const o=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,{key:c,namespaces:d}=this.extractFromKey(t[t.length-1],a),h=d[d.length-1];let p=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;p===void 0&&(p=":");const m=a.lng||this.language,y=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(m?.toLowerCase()==="cimode")return y?o?{res:`${h}${p}${c}`,usedKey:c,exactUsedKey:c,usedLng:m,usedNS:h,usedParams:this.getUsedParamsDetails(a)}:`${h}${p}${c}`:o?{res:c,usedKey:c,exactUsedKey:c,usedLng:m,usedNS:h,usedParams:this.getUsedParamsDetails(a)}:c;const x=this.resolve(t,a);let A=x?.res;const w=x?.usedKey||c,C=x?.exactUsedKey||c,E=["[object Number]","[object Function]","[object RegExp]"],T=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,R=!this.i18nFormat||this.i18nFormat.handleAsObject,N=a.count!==void 0&&!Ot(a.count),D=Gd.hasDefaultValue(a),L=N?this.pluralResolver.getSuffix(m,a.count,a):"",k=a.ordinal&&N?this.pluralResolver.getSuffix(m,a.count,{ordinal:!1}):"",j=N&&!a.ordinal&&a.count===0,P=j&&a[`defaultValue${this.options.pluralSeparator}zero`]||a[`defaultValue${L}`]||a[`defaultValue${k}`]||a.defaultValue;let U=A;R&&!A&&D&&(U=P);const H=dm(U),J=Object.prototype.toString.apply(U);if(R&&U&&H&&E.indexOf(J)<0&&!(Ot(T)&&Array.isArray(U))){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const at=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,U,{...a,ns:d}):`key '${c} (${this.language})' returned an object instead of string.`;return o?(x.res=at,x.usedParams=this.getUsedParamsDetails(a),x):at}if(l){const at=Array.isArray(U),q=at?[]:{},rt=at?C:w;for(const O in U)if(Object.prototype.hasOwnProperty.call(U,O)){const B=`${rt}${l}${O}`;D&&!A?q[O]=this.translate(B,{...a,defaultValue:dm(P)?P[O]:void 0,joinArrays:!1,ns:d}):q[O]=this.translate(B,{...a,joinArrays:!1,ns:d}),q[O]===B&&(q[O]=U[O])}A=q}}else if(R&&Ot(T)&&Array.isArray(A))A=A.join(T),A&&(A=this.extendTranslation(A,t,a,n));else{let at=!1,q=!1;!this.isValidLookup(A)&&D&&(at=!0,A=P),this.isValidLookup(A)||(q=!0,A=c);const O=(a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&q?void 0:A,B=D&&P!==A&&this.options.updateMissing;if(q||at||B){if(this.logger.log(B?"updateKey":"missingKey",m,h,c,B?P:A),l){const F=this.resolve(c,{...a,keySeparator:!1});F&&F.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let I=[];const Y=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Y&&Y[0])for(let F=0;F<Y.length;F++)I.push(Y[F]);else this.options.saveMissingTo==="all"?I=this.languageUtils.toResolveHierarchy(a.lng||this.language):I.push(a.lng||this.language);const ft=(F,G,tt)=>{const lt=D&&tt!==A?tt:O;this.options.missingKeyHandler?this.options.missingKeyHandler(F,h,G,lt,B,a):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(F,h,G,lt,B,a),this.emit("missingKey",F,h,G,A)};this.options.saveMissing&&(this.options.saveMissingPlurals&&N?I.forEach(F=>{const G=this.pluralResolver.getSuffixes(F,a);j&&a[`defaultValue${this.options.pluralSeparator}zero`]&&G.indexOf(`${this.options.pluralSeparator}zero`)<0&&G.push(`${this.options.pluralSeparator}zero`),G.forEach(tt=>{ft([F],c+tt,a[`defaultValue${tt}`]||P)})}):ft(I,c,P))}A=this.extendTranslation(A,t,a,x,n),q&&A===c&&this.options.appendNamespaceToMissingKey&&(A=`${h}${p}${c}`),(q||at)&&this.options.parseMissingKeyHandler&&(A=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${p}${c}`:c,at?A:void 0,a))}return o?(x.res=A,x.usedParams=this.getUsedParamsDetails(a),x):A}extendTranslation(t,e,n,a,o){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=Ot(t)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(d){const m=t.match(this.interpolator.nestingRegexp);h=m&&m.length}let p=n.replace&&!Ot(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),t=this.interpolator.interpolate(t,p,n.lng||this.language||a.usedLng,n),d){const m=t.match(this.interpolator.nestingRegexp),y=m&&m.length;h<y&&(n.nest=!1)}!n.lng&&a&&a.res&&(n.lng=this.language||a.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,(...m)=>o?.[0]===m[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${m[0]} in key: ${e[0]}`),null):this.translate(...m,e),n)),n.interpolation&&this.interpolator.reset()}const l=n.postProcess||this.options.postProcess,c=Ot(l)?[l]:l;return t!=null&&c?.length&&n.applyPostProcessor!==!1&&(t=XA.handle(c,t,e,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t,e={}){let n,a,o,l,c;return Ot(t)&&(t=[t]),t.forEach(d=>{if(this.isValidLookup(n))return;const h=this.extractFromKey(d,e),p=h.key;a=p;let m=h.namespaces;this.options.fallbackNS&&(m=m.concat(this.options.fallbackNS));const y=e.count!==void 0&&!Ot(e.count),x=y&&!e.ordinal&&e.count===0,A=e.context!==void 0&&(Ot(e.context)||typeof e.context=="number")&&e.context!=="",w=e.lngs?e.lngs:this.languageUtils.toResolveHierarchy(e.lng||this.language,e.fallbackLng);m.forEach(C=>{this.isValidLookup(n)||(c=C,!Gw[`${w[0]}-${C}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(c)&&(Gw[`${w[0]}-${C}`]=!0,this.logger.warn(`key "${a}" for languages "${w.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(E=>{if(this.isValidLookup(n))return;l=E;const T=[p];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(T,p,E,C,e);else{let N;y&&(N=this.pluralResolver.getSuffix(E,e.count,e));const D=`${this.options.pluralSeparator}zero`,L=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(y&&(e.ordinal&&N.indexOf(L)===0&&T.push(p+N.replace(L,this.options.pluralSeparator)),T.push(p+N),x&&T.push(p+D)),A){const k=`${p}${this.options.contextSeparator||"_"}${e.context}`;T.push(k),y&&(e.ordinal&&N.indexOf(L)===0&&T.push(k+N.replace(L,this.options.pluralSeparator)),T.push(k+N),x&&T.push(k+D))}}let R;for(;R=T.pop();)this.isValidLookup(n)||(o=R,n=this.getResource(E,C,R,e))}))})}),{res:n,usedKey:a,exactUsedKey:o,usedLng:l,usedNS:c}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,e,n,a={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,e,n,a):this.resourceStore.getResource(t,e,n,a)}getUsedParamsDetails(t={}){const e=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!Ot(t.replace);let a=n?t.replace:t;if(n&&typeof t.count<"u"&&(a.count=t.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!n){a={...a};for(const o of e)delete a[o]}return a}static hasDefaultValue(t){const e="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e===n.substring(0,e.length)&&t[n]!==void 0)return!0;return!1}}class qw{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=qs.create("languageUtils")}getScriptPartFromCode(t){if(t=pc(t),!t||t.indexOf("-")<0)return null;const e=t.split("-");return e.length===2||(e.pop(),e[e.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(e.join("-"))}getLanguagePartFromCode(t){if(t=pc(t),!t||t.indexOf("-")<0)return t;const e=t.split("-");return this.formatLanguageCode(e[0])}formatLanguageCode(t){if(Ot(t)&&t.indexOf("-")>-1){let e;try{e=Intl.getCanonicalLocales(t)[0]}catch{}return e&&this.options.lowerCaseLng&&(e=e.toLowerCase()),e||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let e;return t.forEach(n=>{if(e)return;const a=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(a))&&(e=a)}),!e&&this.options.supportedLngs&&t.forEach(n=>{if(e)return;const a=this.getScriptPartFromCode(n);if(this.isSupportedCode(a))return e=a;const o=this.getLanguagePartFromCode(n);if(this.isSupportedCode(o))return e=o;e=this.options.supportedLngs.find(l=>{if(l===o)return l;if(!(l.indexOf("-")<0&&o.indexOf("-")<0)&&(l.indexOf("-")>0&&o.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===o||l.indexOf(o)===0&&o.length>1))return l})}),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e}getFallbackCodes(t,e){if(!t)return[];if(typeof t=="function"&&(t=t(e)),Ot(t)&&(t=[t]),Array.isArray(t))return t;if(!e)return t.default||[];let n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}toResolveHierarchy(t,e){const n=this.getFallbackCodes((e===!1?[]:e)||this.options.fallbackLng||[],t),a=[],o=l=>{l&&(this.isSupportedCode(l)?a.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return Ot(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(t))):Ot(t)&&o(this.formatLanguageCode(t)),n.forEach(l=>{a.indexOf(l)<0&&o(this.formatLanguageCode(l))}),a}}const Xw={zero:0,one:1,two:2,few:3,many:4,other:5},Yw={select:s=>s===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class VD{constructor(t,e={}){this.languageUtils=t,this.options=e,this.logger=qs.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(t,e={}){const n=pc(t==="dev"?"en":t),a=e.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:n,type:a});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let l;try{l=new Intl.PluralRules(n,{type:a})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Yw;if(!t.match(/-|_/))return Yw;const d=this.languageUtils.getLanguagePartFromCode(t);l=this.getRule(d,e)}return this.pluralRulesCache[o]=l,l}needsPlural(t,e={}){let n=this.getRule(t,e);return n||(n=this.getRule("dev",e)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,e,n={}){return this.getSuffixes(t,n).map(a=>`${e}${a}`)}getSuffixes(t,e={}){let n=this.getRule(t,e);return n||(n=this.getRule("dev",e)),n?n.resolvedOptions().pluralCategories.sort((a,o)=>Xw[a]-Xw[o]).map(a=>`${this.options.prepend}${e.ordinal?`ordinal${this.options.prepend}`:""}${a}`):[]}getSuffix(t,e,n={}){const a=this.getRule(t,n);return a?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a.select(e)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",e,n))}}const Ww=(s,t,e,n=".",a=!0)=>{let o=LD(s,t,e);return!o&&a&&Ot(e)&&(o=sg(s,e,n),o===void 0&&(o=sg(t,e,n))),o},hm=s=>s.replace(/\$/g,"$$$$");class Kw{constructor(t={}){this.logger=qs.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(e=>e),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:e,escapeValue:n,useRawValueToEscape:a,prefix:o,prefixEscaped:l,suffix:c,suffixEscaped:d,formatSeparator:h,unescapeSuffix:p,unescapePrefix:m,nestingPrefix:y,nestingPrefixEscaped:x,nestingSuffix:A,nestingSuffixEscaped:w,nestingOptionsSeparator:C,maxReplaces:E,alwaysFormat:T}=t.interpolation;this.escape=e!==void 0?e:OD,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=o?so(o):l||"{{",this.suffix=c?so(c):d||"}}",this.formatSeparator=h||",",this.unescapePrefix=p?"":m||"-",this.unescapeSuffix=this.unescapePrefix?"":p||"",this.nestingPrefix=y?so(y):x||so("$t("),this.nestingSuffix=A?so(A):w||so(")"),this.nestingOptionsSeparator=C||",",this.maxReplaces=E||1e3,this.alwaysFormat=T!==void 0?T:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(e,n)=>e?.source===n?(e.lastIndex=0,e):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,e,n,a){let o,l,c;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=x=>{if(x.indexOf(this.formatSeparator)<0){const E=Ww(e,d,x,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(E,void 0,n,{...a,...e,interpolationkey:x}):E}const A=x.split(this.formatSeparator),w=A.shift().trim(),C=A.join(this.formatSeparator).trim();return this.format(Ww(e,d,w,this.options.keySeparator,this.options.ignoreJSONStructure),C,n,{...a,...e,interpolationkey:w})};this.resetRegExp();const p=a?.missingInterpolationHandler||this.options.missingInterpolationHandler,m=a?.interpolation?.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:x=>hm(x)},{regex:this.regexp,safeValue:x=>this.escapeValue?hm(this.escape(x)):hm(x)}].forEach(x=>{for(c=0;o=x.regex.exec(t);){const A=o[1].trim();if(l=h(A),l===void 0)if(typeof p=="function"){const C=p(t,o,a);l=Ot(C)?C:""}else if(a&&Object.prototype.hasOwnProperty.call(a,A))l="";else if(m){l=o[0];continue}else this.logger.warn(`missed to pass in variable ${A} for interpolating ${t}`),l="";else!Ot(l)&&!this.useRawValueToEscape&&(l=zw(l));const w=x.safeValue(l);if(t=t.replace(o[0],w),m?(x.regex.lastIndex+=l.length,x.regex.lastIndex-=o[0].length):x.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),t}nest(t,e,n={}){let a,o,l;const c=(d,h)=>{const p=this.nestingOptionsSeparator;if(d.indexOf(p)<0)return d;const m=d.split(new RegExp(`${p}[ ]*{`));let y=`{${m[1]}`;d=m[0],y=this.interpolate(y,l);const x=y.match(/'/g),A=y.match(/"/g);((x?.length??0)%2===0&&!A||A.length%2!==0)&&(y=y.replace(/'/g,'"'));try{l=JSON.parse(y),h&&(l={...h,...l})}catch(w){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,w),`${d}${p}${y}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,d};for(;a=this.nestingRegexp.exec(t);){let d=[];l={...n},l=l.replace&&!Ot(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const h=/{.*}/.test(a[1])?a[1].lastIndexOf("}")+1:a[1].indexOf(this.formatSeparator);if(h!==-1&&(d=a[1].slice(h).split(this.formatSeparator).map(p=>p.trim()).filter(Boolean),a[1]=a[1].slice(0,h)),o=e(c.call(this,a[1].trim(),l),l),o&&a[0]===t&&!Ot(o))return o;Ot(o)||(o=zw(o)),o||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${t}`),o=""),d.length&&(o=d.reduce((p,m)=>this.format(p,m,n.lng,{...n,interpolationkey:a[1].trim()}),o.trim())),t=t.replace(a[0],o),this.regexp.lastIndex=0}return t}}const HD=s=>{let t=s.toLowerCase().trim();const e={};if(s.indexOf("(")>-1){const n=s.split("(");t=n[0].toLowerCase().trim();const a=n[1].substring(0,n[1].length-1);t==="currency"&&a.indexOf(":")<0?e.currency||(e.currency=a.trim()):t==="relativetime"&&a.indexOf(":")<0?e.range||(e.range=a.trim()):a.split(";").forEach(l=>{if(l){const[c,...d]=l.split(":"),h=d.join(":").trim().replace(/^'+|'+$/g,""),p=c.trim();e[p]||(e[p]=h),h==="false"&&(e[p]=!1),h==="true"&&(e[p]=!0),isNaN(h)||(e[p]=parseInt(h,10))}})}return{formatName:t,formatOptions:e}},Qw=s=>{const t={};return(e,n,a)=>{let o=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(o={...o,[a.interpolationkey]:void 0});const l=n+JSON.stringify(o);let c=t[l];return c||(c=s(pc(n),a),t[l]=c),c(e)}},$D=s=>(t,e,n)=>s(pc(e),n)(t);class GD{constructor(t={}){this.logger=qs.create("formatter"),this.options=t,this.init(t)}init(t,e={interpolation:{}}){this.formatSeparator=e.interpolation.formatSeparator||",";const n=e.cacheInBuiltFormats?Qw:$D;this.formats={number:n((a,o)=>{const l=new Intl.NumberFormat(a,{...o});return c=>l.format(c)}),currency:n((a,o)=>{const l=new Intl.NumberFormat(a,{...o,style:"currency"});return c=>l.format(c)}),datetime:n((a,o)=>{const l=new Intl.DateTimeFormat(a,{...o});return c=>l.format(c)}),relativetime:n((a,o)=>{const l=new Intl.RelativeTimeFormat(a,{...o});return c=>l.format(c,o.range||"day")}),list:n((a,o)=>{const l=new Intl.ListFormat(a,{...o});return c=>l.format(c)})}}add(t,e){this.formats[t.toLowerCase().trim()]=e}addCached(t,e){this.formats[t.toLowerCase().trim()]=Qw(e)}format(t,e,n,a={}){const o=e.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(c=>c.indexOf(")")>-1)){const c=o.findIndex(d=>d.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,c)].join(this.formatSeparator)}return o.reduce((c,d)=>{const{formatName:h,formatOptions:p}=HD(d);if(this.formats[h]){let m=c;try{const y=a?.formatParams?.[a.interpolationkey]||{},x=y.locale||y.lng||a.locale||a.lng||n;m=this.formats[h](c,x,{...p,...a,...y})}catch(y){this.logger.warn(y)}return m}else this.logger.warn(`there was no format function for ${h}`);return c},t)}}const qD=(s,t)=>{s.pending[t]!==void 0&&(delete s.pending[t],s.pendingCount--)};class XD extends ph{constructor(t,e,n,a={}){super(),this.backend=t,this.store=e,this.services=n,this.languageUtils=n.languageUtils,this.options=a,this.logger=qs.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,a.backend,a)}queueLoad(t,e,n,a){const o={},l={},c={},d={};return t.forEach(h=>{let p=!0;e.forEach(m=>{const y=`${h}|${m}`;!n.reload&&this.store.hasResourceBundle(h,m)?this.state[y]=2:this.state[y]<0||(this.state[y]===1?l[y]===void 0&&(l[y]=!0):(this.state[y]=1,p=!1,l[y]===void 0&&(l[y]=!0),o[y]===void 0&&(o[y]=!0),d[m]===void 0&&(d[m]=!0)))}),p||(c[h]=!0)}),(Object.keys(o).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(o),pending:Object.keys(l),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(d)}}loaded(t,e,n){const a=t.split("|"),o=a[0],l=a[1];e&&this.emit("failedLoading",o,l,e),!e&&n&&this.store.addResourceBundle(o,l,n,void 0,void 0,{skipCopy:!0}),this.state[t]=e?-1:2,e&&n&&(this.state[t]=0);const c={};this.queue.forEach(d=>{kD(d.loaded,[o],l),qD(d,t),e&&d.errors.push(e),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(h=>{c[h]||(c[h]={});const p=d.loaded[h];p.length&&p.forEach(m=>{c[h][m]===void 0&&(c[h][m]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(d=>!d.done)}read(t,e,n,a=0,o=this.retryTimeout,l){if(!t.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:e,fcName:n,tried:a,wait:o,callback:l});return}this.readingCalls++;const c=(h,p)=>{if(this.readingCalls--,this.waitingReads.length>0){const m=this.waitingReads.shift();this.read(m.lng,m.ns,m.fcName,m.tried,m.wait,m.callback)}if(h&&p&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,t,e,n,a+1,o*2,l)},o);return}l(h,p)},d=this.backend[n].bind(this.backend);if(d.length===2){try{const h=d(t,e);h&&typeof h.then=="function"?h.then(p=>c(null,p)).catch(c):c(null,h)}catch(h){c(h)}return}return d(t,e,c)}prepareLoading(t,e,n={},a){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();Ot(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Ot(e)&&(e=[e]);const o=this.queueLoad(t,e,n,a);if(!o.toLoad.length)return o.pending.length||a(),null;o.toLoad.forEach(l=>{this.loadOne(l)})}load(t,e,n){this.prepareLoading(t,e,{},n)}reload(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}loadOne(t,e=""){const n=t.split("|"),a=n[0],o=n[1];this.read(a,o,"read",void 0,void 0,(l,c)=>{l&&this.logger.warn(`${e}loading namespace ${o} for language ${a} failed`,l),!l&&c&&this.logger.log(`${e}loaded namespace ${o} for language ${a}`,c),this.loaded(t,l,c)})}saveMissing(t,e,n,a,o,l={},c=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(e)){this.logger.warn(`did not save key "${n}" as the namespace "${e}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const d={...l,isUpdate:o},h=this.backend.create.bind(this.backend);if(h.length<6)try{let p;h.length===5?p=h(t,e,n,a,d):p=h(t,e,n,a),p&&typeof p.then=="function"?p.then(m=>c(null,m)).catch(c):c(null,p)}catch(p){c(p)}else h(t,e,n,a,c,d)}!t||!t[0]||this.store.addResource(t[0],e,n,a)}}}const fm=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:s=>{let t={};if(typeof s[1]=="object"&&(t=s[1]),Ot(s[1])&&(t.defaultValue=s[1]),Ot(s[2])&&(t.tDescription=s[2]),typeof s[2]=="object"||typeof s[3]=="object"){const e=s[3]||s[2];Object.keys(e).forEach(n=>{t[n]=e[n]})}return t},interpolation:{escapeValue:!0,format:s=>s,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Zw=s=>(Ot(s.ns)&&(s.ns=[s.ns]),Ot(s.fallbackLng)&&(s.fallbackLng=[s.fallbackLng]),Ot(s.fallbackNS)&&(s.fallbackNS=[s.fallbackNS]),s.supportedLngs?.indexOf?.("cimode")<0&&(s.supportedLngs=s.supportedLngs.concat(["cimode"])),typeof s.initImmediate=="boolean"&&(s.initAsync=s.initImmediate),s),ld=()=>{},YD=s=>{Object.getOwnPropertyNames(Object.getPrototypeOf(s)).forEach(e=>{typeof s[e]=="function"&&(s[e]=s[e].bind(s))})};class oc extends ph{constructor(t={},e){if(super(),this.options=Zw(t),this.services={},this.logger=qs,this.modules={external:[]},YD(this),e&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,e),this;setTimeout(()=>{this.init(t,e)},0)}}init(t={},e){this.isInitializing=!0,typeof t=="function"&&(e=t,t={}),t.defaultNS==null&&t.ns&&(Ot(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=fm();this.options={...n,...this.options,...Zw(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=n.overloadTranslationOptionHandler),this.options.debug===!0&&typeof console<"u"&&console.warn("i18next is maintained with support from locize.com  consider powering your project with managed localization (AI, CDN, integrations): https://locize.com");const a=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?qs.init(a(this.modules.logger),this.options):qs.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=GD;const p=new qw(this.options);this.store=new $w(this.options.resources,this.options);const m=this.services;m.logger=qs,m.resourceStore=this.store,m.languageUtils=p,m.pluralResolver=new VD(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(m.formatter=a(h),m.formatter.init&&m.formatter.init(m,this.options),this.options.interpolation.format=m.formatter.format.bind(m.formatter)),m.interpolator=new Kw(this.options),m.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},m.backendConnector=new XD(a(this.modules.backend),m.resourceStore,m,this.options),m.backendConnector.on("*",(x,...A)=>{this.emit(x,...A)}),this.modules.languageDetector&&(m.languageDetector=a(this.modules.languageDetector),m.languageDetector.init&&m.languageDetector.init(m,this.options.detection,this.options)),this.modules.i18nFormat&&(m.i18nFormat=a(this.modules.i18nFormat),m.i18nFormat.init&&m.i18nFormat.init(this)),this.translator=new Gd(this.services,this.options),this.translator.on("*",(x,...A)=>{this.emit(x,...A)}),this.modules.external.forEach(x=>{x.init&&x.init(this)})}if(this.format=this.options.interpolation.format,e||(e=ld),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...p)=>this.store[h](...p)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...p)=>(this.store[h](...p),this)});const c=$l(),d=()=>{const h=(p,m)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(m),e(p,m)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),c}loadResources(t,e=ld){let n=e;const a=Ot(t)?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(a?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const o=[],l=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(h=>{h!=="cimode"&&o.indexOf(h)<0&&o.push(h)})};a?l(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>l(d)),this.options.preload?.forEach?.(c=>l(c)),this.services.backendConnector.load(o,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(c)})}else n(null)}reloadResources(t,e,n){const a=$l();return typeof t=="function"&&(n=t,t=void 0),typeof e=="function"&&(n=e,e=void 0),t||(t=this.languages),e||(e=this.options.ns),n||(n=ld),this.services.backendConnector.reload(t,e,o=>{a.resolve(),n(o)}),a}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&XA.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let e=0;e<this.languages.length;e++){const n=this.languages[e];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,e){this.isLanguageChangingTo=t;const n=$l();this.emit("languageChanging",t);const a=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},o=(c,d)=>{d?this.isLanguageChangingTo===t&&(a(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,n.resolve((...h)=>this.t(...h)),e&&e(c,(...h)=>this.t(...h))},l=c=>{!t&&!c&&this.services.languageDetector&&(c=[]);const d=Ot(c)?c:c&&c[0],h=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(Ot(c)?[c]:c);h&&(this.language||a(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector?.cacheUserLanguage?.(h)),this.loadResources(h,p=>{o(p,h)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(t),n}getFixedT(t,e,n){const a=(o,l,...c)=>{let d;typeof l!="object"?d=this.options.overloadTranslationOptionHandler([o,l].concat(c)):d={...l},d.lng=d.lng||a.lng,d.lngs=d.lngs||a.lngs,d.ns=d.ns||a.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||n||a.keyPrefix);const h=this.options.keySeparator||".";let p;return d.keyPrefix&&Array.isArray(o)?p=o.map(m=>(typeof m=="function"&&(m=ig(m,{...this.options,...l})),`${d.keyPrefix}${h}${m}`)):(typeof o=="function"&&(o=ig(o,{...this.options,...l})),p=d.keyPrefix?`${d.keyPrefix}${h}${o}`:o),this.t(p,d)};return Ot(t)?a.lng=t:a.lngs=t,a.ns=e,a.keyPrefix=n,a}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,e={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=e.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const l=(c,d)=>{const h=this.services.backendConnector.state[`${c}|${d}`];return h===-1||h===0||h===2};if(e.precheck){const c=e.precheck(this,l);if(c!==void 0)return c}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(n,t)&&(!a||l(o,t)))}loadNamespaces(t,e){const n=$l();return this.options.ns?(Ot(t)&&(t=[t]),t.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{n.resolve(),e&&e(a)}),n):(e&&e(),Promise.resolve())}loadLanguages(t,e){const n=$l();Ot(t)&&(t=[t]);const a=this.options.preload||[],o=t.filter(l=>a.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return o.length?(this.options.preload=a.concat(o),this.loadResources(l=>{n.resolve(),e&&e(l)}),n):(e&&e(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{const a=new Intl.Locale(t);if(a&&a.getTextInfo){const o=a.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const e=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new qw(fm());return t.toLowerCase().indexOf("-latn")>1?"ltr":e.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},e){const n=new oc(t,e);return n.createInstance=oc.createInstance,n}cloneInstance(t={},e=ld){const n=t.forkResourceStore;n&&delete t.forkResourceStore;const a={...this.options,...t,isClone:!0},o=new oc(a);if((t.debug!==void 0||t.prefix!==void 0)&&(o.logger=o.logger.clone(t)),["store","services","language"].forEach(c=>{o[c]=this[c]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},n){const c=Object.keys(this.store.data).reduce((d,h)=>(d[h]={...this.store.data[h]},d[h]=Object.keys(d[h]).reduce((p,m)=>(p[m]={...d[h][m]},p),d[h]),d),{});o.store=new $w(c,a),o.services.resourceStore=o.store}if(t.interpolation){const d={...fm().interpolation,...this.options.interpolation,...t.interpolation},h={...a,interpolation:d};o.services.interpolator=new Kw(h)}return o.translator=new Gd(o.services,a),o.translator.on("*",(c,...d)=>{o.emit(c,...d)}),o.init(a,e),o.translator.options=a,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const En=oc.createInstance();En.createInstance;En.dir;En.init;En.loadResources;En.reloadResources;En.use;En.changeLanguage;En.getFixedT;En.t;En.exists;En.setDefaultNamespace;En.hasLoadedNamespace;En.loadNamespaces;En.loadLanguages;const WD=(s,t,e,n)=>{const a=[e,{code:t,...n||{}}];if(s?.services?.logger?.forward)return s.services.logger.forward(a,"warn","react-i18next::",!0);rr(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),s?.services?.logger?.warn?s.services.logger.warn(...a):console?.warn&&console.warn(...a)},Jw={},WA=(s,t,e,n)=>{rr(e)&&Jw[e]||(rr(e)&&(Jw[e]=new Date),WD(s,t,e,n))},KA=(s,t)=>()=>{if(s.isInitialized)t();else{const e=()=>{setTimeout(()=>{s.off("initialized",e)},0),t()};s.on("initialized",e)}},ag=(s,t,e)=>{s.loadNamespaces(t,KA(s,e))},tS=(s,t,e,n)=>{if(rr(e)&&(e=[e]),s.options.preload&&s.options.preload.indexOf(t)>-1)return ag(s,e,n);e.forEach(a=>{s.options.ns.indexOf(a)<0&&s.options.ns.push(a)}),s.loadLanguages(t,KA(s,n))},KD=(s,t,e={})=>!t.languages||!t.languages.length?(WA(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(s,{lng:e.lng,precheck:(n,a)=>{if(e.bindI18n&&e.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!a(n.isLanguageChangingTo,s))return!1}}),rr=s=>typeof s=="string",QD=s=>typeof s=="object"&&s!==null,ZD=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,JD={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},tM=s=>JD[s],eM=s=>s.replace(ZD,tM);let rg={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:eM,transDefaultProps:void 0};const nM=(s={})=>{rg={...rg,...s}},sM=()=>rg;let QA;const iM=s=>{QA=s},aM=()=>QA,rM={type:"3rdParty",init(s){nM(s.options.react),iM(s)}},oM=S.createContext();class lM{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var pm={exports:{}},mm={};var eS;function cM(){if(eS)return mm;eS=1;var s=fh();function t(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var e=typeof Object.is=="function"?Object.is:t,n=s.useState,a=s.useEffect,o=s.useLayoutEffect,l=s.useDebugValue;function c(m,y){var x=y(),A=n({inst:{value:x,getSnapshot:y}}),w=A[0].inst,C=A[1];return o(function(){w.value=x,w.getSnapshot=y,d(w)&&C({inst:w})},[m,x,y]),a(function(){return d(w)&&C({inst:w}),m(function(){d(w)&&C({inst:w})})},[m]),l(x),x}function d(m){var y=m.getSnapshot;m=m.value;try{var x=y();return!e(m,x)}catch{return!0}}function h(m,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return mm.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:p,mm}var nS;function uM(){return nS||(nS=1,pm.exports=cM()),pm.exports}var dM=uM();const hM=(s,t)=>rr(t)?t:QD(t)&&rr(t.defaultValue)?t.defaultValue:Array.isArray(s)?s[s.length-1]:s,fM={t:hM,ready:!1},pM=()=>()=>{},Ns=(s,t={})=>{const{i18n:e}=t,{i18n:n,defaultNS:a}=S.useContext(oM)||{},o=e||n||aM();o&&!o.reportNamespaces&&(o.reportNamespaces=new lM),o||WA(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const l=S.useMemo(()=>({...sM(),...o?.options?.react,...t}),[o,t]),{useSuspense:c,keyPrefix:d}=l,h=a||o?.options?.defaultNS,p=rr(h)?[h]:h||["translation"],m=S.useMemo(()=>p,p);o?.reportNamespaces?.addUsedNamespaces?.(m);const y=S.useRef(0),x=S.useCallback(P=>{if(!o)return pM;const{bindI18n:U,bindI18nStore:H}=l,J=()=>{y.current+=1,P()};return U&&o.on(U,J),H&&o.store.on(H,J),()=>{U&&U.split(" ").forEach(at=>o.off(at,J)),H&&H.split(" ").forEach(at=>o.store.off(at,J))}},[o,l]),A=S.useRef(),w=S.useCallback(()=>{if(!o)return fM;const P=!!(o.isInitialized||o.initializedStoreOnce)&&m.every(rt=>KD(rt,o,l)),U=t.lng||o.language,H=y.current,J=A.current;if(J&&J.ready===P&&J.lng===U&&J.keyPrefix===d&&J.revision===H)return J;const q={t:o.getFixedT(U,l.nsMode==="fallback"?m:m[0],d),ready:P,lng:U,keyPrefix:d,revision:H};return A.current=q,q},[o,m,d,l,t.lng]),[C,E]=S.useState(0),{t:T,ready:R}=dM.useSyncExternalStore(x,w,w);S.useEffect(()=>{if(o&&!R&&!c){const P=()=>E(U=>U+1);t.lng?tS(o,t.lng,m,P):ag(o,m,P)}},[o,t.lng,m,R,c,C]);const N=o||{},D=S.useRef(null),L=S.useRef(),k=P=>{const U=Object.getOwnPropertyDescriptors(P);U.__original&&delete U.__original;const H=Object.create(Object.getPrototypeOf(P),U);if(!Object.prototype.hasOwnProperty.call(H,"__original"))try{Object.defineProperty(H,"__original",{value:P,writable:!1,enumerable:!1,configurable:!1})}catch{}return H},j=S.useMemo(()=>{const P=N,U=P?.language;let H=P;P&&(D.current&&D.current.__original===P?L.current!==U?(H=k(P),D.current=H,L.current=U):H=D.current:(H=k(P),D.current=H,L.current=U));const J=[T,H,R];return J.t=T,J.i18n=H,J.ready=R,J},[T,N,R,N.resolvedLanguage,N.language,N.languages]);if(o&&c&&!R)throw new Promise(P=>{const U=()=>P();t.lng?tS(o,t.lng,m,U):ag(o,m,U)});return j},mM={loading:"...",error:"",save:"",cancel:"",delete:"",edit:"",search:"",settings:"",help:"",logout:"",of:""},gM="",yM=" ...",vM="",bM="...",xM=" ,     ?",wM="   ",SM={name:"EDO",subtitle:""},AM={dashboard:" ",documents:""},CM={title:"Dashboard",subtitle:"   ",stats:{total:" ",pending:" ",signed:"",archived:" "},pendingSignatures:" ",recentDocuments:" ",noPending:"   ",noDocuments:" ",waiting:""},EM={title:"",subtitle:" ",loadError:"   ",noDocumentSelected:"   ",loading:" ...",fields:{title:"",documentType:" ",status:"",documentDate:" ",registrationDate:" ",description:"",author:""},status:{inProgress:" ",pending:" ",signed:"",archived:""}},_M={userMenu:{profile:""}},TM={searchPlaceholder:" ...",noDocuments:" ",addDocument:" "},RM={loading:" ...",noDocumentSelected:" ",selectDocumentMessage:"      ",tabs:{document:"",signatures:"",history:""},viewMode:" ",signatureRequired:" ",signatureWaiting:"     ",noContent:"   ",supplier:":",buyer:":",signature:" / ",notSpecified:" "},NM={documentInfo:"  ",documentNumber:" ",documentType:" ",creationDate:" ",from:" ",organization:"",status:"",signingProgress:" ",signaturesRequired:" ",signedAt:"",waitingSignature:" ",actions:"",sign:"",download:" ",print:"",history:" "},DM={common:mM,comments:gM,addComment:yM,send:vM,sending:bM,deleteCommentConfirm:xM,deleteCommentError:wM,app:SM,navigation:AM,dashboard:CM,documents:EM,header:_M,documentSidebar:TM,documentContent:RM,documentMetadata:NM},MM={loading:"Loading...",error:"Error",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",search:"Search",settings:"Settings",help:"Help",logout:"Logout",of:"of"},kM={name:"EDO",subtitle:"Document Management"},LM={dashboard:"Dashboard",documents:"Documents"},jM={title:"Dashboard",subtitle:"Electronic document management system overview",stats:{total:"Total Documents",pending:"Pending Signature",signed:"Signed",archived:"Archived"},pendingSignatures:"Require Signature",recentDocuments:"Recent Documents",noPending:"No documents pending signature",noDocuments:"No documents",waiting:"Waiting"},OM={title:"Documents",subtitle:"Document Management",loadError:"Failed to load documents",noDocumentSelected:"Select a document to view",loading:"Loading document...",fields:{title:"Title",documentType:"Document Type",status:"Status",documentDate:"Document Date",registrationDate:"Registration Date",description:"Description",author:"Author"},status:{inProgress:"In Progress",pending:"Pending",signed:"Signed",archived:"Archived"}},PM="Comments",FM="Add a comment...",BM="Send",IM="Sending...",zM="Are you sure you want to delete this comment?",UM="Failed to delete comment",VM={userMenu:{profile:"Profile"}},HM={searchPlaceholder:"Search documents...",noDocuments:"No documents",addDocument:"Add Document"},$M={loading:"Loading document...",noDocumentSelected:"Select a document",selectDocumentMessage:"Select a document from the list on the left to view",tabs:{document:"Document",signatures:"Signatures",history:"History"},viewMode:"View mode",signatureRequired:"Signature required",signatureWaiting:"Document is waiting for signatures from authorized persons",noContent:"Document content not specified",supplier:"SUPPLIER:",buyer:"BUYER:",signature:"Signature / EDS",notSpecified:"Not specified"},GM={documentInfo:"Document Information",documentNumber:"Document Number",documentType:"Document Type",creationDate:"Creation Date",from:"From",organization:"Organization",status:"Status",signingProgress:"Signing Progress",signaturesRequired:"Signatures Required",signedAt:"Signed at",waitingSignature:"Waiting for signature",actions:"Actions",sign:"Sign",download:"Download document",print:"Print",history:"Change history"},qM={common:MM,app:kM,navigation:LM,dashboard:jM,documents:OM,comments:PM,addComment:FM,send:BM,sending:IM,deleteCommentConfirm:zM,deleteCommentError:UM,header:VM,documentSidebar:HM,documentContent:$M,documentMetadata:GM},XM={loading:"Yuklanmoqda...",error:"Xatolik",save:"Saqlash",cancel:"Bekor qilish",delete:"O'chirish",edit:"Tahrirlash",search:"Qidirish",settings:"Sozlamalar",help:"Yordam",logout:"Chiqish",of:"dan"},YM={name:"EDO",subtitle:"Hujjatlar boshqaruvi"},WM={dashboard:"Boshqaruv paneli",documents:"Hujjatlar"},KM={title:"Boshqaruv paneli",subtitle:"Elektron hujjatlar boshqaruvi tizimi ko'rinishi",stats:{total:"Jami hujjatlar",pending:"Imzolanishi kerak",signed:"Imzolangan",archived:"Arxivda"},pendingSignatures:"Imzo talab qilinadi",recentDocuments:"So'nggi hujjatlar",noPending:"Imzolanishi kerak bo'lgan hujjatlar yo'q",noDocuments:"Hujjatlar yo'q",waiting:"Kutilmoqda"},QM={title:"Hujjatlar",subtitle:"Hujjatlar boshqaruvi",loadError:"Hujjatlarni yuklab bo'lmadi",noDocumentSelected:"Ko'rish uchun hujjatni tanlang",loading:"Hujjat yuklanmoqda...",fields:{title:"Nomi",documentType:"Hujjat turi",status:"Holati",documentDate:"Hujjat sanasi",registrationDate:"Ro'yxatga olish sanasi",description:"Tavsif",author:"Muallif"},status:{inProgress:"Jarayonda",pending:"Imzolanishi kerak",signed:"Imzolangan",archived:"Arxivda"}},ZM="Izohlar",JM="Izoh qo'shish...",tk="Yuborish",ek="Yuborilmoqda...",nk="Bu izohni o'chirishni xohlaysizmi?",sk="Izohni o'chirib bo'lmadi",ik={userMenu:{profile:"Profil"}},ak={searchPlaceholder:"Hujjatlarni qidirish...",noDocuments:"Hujjatlar yo'q",addDocument:"Hujjat qo'shish"},rk={loading:"Hujjat yuklanmoqda...",noDocumentSelected:"Hujjatni tanlang",selectDocumentMessage:"Ko'rish uchun chapdagi ro'yxatdan hujjatni tanlang",tabs:{document:"Hujjat",signatures:"Imzolar",history:"Tarix"},viewMode:"Ko'rish rejimi",signatureRequired:"Imzo talab qilinadi",signatureWaiting:"Hujjat vakolatli shaxslardan imzo kutmoqda",noContent:"Hujjat mazmuni ko'rsatilmagan",supplier:"TA'MINOTCHI:",buyer:"XARIDOR:",signature:"Imzo / EDS",notSpecified:"Ko'rsatilmagan"},ok={documentInfo:"Hujjat ma'lumotlari",documentNumber:"Hujjat raqami",documentType:"Hujjat turi",creationDate:"Yaratilgan sana",from:"Kimdan",organization:"Tashkilot",status:"Holati",signingProgress:"Imzolash jarayoni",signaturesRequired:"Imzolar talab qilinadi",signedAt:"Imzolangan",waitingSignature:"Imzo kutmoqda",actions:"Harakatlar",sign:"Imzolash",download:"Hujjatni yuklab olish",print:"Chop etish",history:"O'zgarishlar tarixi"},lk={common:XM,app:YM,navigation:WM,dashboard:KM,documents:QM,comments:ZM,addComment:JM,send:tk,sending:ek,deleteCommentConfirm:nk,deleteCommentError:sk,header:ik,documentSidebar:ak,documentContent:rk,documentMetadata:ok};En.use(rM).init({resources:{ru:{translation:DM},en:{translation:qM},uz:{translation:lk}},lng:localStorage.getItem("i18nextLng")||"ru",fallbackLng:"ru",interpolation:{escapeValue:!1}});var sS="popstate";function ck(s={}){function t(a,o){let{pathname:l="/",search:c="",hash:d=""}=mr(a.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),og("",{pathname:l,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function e(a,o){let l=a.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let d=a.location.href,h=d.indexOf("#");c=h===-1?d:d.slice(0,h)}return c+"#"+(typeof o=="string"?o:mc(o))}function n(a,o){ys(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return dk(t,e,n,s)}function Ee(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function ys(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function uk(){return Math.random().toString(36).substring(2,10)}function iS(s,t){return{usr:s.state,key:s.key,idx:t}}function og(s,t,e=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?mr(t):t,state:e,key:t&&t.key||n||uk()}}function mc({pathname:s="/",search:t="",hash:e=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(s+=e.charAt(0)==="#"?e:"#"+e),s}function mr(s){let t={};if(s){let e=s.indexOf("#");e>=0&&(t.hash=s.substring(e),s=s.substring(0,e));let n=s.indexOf("?");n>=0&&(t.search=s.substring(n),s=s.substring(0,n)),s&&(t.pathname=s)}return t}function dk(s,t,e,n={}){let{window:a=document.defaultView,v5Compat:o=!1}=n,l=a.history,c="POP",d=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function m(){c="POP";let C=p(),E=C==null?null:C-h;h=C,d&&d({action:c,location:w.location,delta:E})}function y(C,E){c="PUSH";let T=og(w.location,C,E);e&&e(T,C),h=p()+1;let R=iS(T,h),N=w.createHref(T);try{l.pushState(R,"",N)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(N)}o&&d&&d({action:c,location:w.location,delta:1})}function x(C,E){c="REPLACE";let T=og(w.location,C,E);e&&e(T,C),h=p();let R=iS(T,h),N=w.createHref(T);l.replaceState(R,"",N),o&&d&&d({action:c,location:w.location,delta:0})}function A(C){return hk(C)}let w={get action(){return c},get location(){return s(a,l)},listen(C){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(sS,m),d=C,()=>{a.removeEventListener(sS,m),d=null}},createHref(C){return t(a,C)},createURL:A,encodeLocation(C){let E=A(C);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:y,replace:x,go(C){return l.go(C)}};return w}function hk(s,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Ee(e,"No window.location.(origin|href) available to create URL");let n=typeof s=="string"?s:mc(s);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function ZA(s,t,e="/"){return fk(s,t,e,!1)}function fk(s,t,e,n){let a=typeof t=="string"?mr(t):t,o=Ai(a.pathname||"/",e);if(o==null)return null;let l=JA(s);pk(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let h=Ek(o);c=Ak(l[d],h,n)}return c}function JA(s,t=[],e=[],n="",a=!1){let o=(l,c,d=a,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&d)return;Ee(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let m=wi([n,p.relativePath]),y=e.concat(p);l.children&&l.children.length>0&&(Ee(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),JA(l.children,t,y,m,d)),!(l.path==null&&!l.index)&&t.push({path:m,score:wk(m,l.index),routesMeta:y})};return s.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))o(l,c);else for(let d of tC(l.path))o(l,c,!0,d)}),t}function tC(s){let t=s.split("/");if(t.length===0)return[];let[e,...n]=t,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let l=tC(n.join("/")),c=[];return c.push(...l.map(d=>d===""?o:[o,d].join("/"))),a&&c.push(...l),c.map(d=>s.startsWith("/")&&d===""?"/":d)}function pk(s){s.sort((t,e)=>t.score!==e.score?e.score-t.score:Sk(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var mk=/^:[\w-]+$/,gk=3,yk=2,vk=1,bk=10,xk=-2,aS=s=>s==="*";function wk(s,t){let e=s.split("/"),n=e.length;return e.some(aS)&&(n+=xk),t&&(n+=yk),e.filter(a=>!aS(a)).reduce((a,o)=>a+(mk.test(o)?gk:o===""?vk:bk),n)}function Sk(s,t){return s.length===t.length&&s.slice(0,-1).every((n,a)=>n===t[a])?s[s.length-1]-t[t.length-1]:0}function Ak(s,t,e=!1){let{routesMeta:n}=s,a={},o="/",l=[];for(let c=0;c<n.length;++c){let d=n[c],h=c===n.length-1,p=o==="/"?t:t.slice(o.length)||"/",m=qd({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},p),y=d.route;if(!m&&h&&e&&!n[n.length-1].route.index&&(m=qd({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!m)return null;Object.assign(a,m.params),l.push({params:a,pathname:wi([o,m.pathname]),pathnameBase:Nk(wi([o,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(o=wi([o,m.pathnameBase]))}return l}function qd(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[e,n]=Ck(s.path,s.caseSensitive,s.end),a=t.match(e);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:n.reduce((h,{paramName:p,isOptional:m},y)=>{if(p==="*"){let A=c[y]||"";l=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const x=c[y];return m&&!x?h[p]=void 0:h[p]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:s}}function Ck(s,t=!1,e=!0){ys(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(n.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(n.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Ek(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ys(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function Ai(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=s.charAt(e);return n&&n!=="/"?null:s.slice(e)||"/"}var eC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_k=s=>eC.test(s);function Tk(s,t="/"){let{pathname:e,search:n="",hash:a=""}=typeof s=="string"?mr(s):s,o;if(e)if(_k(e))o=e;else{if(e.includes("//")){let l=e;e=e.replace(/\/\/+/g,"/"),ys(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${e}`)}e.startsWith("/")?o=rS(e.substring(1),"/"):o=rS(e,t)}else o=t;return{pathname:o,search:Dk(n),hash:Mk(a)}}function rS(s,t){let e=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function gm(s,t,e,n){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Rk(s){return s.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function nC(s){let t=Rk(s);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function sC(s,t,e,n=!1){let a;typeof s=="string"?a=mr(s):(a={...s},Ee(!a.pathname||!a.pathname.includes("?"),gm("?","pathname","search",a)),Ee(!a.pathname||!a.pathname.includes("#"),gm("#","pathname","hash",a)),Ee(!a.search||!a.search.includes("#"),gm("#","search","hash",a)));let o=s===""||a.pathname==="",l=o?"/":a.pathname,c;if(l==null)c=e;else{let m=t.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),m-=1;a.pathname=y.join("/")}c=m>=0?t[m]:"/"}let d=Tk(a,c),h=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(h||p)&&(d.pathname+="/"),d}var wi=s=>s.join("/").replace(/\/\/+/g,"/"),Nk=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Dk=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Mk=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,kk=class{constructor(s,t,e,n=!1){this.status=s,this.statusText=t||"",this.internal=n,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function Lk(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function jk(s){return s.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var iC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function aC(s,t){let e=s;if(typeof e!="string"||!eC.test(e))return{absoluteURL:void 0,isExternal:!1,to:e};let n=e,a=!1;if(iC)try{let o=new URL(window.location.href),l=e.startsWith("//")?new URL(o.protocol+e):new URL(e),c=Ai(l.pathname,t);l.origin===o.origin&&c!=null?e=c+l.search+l.hash:a=!0}catch{ys(!1,`<Link to="${e}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:a,to:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rC=["POST","PUT","PATCH","DELETE"];new Set(rC);var Ok=["GET",...rC];new Set(Ok);var Io=S.createContext(null);Io.displayName="DataRouter";var mh=S.createContext(null);mh.displayName="DataRouterState";var Pk=S.createContext(!1),oC=S.createContext({isTransitioning:!1});oC.displayName="ViewTransition";var Fk=S.createContext(new Map);Fk.displayName="Fetchers";var Bk=S.createContext(null);Bk.displayName="Await";var vs=S.createContext(null);vs.displayName="Navigation";var Mc=S.createContext(null);Mc.displayName="Location";var Ni=S.createContext({outlet:null,matches:[],isDataRoute:!1});Ni.displayName="Route";var ly=S.createContext(null);ly.displayName="RouteError";var lC="REACT_ROUTER_ERROR",Ik="REDIRECT",zk="ROUTE_ERROR_RESPONSE";function Uk(s){if(s.startsWith(`${lC}:${Ik}:{`))try{let t=JSON.parse(s.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function Vk(s){if(s.startsWith(`${lC}:${zk}:{`))try{let t=JSON.parse(s.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new kk(t.status,t.statusText,t.data)}catch{}}function Hk(s,{relative:t}={}){Ee(kc(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=S.useContext(vs),{hash:a,pathname:o,search:l}=Lc(s,{relative:t}),c=o;return e!=="/"&&(c=o==="/"?e:wi([e,o])),n.createHref({pathname:c,search:l,hash:a})}function kc(){return S.useContext(Mc)!=null}function xa(){return Ee(kc(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Mc).location}var cC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uC(s){S.useContext(vs).static||S.useLayoutEffect(s)}function dC(){let{isDataRoute:s}=S.useContext(Ni);return s?nL():$k()}function $k(){Ee(kc(),"useNavigate() may be used only in the context of a <Router> component.");let s=S.useContext(Io),{basename:t,navigator:e}=S.useContext(vs),{matches:n}=S.useContext(Ni),{pathname:a}=xa(),o=JSON.stringify(nC(n)),l=S.useRef(!1);return uC(()=>{l.current=!0}),S.useCallback((d,h={})=>{if(ys(l.current,cC),!l.current)return;if(typeof d=="number"){e.go(d);return}let p=sC(d,JSON.parse(o),a,h.relative==="path");s==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:wi([t,p.pathname])),(h.replace?e.replace:e.push)(p,h.state,h)},[t,e,o,a,s])}S.createContext(null);function Lc(s,{relative:t}={}){let{matches:e}=S.useContext(Ni),{pathname:n}=xa(),a=JSON.stringify(nC(e));return S.useMemo(()=>sC(s,JSON.parse(a),n,t==="path"),[s,a,n,t])}function Gk(s,t){return hC(s,t)}function hC(s,t,e,n,a){Ee(kc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=S.useContext(vs),{matches:l}=S.useContext(Ni),c=l[l.length-1],d=c?c.params:{},h=c?c.pathname:"/",p=c?c.pathnameBase:"/",m=c&&c.route;{let T=m&&m.path||"";pC(h,!m||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let y=xa(),x;if(t){let T=typeof t=="string"?mr(t):t;Ee(p==="/"||T.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${T.pathname}" was given in the \`location\` prop.`),x=T}else x=y;let A=x.pathname||"/",w=A;if(p!=="/"){let T=p.replace(/^\//,"").split("/");w="/"+A.replace(/^\//,"").split("/").slice(T.length).join("/")}let C=ZA(s,{pathname:w});ys(m||C!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),ys(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=Kk(C&&C.map(T=>Object.assign({},T,{params:Object.assign({},d,T.params),pathname:wi([p,o.encodeLocation?o.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?p:wi([p,o.encodeLocation?o.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),l,e,n,a);return t&&E?S.createElement(Mc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},E):E}function qk(){let s=eL(),t=Lk(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),e=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",s),l=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:o},"ErrorBoundary")," or"," ",S.createElement("code",{style:o},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),e?S.createElement("pre",{style:a},e):null,l)}var Xk=S.createElement(qk,null),fC=class extends S.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){this.props.onError?this.props.onError(s,t):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const e=Vk(s.digest);e&&(s=e)}let t=s!==void 0?S.createElement(Ni.Provider,{value:this.props.routeContext},S.createElement(ly.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?S.createElement(Yk,{error:s},t):t}};fC.contextType=Pk;var ym=new WeakMap;function Yk({children:s,error:t}){let{basename:e}=S.useContext(vs);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=Uk(t.digest);if(n){let a=ym.get(t);if(a)throw a;let o=aC(n.location,e);if(iC&&!ym.get(t))if(o.isExternal||n.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:n.replace}));throw ym.set(t,l),l}return S.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return s}function Wk({routeContext:s,match:t,children:e}){let n=S.useContext(Io);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),S.createElement(Ni.Provider,{value:s},e)}function Kk(s,t=[],e=null,n=null,a=null){if(s==null){if(!e)return null;if(e.errors)s=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)s=e.matches;else return null}let o=s,l=e?.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);Ee(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,d=-1;if(e)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=p),m.route.id){let{loaderData:y,errors:x}=e,A=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!x||x[m.route.id]===void 0);if(m.route.lazy||A){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let h=e&&n?(p,m)=>{n(p,{location:e.location,params:e.matches?.[0]?.params??{},unstable_pattern:jk(e.matches),errorInfo:m})}:void 0;return o.reduceRight((p,m,y)=>{let x,A=!1,w=null,C=null;e&&(x=l&&m.route.id?l[m.route.id]:void 0,w=m.route.errorElement||Xk,c&&(d<0&&y===0?(pC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,C=null):d===y&&(A=!0,C=m.route.hydrateFallbackElement||null)));let E=t.concat(o.slice(0,y+1)),T=()=>{let R;return x?R=w:A?R=C:m.route.Component?R=S.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=p,S.createElement(Wk,{match:m,routeContext:{outlet:p,matches:E,isDataRoute:e!=null},children:R})};return e&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?S.createElement(fC,{location:e.location,revalidation:e.revalidation,component:w,error:x,children:T(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:h}):T()},null)}function cy(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qk(s){let t=S.useContext(Io);return Ee(t,cy(s)),t}function Zk(s){let t=S.useContext(mh);return Ee(t,cy(s)),t}function Jk(s){let t=S.useContext(Ni);return Ee(t,cy(s)),t}function uy(s){let t=Jk(s),e=t.matches[t.matches.length-1];return Ee(e.route.id,`${s} can only be used on routes that contain a unique "id"`),e.route.id}function tL(){return uy("useRouteId")}function eL(){let s=S.useContext(ly),t=Zk("useRouteError"),e=uy("useRouteError");return s!==void 0?s:t.errors?.[e]}function nL(){let{router:s}=Qk("useNavigate"),t=uy("useNavigate"),e=S.useRef(!1);return uC(()=>{e.current=!0}),S.useCallback(async(a,o={})=>{ys(e.current,cC),e.current&&(typeof a=="number"?await s.navigate(a):await s.navigate(a,{fromRouteId:t,...o}))},[s,t])}var oS={};function pC(s,t,e){!t&&!oS[s]&&(oS[s]=!0,ys(!1,e))}S.memo(sL);function sL({routes:s,future:t,state:e,onError:n}){return hC(s,void 0,e,n,t)}function lg(s){Ee(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iL({basename:s="/",children:t=null,location:e,navigationType:n="POP",navigator:a,static:o=!1,unstable_useTransitions:l}){Ee(!kc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=s.replace(/^\/*/,"/"),d=S.useMemo(()=>({basename:c,navigator:a,static:o,unstable_useTransitions:l,future:{}}),[c,a,o,l]);typeof e=="string"&&(e=mr(e));let{pathname:h="/",search:p="",hash:m="",state:y=null,key:x="default"}=e,A=S.useMemo(()=>{let w=Ai(h,c);return w==null?null:{location:{pathname:w,search:p,hash:m,state:y,key:x},navigationType:n}},[c,h,p,m,y,x,n]);return ys(A!=null,`<Router basename="${c}"> is not able to match the URL "${h}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:S.createElement(vs.Provider,{value:d},S.createElement(Mc.Provider,{children:t,value:A}))}function aL({children:s,location:t}){return Gk(cg(s),t)}function cg(s,t=[]){let e=[];return S.Children.forEach(s,(n,a)=>{if(!S.isValidElement(n))return;let o=[...t,a];if(n.type===S.Fragment){e.push.apply(e,cg(n.props.children,o));return}Ee(n.type===lg,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ee(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=cg(n.props.children,o)),e.push(l)}),e}var kd="get",Ld="application/x-www-form-urlencoded";function gh(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function rL(s){return gh(s)&&s.tagName.toLowerCase()==="button"}function oL(s){return gh(s)&&s.tagName.toLowerCase()==="form"}function lL(s){return gh(s)&&s.tagName.toLowerCase()==="input"}function cL(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function uL(s,t){return s.button===0&&(!t||t==="_self")&&!cL(s)}var cd=null;function dL(){if(cd===null)try{new FormData(document.createElement("form"),0),cd=!1}catch{cd=!0}return cd}var hL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vm(s){return s!=null&&!hL.has(s)?(ys(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ld}"`),null):s}function fL(s,t){let e,n,a,o,l;if(oL(s)){let c=s.getAttribute("action");n=c?Ai(c,t):null,e=s.getAttribute("method")||kd,a=vm(s.getAttribute("enctype"))||Ld,o=new FormData(s)}else if(rL(s)||lL(s)&&(s.type==="submit"||s.type==="image")){let c=s.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=s.getAttribute("formaction")||c.getAttribute("action");if(n=d?Ai(d,t):null,e=s.getAttribute("formmethod")||c.getAttribute("method")||kd,a=vm(s.getAttribute("formenctype"))||vm(c.getAttribute("enctype"))||Ld,o=new FormData(c,s),!dL()){let{name:h,type:p,value:m}=s;if(p==="image"){let y=h?`${h}.`:"";o.append(`${y}x`,"0"),o.append(`${y}y`,"0")}else h&&o.append(h,m)}}else{if(gh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=kd,n=null,a=Ld,l=s}return o&&a==="text/plain"&&(l=o,o=void 0),{action:n,method:e.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function dy(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function pL(s,t,e,n){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return e?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${n}`:a.pathname=`${a.pathname}.${n}`:a.pathname==="/"?a.pathname=`_root.${n}`:t&&Ai(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function mL(s,t){if(s.id in t)return t[s.id];try{let e=await import(s.module);return t[s.id]=e,e}catch(e){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gL(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function yL(s,t,e){let n=await Promise.all(s.map(async a=>{let o=t.routes[a.route.id];if(o){let l=await mL(o,e);return l.links?l.links():[]}return[]}));return wL(n.flat(1).filter(gL).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function lS(s,t,e,n,a,o){let l=(d,h)=>e[h]?d.route.id!==e[h].route.id:!0,c=(d,h)=>e[h].pathname!==d.pathname||e[h].route.path?.endsWith("*")&&e[h].params["*"]!==d.params["*"];return o==="assets"?t.filter((d,h)=>l(d,h)||c(d,h)):o==="data"?t.filter((d,h)=>{let p=n.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,h)||c(d,h))return!0;if(d.route.shouldRevalidate){let m=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function vL(s,t,{includeHydrateFallback:e}={}){return bL(s.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function bL(s){return[...new Set(s)]}function xL(s){let t={},e=Object.keys(s).sort();for(let n of e)t[n]=s[n];return t}function wL(s,t){let e=new Set;return new Set(t),s.reduce((n,a)=>{let o=JSON.stringify(xL(a));return e.has(o)||(e.add(o),n.push({key:o,link:a})),n},[])}function mC(){let s=S.useContext(Io);return dy(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function SL(){let s=S.useContext(mh);return dy(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var hy=S.createContext(void 0);hy.displayName="FrameworkContext";function gC(){let s=S.useContext(hy);return dy(s,"You must render this element inside a <HydratedRouter> element"),s}function AL(s,t){let e=S.useContext(hy),[n,a]=S.useState(!1),[o,l]=S.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=t,y=S.useRef(null);S.useEffect(()=>{if(s==="render"&&l(!0),s==="viewport"){let w=E=>{E.forEach(T=>{l(T.isIntersecting)})},C=new IntersectionObserver(w,{threshold:.5});return y.current&&C.observe(y.current),()=>{C.disconnect()}}},[s]),S.useEffect(()=>{if(n){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[n]);let x=()=>{a(!0)},A=()=>{a(!1),l(!1)};return e?s!=="intent"?[o,y,{}]:[o,y,{onFocus:Gl(c,x),onBlur:Gl(d,A),onMouseEnter:Gl(h,x),onMouseLeave:Gl(p,A),onTouchStart:Gl(m,x)}]:[!1,y,{}]}function Gl(s,t){return e=>{s&&s(e),e.defaultPrevented||t(e)}}function CL({page:s,...t}){let{router:e}=mC(),n=S.useMemo(()=>ZA(e.routes,s,e.basename),[e.routes,s,e.basename]);return n?S.createElement(_L,{page:s,matches:n,...t}):null}function EL(s){let{manifest:t,routeModules:e}=gC(),[n,a]=S.useState([]);return S.useEffect(()=>{let o=!1;return yL(s,t,e).then(l=>{o||a(l)}),()=>{o=!0}},[s,t,e]),n}function _L({page:s,matches:t,...e}){let n=xa(),{future:a,manifest:o,routeModules:l}=gC(),{basename:c}=mC(),{loaderData:d,matches:h}=SL(),p=S.useMemo(()=>lS(s,t,h,o,n,"data"),[s,t,h,o,n]),m=S.useMemo(()=>lS(s,t,h,o,n,"assets"),[s,t,h,o,n]),y=S.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let w=new Set,C=!1;if(t.forEach(T=>{let R=o.routes[T.route.id];!R||!R.hasLoader||(!p.some(N=>N.route.id===T.route.id)&&T.route.id in d&&l[T.route.id]?.shouldRevalidate||R.hasClientLoader?C=!0:w.add(T.route.id))}),w.size===0)return[];let E=pL(s,c,a.unstable_trailingSlashAwareDataRequests,"data");return C&&w.size>0&&E.searchParams.set("_routes",t.filter(T=>w.has(T.route.id)).map(T=>T.route.id).join(",")),[E.pathname+E.search]},[c,a.unstable_trailingSlashAwareDataRequests,d,n,o,p,t,s,l]),x=S.useMemo(()=>vL(m,o),[m,o]),A=EL(m);return S.createElement(S.Fragment,null,y.map(w=>S.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...e})),x.map(w=>S.createElement("link",{key:w,rel:"modulepreload",href:w,...e})),A.map(({key:w,link:C})=>S.createElement("link",{key:w,nonce:e.nonce,...C})))}function TL(...s){return t=>{s.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var RL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{RL&&(window.__reactRouterVersion="7.12.0")}catch{}function NL({basename:s,children:t,unstable_useTransitions:e,window:n}){let a=S.useRef();a.current==null&&(a.current=ck({window:n,v5Compat:!0}));let o=a.current,[l,c]=S.useState({action:o.action,location:o.location}),d=S.useCallback(h=>{e===!1?c(h):S.startTransition(()=>c(h))},[e]);return S.useLayoutEffect(()=>o.listen(d),[o,d]),S.createElement(iL,{basename:s,children:t,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:e})}var yC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vC=S.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:a,reloadDocument:o,replace:l,state:c,target:d,to:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y,...x},A){let{basename:w,unstable_useTransitions:C}=S.useContext(vs),E=typeof h=="string"&&yC.test(h),T=aC(h,w);h=T.to;let R=Hk(h,{relative:a}),[N,D,L]=AL(n,x),k=LL(h,{replace:l,state:c,target:d,preventScrollReset:p,relative:a,viewTransition:m,unstable_defaultShouldRevalidate:y,unstable_useTransitions:C});function j(U){t&&t(U),U.defaultPrevented||k(U)}let P=S.createElement("a",{...x,...L,href:T.absoluteURL||R,onClick:T.isExternal||o?t:j,ref:TL(A,D),target:d,"data-discover":!E&&e==="render"?"true":void 0});return N&&!E?S.createElement(S.Fragment,null,P,S.createElement(CL,{page:R})):P});vC.displayName="Link";var DL=S.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:a=!1,style:o,to:l,viewTransition:c,children:d,...h},p){let m=Lc(l,{relative:h.relative}),y=xa(),x=S.useContext(mh),{navigator:A,basename:w}=S.useContext(vs),C=x!=null&&BL(m)&&c===!0,E=A.encodeLocation?A.encodeLocation(m).pathname:m.pathname,T=y.pathname,R=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;e||(T=T.toLowerCase(),R=R?R.toLowerCase():null,E=E.toLowerCase()),R&&w&&(R=Ai(R,w)||R);const N=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let D=T===E||!a&&T.startsWith(E)&&T.charAt(N)==="/",L=R!=null&&(R===E||!a&&R.startsWith(E)&&R.charAt(E.length)==="/"),k={isActive:D,isPending:L,isTransitioning:C},j=D?t:void 0,P;typeof n=="function"?P=n(k):P=[n,D?"active":null,L?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(k):o;return S.createElement(vC,{...h,"aria-current":j,className:P,ref:p,style:U,to:l,viewTransition:c},typeof d=="function"?d(k):d)});DL.displayName="NavLink";var ML=S.forwardRef(({discover:s="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:a,state:o,method:l=kd,action:c,onSubmit:d,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y,...x},A)=>{let{unstable_useTransitions:w}=S.useContext(vs),C=PL(),E=FL(c,{relative:h}),T=l.toLowerCase()==="get"?"get":"post",R=typeof c=="string"&&yC.test(c),N=D=>{if(d&&d(D),D.defaultPrevented)return;D.preventDefault();let L=D.nativeEvent.submitter,k=L?.getAttribute("formmethod")||l,j=()=>C(L||D.currentTarget,{fetcherKey:t,method:k,navigate:e,replace:a,state:o,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y});w&&e!==!1?S.startTransition(()=>j()):j()};return S.createElement("form",{ref:A,method:T,action:E,onSubmit:n?d:N,...x,"data-discover":!R&&s==="render"?"true":void 0})});ML.displayName="Form";function kL(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bC(s){let t=S.useContext(Io);return Ee(t,kL(s)),t}function LL(s,{target:t,replace:e,state:n,preventScrollReset:a,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:c,unstable_useTransitions:d}={}){let h=dC(),p=xa(),m=Lc(s,{relative:o});return S.useCallback(y=>{if(uL(y,t)){y.preventDefault();let x=e!==void 0?e:mc(p)===mc(m),A=()=>h(s,{replace:x,state:n,preventScrollReset:a,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:c});d?S.startTransition(()=>A()):A()}},[p,h,m,e,n,t,s,a,o,l,c,d])}var jL=0,OL=()=>`__${String(++jL)}__`;function PL(){let{router:s}=bC("useSubmit"),{basename:t}=S.useContext(vs),e=tL(),n=s.fetch,a=s.navigate;return S.useCallback(async(o,l={})=>{let{action:c,method:d,encType:h,formData:p,body:m}=fL(o,t);if(l.navigate===!1){let y=l.fetcherKey||OL();await n(y,e,l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:m,formMethod:l.method||d,formEncType:l.encType||h,flushSync:l.flushSync})}else await a(l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:m,formMethod:l.method||d,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:e,flushSync:l.flushSync,viewTransition:l.viewTransition})},[n,a,t,e])}function FL(s,{relative:t}={}){let{basename:e}=S.useContext(vs),n=S.useContext(Ni);Ee(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),o={...Lc(s||".",{relative:t})},l=xa();if(s==null){o.search=l.search;let c=new URLSearchParams(o.search),d=c.getAll("index");if(d.some(p=>p==="")){c.delete("index"),d.filter(m=>m).forEach(m=>c.append("index",m));let p=c.toString();o.search=p?`?${p}`:""}}return(!s||s===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:wi([e,o.pathname])),mc(o)}function BL(s,{relative:t}={}){let e=S.useContext(oC);Ee(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=bC("useViewTransitionState"),a=Lc(s,{relative:t});if(!e.isTransitioning)return!1;let o=Ai(e.currentLocation.pathname,n)||e.currentLocation.pathname,l=Ai(e.nextLocation.pathname,n)||e.nextLocation.pathname;return qd(a.pathname,l)!=null||qd(a.pathname,o)!=null}var jc=GA();const IL=ry(jc),fy=S.createContext({});function py(s){const t=S.useRef(null);return t.current===null&&(t.current=s()),t.current}const xC=typeof window<"u",wC=xC?S.useLayoutEffect:S.useEffect,yh=S.createContext(null);function my(s,t){s.indexOf(t)===-1&&s.push(t)}function gy(s,t){const e=s.indexOf(t);e>-1&&s.splice(e,1)}const Ks=(s,t,e)=>e>t?t:e<s?s:e;let yy=()=>{};const Ci={},SC=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function AC(s){return typeof s=="object"&&s!==null}const CC=s=>/^0[^.\s]+$/u.test(s);function vy(s){let t;return()=>(t===void 0&&(t=s()),t)}const gs=s=>s,zL=(s,t)=>e=>t(s(e)),Oc=(...s)=>s.reduce(zL),gc=(s,t,e)=>{const n=t-s;return n===0?1:(e-s)/n};class by{constructor(){this.subscriptions=[]}add(t){return my(this.subscriptions,t),()=>gy(this.subscriptions,t)}notify(t,e,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,e,n);else for(let o=0;o<a;o++){const l=this.subscriptions[o];l&&l(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Si=s=>s*1e3,ms=s=>s/1e3;function EC(s,t){return t?s*(1e3/t):0}const _C=(s,t,e)=>(((1-3*e+3*t)*s+(3*e-6*t))*s+3*t)*s,UL=1e-7,VL=12;function HL(s,t,e,n,a){let o,l,c=0;do l=t+(e-t)/2,o=_C(l,n,a)-s,o>0?e=l:t=l;while(Math.abs(o)>UL&&++c<VL);return l}function Pc(s,t,e,n){if(s===t&&e===n)return gs;const a=o=>HL(o,0,1,s,e);return o=>o===0||o===1?o:_C(a(o),t,n)}const TC=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,RC=s=>t=>1-s(1-t),NC=Pc(.33,1.53,.69,.99),xy=RC(NC),DC=TC(xy),MC=s=>(s*=2)<1?.5*xy(s):.5*(2-Math.pow(2,-10*(s-1))),wy=s=>1-Math.sin(Math.acos(s)),kC=RC(wy),LC=TC(wy),$L=Pc(.42,0,1,1),GL=Pc(0,0,.58,1),jC=Pc(.42,0,.58,1),qL=s=>Array.isArray(s)&&typeof s[0]!="number",OC=s=>Array.isArray(s)&&typeof s[0]=="number",XL={linear:gs,easeIn:$L,easeInOut:jC,easeOut:GL,circIn:wy,circInOut:LC,circOut:kC,backIn:xy,backInOut:DC,backOut:NC,anticipate:MC},YL=s=>typeof s=="string",cS=s=>{if(OC(s)){yy(s.length===4);const[t,e,n,a]=s;return Pc(t,e,n,a)}else if(YL(s))return XL[s];return s},ud=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function WL(s,t){let e=new Set,n=new Set,a=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function d(p){l.has(p)&&(h.schedule(p),s()),p(c)}const h={schedule:(p,m=!1,y=!1)=>{const A=y&&a?e:n;return m&&l.add(p),A.has(p)||A.add(p),p},cancel:p=>{n.delete(p),l.delete(p)},process:p=>{if(c=p,a){o=!0;return}a=!0,[e,n]=[n,e],e.forEach(d),e.clear(),a=!1,o&&(o=!1,h.process(p))}};return h}const KL=40;function PC(s,t){let e=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=()=>e=!0,l=ud.reduce((R,N)=>(R[N]=WL(o),R),{}),{setup:c,read:d,resolveKeyframes:h,preUpdate:p,update:m,preRender:y,render:x,postRender:A}=l,w=()=>{const R=Ci.useManualTiming?a.timestamp:performance.now();e=!1,Ci.useManualTiming||(a.delta=n?1e3/60:Math.max(Math.min(R-a.timestamp,KL),1)),a.timestamp=R,a.isProcessing=!0,c.process(a),d.process(a),h.process(a),p.process(a),m.process(a),y.process(a),x.process(a),A.process(a),a.isProcessing=!1,e&&t&&(n=!1,s(w))},C=()=>{e=!0,n=!0,a.isProcessing||s(w)};return{schedule:ud.reduce((R,N)=>{const D=l[N];return R[N]=(L,k=!1,j=!1)=>(e||C(),D.schedule(L,k,j)),R},{}),cancel:R=>{for(let N=0;N<ud.length;N++)l[ud[N]].cancel(R)},state:a,steps:l}}const{schedule:ye,cancel:ma,state:an,steps:bm}=PC(typeof requestAnimationFrame<"u"?requestAnimationFrame:gs,!0);let jd;function QL(){jd=void 0}const Sn={now:()=>(jd===void 0&&Sn.set(an.isProcessing||Ci.useManualTiming?an.timestamp:performance.now()),jd),set:s=>{jd=s,queueMicrotask(QL)}},FC=s=>t=>typeof t=="string"&&t.startsWith(s),BC=FC("--"),ZL=FC("var(--"),Sy=s=>ZL(s)?JL.test(s.split("/*")[0].trim()):!1,JL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function uS(s){return typeof s!="string"?!1:s.split("/*")[0].includes("var(--")}const zo={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},yc={...zo,transform:s=>Ks(0,1,s)},dd={...zo,default:1},lc=s=>Math.round(s*1e5)/1e5,Ay=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function tj(s){return s==null}const ej=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Cy=(s,t)=>e=>!!(typeof e=="string"&&ej.test(e)&&e.startsWith(s)||t&&!tj(e)&&Object.prototype.hasOwnProperty.call(e,t)),IC=(s,t,e)=>n=>{if(typeof n!="string")return n;const[a,o,l,c]=n.match(Ay);return{[s]:parseFloat(a),[t]:parseFloat(o),[e]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},nj=s=>Ks(0,255,s),xm={...zo,transform:s=>Math.round(nj(s))},Qa={test:Cy("rgb","red"),parse:IC("red","green","blue"),transform:({red:s,green:t,blue:e,alpha:n=1})=>"rgba("+xm.transform(s)+", "+xm.transform(t)+", "+xm.transform(e)+", "+lc(yc.transform(n))+")"};function sj(s){let t="",e="",n="",a="";return s.length>5?(t=s.substring(1,3),e=s.substring(3,5),n=s.substring(5,7),a=s.substring(7,9)):(t=s.substring(1,2),e=s.substring(2,3),n=s.substring(3,4),a=s.substring(4,5),t+=t,e+=e,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const ug={test:Cy("#"),parse:sj,transform:Qa.transform},Fc=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),ia=Fc("deg"),Ys=Fc("%"),Ct=Fc("px"),ij=Fc("vh"),aj=Fc("vw"),dS={...Ys,parse:s=>Ys.parse(s)/100,transform:s=>Ys.transform(s*100)},po={test:Cy("hsl","hue"),parse:IC("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(s)+", "+Ys.transform(lc(t))+", "+Ys.transform(lc(e))+", "+lc(yc.transform(n))+")"},ze={test:s=>Qa.test(s)||ug.test(s)||po.test(s),parse:s=>Qa.test(s)?Qa.parse(s):po.test(s)?po.parse(s):ug.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?Qa.transform(s):po.transform(s),getAnimatableNone:s=>{const t=ze.parse(s);return t.alpha=0,ze.transform(t)}},rj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function oj(s){return isNaN(s)&&typeof s=="string"&&(s.match(Ay)?.length||0)+(s.match(rj)?.length||0)>0}const zC="number",UC="color",lj="var",cj="var(",hS="${}",uj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vc(s){const t=s.toString(),e=[],n={color:[],number:[],var:[]},a=[];let o=0;const c=t.replace(uj,d=>(ze.test(d)?(n.color.push(o),a.push(UC),e.push(ze.parse(d))):d.startsWith(cj)?(n.var.push(o),a.push(lj),e.push(d)):(n.number.push(o),a.push(zC),e.push(parseFloat(d))),++o,hS)).split(hS);return{values:e,split:c,indexes:n,types:a}}function VC(s){return vc(s).values}function HC(s){const{split:t,types:e}=vc(s),n=t.length;return a=>{let o="";for(let l=0;l<n;l++)if(o+=t[l],a[l]!==void 0){const c=e[l];c===zC?o+=lc(a[l]):c===UC?o+=ze.transform(a[l]):o+=a[l]}return o}}const dj=s=>typeof s=="number"?0:ze.test(s)?ze.getAnimatableNone(s):s;function hj(s){const t=VC(s);return HC(s)(t.map(dj))}const ga={test:oj,parse:VC,createTransformer:HC,getAnimatableNone:hj};function wm(s,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?s+(t-s)*6*e:e<1/2?t:e<2/3?s+(t-s)*(2/3-e)*6:s}function fj({hue:s,saturation:t,lightness:e,alpha:n}){s/=360,t/=100,e/=100;let a=0,o=0,l=0;if(!t)a=o=l=e;else{const c=e<.5?e*(1+t):e+t-e*t,d=2*e-c;a=wm(d,c,s+1/3),o=wm(d,c,s),l=wm(d,c,s-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:n}}function Xd(s,t){return e=>e>0?t:s}const Ce=(s,t,e)=>s+(t-s)*e,Sm=(s,t,e)=>{const n=s*s,a=e*(t*t-n)+n;return a<0?0:Math.sqrt(a)},pj=[ug,Qa,po],mj=s=>pj.find(t=>t.test(s));function fS(s){const t=mj(s);if(!t)return!1;let e=t.parse(s);return t===po&&(e=fj(e)),e}const pS=(s,t)=>{const e=fS(s),n=fS(t);if(!e||!n)return Xd(s,t);const a={...e};return o=>(a.red=Sm(e.red,n.red,o),a.green=Sm(e.green,n.green,o),a.blue=Sm(e.blue,n.blue,o),a.alpha=Ce(e.alpha,n.alpha,o),Qa.transform(a))},dg=new Set(["none","hidden"]);function gj(s,t){return dg.has(s)?e=>e<=0?s:t:e=>e>=1?t:s}function yj(s,t){return e=>Ce(s,t,e)}function Ey(s){return typeof s=="number"?yj:typeof s=="string"?Sy(s)?Xd:ze.test(s)?pS:xj:Array.isArray(s)?$C:typeof s=="object"?ze.test(s)?pS:vj:Xd}function $C(s,t){const e=[...s],n=e.length,a=s.map((o,l)=>Ey(o)(o,t[l]));return o=>{for(let l=0;l<n;l++)e[l]=a[l](o);return e}}function vj(s,t){const e={...s,...t},n={};for(const a in e)s[a]!==void 0&&t[a]!==void 0&&(n[a]=Ey(s[a])(s[a],t[a]));return a=>{for(const o in n)e[o]=n[o](a);return e}}function bj(s,t){const e=[],n={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const o=t.types[a],l=s.indexes[o][n[o]],c=s.values[l]??0;e[a]=c,n[o]++}return e}const xj=(s,t)=>{const e=ga.createTransformer(t),n=vc(s),a=vc(t);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?dg.has(s)&&!a.values.length||dg.has(t)&&!n.values.length?gj(s,t):Oc($C(bj(n,a),a.values),e):Xd(s,t)};function GC(s,t,e){return typeof s=="number"&&typeof t=="number"&&typeof e=="number"?Ce(s,t,e):Ey(s)(s,t)}const wj=s=>{const t=({timestamp:e})=>s(e);return{start:(e=!0)=>ye.update(t,e),stop:()=>ma(t),now:()=>an.isProcessing?an.timestamp:Sn.now()}},qC=(s,t,e=10)=>{let n="";const a=Math.max(Math.round(t/e),2);for(let o=0;o<a;o++)n+=Math.round(s(o/(a-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Yd=2e4;function _y(s){let t=0;const e=50;let n=s.next(t);for(;!n.done&&t<Yd;)t+=e,n=s.next(t);return t>=Yd?1/0:t}function Sj(s,t=100,e){const n=e({...s,keyframes:[0,t]}),a=Math.min(_y(n),Yd);return{type:"keyframes",ease:o=>n.next(a*o).value/t,duration:ms(a)}}const Aj=5;function XC(s,t,e){const n=Math.max(t-Aj,0);return EC(e-s(n),t-n)}const Ne={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Am=.001;function Cj({duration:s=Ne.duration,bounce:t=Ne.bounce,velocity:e=Ne.velocity,mass:n=Ne.mass}){let a,o,l=1-t;l=Ks(Ne.minDamping,Ne.maxDamping,l),s=Ks(Ne.minDuration,Ne.maxDuration,ms(s)),l<1?(a=h=>{const p=h*l,m=p*s,y=p-e,x=hg(h,l),A=Math.exp(-m);return Am-y/x*A},o=h=>{const m=h*l*s,y=m*e+e,x=Math.pow(l,2)*Math.pow(h,2)*s,A=Math.exp(-m),w=hg(Math.pow(h,2),l);return(-a(h)+Am>0?-1:1)*((y-x)*A)/w}):(a=h=>{const p=Math.exp(-h*s),m=(h-e)*s+1;return-Am+p*m},o=h=>{const p=Math.exp(-h*s),m=(e-h)*(s*s);return p*m});const c=5/s,d=_j(a,o,c);if(s=Si(s),isNaN(d))return{stiffness:Ne.stiffness,damping:Ne.damping,duration:s};{const h=Math.pow(d,2)*n;return{stiffness:h,damping:l*2*Math.sqrt(n*h),duration:s}}}const Ej=12;function _j(s,t,e){let n=e;for(let a=1;a<Ej;a++)n=n-s(n)/t(n);return n}function hg(s,t){return s*Math.sqrt(1-t*t)}const Tj=["duration","bounce"],Rj=["stiffness","damping","mass"];function mS(s,t){return t.some(e=>s[e]!==void 0)}function Nj(s){let t={velocity:Ne.velocity,stiffness:Ne.stiffness,damping:Ne.damping,mass:Ne.mass,isResolvedFromDuration:!1,...s};if(!mS(s,Rj)&&mS(s,Tj))if(s.visualDuration){const e=s.visualDuration,n=2*Math.PI/(e*1.2),a=n*n,o=2*Ks(.05,1,1-(s.bounce||0))*Math.sqrt(a);t={...t,mass:Ne.mass,stiffness:a,damping:o}}else{const e=Cj(s);t={...t,...e,mass:Ne.mass},t.isResolvedFromDuration=!0}return t}function Wd(s=Ne.visualDuration,t=Ne.bounce){const e=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:n,restDelta:a}=e;const o=e.keyframes[0],l=e.keyframes[e.keyframes.length-1],c={done:!1,value:o},{stiffness:d,damping:h,mass:p,duration:m,velocity:y,isResolvedFromDuration:x}=Nj({...e,velocity:-ms(e.velocity||0)}),A=y||0,w=h/(2*Math.sqrt(d*p)),C=l-o,E=ms(Math.sqrt(d/p)),T=Math.abs(C)<5;n||(n=T?Ne.restSpeed.granular:Ne.restSpeed.default),a||(a=T?Ne.restDelta.granular:Ne.restDelta.default);let R;if(w<1){const D=hg(E,w);R=L=>{const k=Math.exp(-w*E*L);return l-k*((A+w*E*C)/D*Math.sin(D*L)+C*Math.cos(D*L))}}else if(w===1)R=D=>l-Math.exp(-E*D)*(C+(A+E*C)*D);else{const D=E*Math.sqrt(w*w-1);R=L=>{const k=Math.exp(-w*E*L),j=Math.min(D*L,300);return l-k*((A+w*E*C)*Math.sinh(j)+D*C*Math.cosh(j))/D}}const N={calculatedDuration:x&&m||null,next:D=>{const L=R(D);if(x)c.done=D>=m;else{let k=D===0?A:0;w<1&&(k=D===0?Si(A):XC(R,D,L));const j=Math.abs(k)<=n,P=Math.abs(l-L)<=a;c.done=j&&P}return c.value=c.done?l:L,c},toString:()=>{const D=Math.min(_y(N),Yd),L=qC(k=>N.next(D*k).value,D,30);return D+"ms "+L},toTransition:()=>{}};return N}Wd.applyToOptions=s=>{const t=Sj(s,100,Wd);return s.ease=t.ease,s.duration=Si(t.duration),s.type="keyframes",s};function fg({keyframes:s,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:d,restDelta:h=.5,restSpeed:p}){const m=s[0],y={done:!1,value:m},x=j=>c!==void 0&&j<c||d!==void 0&&j>d,A=j=>c===void 0?d:d===void 0||Math.abs(c-j)<Math.abs(d-j)?c:d;let w=e*t;const C=m+w,E=l===void 0?C:l(C);E!==C&&(w=E-m);const T=j=>-w*Math.exp(-j/n),R=j=>E+T(j),N=j=>{const P=T(j),U=R(j);y.done=Math.abs(P)<=h,y.value=y.done?E:U};let D,L;const k=j=>{x(y.value)&&(D=j,L=Wd({keyframes:[y.value,A(y.value)],velocity:XC(R,j,y.value),damping:a,stiffness:o,restDelta:h,restSpeed:p}))};return k(0),{calculatedDuration:null,next:j=>{let P=!1;return!L&&D===void 0&&(P=!0,N(j),k(j)),D!==void 0&&j>=D?L.next(j-D):(!P&&N(j),y)}}}function Dj(s,t,e){const n=[],a=e||Ci.mix||GC,o=s.length-1;for(let l=0;l<o;l++){let c=a(s[l],s[l+1]);if(t){const d=Array.isArray(t)?t[l]||gs:t;c=Oc(d,c)}n.push(c)}return n}function Mj(s,t,{clamp:e=!0,ease:n,mixer:a}={}){const o=s.length;if(yy(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const l=s[0]===s[1];s[0]>s[o-1]&&(s=[...s].reverse(),t=[...t].reverse());const c=Dj(t,n,a),d=c.length,h=p=>{if(l&&p<s[0])return t[0];let m=0;if(d>1)for(;m<s.length-2&&!(p<s[m+1]);m++);const y=gc(s[m],s[m+1],p);return c[m](y)};return e?p=>h(Ks(s[0],s[o-1],p)):h}function kj(s,t){const e=s[s.length-1];for(let n=1;n<=t;n++){const a=gc(0,t,n);s.push(Ce(e,1,a))}}function Lj(s){const t=[0];return kj(t,s.length-1),t}function jj(s,t){return s.map(e=>e*t)}function Oj(s,t){return s.map(()=>t||jC).splice(0,s.length-1)}function cc({duration:s=300,keyframes:t,times:e,ease:n="easeInOut"}){const a=qL(n)?n.map(cS):cS(n),o={done:!1,value:t[0]},l=jj(e&&e.length===t.length?e:Lj(t),s),c=Mj(l,t,{ease:Array.isArray(a)?a:Oj(t,a)});return{calculatedDuration:s,next:d=>(o.value=c(d),o.done=d>=s,o)}}const Pj=s=>s!==null;function Ty(s,{repeat:t,repeatType:e="loop"},n,a=1){const o=s.filter(Pj),c=a<0||t&&e!=="loop"&&t%2===1?0:o.length-1;return!c||n===void 0?o[c]:n}const Fj={decay:fg,inertia:fg,tween:cc,keyframes:cc,spring:Wd};function YC(s){typeof s.type=="string"&&(s.type=Fj[s.type])}class Ry{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const Bj=s=>s/100;class Ny extends Ry{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==Sn.now()&&this.tick(Sn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;YC(t);const{type:e=cc,repeat:n=0,repeatDelay:a=0,repeatType:o,velocity:l=0}=t;let{keyframes:c}=t;const d=e||cc;d!==cc&&typeof c[0]!="number"&&(this.mixKeyframes=Oc(Bj,GC(c[0],c[1])),c=[0,100]);const h=d({...t,keyframes:c});o==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...c].reverse(),velocity:-l})),h.calculatedDuration===null&&(h.calculatedDuration=_y(h));const{calculatedDuration:p}=h;this.calculatedDuration=p,this.resolvedDuration=p+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=h}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:a,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return n.next(0);const{delay:h=0,keyframes:p,repeat:m,repeatType:y,repeatDelay:x,type:A,onUpdate:w,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const E=this.currentTime-h*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?E<0:E>a;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let R=this.currentTime,N=n;if(m){const j=Math.min(this.currentTime,a)/c;let P=Math.floor(j),U=j%1;!U&&j>=1&&(U=1),U===1&&P--,P=Math.min(P,m+1),P%2&&(y==="reverse"?(U=1-U,x&&(U-=x/c)):y==="mirror"&&(N=l)),R=Ks(0,1,U)*c}const D=T?{done:!1,value:p[0]}:N.next(R);o&&(D.value=o(D.value));let{done:L}=D;!T&&d!==null&&(L=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return k&&A!==fg&&(D.value=Ty(p,this.options,C,this.speed)),w&&w(D.value),k&&this.finish(),D}then(t,e){return this.finished.then(t,e)}get duration(){return ms(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ms(t)}get time(){return ms(this.currentTime)}set time(t){t=Si(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Sn.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=ms(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=wj,startTime:e}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Sn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function Ij(s){for(let t=1;t<s.length;t++)s[t]??(s[t]=s[t-1])}const Za=s=>s*180/Math.PI,pg=s=>{const t=Za(Math.atan2(s[1],s[0]));return mg(t)},zj={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:pg,rotateZ:pg,skewX:s=>Za(Math.atan(s[1])),skewY:s=>Za(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},mg=s=>(s=s%360,s<0&&(s+=360),s),gS=pg,yS=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),vS=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),Uj={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:yS,scaleY:vS,scale:s=>(yS(s)+vS(s))/2,rotateX:s=>mg(Za(Math.atan2(s[6],s[5]))),rotateY:s=>mg(Za(Math.atan2(-s[2],s[0]))),rotateZ:gS,rotate:gS,skewX:s=>Za(Math.atan(s[4])),skewY:s=>Za(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function gg(s){return s.includes("scale")?1:0}function yg(s,t){if(!s||s==="none")return gg(t);const e=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,a;if(e)n=Uj,a=e;else{const c=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=zj,a=c}if(!a)return gg(t);const o=n[t],l=a[1].split(",").map(Hj);return typeof o=="function"?o(l):l[o]}const Vj=(s,t)=>{const{transform:e="none"}=getComputedStyle(s);return yg(e,t)};function Hj(s){return parseFloat(s.trim())}const Uo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vo=new Set(Uo),bS=s=>s===zo||s===Ct,$j=new Set(["x","y","z"]),Gj=Uo.filter(s=>!$j.has(s));function qj(s){const t=[];return Gj.forEach(e=>{const n=s.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const da={width:({x:s},{paddingLeft:t="0",paddingRight:e="0"})=>s.max-s.min-parseFloat(t)-parseFloat(e),height:({y:s},{paddingTop:t="0",paddingBottom:e="0"})=>s.max-s.min-parseFloat(t)-parseFloat(e),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:(s,{transform:t})=>yg(t,"x"),y:(s,{transform:t})=>yg(t,"y")};da.translateX=da.x;da.translateY=da.y;const sr=new Set;let vg=!1,bg=!1,xg=!1;function WC(){if(bg){const s=Array.from(sr).filter(n=>n.needsMeasurement),t=new Set(s.map(n=>n.element)),e=new Map;t.forEach(n=>{const a=qj(n);a.length&&(e.set(n,a),n.render())}),s.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const a=e.get(n);a&&a.forEach(([o,l])=>{n.getValue(o)?.set(l)})}),s.forEach(n=>n.measureEndState()),s.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}bg=!1,vg=!1,sr.forEach(s=>s.complete(xg)),sr.clear()}function KC(){sr.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(bg=!0)})}function Xj(){xg=!0,KC(),WC(),xg=!1}class Dy{constructor(t,e,n,a,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=a,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(sr.add(this),vg||(vg=!0,ye.read(KC),ye.resolveKeyframes(WC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:a}=this;if(t[0]===null){const o=a?.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(n&&e){const c=n.readValue(e,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),a&&o===void 0&&a.set(t[0])}Ij(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),sr.delete(this)}cancel(){this.state==="scheduled"&&(sr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Yj=s=>s.startsWith("--");function Wj(s,t,e){Yj(t)?s.style.setProperty(t,e):s.style[t]=e}const Kj=vy(()=>window.ScrollTimeline!==void 0),Qj={};function Zj(s,t){const e=vy(s);return()=>Qj[t]??e()}const QC=Zj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Jl=([s,t,e,n])=>`cubic-bezier(${s}, ${t}, ${e}, ${n})`,xS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Jl([0,.65,.55,1]),circOut:Jl([.55,0,1,.45]),backIn:Jl([.31,.01,.66,-.59]),backOut:Jl([.33,1.53,.69,.99])};function ZC(s,t){if(s)return typeof s=="function"?QC()?qC(s,t):"ease-out":OC(s)?Jl(s):Array.isArray(s)?s.map(e=>ZC(e,t)||xS.easeOut):xS[s]}function Jj(s,t,e,{delay:n=0,duration:a=300,repeat:o=0,repeatType:l="loop",ease:c="easeOut",times:d}={},h=void 0){const p={[t]:e};d&&(p.offset=d);const m=ZC(c,a);Array.isArray(m)&&(p.easing=m);const y={delay:n,duration:a,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return h&&(y.pseudoElement=h),s.animate(p,y)}function JC(s){return typeof s=="function"&&"applyToOptions"in s}function tO({type:s,...t}){return JC(s)&&QC()?s.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class eO extends Ry{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:e,name:n,keyframes:a,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:c,onComplete:d}=t;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=t,yy(typeof t.type!="string");const h=tO(t);this.animation=Jj(e,n,a,h,o),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const p=Ty(a,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):Wj(e,n,p),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return ms(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ms(t)}get time(){return ms(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Si(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&Kj()?(this.animation.timeline=t,gs):e(this)}}const tE={anticipate:MC,backInOut:DC,circInOut:LC};function nO(s){return s in tE}function sO(s){typeof s.ease=="string"&&nO(s.ease)&&(s.ease=tE[s.ease])}const Cm=10;class iO extends eO{constructor(t){sO(t),YC(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:a,element:o,...l}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const c=new Ny({...l,autoplay:!1}),d=Math.max(Cm,Sn.now()-this.startTime),h=Ks(0,Cm,d-Cm);e.setWithVelocity(c.sample(Math.max(0,d-h)).value,c.sample(d).value,h),c.stop()}}const wS=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(ga.test(s)||s==="0")&&!s.startsWith("url("));function aO(s){const t=s[0];if(s.length===1)return!0;for(let e=0;e<s.length;e++)if(s[e]!==t)return!0}function rO(s,t,e,n){const a=s[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const o=s[s.length-1],l=wS(a,t),c=wS(o,t);return!l||!c?!1:aO(s)||(e==="spring"||JC(e))&&n}function wg(s){s.duration=0,s.type="keyframes"}const oO=new Set(["opacity","clipPath","filter","transform"]),lO=vy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function cO(s){const{motionValue:t,name:e,repeatDelay:n,repeatType:a,damping:o,type:l}=s;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=t.owner.getProps();return lO()&&e&&oO.has(e)&&(e!=="transform"||!h)&&!d&&!n&&a!=="mirror"&&o!==0&&l!=="inertia"}const uO=40;class dO extends Ry{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:l="loop",keyframes:c,name:d,motionValue:h,element:p,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Sn.now();const y={autoplay:t,delay:e,type:n,repeat:a,repeatDelay:o,repeatType:l,name:d,motionValue:h,element:p,...m},x=p?.KeyframeResolver||Dy;this.keyframeResolver=new x(c,(A,w,C)=>this.onKeyframesResolved(A,w,y,!C),d,h,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,n,a){this.keyframeResolver=void 0;const{name:o,type:l,velocity:c,delay:d,isHandoff:h,onUpdate:p}=n;this.resolvedAt=Sn.now(),rO(t,o,l,c)||((Ci.instantAnimations||!d)&&p?.(Ty(t,n,e)),t[0]=t[t.length-1],wg(n),n.repeat=0);const y={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>uO?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},x=!h&&cO(y),A=y.motionValue?.owner?.current,w=x?new iO({...y,element:A}):new Ny(y);w.finished.then(()=>{this.notifyFinished()}).catch(gs),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Xj()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function eE(s,t,e,n=0,a=1){const o=Array.from(s).sort((h,p)=>h.sortNodePosition(p)).indexOf(t),l=s.size,c=(l-1)*n;return typeof e=="function"?e(o,l):a===1?o*n:c-o*n}const hO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function fO(s){const t=hO.exec(s);if(!t)return[,];const[,e,n,a]=t;return[`--${e??n}`,a]}function nE(s,t,e=1){const[n,a]=fO(s);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const l=o.trim();return SC(l)?parseFloat(l):l}return Sy(a)?nE(a,t,e+1):a}const pO={type:"spring",stiffness:500,damping:25,restSpeed:10},mO=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),gO={type:"keyframes",duration:.8},yO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},vO=(s,{keyframes:t})=>t.length>2?gO:Vo.has(s)?s.startsWith("scale")?mO(t[1]):pO:yO,bO=s=>s!==null;function xO(s,{repeat:t,repeatType:e="loop"},n){const a=s.filter(bO),o=t&&e!=="loop"&&t%2===1?0:a.length-1;return a[o]}function My(s,t){return s?.[t]??s?.default??s}function wO({when:s,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:a,repeat:o,repeatType:l,repeatDelay:c,from:d,elapsed:h,...p}){return!!Object.keys(p).length}const ky=(s,t,e,n={},a,o)=>l=>{const c=My(n,s)||{},d=c.delay||n.delay||0;let{elapsed:h=0}=n;h=h-Si(d);const p={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-h,onUpdate:y=>{t.set(y),c.onUpdate&&c.onUpdate(y)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:s,motionValue:t,element:o?void 0:a};wO(c)||Object.assign(p,vO(s,p)),p.duration&&(p.duration=Si(p.duration)),p.repeatDelay&&(p.repeatDelay=Si(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(wg(p),p.delay===0&&(m=!0)),(Ci.instantAnimations||Ci.skipAnimations)&&(m=!0,wg(p),p.delay=0),p.allowFlatten=!c.type&&!c.ease,m&&!o&&t.get()!==void 0){const y=xO(p.keyframes,c);if(y!==void 0){ye.update(()=>{p.onUpdate(y),p.onComplete()});return}}return c.isSync?new Ny(p):new dO(p)};function SS(s){const t=[{},{}];return s?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function Ly(s,t,e,n){if(typeof t=="function"){const[a,o]=SS(n);t=t(e!==void 0?e:s.custom,a,o)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[a,o]=SS(n);t=t(e!==void 0?e:s.custom,a,o)}return t}function wo(s,t,e){const n=s.getProps();return Ly(n,t,e!==void 0?e:n.custom,s)}const sE=new Set(["width","height","top","left","right","bottom",...Uo]),AS=30,SO=s=>!isNaN(parseFloat(s));class AO{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const a=Sn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Sn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=SO(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new by);const n=this.events[t].add(e);return t==="change"?()=>{n(),ye.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Sn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>AS)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,AS);return EC(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function jo(s,t){return new AO(s,t)}const Sg=s=>Array.isArray(s);function CO(s,t,e){s.hasValue(t)?s.getValue(t).set(e):s.addValue(t,jo(e))}function EO(s){return Sg(s)?s[s.length-1]||0:s}function _O(s,t){const e=wo(s,t);let{transitionEnd:n={},transition:a={},...o}=e||{};o={...o,...n};for(const l in o){const c=EO(o[l]);CO(s,l,c)}}const fn=s=>!!(s&&s.getVelocity);function TO(s){return!!(fn(s)&&s.add)}function Ag(s,t){const e=s.getValue("willChange");if(TO(e))return e.add(t);if(!e&&Ci.WillChange){const n=new Ci.WillChange("auto");s.addValue("willChange",n),n.add(t)}}function jy(s){return s.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const RO="framerAppearId",iE="data-"+jy(RO);function aE(s){return s.props[iE]}function NO({protectedKeys:s,needsAnimating:t},e){const n=s.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function rE(s,t,{delay:e=0,transitionOverride:n,type:a}={}){let{transition:o=s.getDefaultTransition(),transitionEnd:l,...c}=t;n&&(o=n);const d=[],h=a&&s.animationState&&s.animationState.getState()[a];for(const p in c){const m=s.getValue(p,s.latestValues[p]??null),y=c[p];if(y===void 0||h&&NO(h,p))continue;const x={delay:e,...My(o||{},p)},A=m.get();if(A!==void 0&&!m.isAnimating&&!Array.isArray(y)&&y===A&&!x.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const E=aE(s);if(E){const T=window.MotionHandoffAnimation(E,p,ye);T!==null&&(x.startTime=T,w=!0)}}Ag(s,p),m.start(ky(p,m,y,s.shouldReduceMotion&&sE.has(p)?{type:!1}:x,s,w));const C=m.animation;C&&d.push(C)}return l&&Promise.all(d).then(()=>{ye.update(()=>{l&&_O(s,l)})}),d}function Cg(s,t,e={}){const n=wo(s,t,e.type==="exit"?s.presenceContext?.custom:void 0);let{transition:a=s.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(a=e.transitionOverride);const o=n?()=>Promise.all(rE(s,n,e)):()=>Promise.resolve(),l=s.variantChildren&&s.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:m}=a;return DO(s,t,d,h,p,m,e)}:()=>Promise.resolve(),{when:c}=a;if(c){const[d,h]=c==="beforeChildren"?[o,l]:[l,o];return d().then(()=>h())}else return Promise.all([o(),l(e.delay)])}function DO(s,t,e=0,n=0,a=0,o=1,l){const c=[];for(const d of s.variantChildren)d.notify("AnimationStart",t),c.push(Cg(d,t,{...l,delay:e+(typeof n=="function"?0:n)+eE(s.variantChildren,d,n,a,o)}).then(()=>d.notify("AnimationComplete",t)));return Promise.all(c)}function MO(s,t,e={}){s.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(o=>Cg(s,o,e));n=Promise.all(a)}else if(typeof t=="string")n=Cg(s,t,e);else{const a=typeof t=="function"?wo(s,t,e.custom):t;n=Promise.all(rE(s,a,e))}return n.then(()=>{s.notify("AnimationComplete",t)})}const kO={test:s=>s==="auto",parse:s=>s},oE=s=>t=>t.test(s),lE=[zo,Ct,Ys,ia,aj,ij,kO],CS=s=>lE.find(oE(s));function LO(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||CC(s):!0}const jO=new Set(["brightness","contrast","saturate","opacity"]);function OO(s){const[t,e]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[n]=e.match(Ay)||[];if(!n)return s;const a=e.replace(n,"");let o=jO.has(t)?1:0;return n!==e&&(o*=100),t+"("+o+a+")"}const PO=/\b([a-z-]*)\(.*?\)/gu,Eg={...ga,getAnimatableNone:s=>{const t=s.match(PO);return t?t.map(OO).join(" "):s}},ES={...zo,transform:Math.round},FO={rotate:ia,rotateX:ia,rotateY:ia,rotateZ:ia,scale:dd,scaleX:dd,scaleY:dd,scaleZ:dd,skew:ia,skewX:ia,skewY:ia,distance:Ct,translateX:Ct,translateY:Ct,translateZ:Ct,x:Ct,y:Ct,z:Ct,perspective:Ct,transformPerspective:Ct,opacity:yc,originX:dS,originY:dS,originZ:Ct},Oy={borderWidth:Ct,borderTopWidth:Ct,borderRightWidth:Ct,borderBottomWidth:Ct,borderLeftWidth:Ct,borderRadius:Ct,borderTopLeftRadius:Ct,borderTopRightRadius:Ct,borderBottomRightRadius:Ct,borderBottomLeftRadius:Ct,width:Ct,maxWidth:Ct,height:Ct,maxHeight:Ct,top:Ct,right:Ct,bottom:Ct,left:Ct,inset:Ct,insetBlock:Ct,insetBlockStart:Ct,insetBlockEnd:Ct,insetInline:Ct,insetInlineStart:Ct,insetInlineEnd:Ct,padding:Ct,paddingTop:Ct,paddingRight:Ct,paddingBottom:Ct,paddingLeft:Ct,paddingBlock:Ct,paddingBlockStart:Ct,paddingBlockEnd:Ct,paddingInline:Ct,paddingInlineStart:Ct,paddingInlineEnd:Ct,margin:Ct,marginTop:Ct,marginRight:Ct,marginBottom:Ct,marginLeft:Ct,marginBlock:Ct,marginBlockStart:Ct,marginBlockEnd:Ct,marginInline:Ct,marginInlineStart:Ct,marginInlineEnd:Ct,fontSize:Ct,backgroundPositionX:Ct,backgroundPositionY:Ct,...FO,zIndex:ES,fillOpacity:yc,strokeOpacity:yc,numOctaves:ES},BO={...Oy,color:ze,backgroundColor:ze,outlineColor:ze,fill:ze,stroke:ze,borderColor:ze,borderTopColor:ze,borderRightColor:ze,borderBottomColor:ze,borderLeftColor:ze,filter:Eg,WebkitFilter:Eg},cE=s=>BO[s];function uE(s,t){let e=cE(s);return e!==Eg&&(e=ga),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const IO=new Set(["auto","none","0"]);function zO(s,t,e){let n=0,a;for(;n<s.length&&!a;){const o=s[n];typeof o=="string"&&!IO.has(o)&&vc(o).values.length&&(a=s[n]),n++}if(a&&e)for(const o of t)s[o]=uE(e,a)}class UO extends Dy{constructor(t,e,n,a,o){super(t,e,n,a,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let p=0;p<t.length;p++){let m=t[p];if(typeof m=="string"&&(m=m.trim(),Sy(m))){const y=nE(m,e.current);y!==void 0&&(t[p]=y),p===t.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!sE.has(n)||t.length!==2)return;const[a,o]=t,l=CS(a),c=CS(o),d=uS(a),h=uS(o);if(d!==h&&da[n]){this.needsMeasurement=!0;return}if(l!==c)if(bS(l)&&bS(c))for(let p=0;p<t.length;p++){const m=t[p];typeof m=="string"&&(t[p]=parseFloat(m))}else da[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let a=0;a<t.length;a++)(t[a]===null||LO(t[a]))&&n.push(a);n.length&&zO(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=da[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const a=e[e.length-1];a!==void 0&&t.getValue(n,a).jump(a,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const a=t.getValue(e);a&&a.jump(this.measuredOrigin,!1);const o=n.length-1,l=n[o];n[o]=da[e](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,d])=>{t.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function VO(s,t,e){if(s==null)return[];if(s instanceof EventTarget)return[s];if(typeof s=="string"){let n=document;const a=e?.[s]??n.querySelectorAll(s);return a?Array.from(a):[]}return Array.from(s).filter(n=>n!=null)}const dE=(s,t)=>t&&typeof s=="number"?t.transform(s):s;function _g(s){return AC(s)&&"offsetHeight"in s}const{schedule:Py}=PC(queueMicrotask,!1),As={x:!1,y:!1};function hE(){return As.x||As.y}function HO(s){return s==="x"||s==="y"?As[s]?null:(As[s]=!0,()=>{As[s]=!1}):As.x||As.y?null:(As.x=As.y=!0,()=>{As.x=As.y=!1})}function fE(s,t){const e=VO(s),n=new AbortController,a={passive:!0,...t,signal:n.signal};return[e,a,()=>n.abort()]}function _S(s){return!(s.pointerType==="touch"||hE())}function $O(s,t,e={}){const[n,a,o]=fE(s,e),l=c=>{if(!_S(c))return;const{target:d}=c,h=t(d,c);if(typeof h!="function"||!d)return;const p=m=>{_S(m)&&(h(m),d.removeEventListener("pointerleave",p))};d.addEventListener("pointerleave",p,a)};return n.forEach(c=>{c.addEventListener("pointerenter",l,a)}),o}const pE=(s,t)=>t?s===t?!0:pE(s,t.parentElement):!1,Fy=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,GO=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function mE(s){return GO.has(s.tagName)||s.isContentEditable===!0}const Od=new WeakSet;function TS(s){return t=>{t.key==="Enter"&&s(t)}}function Em(s,t){s.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const qO=(s,t)=>{const e=s.currentTarget;if(!e)return;const n=TS(()=>{if(Od.has(e))return;Em(e,"down");const a=TS(()=>{Em(e,"up")}),o=()=>Em(e,"cancel");e.addEventListener("keyup",a,t),e.addEventListener("blur",o,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function RS(s){return Fy(s)&&!hE()}function XO(s,t,e={}){const[n,a,o]=fE(s,e),l=c=>{const d=c.currentTarget;if(!RS(c))return;Od.add(d);const h=t(d,c),p=(x,A)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",y),Od.has(d)&&Od.delete(d),RS(x)&&typeof h=="function"&&h(x,{success:A})},m=x=>{p(x,d===window||d===document||e.useGlobalTarget||pE(d,x.target))},y=x=>{p(x,!1)};window.addEventListener("pointerup",m,a),window.addEventListener("pointercancel",y,a)};return n.forEach(c=>{(e.useGlobalTarget?window:c).addEventListener("pointerdown",l,a),_g(c)&&(c.addEventListener("focus",h=>qO(h,a)),!mE(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function gE(s){return AC(s)&&"ownerSVGElement"in s}function YO(s){return gE(s)&&s.tagName==="svg"}const WO=[...lE,ze,ga],KO=s=>WO.find(oE(s)),NS=()=>({translate:0,scale:1,origin:0,originPoint:0}),mo=()=>({x:NS(),y:NS()}),DS=()=>({min:0,max:0}),$e=()=>({x:DS(),y:DS()}),Tg={current:null},yE={current:!1},QO=typeof window<"u";function ZO(){if(yE.current=!0,!!QO)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>Tg.current=s.matches;s.addEventListener("change",t),t()}else Tg.current=!1}const JO=new WeakMap;function vh(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function bc(s){return typeof s=="string"||Array.isArray(s)}const By=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Iy=["initial",...By];function bh(s){return vh(s.animate)||Iy.some(t=>bc(s[t]))}function vE(s){return!!(bh(s)||s.variants)}function tP(s,t,e){for(const n in t){const a=t[n],o=e[n];if(fn(a))s.addValue(n,a);else if(fn(o))s.addValue(n,jo(a,{owner:s}));else if(o!==a)if(s.hasValue(n)){const l=s.getValue(n);l.liveStyle===!0?l.jump(a):l.hasAnimated||l.set(a)}else{const l=s.getStaticValue(n);s.addValue(n,jo(l!==void 0?l:a,{owner:s}))}}for(const n in e)t[n]===void 0&&s.removeValue(n);return t}const MS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Kd={};function bE(s){Kd=s}function eP(){return Kd}class nP{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Dy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Sn.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,ye.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=e.initial?{...d}:{},this.renderState=h,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=bh(e),this.isVariantNode=vE(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(e,{},this);for(const y in m){const x=m[y];d[y]!==void 0&&fn(x)&&x.set(d[y])}}mount(t){this.current=t,JO.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(yE.current||ZO(),this.shouldReduceMotion=Tg.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ma(this.notifyUpdate),ma(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Vo.has(t);n&&this.onBindTransform&&this.onBindTransform();const a=e.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&ye.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;typeof window<"u"&&window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{a(),o&&o(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Kd){const e=Kd[t];if(!e)continue;const{isEnabled:n,Feature:a}=e;if(!this.features[t]&&a&&n(this.props)&&(this.features[t]=new a(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$e()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<MS.length;n++){const a=MS[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o="on"+a,l=t[o];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=tP(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=jo(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(SC(n)||CC(n))?n=parseFloat(n):!KO(n)&&ga.test(e)&&(n=uE(t,e)),this.setBaseTarget(t,fn(n)?n.get():n)),fn(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const o=Ly(this.props,e,this.presenceContext?.custom);o&&(n=o[t])}if(e&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!fn(a)?a:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new by),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){Py.render(this.render)}}class xE extends nP{constructor(){super(...arguments),this.KeyframeResolver=UO}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){const n=t.style;return n?n[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;fn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}class wa{constructor(t){this.isMounted=!1,this.node=t}update(){}}function wE({top:s,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:s,max:n}}}function sP({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function iP(s,t){if(!t)return s;const e=t({x:s.left,y:s.top}),n=t({x:s.right,y:s.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function _m(s){return s===void 0||s===1}function Rg({scale:s,scaleX:t,scaleY:e}){return!_m(s)||!_m(t)||!_m(e)}function Xa(s){return Rg(s)||SE(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function SE(s){return kS(s.x)||kS(s.y)}function kS(s){return s&&s!=="0%"}function Qd(s,t,e){const n=s-e,a=t*n;return e+a}function LS(s,t,e,n,a){return a!==void 0&&(s=Qd(s,a,n)),Qd(s,e,n)+t}function Ng(s,t=0,e=1,n,a){s.min=LS(s.min,t,e,n,a),s.max=LS(s.max,t,e,n,a)}function AE(s,{x:t,y:e}){Ng(s.x,t.translate,t.scale,t.originPoint),Ng(s.y,e.translate,e.scale,e.originPoint)}const jS=.999999999999,OS=1.0000000000001;function aP(s,t,e,n=!1){const a=e.length;if(!a)return;t.x=t.y=1;let o,l;for(let c=0;c<a;c++){o=e[c],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&yo(s,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,AE(s,l)),n&&Xa(o.latestValues)&&yo(s,o.latestValues))}t.x<OS&&t.x>jS&&(t.x=1),t.y<OS&&t.y>jS&&(t.y=1)}function go(s,t){s.min=s.min+t,s.max=s.max+t}function PS(s,t,e,n,a=.5){const o=Ce(s.min,s.max,a);Ng(s,t,e,o,n)}function yo(s,t){PS(s.x,t.x,t.scaleX,t.scale,t.originX),PS(s.y,t.y,t.scaleY,t.scale,t.originY)}function CE(s,t){return wE(iP(s.getBoundingClientRect(),t))}function rP(s,t,e){const n=CE(s,e),{scroll:a}=t;return a&&(go(n.x,a.offset.x),go(n.y,a.offset.y)),n}const oP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lP=Uo.length;function cP(s,t,e){let n="",a=!0;for(let o=0;o<lP;o++){const l=Uo[o],c=s[l];if(c===void 0)continue;let d=!0;if(typeof c=="number")d=c===(l.startsWith("scale")?1:0);else{const h=parseFloat(c);d=l.startsWith("scale")?h===1:h===0}if(!d||e){const h=dE(c,Oy[l]);if(!d){a=!1;const p=oP[l]||l;n+=`${p}(${h}) `}e&&(t[l]=h)}}return n=n.trim(),e?n=e(t,a?"":n):a&&(n="none"),n}function zy(s,t,e){const{style:n,vars:a,transformOrigin:o}=s;let l=!1,c=!1;for(const d in t){const h=t[d];if(Vo.has(d)){l=!0;continue}else if(BC(d)){a[d]=h;continue}else{const p=dE(h,Oy[d]);d.startsWith("origin")?(c=!0,o[d]=p):n[d]=p}}if(t.transform||(l||e?n.transform=cP(t,s.transform,e):n.transform&&(n.transform="none")),c){const{originX:d="50%",originY:h="50%",originZ:p=0}=o;n.transformOrigin=`${d} ${h} ${p}`}}function EE(s,{style:t,vars:e},n,a){const o=s.style;let l;for(l in t)o[l]=t[l];a?.applyProjectionStyles(o,n);for(l in e)o.setProperty(l,e[l])}function FS(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const ql={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(Ct.test(s))s=parseFloat(s);else return s;const e=FS(s,t.target.x),n=FS(s,t.target.y);return`${e}% ${n}%`}},uP={correct:(s,{treeScale:t,projectionDelta:e})=>{const n=s,a=ga.parse(s);if(a.length>5)return n;const o=ga.createTransformer(s),l=typeof a[0]!="number"?1:0,c=e.x.scale*t.x,d=e.y.scale*t.y;a[0+l]/=c,a[1+l]/=d;const h=Ce(c,d,.5);return typeof a[2+l]=="number"&&(a[2+l]/=h),typeof a[3+l]=="number"&&(a[3+l]/=h),o(a)}},Dg={borderRadius:{...ql,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ql,borderTopRightRadius:ql,borderBottomLeftRadius:ql,borderBottomRightRadius:ql,boxShadow:uP};function _E(s,{layout:t,layoutId:e}){return Vo.has(s)||s.startsWith("origin")||(t||e!==void 0)&&(!!Dg[s]||s==="opacity")}function Uy(s,t,e){const n=s.style,a=t?.style,o={};if(!n)return o;for(const l in n)(fn(n[l])||a&&fn(a[l])||_E(l,s)||e?.getValue(l)?.liveStyle!==void 0)&&(o[l]=n[l]);return o}function dP(s){return window.getComputedStyle(s)}class hP extends xE{constructor(){super(...arguments),this.type="html",this.renderInstance=EE}readValueFromInstance(t,e){if(Vo.has(e))return this.projection?.isProjecting?gg(e):Vj(t,e);{const n=dP(t),a=(BC(e)?n.getPropertyValue(e):n[e])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:e}){return CE(t,e)}build(t,e,n){zy(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return Uy(t,e,n)}}const fP={offset:"stroke-dashoffset",array:"stroke-dasharray"},pP={offset:"strokeDashoffset",array:"strokeDasharray"};function mP(s,t,e=1,n=0,a=!0){s.pathLength=1;const o=a?fP:pP;s[o.offset]=`${-n}`,s[o.array]=`${t} ${e}`}const gP=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function TE(s,{attrX:t,attrY:e,attrScale:n,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},d,h,p){if(zy(s,c,h),d){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:m,style:y}=s;m.transform&&(y.transform=m.transform,delete m.transform),(y.transform||m.transformOrigin)&&(y.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),y.transform&&(y.transformBox=p?.transformBox??"fill-box",delete m.transformBox);for(const x of gP)m[x]!==void 0&&(y[x]=m[x],delete m[x]);t!==void 0&&(m.x=t),e!==void 0&&(m.y=e),n!==void 0&&(m.scale=n),a!==void 0&&mP(m,a,o,l,!1)}const RE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),NE=s=>typeof s=="string"&&s.toLowerCase()==="svg";function yP(s,t,e,n){EE(s,t,void 0,n);for(const a in t.attrs)s.setAttribute(RE.has(a)?a:jy(a),t.attrs[a])}function DE(s,t,e){const n=Uy(s,t,e);for(const a in s)if(fn(s[a])||fn(t[a])){const o=Uo.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[o]=s[a]}return n}class vP extends xE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$e}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Vo.has(e)){const n=cE(e);return n&&n.default||0}return e=RE.has(e)?e:jy(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return DE(t,e,n)}build(t,e,n){TE(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,a){yP(t,e,n,a)}mount(t){this.isSVGTag=NE(t.tagName),super.mount(t)}}const bP=Iy.length;function ME(s){if(!s)return;if(!s.isControllingVariants){const e=s.parent?ME(s.parent)||{}:{};return s.props.initial!==void 0&&(e.initial=s.props.initial),e}const t={};for(let e=0;e<bP;e++){const n=Iy[e],a=s.props[n];(bc(a)||a===!1)&&(t[n]=a)}return t}function kE(s,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==s.length)return!1;for(let n=0;n<e;n++)if(t[n]!==s[n])return!1;return!0}const xP=[...By].reverse(),wP=By.length;function SP(s){return t=>Promise.all(t.map(({animation:e,options:n})=>MO(s,e,n)))}function AP(s){let t=SP(s),e=BS(),n=!0;const a=d=>(h,p)=>{const m=wo(s,p,d==="exit"?s.presenceContext?.custom:void 0);if(m){const{transition:y,transitionEnd:x,...A}=m;h={...h,...A,...x}}return h};function o(d){t=d(s)}function l(d){const{props:h}=s,p=ME(s.parent)||{},m=[],y=new Set;let x={},A=1/0;for(let C=0;C<wP;C++){const E=xP[C],T=e[E],R=h[E]!==void 0?h[E]:p[E],N=bc(R),D=E===d?T.isActive:null;D===!1&&(A=C);let L=R===p[E]&&R!==h[E]&&N;if(L&&n&&s.manuallyAnimateOnMount&&(L=!1),T.protectedKeys={...x},!T.isActive&&D===null||!R&&!T.prevProp||vh(R)||typeof R=="boolean")continue;const k=CP(T.prevProp,R);let j=k||E===d&&T.isActive&&!L&&N||C>A&&N,P=!1;const U=Array.isArray(R)?R:[R];let H=U.reduce(a(E),{});D===!1&&(H={});const{prevResolvedValues:J={}}=T,at={...J,...H},q=B=>{j=!0,y.has(B)&&(P=!0,y.delete(B)),T.needsAnimating[B]=!0;const I=s.getValue(B);I&&(I.liveStyle=!1)};for(const B in at){const I=H[B],Y=J[B];if(x.hasOwnProperty(B))continue;let ft=!1;Sg(I)&&Sg(Y)?ft=!kE(I,Y):ft=I!==Y,ft?I!=null?q(B):y.add(B):I!==void 0&&y.has(B)?q(B):T.protectedKeys[B]=!0}T.prevProp=R,T.prevResolvedValues=H,T.isActive&&(x={...x,...H}),n&&s.blockInitialAnimation&&(j=!1);const rt=L&&k;j&&(!rt||P)&&m.push(...U.map(B=>{const I={type:E};if(typeof B=="string"&&n&&!rt&&s.manuallyAnimateOnMount&&s.parent){const{parent:Y}=s,ft=wo(Y,B);if(Y.enteringChildren&&ft){const{delayChildren:F}=ft.transition||{};I.delay=eE(Y.enteringChildren,s,F)}}return{animation:B,options:I}}))}if(y.size){const C={};if(typeof h.initial!="boolean"){const E=wo(s,Array.isArray(h.initial)?h.initial[0]:h.initial);E&&E.transition&&(C.transition=E.transition)}y.forEach(E=>{const T=s.getBaseTarget(E),R=s.getValue(E);R&&(R.liveStyle=!0),C[E]=T??null}),m.push({animation:C})}let w=!!m.length;return n&&(h.initial===!1||h.initial===h.animate)&&!s.manuallyAnimateOnMount&&(w=!1),n=!1,w?t(m):Promise.resolve()}function c(d,h){if(e[d].isActive===h)return Promise.resolve();s.variantChildren?.forEach(m=>m.animationState?.setActive(d,h)),e[d].isActive=h;const p=l(d);for(const m in e)e[m].protectedKeys={};return p}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>e,reset:()=>{e=BS()}}}function CP(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!kE(t,s):!1}function $a(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function BS(){return{animate:$a(!0),whileInView:$a(),whileHover:$a(),whileTap:$a(),whileDrag:$a(),whileFocus:$a(),exit:$a()}}function IS(s,t){s.min=t.min,s.max=t.max}function Ss(s,t){IS(s.x,t.x),IS(s.y,t.y)}function zS(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}const LE=1e-4,EP=1-LE,_P=1+LE,jE=.01,TP=0-jE,RP=0+jE;function An(s){return s.max-s.min}function NP(s,t,e){return Math.abs(s-t)<=e}function US(s,t,e,n=.5){s.origin=n,s.originPoint=Ce(t.min,t.max,s.origin),s.scale=An(e)/An(t),s.translate=Ce(e.min,e.max,s.origin)-s.originPoint,(s.scale>=EP&&s.scale<=_P||isNaN(s.scale))&&(s.scale=1),(s.translate>=TP&&s.translate<=RP||isNaN(s.translate))&&(s.translate=0)}function uc(s,t,e,n){US(s.x,t.x,e.x,n?n.originX:void 0),US(s.y,t.y,e.y,n?n.originY:void 0)}function VS(s,t,e){s.min=e.min+t.min,s.max=s.min+An(t)}function DP(s,t,e){VS(s.x,t.x,e.x),VS(s.y,t.y,e.y)}function HS(s,t,e){s.min=t.min-e.min,s.max=s.min+An(t)}function Zd(s,t,e){HS(s.x,t.x,e.x),HS(s.y,t.y,e.y)}function $S(s,t,e,n,a){return s-=t,s=Qd(s,1/e,n),a!==void 0&&(s=Qd(s,1/a,n)),s}function MP(s,t=0,e=1,n=.5,a,o=s,l=s){if(Ys.test(t)&&(t=parseFloat(t),t=Ce(l.min,l.max,t/100)-l.min),typeof t!="number")return;let c=Ce(o.min,o.max,n);s===o&&(c-=t),s.min=$S(s.min,t,e,c,a),s.max=$S(s.max,t,e,c,a)}function GS(s,t,[e,n,a],o,l){MP(s,t[e],t[n],t[a],t.scale,o,l)}const kP=["x","scaleX","originX"],LP=["y","scaleY","originY"];function qS(s,t,e,n){GS(s.x,t,kP,e?e.x:void 0,n?n.x:void 0),GS(s.y,t,LP,e?e.y:void 0,n?n.y:void 0)}function XS(s){return s.translate===0&&s.scale===1}function OE(s){return XS(s.x)&&XS(s.y)}function YS(s,t){return s.min===t.min&&s.max===t.max}function jP(s,t){return YS(s.x,t.x)&&YS(s.y,t.y)}function WS(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function PE(s,t){return WS(s.x,t.x)&&WS(s.y,t.y)}function KS(s){return An(s.x)/An(s.y)}function QS(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}function ps(s){return[s("x"),s("y")]}function OP(s,t,e){let n="";const a=s.x.translate/t.x,o=s.y.translate/t.y,l=e?.z||0;if((a||o||l)&&(n=`translate3d(${a}px, ${o}px, ${l}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:h,rotate:p,rotateX:m,rotateY:y,skewX:x,skewY:A}=e;h&&(n=`perspective(${h}px) ${n}`),p&&(n+=`rotate(${p}deg) `),m&&(n+=`rotateX(${m}deg) `),y&&(n+=`rotateY(${y}deg) `),x&&(n+=`skewX(${x}deg) `),A&&(n+=`skewY(${A}deg) `)}const c=s.x.scale*t.x,d=s.y.scale*t.y;return(c!==1||d!==1)&&(n+=`scale(${c}, ${d})`),n||"none"}const FE=["TopLeft","TopRight","BottomLeft","BottomRight"],PP=FE.length,ZS=s=>typeof s=="string"?parseFloat(s):s,JS=s=>typeof s=="number"||Ct.test(s);function FP(s,t,e,n,a,o){a?(s.opacity=Ce(0,e.opacity??1,BP(n)),s.opacityExit=Ce(t.opacity??1,0,IP(n))):o&&(s.opacity=Ce(t.opacity??1,e.opacity??1,n));for(let l=0;l<PP;l++){const c=`border${FE[l]}Radius`;let d=t1(t,c),h=t1(e,c);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||JS(d)===JS(h)?(s[c]=Math.max(Ce(ZS(d),ZS(h),n),0),(Ys.test(h)||Ys.test(d))&&(s[c]+="%")):s[c]=h}(t.rotate||e.rotate)&&(s.rotate=Ce(t.rotate||0,e.rotate||0,n))}function t1(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const BP=BE(0,.5,kC),IP=BE(.5,.95,gs);function BE(s,t,e){return n=>n<s?0:n>t?1:e(gc(s,t,n))}function zP(s,t,e){const n=fn(s)?s:jo(s);return n.start(ky("",n,t,e)),n.animation}function xc(s,t,e,n={passive:!0}){return s.addEventListener(t,e,n),()=>s.removeEventListener(t,e)}const UP=(s,t)=>s.depth-t.depth;class VP{constructor(){this.children=[],this.isDirty=!1}add(t){my(this.children,t),this.isDirty=!0}remove(t){gy(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(UP),this.isDirty=!1,this.children.forEach(t)}}function HP(s,t){const e=Sn.now(),n=({timestamp:a})=>{const o=a-e;o>=t&&(ma(n),s(o-t))};return ye.setup(n,!0),()=>ma(n)}function Pd(s){return fn(s)?s.get():s}class $P{constructor(){this.members=[]}add(t){my(this.members,t),t.scheduleRender()}remove(t){if(gy(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(a=>t===a);if(e===0)return!1;let n;for(let a=e;a>=0;a--){const o=this.members[a];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender();const a=n.options.layoutDependency,o=t.options.layoutDependency;a!==void 0&&o!==void 0&&a===o||(t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0));const{crossfade:c}=t.options;c===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Fd={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Tm=["","X","Y","Z"],GP=1e3;let qP=0;function Rm(s,t,e,n){const{latestValues:a}=t;a[s]&&(e[s]=a[s],t.setStaticValue(s,0),n&&(n[s]=0))}function IE(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const e=aE(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:a,layoutId:o}=s.options;window.MotionCancelOptimisedAnimation(e,"transform",ye,!(a||o))}const{parent:n}=s;n&&!n.hasCheckedOptimisedAppear&&IE(n)}function zE({attachResizeListener:s,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(l={},c=t?.()){this.id=qP++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(WP),this.nodes.forEach(JP),this.nodes.forEach(tF),this.nodes.forEach(KP)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new VP)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new by),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=gE(l)&&!YO(l),this.instance=l;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),s){let p,m=0;const y=()=>this.root.updateBlockedByResize=!1;ye.read(()=>{m=window.innerWidth}),s(l,()=>{const x=window.innerWidth;x!==m&&(m=x,this.root.updateBlockedByResize=!0,p&&p(),p=HP(y,250),Fd.hasAnimatedSinceResize&&(Fd.hasAnimatedSinceResize=!1,this.nodes.forEach(s1)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeLayoutChanged:y,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||h.getDefaultTransition()||aF,{onLayoutAnimationStart:w,onLayoutAnimationComplete:C}=h.getProps(),E=!this.targetLayout||!PE(this.targetLayout,x),T=!m&&y;if(this.options.layoutRoot||this.resumeFrom||T||m&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...My(A,"layout"),onPlay:w,onComplete:C};(h.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(p,T)}else m||s1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ma(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(eF),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&IE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(e1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(n1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ZP),this.nodes.forEach(XP),this.nodes.forEach(YP)):this.nodes.forEach(n1),this.clearAllSnapshots();const c=Sn.now();an.delta=Ks(0,1e3/60,c-an.timestamp),an.timestamp=c,an.isProcessing=!0,bm.update.process(an),bm.preRender.process(an),bm.render.process(an),an.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Py.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(QP),this.sharedNodes.forEach(nF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ye.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ye.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!An(this.snapshot.measuredBox.x)&&!An(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=$e(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const d=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!a)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!OE(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;l&&this.instance&&(c||Xa(this.latestValues)||p)&&(a(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),rF(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return $e();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(oF))){const{scroll:h}=this.root;h&&(go(c.x,h.offset.x),go(c.y,h.offset.y))}return c}removeElementScroll(l){const c=$e();if(Ss(c,l),this.scroll?.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:p,options:m}=h;h!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&Ss(c,l),go(c.x,p.offset.x),go(c.y,p.offset.y))}return c}applyTransform(l,c=!1){const d=$e();Ss(d,l);for(let h=0;h<this.path.length;h++){const p=this.path[h];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&yo(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Xa(p.latestValues)&&yo(d,p.latestValues)}return Xa(this.latestValues)&&yo(d,this.latestValues),d}removeTransform(l){const c=$e();Ss(c,l);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!Xa(h.latestValues))continue;Rg(h.latestValues)&&h.updateSnapshot();const p=$e(),m=h.measurePageBox();Ss(p,m),qS(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return Xa(this.latestValues)&&qS(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==an.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!this.layout||!(p||m))return;this.resolvedRelativeTargetAt=an.timestamp;const y=this.getClosestProjectingParent();y&&this.linkedParentVersion!==y.layoutVersion&&!y.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(y&&y.layout?this.createRelativeTarget(y,this.layout.layoutBox,y.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=$e(),this.targetWithTransforms=$e()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),DP(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ss(this.target,this.layout.layoutBox),AE(this.target,this.targetDelta)):Ss(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?this.createRelativeTarget(y,this.target,y.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Rg(this.parent.latestValues)||SE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,c,d){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$e(),this.relativeTargetOrigin=$e(),Zd(this.relativeTargetOrigin,c,d),Ss(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===an.timestamp&&(d=!1),d)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;Ss(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;aP(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=$e());const{target:x}=l;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(zS(this.prevProjectionDelta.x,this.projectionDelta.x),zS(this.prevProjectionDelta.y,this.projectionDelta.y)),uc(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==y||!QS(this.projectionDelta.x,this.prevProjectionDelta.x)||!QS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=mo(),this.projectionDelta=mo(),this.projectionDeltaWithTransform=mo()}setAnimationOrigin(l,c=!1){const d=this.snapshot,h=d?d.latestValues:{},p={...this.latestValues},m=mo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const y=$e(),x=d?d.source:void 0,A=this.layout?this.layout.source:void 0,w=x!==A,C=this.getStack(),E=!C||C.members.length<=1,T=!!(w&&!E&&this.options.crossfade===!0&&!this.path.some(iF));this.animationProgress=0;let R;this.mixTargetDelta=N=>{const D=N/1e3;i1(m.x,l.x,D),i1(m.y,l.y,D),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zd(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sF(this.relativeTarget,this.relativeTargetOrigin,y,D),R&&jP(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=$e()),Ss(R,this.relativeTarget)),w&&(this.animationValues=p,FP(p,h,this.latestValues,D,T,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ma(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ye.update(()=>{Fd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=jo(0)),this.currentAnimation=zP(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(GP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:h,latestValues:p}=l;if(!(!c||!d||!h)){if(this!==l&&this.layout&&h&&UE(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||$e();const m=An(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+m;const y=An(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+y}Ss(c,d),yo(c,p),uc(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new $P),this.sharedNodes.get(l).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const h={};d.z&&Rm("z",l,h,this.animationValues);for(let p=0;p<Tm.length;p++)Rm(`rotate${Tm[p]}`,l,h,this.animationValues),Rm(`skew${Tm[p]}`,l,h,this.animationValues);l.render();for(const p in h)l.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Pd(c?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Pd(c?.pointerEvents)||""),this.hasProjected&&!Xa(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const p=h.animationValues||h.latestValues;this.applyTransformsToTarget();let m=OP(this.projectionDeltaWithTransform,this.treeScale,p);d&&(m=d(p,m)),l.transform=m;const{x:y,y:x}=this.projectionDelta;l.transformOrigin=`${y.origin*100}% ${x.origin*100}% 0`,h.animationValues?l.opacity=h===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const A in Dg){if(p[A]===void 0)continue;const{correct:w,applyTo:C,isCSSVariable:E}=Dg[A],T=m==="none"?p[A]:w(p[A],h);if(C){const R=C.length;for(let N=0;N<R;N++)l[C[N]]=T}else E?this.options.visualElement.renderState.vars[A]=T:l[A]=T}this.options.layoutId&&(l.pointerEvents=h===this?Pd(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(e1),this.root.sharedNodes.clear()}}}function XP(s){s.updateLayout()}function YP(s){const t=s.resumeFrom?.snapshot||s.snapshot;if(s.isLead()&&s.layout&&t&&s.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:n}=s.layout,{animationType:a}=s.options,o=t.source!==s.layout.source;a==="size"?ps(p=>{const m=o?t.measuredBox[p]:t.layoutBox[p],y=An(m);m.min=e[p].min,m.max=m.min+y}):UE(a,t.layoutBox,e)&&ps(p=>{const m=o?t.measuredBox[p]:t.layoutBox[p],y=An(e[p]);m.max=m.min+y,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[p].max=s.relativeTarget[p].min+y)});const l=mo();uc(l,e,t.layoutBox);const c=mo();o?uc(c,s.applyTransform(n,!0),t.measuredBox):uc(c,e,t.layoutBox);const d=!OE(l);let h=!1;if(!s.resumeFrom){const p=s.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:y}=p;if(m&&y){const x=$e();Zd(x,t.layoutBox,m.layoutBox);const A=$e();Zd(A,e,y.layoutBox),PE(x,A)||(h=!0),p.options.layoutRoot&&(s.relativeTarget=A,s.relativeTargetOrigin=x,s.relativeParent=p)}}}s.notifyListeners("didUpdate",{layout:e,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(s.isLead()){const{onExitComplete:e}=s.options;e&&e()}s.options.transition=void 0}function WP(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function KP(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function QP(s){s.clearSnapshot()}function e1(s){s.clearMeasurements()}function n1(s){s.isLayoutDirty=!1}function ZP(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function s1(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function JP(s){s.resolveTargetDelta()}function tF(s){s.calcProjection()}function eF(s){s.resetSkewAndRotation()}function nF(s){s.removeLeadSnapshot()}function i1(s,t,e){s.translate=Ce(t.translate,0,e),s.scale=Ce(t.scale,1,e),s.origin=t.origin,s.originPoint=t.originPoint}function a1(s,t,e,n){s.min=Ce(t.min,e.min,n),s.max=Ce(t.max,e.max,n)}function sF(s,t,e,n){a1(s.x,t.x,e.x,n),a1(s.y,t.y,e.y,n)}function iF(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const aF={duration:.45,ease:[.4,0,.1,1]},r1=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),o1=r1("applewebkit/")&&!r1("chrome/")?Math.round:gs;function l1(s){s.min=o1(s.min),s.max=o1(s.max)}function rF(s){l1(s.x),l1(s.y)}function UE(s,t,e){return s==="position"||s==="preserve-aspect"&&!NP(KS(t),KS(e),.2)}function oF(s){return s!==s.root&&s.scroll?.wasRoot}const lF=zE({attachResizeListener:(s,t)=>xc(s,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),Nm={current:void 0},VE=zE({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!Nm.current){const s=new lF({});s.mount(window),s.setOptions({layoutScroll:!0}),Nm.current=s}return Nm.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),Vy=S.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function c1(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function cF(...s){return t=>{let e=!1;const n=s.map(a=>{const o=c1(a,t);return!e&&typeof o=="function"&&(e=!0),o});if(e)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():c1(s[a],null)}}}}function uF(...s){return S.useCallback(cF(...s),s)}class dF extends S.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const n=e.offsetParent,a=_g(n)&&n.offsetWidth||0,o=_g(n)&&n.offsetHeight||0,l=this.props.sizeRef.current;l.height=e.offsetHeight||0,l.width=e.offsetWidth||0,l.top=e.offsetTop,l.left=e.offsetLeft,l.right=a-l.width-l.left,l.bottom=o-l.height-l.top}return null}componentDidUpdate(){}render(){return this.props.children}}function hF({children:s,isPresent:t,anchorX:e,anchorY:n,root:a}){const o=S.useId(),l=S.useRef(null),c=S.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:d}=S.useContext(Vy),h=s.props?.ref??s?.ref,p=uF(l,h);return S.useInsertionEffect(()=>{const{width:m,height:y,top:x,left:A,right:w,bottom:C}=c.current;if(t||!l.current||!m||!y)return;const E=e==="left"?`left: ${A}`:`right: ${w}`,T=n==="bottom"?`bottom: ${C}`:`top: ${x}`;l.current.dataset.motionPopId=o;const R=document.createElement("style");d&&(R.nonce=d);const N=a??document.head;return N.appendChild(R),R.sheet&&R.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${y}px !important;
            ${E}px !important;
            ${T}px !important;
          }
        `),()=>{N.contains(R)&&N.removeChild(R)}},[t]),g.jsx(dF,{isPresent:t,childRef:l,sizeRef:c,children:S.cloneElement(s,{ref:p})})}const fF=({children:s,initial:t,isPresent:e,onExitComplete:n,custom:a,presenceAffectsLayout:o,mode:l,anchorX:c,anchorY:d,root:h})=>{const p=py(pF),m=S.useId();let y=!0,x=S.useMemo(()=>(y=!1,{id:m,initial:t,isPresent:e,custom:a,onExitComplete:A=>{p.set(A,!0);for(const w of p.values())if(!w)return;n&&n()},register:A=>(p.set(A,!1),()=>p.delete(A))}),[e,p,n]);return o&&y&&(x={...x}),S.useMemo(()=>{p.forEach((A,w)=>p.set(w,!1))},[e]),S.useEffect(()=>{!e&&!p.size&&n&&n()},[e]),l==="popLayout"&&(s=g.jsx(hF,{isPresent:e,anchorX:c,anchorY:d,root:h,children:s})),g.jsx(yh.Provider,{value:x,children:s})};function pF(){return new Map}function HE(s=!0){const t=S.useContext(yh);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:a}=t,o=S.useId();S.useEffect(()=>{if(s)return a(o)},[s]);const l=S.useCallback(()=>s&&n&&n(o),[o,n,s]);return!e&&n?[!1,l]:[!0]}const hd=s=>s.key||"";function u1(s){const t=[];return S.Children.forEach(s,e=>{S.isValidElement(e)&&t.push(e)}),t}const wc=({children:s,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",anchorY:d="top",root:h})=>{const[p,m]=HE(l),y=S.useMemo(()=>u1(s),[s]),x=l&&!p?[]:y.map(hd),A=S.useRef(!0),w=S.useRef(y),C=py(()=>new Map),E=S.useRef(new Set),[T,R]=S.useState(y),[N,D]=S.useState(y);wC(()=>{A.current=!1,w.current=y;for(let j=0;j<N.length;j++){const P=hd(N[j]);x.includes(P)?(C.delete(P),E.current.delete(P)):C.get(P)!==!0&&C.set(P,!1)}},[N,x.length,x.join("-")]);const L=[];if(y!==T){let j=[...y];for(let P=0;P<N.length;P++){const U=N[P],H=hd(U);x.includes(H)||(j.splice(P,0,U),L.push(U))}return o==="wait"&&L.length&&(j=L),D(u1(j)),R(y),null}const{forceRender:k}=S.useContext(fy);return g.jsx(g.Fragment,{children:N.map(j=>{const P=hd(j),U=l&&!p?!1:y===N||x.includes(P),H=()=>{if(E.current.has(P))return;if(E.current.add(P),C.has(P))C.set(P,!0);else return;let J=!0;C.forEach(at=>{at||(J=!1)}),J&&(k?.(),D(w.current),l&&m?.(),n&&n())};return g.jsx(fF,{isPresent:U,initial:!A.current||e?void 0:!1,custom:t,presenceAffectsLayout:a,mode:o,root:h,onExitComplete:U?void 0:H,anchorX:c,anchorY:d,children:j},P)})})},$E=S.createContext({strict:!1}),d1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let h1=!1;function mF(){if(h1)return;const s={};for(const t in d1)s[t]={isEnabled:e=>d1[t].some(n=>!!e[n])};bE(s),h1=!0}function GE(){return mF(),eP()}function gF(s){const t=GE();for(const e in s)t[e]={...t[e],...s[e]};bE(t)}const yF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Jd(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||yF.has(s)}let qE=s=>!Jd(s);function vF(s){typeof s=="function"&&(qE=t=>t.startsWith("on")?!Jd(t):s(t))}try{vF(require("@emotion/is-prop-valid").default)}catch{}function bF(s,t,e){const n={};for(const a in s)a==="values"&&typeof s.values=="object"||(qE(a)||e===!0&&Jd(a)||!t&&!Jd(a)||s.draggable&&a.startsWith("onDrag"))&&(n[a]=s[a]);return n}const xh=S.createContext({});function xF(s,t){if(bh(s)){const{initial:e,animate:n}=s;return{initial:e===!1||bc(e)?e:void 0,animate:bc(n)?n:void 0}}return s.inherit!==!1?t:{}}function wF(s){const{initial:t,animate:e}=xF(s,S.useContext(xh));return S.useMemo(()=>({initial:t,animate:e}),[f1(t),f1(e)])}function f1(s){return Array.isArray(s)?s.join(" "):s}const Hy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function XE(s,t,e){for(const n in t)!fn(t[n])&&!_E(n,e)&&(s[n]=t[n])}function SF({transformTemplate:s},t){return S.useMemo(()=>{const e=Hy();return zy(e,t,s),Object.assign({},e.vars,e.style)},[t])}function AF(s,t){const e=s.style||{},n={};return XE(n,e,s),Object.assign(n,SF(s,t)),n}function CF(s,t){const e={},n=AF(s,t);return s.drag&&s.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(e.tabIndex=0),e.style=n,e}const YE=()=>({...Hy(),attrs:{}});function EF(s,t,e,n){const a=S.useMemo(()=>{const o=YE();return TE(o,t,NE(n),s.transformTemplate,s.style),{...o.attrs,style:{...o.style}}},[t]);if(s.style){const o={};XE(o,s.style,s),a.style={...o,...a.style}}return a}const _F=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $y(s){return typeof s!="string"||s.includes("-")?!1:!!(_F.indexOf(s)>-1||/[A-Z]/u.test(s))}function TF(s,t,e,{latestValues:n},a,o=!1,l){const d=(l??$y(s)?EF:CF)(t,n,a,s),h=bF(t,typeof s=="string",o),p=s!==S.Fragment?{...h,...d,ref:e}:{},{children:m}=t,y=S.useMemo(()=>fn(m)?m.get():m,[m]);return S.createElement(s,{...p,children:y})}function RF({scrapeMotionValuesFromProps:s,createRenderState:t},e,n,a){return{latestValues:NF(e,n,a,s),renderState:t()}}function NF(s,t,e,n){const a={},o=n(s,{});for(const y in o)a[y]=Pd(o[y]);let{initial:l,animate:c}=s;const d=bh(s),h=vE(s);t&&h&&!d&&s.inherit!==!1&&(l===void 0&&(l=t.initial),c===void 0&&(c=t.animate));let p=e?e.initial===!1:!1;p=p||l===!1;const m=p?c:l;if(m&&typeof m!="boolean"&&!vh(m)){const y=Array.isArray(m)?m:[m];for(let x=0;x<y.length;x++){const A=Ly(s,y[x]);if(A){const{transitionEnd:w,transition:C,...E}=A;for(const T in E){let R=E[T];if(Array.isArray(R)){const N=p?R.length-1:0;R=R[N]}R!==null&&(a[T]=R)}for(const T in w)a[T]=w[T]}}}return a}const WE=s=>(t,e)=>{const n=S.useContext(xh),a=S.useContext(yh),o=()=>RF(s,t,n,a);return e?o():py(o)},DF=WE({scrapeMotionValuesFromProps:Uy,createRenderState:Hy}),MF=WE({scrapeMotionValuesFromProps:DE,createRenderState:YE}),kF=Symbol.for("motionComponentSymbol");function LF(s,t,e){const n=S.useRef(e);S.useInsertionEffect(()=>{n.current=e});const a=S.useRef(null);return S.useCallback(o=>{o&&s.onMount?.(o),t&&(o?t.mount(o):t.unmount());const l=n.current;if(typeof l=="function")if(o){const c=l(o);typeof c=="function"&&(a.current=c)}else a.current?(a.current(),a.current=null):l(o);else l&&(l.current=o)},[t])}const KE=S.createContext({});function tc(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function jF(s,t,e,n,a,o){const{visualElement:l}=S.useContext(xh),c=S.useContext($E),d=S.useContext(yh),h=S.useContext(Vy).reducedMotion,p=S.useRef(null),m=S.useRef(!1);n=n||c.renderer,!p.current&&n&&(p.current=n(s,{visualState:t,parent:l,props:e,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h,isSVG:o}),m.current&&p.current&&(p.current.manuallyAnimateOnMount=!0));const y=p.current,x=S.useContext(KE);y&&!y.projection&&a&&(y.type==="html"||y.type==="svg")&&OF(p.current,e,a,x);const A=S.useRef(!1);S.useInsertionEffect(()=>{y&&A.current&&y.update(e,d)});const w=e[iE],C=S.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return wC(()=>{m.current=!0,y&&(A.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),C.current&&y.animationState&&y.animationState.animateChanges())}),S.useEffect(()=>{y&&(!C.current&&y.animationState&&y.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),C.current=!1),y.enteringChildren=void 0)}),y}function OF(s,t,e,n){const{layoutId:a,layout:o,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:h,layoutCrossfade:p}=t;s.projection=new e(s.latestValues,t["data-framer-portal-id"]?void 0:QE(s.parent)),s.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:!!l||c&&tc(c),visualElement:s,animationType:typeof o=="string"?o:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:d,layoutRoot:h})}function QE(s){if(s)return s.options.allowProjection!==!1?s.projection:QE(s.parent)}function Dm(s,{forwardMotionProps:t=!1,type:e}={},n,a){n&&gF(n);const o=e?e==="svg":$y(s),l=o?MF:DF;function c(h,p){let m;const y={...S.useContext(Vy),...h,layoutId:PF(h)},{isStatic:x}=y,A=wF(h),w=l(h,x);if(!x&&xC){FF();const C=BF(y);m=C.MeasureLayout,A.visualElement=jF(s,w,y,a,C.ProjectionNode,o)}return g.jsxs(xh.Provider,{value:A,children:[m&&A.visualElement?g.jsx(m,{visualElement:A.visualElement,...y}):null,TF(s,h,LF(w,A.visualElement,p),w,x,t,o)]})}c.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const d=S.forwardRef(c);return d[kF]=s,d}function PF({layoutId:s}){const t=S.useContext(fy).id;return t&&s!==void 0?t+"-"+s:s}function FF(s,t){S.useContext($E).strict}function BF(s){const t=GE(),{drag:e,layout:n}=t;if(!e&&!n)return{};const a={...e,...n};return{MeasureLayout:e?.isEnabled(s)||n?.isEnabled(s)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function IF(s,t){if(typeof Proxy>"u")return Dm;const e=new Map,n=(o,l)=>Dm(o,l,s,t),a=(o,l)=>n(o,l);return new Proxy(a,{get:(o,l)=>l==="create"?n:(e.has(l)||e.set(l,Dm(l,void 0,s,t)),e.get(l))})}const zF=(s,t)=>t.isSVG??$y(s)?new vP(t):new hP(t,{allowProjection:s!==S.Fragment});class UF extends wa{constructor(t){super(t),t.animationState||(t.animationState=AP(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();vh(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let VF=0;class HF extends wa{constructor(){super(...arguments),this.id=VF++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const a=this.node.animationState.setActive("exit",!t);e&&!t&&a.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const $F={animation:{Feature:UF},exit:{Feature:HF}};function Bc(s){return{point:{x:s.pageX,y:s.pageY}}}const GF=s=>t=>Fy(t)&&s(t,Bc(t));function dc(s,t,e,n){return xc(s,t,GF(e),n)}const ZE=({current:s})=>s?s.ownerDocument.defaultView:null,p1=(s,t)=>Math.abs(s-t);function qF(s,t){const e=p1(s.x,t.x),n=p1(s.y,t.y);return Math.sqrt(e**2+n**2)}const m1=new Set(["auto","scroll"]);class JE{constructor(t,e,{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=x=>{this.handleScroll(x.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=km(this.lastMoveEventInfo,this.history),A=this.startEvent!==null,w=qF(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!A&&!w)return;const{point:C}=x,{timestamp:E}=an;this.history.push({...C,timestamp:E});const{onStart:T,onMove:R}=this.handlers;A||(T&&T(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,x)},this.handlePointerMove=(x,A)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=Mm(A,this.transformPagePoint),ye.update(this.updatePoint,!0)},this.handlePointerUp=(x,A)=>{this.end();const{onEnd:w,onSessionEnd:C,resumeAnimation:E}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=km(x.type==="pointercancel"?this.lastMoveEventInfo:Mm(A,this.transformPagePoint),this.history);this.startEvent&&w&&w(x,T),C&&C(x,T)},!Fy(t))return;this.dragSnapToOrigin=o,this.handlers=e,this.transformPagePoint=n,this.distanceThreshold=l,this.contextWindow=a||window;const d=Bc(t),h=Mm(d,this.transformPagePoint),{point:p}=h,{timestamp:m}=an;this.history=[{...p,timestamp:m}];const{onSessionStart:y}=e;y&&y(t,km(h,this.history)),this.removeListeners=Oc(dc(this.contextWindow,"pointermove",this.handlePointerMove),dc(this.contextWindow,"pointerup",this.handlePointerUp),dc(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(t){let e=t.parentElement;for(;e;){const n=getComputedStyle(e);(m1.has(n.overflowX)||m1.has(n.overflowY))&&this.scrollPositions.set(e,{x:e.scrollLeft,y:e.scrollTop}),e=e.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const e=this.scrollPositions.get(t);if(!e)return;const n=t===window,a=n?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},o={x:a.x-e.x,y:a.y-e.y};o.x===0&&o.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(t,a),ye.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),ma(this.updatePoint)}}function Mm(s,t){return t?{point:t(s.point)}:s}function g1(s,t){return{x:s.x-t.x,y:s.y-t.y}}function km({point:s},t){return{point:s,delta:g1(s,t_(t)),offset:g1(s,XF(t)),velocity:YF(t,.1)}}function XF(s){return s[0]}function t_(s){return s[s.length-1]}function YF(s,t){if(s.length<2)return{x:0,y:0};let e=s.length-1,n=null;const a=t_(s);for(;e>=0&&(n=s[e],!(a.timestamp-n.timestamp>Si(t)));)e--;if(!n)return{x:0,y:0};const o=ms(a.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const l={x:(a.x-n.x)/o,y:(a.y-n.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function WF(s,{min:t,max:e},n){return t!==void 0&&s<t?s=n?Ce(t,s,n.min):Math.max(s,t):e!==void 0&&s>e&&(s=n?Ce(e,s,n.max):Math.min(s,e)),s}function y1(s,t,e){return{min:t!==void 0?s.min+t:void 0,max:e!==void 0?s.max+e-(s.max-s.min):void 0}}function KF(s,{top:t,left:e,bottom:n,right:a}){return{x:y1(s.x,e,a),y:y1(s.y,t,n)}}function v1(s,t){let e=t.min-s.min,n=t.max-s.max;return t.max-t.min<s.max-s.min&&([e,n]=[n,e]),{min:e,max:n}}function QF(s,t){return{x:v1(s.x,t.x),y:v1(s.y,t.y)}}function ZF(s,t){let e=.5;const n=An(s),a=An(t);return a>n?e=gc(t.min,t.max-n,s.min):n>a&&(e=gc(s.min,s.max-a,t.min)),Ks(0,1,e)}function JF(s,t){const e={};return t.min!==void 0&&(e.min=t.min-s.min),t.max!==void 0&&(e.max=t.max-s.min),e}const Mg=.35;function tB(s=Mg){return s===!1?s=0:s===!0&&(s=Mg),{x:b1(s,"left","right"),y:b1(s,"top","bottom")}}function b1(s,t,e){return{min:x1(s,t),max:x1(s,e)}}function x1(s,t){return typeof s=="number"?s:s[t]||0}const eB=new WeakMap;class nB{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$e(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const o=m=>{e?(this.stopAnimation(),this.snapToCursor(Bc(m).point)):this.pauseAnimation()},l=(m,y)=>{this.stopAnimation();const{drag:x,dragPropagation:A,onDragStart:w}=this.getProps();if(x&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=HO(x),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ps(E=>{let T=this.getAxisMotionValue(E).get()||0;if(Ys.test(T)){const{projection:R}=this.visualElement;if(R&&R.layout){const N=R.layout.layoutBox[E];N&&(T=An(N)*(parseFloat(T)/100))}}this.originPoint[E]=T}),w&&ye.postRender(()=>w(m,y)),Ag(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},c=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y;const{dragPropagation:x,dragDirectionLock:A,onDirectionLock:w,onDrag:C}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:E}=y;if(A&&this.currentDirection===null){this.currentDirection=sB(E),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",y.point,E),this.updateAxis("y",y.point,E),this.visualElement.render(),C&&C(m,y)},d=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y,this.stop(m,y),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>ps(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new JE(t,{onSessionStart:o,onStart:l,onMove:c,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:n,contextWindow:ZE(this.visualElement),element:this.visualElement.current})}stop(t,e){const n=t||this.latestPointerEvent,a=e||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!a||!n)return;const{velocity:l}=a;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&ye.postRender(()=>c(n,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,e,n){const{drag:a}=this.getProps();if(!n||!fd(t,a,this.currentDirection))return;const o=this.getAxisMotionValue(t);let l=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(l=WF(l,this.constraints[t],this.elastic[t])),o.set(l)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;t&&tc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=KF(n.layoutBox,t):this.constraints=!1,this.elastic=tB(e),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&ps(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=JF(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!tc(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=rP(n,a.root,this.visualElement.getTransformPagePoint());let l=QF(a.layout.layoutBox,o);if(e){const c=e(sP(l));this.hasMutatedConstraints=!!c,c&&(l=wE(c))}return l}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:a,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},h=ps(p=>{if(!fd(p,e,this.currentDirection))return;let m=d&&d[p]||{};l&&(m={min:0,max:0});const y=a?200:1e6,x=a?40:1e7,A={type:"inertia",velocity:n?t[p]:0,bounceStiffness:y,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...o,...m};return this.startAxisValueAnimation(p,A)});return Promise.all(h).then(c)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return Ag(this.visualElement,t),n.start(ky(t,n,0,e,this.visualElement,!1))}stopAnimation(){ps(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ps(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),a=n[e];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){ps(e=>{const{drag:n}=this.getProps();if(!fd(e,n,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(e);if(a&&a.layout){const{min:l,max:c}=a.layout.layoutBox[e],d=o.get()||0;o.set(t[e]-Ce(l,c,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!tc(e)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ps(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();a[l]=ZF({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ps(l=>{if(!fd(l,t,null))return;const c=this.getAxisMotionValue(l),{min:d,max:h}=this.constraints[l];c.set(Ce(d,h,a[l]))})}addListeners(){if(!this.visualElement.current)return;eB.set(this.visualElement,this);const t=this.visualElement.current,e=dc(t,"pointerdown",d=>{const{drag:h,dragListener:p=!0}=this.getProps(),m=d.target,y=m!==t&&mE(m);h&&p&&!y&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();tc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,o=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ye.read(n);const l=xc(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(ps(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=d[p].translate,m.set(m.get()+d[p].translate))}),this.visualElement.render())}));return()=>{l(),e(),o(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:l=Mg,dragMomentum:c=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:a,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function fd(s,t,e){return(t===!0||t===s)&&(e===null||e===s)}function sB(s,t=10){let e=null;return Math.abs(s.y)>t?e="y":Math.abs(s.x)>t&&(e="x"),e}class iB extends wa{constructor(t){super(t),this.removeGroupControls=gs,this.removeListeners=gs,this.controls=new nB(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||gs}update(){const{dragControls:t}=this.node.getProps(),{dragControls:e}=this.node.prevProps||{};t!==e&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const w1=s=>(t,e)=>{s&&ye.postRender(()=>s(t,e))};class aB extends wa{constructor(){super(...arguments),this.removePointerDownListener=gs}onPointerDown(t){this.session=new JE(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ZE(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:w1(t),onStart:w1(e),onMove:n,onEnd:(o,l)=>{delete this.session,a&&ye.postRender(()=>a(o,l))}}}mount(){this.removePointerDownListener=dc(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Lm=!1;class rB extends S.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:a}=this.props,{projection:o}=t;o&&(e.group&&e.group.add(o),n&&n.register&&a&&n.register(o),Lm&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Fd.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:a,isPresent:o}=this.props,{projection:l}=n;return l&&(l.isPresent=o,t.layoutDependency!==e&&l.setOptions({...l.options,layoutDependency:e}),Lm=!0,a||t.layoutDependency!==e||e===void 0||t.isPresent!==o?l.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?l.promote():l.relegate()||ye.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Py.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:a}=t;Lm=!0,a&&(a.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function e_(s){const[t,e]=HE(),n=S.useContext(fy);return g.jsx(rB,{...s,layoutGroup:n,switchLayoutGroup:S.useContext(KE),isPresent:t,safeToRemove:e})}const oB={pan:{Feature:aB},drag:{Feature:iB,ProjectionNode:VE,MeasureLayout:e_}};function S1(s,t,e){const{props:n}=s;s.animationState&&n.whileHover&&s.animationState.setActive("whileHover",e==="Start");const a="onHover"+e,o=n[a];o&&ye.postRender(()=>o(t,Bc(t)))}class lB extends wa{mount(){const{current:t}=this.node;t&&(this.unmount=$O(t,(e,n)=>(S1(this.node,n,"Start"),a=>S1(this.node,a,"End"))))}unmount(){}}class cB extends wa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Oc(xc(this.node.current,"focus",()=>this.onFocus()),xc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function A1(s,t,e){const{props:n}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&n.whileTap&&s.animationState.setActive("whileTap",e==="Start");const a="onTap"+(e==="End"?"":e),o=n[a];o&&ye.postRender(()=>o(t,Bc(t)))}class uB extends wa{mount(){const{current:t}=this.node;t&&(this.unmount=XO(t,(e,n)=>(A1(this.node,n,"Start"),(a,{success:o})=>A1(this.node,a,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const kg=new WeakMap,jm=new WeakMap,dB=s=>{const t=kg.get(s.target);t&&t(s)},hB=s=>{s.forEach(dB)};function fB({root:s,...t}){const e=s||document;jm.has(e)||jm.set(e,{});const n=jm.get(e),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(hB,{root:s,...t})),n[a]}function pB(s,t,e){const n=fB(t);return kg.set(s,e),n.observe(s),()=>{kg.delete(s),n.unobserve(s)}}const mB={some:0,all:1};class gB extends wa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:a="some",once:o}=t,l={root:e?e.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:mB[a]},c=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),y=h?p:m;y&&y(d)};return pB(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(yB(t,e))&&this.startObserver()}unmount(){}}function yB({viewport:s={}},{viewport:t={}}={}){return e=>s[e]!==t[e]}const vB={inView:{Feature:gB},tap:{Feature:uB},focus:{Feature:cB},hover:{Feature:lB}},bB={layout:{ProjectionNode:VE,MeasureLayout:e_}},xB={...$F,...vB,...oB,...bB},fa=IF(xB,zF);const wB=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SB=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),C1=s=>{const t=SB(s);return t.charAt(0).toUpperCase()+t.slice(1)},n_=(...s)=>s.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),AB=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var CB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const EB=S.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:l,...c},d)=>S.createElement("svg",{ref:d,...CB,width:t,height:t,stroke:s,strokeWidth:n?Number(e)*24/Number(t):e,className:n_("lucide",a),...!o&&!AB(c)&&{"aria-hidden":"true"},...c},[...l.map(([h,p])=>S.createElement(h,p)),...Array.isArray(o)?o:[o]]));const jt=(s,t)=>{const e=S.forwardRef(({className:n,...a},o)=>S.createElement(EB,{ref:o,iconNode:t,className:n_(`lucide-${wB(C1(s))}`,`lucide-${s}`,n),...a}));return e.displayName=C1(s),e};const _B=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],TB=jt("archive",_B);const RB=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],NB=jt("bell",RB);const DB=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],MB=jt("bold",DB);const kB=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],LB=jt("building-2",kB);const jB=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],OB=jt("calendar",jB);const PB=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],s_=jt("check",PB);const FB=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],wh=jt("chevron-down",FB);const BB=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],IB=jt("chevron-left",BB);const zB=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],UB=jt("chevron-right",zB);const VB=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],i_=jt("chevron-up",VB);const HB=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],$B=jt("chevrons-up-down",HB);const GB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],qB=jt("circle-alert",GB);const XB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],So=jt("circle-check",XB);const YB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],WB=jt("circle-question-mark",YB);const KB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Lg=jt("circle-x",KB);const QB=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],vo=jt("clock",QB);const ZB=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],JB=jt("download",ZB);const t3=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],E1=jt("file-check",t3);const e3=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Fn=jt("file-text",e3);const n3=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M11 18h2",key:"12mj7e"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M9 13v-.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v.5",key:"qbrxap"}]],s3=jt("file-type",n3);const i3=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],a3=jt("funnel",i3);const r3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],o3=jt("globe",r3);const l3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],c3=jt("history",l3);const u3=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],d3=jt("italic",u3);const h3=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],f3=jt("layout-dashboard",h3);const p3=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],m3=jt("link",p3);const g3=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],y3=jt("list-ordered",g3);const v3=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],b3=jt("list",v3);const x3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],w3=jt("log-out",x3);const S3=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],A3=jt("message-square",S3);const C3=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],E3=jt("move",C3);const _3=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],_1=jt("pen-tool",_3);const T3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],a_=jt("plus",T3);const R3=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],N3=jt("printer",R3);const D3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Sh=jt("search",D3);const M3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],k3=jt("send",M3);const L3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],j3=jt("settings",L3);const O3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],P3=jt("shield",O3);const F3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Om=jt("sparkles",F3);const B3=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Pm=jt("square-pen",B3);const I3=[["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-6 0c0 2 1 2 1 3.5V13",key:"i9gjdv"}],["path",{d:"M20 15.5a2.5 2.5 0 0 0-2.5-2.5h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1z",key:"1vzg3v"}],["path",{d:"M5 22h14",key:"ehvnwv"}]],z3=jt("stamp",I3);const U3=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],V3=jt("tag",U3);const H3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],r_=jt("trash-2",H3);const $3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],G3=jt("trending-up",$3);const q3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],X3=jt("upload",q3);const Y3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ec=jt("user",Y3);const W3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ya=jt("users",W3);const K3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ha=jt("x",K3);function o_(s){var t,e,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var a=s.length;for(t=0;t<a;t++)s[t]&&(e=o_(s[t]))&&(n&&(n+=" "),n+=e)}else for(e in s)s[e]&&(n&&(n+=" "),n+=e);return n}function Ho(){for(var s,t,e=0,n="",a=arguments.length;e<a;e++)(s=arguments[e])&&(t=o_(s))&&(n&&(n+=" "),n+=t);return n}const Q3=(s,t)=>{const e=new Array(s.length+t.length);for(let n=0;n<s.length;n++)e[n]=s[n];for(let n=0;n<t.length;n++)e[s.length+n]=t[n];return e},Z3=(s,t)=>({classGroupId:s,validator:t}),l_=(s=new Map,t=null,e)=>({nextPart:s,validators:t,classGroupId:e}),th="-",T1=[],J3="arbitrary..",tI=s=>{const t=nI(s),{conflictingClassGroups:e,conflictingClassGroupModifiers:n}=s;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return eI(l);const c=l.split(th),d=c[0]===""&&c.length>1?1:0;return c_(c,d,t)},getConflictingClassGroupIds:(l,c)=>{if(c){const d=n[l],h=e[l];return d?h?Q3(h,d):d:h||T1}return e[l]||T1}}},c_=(s,t,e)=>{if(s.length-t===0)return e.classGroupId;const a=s[t],o=e.nextPart.get(a);if(o){const h=c_(s,t+1,o);if(h)return h}const l=e.validators;if(l===null)return;const c=t===0?s.join(th):s.slice(t).join(th),d=l.length;for(let h=0;h<d;h++){const p=l[h];if(p.validator(c))return p.classGroupId}},eI=s=>s.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=s.slice(1,-1),e=t.indexOf(":"),n=t.slice(0,e);return n?J3+n:void 0})(),nI=s=>{const{theme:t,classGroups:e}=s;return sI(e,t)},sI=(s,t)=>{const e=l_();for(const n in s){const a=s[n];Gy(a,e,n,t)}return e},Gy=(s,t,e,n)=>{const a=s.length;for(let o=0;o<a;o++){const l=s[o];iI(l,t,e,n)}},iI=(s,t,e,n)=>{if(typeof s=="string"){aI(s,t,e);return}if(typeof s=="function"){rI(s,t,e,n);return}oI(s,t,e,n)},aI=(s,t,e)=>{const n=s===""?t:u_(t,s);n.classGroupId=e},rI=(s,t,e,n)=>{if(lI(s)){Gy(s(n),t,e,n);return}t.validators===null&&(t.validators=[]),t.validators.push(Z3(e,s))},oI=(s,t,e,n)=>{const a=Object.entries(s),o=a.length;for(let l=0;l<o;l++){const[c,d]=a[l];Gy(d,u_(t,c),e,n)}},u_=(s,t)=>{let e=s;const n=t.split(th),a=n.length;for(let o=0;o<a;o++){const l=n[o];let c=e.nextPart.get(l);c||(c=l_(),e.nextPart.set(l,c)),e=c}return e},lI=s=>"isThemeGetter"in s&&s.isThemeGetter===!0,cI=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,e=Object.create(null),n=Object.create(null);const a=(o,l)=>{e[o]=l,t++,t>s&&(t=0,n=e,e=Object.create(null))};return{get(o){let l=e[o];if(l!==void 0)return l;if((l=n[o])!==void 0)return a(o,l),l},set(o,l){o in e?e[o]=l:a(o,l)}}},jg="!",R1=":",uI=[],N1=(s,t,e,n,a)=>({modifiers:s,hasImportantModifier:t,baseClassName:e,maybePostfixModifierPosition:n,isExternal:a}),dI=s=>{const{prefix:t,experimentalParseClassName:e}=s;let n=a=>{const o=[];let l=0,c=0,d=0,h;const p=a.length;for(let w=0;w<p;w++){const C=a[w];if(l===0&&c===0){if(C===R1){o.push(a.slice(d,w)),d=w+1;continue}if(C==="/"){h=w;continue}}C==="["?l++:C==="]"?l--:C==="("?c++:C===")"&&c--}const m=o.length===0?a:a.slice(d);let y=m,x=!1;m.endsWith(jg)?(y=m.slice(0,-1),x=!0):m.startsWith(jg)&&(y=m.slice(1),x=!0);const A=h&&h>d?h-d:void 0;return N1(o,x,y,A)};if(t){const a=t+R1,o=n;n=l=>l.startsWith(a)?o(l.slice(a.length)):N1(uI,!1,l,void 0,!0)}if(e){const a=n;n=o=>e({className:o,parseClassName:a})}return n},hI=s=>{const t=new Map;return s.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{const n=[];let a=[];for(let o=0;o<e.length;o++){const l=e[o],c=l[0]==="[",d=t.has(l);c||d?(a.length>0&&(a.sort(),n.push(...a),a=[]),n.push(l)):a.push(l)}return a.length>0&&(a.sort(),n.push(...a)),n}},fI=s=>({cache:cI(s.cacheSize),parseClassName:dI(s),sortModifiers:hI(s),...tI(s)}),pI=/\s+/,mI=(s,t)=>{const{parseClassName:e,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:o}=t,l=[],c=s.trim().split(pI);let d="";for(let h=c.length-1;h>=0;h-=1){const p=c[h],{isExternal:m,modifiers:y,hasImportantModifier:x,baseClassName:A,maybePostfixModifierPosition:w}=e(p);if(m){d=p+(d.length>0?" "+d:d);continue}let C=!!w,E=n(C?A.substring(0,w):A);if(!E){if(!C){d=p+(d.length>0?" "+d:d);continue}if(E=n(A),!E){d=p+(d.length>0?" "+d:d);continue}C=!1}const T=y.length===0?"":y.length===1?y[0]:o(y).join(":"),R=x?T+jg:T,N=R+E;if(l.indexOf(N)>-1)continue;l.push(N);const D=a(E,C);for(let L=0;L<D.length;++L){const k=D[L];l.push(R+k)}d=p+(d.length>0?" "+d:d)}return d},gI=(...s)=>{let t=0,e,n,a="";for(;t<s.length;)(e=s[t++])&&(n=d_(e))&&(a&&(a+=" "),a+=n);return a},d_=s=>{if(typeof s=="string")return s;let t,e="";for(let n=0;n<s.length;n++)s[n]&&(t=d_(s[n]))&&(e&&(e+=" "),e+=t);return e},yI=(s,...t)=>{let e,n,a,o;const l=d=>{const h=t.reduce((p,m)=>m(p),s());return e=fI(h),n=e.cache.get,a=e.cache.set,o=c,c(d)},c=d=>{const h=n(d);if(h)return h;const p=mI(d,e);return a(d,p),p};return o=l,(...d)=>o(gI(...d))},vI=[],He=s=>{const t=e=>e[s]||vI;return t.isThemeGetter=!0,t},h_=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,f_=/^\((?:(\w[\w-]*):)?(.+)\)$/i,bI=/^\d+\/\d+$/,xI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,wI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,SI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,AI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,CI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,io=s=>bI.test(s),Vt=s=>!!s&&!Number.isNaN(Number(s)),na=s=>!!s&&Number.isInteger(Number(s)),Fm=s=>s.endsWith("%")&&Vt(s.slice(0,-1)),vi=s=>xI.test(s),EI=()=>!0,_I=s=>wI.test(s)&&!SI.test(s),p_=()=>!1,TI=s=>AI.test(s),RI=s=>CI.test(s),NI=s=>!St(s)&&!At(s),DI=s=>$o(s,y_,p_),St=s=>h_.test(s),Ga=s=>$o(s,v_,_I),Bm=s=>$o(s,OI,Vt),D1=s=>$o(s,m_,p_),MI=s=>$o(s,g_,RI),pd=s=>$o(s,b_,TI),At=s=>f_.test(s),Xl=s=>Go(s,v_),kI=s=>Go(s,PI),M1=s=>Go(s,m_),LI=s=>Go(s,y_),jI=s=>Go(s,g_),md=s=>Go(s,b_,!0),$o=(s,t,e)=>{const n=h_.exec(s);return n?n[1]?t(n[1]):e(n[2]):!1},Go=(s,t,e=!1)=>{const n=f_.exec(s);return n?n[1]?t(n[1]):e:!1},m_=s=>s==="position"||s==="percentage",g_=s=>s==="image"||s==="url",y_=s=>s==="length"||s==="size"||s==="bg-size",v_=s=>s==="length",OI=s=>s==="number",PI=s=>s==="family-name",b_=s=>s==="shadow",FI=()=>{const s=He("color"),t=He("font"),e=He("text"),n=He("font-weight"),a=He("tracking"),o=He("leading"),l=He("breakpoint"),c=He("container"),d=He("spacing"),h=He("radius"),p=He("shadow"),m=He("inset-shadow"),y=He("text-shadow"),x=He("drop-shadow"),A=He("blur"),w=He("perspective"),C=He("aspect"),E=He("ease"),T=He("animate"),R=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...N(),At,St],L=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],j=()=>[At,St,d],P=()=>[io,"full","auto",...j()],U=()=>[na,"none","subgrid",At,St],H=()=>["auto",{span:["full",na,At,St]},na,At,St],J=()=>[na,"auto",At,St],at=()=>["auto","min","max","fr",At,St],q=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],rt=()=>["start","end","center","stretch","center-safe","end-safe"],O=()=>["auto",...j()],B=()=>[io,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...j()],I=()=>[s,At,St],Y=()=>[...N(),M1,D1,{position:[At,St]}],ft=()=>["no-repeat",{repeat:["","x","y","space","round"]}],F=()=>["auto","cover","contain",LI,DI,{size:[At,St]}],G=()=>[Fm,Xl,Ga],tt=()=>["","none","full",h,At,St],lt=()=>["",Vt,Xl,Ga],mt=()=>["solid","dashed","dotted","double"],st=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],et=()=>[Vt,Fm,M1,D1],yt=()=>["","none",A,At,St],vt=()=>["none",Vt,At,St],Tt=()=>["none",Vt,At,St],X=()=>[Vt,At,St],ut=()=>[io,"full",...j()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[vi],breakpoint:[vi],color:[EI],container:[vi],"drop-shadow":[vi],ease:["in","out","in-out"],font:[NI],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[vi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[vi],shadow:[vi],spacing:["px",Vt],text:[vi],"text-shadow":[vi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",io,St,At,C]}],container:["container"],columns:[{columns:[Vt,St,At,c]}],"break-after":[{"break-after":R()}],"break-before":[{"break-before":R()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[na,"auto",At,St]}],basis:[{basis:[io,"full","auto",c,...j()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Vt,io,"auto","initial","none",St]}],grow:[{grow:["",Vt,At,St]}],shrink:[{shrink:["",Vt,At,St]}],order:[{order:[na,"first","last","none",At,St]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:H()}],"col-start":[{"col-start":J()}],"col-end":[{"col-end":J()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:H()}],"row-start":[{"row-start":J()}],"row-end":[{"row-end":J()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":at()}],"auto-rows":[{"auto-rows":at()}],gap:[{gap:j()}],"gap-x":[{"gap-x":j()}],"gap-y":[{"gap-y":j()}],"justify-content":[{justify:[...q(),"normal"]}],"justify-items":[{"justify-items":[...rt(),"normal"]}],"justify-self":[{"justify-self":["auto",...rt()]}],"align-content":[{content:["normal",...q()]}],"align-items":[{items:[...rt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...rt(),{baseline:["","last"]}]}],"place-content":[{"place-content":q()}],"place-items":[{"place-items":[...rt(),"baseline"]}],"place-self":[{"place-self":["auto",...rt()]}],p:[{p:j()}],px:[{px:j()}],py:[{py:j()}],ps:[{ps:j()}],pe:[{pe:j()}],pt:[{pt:j()}],pr:[{pr:j()}],pb:[{pb:j()}],pl:[{pl:j()}],m:[{m:O()}],mx:[{mx:O()}],my:[{my:O()}],ms:[{ms:O()}],me:[{me:O()}],mt:[{mt:O()}],mr:[{mr:O()}],mb:[{mb:O()}],ml:[{ml:O()}],"space-x":[{"space-x":j()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":j()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],w:[{w:[c,"screen",...B()]}],"min-w":[{"min-w":[c,"screen","none",...B()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[l]},...B()]}],h:[{h:["screen","lh",...B()]}],"min-h":[{"min-h":["screen","lh","none",...B()]}],"max-h":[{"max-h":["screen","lh",...B()]}],"font-size":[{text:["base",e,Xl,Ga]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,At,Bm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Fm,St]}],"font-family":[{font:[kI,St,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,At,St]}],"line-clamp":[{"line-clamp":[Vt,"none",At,Bm]}],leading:[{leading:[o,...j()]}],"list-image":[{"list-image":["none",At,St]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",At,St]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:I()}],"text-color":[{text:I()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...mt(),"wavy"]}],"text-decoration-thickness":[{decoration:[Vt,"from-font","auto",At,Ga]}],"text-decoration-color":[{decoration:I()}],"underline-offset":[{"underline-offset":[Vt,"auto",At,St]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",At,St]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",At,St]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Y()}],"bg-repeat":[{bg:ft()}],"bg-size":[{bg:F()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},na,At,St],radial:["",At,St],conic:[na,At,St]},jI,MI]}],"bg-color":[{bg:I()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:I()}],"gradient-via":[{via:I()}],"gradient-to":[{to:I()}],rounded:[{rounded:tt()}],"rounded-s":[{"rounded-s":tt()}],"rounded-e":[{"rounded-e":tt()}],"rounded-t":[{"rounded-t":tt()}],"rounded-r":[{"rounded-r":tt()}],"rounded-b":[{"rounded-b":tt()}],"rounded-l":[{"rounded-l":tt()}],"rounded-ss":[{"rounded-ss":tt()}],"rounded-se":[{"rounded-se":tt()}],"rounded-ee":[{"rounded-ee":tt()}],"rounded-es":[{"rounded-es":tt()}],"rounded-tl":[{"rounded-tl":tt()}],"rounded-tr":[{"rounded-tr":tt()}],"rounded-br":[{"rounded-br":tt()}],"rounded-bl":[{"rounded-bl":tt()}],"border-w":[{border:lt()}],"border-w-x":[{"border-x":lt()}],"border-w-y":[{"border-y":lt()}],"border-w-s":[{"border-s":lt()}],"border-w-e":[{"border-e":lt()}],"border-w-t":[{"border-t":lt()}],"border-w-r":[{"border-r":lt()}],"border-w-b":[{"border-b":lt()}],"border-w-l":[{"border-l":lt()}],"divide-x":[{"divide-x":lt()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":lt()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...mt(),"hidden","none"]}],"divide-style":[{divide:[...mt(),"hidden","none"]}],"border-color":[{border:I()}],"border-color-x":[{"border-x":I()}],"border-color-y":[{"border-y":I()}],"border-color-s":[{"border-s":I()}],"border-color-e":[{"border-e":I()}],"border-color-t":[{"border-t":I()}],"border-color-r":[{"border-r":I()}],"border-color-b":[{"border-b":I()}],"border-color-l":[{"border-l":I()}],"divide-color":[{divide:I()}],"outline-style":[{outline:[...mt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Vt,At,St]}],"outline-w":[{outline:["",Vt,Xl,Ga]}],"outline-color":[{outline:I()}],shadow:[{shadow:["","none",p,md,pd]}],"shadow-color":[{shadow:I()}],"inset-shadow":[{"inset-shadow":["none",m,md,pd]}],"inset-shadow-color":[{"inset-shadow":I()}],"ring-w":[{ring:lt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:I()}],"ring-offset-w":[{"ring-offset":[Vt,Ga]}],"ring-offset-color":[{"ring-offset":I()}],"inset-ring-w":[{"inset-ring":lt()}],"inset-ring-color":[{"inset-ring":I()}],"text-shadow":[{"text-shadow":["none",y,md,pd]}],"text-shadow-color":[{"text-shadow":I()}],opacity:[{opacity:[Vt,At,St]}],"mix-blend":[{"mix-blend":[...st(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":st()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Vt]}],"mask-image-linear-from-pos":[{"mask-linear-from":et()}],"mask-image-linear-to-pos":[{"mask-linear-to":et()}],"mask-image-linear-from-color":[{"mask-linear-from":I()}],"mask-image-linear-to-color":[{"mask-linear-to":I()}],"mask-image-t-from-pos":[{"mask-t-from":et()}],"mask-image-t-to-pos":[{"mask-t-to":et()}],"mask-image-t-from-color":[{"mask-t-from":I()}],"mask-image-t-to-color":[{"mask-t-to":I()}],"mask-image-r-from-pos":[{"mask-r-from":et()}],"mask-image-r-to-pos":[{"mask-r-to":et()}],"mask-image-r-from-color":[{"mask-r-from":I()}],"mask-image-r-to-color":[{"mask-r-to":I()}],"mask-image-b-from-pos":[{"mask-b-from":et()}],"mask-image-b-to-pos":[{"mask-b-to":et()}],"mask-image-b-from-color":[{"mask-b-from":I()}],"mask-image-b-to-color":[{"mask-b-to":I()}],"mask-image-l-from-pos":[{"mask-l-from":et()}],"mask-image-l-to-pos":[{"mask-l-to":et()}],"mask-image-l-from-color":[{"mask-l-from":I()}],"mask-image-l-to-color":[{"mask-l-to":I()}],"mask-image-x-from-pos":[{"mask-x-from":et()}],"mask-image-x-to-pos":[{"mask-x-to":et()}],"mask-image-x-from-color":[{"mask-x-from":I()}],"mask-image-x-to-color":[{"mask-x-to":I()}],"mask-image-y-from-pos":[{"mask-y-from":et()}],"mask-image-y-to-pos":[{"mask-y-to":et()}],"mask-image-y-from-color":[{"mask-y-from":I()}],"mask-image-y-to-color":[{"mask-y-to":I()}],"mask-image-radial":[{"mask-radial":[At,St]}],"mask-image-radial-from-pos":[{"mask-radial-from":et()}],"mask-image-radial-to-pos":[{"mask-radial-to":et()}],"mask-image-radial-from-color":[{"mask-radial-from":I()}],"mask-image-radial-to-color":[{"mask-radial-to":I()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[Vt]}],"mask-image-conic-from-pos":[{"mask-conic-from":et()}],"mask-image-conic-to-pos":[{"mask-conic-to":et()}],"mask-image-conic-from-color":[{"mask-conic-from":I()}],"mask-image-conic-to-color":[{"mask-conic-to":I()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Y()}],"mask-repeat":[{mask:ft()}],"mask-size":[{mask:F()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",At,St]}],filter:[{filter:["","none",At,St]}],blur:[{blur:yt()}],brightness:[{brightness:[Vt,At,St]}],contrast:[{contrast:[Vt,At,St]}],"drop-shadow":[{"drop-shadow":["","none",x,md,pd]}],"drop-shadow-color":[{"drop-shadow":I()}],grayscale:[{grayscale:["",Vt,At,St]}],"hue-rotate":[{"hue-rotate":[Vt,At,St]}],invert:[{invert:["",Vt,At,St]}],saturate:[{saturate:[Vt,At,St]}],sepia:[{sepia:["",Vt,At,St]}],"backdrop-filter":[{"backdrop-filter":["","none",At,St]}],"backdrop-blur":[{"backdrop-blur":yt()}],"backdrop-brightness":[{"backdrop-brightness":[Vt,At,St]}],"backdrop-contrast":[{"backdrop-contrast":[Vt,At,St]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Vt,At,St]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Vt,At,St]}],"backdrop-invert":[{"backdrop-invert":["",Vt,At,St]}],"backdrop-opacity":[{"backdrop-opacity":[Vt,At,St]}],"backdrop-saturate":[{"backdrop-saturate":[Vt,At,St]}],"backdrop-sepia":[{"backdrop-sepia":["",Vt,At,St]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":j()}],"border-spacing-x":[{"border-spacing-x":j()}],"border-spacing-y":[{"border-spacing-y":j()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",At,St]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Vt,"initial",At,St]}],ease:[{ease:["linear","initial",E,At,St]}],delay:[{delay:[Vt,At,St]}],animate:[{animate:["none",T,At,St]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,At,St]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:vt()}],"rotate-x":[{"rotate-x":vt()}],"rotate-y":[{"rotate-y":vt()}],"rotate-z":[{"rotate-z":vt()}],scale:[{scale:Tt()}],"scale-x":[{"scale-x":Tt()}],"scale-y":[{"scale-y":Tt()}],"scale-z":[{"scale-z":Tt()}],"scale-3d":["scale-3d"],skew:[{skew:X()}],"skew-x":[{"skew-x":X()}],"skew-y":[{"skew-y":X()}],transform:[{transform:[At,St,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ut()}],"translate-x":[{"translate-x":ut()}],"translate-y":[{"translate-y":ut()}],"translate-z":[{"translate-z":ut()}],"translate-none":["translate-none"],accent:[{accent:I()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:I()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",At,St]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",At,St]}],fill:[{fill:["none",...I()]}],"stroke-w":[{stroke:[Vt,Xl,Ga,Bm]}],stroke:[{stroke:["none",...I()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},BI=yI(FI);function Zt(...s){return BI(Ho(s))}function II({currentPage:s,onNavigate:t}){const{t:e}=Ns(),n=[{id:"dashboard",label:e("navigation.dashboard"),icon:f3},{id:"documents",label:e("navigation.documents"),icon:Fn}];return g.jsxs("aside",{className:"w-64 border-r bg-white flex flex-col shrink-0",children:[g.jsxs("div",{className:"h-14 px-4 border-b flex items-center gap-3",children:[g.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:g.jsx(Fn,{className:"w-4 h-4 text-primary-foreground"})}),g.jsxs("div",{children:[g.jsx("h1",{className:"font-bold text-base leading-tight",children:e("app.name")}),g.jsx("p",{className:"text-xs text-muted-foreground leading-tight",children:e("app.subtitle")})]})]}),g.jsxs("nav",{className:"flex-1 p-3 space-y-1",children:[n.map(a=>g.jsxs("button",{onClick:()=>t(a.id),className:Zt("w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors",s===a.id?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"),children:[g.jsx(a.icon,{className:"w-5 h-5"}),a.label]},a.id)),g.jsxs("div",{className:"pt-4 mt-4 border-t",children:[g.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted transition-colors",children:[g.jsx(j3,{className:"w-5 h-5"}),e("common.settings")]}),g.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted transition-colors",children:[g.jsx(WB,{className:"w-5 h-5"}),e("common.help")]})]})]})]})}class zI{baseURL;constructor(){this.baseURL=window.location.origin}async call(t,e){const n=await fetch(`${this.baseURL}/api/method/${t}`,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":this.getCSRFToken()},body:JSON.stringify(e||{})});if(!n.ok)throw new Error(`API call failed: ${n.statusText}`);return(await n.json()).message}async getDocuments(t){return this.call("edo.edo.doctype.edo_document.edo_document.get_portal_documents",t||{})}async getDocument(t){const e=await fetch(`${this.baseURL}/api/method/edo.edo.doctype.edo_document.edo_document.get_document`,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":this.getCSRFToken()},body:JSON.stringify({name:t})});if(!e.ok)throw new Error(`Failed to fetch document: ${e.statusText}`);return(await e.json()).message}async getCurrentUser(){const t=await fetch(`${this.baseURL}/api/method/frappe.auth.get_logged_user`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!t.ok)throw new Error(`Failed to get user: ${t.statusText}`);const n=(await t.json()).message,a=await fetch(`${this.baseURL}/api/resource/User/${n}`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!a.ok)return{name:n,full_name:n,email:n};const o=await a.json();let l=[];try{l=await this.call("edo.edo.doctype.edo_document.edo_document.get_user_roles")}catch(c){console.warn("Failed to get user roles:",c)}return{name:o.data.name,full_name:o.data.full_name||o.data.name,email:o.data.email,user_image:o.data.user_image,roles:l}}async logout(){await fetch(`${this.baseURL}/api/method/logout`,{method:"POST",headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}}),window.location.href="/login"}async getComments(t,e){return this.call("edo.edo.doctype.edo_document.edo_document.get_comments",{doctype:t,docname:e})}async addComment(t,e,n){return this.call("edo.edo.doctype.edo_document.edo_document.add_comment",{doctype:t,docname:e,content:n})}async deleteComment(t){return this.call("edo.edo.doctype.edo_document.edo_document.delete_comment",{comment_name:t})}async getCorrespondents(){const t=await fetch(`${this.baseURL}/api/resource/EDO Correspondent?fields=["name","correspondent_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!t.ok)throw new Error("Failed to fetch correspondents");return(await t.json()).data}async getDocumentTypes(){const t=await fetch(`${this.baseURL}/api/resource/EDO Document Type?fields=["name","document_type_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!t.ok)throw new Error("Failed to fetch document types");return(await t.json()).data}async getPriorities(){const t=await fetch(`${this.baseURL}/api/resource/EDO Priority?fields=["name","priority_name","weight"]&limit_page_length=999&order_by=weight desc`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!t.ok)throw new Error("Failed to fetch priorities");return(await t.json()).data}async getStatuses(){const t=await fetch(`${this.baseURL}/api/resource/EDO Status?fields=["name","status_name","color"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!t.ok)throw new Error("Failed to fetch statuses");return(await t.json()).data}async getClassifications(){const t=await fetch(`${this.baseURL}/api/resource/EDO Classification?fields=["name","classification_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!t.ok)throw new Error("Failed to fetch classifications");return(await t.json()).data}async getDeliveryMethods(){const t=await fetch(`${this.baseURL}/api/resource/EDO Delivery Method?fields=["name","delivery_method_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!t.ok)throw new Error("Failed to fetch delivery methods");return(await t.json()).data}async getUsers(){return this.call("edo.edo.doctype.edo_document.edo_document.get_users_list")}async getReceptionOffices(){const t=await fetch(`${this.baseURL}/api/resource/EDO Reception Office?fields=["name","reception_office_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!t.ok)throw new Error("Failed to fetch reception offices");return(await t.json()).data}async createDocument(t){return this.call("edo.edo.doctype.edo_document.edo_document.create_document",t)}async updateDocument(t,e){return this.call("edo.edo.doctype.edo_document.edo_document.update_document",{name:t,...e})}async canEditDocument(){return this.call("edo.edo.doctype.edo_document.edo_document.can_edit_document")}async directorApproveDocument(t,e){return this.call("edo.edo.doctype.edo_document.edo_document.director_approve_document",{name:t,comment:e})}async directorRejectDocument(t,e){return this.call("edo.edo.doctype.edo_document.edo_document.director_reject_document",{name:t,comment:e})}async executorSignDocument(t,e){return this.call("edo.edo.doctype.edo_document.edo_document.executor_sign_document",{name:t,comment:e})}async canDirectorApprove(){return this.call("edo.edo.doctype.edo_document.edo_document.can_director_approve")}async canExecutorSign(t){return this.call("edo.edo.doctype.edo_document.edo_document.can_executor_sign",{name:t})}async uploadFile(t){const e=new FormData;e.append("file",t),e.append("is_private","0");const n=await fetch(`${this.baseURL}/api/method/upload_file`,{method:"POST",headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()},body:e});if(!n.ok)throw new Error("Failed to upload file");return(await n.json()).message.file_url}async getStamps(){return this.call("edo.edo.doctype.edo_document.edo_document.get_stamps")}async getStampPreview(t,e){return this.call("edo.edo.doctype.edo_stamp.edo_stamp.get_stamp_preview",{stamp_name:t,document_name:e})}async getPdfInfo(t){return this.call("edo.edo.doctype.edo_document.edo_document.get_pdf_info",{document_name:t})}async applyStamps(t,e){return this.call("edo.edo.doctype.edo_document.edo_document.apply_stamps_to_pdf",{document_name:t,stamps:JSON.stringify(e)})}async canReceptionSubmit(){return this.call("edo.edo.doctype.edo_document.edo_document.can_reception_submit")}async receptionSubmitToDirector(t,e,n,a,o){return this.call("edo.edo.doctype.edo_document.edo_document.reception_submit_to_director",{name:t,resolution:e,resolution_text:n,executor:a,co_executors:o?JSON.stringify(o):void 0})}async getResolutions(){const t=await fetch(`${this.baseURL}/api/resource/EDO Resolution?fields=["name","resolution_name","resolution_text","is_active"]&filters=[["is_active","=",1]]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!t.ok)throw new Error("Failed to fetch resolutions");return(await t.json()).data}getCSRFToken(){return document.cookie.split("; ").find(e=>e.startsWith("csrf_token="))?.split("=")[1]||""}}const kt=new zI,k1=[{code:"ru",label:""},{code:"en",label:"English"},{code:"uz",label:"O'zbek"}];function UI(){const{i18n:s}=Ns(),[t,e]=S.useState(!1),n=S.useRef(null),a=o=>{s.changeLanguage(o),localStorage.setItem("i18nextLng",o),e(!1)};return S.useEffect(()=>{const o=l=>{n.current&&!n.current.contains(l.target)&&e(!1)};return t&&document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[t]),g.jsxs("div",{className:"relative",ref:n,children:[g.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 px-3 py-2 text-sm text-muted-foreground hover:text-foreground hover:bg-muted rounded-lg transition-colors",children:[g.jsx(o3,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden md:inline",children:k1.find(o=>o.code===s.language)?.label||""})]}),t&&g.jsx("div",{className:"absolute right-0 top-full mt-1 w-40 bg-white border rounded-lg shadow-lg z-20 py-1",children:k1.map(o=>g.jsx("button",{onClick:()=>a(o.code),className:Zt("w-full text-left px-4 py-2 text-sm hover:bg-muted transition-colors",s.language===o.code&&"bg-primary/10 text-primary font-medium"),children:o.label},o.code))})]})}function x_({title:s,subtitle:t}){const{t:e}=Ns(),[n,a]=S.useState(null),[o,l]=S.useState(!1);S.useEffect(()=>{c()},[]);const c=async()=>{try{const p=await kt.getCurrentUser();a(p)}catch(p){console.error("Failed to load user:",p)}},d=async()=>{try{await kt.logout()}catch(p){console.error("Failed to logout:",p),window.location.href="/login"}},h=p=>p&&p.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2)||"U";return g.jsxs("header",{className:"h-14 border-b bg-white flex items-center justify-between px-6 shrink-0",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-lg font-semibold",children:s}),t&&g.jsx("p",{className:"text-xs text-muted-foreground",children:t})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{className:"p-2 text-muted-foreground hover:text-foreground hover:bg-muted rounded-lg transition-colors",children:g.jsx(Sh,{className:"w-5 h-5"})}),g.jsxs("button",{className:"p-2 text-muted-foreground hover:text-foreground hover:bg-muted rounded-lg transition-colors relative",children:[g.jsx(NB,{className:"w-5 h-5"}),g.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full"})]}),g.jsx(UI,{}),g.jsx("div",{className:"w-px h-8 bg-border mx-2"}),g.jsxs("div",{className:"relative",children:[g.jsxs("button",{onClick:()=>l(!o),className:"flex items-center gap-2 hover:bg-muted rounded-lg px-2 py-1.5 transition-colors",children:[n?.user_image?g.jsx("img",{src:n.user_image,alt:n.full_name,className:"w-8 h-8 rounded-full object-cover"}):g.jsx("div",{className:"w-8 h-8 bg-primary/10 text-primary rounded-full flex items-center justify-center text-sm font-medium",children:n?h(n.full_name):g.jsx(ec,{className:"w-4 h-4"})}),g.jsx("span",{className:"text-sm font-medium hidden md:block max-w-32 truncate",children:n?.full_name||e("common.loading")}),g.jsx(wh,{className:"w-4 h-4 text-muted-foreground"})]}),o&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>l(!1)}),g.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-white border rounded-lg shadow-lg z-20 py-1",children:[g.jsxs("div",{className:"px-4 py-2 border-b",children:[g.jsx("p",{className:"text-sm font-medium truncate",children:n?.full_name}),g.jsx("p",{className:"text-xs text-muted-foreground truncate",children:n?.email}),n?.roles&&n.roles.length>0&&g.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:n.roles.filter(p=>p.startsWith("EDO")).map(p=>g.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${p==="EDO Admin"?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:p.replace("EDO ","")},p))})]}),g.jsxs("button",{onClick:d,className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[g.jsx(w3,{className:"w-4 h-4"}),e("common.logout")]})]})]})]})]})]})}const ir=S.forwardRef(({className:s,...t},e)=>g.jsx("div",{ref:e,className:Zt("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));ir.displayName="Card";const Ao=S.forwardRef(({className:s,...t},e)=>g.jsx("div",{ref:e,className:Zt("flex flex-col space-y-1.5 p-6",s),...t}));Ao.displayName="CardHeader";const Co=S.forwardRef(({className:s,...t},e)=>g.jsx("h3",{ref:e,className:Zt("text-2xl font-semibold leading-none tracking-tight",s),...t}));Co.displayName="CardTitle";const VI=S.forwardRef(({className:s,...t},e)=>g.jsx("p",{ref:e,className:Zt("text-sm text-muted-foreground",s),...t}));VI.displayName="CardDescription";const ar=S.forwardRef(({className:s,...t},e)=>g.jsx("div",{ref:e,className:Zt("p-6 pt-0",s),...t}));ar.displayName="CardContent";const HI=S.forwardRef(({className:s,...t},e)=>g.jsx("div",{ref:e,className:Zt("flex items-center p-6 pt-0",s),...t}));HI.displayName="CardFooter";function $I({documents:s,onNavigateToDocuments:t}){const{t:e}=Ns(),n=s.length,a=s.filter(p=>p.status===e("documents.status.pending")||p.status===" ").length,o=s.filter(p=>p.status===e("documents.status.signed")||p.status==="").length,l=s.filter(p=>p.status===e("documents.status.archived")||p.status==="").length,c=[{title:e("dashboard.stats.total"),value:n,icon:Fn,color:"text-blue-600",bgColor:"bg-blue-50"},{title:e("dashboard.stats.pending"),value:a,icon:vo,color:"text-orange-600",bgColor:"bg-orange-50"},{title:e("dashboard.stats.signed"),value:o,icon:So,color:"text-green-600",bgColor:"bg-green-50"},{title:e("dashboard.stats.archived"),value:l,icon:TB,color:"text-gray-600",bgColor:"bg-gray-50"}],d=[...s].sort((p,m)=>{const y=p.creation?new Date(p.creation).getTime():0;return(m.creation?new Date(m.creation).getTime():0)-y}).slice(0,5),h=s.filter(p=>p.status===e("documents.status.pending")||p.status===" ").slice(0,5);return g.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:g.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold",children:e("dashboard.title")}),g.jsx("p",{className:"text-muted-foreground",children:e("dashboard.subtitle")})]}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:c.map(p=>g.jsx(ir,{children:g.jsx(ar,{className:"p-4",children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:`p-3 rounded-lg ${p.bgColor}`,children:g.jsx(p.icon,{className:`w-6 h-6 ${p.color}`})}),g.jsxs("div",{children:[g.jsx("p",{className:"text-2xl font-bold",children:p.value}),g.jsx("p",{className:"text-sm text-muted-foreground",children:p.title})]})]})})},p.title))}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[g.jsxs(ir,{children:[g.jsx(Ao,{className:"pb-3",children:g.jsxs(Co,{className:"text-lg flex items-center gap-2",children:[g.jsx(vo,{className:"w-5 h-5 text-orange-500"}),e("dashboard.pendingSignatures")]})}),g.jsx(ar,{children:h.length===0?g.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:e("dashboard.noPending")}):g.jsx("div",{className:"space-y-3",children:h.map(p=>g.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg cursor-pointer hover:bg-orange-100 transition-colors",onClick:t,children:[g.jsxs("div",{className:"min-w-0 flex-1",children:[g.jsx("p",{className:"font-medium text-sm truncate",children:p.title}),g.jsx("p",{className:"text-xs text-muted-foreground",children:p.document_type})]}),g.jsx("div",{className:"text-xs text-orange-600 shrink-0 ml-2",children:e("dashboard.waiting")})]},p.name))})})]}),g.jsxs(ir,{children:[g.jsx(Ao,{className:"pb-3",children:g.jsxs(Co,{className:"text-lg flex items-center gap-2",children:[g.jsx(G3,{className:"w-5 h-5 text-blue-500"}),e("dashboard.recentDocuments")]})}),g.jsx(ar,{children:d.length===0?g.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:e("dashboard.noDocuments")}):g.jsx("div",{className:"space-y-3",children:d.map(p=>g.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg cursor-pointer hover:bg-muted transition-colors",onClick:t,children:[g.jsxs("div",{className:"min-w-0 flex-1",children:[g.jsx("p",{className:"font-medium text-sm truncate",children:p.title}),g.jsx("p",{className:"text-xs text-muted-foreground",children:p.creation&&new Date(p.creation).toLocaleDateString("ru-RU")})]}),g.jsx("div",{className:`text-xs shrink-0 ml-2 px-2 py-1 rounded ${p.status===e("documents.status.signed")||p.status===""?"bg-green-100 text-green-700":p.status===e("documents.status.pending")||p.status===" "?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-700"}`,children:p.status})]},p.name))})})]})]})]})})}function GI({documents:s,onNavigateToDocuments:t}){const{t:e}=Ns();return g.jsxs(g.Fragment,{children:[g.jsx(x_,{title:e("dashboard.title"),subtitle:e("dashboard.subtitle")}),g.jsx(fa.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex-1",children:g.jsx($I,{documents:s,onNavigateToDocuments:t})},"dashboard")]})}const L1=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,j1=Ho,qy=(s,t)=>e=>{var n;if(t?.variants==null)return j1(s,e?.class,e?.className);const{variants:a,defaultVariants:o}=t,l=Object.keys(a).map(h=>{const p=e?.[h],m=o?.[h];if(p===null)return null;const y=L1(p)||L1(m);return a[h][y]}),c=e&&Object.entries(e).reduce((h,p)=>{let[m,y]=p;return y===void 0||(h[m]=y),h},{}),d=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((h,p)=>{let{class:m,className:y,...x}=p;return Object.entries(x).every(A=>{let[w,C]=A;return Array.isArray(C)?C.includes({...o,...c}[w]):{...o,...c}[w]===C})?[...h,m,y]:h},[]);return j1(s,l,d,e?.class,e?.className)},qI=qy("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function O1({className:s,variant:t,...e}){return g.jsx("div",{className:Zt(qI({variant:t}),s),...e})}function Yl({className:s,...t}){return g.jsx("div",{className:Zt("animate-pulse rounded-md bg-muted",s),...t})}const XI=qy("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ht=S.forwardRef(({className:s,variant:t,size:e,asChild:n=!1,...a},o)=>g.jsx("button",{className:Zt(XI({variant:t,size:e,className:s})),ref:o,...a}));Ht.displayName="Button";function P1(s,[t,e]){return Math.min(e,Math.max(t,s))}function ge(s,t,{checkForDefaultPrevented:e=!0}={}){return function(a){if(s?.(a),e===!1||!a.defaultPrevented)return t?.(a)}}function YI(s,t){const e=S.createContext(t),n=o=>{const{children:l,...c}=o,d=S.useMemo(()=>c,Object.values(c));return g.jsx(e.Provider,{value:d,children:l})};n.displayName=s+"Provider";function a(o){const l=S.useContext(e);if(l)return l;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${s}\``)}return[n,a]}function Ah(s,t=[]){let e=[];function n(o,l){const c=S.createContext(l),d=e.length;e=[...e,l];const h=m=>{const{scope:y,children:x,...A}=m,w=y?.[s]?.[d]||c,C=S.useMemo(()=>A,Object.values(A));return g.jsx(w.Provider,{value:C,children:x})};h.displayName=o+"Provider";function p(m,y){const x=y?.[s]?.[d]||c,A=S.useContext(x);if(A)return A;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[h,p]}const a=()=>{const o=e.map(l=>S.createContext(l));return function(c){const d=c?.[s]||o;return S.useMemo(()=>({[`__scope${s}`]:{...c,[s]:d}}),[c,d])}};return a.scopeName=s,[n,WI(a,...t)]}function WI(...s){const t=s[0];if(s.length===1)return t;const e=()=>{const n=s.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const l=n.reduce((c,{useScope:d,scopeName:h})=>{const m=d(o)[`__scope${h}`];return{...c,...m}},{});return S.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return e.scopeName=t.scopeName,e}function F1(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function Xy(...s){return t=>{let e=!1;const n=s.map(a=>{const o=F1(a,t);return!e&&typeof o=="function"&&(e=!0),o});if(e)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():F1(s[a],null)}}}}function je(...s){return S.useCallback(Xy(...s),s)}function Sc(s){const t=KI(s),e=S.forwardRef((n,a)=>{const{children:o,...l}=n,c=S.Children.toArray(o),d=c.find(ZI);if(d){const h=d.props.children,p=c.map(m=>m===d?S.Children.count(h)>1?S.Children.only(null):S.isValidElement(h)?h.props.children:null:m);return g.jsx(t,{...l,ref:a,children:S.isValidElement(h)?S.cloneElement(h,void 0,p):null})}return g.jsx(t,{...l,ref:a,children:o})});return e.displayName=`${s}.Slot`,e}function KI(s){const t=S.forwardRef((e,n)=>{const{children:a,...o}=e;if(S.isValidElement(a)){const l=t4(a),c=JI(o,a.props);return a.type!==S.Fragment&&(c.ref=n?Xy(n,l):l),S.cloneElement(a,c)}return S.Children.count(a)>1?S.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var QI=Symbol("radix.slottable");function ZI(s){return S.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===QI}function JI(s,t){const e={...t};for(const n in t){const a=s[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?e[n]=(...c)=>{const d=o(...c);return a(...c),d}:a&&(e[n]=a):n==="style"?e[n]={...a,...o}:n==="className"&&(e[n]=[a,o].filter(Boolean).join(" "))}return{...s,...e}}function t4(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}function e4(s){const t=s+"CollectionProvider",[e,n]=Ah(t),[a,o]=e(t,{collectionRef:{current:null},itemMap:new Map}),l=w=>{const{scope:C,children:E}=w,T=sa.useRef(null),R=sa.useRef(new Map).current;return g.jsx(a,{scope:C,itemMap:R,collectionRef:T,children:E})};l.displayName=t;const c=s+"CollectionSlot",d=Sc(c),h=sa.forwardRef((w,C)=>{const{scope:E,children:T}=w,R=o(c,E),N=je(C,R.collectionRef);return g.jsx(d,{ref:N,children:T})});h.displayName=c;const p=s+"CollectionItemSlot",m="data-radix-collection-item",y=Sc(p),x=sa.forwardRef((w,C)=>{const{scope:E,children:T,...R}=w,N=sa.useRef(null),D=je(C,N),L=o(p,E);return sa.useEffect(()=>(L.itemMap.set(N,{ref:N,...R}),()=>{L.itemMap.delete(N)})),g.jsx(y,{[m]:"",ref:D,children:T})});x.displayName=p;function A(w){const C=o(s+"CollectionConsumer",w);return sa.useCallback(()=>{const T=C.collectionRef.current;if(!T)return[];const R=Array.from(T.querySelectorAll(`[${m}]`));return Array.from(C.itemMap.values()).sort((L,k)=>R.indexOf(L.ref.current)-R.indexOf(k.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:l,Slot:h,ItemSlot:x},A,n]}var n4=S.createContext(void 0);function s4(s){const t=S.useContext(n4);return s||t||"ltr"}var i4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],fe=i4.reduce((s,t)=>{const e=Sc(`Primitive.${t}`),n=S.forwardRef((a,o)=>{const{asChild:l,...c}=a,d=l?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(d,{...c,ref:o})});return n.displayName=`Primitive.${t}`,{...s,[t]:n}},{});function a4(s,t){s&&jc.flushSync(()=>s.dispatchEvent(t))}function or(s){const t=S.useRef(s);return S.useEffect(()=>{t.current=s}),S.useMemo(()=>(...e)=>t.current?.(...e),[])}function r4(s,t=globalThis?.document){const e=or(s);S.useEffect(()=>{const n=a=>{a.key==="Escape"&&e(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[e,t])}var o4="DismissableLayer",Og="dismissableLayer.update",l4="dismissableLayer.pointerDownOutside",c4="dismissableLayer.focusOutside",B1,w_=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Yy=S.forwardRef((s,t)=>{const{disableOutsidePointerEvents:e=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=s,h=S.useContext(w_),[p,m]=S.useState(null),y=p?.ownerDocument??globalThis?.document,[,x]=S.useState({}),A=je(t,k=>m(k)),w=Array.from(h.layers),[C]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),E=w.indexOf(C),T=p?w.indexOf(p):-1,R=h.layersWithOutsidePointerEventsDisabled.size>0,N=T>=E,D=h4(k=>{const j=k.target,P=[...h.branches].some(U=>U.contains(j));!N||P||(a?.(k),l?.(k),k.defaultPrevented||c?.())},y),L=f4(k=>{const j=k.target;[...h.branches].some(U=>U.contains(j))||(o?.(k),l?.(k),k.defaultPrevented||c?.())},y);return r4(k=>{T===h.layers.size-1&&(n?.(k),!k.defaultPrevented&&c&&(k.preventDefault(),c()))},y),S.useEffect(()=>{if(p)return e&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(B1=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(p)),h.layers.add(p),I1(),()=>{e&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=B1)}},[p,y,e,h]),S.useEffect(()=>()=>{p&&(h.layers.delete(p),h.layersWithOutsidePointerEventsDisabled.delete(p),I1())},[p,h]),S.useEffect(()=>{const k=()=>x({});return document.addEventListener(Og,k),()=>document.removeEventListener(Og,k)},[]),g.jsx(fe.div,{...d,ref:A,style:{pointerEvents:R?N?"auto":"none":void 0,...s.style},onFocusCapture:ge(s.onFocusCapture,L.onFocusCapture),onBlurCapture:ge(s.onBlurCapture,L.onBlurCapture),onPointerDownCapture:ge(s.onPointerDownCapture,D.onPointerDownCapture)})});Yy.displayName=o4;var u4="DismissableLayerBranch",d4=S.forwardRef((s,t)=>{const e=S.useContext(w_),n=S.useRef(null),a=je(t,n);return S.useEffect(()=>{const o=n.current;if(o)return e.branches.add(o),()=>{e.branches.delete(o)}},[e.branches]),g.jsx(fe.div,{...s,ref:a})});d4.displayName=u4;function h4(s,t=globalThis?.document){const e=or(s),n=S.useRef(!1),a=S.useRef(()=>{});return S.useEffect(()=>{const o=c=>{if(c.target&&!n.current){let d=function(){S_(l4,e,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}else t.removeEventListener("click",a.current);n.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,e]),{onPointerDownCapture:()=>n.current=!0}}function f4(s,t=globalThis?.document){const e=or(s),n=S.useRef(!1);return S.useEffect(()=>{const a=o=>{o.target&&!n.current&&S_(c4,e,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,e]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function I1(){const s=new CustomEvent(Og);document.dispatchEvent(s)}function S_(s,t,e,{discrete:n}){const a=e.originalEvent.target,o=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:e});t&&a.addEventListener(s,t,{once:!0}),n?a4(a,o):a.dispatchEvent(o)}var Im=0;function A_(){S.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??z1()),document.body.insertAdjacentElement("beforeend",s[1]??z1()),Im++,()=>{Im===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Im--}},[])}function z1(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var zm="focusScope.autoFocusOnMount",Um="focusScope.autoFocusOnUnmount",U1={bubbles:!1,cancelable:!0},p4="FocusScope",Wy=S.forwardRef((s,t)=>{const{loop:e=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...l}=s,[c,d]=S.useState(null),h=or(a),p=or(o),m=S.useRef(null),y=je(t,w=>d(w)),x=S.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;S.useEffect(()=>{if(n){let w=function(R){if(x.paused||!c)return;const N=R.target;c.contains(N)?m.current=N:aa(m.current,{select:!0})},C=function(R){if(x.paused||!c)return;const N=R.relatedTarget;N!==null&&(c.contains(N)||aa(m.current,{select:!0}))},E=function(R){if(document.activeElement===document.body)for(const D of R)D.removedNodes.length>0&&aa(c)};document.addEventListener("focusin",w),document.addEventListener("focusout",C);const T=new MutationObserver(E);return c&&T.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",C),T.disconnect()}}},[n,c,x.paused]),S.useEffect(()=>{if(c){H1.add(x);const w=document.activeElement;if(!c.contains(w)){const E=new CustomEvent(zm,U1);c.addEventListener(zm,h),c.dispatchEvent(E),E.defaultPrevented||(m4(x4(C_(c)),{select:!0}),document.activeElement===w&&aa(c))}return()=>{c.removeEventListener(zm,h),setTimeout(()=>{const E=new CustomEvent(Um,U1);c.addEventListener(Um,p),c.dispatchEvent(E),E.defaultPrevented||aa(w??document.body,{select:!0}),c.removeEventListener(Um,p),H1.remove(x)},0)}}},[c,h,p,x]);const A=S.useCallback(w=>{if(!e&&!n||x.paused)return;const C=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,E=document.activeElement;if(C&&E){const T=w.currentTarget,[R,N]=g4(T);R&&N?!w.shiftKey&&E===N?(w.preventDefault(),e&&aa(R,{select:!0})):w.shiftKey&&E===R&&(w.preventDefault(),e&&aa(N,{select:!0})):E===T&&w.preventDefault()}},[e,n,x.paused]);return g.jsx(fe.div,{tabIndex:-1,...l,ref:y,onKeyDown:A})});Wy.displayName=p4;function m4(s,{select:t=!1}={}){const e=document.activeElement;for(const n of s)if(aa(n,{select:t}),document.activeElement!==e)return}function g4(s){const t=C_(s),e=V1(t,s),n=V1(t.reverse(),s);return[e,n]}function C_(s){const t=[],e=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)t.push(e.currentNode);return t}function V1(s,t){for(const e of s)if(!y4(e,{upTo:t}))return e}function y4(s,{upTo:t}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(t!==void 0&&s===t)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function v4(s){return s instanceof HTMLInputElement&&"select"in s}function aa(s,{select:t=!1}={}){if(s&&s.focus){const e=document.activeElement;s.focus({preventScroll:!0}),s!==e&&v4(s)&&t&&s.select()}}var H1=b4();function b4(){let s=[];return{add(t){const e=s[0];t!==e&&e?.pause(),s=$1(s,t),s.unshift(t)},remove(t){s=$1(s,t),s[0]?.resume()}}}function $1(s,t){const e=[...s],n=e.indexOf(t);return n!==-1&&e.splice(n,1),e}function x4(s){return s.filter(t=>t.tagName!=="A")}var pn=globalThis?.document?S.useLayoutEffect:()=>{},w4=oy[" useId ".trim().toString()]||(()=>{}),S4=0;function Eo(s){const[t,e]=S.useState(w4());return pn(()=>{e(n=>n??String(S4++))},[s]),t?`radix-${t}`:""}const A4=["top","right","bottom","left"],ya=Math.min,Kn=Math.max,eh=Math.round,gd=Math.floor,Ws=s=>({x:s,y:s}),C4={left:"right",right:"left",bottom:"top",top:"bottom"},E4={start:"end",end:"start"};function Pg(s,t,e){return Kn(s,ya(t,e))}function Ei(s,t){return typeof s=="function"?s(t):s}function _i(s){return s.split("-")[0]}function qo(s){return s.split("-")[1]}function Ky(s){return s==="x"?"y":"x"}function Qy(s){return s==="y"?"height":"width"}const _4=new Set(["top","bottom"]);function Xs(s){return _4.has(_i(s))?"y":"x"}function Zy(s){return Ky(Xs(s))}function T4(s,t,e){e===void 0&&(e=!1);const n=qo(s),a=Zy(s),o=Qy(a);let l=a==="x"?n===(e?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(l=nh(l)),[l,nh(l)]}function R4(s){const t=nh(s);return[Fg(s),t,Fg(t)]}function Fg(s){return s.replace(/start|end/g,t=>E4[t])}const G1=["left","right"],q1=["right","left"],N4=["top","bottom"],D4=["bottom","top"];function M4(s,t,e){switch(s){case"top":case"bottom":return e?t?q1:G1:t?G1:q1;case"left":case"right":return t?N4:D4;default:return[]}}function k4(s,t,e,n){const a=qo(s);let o=M4(_i(s),e==="start",n);return a&&(o=o.map(l=>l+"-"+a),t&&(o=o.concat(o.map(Fg)))),o}function nh(s){return s.replace(/left|right|bottom|top/g,t=>C4[t])}function L4(s){return{top:0,right:0,bottom:0,left:0,...s}}function E_(s){return typeof s!="number"?L4(s):{top:s,right:s,bottom:s,left:s}}function sh(s){const{x:t,y:e,width:n,height:a}=s;return{width:n,height:a,top:e,left:t,right:t+n,bottom:e+a,x:t,y:e}}function X1(s,t,e){let{reference:n,floating:a}=s;const o=Xs(t),l=Zy(t),c=Qy(l),d=_i(t),h=o==="y",p=n.x+n.width/2-a.width/2,m=n.y+n.height/2-a.height/2,y=n[c]/2-a[c]/2;let x;switch(d){case"top":x={x:p,y:n.y-a.height};break;case"bottom":x={x:p,y:n.y+n.height};break;case"right":x={x:n.x+n.width,y:m};break;case"left":x={x:n.x-a.width,y:m};break;default:x={x:n.x,y:n.y}}switch(qo(t)){case"start":x[l]-=y*(e&&h?-1:1);break;case"end":x[l]+=y*(e&&h?-1:1);break}return x}const j4=async(s,t,e)=>{const{placement:n="bottom",strategy:a="absolute",middleware:o=[],platform:l}=e,c=o.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(t));let h=await l.getElementRects({reference:s,floating:t,strategy:a}),{x:p,y:m}=X1(h,n,d),y=n,x={},A=0;for(let w=0;w<c.length;w++){const{name:C,fn:E}=c[w],{x:T,y:R,data:N,reset:D}=await E({x:p,y:m,initialPlacement:n,placement:y,strategy:a,middlewareData:x,rects:h,platform:l,elements:{reference:s,floating:t}});p=T??p,m=R??m,x={...x,[C]:{...x[C],...N}},D&&A<=50&&(A++,typeof D=="object"&&(D.placement&&(y=D.placement),D.rects&&(h=D.rects===!0?await l.getElementRects({reference:s,floating:t,strategy:a}):D.rects),{x:p,y:m}=X1(h,y,d)),w=-1)}return{x:p,y:m,placement:y,strategy:a,middlewareData:x}};async function Ac(s,t){var e;t===void 0&&(t={});const{x:n,y:a,platform:o,rects:l,elements:c,strategy:d}=s,{boundary:h="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:y=!1,padding:x=0}=Ei(t,s),A=E_(x),C=c[y?m==="floating"?"reference":"floating":m],E=sh(await o.getClippingRect({element:(e=await(o.isElement==null?void 0:o.isElement(C)))==null||e?C:C.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:h,rootBoundary:p,strategy:d})),T=m==="floating"?{x:n,y:a,width:l.floating.width,height:l.floating.height}:l.reference,R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),N=await(o.isElement==null?void 0:o.isElement(R))?await(o.getScale==null?void 0:o.getScale(R))||{x:1,y:1}:{x:1,y:1},D=sh(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:T,offsetParent:R,strategy:d}):T);return{top:(E.top-D.top+A.top)/N.y,bottom:(D.bottom-E.bottom+A.bottom)/N.y,left:(E.left-D.left+A.left)/N.x,right:(D.right-E.right+A.right)/N.x}}const O4=s=>({name:"arrow",options:s,async fn(t){const{x:e,y:n,placement:a,rects:o,platform:l,elements:c,middlewareData:d}=t,{element:h,padding:p=0}=Ei(s,t)||{};if(h==null)return{};const m=E_(p),y={x:e,y:n},x=Zy(a),A=Qy(x),w=await l.getDimensions(h),C=x==="y",E=C?"top":"left",T=C?"bottom":"right",R=C?"clientHeight":"clientWidth",N=o.reference[A]+o.reference[x]-y[x]-o.floating[A],D=y[x]-o.reference[x],L=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let k=L?L[R]:0;(!k||!await(l.isElement==null?void 0:l.isElement(L)))&&(k=c.floating[R]||o.floating[A]);const j=N/2-D/2,P=k/2-w[A]/2-1,U=ya(m[E],P),H=ya(m[T],P),J=U,at=k-w[A]-H,q=k/2-w[A]/2+j,rt=Pg(J,q,at),O=!d.arrow&&qo(a)!=null&&q!==rt&&o.reference[A]/2-(q<J?U:H)-w[A]/2<0,B=O?q<J?q-J:q-at:0;return{[x]:y[x]+B,data:{[x]:rt,centerOffset:q-rt-B,...O&&{alignmentOffset:B}},reset:O}}}),P4=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(t){var e,n;const{placement:a,middlewareData:o,rects:l,initialPlacement:c,platform:d,elements:h}=t,{mainAxis:p=!0,crossAxis:m=!0,fallbackPlacements:y,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:A="none",flipAlignment:w=!0,...C}=Ei(s,t);if((e=o.arrow)!=null&&e.alignmentOffset)return{};const E=_i(a),T=Xs(c),R=_i(c)===c,N=await(d.isRTL==null?void 0:d.isRTL(h.floating)),D=y||(R||!w?[nh(c)]:R4(c)),L=A!=="none";!y&&L&&D.push(...k4(c,w,A,N));const k=[c,...D],j=await Ac(t,C),P=[];let U=((n=o.flip)==null?void 0:n.overflows)||[];if(p&&P.push(j[E]),m){const q=T4(a,l,N);P.push(j[q[0]],j[q[1]])}if(U=[...U,{placement:a,overflows:P}],!P.every(q=>q<=0)){var H,J;const q=(((H=o.flip)==null?void 0:H.index)||0)+1,rt=k[q];if(rt&&(!(m==="alignment"?T!==Xs(rt):!1)||U.every(I=>Xs(I.placement)===T?I.overflows[0]>0:!0)))return{data:{index:q,overflows:U},reset:{placement:rt}};let O=(J=U.filter(B=>B.overflows[0]<=0).sort((B,I)=>B.overflows[1]-I.overflows[1])[0])==null?void 0:J.placement;if(!O)switch(x){case"bestFit":{var at;const B=(at=U.filter(I=>{if(L){const Y=Xs(I.placement);return Y===T||Y==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(Y=>Y>0).reduce((Y,ft)=>Y+ft,0)]).sort((I,Y)=>I[1]-Y[1])[0])==null?void 0:at[0];B&&(O=B);break}case"initialPlacement":O=c;break}if(a!==O)return{reset:{placement:O}}}return{}}}};function Y1(s,t){return{top:s.top-t.height,right:s.right-t.width,bottom:s.bottom-t.height,left:s.left-t.width}}function W1(s){return A4.some(t=>s[t]>=0)}const F4=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(t){const{rects:e}=t,{strategy:n="referenceHidden",...a}=Ei(s,t);switch(n){case"referenceHidden":{const o=await Ac(t,{...a,elementContext:"reference"}),l=Y1(o,e.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:W1(l)}}}case"escaped":{const o=await Ac(t,{...a,altBoundary:!0}),l=Y1(o,e.floating);return{data:{escapedOffsets:l,escaped:W1(l)}}}default:return{}}}}},__=new Set(["left","top"]);async function B4(s,t){const{placement:e,platform:n,elements:a}=s,o=await(n.isRTL==null?void 0:n.isRTL(a.floating)),l=_i(e),c=qo(e),d=Xs(e)==="y",h=__.has(l)?-1:1,p=o&&d?-1:1,m=Ei(t,s);let{mainAxis:y,crossAxis:x,alignmentAxis:A}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return c&&typeof A=="number"&&(x=c==="end"?A*-1:A),d?{x:x*p,y:y*h}:{x:y*h,y:x*p}}const I4=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(t){var e,n;const{x:a,y:o,placement:l,middlewareData:c}=t,d=await B4(t,s);return l===((e=c.offset)==null?void 0:e.placement)&&(n=c.arrow)!=null&&n.alignmentOffset?{}:{x:a+d.x,y:o+d.y,data:{...d,placement:l}}}}},z4=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(t){const{x:e,y:n,placement:a}=t,{mainAxis:o=!0,crossAxis:l=!1,limiter:c={fn:C=>{let{x:E,y:T}=C;return{x:E,y:T}}},...d}=Ei(s,t),h={x:e,y:n},p=await Ac(t,d),m=Xs(_i(a)),y=Ky(m);let x=h[y],A=h[m];if(o){const C=y==="y"?"top":"left",E=y==="y"?"bottom":"right",T=x+p[C],R=x-p[E];x=Pg(T,x,R)}if(l){const C=m==="y"?"top":"left",E=m==="y"?"bottom":"right",T=A+p[C],R=A-p[E];A=Pg(T,A,R)}const w=c.fn({...t,[y]:x,[m]:A});return{...w,data:{x:w.x-e,y:w.y-n,enabled:{[y]:o,[m]:l}}}}}},U4=function(s){return s===void 0&&(s={}),{options:s,fn(t){const{x:e,y:n,placement:a,rects:o,middlewareData:l}=t,{offset:c=0,mainAxis:d=!0,crossAxis:h=!0}=Ei(s,t),p={x:e,y:n},m=Xs(a),y=Ky(m);let x=p[y],A=p[m];const w=Ei(c,t),C=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(d){const R=y==="y"?"height":"width",N=o.reference[y]-o.floating[R]+C.mainAxis,D=o.reference[y]+o.reference[R]-C.mainAxis;x<N?x=N:x>D&&(x=D)}if(h){var E,T;const R=y==="y"?"width":"height",N=__.has(_i(a)),D=o.reference[m]-o.floating[R]+(N&&((E=l.offset)==null?void 0:E[m])||0)+(N?0:C.crossAxis),L=o.reference[m]+o.reference[R]+(N?0:((T=l.offset)==null?void 0:T[m])||0)-(N?C.crossAxis:0);A<D?A=D:A>L&&(A=L)}return{[y]:x,[m]:A}}}},V4=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(t){var e,n;const{placement:a,rects:o,platform:l,elements:c}=t,{apply:d=()=>{},...h}=Ei(s,t),p=await Ac(t,h),m=_i(a),y=qo(a),x=Xs(a)==="y",{width:A,height:w}=o.floating;let C,E;m==="top"||m==="bottom"?(C=m,E=y===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(E=m,C=y==="end"?"top":"bottom");const T=w-p.top-p.bottom,R=A-p.left-p.right,N=ya(w-p[C],T),D=ya(A-p[E],R),L=!t.middlewareData.shift;let k=N,j=D;if((e=t.middlewareData.shift)!=null&&e.enabled.x&&(j=R),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(k=T),L&&!y){const U=Kn(p.left,0),H=Kn(p.right,0),J=Kn(p.top,0),at=Kn(p.bottom,0);x?j=A-2*(U!==0||H!==0?U+H:Kn(p.left,p.right)):k=w-2*(J!==0||at!==0?J+at:Kn(p.top,p.bottom))}await d({...t,availableWidth:j,availableHeight:k});const P=await l.getDimensions(c.floating);return A!==P.width||w!==P.height?{reset:{rects:!0}}:{}}}};function Ch(){return typeof window<"u"}function Xo(s){return T_(s)?(s.nodeName||"").toLowerCase():"#document"}function Qn(s){var t;return(s==null||(t=s.ownerDocument)==null?void 0:t.defaultView)||window}function Zs(s){var t;return(t=(T_(s)?s.ownerDocument:s.document)||window.document)==null?void 0:t.documentElement}function T_(s){return Ch()?s instanceof Node||s instanceof Qn(s).Node:!1}function _s(s){return Ch()?s instanceof Element||s instanceof Qn(s).Element:!1}function Qs(s){return Ch()?s instanceof HTMLElement||s instanceof Qn(s).HTMLElement:!1}function K1(s){return!Ch()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof Qn(s).ShadowRoot}const H4=new Set(["inline","contents"]);function Ic(s){const{overflow:t,overflowX:e,overflowY:n,display:a}=Ts(s);return/auto|scroll|overlay|hidden|clip/.test(t+n+e)&&!H4.has(a)}const $4=new Set(["table","td","th"]);function G4(s){return $4.has(Xo(s))}const q4=[":popover-open",":modal"];function Eh(s){return q4.some(t=>{try{return s.matches(t)}catch{return!1}})}const X4=["transform","translate","scale","rotate","perspective"],Y4=["transform","translate","scale","rotate","perspective","filter"],W4=["paint","layout","strict","content"];function Jy(s){const t=tv(),e=_s(s)?Ts(s):s;return X4.some(n=>e[n]?e[n]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||Y4.some(n=>(e.willChange||"").includes(n))||W4.some(n=>(e.contain||"").includes(n))}function K4(s){let t=va(s);for(;Qs(t)&&!Oo(t);){if(Jy(t))return t;if(Eh(t))return null;t=va(t)}return null}function tv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Q4=new Set(["html","body","#document"]);function Oo(s){return Q4.has(Xo(s))}function Ts(s){return Qn(s).getComputedStyle(s)}function _h(s){return _s(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function va(s){if(Xo(s)==="html")return s;const t=s.assignedSlot||s.parentNode||K1(s)&&s.host||Zs(s);return K1(t)?t.host:t}function R_(s){const t=va(s);return Oo(t)?s.ownerDocument?s.ownerDocument.body:s.body:Qs(t)&&Ic(t)?t:R_(t)}function Cc(s,t,e){var n;t===void 0&&(t=[]),e===void 0&&(e=!0);const a=R_(s),o=a===((n=s.ownerDocument)==null?void 0:n.body),l=Qn(a);if(o){const c=Bg(l);return t.concat(l,l.visualViewport||[],Ic(a)?a:[],c&&e?Cc(c):[])}return t.concat(a,Cc(a,[],e))}function Bg(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function N_(s){const t=Ts(s);let e=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=Qs(s),o=a?s.offsetWidth:e,l=a?s.offsetHeight:n,c=eh(e)!==o||eh(n)!==l;return c&&(e=o,n=l),{width:e,height:n,$:c}}function ev(s){return _s(s)?s:s.contextElement}function _o(s){const t=ev(s);if(!Qs(t))return Ws(1);const e=t.getBoundingClientRect(),{width:n,height:a,$:o}=N_(t);let l=(o?eh(e.width):e.width)/n,c=(o?eh(e.height):e.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const Z4=Ws(0);function D_(s){const t=Qn(s);return!tv()||!t.visualViewport?Z4:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function J4(s,t,e){return t===void 0&&(t=!1),!e||t&&e!==Qn(s)?!1:t}function lr(s,t,e,n){t===void 0&&(t=!1),e===void 0&&(e=!1);const a=s.getBoundingClientRect(),o=ev(s);let l=Ws(1);t&&(n?_s(n)&&(l=_o(n)):l=_o(s));const c=J4(o,e,n)?D_(o):Ws(0);let d=(a.left+c.x)/l.x,h=(a.top+c.y)/l.y,p=a.width/l.x,m=a.height/l.y;if(o){const y=Qn(o),x=n&&_s(n)?Qn(n):n;let A=y,w=Bg(A);for(;w&&n&&x!==A;){const C=_o(w),E=w.getBoundingClientRect(),T=Ts(w),R=E.left+(w.clientLeft+parseFloat(T.paddingLeft))*C.x,N=E.top+(w.clientTop+parseFloat(T.paddingTop))*C.y;d*=C.x,h*=C.y,p*=C.x,m*=C.y,d+=R,h+=N,A=Qn(w),w=Bg(A)}}return sh({width:p,height:m,x:d,y:h})}function Th(s,t){const e=_h(s).scrollLeft;return t?t.left+e:lr(Zs(s)).left+e}function M_(s,t){const e=s.getBoundingClientRect(),n=e.left+t.scrollLeft-Th(s,e),a=e.top+t.scrollTop;return{x:n,y:a}}function t5(s){let{elements:t,rect:e,offsetParent:n,strategy:a}=s;const o=a==="fixed",l=Zs(n),c=t?Eh(t.floating):!1;if(n===l||c&&o)return e;let d={scrollLeft:0,scrollTop:0},h=Ws(1);const p=Ws(0),m=Qs(n);if((m||!m&&!o)&&((Xo(n)!=="body"||Ic(l))&&(d=_h(n)),Qs(n))){const x=lr(n);h=_o(n),p.x=x.x+n.clientLeft,p.y=x.y+n.clientTop}const y=l&&!m&&!o?M_(l,d):Ws(0);return{width:e.width*h.x,height:e.height*h.y,x:e.x*h.x-d.scrollLeft*h.x+p.x+y.x,y:e.y*h.y-d.scrollTop*h.y+p.y+y.y}}function e5(s){return Array.from(s.getClientRects())}function n5(s){const t=Zs(s),e=_h(s),n=s.ownerDocument.body,a=Kn(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=Kn(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let l=-e.scrollLeft+Th(s);const c=-e.scrollTop;return Ts(n).direction==="rtl"&&(l+=Kn(t.clientWidth,n.clientWidth)-a),{width:a,height:o,x:l,y:c}}const Q1=25;function s5(s,t){const e=Qn(s),n=Zs(s),a=e.visualViewport;let o=n.clientWidth,l=n.clientHeight,c=0,d=0;if(a){o=a.width,l=a.height;const p=tv();(!p||p&&t==="fixed")&&(c=a.offsetLeft,d=a.offsetTop)}const h=Th(n);if(h<=0){const p=n.ownerDocument,m=p.body,y=getComputedStyle(m),x=p.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,A=Math.abs(n.clientWidth-m.clientWidth-x);A<=Q1&&(o-=A)}else h<=Q1&&(o+=h);return{width:o,height:l,x:c,y:d}}const i5=new Set(["absolute","fixed"]);function a5(s,t){const e=lr(s,!0,t==="fixed"),n=e.top+s.clientTop,a=e.left+s.clientLeft,o=Qs(s)?_o(s):Ws(1),l=s.clientWidth*o.x,c=s.clientHeight*o.y,d=a*o.x,h=n*o.y;return{width:l,height:c,x:d,y:h}}function Z1(s,t,e){let n;if(t==="viewport")n=s5(s,e);else if(t==="document")n=n5(Zs(s));else if(_s(t))n=a5(t,e);else{const a=D_(s);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return sh(n)}function k_(s,t){const e=va(s);return e===t||!_s(e)||Oo(e)?!1:Ts(e).position==="fixed"||k_(e,t)}function r5(s,t){const e=t.get(s);if(e)return e;let n=Cc(s,[],!1).filter(c=>_s(c)&&Xo(c)!=="body"),a=null;const o=Ts(s).position==="fixed";let l=o?va(s):s;for(;_s(l)&&!Oo(l);){const c=Ts(l),d=Jy(l);!d&&c.position==="fixed"&&(a=null),(o?!d&&!a:!d&&c.position==="static"&&!!a&&i5.has(a.position)||Ic(l)&&!d&&k_(s,l))?n=n.filter(p=>p!==l):a=c,l=va(l)}return t.set(s,n),n}function o5(s){let{element:t,boundary:e,rootBoundary:n,strategy:a}=s;const l=[...e==="clippingAncestors"?Eh(t)?[]:r5(t,this._c):[].concat(e),n],c=l[0],d=l.reduce((h,p)=>{const m=Z1(t,p,a);return h.top=Kn(m.top,h.top),h.right=ya(m.right,h.right),h.bottom=ya(m.bottom,h.bottom),h.left=Kn(m.left,h.left),h},Z1(t,c,a));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function l5(s){const{width:t,height:e}=N_(s);return{width:t,height:e}}function c5(s,t,e){const n=Qs(t),a=Zs(t),o=e==="fixed",l=lr(s,!0,o,t);let c={scrollLeft:0,scrollTop:0};const d=Ws(0);function h(){d.x=Th(a)}if(n||!n&&!o)if((Xo(t)!=="body"||Ic(a))&&(c=_h(t)),n){const x=lr(t,!0,o,t);d.x=x.x+t.clientLeft,d.y=x.y+t.clientTop}else a&&h();o&&!n&&a&&h();const p=a&&!n&&!o?M_(a,c):Ws(0),m=l.left+c.scrollLeft-d.x-p.x,y=l.top+c.scrollTop-d.y-p.y;return{x:m,y,width:l.width,height:l.height}}function Vm(s){return Ts(s).position==="static"}function J1(s,t){if(!Qs(s)||Ts(s).position==="fixed")return null;if(t)return t(s);let e=s.offsetParent;return Zs(s)===e&&(e=e.ownerDocument.body),e}function L_(s,t){const e=Qn(s);if(Eh(s))return e;if(!Qs(s)){let a=va(s);for(;a&&!Oo(a);){if(_s(a)&&!Vm(a))return a;a=va(a)}return e}let n=J1(s,t);for(;n&&G4(n)&&Vm(n);)n=J1(n,t);return n&&Oo(n)&&Vm(n)&&!Jy(n)?e:n||K4(s)||e}const u5=async function(s){const t=this.getOffsetParent||L_,e=this.getDimensions,n=await e(s.floating);return{reference:c5(s.reference,await t(s.floating),s.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function d5(s){return Ts(s).direction==="rtl"}const h5={convertOffsetParentRelativeRectToViewportRelativeRect:t5,getDocumentElement:Zs,getClippingRect:o5,getOffsetParent:L_,getElementRects:u5,getClientRects:e5,getDimensions:l5,getScale:_o,isElement:_s,isRTL:d5};function j_(s,t){return s.x===t.x&&s.y===t.y&&s.width===t.width&&s.height===t.height}function f5(s,t){let e=null,n;const a=Zs(s);function o(){var c;clearTimeout(n),(c=e)==null||c.disconnect(),e=null}function l(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),o();const h=s.getBoundingClientRect(),{left:p,top:m,width:y,height:x}=h;if(c||t(),!y||!x)return;const A=gd(m),w=gd(a.clientWidth-(p+y)),C=gd(a.clientHeight-(m+x)),E=gd(p),R={rootMargin:-A+"px "+-w+"px "+-C+"px "+-E+"px",threshold:Kn(0,ya(1,d))||1};let N=!0;function D(L){const k=L[0].intersectionRatio;if(k!==d){if(!N)return l();k?l(!1,k):n=setTimeout(()=>{l(!1,1e-7)},1e3)}k===1&&!j_(h,s.getBoundingClientRect())&&l(),N=!1}try{e=new IntersectionObserver(D,{...R,root:a.ownerDocument})}catch{e=new IntersectionObserver(D,R)}e.observe(s)}return l(!0),o}function p5(s,t,e,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=n,h=ev(s),p=a||o?[...h?Cc(h):[],...Cc(t)]:[];p.forEach(E=>{a&&E.addEventListener("scroll",e,{passive:!0}),o&&E.addEventListener("resize",e)});const m=h&&c?f5(h,e):null;let y=-1,x=null;l&&(x=new ResizeObserver(E=>{let[T]=E;T&&T.target===h&&x&&(x.unobserve(t),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var R;(R=x)==null||R.observe(t)})),e()}),h&&!d&&x.observe(h),x.observe(t));let A,w=d?lr(s):null;d&&C();function C(){const E=lr(s);w&&!j_(w,E)&&e(),w=E,A=requestAnimationFrame(C)}return e(),()=>{var E;p.forEach(T=>{a&&T.removeEventListener("scroll",e),o&&T.removeEventListener("resize",e)}),m?.(),(E=x)==null||E.disconnect(),x=null,d&&cancelAnimationFrame(A)}}const m5=I4,g5=z4,y5=P4,v5=V4,b5=F4,tA=O4,x5=U4,w5=(s,t,e)=>{const n=new Map,a={platform:h5,...e},o={...a.platform,_c:n};return j4(s,t,{...a,platform:o})};var S5=typeof document<"u",A5=function(){},Bd=S5?S.useLayoutEffect:A5;function ih(s,t){if(s===t)return!0;if(typeof s!=typeof t)return!1;if(typeof s=="function"&&s.toString()===t.toString())return!0;let e,n,a;if(s&&t&&typeof s=="object"){if(Array.isArray(s)){if(e=s.length,e!==t.length)return!1;for(n=e;n--!==0;)if(!ih(s[n],t[n]))return!1;return!0}if(a=Object.keys(s),e=a.length,e!==Object.keys(t).length)return!1;for(n=e;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=e;n--!==0;){const o=a[n];if(!(o==="_owner"&&s.$$typeof)&&!ih(s[o],t[o]))return!1}return!0}return s!==s&&t!==t}function O_(s){return typeof window>"u"?1:(s.ownerDocument.defaultView||window).devicePixelRatio||1}function eA(s,t){const e=O_(s);return Math.round(t*e)/e}function Hm(s){const t=S.useRef(s);return Bd(()=>{t.current=s}),t}function C5(s){s===void 0&&(s={});const{placement:t="bottom",strategy:e="absolute",middleware:n=[],platform:a,elements:{reference:o,floating:l}={},transform:c=!0,whileElementsMounted:d,open:h}=s,[p,m]=S.useState({x:0,y:0,strategy:e,placement:t,middlewareData:{},isPositioned:!1}),[y,x]=S.useState(n);ih(y,n)||x(n);const[A,w]=S.useState(null),[C,E]=S.useState(null),T=S.useCallback(I=>{I!==L.current&&(L.current=I,w(I))},[]),R=S.useCallback(I=>{I!==k.current&&(k.current=I,E(I))},[]),N=o||A,D=l||C,L=S.useRef(null),k=S.useRef(null),j=S.useRef(p),P=d!=null,U=Hm(d),H=Hm(a),J=Hm(h),at=S.useCallback(()=>{if(!L.current||!k.current)return;const I={placement:t,strategy:e,middleware:y};H.current&&(I.platform=H.current),w5(L.current,k.current,I).then(Y=>{const ft={...Y,isPositioned:J.current!==!1};q.current&&!ih(j.current,ft)&&(j.current=ft,jc.flushSync(()=>{m(ft)}))})},[y,t,e,H,J]);Bd(()=>{h===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,m(I=>({...I,isPositioned:!1})))},[h]);const q=S.useRef(!1);Bd(()=>(q.current=!0,()=>{q.current=!1}),[]),Bd(()=>{if(N&&(L.current=N),D&&(k.current=D),N&&D){if(U.current)return U.current(N,D,at);at()}},[N,D,at,U,P]);const rt=S.useMemo(()=>({reference:L,floating:k,setReference:T,setFloating:R}),[T,R]),O=S.useMemo(()=>({reference:N,floating:D}),[N,D]),B=S.useMemo(()=>{const I={position:e,left:0,top:0};if(!O.floating)return I;const Y=eA(O.floating,p.x),ft=eA(O.floating,p.y);return c?{...I,transform:"translate("+Y+"px, "+ft+"px)",...O_(O.floating)>=1.5&&{willChange:"transform"}}:{position:e,left:Y,top:ft}},[e,c,O.floating,p.x,p.y]);return S.useMemo(()=>({...p,update:at,refs:rt,elements:O,floatingStyles:B}),[p,at,rt,O,B])}const E5=s=>{function t(e){return{}.hasOwnProperty.call(e,"current")}return{name:"arrow",options:s,fn(e){const{element:n,padding:a}=typeof s=="function"?s(e):s;return n&&t(n)?n.current!=null?tA({element:n.current,padding:a}).fn(e):{}:n?tA({element:n,padding:a}).fn(e):{}}}},_5=(s,t)=>({...m5(s),options:[s,t]}),T5=(s,t)=>({...g5(s),options:[s,t]}),R5=(s,t)=>({...x5(s),options:[s,t]}),N5=(s,t)=>({...y5(s),options:[s,t]}),D5=(s,t)=>({...v5(s),options:[s,t]}),M5=(s,t)=>({...b5(s),options:[s,t]}),k5=(s,t)=>({...E5(s),options:[s,t]});var L5="Arrow",P_=S.forwardRef((s,t)=>{const{children:e,width:n=10,height:a=5,...o}=s;return g.jsx(fe.svg,{...o,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:s.asChild?e:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});P_.displayName=L5;var j5=P_;function O5(s){const[t,e]=S.useState(void 0);return pn(()=>{if(s){e({width:s.offsetWidth,height:s.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let l,c;if("borderBoxSize"in o){const d=o.borderBoxSize,h=Array.isArray(d)?d[0]:d;l=h.inlineSize,c=h.blockSize}else l=s.offsetWidth,c=s.offsetHeight;e({width:l,height:c})});return n.observe(s,{box:"border-box"}),()=>n.unobserve(s)}else e(void 0)},[s]),t}var nv="Popper",[F_,B_]=Ah(nv),[P5,I_]=F_(nv),z_=s=>{const{__scopePopper:t,children:e}=s,[n,a]=S.useState(null);return g.jsx(P5,{scope:t,anchor:n,onAnchorChange:a,children:e})};z_.displayName=nv;var U_="PopperAnchor",V_=S.forwardRef((s,t)=>{const{__scopePopper:e,virtualRef:n,...a}=s,o=I_(U_,e),l=S.useRef(null),c=je(t,l),d=S.useRef(null);return S.useEffect(()=>{const h=d.current;d.current=n?.current||l.current,h!==d.current&&o.onAnchorChange(d.current)}),n?null:g.jsx(fe.div,{...a,ref:c})});V_.displayName=U_;var sv="PopperContent",[F5,B5]=F_(sv),H_=S.forwardRef((s,t)=>{const{__scopePopper:e,side:n="bottom",sideOffset:a=0,align:o="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:p=0,sticky:m="partial",hideWhenDetached:y=!1,updatePositionStrategy:x="optimized",onPlaced:A,...w}=s,C=I_(sv,e),[E,T]=S.useState(null),R=je(t,et=>T(et)),[N,D]=S.useState(null),L=O5(N),k=L?.width??0,j=L?.height??0,P=n+(o!=="center"?"-"+o:""),U=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},H=Array.isArray(h)?h:[h],J=H.length>0,at={padding:U,boundary:H.filter(z5),altBoundary:J},{refs:q,floatingStyles:rt,placement:O,isPositioned:B,middlewareData:I}=C5({strategy:"fixed",placement:P,whileElementsMounted:(...et)=>p5(...et,{animationFrame:x==="always"}),elements:{reference:C.anchor},middleware:[_5({mainAxis:a+j,alignmentAxis:l}),d&&T5({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?R5():void 0,...at}),d&&N5({...at}),D5({...at,apply:({elements:et,rects:yt,availableWidth:vt,availableHeight:Tt})=>{const{width:X,height:ut}=yt.reference,ht=et.floating.style;ht.setProperty("--radix-popper-available-width",`${vt}px`),ht.setProperty("--radix-popper-available-height",`${Tt}px`),ht.setProperty("--radix-popper-anchor-width",`${X}px`),ht.setProperty("--radix-popper-anchor-height",`${ut}px`)}}),N&&k5({element:N,padding:c}),U5({arrowWidth:k,arrowHeight:j}),y&&M5({strategy:"referenceHidden",...at})]}),[Y,ft]=q_(O),F=or(A);pn(()=>{B&&F?.()},[B,F]);const G=I.arrow?.x,tt=I.arrow?.y,lt=I.arrow?.centerOffset!==0,[mt,st]=S.useState();return pn(()=>{E&&st(window.getComputedStyle(E).zIndex)},[E]),g.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...rt,transform:B?rt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:mt,"--radix-popper-transform-origin":[I.transformOrigin?.x,I.transformOrigin?.y].join(" "),...I.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:s.dir,children:g.jsx(F5,{scope:e,placedSide:Y,onArrowChange:D,arrowX:G,arrowY:tt,shouldHideArrow:lt,children:g.jsx(fe.div,{"data-side":Y,"data-align":ft,...w,ref:R,style:{...w.style,animation:B?void 0:"none"}})})})});H_.displayName=sv;var $_="PopperArrow",I5={top:"bottom",right:"left",bottom:"top",left:"right"},G_=S.forwardRef(function(t,e){const{__scopePopper:n,...a}=t,o=B5($_,n),l=I5[o.placedSide];return g.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:g.jsx(j5,{...a,ref:e,style:{...a.style,display:"block"}})})});G_.displayName=$_;function z5(s){return s!==null}var U5=s=>({name:"transformOrigin",options:s,fn(t){const{placement:e,rects:n,middlewareData:a}=t,l=a.arrow?.centerOffset!==0,c=l?0:s.arrowWidth,d=l?0:s.arrowHeight,[h,p]=q_(e),m={start:"0%",center:"50%",end:"100%"}[p],y=(a.arrow?.x??0)+c/2,x=(a.arrow?.y??0)+d/2;let A="",w="";return h==="bottom"?(A=l?m:`${y}px`,w=`${-d}px`):h==="top"?(A=l?m:`${y}px`,w=`${n.floating.height+d}px`):h==="right"?(A=`${-d}px`,w=l?m:`${x}px`):h==="left"&&(A=`${n.floating.width+d}px`,w=l?m:`${x}px`),{data:{x:A,y:w}}}});function q_(s){const[t,e="center"]=s.split("-");return[t,e]}var V5=z_,H5=V_,$5=H_,G5=G_,q5="Portal",iv=S.forwardRef((s,t)=>{const{container:e,...n}=s,[a,o]=S.useState(!1);pn(()=>o(!0),[]);const l=e||a&&globalThis?.document?.body;return l?IL.createPortal(g.jsx(fe.div,{...n,ref:t}),l):null});iv.displayName=q5;var X5=oy[" useInsertionEffect ".trim().toString()]||pn;function Ig({prop:s,defaultProp:t,onChange:e=()=>{},caller:n}){const[a,o,l]=Y5({defaultProp:t,onChange:e}),c=s!==void 0,d=c?s:a;{const p=S.useRef(s!==void 0);S.useEffect(()=>{const m=p.current;m!==c&&console.warn(`${n} is changing from ${m?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=c},[c,n])}const h=S.useCallback(p=>{if(c){const m=W5(p)?p(s):p;m!==s&&l.current?.(m)}else o(p)},[c,s,o,l]);return[d,h]}function Y5({defaultProp:s,onChange:t}){const[e,n]=S.useState(s),a=S.useRef(e),o=S.useRef(t);return X5(()=>{o.current=t},[t]),S.useEffect(()=>{a.current!==e&&(o.current?.(e),a.current=e)},[e,a]),[e,n,o]}function W5(s){return typeof s=="function"}function K5(s){const t=S.useRef({value:s,previous:s});return S.useMemo(()=>(t.current.value!==s&&(t.current.previous=t.current.value,t.current.value=s),t.current.previous),[s])}var X_=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Q5="VisuallyHidden",Z5=S.forwardRef((s,t)=>g.jsx(fe.span,{...s,ref:t,style:{...X_,...s.style}}));Z5.displayName=Q5;var J5=function(s){if(typeof document>"u")return null;var t=Array.isArray(s)?s[0]:s;return t.ownerDocument.body},ao=new WeakMap,yd=new WeakMap,vd={},$m=0,Y_=function(s){return s&&(s.host||Y_(s.parentNode))},tz=function(s,t){return t.map(function(e){if(s.contains(e))return e;var n=Y_(e);return n&&s.contains(n)?n:(console.error("aria-hidden",e,"in not contained inside",s,". Doing nothing"),null)}).filter(function(e){return!!e})},ez=function(s,t,e,n){var a=tz(t,Array.isArray(s)?s:[s]);vd[e]||(vd[e]=new WeakMap);var o=vd[e],l=[],c=new Set,d=new Set(a),h=function(m){!m||c.has(m)||(c.add(m),h(m.parentNode))};a.forEach(h);var p=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(y){if(c.has(y))p(y);else try{var x=y.getAttribute(n),A=x!==null&&x!=="false",w=(ao.get(y)||0)+1,C=(o.get(y)||0)+1;ao.set(y,w),o.set(y,C),l.push(y),w===1&&A&&yd.set(y,!0),C===1&&y.setAttribute(e,"true"),A||y.setAttribute(n,"true")}catch(E){console.error("aria-hidden: cannot operate on ",y,E)}})};return p(t),c.clear(),$m++,function(){l.forEach(function(m){var y=ao.get(m)-1,x=o.get(m)-1;ao.set(m,y),o.set(m,x),y||(yd.has(m)||m.removeAttribute(n),yd.delete(m)),x||m.removeAttribute(e)}),$m--,$m||(ao=new WeakMap,ao=new WeakMap,yd=new WeakMap,vd={})}},W_=function(s,t,e){e===void 0&&(e="data-aria-hidden");var n=Array.from(Array.isArray(s)?s:[s]),a=J5(s);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),ez(n,a,e,"aria-hidden")):function(){return null}},$s=function(){return $s=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},$s.apply(this,arguments)};function K_(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(s);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(s,n[a])&&(e[n[a]]=s[n[a]]);return e}function nz(s,t,e){if(e||arguments.length===2)for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return s.concat(o||Array.prototype.slice.call(t))}var Id="right-scroll-bar-position",zd="width-before-scroll-bar",sz="with-scroll-bars-hidden",iz="--removed-body-scroll-bar-size";function Gm(s,t){return typeof s=="function"?s(t):s&&(s.current=t),s}function az(s,t){var e=S.useState(function(){return{value:s,callback:t,facade:{get current(){return e.value},set current(n){var a=e.value;a!==n&&(e.value=n,e.callback(n,a))}}}})[0];return e.callback=t,e.facade}var rz=typeof window<"u"?S.useLayoutEffect:S.useEffect,nA=new WeakMap;function oz(s,t){var e=az(null,function(n){return s.forEach(function(a){return Gm(a,n)})});return rz(function(){var n=nA.get(e);if(n){var a=new Set(n),o=new Set(s),l=e.current;a.forEach(function(c){o.has(c)||Gm(c,null)}),o.forEach(function(c){a.has(c)||Gm(c,l)})}nA.set(e,s)},[s]),e}function lz(s){return s}function cz(s,t){t===void 0&&(t=lz);var e=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:s},useMedium:function(o){var l=t(o,n);return e.push(l),function(){e=e.filter(function(c){return c!==l})}},assignSyncMedium:function(o){for(n=!0;e.length;){var l=e;e=[],l.forEach(o)}e={push:function(c){return o(c)},filter:function(){return e}}},assignMedium:function(o){n=!0;var l=[];if(e.length){var c=e;e=[],c.forEach(o),l=e}var d=function(){var p=l;l=[],p.forEach(o)},h=function(){return Promise.resolve().then(d)};h(),e={push:function(p){l.push(p),h()},filter:function(p){return l=l.filter(p),e}}}};return a}function uz(s){s===void 0&&(s={});var t=cz(null);return t.options=$s({async:!0,ssr:!1},s),t}var Q_=function(s){var t=s.sideCar,e=K_(s,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return S.createElement(n,$s({},e))};Q_.isSideCarExport=!0;function dz(s,t){return s.useMedium(t),Q_}var Z_=uz(),qm=function(){},Rh=S.forwardRef(function(s,t){var e=S.useRef(null),n=S.useState({onScrollCapture:qm,onWheelCapture:qm,onTouchMoveCapture:qm}),a=n[0],o=n[1],l=s.forwardProps,c=s.children,d=s.className,h=s.removeScrollBar,p=s.enabled,m=s.shards,y=s.sideCar,x=s.noRelative,A=s.noIsolation,w=s.inert,C=s.allowPinchZoom,E=s.as,T=E===void 0?"div":E,R=s.gapMode,N=K_(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=y,L=oz([e,t]),k=$s($s({},N),a);return S.createElement(S.Fragment,null,p&&S.createElement(D,{sideCar:Z_,removeScrollBar:h,shards:m,noRelative:x,noIsolation:A,inert:w,setCallbacks:o,allowPinchZoom:!!C,lockRef:e,gapMode:R}),l?S.cloneElement(S.Children.only(c),$s($s({},k),{ref:L})):S.createElement(T,$s({},k,{className:d,ref:L}),c))});Rh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Rh.classNames={fullWidth:zd,zeroRight:Id};var hz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function fz(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var t=hz();return t&&s.setAttribute("nonce",t),s}function pz(s,t){s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}function mz(s){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(s)}var gz=function(){var s=0,t=null;return{add:function(e){s==0&&(t=fz())&&(pz(t,e),mz(t)),s++},remove:function(){s--,!s&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},yz=function(){var s=gz();return function(t,e){S.useEffect(function(){return s.add(t),function(){s.remove()}},[t&&e])}},J_=function(){var s=yz(),t=function(e){var n=e.styles,a=e.dynamic;return s(n,a),null};return t},vz={left:0,top:0,right:0,gap:0},Xm=function(s){return parseInt(s||"",10)||0},bz=function(s){var t=window.getComputedStyle(document.body),e=t[s==="padding"?"paddingLeft":"marginLeft"],n=t[s==="padding"?"paddingTop":"marginTop"],a=t[s==="padding"?"paddingRight":"marginRight"];return[Xm(e),Xm(n),Xm(a)]},xz=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return vz;var t=bz(s),e=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-e+t[2]-t[0])}},wz=J_(),To="data-scroll-locked",Sz=function(s,t,e,n){var a=s.left,o=s.top,l=s.right,c=s.gap;return e===void 0&&(e="margin"),`
  .`.concat(sz,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body[`).concat(To,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),e==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),e==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Id,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(zd,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Id," .").concat(Id,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(zd," .").concat(zd,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(To,`] {
    `).concat(iz,": ").concat(c,`px;
  }
`)},sA=function(){var s=parseInt(document.body.getAttribute(To)||"0",10);return isFinite(s)?s:0},Az=function(){S.useEffect(function(){return document.body.setAttribute(To,(sA()+1).toString()),function(){var s=sA()-1;s<=0?document.body.removeAttribute(To):document.body.setAttribute(To,s.toString())}},[])},Cz=function(s){var t=s.noRelative,e=s.noImportant,n=s.gapMode,a=n===void 0?"margin":n;Az();var o=S.useMemo(function(){return xz(a)},[a]);return S.createElement(wz,{styles:Sz(o,!t,a,e?"":"!important")})},zg=!1;if(typeof window<"u")try{var bd=Object.defineProperty({},"passive",{get:function(){return zg=!0,!0}});window.addEventListener("test",bd,bd),window.removeEventListener("test",bd,bd)}catch{zg=!1}var ro=zg?{passive:!1}:!1,Ez=function(s){return s.tagName==="TEXTAREA"},tT=function(s,t){if(!(s instanceof Element))return!1;var e=window.getComputedStyle(s);return e[t]!=="hidden"&&!(e.overflowY===e.overflowX&&!Ez(s)&&e[t]==="visible")},_z=function(s){return tT(s,"overflowY")},Tz=function(s){return tT(s,"overflowX")},iA=function(s,t){var e=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=eT(s,n);if(a){var o=nT(s,n),l=o[1],c=o[2];if(l>c)return!0}n=n.parentNode}while(n&&n!==e.body);return!1},Rz=function(s){var t=s.scrollTop,e=s.scrollHeight,n=s.clientHeight;return[t,e,n]},Nz=function(s){var t=s.scrollLeft,e=s.scrollWidth,n=s.clientWidth;return[t,e,n]},eT=function(s,t){return s==="v"?_z(t):Tz(t)},nT=function(s,t){return s==="v"?Rz(t):Nz(t)},Dz=function(s,t){return s==="h"&&t==="rtl"?-1:1},Mz=function(s,t,e,n,a){var o=Dz(s,window.getComputedStyle(t).direction),l=o*n,c=e.target,d=t.contains(c),h=!1,p=l>0,m=0,y=0;do{if(!c)break;var x=nT(s,c),A=x[0],w=x[1],C=x[2],E=w-C-o*A;(A||E)&&eT(s,c)&&(m+=E,y+=A);var T=c.parentNode;c=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!d&&c!==document.body||d&&(t.contains(c)||t===c));return(p&&Math.abs(m)<1||!p&&Math.abs(y)<1)&&(h=!0),h},xd=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},aA=function(s){return[s.deltaX,s.deltaY]},rA=function(s){return s&&"current"in s?s.current:s},kz=function(s,t){return s[0]===t[0]&&s[1]===t[1]},Lz=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},jz=0,oo=[];function Oz(s){var t=S.useRef([]),e=S.useRef([0,0]),n=S.useRef(),a=S.useState(jz++)[0],o=S.useState(J_)[0],l=S.useRef(s);S.useEffect(function(){l.current=s},[s]),S.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(a));var w=nz([s.lockRef.current],(s.shards||[]).map(rA),!0).filter(Boolean);return w.forEach(function(C){return C.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),w.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(a))})}}},[s.inert,s.lockRef.current,s.shards]);var c=S.useCallback(function(w,C){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!l.current.allowPinchZoom;var E=xd(w),T=e.current,R="deltaX"in w?w.deltaX:T[0]-E[0],N="deltaY"in w?w.deltaY:T[1]-E[1],D,L=w.target,k=Math.abs(R)>Math.abs(N)?"h":"v";if("touches"in w&&k==="h"&&L.type==="range")return!1;var j=window.getSelection(),P=j&&j.anchorNode,U=P?P===L||P.contains(L):!1;if(U)return!1;var H=iA(k,L);if(!H)return!0;if(H?D=k:(D=k==="v"?"h":"v",H=iA(k,L)),!H)return!1;if(!n.current&&"changedTouches"in w&&(R||N)&&(n.current=D),!D)return!0;var J=n.current||D;return Mz(J,C,w,J==="h"?R:N)},[]),d=S.useCallback(function(w){var C=w;if(!(!oo.length||oo[oo.length-1]!==o)){var E="deltaY"in C?aA(C):xd(C),T=t.current.filter(function(D){return D.name===C.type&&(D.target===C.target||C.target===D.shadowParent)&&kz(D.delta,E)})[0];if(T&&T.should){C.cancelable&&C.preventDefault();return}if(!T){var R=(l.current.shards||[]).map(rA).filter(Boolean).filter(function(D){return D.contains(C.target)}),N=R.length>0?c(C,R[0]):!l.current.noIsolation;N&&C.cancelable&&C.preventDefault()}}},[]),h=S.useCallback(function(w,C,E,T){var R={name:w,delta:C,target:E,should:T,shadowParent:Pz(E)};t.current.push(R),setTimeout(function(){t.current=t.current.filter(function(N){return N!==R})},1)},[]),p=S.useCallback(function(w){e.current=xd(w),n.current=void 0},[]),m=S.useCallback(function(w){h(w.type,aA(w),w.target,c(w,s.lockRef.current))},[]),y=S.useCallback(function(w){h(w.type,xd(w),w.target,c(w,s.lockRef.current))},[]);S.useEffect(function(){return oo.push(o),s.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:y}),document.addEventListener("wheel",d,ro),document.addEventListener("touchmove",d,ro),document.addEventListener("touchstart",p,ro),function(){oo=oo.filter(function(w){return w!==o}),document.removeEventListener("wheel",d,ro),document.removeEventListener("touchmove",d,ro),document.removeEventListener("touchstart",p,ro)}},[]);var x=s.removeScrollBar,A=s.inert;return S.createElement(S.Fragment,null,A?S.createElement(o,{styles:Lz(a)}):null,x?S.createElement(Cz,{noRelative:s.noRelative,gapMode:s.gapMode}):null)}function Pz(s){for(var t=null;s!==null;)s instanceof ShadowRoot&&(t=s.host,s=s.host),s=s.parentNode;return t}const Fz=dz(Z_,Oz);var av=S.forwardRef(function(s,t){return S.createElement(Rh,$s({},s,{ref:t,sideCar:Fz}))});av.classNames=Rh.classNames;var Bz=[" ","Enter","ArrowUp","ArrowDown"],Iz=[" ","Enter"],cr="Select",[Nh,Dh,zz]=e4(cr),[Yo]=Ah(cr,[zz,B_]),Mh=B_(),[Uz,Sa]=Yo(cr),[Vz,Hz]=Yo(cr),sT=s=>{const{__scopeSelect:t,children:e,open:n,defaultOpen:a,onOpenChange:o,value:l,defaultValue:c,onValueChange:d,dir:h,name:p,autoComplete:m,disabled:y,required:x,form:A}=s,w=Mh(t),[C,E]=S.useState(null),[T,R]=S.useState(null),[N,D]=S.useState(!1),L=s4(h),[k,j]=Ig({prop:n,defaultProp:a??!1,onChange:o,caller:cr}),[P,U]=Ig({prop:l,defaultProp:c,onChange:d,caller:cr}),H=S.useRef(null),J=C?A||!!C.closest("form"):!0,[at,q]=S.useState(new Set),rt=Array.from(at).map(O=>O.props.value).join(";");return g.jsx(V5,{...w,children:g.jsxs(Uz,{required:x,scope:t,trigger:C,onTriggerChange:E,valueNode:T,onValueNodeChange:R,valueNodeHasChildren:N,onValueNodeHasChildrenChange:D,contentId:Eo(),value:P,onValueChange:U,open:k,onOpenChange:j,dir:L,triggerPointerDownPosRef:H,disabled:y,children:[g.jsx(Nh.Provider,{scope:t,children:g.jsx(Vz,{scope:s.__scopeSelect,onNativeOptionAdd:S.useCallback(O=>{q(B=>new Set(B).add(O))},[]),onNativeOptionRemove:S.useCallback(O=>{q(B=>{const I=new Set(B);return I.delete(O),I})},[]),children:e})}),J?g.jsxs(TT,{"aria-hidden":!0,required:x,tabIndex:-1,name:p,autoComplete:m,value:P,onChange:O=>U(O.target.value),disabled:y,form:A,children:[P===void 0?g.jsx("option",{value:""}):null,Array.from(at)]},rt):null]})})};sT.displayName=cr;var iT="SelectTrigger",aT=S.forwardRef((s,t)=>{const{__scopeSelect:e,disabled:n=!1,...a}=s,o=Mh(e),l=Sa(iT,e),c=l.disabled||n,d=je(t,l.onTriggerChange),h=Dh(e),p=S.useRef("touch"),[m,y,x]=NT(w=>{const C=h().filter(R=>!R.disabled),E=C.find(R=>R.value===l.value),T=DT(C,w,E);T!==void 0&&l.onValueChange(T.value)}),A=w=>{c||(l.onOpenChange(!0),x()),w&&(l.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return g.jsx(H5,{asChild:!0,...o,children:g.jsx(fe.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":RT(l.value)?"":void 0,...a,ref:d,onClick:ge(a.onClick,w=>{w.currentTarget.focus(),p.current!=="mouse"&&A(w)}),onPointerDown:ge(a.onPointerDown,w=>{p.current=w.pointerType;const C=w.target;C.hasPointerCapture(w.pointerId)&&C.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(A(w),w.preventDefault())}),onKeyDown:ge(a.onKeyDown,w=>{const C=m.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&y(w.key),!(C&&w.key===" ")&&Bz.includes(w.key)&&(A(),w.preventDefault())})})})});aT.displayName=iT;var rT="SelectValue",oT=S.forwardRef((s,t)=>{const{__scopeSelect:e,className:n,style:a,children:o,placeholder:l="",...c}=s,d=Sa(rT,e),{onValueNodeHasChildrenChange:h}=d,p=o!==void 0,m=je(t,d.onValueNodeChange);return pn(()=>{h(p)},[h,p]),g.jsx(fe.span,{...c,ref:m,style:{pointerEvents:"none"},children:RT(d.value)?g.jsx(g.Fragment,{children:l}):o})});oT.displayName=rT;var $z="SelectIcon",lT=S.forwardRef((s,t)=>{const{__scopeSelect:e,children:n,...a}=s;return g.jsx(fe.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});lT.displayName=$z;var Gz="SelectPortal",cT=s=>g.jsx(iv,{asChild:!0,...s});cT.displayName=Gz;var ur="SelectContent",uT=S.forwardRef((s,t)=>{const e=Sa(ur,s.__scopeSelect),[n,a]=S.useState();if(pn(()=>{a(new DocumentFragment)},[]),!e.open){const o=n;return o?jc.createPortal(g.jsx(dT,{scope:s.__scopeSelect,children:g.jsx(Nh.Slot,{scope:s.__scopeSelect,children:g.jsx("div",{children:s.children})})}),o):null}return g.jsx(hT,{...s,ref:t})});uT.displayName=ur;var Cs=10,[dT,Aa]=Yo(ur),qz="SelectContentImpl",Xz=Sc("SelectContent.RemoveScroll"),hT=S.forwardRef((s,t)=>{const{__scopeSelect:e,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:l,side:c,sideOffset:d,align:h,alignOffset:p,arrowPadding:m,collisionBoundary:y,collisionPadding:x,sticky:A,hideWhenDetached:w,avoidCollisions:C,...E}=s,T=Sa(ur,e),[R,N]=S.useState(null),[D,L]=S.useState(null),k=je(t,et=>N(et)),[j,P]=S.useState(null),[U,H]=S.useState(null),J=Dh(e),[at,q]=S.useState(!1),rt=S.useRef(!1);S.useEffect(()=>{if(R)return W_(R)},[R]),A_();const O=S.useCallback(et=>{const[yt,...vt]=J().map(ut=>ut.ref.current),[Tt]=vt.slice(-1),X=document.activeElement;for(const ut of et)if(ut===X||(ut?.scrollIntoView({block:"nearest"}),ut===yt&&D&&(D.scrollTop=0),ut===Tt&&D&&(D.scrollTop=D.scrollHeight),ut?.focus(),document.activeElement!==X))return},[J,D]),B=S.useCallback(()=>O([j,R]),[O,j,R]);S.useEffect(()=>{at&&B()},[at,B]);const{onOpenChange:I,triggerPointerDownPosRef:Y}=T;S.useEffect(()=>{if(R){let et={x:0,y:0};const yt=Tt=>{et={x:Math.abs(Math.round(Tt.pageX)-(Y.current?.x??0)),y:Math.abs(Math.round(Tt.pageY)-(Y.current?.y??0))}},vt=Tt=>{et.x<=10&&et.y<=10?Tt.preventDefault():R.contains(Tt.target)||I(!1),document.removeEventListener("pointermove",yt),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",yt),document.addEventListener("pointerup",vt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",yt),document.removeEventListener("pointerup",vt,{capture:!0})}}},[R,I,Y]),S.useEffect(()=>{const et=()=>I(!1);return window.addEventListener("blur",et),window.addEventListener("resize",et),()=>{window.removeEventListener("blur",et),window.removeEventListener("resize",et)}},[I]);const[ft,F]=NT(et=>{const yt=J().filter(X=>!X.disabled),vt=yt.find(X=>X.ref.current===document.activeElement),Tt=DT(yt,et,vt);Tt&&setTimeout(()=>Tt.ref.current.focus())}),G=S.useCallback((et,yt,vt)=>{const Tt=!rt.current&&!vt;(T.value!==void 0&&T.value===yt||Tt)&&(P(et),Tt&&(rt.current=!0))},[T.value]),tt=S.useCallback(()=>R?.focus(),[R]),lt=S.useCallback((et,yt,vt)=>{const Tt=!rt.current&&!vt;(T.value!==void 0&&T.value===yt||Tt)&&H(et)},[T.value]),mt=n==="popper"?Ug:fT,st=mt===Ug?{side:c,sideOffset:d,align:h,alignOffset:p,arrowPadding:m,collisionBoundary:y,collisionPadding:x,sticky:A,hideWhenDetached:w,avoidCollisions:C}:{};return g.jsx(dT,{scope:e,content:R,viewport:D,onViewportChange:L,itemRefCallback:G,selectedItem:j,onItemLeave:tt,itemTextRefCallback:lt,focusSelectedItem:B,selectedItemText:U,position:n,isPositioned:at,searchRef:ft,children:g.jsx(av,{as:Xz,allowPinchZoom:!0,children:g.jsx(Wy,{asChild:!0,trapped:T.open,onMountAutoFocus:et=>{et.preventDefault()},onUnmountAutoFocus:ge(a,et=>{T.trigger?.focus({preventScroll:!0}),et.preventDefault()}),children:g.jsx(Yy,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:et=>et.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:g.jsx(mt,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:et=>et.preventDefault(),...E,...st,onPlaced:()=>q(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:ge(E.onKeyDown,et=>{const yt=et.ctrlKey||et.altKey||et.metaKey;if(et.key==="Tab"&&et.preventDefault(),!yt&&et.key.length===1&&F(et.key),["ArrowUp","ArrowDown","Home","End"].includes(et.key)){let Tt=J().filter(X=>!X.disabled).map(X=>X.ref.current);if(["ArrowUp","End"].includes(et.key)&&(Tt=Tt.slice().reverse()),["ArrowUp","ArrowDown"].includes(et.key)){const X=et.target,ut=Tt.indexOf(X);Tt=Tt.slice(ut+1)}setTimeout(()=>O(Tt)),et.preventDefault()}})})})})})})});hT.displayName=qz;var Yz="SelectItemAlignedPosition",fT=S.forwardRef((s,t)=>{const{__scopeSelect:e,onPlaced:n,...a}=s,o=Sa(ur,e),l=Aa(ur,e),[c,d]=S.useState(null),[h,p]=S.useState(null),m=je(t,k=>p(k)),y=Dh(e),x=S.useRef(!1),A=S.useRef(!0),{viewport:w,selectedItem:C,selectedItemText:E,focusSelectedItem:T}=l,R=S.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&h&&w&&C&&E){const k=o.trigger.getBoundingClientRect(),j=h.getBoundingClientRect(),P=o.valueNode.getBoundingClientRect(),U=E.getBoundingClientRect();if(o.dir!=="rtl"){const X=U.left-j.left,ut=P.left-X,ht=k.left-ut,pt=k.width+ht,Z=Math.max(pt,j.width),dt=window.innerWidth-Cs,_t=P1(ut,[Cs,Math.max(Cs,dt-Z)]);c.style.minWidth=pt+"px",c.style.left=_t+"px"}else{const X=j.right-U.right,ut=window.innerWidth-P.right-X,ht=window.innerWidth-k.right-ut,pt=k.width+ht,Z=Math.max(pt,j.width),dt=window.innerWidth-Cs,_t=P1(ut,[Cs,Math.max(Cs,dt-Z)]);c.style.minWidth=pt+"px",c.style.right=_t+"px"}const H=y(),J=window.innerHeight-Cs*2,at=w.scrollHeight,q=window.getComputedStyle(h),rt=parseInt(q.borderTopWidth,10),O=parseInt(q.paddingTop,10),B=parseInt(q.borderBottomWidth,10),I=parseInt(q.paddingBottom,10),Y=rt+O+at+I+B,ft=Math.min(C.offsetHeight*5,Y),F=window.getComputedStyle(w),G=parseInt(F.paddingTop,10),tt=parseInt(F.paddingBottom,10),lt=k.top+k.height/2-Cs,mt=J-lt,st=C.offsetHeight/2,et=C.offsetTop+st,yt=rt+O+et,vt=Y-yt;if(yt<=lt){const X=H.length>0&&C===H[H.length-1].ref.current;c.style.bottom="0px";const ut=h.clientHeight-w.offsetTop-w.offsetHeight,ht=Math.max(mt,st+(X?tt:0)+ut+B),pt=yt+ht;c.style.height=pt+"px"}else{const X=H.length>0&&C===H[0].ref.current;c.style.top="0px";const ht=Math.max(lt,rt+w.offsetTop+(X?G:0)+st)+vt;c.style.height=ht+"px",w.scrollTop=yt-lt+w.offsetTop}c.style.margin=`${Cs}px 0`,c.style.minHeight=ft+"px",c.style.maxHeight=J+"px",n?.(),requestAnimationFrame(()=>x.current=!0)}},[y,o.trigger,o.valueNode,c,h,w,C,E,o.dir,n]);pn(()=>R(),[R]);const[N,D]=S.useState();pn(()=>{h&&D(window.getComputedStyle(h).zIndex)},[h]);const L=S.useCallback(k=>{k&&A.current===!0&&(R(),T?.(),A.current=!1)},[R,T]);return g.jsx(Kz,{scope:e,contentWrapper:c,shouldExpandOnScrollRef:x,onScrollButtonChange:L,children:g.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:g.jsx(fe.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});fT.displayName=Yz;var Wz="SelectPopperPosition",Ug=S.forwardRef((s,t)=>{const{__scopeSelect:e,align:n="start",collisionPadding:a=Cs,...o}=s,l=Mh(e);return g.jsx($5,{...l,...o,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ug.displayName=Wz;var[Kz,rv]=Yo(ur,{}),Vg="SelectViewport",pT=S.forwardRef((s,t)=>{const{__scopeSelect:e,nonce:n,...a}=s,o=Aa(Vg,e),l=rv(Vg,e),c=je(t,o.onViewportChange),d=S.useRef(0);return g.jsxs(g.Fragment,{children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),g.jsx(Nh.Slot,{scope:e,children:g.jsx(fe.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:ge(a.onScroll,h=>{const p=h.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:y}=l;if(y?.current&&m){const x=Math.abs(d.current-p.scrollTop);if(x>0){const A=window.innerHeight-Cs*2,w=parseFloat(m.style.minHeight),C=parseFloat(m.style.height),E=Math.max(w,C);if(E<A){const T=E+x,R=Math.min(A,T),N=T-R;m.style.height=R+"px",m.style.bottom==="0px"&&(p.scrollTop=N>0?N:0,m.style.justifyContent="flex-end")}}}d.current=p.scrollTop})})})]})});pT.displayName=Vg;var mT="SelectGroup",[Qz,Zz]=Yo(mT),Jz=S.forwardRef((s,t)=>{const{__scopeSelect:e,...n}=s,a=Eo();return g.jsx(Qz,{scope:e,id:a,children:g.jsx(fe.div,{role:"group","aria-labelledby":a,...n,ref:t})})});Jz.displayName=mT;var gT="SelectLabel",yT=S.forwardRef((s,t)=>{const{__scopeSelect:e,...n}=s,a=Zz(gT,e);return g.jsx(fe.div,{id:a.id,...n,ref:t})});yT.displayName=gT;var ah="SelectItem",[tU,vT]=Yo(ah),bT=S.forwardRef((s,t)=>{const{__scopeSelect:e,value:n,disabled:a=!1,textValue:o,...l}=s,c=Sa(ah,e),d=Aa(ah,e),h=c.value===n,[p,m]=S.useState(o??""),[y,x]=S.useState(!1),A=je(t,T=>d.itemRefCallback?.(T,n,a)),w=Eo(),C=S.useRef("touch"),E=()=>{a||(c.onValueChange(n),c.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return g.jsx(tU,{scope:e,value:n,disabled:a,textId:w,isSelected:h,onItemTextChange:S.useCallback(T=>{m(R=>R||(T?.textContent??"").trim())},[]),children:g.jsx(Nh.ItemSlot,{scope:e,value:n,disabled:a,textValue:p,children:g.jsx(fe.div,{role:"option","aria-labelledby":w,"data-highlighted":y?"":void 0,"aria-selected":h&&y,"data-state":h?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:A,onFocus:ge(l.onFocus,()=>x(!0)),onBlur:ge(l.onBlur,()=>x(!1)),onClick:ge(l.onClick,()=>{C.current!=="mouse"&&E()}),onPointerUp:ge(l.onPointerUp,()=>{C.current==="mouse"&&E()}),onPointerDown:ge(l.onPointerDown,T=>{C.current=T.pointerType}),onPointerMove:ge(l.onPointerMove,T=>{C.current=T.pointerType,a?d.onItemLeave?.():C.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ge(l.onPointerLeave,T=>{T.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:ge(l.onKeyDown,T=>{d.searchRef?.current!==""&&T.key===" "||(Iz.includes(T.key)&&E(),T.key===" "&&T.preventDefault())})})})})});bT.displayName=ah;var nc="SelectItemText",xT=S.forwardRef((s,t)=>{const{__scopeSelect:e,className:n,style:a,...o}=s,l=Sa(nc,e),c=Aa(nc,e),d=vT(nc,e),h=Hz(nc,e),[p,m]=S.useState(null),y=je(t,E=>m(E),d.onItemTextChange,E=>c.itemTextRefCallback?.(E,d.value,d.disabled)),x=p?.textContent,A=S.useMemo(()=>g.jsx("option",{value:d.value,disabled:d.disabled,children:x},d.value),[d.disabled,d.value,x]),{onNativeOptionAdd:w,onNativeOptionRemove:C}=h;return pn(()=>(w(A),()=>C(A)),[w,C,A]),g.jsxs(g.Fragment,{children:[g.jsx(fe.span,{id:d.textId,...o,ref:y}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?jc.createPortal(o.children,l.valueNode):null]})});xT.displayName=nc;var wT="SelectItemIndicator",ST=S.forwardRef((s,t)=>{const{__scopeSelect:e,...n}=s;return vT(wT,e).isSelected?g.jsx(fe.span,{"aria-hidden":!0,...n,ref:t}):null});ST.displayName=wT;var Hg="SelectScrollUpButton",AT=S.forwardRef((s,t)=>{const e=Aa(Hg,s.__scopeSelect),n=rv(Hg,s.__scopeSelect),[a,o]=S.useState(!1),l=je(t,n.onScrollButtonChange);return pn(()=>{if(e.viewport&&e.isPositioned){let c=function(){const h=d.scrollTop>0;o(h)};const d=e.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[e.viewport,e.isPositioned]),a?g.jsx(ET,{...s,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=e;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});AT.displayName=Hg;var $g="SelectScrollDownButton",CT=S.forwardRef((s,t)=>{const e=Aa($g,s.__scopeSelect),n=rv($g,s.__scopeSelect),[a,o]=S.useState(!1),l=je(t,n.onScrollButtonChange);return pn(()=>{if(e.viewport&&e.isPositioned){let c=function(){const h=d.scrollHeight-d.clientHeight,p=Math.ceil(d.scrollTop)<h;o(p)};const d=e.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[e.viewport,e.isPositioned]),a?g.jsx(ET,{...s,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=e;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});CT.displayName=$g;var ET=S.forwardRef((s,t)=>{const{__scopeSelect:e,onAutoScroll:n,...a}=s,o=Aa("SelectScrollButton",e),l=S.useRef(null),c=Dh(e),d=S.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return S.useEffect(()=>()=>d(),[d]),pn(()=>{c().find(p=>p.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),g.jsx(fe.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:ge(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(n,50))}),onPointerMove:ge(a.onPointerMove,()=>{o.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(n,50))}),onPointerLeave:ge(a.onPointerLeave,()=>{d()})})}),eU="SelectSeparator",_T=S.forwardRef((s,t)=>{const{__scopeSelect:e,...n}=s;return g.jsx(fe.div,{"aria-hidden":!0,...n,ref:t})});_T.displayName=eU;var Gg="SelectArrow",nU=S.forwardRef((s,t)=>{const{__scopeSelect:e,...n}=s,a=Mh(e),o=Sa(Gg,e),l=Aa(Gg,e);return o.open&&l.position==="popper"?g.jsx(G5,{...a,...n,ref:t}):null});nU.displayName=Gg;var sU="SelectBubbleInput",TT=S.forwardRef(({__scopeSelect:s,value:t,...e},n)=>{const a=S.useRef(null),o=je(n,a),l=K5(t);return S.useEffect(()=>{const c=a.current;if(!c)return;const d=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==t&&p){const m=new Event("change",{bubbles:!0});p.call(c,t),c.dispatchEvent(m)}},[l,t]),g.jsx(fe.select,{...e,style:{...X_,...e.style},ref:o,defaultValue:t})});TT.displayName=sU;function RT(s){return s===""||s===void 0}function NT(s){const t=or(s),e=S.useRef(""),n=S.useRef(0),a=S.useCallback(l=>{const c=e.current+l;t(c),(function d(h){e.current=h,window.clearTimeout(n.current),h!==""&&(n.current=window.setTimeout(()=>d(""),1e3))})(c)},[t]),o=S.useCallback(()=>{e.current="",window.clearTimeout(n.current)},[]);return S.useEffect(()=>()=>window.clearTimeout(n.current),[]),[e,a,o]}function DT(s,t,e){const a=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,o=e?s.indexOf(e):-1;let l=iU(s,Math.max(o,0));a.length===1&&(l=l.filter(h=>h!==e));const d=l.find(h=>h.textValue.toLowerCase().startsWith(a.toLowerCase()));return d!==e?d:void 0}function iU(s,t){return s.map((e,n)=>s[(t+n)%s.length])}var aU=sT,MT=aT,rU=oT,oU=lT,lU=cT,kT=uT,cU=pT,LT=yT,jT=bT,uU=xT,dU=ST,OT=AT,PT=CT,FT=_T;const xn=aU,wn=rU,un=S.forwardRef(({className:s,children:t,...e},n)=>g.jsxs(MT,{ref:n,className:Zt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...e,children:[t,g.jsx(oU,{asChild:!0,children:g.jsx(wh,{className:"h-4 w-4 opacity-50"})})]}));un.displayName=MT.displayName;const BT=S.forwardRef(({className:s,...t},e)=>g.jsx(OT,{ref:e,className:Zt("flex cursor-default items-center justify-center py-1",s),...t,children:g.jsx(i_,{className:"h-4 w-4"})}));BT.displayName=OT.displayName;const IT=S.forwardRef(({className:s,...t},e)=>g.jsx(PT,{ref:e,className:Zt("flex cursor-default items-center justify-center py-1",s),...t,children:g.jsx(wh,{className:"h-4 w-4"})}));IT.displayName=PT.displayName;const dn=S.forwardRef(({className:s,children:t,position:e="popper",...n},a)=>g.jsx(lU,{children:g.jsxs(kT,{ref:a,className:Zt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:e,...n,children:[g.jsx(BT,{}),g.jsx(cU,{className:Zt("p-1",e==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),g.jsx(IT,{})]})}));dn.displayName=kT.displayName;const hU=S.forwardRef(({className:s,...t},e)=>g.jsx(LT,{ref:e,className:Zt("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));hU.displayName=LT.displayName;const Ke=S.forwardRef(({className:s,children:t,...e},n)=>g.jsxs(jT,{ref:n,className:Zt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...e,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(dU,{children:g.jsx(s_,{className:"h-4 w-4"})})}),g.jsx(uU,{children:t})]}));Ke.displayName=jT.displayName;const fU=S.forwardRef(({className:s,...t},e)=>g.jsx(FT,{ref:e,className:Zt("-mx-1 my-1 h-px bg-muted",s),...t}));fU.displayName=FT.displayName;const Pn=S.forwardRef(({className:s,type:t,...e},n)=>g.jsx("input",{type:t,className:Zt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:n,...e}));Pn.displayName="Input";var pU=Symbol.for("react.lazy"),rh=oy[" use ".trim().toString()];function mU(s){return typeof s=="object"&&s!==null&&"then"in s}function zT(s){return s!=null&&typeof s=="object"&&"$$typeof"in s&&s.$$typeof===pU&&"_payload"in s&&mU(s._payload)}function gU(s){const t=yU(s),e=S.forwardRef((n,a)=>{let{children:o,...l}=n;zT(o)&&typeof rh=="function"&&(o=rh(o._payload));const c=S.Children.toArray(o),d=c.find(bU);if(d){const h=d.props.children,p=c.map(m=>m===d?S.Children.count(h)>1?S.Children.only(null):S.isValidElement(h)?h.props.children:null:m);return g.jsx(t,{...l,ref:a,children:S.isValidElement(h)?S.cloneElement(h,void 0,p):null})}return g.jsx(t,{...l,ref:a,children:o})});return e.displayName=`${s}.Slot`,e}function yU(s){const t=S.forwardRef((e,n)=>{let{children:a,...o}=e;if(zT(a)&&typeof rh=="function"&&(a=rh(a._payload)),S.isValidElement(a)){const l=wU(a),c=xU(o,a.props);return a.type!==S.Fragment&&(c.ref=n?Xy(n,l):l),S.cloneElement(a,c)}return S.Children.count(a)>1?S.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var vU=Symbol("radix.slottable");function bU(s){return S.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===vU}function xU(s,t){const e={...t};for(const n in t){const a=s[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?e[n]=(...c)=>{const d=o(...c);return a(...c),d}:a&&(e[n]=a):n==="style"?e[n]={...a,...o}:n==="className"&&(e[n]=[a,o].filter(Boolean).join(" "))}return{...s,...e}}function wU(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}var SU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],AU=SU.reduce((s,t)=>{const e=gU(`Primitive.${t}`),n=S.forwardRef((a,o)=>{const{asChild:l,...c}=a,d=l?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(d,{...c,ref:o})});return n.displayName=`Primitive.${t}`,{...s,[t]:n}},{}),CU="Label",UT=S.forwardRef((s,t)=>g.jsx(AU.label,{...s,ref:t,onMouseDown:e=>{e.target.closest("button, input, select, textarea")||(s.onMouseDown?.(e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}}));UT.displayName=CU;var VT=UT;const EU=qy("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Jt=S.forwardRef(({className:s,...t},e)=>g.jsx(VT,{ref:e,className:Zt(EU(),s),...t}));Jt.displayName=VT.displayName;const ra=S.forwardRef(({className:s,...t},e)=>g.jsx("textarea",{className:Zt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:e,...t}));ra.displayName="Textarea";function _U(s,t){return S.useReducer((e,n)=>t[e][n]??e,s)}var kh=s=>{const{present:t,children:e}=s,n=TU(t),a=typeof e=="function"?e({present:n.isPresent}):S.Children.only(e),o=je(n.ref,RU(a));return typeof e=="function"||n.isPresent?S.cloneElement(a,{ref:o}):null};kh.displayName="Presence";function TU(s){const[t,e]=S.useState(),n=S.useRef(null),a=S.useRef(s),o=S.useRef("none"),l=s?"mounted":"unmounted",[c,d]=_U(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const h=wd(n.current);o.current=c==="mounted"?h:"none"},[c]),pn(()=>{const h=n.current,p=a.current;if(p!==s){const y=o.current,x=wd(h);s?d("MOUNT"):x==="none"||h?.display==="none"?d("UNMOUNT"):d(p&&y!==x?"ANIMATION_OUT":"UNMOUNT"),a.current=s}},[s,d]),pn(()=>{if(t){let h;const p=t.ownerDocument.defaultView??window,m=x=>{const w=wd(n.current).includes(CSS.escape(x.animationName));if(x.target===t&&w&&(d("ANIMATION_END"),!a.current)){const C=t.style.animationFillMode;t.style.animationFillMode="forwards",h=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=C)})}},y=x=>{x.target===t&&(o.current=wd(n.current))};return t.addEventListener("animationstart",y),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{p.clearTimeout(h),t.removeEventListener("animationstart",y),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:S.useCallback(h=>{n.current=h?getComputedStyle(h):null,e(h)},[])}}function wd(s){return s?.animationName||"none"}function RU(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}var Lh="Dialog",[HT]=Ah(Lh),[NU,Ds]=HT(Lh),$T=s=>{const{__scopeDialog:t,children:e,open:n,defaultOpen:a,onOpenChange:o,modal:l=!0}=s,c=S.useRef(null),d=S.useRef(null),[h,p]=Ig({prop:n,defaultProp:a??!1,onChange:o,caller:Lh});return g.jsx(NU,{scope:t,triggerRef:c,contentRef:d,contentId:Eo(),titleId:Eo(),descriptionId:Eo(),open:h,onOpenChange:p,onOpenToggle:S.useCallback(()=>p(m=>!m),[p]),modal:l,children:e})};$T.displayName=Lh;var GT="DialogTrigger",DU=S.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Ds(GT,e),o=je(t,a.triggerRef);return g.jsx(fe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":cv(a.open),...n,ref:o,onClick:ge(s.onClick,a.onOpenToggle)})});DU.displayName=GT;var ov="DialogPortal",[MU,qT]=HT(ov,{forceMount:void 0}),XT=s=>{const{__scopeDialog:t,forceMount:e,children:n,container:a}=s,o=Ds(ov,t);return g.jsx(MU,{scope:t,forceMount:e,children:S.Children.map(n,l=>g.jsx(kh,{present:e||o.open,children:g.jsx(iv,{asChild:!0,container:a,children:l})}))})};XT.displayName=ov;var oh="DialogOverlay",YT=S.forwardRef((s,t)=>{const e=qT(oh,s.__scopeDialog),{forceMount:n=e.forceMount,...a}=s,o=Ds(oh,s.__scopeDialog);return o.modal?g.jsx(kh,{present:n||o.open,children:g.jsx(LU,{...a,ref:t})}):null});YT.displayName=oh;var kU=Sc("DialogOverlay.RemoveScroll"),LU=S.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Ds(oh,e);return g.jsx(av,{as:kU,allowPinchZoom:!0,shards:[a.contentRef],children:g.jsx(fe.div,{"data-state":cv(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),dr="DialogContent",WT=S.forwardRef((s,t)=>{const e=qT(dr,s.__scopeDialog),{forceMount:n=e.forceMount,...a}=s,o=Ds(dr,s.__scopeDialog);return g.jsx(kh,{present:n||o.open,children:o.modal?g.jsx(jU,{...a,ref:t}):g.jsx(OU,{...a,ref:t})})});WT.displayName=dr;var jU=S.forwardRef((s,t)=>{const e=Ds(dr,s.__scopeDialog),n=S.useRef(null),a=je(t,e.contentRef,n);return S.useEffect(()=>{const o=n.current;if(o)return W_(o)},[]),g.jsx(KT,{...s,ref:a,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(s.onCloseAutoFocus,o=>{o.preventDefault(),e.triggerRef.current?.focus()}),onPointerDownOutside:ge(s.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&o.preventDefault()}),onFocusOutside:ge(s.onFocusOutside,o=>o.preventDefault())})}),OU=S.forwardRef((s,t)=>{const e=Ds(dr,s.__scopeDialog),n=S.useRef(!1),a=S.useRef(!1);return g.jsx(KT,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{s.onCloseAutoFocus?.(o),o.defaultPrevented||(n.current||e.triggerRef.current?.focus(),o.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:o=>{s.onInteractOutside?.(o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=o.target;e.triggerRef.current?.contains(l)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),KT=S.forwardRef((s,t)=>{const{__scopeDialog:e,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,...l}=s,c=Ds(dr,e),d=S.useRef(null),h=je(t,d);return A_(),g.jsxs(g.Fragment,{children:[g.jsx(Wy,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o,children:g.jsx(Yy,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":cv(c.open),...l,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),g.jsxs(g.Fragment,{children:[g.jsx(PU,{titleId:c.titleId}),g.jsx(BU,{contentRef:d,descriptionId:c.descriptionId})]})]})}),lv="DialogTitle",QT=S.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Ds(lv,e);return g.jsx(fe.h2,{id:a.titleId,...n,ref:t})});QT.displayName=lv;var ZT="DialogDescription",JT=S.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Ds(ZT,e);return g.jsx(fe.p,{id:a.descriptionId,...n,ref:t})});JT.displayName=ZT;var tR="DialogClose",eR=S.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Ds(tR,e);return g.jsx(fe.button,{type:"button",...n,ref:t,onClick:ge(s.onClick,()=>a.onOpenChange(!1))})});eR.displayName=tR;function cv(s){return s?"open":"closed"}var nR="DialogTitleWarning",[FH,sR]=YI(nR,{contentName:dr,titleName:lv,docsSlug:"dialog"}),PU=({titleId:s})=>{const t=sR(nR),e=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return S.useEffect(()=>{s&&(document.getElementById(s)||console.error(e))},[e,s]),null},FU="DialogDescriptionWarning",BU=({contentRef:s,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${sR(FU).contentName}}.`;return S.useEffect(()=>{const a=s.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,s,t]),null},IU=$T,zU=XT,iR=YT,aR=WT,rR=QT,oR=JT,UU=eR;const Wa=IU,VU=zU,lR=S.forwardRef(({className:s,...t},e)=>g.jsx(iR,{ref:e,className:Zt("fixed inset-0 z-50 bg-black/80",s),...t}));lR.displayName=iR.displayName;const oa=S.forwardRef(({className:s,children:t,...e},n)=>g.jsxs(VU,{children:[g.jsx(lR,{}),g.jsxs(aR,{ref:n,className:Zt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg",s),...e,children:[t,g.jsxs(UU,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[g.jsx(ha,{className:"h-4 w-4"}),g.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));oa.displayName=aR.displayName;const la=({className:s,...t})=>g.jsx("div",{className:Zt("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});la.displayName="DialogHeader";const co=({className:s,...t})=>g.jsx("div",{className:Zt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});co.displayName="DialogFooter";const ca=S.forwardRef(({className:s,...t},e)=>g.jsx(rR,{ref:e,className:Zt("text-lg font-semibold leading-none tracking-tight",s),...t}));ca.displayName=rR.displayName;const uo=S.forwardRef(({className:s,...t},e)=>g.jsx(oR,{ref:e,className:Zt("text-sm text-muted-foreground",s),...t}));uo.displayName=oR.displayName;function HU({open:s,onOpenChange:t,onCorrespondentCreated:e}){const[n,a]=S.useState(!1),[o,l]=S.useState(""),[c,d]=S.useState(" "),[h,p]=S.useState(""),[m,y]=S.useState(""),[x,A]=S.useState(""),[w,C]=S.useState(""),[E,T]=S.useState(""),[R,N]=S.useState(""),D=async()=>{if(!o){alert("  ");return}a(!0);try{const k=await fetch(`${window.location.origin}/api/resource/EDO Correspondent`,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":kt.getCSRFToken()},body:JSON.stringify({correspondent_name:o,correspondent_type:c,organization_name:h,inn:m,address:x,contact_person:w,phone:E,email:R})});if(!k.ok){const U=await k.json();throw new Error(U.message||"Failed to create correspondent")}const j=await k.json(),P={name:j.data.name,correspondent_name:j.data.correspondent_name};e?.(P),L(),t(!1)}catch(k){console.error("Failed to create correspondent:",k),alert("   ")}finally{a(!1)}},L=()=>{l(""),d(" "),p(""),y(""),A(""),C(""),T(""),N("")};return g.jsx(Wa,{open:s,onOpenChange:t,children:g.jsxs(oa,{className:"max-w-2xl",children:[g.jsx(la,{className:"text-left",children:g.jsx(ca,{className:"text-xl",children:" "})}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs(Jt,{htmlFor:"correspondent_name",children:[" ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx(Pn,{id:"correspondent_name",placeholder:"  ",value:o,onChange:k=>l(k.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{htmlFor:"correspondent_type",children:" "}),g.jsxs(xn,{value:c,onValueChange:d,children:[g.jsx(un,{children:g.jsx(wn,{})}),g.jsxs(dn,{children:[g.jsx(Ke,{value:" ",children:" "}),g.jsx(Ke,{value:" ",children:" "}),g.jsx(Ke,{value:" ",children:" "})]})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{htmlFor:"organization",children:"  "}),g.jsx(Pn,{id:"organization",placeholder:" ",value:h,onChange:k=>p(k.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{htmlFor:"inn",children:""}),g.jsx(Pn,{id:"inn",placeholder:"1234567890",value:m,onChange:k=>y(k.target.value)})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{htmlFor:"address",children:""}),g.jsx(ra,{id:"address",placeholder:". , . , . 1",rows:2,value:x,onChange:k=>A(k.target.value)})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{htmlFor:"contact_person",children:" "}),g.jsx(Pn,{id:"contact_person",placeholder:" ..",value:w,onChange:k=>C(k.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{htmlFor:"phone",children:""}),g.jsx(Pn,{id:"phone",placeholder:"+998 90 123 45 67",value:E,onChange:k=>T(k.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{htmlFor:"email",children:"Email"}),g.jsx(Pn,{id:"email",type:"email",placeholder:"info@example.com",value:R,onChange:k=>N(k.target.value)})]})]})]}),g.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 border-t",children:[g.jsx(Ht,{type:"button",variant:"outline",onClick:()=>{L(),t(!1)},children:""}),g.jsx(Ht,{type:"button",onClick:D,disabled:n,className:"bg-blue-600 hover:bg-blue-700 text-white",children:n?"...":""})]})]})})}function qg({users:s,value:t,onChange:e,placeholder:n=" ",disabled:a=!1}){const[o,l]=S.useState(!1),[c,d]=S.useState(""),h=s.find(m=>m.name===t),p=S.useMemo(()=>{if(!c.trim())return s;const m=c.toLowerCase();return s.filter(y=>(y.full_name||"").toLowerCase().includes(m)||y.name.toLowerCase().includes(m)||(y.email||"").toLowerCase().includes(m))},[s,c]);return g.jsxs("div",{className:"relative",children:[g.jsxs(Ht,{type:"button",variant:"outline",role:"combobox","aria-expanded":o,disabled:a,className:"w-full justify-between font-normal",onClick:()=>l(!o),children:[h?g.jsxs("div",{className:"flex items-center gap-2",children:[h.user_image?g.jsx("img",{src:h.user_image,alt:"",className:"w-5 h-5 rounded-full"}):g.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-300 flex items-center justify-center text-xs",children:(h.full_name||h.name).charAt(0).toUpperCase()}),g.jsx("span",{className:"truncate",children:h.full_name||h.name})]}):g.jsx("span",{className:"text-muted-foreground",children:n}),g.jsx($B,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}),o&&g.jsxs("div",{className:"absolute z-50 mt-1 w-full rounded-md border bg-white shadow-lg",children:[g.jsx("div",{className:"p-2 border-b",children:g.jsxs("div",{className:"relative",children:[g.jsx(Sh,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),g.jsx(Pn,{placeholder:"...",value:c,onChange:m=>d(m.target.value),className:"pl-8",autoFocus:!0})]})}),g.jsx("div",{className:"max-h-60 overflow-y-auto p-1",children:p.length===0?g.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"  "}):p.map(m=>g.jsxs("div",{className:Zt("flex items-center gap-2 px-2 py-2 cursor-pointer rounded hover:bg-gray-100",t===m.name&&"bg-blue-50"),onClick:()=>{e(m.name),l(!1),d("")},children:[g.jsx(s_,{className:Zt("h-4 w-4",t===m.name?"opacity-100":"opacity-0")}),m.user_image?g.jsx("img",{src:m.user_image,alt:"",className:"w-6 h-6 rounded-full"}):g.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-xs",children:(m.full_name||m.name).charAt(0).toUpperCase()}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-sm font-medium truncate",children:m.full_name||m.name}),g.jsx("div",{className:"text-xs text-muted-foreground truncate",children:m.email})]})]},m.name))})]}),o&&g.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)})]})}function Xg({users:s,value:t,onChange:e,placeholder:n=" ",disabled:a=!1,excludeUsers:o=[]}){const[l,c]=S.useState(!1),[d,h]=S.useState(""),p=S.useMemo(()=>s.filter(w=>!o.includes(w.name)),[s,o]),m=S.useMemo(()=>{if(!d.trim())return p;const w=d.toLowerCase();return p.filter(C=>(C.full_name||"").toLowerCase().includes(w)||C.name.toLowerCase().includes(w)||(C.email||"").toLowerCase().includes(w))},[p,d]),y=s.filter(w=>t.includes(w.name)),x=w=>{t.includes(w)?e(t.filter(C=>C!==w)):e([...t,w])},A=w=>{e(t.filter(C=>C!==w))};return g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:Zt("min-h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm cursor-pointer",a&&"opacity-50 cursor-not-allowed"),onClick:()=>!a&&c(!l),children:y.length>0?g.jsx("div",{className:"flex flex-wrap gap-1",children:y.map(w=>g.jsxs("span",{className:"inline-flex items-center gap-1 bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs",children:[w.full_name||w.name,g.jsx(ha,{className:"h-3 w-3 cursor-pointer hover:text-blue-600",onClick:C=>{C.stopPropagation(),A(w.name)}})]},w.name))}):g.jsx("span",{className:"text-muted-foreground",children:n})}),l&&g.jsxs("div",{className:"absolute z-50 mt-1 w-full rounded-md border bg-white shadow-lg",children:[g.jsx("div",{className:"p-2 border-b",children:g.jsxs("div",{className:"relative",children:[g.jsx(Sh,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),g.jsx(Pn,{placeholder:"...",value:d,onChange:w=>h(w.target.value),className:"pl-8",autoFocus:!0})]})}),g.jsx("div",{className:"max-h-60 overflow-y-auto p-1",children:m.length===0?g.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"  "}):m.map(w=>g.jsxs("div",{className:Zt("flex items-center gap-2 px-2 py-2 cursor-pointer rounded hover:bg-gray-100",t.includes(w.name)&&"bg-blue-50"),onClick:()=>x(w.name),children:[g.jsx("input",{type:"checkbox",checked:t.includes(w.name),onChange:()=>{},className:"rounded border-gray-300"}),w.user_image?g.jsx("img",{src:w.user_image,alt:"",className:"w-6 h-6 rounded-full"}):g.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-xs",children:(w.full_name||w.name).charAt(0).toUpperCase()}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-sm font-medium truncate",children:w.full_name||w.name}),g.jsx("div",{className:"text-xs text-muted-foreground truncate",children:w.email})]})]},w.name))})]}),l&&g.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)})]})}function cR({open:s,onOpenChange:t,onDocumentCreated:e,editDocument:n,onDocumentUpdated:a}){const o=!!n,[l,c]=S.useState(!1),[d,h]=S.useState(!1),[p,m]=S.useState(!1),[y,x]=S.useState(""),[A,w]=S.useState(""),[C,E]=S.useState(""),[T,R]=S.useState(""),[N,D]=S.useState(""),[L,k]=S.useState(""),[j,P]=S.useState(""),[U,H]=S.useState(""),[J,at]=S.useState(""),[q,rt]=S.useState(""),[O,B]=S.useState(""),[I,Y]=S.useState(""),[ft,F]=S.useState(null),[G,tt]=S.useState([]),[lt,mt]=S.useState(null),[st,et]=S.useState([]),[yt,vt]=S.useState(""),[Tt,X]=S.useState([]),[ut,ht]=S.useState([]),[pt,Z]=S.useState([]),[dt,_t]=S.useState([]),[Lt,qt]=S.useState([]),[te,Bn]=S.useState([]),[Jn,Ca]=S.useState([]),[Ge,Qo]=S.useState([]),[Js,vr]=S.useState([]);S.useEffect(()=>{s&&(mn(),Ms(),n?(x(n.incoming_number||""),w(n.incoming_date||""),E(n.outgoing_number||""),R(n.outgoing_date||""),D(n.title||""),k(n.correspondent||""),P(n.document_type||""),H(n.priority||""),at(n.brief_content||""),rt(n.classification||""),B(n.delivery_method||""),Y(n.reception_office||""),vt(n.executor||""),X(n.co_executors?.map(gt=>gt.user)||[]),mt(n.main_document||null),et(n.attachments||[])):w(new Date().toISOString().split("T")[0]))},[s,n]);const mn=async()=>{try{const gt=await kt.getCurrentUser();vr(gt.roles||[])}catch(gt){console.error("Failed to load user roles:",gt)}},Ms=async()=>{try{const[gt,ve,In,ts,Ue,Mi,_a]=await Promise.all([kt.getCorrespondents(),kt.getDocumentTypes(),kt.getPriorities(),kt.getClassifications(),kt.getDeliveryMethods(),kt.getReceptionOffices(),kt.getUsers()]);ht(gt),Z(ve),_t(In),qt(ts),Bn(Ue),Ca(Mi),Qo(_a)}catch(gt){console.error("Failed to load reference data:",gt)}},on=Js.includes("EDO Manager")||Js.includes("EDO Admin"),Di=Js.includes("EDO Reception")||Js.includes("EDO Admin"),Hh=gt=>{gt.target.files&&gt.target.files[0]&&F(gt.target.files[0])},Ea=gt=>{if(gt.target.files){const ve=Array.from(gt.target.files);tt([...G,...ve])}},gn=gt=>{tt(G.filter((ve,In)=>In!==gt))},ks=gt=>{et(st.filter((ve,In)=>In!==gt))},yn=async gt=>{const ve=await kt.getCorrespondents();ht(ve),k(gt.name)},$h=async()=>{if(!L||!j){alert("  ");return}if(on&&!I){alert(" ");return}c(!0);try{h(!0);let gt=lt||"";ft&&(gt=await kt.uploadFile(ft));const ve=[];for(const Ue of G){const Mi=await kt.uploadFile(Ue);ve.push({attachment:Mi,file_name:Ue.name,file_size:Ue.size})}const In=[...st,...ve];h(!1);const ts={incoming_number:y||void 0,incoming_date:A||void 0,outgoing_number:C||void 0,outgoing_date:T||void 0,title:N||void 0,correspondent:L,document_type:j,priority:U||void 0,brief_content:J||void 0,classification:q||void 0,delivery_method:O||void 0,main_document:gt||void 0,attachments:In.length>0?In:void 0};if(on&&I&&(ts.reception_office=I),Di&&(yt&&(ts.executor=yt),Tt.length>0&&(ts.co_executors=Tt.map(Ue=>({user:Ue})))),o&&n){const Ue=await kt.updateDocument(n.name,ts);a?.(Ue)}else{const Ue=await kt.createDocument(ts);e?.(Ue)}Wc(),t(!1)}catch(gt){console.error(o?"Failed to update document:":"Failed to create document:",gt);let ve=o?"   ":"   ";gt?.message&&(ve+=": "+gt.message),alert(ve)}finally{c(!1),h(!1)}},Wc=()=>{x(""),w(""),E(""),R(""),D(""),k(""),P(""),H(""),at(""),rt(""),B(""),Y(""),F(null),tt([]),vt(""),X([]),mt(null),et([])};return g.jsxs(g.Fragment,{children:[g.jsx(Wa,{open:s,onOpenChange:t,children:g.jsxs(oa,{className:"max-w-4xl max-h-[90vh] overflow-y-auto custom-scrollbar",children:[g.jsx(la,{className:"text-left",children:g.jsx(ca,{className:"text-xl",children:o?" ":" "})}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-base font-semibold",children:" "}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs(Jt,{htmlFor:"incoming_number",children:["  ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx(Pn,{id:"incoming_number",placeholder:" ",value:y,onChange:gt=>x(gt.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs(Jt,{htmlFor:"incoming_date",children:["  ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx(Pn,{id:"incoming_date",type:"date",value:A,onChange:gt=>w(gt.target.value)})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{htmlFor:"outgoing_number",children:" "}),g.jsx(Pn,{id:"outgoing_number",placeholder:" ",value:C,onChange:gt=>E(gt.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{htmlFor:"outgoing_date",children:" "}),g.jsx(Pn,{id:"outgoing_date",type:"date",placeholder:"..",value:T,onChange:gt=>R(gt.target.value)})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{htmlFor:"title",children:" "}),g.jsx(Pn,{id:"title",placeholder:"  ",value:N,onChange:gt=>D(gt.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs(Jt,{htmlFor:"correspondent",children:[" ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs(xn,{value:L,onValueChange:k,children:[g.jsx(un,{className:"flex-1",children:g.jsx(wn,{placeholder:"  "})}),g.jsx(dn,{children:ut.map(gt=>g.jsx(Ke,{value:gt.name,children:gt.correspondent_name},gt.name))})]}),g.jsx(Ht,{type:"button",variant:"outline",className:"shrink-0",onClick:()=>m(!0),children:""})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs(Jt,{htmlFor:"brief_content",children:["  ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx(ra,{id:"brief_content",placeholder:"   ",rows:3,value:J,onChange:gt=>at(gt.target.value)})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs(Jt,{htmlFor:"document_type",children:["  ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsxs(xn,{value:j,onValueChange:P,children:[g.jsx(un,{children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:pt.map(gt=>g.jsx(Ke,{value:gt.name,children:gt.document_type_name},gt.name))})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{htmlFor:"priority",children:""}),g.jsxs(xn,{value:U,onValueChange:H,children:[g.jsx(un,{children:g.jsx(wn,{placeholder:""})}),g.jsx(dn,{children:dt.map(gt=>g.jsx(Ke,{value:gt.name,children:gt.priority_name},gt.name))})]})]})]})]}),Di&&g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-base font-semibold",children:""}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{children:""}),g.jsx(qg,{users:Ge,value:yt,onChange:vt,placeholder:" ..."})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{children:""}),g.jsx(Xg,{users:Ge,value:Tt,onChange:X,excludeUsers:yt?[yt]:[],placeholder:" ..."})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-base font-semibold",children:" "}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[on&&g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{htmlFor:"reception_office",children:" *"}),g.jsxs(xn,{value:I,onValueChange:Y,children:[g.jsx(un,{children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:Jn.map(gt=>g.jsx(Ke,{value:gt.name,children:gt.reception_office_name},gt.name))})]})]}),g.jsxs("div",{className:`space-y-2 ${on?"":"col-span-2"}`,children:[g.jsx(Jt,{htmlFor:"delivery_method",children:" "}),g.jsxs(xn,{value:O,onValueChange:B,children:[g.jsx(un,{children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:te.map(gt=>g.jsx(Ke,{value:gt.name,children:gt.delivery_method_name},gt.name))})]})]})]}),g.jsx("div",{className:"grid grid-cols-2 gap-4",children:g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{htmlFor:"classification",children:""}),g.jsxs(xn,{value:q,onValueChange:rt,children:[g.jsx(un,{children:g.jsx(wn,{placeholder:""})}),g.jsx(dn,{children:Lt.map(gt=>g.jsx(Ke,{value:gt.name,children:gt.classification_name},gt.name))})]})]})})]})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-base font-semibold",children:" "}),g.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[g.jsx(X3,{className:"w-12 h-12 mx-auto text-muted-foreground mb-3"}),g.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"      "}),g.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"PDF, DOC, DOCX  10 "}),g.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:".pdf,.doc,.docx",onChange:Hh}),g.jsx(Ht,{type:"button",variant:"outline",size:"sm",onClick:()=>document.getElementById("file-upload")?.click(),children:" "}),lt&&!ft&&g.jsxs("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[g.jsx(Fn,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm font-medium text-green-900 truncate",children:lt.split("/").pop()}),g.jsx("p",{className:"text-xs text-green-600",children:" "})]}),g.jsx("button",{type:"button",onClick:()=>mt(null),className:"text-green-600 hover:text-red-600",title:" ",children:g.jsx(ha,{className:"w-4 h-4"})})]}),ft&&g.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center gap-2",children:[g.jsx(Fn,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm font-medium text-blue-900 truncate",children:ft.name}),g.jsxs("p",{className:"text-xs text-blue-600",children:[(ft.size/1024).toFixed(1),"  ()"]})]}),g.jsx("button",{type:"button",onClick:()=>F(null),className:"text-blue-600 hover:text-blue-800",children:g.jsx(ha,{className:"w-4 h-4"})})]})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-base font-semibold",children:""}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("input",{type:"file",id:"attachments-upload",className:"hidden",multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:Ea}),g.jsx(Ht,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("attachments-upload")?.click(),children:" "}),st.length>0&&g.jsxs("div",{className:"space-y-2 mt-2",children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:" :"}),st.map((gt,ve)=>g.jsxs("div",{className:"p-2 bg-green-50 border border-green-200 rounded flex items-center gap-2",children:[g.jsx(Fn,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm text-green-900 truncate",children:gt.file_name}),gt.file_size&&g.jsxs("p",{className:"text-xs text-green-600",children:[(gt.file_size/1024).toFixed(1)," "]})]}),g.jsx("button",{type:"button",onClick:()=>ks(ve),className:"text-green-600 hover:text-red-600",title:" ",children:g.jsx(ha,{className:"w-4 h-4"})})]},`existing-${ve}`))]}),G.length>0&&g.jsxs("div",{className:"space-y-2 mt-2",children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:" :"}),G.map((gt,ve)=>g.jsxs("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded flex items-center gap-2",children:[g.jsx(Fn,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm text-blue-900 truncate",children:gt.name}),g.jsxs("p",{className:"text-xs text-blue-600",children:[(gt.size/1024).toFixed(1)," "]})]}),g.jsx("button",{type:"button",onClick:()=>gn(ve),className:"text-blue-600 hover:text-red-600",children:g.jsx(ha,{className:"w-4 h-4"})})]},ve))]})]})]}),g.jsxs("div",{className:"space-y-3 text-sm",children:[g.jsx("h3",{className:"text-base font-semibold",children:""}),g.jsxs("div",{className:"space-y-2 text-muted-foreground",children:[g.jsxs("p",{children:[g.jsx("strong",{children:" :"}),"    "]}),g.jsxs("p",{children:[g.jsx("strong",{children:":"}),"    "]}),g.jsxs("p",{children:[g.jsx("strong",{children:" :"}),"    "]})]})]})]})]}),g.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[g.jsx(Ht,{type:"button",variant:"outline",onClick:()=>{Wc(),t(!1)},children:""}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Ht,{type:"button",variant:"outline",disabled:l,children:" "}),g.jsx(Ht,{type:"button",onClick:$h,disabled:l||d,className:"bg-blue-600 hover:bg-blue-700 text-white",children:d?" ...":l?o?"...":"...":o?"":""})]})]})]})}),g.jsx(HU,{open:p,onOpenChange:m,onCorrespondentCreated:yn})]})}function $U({documents:s,selectedDocument:t,onSelectDocument:e,loading:n,error:a,onDocumentsRefresh:o,onFiltersChange:l}){const{t:c}=Ns(),[d,h]=S.useState([]),[p,m]=S.useState(!1),[y,x]=S.useState(!1),[A,w]=S.useState(""),[C,E]=S.useState(""),[T,R]=S.useState(""),[N,D]=S.useState(""),[L,k]=S.useState(""),j=S.useRef(null),[P,U]=S.useState([]),[H,J]=S.useState([]),[at,q]=S.useState([]),[rt,O]=S.useState([]);S.useEffect(()=>{F(),B()},[]);const B=async()=>{try{const[st,et,yt,vt]=await Promise.all([kt.getStatuses().catch(()=>[]),kt.getDocumentTypes().catch(()=>[]),kt.getPriorities().catch(()=>[]),kt.getCorrespondents().catch(()=>[])]);U(st||[]),J(et||[]),q(yt||[]),O(vt||[])}catch(st){console.error("Failed to load filter data:",st),U([]),J([]),q([]),O([])}},I=S.useCallback(()=>{l&&l({search:A.trim()||void 0,status:C||void 0,document_type:T||void 0,priority:N||void 0,correspondent:L||void 0})},[A,C,T,N,L,l]);S.useEffect(()=>{const st=setTimeout(()=>{I()},500);return()=>clearTimeout(st)},[A,C,T,N,L,I]);const Y=()=>{w(""),E(""),R(""),D(""),k("")},ft=[C,T,N,L].filter(Boolean).length,F=async()=>{try{const st=await kt.getCurrentUser();h(st.roles||[])}catch(st){console.error("Failed to load user roles:",st)}},G=d.includes("EDO Admin")||d.includes("EDO Manager"),tt=()=>{m(!0)},lt=async st=>{o&&(await o(),st&&setTimeout(()=>{e(st)},100))},mt=st=>st===c("documents.status.signed")||st===""?"default":st===c("documents.status.pending")||st===" "?"secondary":st===c("documents.status.archived")||st===""?"outline":"secondary";return n?g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"p-3 border-b",children:g.jsx(Yl,{className:"h-9 w-full"})}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:Array.from({length:5}).map((st,et)=>g.jsxs("div",{className:"p-4 border-b",children:[g.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[g.jsx(Yl,{className:"h-4 w-3/4"}),g.jsx(Yl,{className:"h-5 w-16 shrink-0"})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(Yl,{className:"h-3 w-24"}),g.jsx(Yl,{className:"h-3 w-20"})]})]},et))})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"p-3 border-b",children:g.jsxs("div",{className:"relative",children:[g.jsx(Sh,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),g.jsx("input",{ref:j,type:"text",placeholder:c("documentSidebar.searchPlaceholder"),value:A,onChange:st=>{const et=st.target.value,yt=document.activeElement===st.target;w(et),yt&&j.current&&requestAnimationFrame(()=>{if(j.current){j.current.focus();const vt=j.current.value.length;j.current.setSelectionRange(vt,vt)}})},className:"w-full pl-9 pr-3 py-2 text-sm border rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-ring"})]})}),g.jsx("div",{className:"p-3 border-b bg-muted/30",children:g.jsxs(Ht,{variant:"ghost",size:"sm",onClick:()=>x(!y),className:"w-full justify-between h-9",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(a3,{className:"w-4 h-4"}),g.jsx("span",{className:"text-sm font-medium",children:""}),ft>0&&g.jsx(O1,{variant:"secondary",className:"ml-1 h-5 min-w-5 px-1.5 text-xs",children:ft})]}),y?g.jsx(i_,{className:"w-4 h-4 text-muted-foreground"}):g.jsx(wh,{className:"w-4 h-4 text-muted-foreground"})]})}),y&&g.jsxs("div",{className:"p-3 border-b bg-muted/20 space-y-3 animate-in slide-in-from-top-2 duration-200",children:[g.jsxs("div",{className:"space-y-1.5",children:[g.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[g.jsx(V3,{className:"w-3.5 h-3.5"}),""]}),g.jsxs(xn,{value:C||void 0,onValueChange:st=>E(st||""),children:[g.jsx(un,{className:"h-9 text-sm",children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:P.map(st=>g.jsx(Ke,{value:st.name,children:st.status_name},st.name))})]})]}),g.jsxs("div",{className:"space-y-1.5",children:[g.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[g.jsx(s3,{className:"w-3.5 h-3.5"})," "]}),g.jsxs(xn,{value:T||void 0,onValueChange:st=>R(st||""),children:[g.jsx(un,{className:"h-9 text-sm",children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:H.map(st=>g.jsx(Ke,{value:st.name,children:st.document_type_name},st.name))})]})]}),g.jsxs("div",{className:"space-y-1.5",children:[g.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[g.jsx(qB,{className:"w-3.5 h-3.5"}),""]}),g.jsxs(xn,{value:N||void 0,onValueChange:st=>D(st||""),children:[g.jsx(un,{className:"h-9 text-sm",children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:at.map(st=>g.jsx(Ke,{value:st.name,children:st.priority_name},st.name))})]})]}),g.jsxs("div",{className:"space-y-1.5",children:[g.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[g.jsx(LB,{className:"w-3.5 h-3.5"}),""]}),g.jsxs(xn,{value:L||void 0,onValueChange:st=>k(st||""),children:[g.jsx(un,{className:"h-9 text-sm",children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:rt.map(st=>g.jsx(Ke,{value:st.name,children:st.correspondent_name},st.name))})]})]}),ft>0&&g.jsxs(Ht,{variant:"outline",size:"sm",onClick:Y,className:"w-full h-9 text-sm",children:[g.jsx(ha,{className:"w-4 h-4 mr-2"}),"  (",ft,")"]})]}),G&&g.jsx("div",{className:"p-3 border-b bg-muted/30",children:g.jsxs(Ht,{onClick:tt,className:"w-full",size:"sm",children:[g.jsx(a_,{className:"w-4 h-4 mr-2"}),c("documentSidebar.addDocument")]})}),a&&g.jsx("div",{className:"p-3 border-b",children:g.jsxs("div",{className:"text-sm text-destructive bg-destructive/10 p-2 rounded",children:[c("common.error"),": ",a]})}),g.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.length===0&&!n?g.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[g.jsx(Fn,{className:"w-12 h-12 text-muted-foreground mb-3"}),g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:c("documentSidebar.noDocuments")}),(A||ft>0)&&g.jsx("p",{className:"text-xs text-muted-foreground",children:"     "})]}):s.map(st=>g.jsxs("div",{onClick:()=>e(st),className:Zt("p-4 border-b cursor-pointer transition-colors hover:bg-muted/50",t?.name===st.name&&"bg-muted"),children:[g.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[g.jsx("h3",{className:"font-medium text-sm line-clamp-2",children:st.title}),g.jsx(O1,{variant:mt(st.status),className:"text-xs shrink-0",children:st.status})]}),g.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[st.document_type&&g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx(Fn,{className:"w-3 h-3"}),st.document_type]}),st.document_date&&g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx(OB,{className:"w-3 h-3"}),new Date(st.document_date).toLocaleDateString("ru-RU")]})]})]},st.name))})]}),g.jsx(cR,{open:p,onOpenChange:m,onDocumentCreated:lt})]})}const GU="_editor_191r9_2",qU={editor:GU};function XU({value:s,onChange:t,placeholder:e}){const n=S.useRef(null),a=S.useRef(null),o=S.useRef(!0),[l,c]=S.useState(!1);S.useEffect(()=>{o.current&&n.current&&s&&(n.current.innerHTML=s,o.current=!1)},[]),S.useEffect(()=>{n.current&&s===""&&n.current.innerHTML!==""&&(n.current.innerHTML="")},[s]);const d=()=>{n.current&&t(n.current.innerHTML)},h=()=>{c(!0)},p=()=>{c(!1)},m=(x,A)=>{document.execCommand(x,!1,A),n.current?.focus()},y=()=>{const x=window.prompt(" URL:");x&&m("createLink",x)};return g.jsxs(fa.div,{ref:a,animate:{scale:l?1.005:1},transition:{type:"spring",stiffness:400,damping:30},className:`relative border border-input rounded-xl overflow-hidden focus-within:border-primary focus-within:ring-1 focus-within:ring-primary/20 transition-all bg-background ${qU.editor}`,children:[g.jsxs("div",{className:"flex items-center gap-1 px-4 py-2.5 border-b border-border/60 bg-slate-50/50",children:[g.jsx("button",{type:"button",onClick:()=>m("bold"),className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:" (Ctrl+B)",children:g.jsx(MB,{className:"h-4 w-4",strokeWidth:2.5})}),g.jsx("button",{type:"button",onClick:()=>m("italic"),className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:" (Ctrl+I)",children:g.jsx(d3,{className:"h-4 w-4",strokeWidth:2.5})}),g.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1.5"}),g.jsx("button",{type:"button",onClick:()=>m("insertUnorderedList"),className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:" ",children:g.jsx(b3,{className:"h-4 w-4",strokeWidth:2.5})}),g.jsx("button",{type:"button",onClick:()=>m("insertOrderedList"),className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:" ",children:g.jsx(y3,{className:"h-4 w-4",strokeWidth:2.5})}),g.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1.5"}),g.jsx("button",{type:"button",onClick:y,className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:"  (Ctrl+K)",children:g.jsx(m3,{className:"h-4 w-4",strokeWidth:2.5})})]}),g.jsx("div",{ref:n,contentEditable:!0,onInput:d,onFocus:h,onBlur:p,className:"min-h-[140px] max-h-[500px] overflow-y-auto px-4 py-3.5 text-[15px] leading-relaxed focus:outline-none","data-placeholder":e,style:{wordBreak:"break-word"}})]})}const YU="_customScrollbar_1a8f8_2",WU="_commentContent_1a8f8_31",oA={customScrollbar:YU,commentContent:WU};function KU({doctype:s,docname:t,refreshTrigger:e}){const{t:n}=Ns(),[a,o]=S.useState([]),[l,c]=S.useState(5),[d,h]=S.useState(""),[p,m]=S.useState(!1),[y,x]=S.useState(!1),[A,w]=S.useState(null),[C,E]=S.useState(!1),T=S.useRef(null),R=S.useRef(null),N=S.useRef(null);S.useEffect(()=>{L(),D()},[s,t,e]);const D=async()=>{try{const q=await kt.getCurrentUser();E(q.roles?.includes("EDO Admin")||!1)}catch(q){console.error("Failed to check admin role:",q),E(!1)}},L=async()=>{m(!0);try{const rt=(await kt.getComments(s,t)).filter(O=>{const B=O.content||"",I=document.createElement("div");I.innerHTML=B;const Y=(I.textContent||I.innerText||"").toLowerCase();return!["","resolution","   ",":",":","executor:","co-executor:"].some(G=>Y.includes(G.toLowerCase()))});o(rt.reverse())}catch(q){console.error("Failed to load comments:",q)}finally{m(!1)}},k=q=>{const rt=q.currentTarget;rt.scrollHeight-rt.scrollTop<=rt.clientHeight+50&&l<a.length&&c(B=>Math.min(B+5,a.length))},j=a.slice(0,l),P=l<a.length,U=async q=>{q.preventDefault();const rt=document.createElement("div");if(rt.innerHTML=d,!!(rt.textContent||rt.innerText||"").trim()){x(!0);try{const B=await kt.addComment(s,t,d);h(""),w(B.name),await new Promise(I=>setTimeout(I,50)),await L(),setTimeout(()=>{R.current&&R.current.scrollTo({top:0,behavior:"smooth"})},100)}catch(B){console.error("Failed to add comment:",B)}finally{x(!1)}}},H=q=>{const rt=new Date(q);return new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(rt)},J=q=>q&&q.split(" ").map(rt=>rt[0]).join("").toUpperCase().slice(0,2)||"U",at=async q=>{if(!C)return;const rt=n("deleteCommentConfirm")||" ,     ?";if(confirm(rt))try{await kt.deleteComment(q),o(O=>O.filter(B=>B.name!==q))}catch(O){console.error("Failed to delete comment:",O);const B=n("deleteCommentError")||"   ";alert(B)}};return g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[g.jsx(A3,{className:"h-4 w-4"}),n("comments"),g.jsxs("span",{className:"text-muted-foreground",children:["(",a.length,")"]})]}),p?g.jsxs("div",{className:"text-sm text-muted-foreground",children:[n("loading"),"..."]}):g.jsx("div",{ref:R,className:`pr-2 ${oA.customScrollbar}`,onScroll:k,style:{maxHeight:"300px",overflowY:"scroll"},children:g.jsxs("div",{ref:T,className:"space-y-3",children:[g.jsx(wc,{mode:"popLayout",children:j.map(q=>{const rt=q.name===A;return g.jsxs(fa.div,{layout:!0,initial:rt?{opacity:0,x:-100}:!1,animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{type:"spring",stiffness:400,damping:30,mass:.8},className:"flex gap-3",children:[g.jsx("div",{className:"h-8 w-8 rounded-full bg-primary flex items-center justify-center shrink-0",children:g.jsx("span",{className:"text-xs font-medium text-primary-foreground",children:J(q.comment_by)})}),g.jsxs("div",{className:"flex-1 space-y-1",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-sm font-medium",children:q.comment_by}),g.jsx("span",{className:"text-xs text-muted-foreground",children:H(q.creation)})]}),C&&g.jsx(Ht,{variant:"ghost",size:"sm",onClick:()=>at(q.name),className:"h-6 w-6 p-0 text-muted-foreground hover:text-destructive",children:g.jsx(r_,{className:"h-3 w-3"})})]}),g.jsx("div",{className:`text-sm text-foreground ${oA.commentContent}`,dangerouslySetInnerHTML:{__html:q.content}})]})]},q.name)})}),P&&g.jsx("div",{className:"text-center py-2 text-xs text-muted-foreground",children:"    ..."})]})}),g.jsxs(fa.form,{ref:N,onSubmit:U,className:"space-y-2",animate:y?{scale:.98}:{scale:1},transition:{type:"spring",stiffness:500,damping:30},children:[g.jsx(XU,{value:d,onChange:h,placeholder:n("addComment")}),g.jsxs(Ht,{type:"submit",size:"sm",disabled:y,children:[g.jsx(k3,{className:"h-4 w-4 mr-2"}),n(y?"sending":"send")]})]})]})}const uR=S.forwardRef(({className:s,value:t=0,...e},n)=>g.jsx("div",{ref:n,className:Zt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...e,children:g.jsx("div",{className:"h-full bg-primary transition-all duration-300 ease-in-out",style:{width:`${Math.min(100,Math.max(0,t))}%`}})}));uR.displayName="Progress";const bn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Yg=[.001,0,0,.001,0,0],Ym=1.35,Xn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Gs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ec="pdfjs_internal_editor_",Ft={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Wt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},dR={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},sn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},hc={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ke={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ho={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},zc={ERRORS:0,WARNINGS:1,INFOS:5},Po={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Sd={moveTo:0,lineTo:1,curveTo:2,closePath:3},hR={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let jh=zc.WARNINGS;function QU(s){Number.isInteger(s)&&(jh=s)}function ZU(){return jh}function Oh(s){jh>=zc.INFOS&&console.info(`Info: ${s}`)}function Bt(s){jh>=zc.WARNINGS&&console.warn(`Warning: ${s}`)}function he(s){throw new Error(s)}function Qt(s,t){s||he(t)}function JU(s){switch(s?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function uv(s,t=null,e=null){if(!s)return null;if(e&&typeof s=="string"&&(e.addDefaultProtocol&&s.startsWith("www.")&&s.match(/\./g)?.length>=2&&(s=`http://${s}`),e.tryConvertEncoding))try{s=iV(s)}catch{}const n=t?URL.parse(s,t):URL.parse(s);return JU(n)?n:null}function dv(s,t,e=!1){const n=URL.parse(s);return n?(n.hash=t,n.href):e&&uv(s,"http://example.com")?s.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Ut(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const gr=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class lA extends gr{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Wm extends gr{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class lh extends gr{constructor(t){super(t,"InvalidPDFException")}}class _c extends gr{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class tV extends gr{constructor(t){super(t,"FormatError")}}class Ti extends gr{constructor(t){super(t,"AbortException")}}function fR(s){(typeof s!="object"||s?.length===void 0)&&he("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let a=0;a<t;a+=e){const o=Math.min(a+e,t),l=s.subarray(a,o);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function Uc(s){typeof s!="string"&&he("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function eV(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function nV(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function sV(){try{return new Function(""),!0}catch{return!1}}class Qe{static get isLittleEndian(){return Ut(this,"isLittleEndian",nV())}static get isEvalSupported(){return Ut(this,"isEvalSupported",sV())}static get isOffscreenCanvasSupported(){return Ut(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ut(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Ut(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Ut(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Km=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));class xt{static makeHexColor(t,e,n){return`#${Km[t]}${Km[e]}${Km[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const a=t[n],o=t[n+1];t[n]=a*e[0]+o*e[2]+e[4],t[n+1]=a*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const a=e[0],o=e[1],l=e[2],c=e[3],d=e[4],h=e[5];for(let p=0;p<6;p+=2){const m=t[n+p],y=t[n+p+1];t[n+p]=m*a+y*l+d,t[n+p+1]=m*o+y*c+h}}static applyInverseTransform(t,e){const n=t[0],a=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-n*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,n){const a=e[0],o=e[1],l=e[2],c=e[3],d=e[4],h=e[5],p=t[0],m=t[1],y=t[2],x=t[3];let A=a*p+d,w=A,C=a*y+d,E=C,T=c*m+h,R=T,N=c*x+h,D=N;if(o!==0||l!==0){const L=o*p,k=o*y,j=l*m,P=l*x;A+=j,E+=j,C+=P,w+=P,T+=L,D+=L,N+=k,R+=k}n[0]=Math.min(n[0],A,C,w,E),n[1]=Math.min(n[1],T,N,R,D),n[2]=Math.max(n[2],A,C,w,E),n[3]=Math.max(n[3],T,N,R,D)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],a=t[1],o=t[2],l=t[3],c=n**2+a**2,d=n*o+a*l,h=o**2+l**2,p=(c+h)/2,m=Math.sqrt(p**2-(c*h-d**2));e[0]=Math.sqrt(p+m||1),e[1]=Math.sqrt(p-m||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>l?null:[n,o,a,l]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,a,o){o[0]=Math.min(o[0],t,n),o[1]=Math.min(o[1],e,a),o[2]=Math.max(o[2],t,n),o[3]=Math.max(o[3],e,a)}static#t(t,e,n,a,o,l,c,d,h,p){if(h<=0||h>=1)return;const m=1-h,y=h*h,x=y*h,A=m*(m*(m*t+3*h*e)+3*y*n)+x*a,w=m*(m*(m*o+3*h*l)+3*y*c)+x*d;p[0]=Math.min(p[0],A),p[1]=Math.min(p[1],w),p[2]=Math.max(p[2],A),p[3]=Math.max(p[3],w)}static#e(t,e,n,a,o,l,c,d,h,p,m,y){if(Math.abs(h)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,e,n,a,o,l,c,d,-m/p,y);return}const x=p**2-4*m*h;if(x<0)return;const A=Math.sqrt(x),w=2*h;this.#t(t,e,n,a,o,l,c,d,(-p+A)/w,y),this.#t(t,e,n,a,o,l,c,d,(-p-A)/w,y)}static bezierBoundingBox(t,e,n,a,o,l,c,d,h){h[0]=Math.min(h[0],t,c),h[1]=Math.min(h[1],e,d),h[2]=Math.max(h[2],t,c),h[3]=Math.max(h[3],e,d),this.#e(t,n,o,c,e,a,l,d,3*(-t+3*(n-o)+c),6*(t-2*n+o),3*(n-t),h),this.#e(t,n,o,c,e,a,l,d,3*(-e+3*(a-l)+d),6*(e-2*a+l),3*(a-e),h)}}function iV(s){return decodeURIComponent(escape(s))}let Qm=null,cA=null;function pR(s){return Qm||(Qm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,cA=new Map([["","t"]])),s.replaceAll(Qm,(t,e,n)=>e?e.normalize("NFKC"):cA.get(n))}function hv(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),fR(s)}const fv="pdfjs_internal_id_";function aV(s,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,a,...o]=e;if(!s(n)&&!Number.isInteger(n)||!t(a))return!1;const l=o.length;let c=!0;switch(a.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;c=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||c&&d===null))return!1;return!0}function cn(s,t,e){return Math.min(Math.max(s,t),e)}function mR(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(fR(s))}function rV(s){return Uint8Array.fromBase64?Uint8Array.fromBase64(s):Uc(atob(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...t){return new Promise(e=>{e(s(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((t,e)=>t+e,0)});class Tc{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function a(o){if(!o)return;let l=null;const c=o.name;if(c==="#text")l=o.value;else if(Tc.shouldBuildText(c))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&e.push({str:l}),!!o.children)for(const d of o.children)a(d)}return a(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class pv{static setupStorage(t,e,n,a,o){const l=a.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",c=>{a.setValue(e,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",c=>{a.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",c=>{a.setValue(e,{value:c.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const c of n.children)c.attributes.value===l.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const d=c.target.options,h=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:a,linkService:o}){const{attributes:l}=e,c=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${a}`);for(const[d,h]of Object.entries(l))if(h!=null)switch(d){case"class":h.length&&t.setAttribute(d,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!c||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,h)}c&&o.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,a=t.xfaHtml,o=t.intent||"display",l=document.createElement(a.name);a.attributes&&this.setAttributes({html:l,element:a,intent:o,linkService:n});const c=o!=="richText",d=t.div;if(d.append(l),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=m}c&&d.setAttribute("class","xfaLayer xfaFont");const h=[];if(a.children.length===0){if(a.value){const m=document.createTextNode(a.value);l.append(m),c&&Tc.shouldBuildText(a.name)&&h.push(m)}return{textDivs:h}}const p=[[a,-1,l]];for(;p.length>0;){const[m,y,x]=p.at(-1);if(y+1===m.children.length){p.pop();continue}const A=m.children[++p.at(-1)[1]];if(A===null)continue;const{name:w}=A;if(w==="#text"){const E=document.createTextNode(A.value);h.push(E),x.append(E);continue}const C=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,w):document.createElement(w);if(x.append(C),A.attributes&&this.setAttributes({html:C,element:A,storage:e,intent:o,linkService:n}),A.children?.length>0)p.push([A,-1,C]);else if(A.value){const E=document.createTextNode(A.value);c&&Tc.shouldBuildText(w)&&h.push(E),C.append(E)}}for(const m of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const bi="http://www.w3.org/2000/svg";class hr{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Wo(s,t="text"){if(sc(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const a=new XMLHttpRequest;a.open("GET",s,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}n(new Error(a.statusText))}},a.send(null)})}class Vc{constructor({viewBox:t,userUnit:e,scale:n,rotation:a,offsetX:o=0,offsetY:l=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=a,this.offsetX=o,this.offsetY=l,n*=e;const d=(t[2]+t[0])/2,h=(t[3]+t[1])/2;let p,m,y,x;switch(a%=360,a<0&&(a+=360),a){case 180:p=-1,m=0,y=0,x=1;break;case 90:p=0,m=1,y=1,x=0;break;case 270:p=0,m=-1,y=-1,x=0;break;case 0:p=1,m=0,y=0,x=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(y=-y,x=-x);let A,w,C,E;p===0?(A=Math.abs(h-t[1])*n+o,w=Math.abs(d-t[0])*n+l,C=(t[3]-t[1])*n,E=(t[2]-t[0])*n):(A=Math.abs(d-t[0])*n+o,w=Math.abs(h-t[1])*n+l,C=(t[2]-t[0])*n,E=(t[3]-t[1])*n),this.transform=[p*n,m*n,y*n,x*n,A-p*n*d-y*n*h,w-m*n*d-x*n*h],this.width=C,this.height=E}get rawDims(){const t=this.viewBox;return Ut(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new Vc({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:o})}convertToViewportPoint(t,e){const n=[t,e];return xt.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];xt.applyTransform(e,this.transform);const n=[t[2],t[3]];return xt.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return xt.applyInverseTransform(n,this.transform),n}}class Ph extends gr{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Hc(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function Fh(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function gR(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function yR(s,t="document.pdf"){if(typeof s!="string")return t;if(Hc(s))return Bt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return t;const a=c=>{try{let d=decodeURIComponent(c);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:c):d}catch{return c}},o=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(o.test(l))return a(l);if(n.searchParams.size>0){const c=Array.from(n.searchParams.values()).reverse();for(const h of c)if(o.test(h))return a(h);const d=Array.from(n.searchParams.keys()).reverse();for(const h of d)if(o.test(h))return a(h)}if(n.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(d)return a(d[0])}return t}class uA{started=Object.create(null);times=[];time(t){t in this.started&&Bt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Bt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:a,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-a}ms
`);return t.join("")}}function sc(s,t){const e=t?URL.parse(s,t):URL.parse(s);return e?.protocol==="http:"||e?.protocol==="https:"}function Zn(s){s.preventDefault()}function Ae(s){s.preventDefault(),s.stopPropagation()}function oV(s){console.log("Deprecated API usage: "+s)}class ch{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const n=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const h=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let m=parseInt(e[9],10)||0;return m=m>=0&&m<=59?m:0,h==="-"?(l+=p,c+=m):h==="+"&&(l-=p,c-=m),new Date(Date.UTC(n,a,o,l,c,d))}}function vR(s,{scale:t=1,rotation:e=0}){const{width:n,height:a}=s.attributes.style,o=[0,0,parseInt(n),parseInt(a)];return new Vc({viewBox:o,userUnit:1,scale:t,rotation:e})}function Ko(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Bt(`Not a valid color format: "${s}"`),[0,0,0])}function lV(s){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,Ko(n))}t.remove()}function Se(s){const{a:t,b:e,c:n,d:a,e:o,f:l}=s.getTransform();return[t,e,n,a,o,l]}function Is(s){const{a:t,b:e,c:n,d:a,e:o,f:l}=s.getTransform().invertSelf();return[t,e,n,a,o,l]}function ba(s,t,e=!1,n=!0){if(t instanceof Vc){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:l}=s,c=Qe.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,h=`var(--total-scale-factor) * ${o}px`,p=c?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,m=c?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!e||t.rotation%180===0?(l.width=p,l.height=m):(l.width=m,l.height=p)}n&&s.setAttribute("data-main-rotation",t.rotation)}class Rs{constructor(){const{pixelRatio:t}=Rs;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,a,o=-1){let l=1/0,c=1/0,d=1/0;n=Rs.capPixels(n,o),n>0&&(l=Math.sqrt(n/(t*e))),a!==-1&&(c=a/t,d=a/e);const h=Math.min(l,c,d);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const uh=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class cV{static get isDarkMode(){return Ut(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class bR{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Ut(this,"commentForegroundColor",Ko(n))}}function xR(s,t,e,n){n=Math.min(Math.max(n??1,0),1);const a=255*(1-n);return s=Math.round(s*n+a),t=Math.round(t*n+a),e=Math.round(e*n+a),[s,t,e]}function dA(s,t){const e=s[0]/255,n=s[1]/255,a=s[2]/255,o=Math.max(e,n,a),l=Math.min(e,n,a),c=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const d=o-l;switch(t[1]=c<.5?d/(o+l):d/(2-o-l),o){case e:t[0]=((n-a)/d+(n<a?6:0))*60;break;case n:t[0]=((a-e)/d+2)*60;break;case a:t[0]=((e-n)/d+4)*60;break}}t[2]=c}function Wg(s,t){const e=s[0],n=s[1],a=s[2],o=(1-Math.abs(2*a-1))*n,l=o*(1-Math.abs(e/60%2-1)),c=a-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+c,t[1]=l+c,t[2]=c;break;case 1:t[0]=l+c,t[1]=o+c,t[2]=c;break;case 2:t[0]=c,t[1]=o+c,t[2]=l+c;break;case 3:t[0]=c,t[1]=l+c,t[2]=o+c;break;case 4:t[0]=l+c,t[1]=c,t[2]=o+c;break;case 5:case 6:t[0]=o+c,t[1]=c,t[2]=l+c;break}}function hA(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function fA(s,t,e){Wg(s,e),e.map(hA);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];Wg(t,e),e.map(hA);const a=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>a?(n+.05)/(a+.05):(a+.05)/(n+.05)}const pA=new Map;function wR(s,t){const e=s[0]+s[1]*256+s[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=pA.get(e);if(n)return n;const a=new Float32Array(9),o=a.subarray(0,3),l=a.subarray(3,6);dA(s,l);const c=a.subarray(6,9);dA(t,c);const d=c[2]<.5,h=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),fA(l,c,o)<h){let p,m;d?(p=l[2],m=1):(p=0,m=l[2]);const y=.005;for(;m-p>y;){const x=l[2]=(p+m)/2;d===fA(l,c,o)<h?p=x:m=x}l[2]=d?m:p}return Wg(l,o),n=xt.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),pA.set(e,n),n}function mv({html:s,dir:t,className:e},n){const a=document.createDocumentFragment();if(typeof s=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=s.split(/(?:\r\n?|\n)/);for(let c=0,d=l.length;c<d;++c){const h=l[c];o.append(document.createTextNode(h)),c<d-1&&o.append(document.createElement("br"))}a.append(o)}else pv.render({xfaHtml:s,div:a,intent:"richText"});a.firstChild.classList.add("richText",e),n.append(a)}class fc{#t=null;#e=null;#s;#n=null;#r=null;#i=null;#a=null;#o=null;static#c=null;constructor(t){this.#s=t,fc.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#s._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Zn,{signal:e}),t.addEventListener("pointerdown",fc.#l,{signal:e}));const n=this.#n=document.createElement("div");n.className="buttons",t.append(n);const a=this.#s.toolbarPosition;if(a){const{style:o}=t,l=this.#s._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#h(t){this.#s._focusEventsAllowed=!1,Ae(t)}#d(t){this.#s._focusEventsAllowed=!0,Ae(t)}#f(t){const e=this.#s._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Zn,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#i?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#s,n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",fc.#c[t]),this.#f(n)&&n.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#n.append(n)}get#g(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#g),this.#r=t}addComment(t,e=null){if(this.#i)return;const n=t.renderForToolbar();if(!n)return;this.#f(n);const a=this.#a=this.#g;e?(this.#n.insertBefore(n,e),this.#n.insertBefore(a,e)):this.#n.append(n,a),this.#i=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#g)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#s);this.#f(e),this.#n.append(e,this.#g)}removeButton(t){t==="comment"&&(this.#i?.removeToolbarCommentButton(),this.#i=null,this.#a?.remove(),this.#a=null)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,n){const a=this.#n.querySelector(n);a&&t==="comment"&&this.addComment(e,a)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class uV{#t=null;#e=null;#s;constructor(t){this.#s=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#s._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Zn,{signal:e});const n=this.#t=document.createElement("div");return n.className="buttons",t.append(n),this.#s.hasCommentManager()&&this.#i("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#s.commentSelection("floating_button")}),this.#i("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#s.highlightSelection("floating_button")}),t}#r(t,e){let n=0,a=0;for(const o of t){const l=o.y+o.height;if(l<n)continue;const c=o.x+(e?o.width:0);if(l>n){a=c,n=l;continue}e?c>a&&(a=c):c<a&&(a=c)}return[e?1-a:a,n]}show(t,e,n){const[a,o]=this.#r(e,n),{style:l}=this.#e||=this.#n();t.append(this.#e),l.insetInlineEnd=`${100*a}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#i(t,e,n,a){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",n);const c=this.#s._signal;c instanceof AbortSignal&&!c.aborted&&(o.addEventListener("contextmenu",Zn,{signal:c}),o.addEventListener("click",a,{signal:c})),this.#t.append(o)}}function SR(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}class dV{#t=0;get id(){return`${Ec}${this.#t++}`}}class gv{#t=hv();#e=0;#s=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(n.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Ut(this,"_isSVGFittingCanvas",o)}async#n(t,e){this.#s||=new Map;let n=this.#s.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(n.url=e,a=await Wo(e,"blob")):e instanceof File?a=n.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const o=gv._isSVGFittingCanvas,l=new FileReader,c=new Image,d=new Promise((h,p)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,h()},l.onload=async()=>{const m=n.svgUrl=l.result;c.src=await o?`${m}#svgView(preserveAspectRatio(none))`:m},c.onerror=l.onerror=p});l.readAsDataURL(a),await d}else n.bitmap=await createImageBitmap(a);n.refCounter=1}catch(a){Bt(a),n=null}return this.#s.set(t,n),n&&this.#s.set(n.id,n),n}async getFromFile(t){const{lastModified:e,name:n,size:a,type:o}=t;return this.#n(`${e}_${n}_${a}_${o}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const n=await e;return this.#n(t,n)}async getFromId(t){this.#s||=new Map;const e=this.#s.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#s||=new Map;let n=this.#s.get(t);if(n?.bitmap)return n.refCounter+=1,n;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),n={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#s.set(t,n),this.#s.set(n.id,n),n}getSvgUrl(t){const e=this.#s.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#s||=new Map;const e=this.#s.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(n.width,n.height);a.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=a.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class hV{#t=[];#e=!1;#s;#n=-1;constructor(t=128){this.#s=t}add({cmd:t,undo:e,post:n,mustExec:a,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:c=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:e,post:n,type:o};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(d);return}if(l&&this.#t[this.#n].type===o){c&&(d.undo=this.#t[this.#n].undo),this.#t[this.#n]=d;return}const h=this.#n+1;h===this.#s?this.#t.splice(0,1):(this.#n=h,h<this.#t.length&&this.#t.splice(h)),this.#t.push(d)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class $c{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Qe.platform;for(const[n,a,o={}]of t)for(const l of n){const c=l.startsWith("mac+");e&&c?(this.callbacks.set(l.slice(4),{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1))):!e&&!c&&(this.callbacks.set(l,{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(this.#t(e));if(!n)return;const{callback:a,options:{bubbles:o=!1,args:l=[],checker:c=null}}=n;c&&!c(t,e)||(a.bind(t,...l,e)(),o||Ae(e))}}class yv{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return lV(t),Ut(this,"_colors",t)}convert(t){const e=Ko(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,a]of this._colors)if(a.every((o,l)=>o===e[l]))return yv._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?xt.makeHexColor(...e):t}}class Ri{#t=new AbortController;#e=null;#s=null;#n=new Map;#r=new Map;#i=null;#a=null;#o=null;#c=new hV;#l=null;#h=null;#d=null;#f=0;#g=new Set;#p=null;#u=null;#m=new Set;_editorUndoBar=null;#y=!1;#b=!1;#v=!1;#E=null;#A=null;#x=null;#T=null;#S=!1;#C=null;#D=new dV;#R=!1;#N=!1;#F=!1;#k=null;#j=null;#B=null;#O=null;#$=null;#_=Ft.NONE;#w=new Set;#L=null;#I=null;#U=null;#X=null;#q=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#V=[0,0];#P=null;#G=null;#Z=null;#J=null;#z=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Ri.prototype,e=l=>l.#G.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:c})=>{if(c instanceof HTMLInputElement){const{type:d}=c;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Ut(this,"_keyboardManager",new $c([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#G.contains(c)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}constructor(t,e,n,a,o,l,c,d,h,p,m,y,x,A,w,C){const E=this._signal=this.#t.signal;this.#G=t,this.#Z=e,this.#J=n,this.#i=a,this.#l=o,this.#I=l,this.#q=d,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:E}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),c._on("setpreference",this.onSetPreference.bind(this),{signal:E}),c._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#N=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#N=!1},{capture:!0,signal:E}),this.#lt(),this.#ht(),this.#et(),this.#a=d.annotationStorage,this.#E=d.filterFactory,this.#U=h,this.#T=p||null,this.#y=m,this.#b=y,this.#v=x,this.#$=A||null,this.viewParameters={realScale:hr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=C!==!1,o?.setSidebarUiManager(this)}destroy(){this.#z?.resolve(),this.#z=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#m.clear(),this.#O?.clear(),this.#e=null,this.#w.clear(),this.#c.destroy(),this.#i?.destroy(),this.#l?.destroy(),this.#I?.destroy(),this.#C?.hide(),this.#C=null,this.#B?.destroy(),this.#B=null,this.#s=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#$}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return Ut(this,"hcmFilter",this.#U?this.#E.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return Ut(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return Ut(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Ut(this,"highlightColors",null);const e=new Map,n=!!this.#U;for(const[a,o]of t){const l=a.endsWith("_HCM");if(n&&l){e.set(a.replace("_HCM",""),o);continue}!n&&!l&&e.set(a,o)}return Ut(this,"highlightColors",e)}get highlightColorNames(){return Ut(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=t}setMainHighlightColorPicker(t){this.#B=t}editAltText(t,e=!1){this.#i?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,n,a){this.#l?.showDialog(this,t,e,n,a)}selectComment(t,e){this.#r.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,n=void 0){this.#l?.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),a=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",a),e())};this._eventBus.on("editorsrendered",a),await n}getSignature(t){this.#I?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#I}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#v=e)}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#G.focus()}findParent(t,e){for(const n of this.#r.values()){const{x:a,y:o,width:l,height:c}=n.div.getBoundingClientRect();if(t>=a&&t<=a+l&&e>=o&&e<=o+c)return n}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#m.add(t)}removeShouldRescale(t){this.#m.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*hr.PDF_TO_CSS_UNITS;for(const e of this.#m)e.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of this.#r.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:c}=n,d=n.toString(),p=this.#Q(n).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;n.empty();const y=this.#tt(p),x=this.#_===Ft.NONE,A=()=>{const w=y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:c,text:d});x&&this.showAllEditors("highlight",!0,!0),e&&w?.editComment()};if(x){this.switchToMode(Ft.HIGHLIGHT,A);return}A()}commentSelection(t=""){this.highlightSelection(t,!0)}#rt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=this.#Q(t).closest(".textLayer"),a=this.getSelectionBoxes(n);a&&(this.#C||=new uV(this),this.#C.show(n,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#a)return null;const e=`${Ec}${t}`,n=this.#a.getRawValue(e);return n&&this.#a.remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,e=null){const n=this.#J;n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#L&&(this.#C?.hide(),this.#L=null,this.#M({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#L)return;const a=this.#Q(t).closest(".textLayer");if(!a){this.#L&&(this.#C?.hide(),this.#L=null,this.#M({hasSelectedText:!1}));return}if(this.#C?.hide(),this.#L=e,this.#M({hasSelectedText:!0}),!(this.#_!==Ft.HIGHLIGHT&&this.#_!==Ft.NONE)&&(this.#_===Ft.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#_===Ft.HIGHLIGHT?this.#tt(a):null;if(o?.toggleDrawing(),this.#N){const l=new AbortController,c=this.combinedSignal(l),d=h=>{h.type==="pointerup"&&h.button!==0||(l.abort(),o?.toggleDrawing(!0),h.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",d,{signal:c}),window.addEventListener("blur",d,{signal:c})}else o?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(t=""){this.#_===Ft.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#rt()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#x)return;this.#x=new AbortController;const t=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#w)if(e.div.contains(t)){this.#j=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#j)return;const[t,e]=this.#j;this.#j=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#k)return;this.#k=new AbortController;const t=this.combinedSignal(this.#k);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#dt(){this.#k?.abort(),this.#k=null}#nt(){if(this.#h)return;this.#h=new AbortController;const t=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#st(){this.#h?.abort(),this.#h=null}#ht(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#dt(),this.#st()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of this.#w){const a=n.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Bt(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of n){const h=await a.deserialize(d);if(!h)return;o.push(h)}const l=()=>{for(const d of o)this.#it(d);this.#at(o)},c=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:c,mustExec:!0})}catch(o){Bt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#_!==Ft.NONE&&!this.isEditorHandlingKeyboard&&Ri._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#M(t){Object.entries(t).some(([n,a])=>this.#Y[n]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,t)}),this.#_===Ft.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#H([[Wt.HIGHLIGHT_FREE,!0]]))}#H(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#M({isEditing:this.#_!==Ft.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#st(),this.#M({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#H(e.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#R?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,n=!1,a=!1,o=!1){if(this.#_!==t&&!(this.#z&&(await this.#z.promise,!this.#z))){if(this.#z=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#_===Ft.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#_=t,t===Ft.NONE){this.setEditingState(!1),this.#pt();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#z.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();t===Ft.SIGNATURE&&await this.#I?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const l of this.#r.values())l.updateMode(t);if(t===Ft.POPUP){this.#s||=await this.#q.getAnnotationsByType(new Set(this.#u.map(d=>d._editorType)));const l=new Set,c=[];for(const d of this.#n.values()){const{annotationElementId:h,hasComment:p,deleted:m}=d;h&&l.add(h),p&&!m&&c.push(d.getData())}for(const d of this.#s){const{id:h,popupRef:p,contentsObj:m}=d;p&&m?.str&&!l.has(h)&&!this.#g.has(h)&&c.push(d)}this.#l?.showSidebar(c)}if(!e){n&&this.addNewEditorFromKeyboard(),this.#z.resolve();return}for(const l of this.#n.values())l.uid===e?(this.setSelected(l),o?l.editComment():a?l.enterInEditMode():l.focus()):l.unselect();this.#z.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#_&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case Wt.CREATE:this.currentLayer.addNewEditor(e);return;case Wt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#X||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of this.#w)n.updateParams(t,e);else for(const n of this.#u)n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){for(const o of this.#n.values())o.editorType===t&&o.show(e);(this.#X?.get(Wt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#H([[Wt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#F!==t){this.#F=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#R){this.#R=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#R){this.#R=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#O?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#H(t.propertiesToUpdate))}get#mt(){let t=null;for(t of this.#w);return t}updateUI(t){this.#mt===t&&this.#H(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#H(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#M({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#d?.commitOrRemove();for(const e of this.#w)e!==t&&e.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#M({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#M({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(t){this.#c.add(t),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(t){this.#c.cleanType(t)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#w],n=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},a=()=>{for(const o of e)this.#it(o)};this.addCommands({cmd:n,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#at(t){for(const e of this.#w)e.unselect();this.#w.clear();for(const e of t)e.isEmpty()||(this.#w.add(e),e.select());this.#M({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#at(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#_!==Ft.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#M({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#V[0]+=t,this.#V[1]+=e;const[a,o]=this.#V,l=[...this.#w],c=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#V[0]=this.#V[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(a,o),d.translationDone())},undo:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(-a,-o),d.translationDone())},mustExec:!1})},c);for(const d of l)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#w)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let e=!1;for(const[{x:a,y:o,pageIndex:l},c]of t)c.newX=a,c.newY=o,c.newPageIndex=l,e||=a!==c.savedX||o!==c.savedY||l!==c.savedPageIndex;if(!e)return!1;const n=(a,o,l,c)=>{if(this.#n.has(a.id)){const d=this.#r.get(c);d?a._setParentAndPosition(d,o,l):(a.pageIndex=c,a.x=o,a.y=l)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:l,newPageIndex:c}]of t)n(a,o,l,c)},undo:()=>{for(const[a,{savedX:o,savedY:l,savedPageIndex:c}]of t)n(a,o,l,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#p)for(const n of this.#p.keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#_}isEditingMode(){return this.#_!==Ft.NONE}get imageManager(){return Ut(this,"imageManager",new gv)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,p=e.rangeCount;h<p;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:a,width:o,height:l}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(h,p,m,y)=>({x:(p-a)/l,y:1-(h+m-n)/o,width:y/l,height:m/o});break;case"180":c=(h,p,m,y)=>({x:1-(h+m-n)/o,y:1-(p+y-a)/l,width:m/o,height:y/l});break;case"270":c=(h,p,m,y)=>({x:1-(p+y-a)/l,y:(h-n)/o,width:y/l,height:m/o});break;default:c=(h,p,m,y)=>({x:(h-n)/o,y:(p-a)/l,width:m/o,height:y/l});break}const d=[];for(let h=0,p=e.rangeCount;h<p;h++){const m=e.getRangeAt(h);if(!m.collapsed)for(const{x:y,y:x,width:A,height:w}of m.getClientRects())A===0||w===0||d.push(c(y,x,A,w))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const n=this.#a.getRawValue(e);n&&(this.#_===Ft.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){const a=this.#O?.get(t);a&&(a.setCanvas(e,n),this.#O.delete(t))}addMissingCanvas(t,e){(this.#O||=new Map).set(t,e)}}class Vs{#t=null;#e=!1;#s=null;#n=null;#r=null;#i=null;#a=!1;#o=null;#c=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#d=t._uiManager.useNewAltTextFlow,Vs.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){Vs._l10n??=t}async render(){const t=this.#s=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#d?(t.classList.add("new"),t.setAttribute("data-l10n-id",Vs.#f.missing),e.setAttribute("data-l10n-id",Vs.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#c._uiManager._signal;t.addEventListener("contextmenu",Zn,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const a=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#d&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",a,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#a=!0,a(o))},{signal:n}),await this.#p(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#d?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#d?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#h=await Vs._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#d||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#h),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:a,cancel:o=!1}){n&&(this.#l=n,this.#h=a),!(this.#t===t&&this.#e===e)&&(o||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#s&&(!t&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#s.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#s?.remove(),this.#s=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#s;if(!t)return;if(this.#d){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",Vs.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",Vs.#f[`${this.#g}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const a=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Ad{#t=null;#e=null;#s=!1;#n=null;#r=null;#i=null;#a=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#h(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const a=this.#n.commentButtonColor;a&&(n.backgroundColor=a)}return this.#h(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:n}=this.#t.getBoundingClientRect(),{x:a,y:o,width:l,height:c}=this.#n.parent.boundingClientRect;return[(t-a)/l,(e+n-o)/c]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#h(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=this.#n._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",Zn,{signal:n}),e&&(t.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,Ae(o)},{capture:!0,signal:n}),t.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,Ae(o)},{capture:!0,signal:n})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const a=o=>{o.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#s=!0,a(o))},{signal:n}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:n}),t}edit(t){const e=this.commentPopupPositionInLayer;let n,a;if(e)[n,a]=e;else{[n,a]=this.#n.commentButtonPosition;const{width:p,height:m,x:y,y:x}=this.#n;n=y+n*p,a=x+a*m}const o=this.#n.parent.boundingClientRect,{x:l,y:c,width:d,height:h}=o;this.#n._uiManager.editComment(this.#n,l+n*d,c+a*h,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#s}),this.#s=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#i,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#a&&(this.#i=null),t===null){this.#a="",this.#c=!0;return}this.#a=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#r=t,this.data=t,this.#o=null,this.#i=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#a="",this.#i=null,this.#o=null,this.#n=null,this.#s=!1,this.#c=!1}}class Gc{#t;#e=!1;#s=null;#n;#r;#i;#a;#o=null;#c;#l=null;#h;#d=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:l=null,signal:c}){this.#t=t,this.#s=n,this.#n=e,this.#r=a,this.#i=o,this.#a=l,this.#h=new AbortController,this.#c=AbortSignal.any([c,this.#h.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Rs.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,o=AbortSignal.any([this.#c,a.signal]),l=this.#t,c={capture:!0,signal:o,passive:!1},d=h=>{h.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",h=>{h.pointerType==="touch"&&(Ae(h),d(h))},c),l.addEventListener("pointerup",d,c),l.addEventListener("pointercancel",d,c);return}if(!this.#d){this.#d=new AbortController;const a=AbortSignal.any([this.#c,this.#d.signal]),o=this.#t,l={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#g.bind(this),l);const c=this.#p.bind(this);o.addEventListener("touchend",c,l),o.addEventListener("touchcancel",c,l),l.capture=!0,o.addEventListener("pointerdown",Ae,l),o.addEventListener("pointermove",Ae,l),o.addEventListener("pointercancel",Ae,l),o.addEventListener("pointerup",Ae,l),this.#r?.()}if(Ae(t),t.touches.length!==2||this.#s?.()){this.#l=null;return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;Ae(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:a,screenY:o}=e,{screenX:l,screenY:c}=n,d=this.#l,{touch0X:h,touch0Y:p,touch1X:m,touch1Y:y}=d,x=m-h,A=y-p,w=l-a,C=c-o,E=Math.hypot(w,C)||1,T=Math.hypot(x,A)||1;if(!this.#e&&Math.abs(T-E)<=Gc.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=o,d.touch1X=l,d.touch1Y=c,!this.#e){this.#e=!0;return}const R=[(a+l)/2,(o+c)/2];this.#i?.(R,T,E)}#p(t){t.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#a?.()),this.#l&&(Ae(t),this.#l=null,this.#e=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class Nt{#t=null;#e=null;#s=null;#n=null;#r=null;#i=!1;#a=null;#o="";#c=null;#l=null;#h=null;#d=null;#f=null;#g="";#p=!1;#u=null;#m=!1;#y=!1;#b=!1;#v=null;#E=0;#A=0;#x=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#C=Nt._zIndex++;static _borderLineWidth=-1;static _colorManager=new yv;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=Nt.prototype._resizeWithKeyboard,e=Ri.TRANSLATE_SMALL,n=Ri.TRANSLATE_BIG;return Ut(this,"_resizerKeyboardManager",new $c([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Nt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:a,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,a],this.pageTranslation=[o,l];const[c,d]=this.parentDimensions;this.x=t.x/c,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ut(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new fV({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Nt._l10n??=t,Nt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Nt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Nt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){he("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(t){this.#S=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#C}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#P(),this.#d?.remove(),this.#d=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,a){const[o,l]=this.parentDimensions;[n,a]=this.screenToPageTranslation(n,a),this.x=(t+n)/o,this.y=(e+a)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,a]=this.parentDimensions;this.setAt(t*n,e*a,this.width*n,this.height*a),this._onTranslated()}#D([t,e],n,a){[n,a]=this.screenToPageTranslation(n,a),this.x+=n/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#D(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:c}=this;const[d,h]=this.getBaseTranslation();l+=d,c+=h;const{style:p}=n;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*c).toFixed(2)}%`,this._onTranslating(l,c),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Nt,a=n/t,o=n/e;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,a]}=this;let{x:o,y:l,width:c,height:d}=this;if(c*=n,d*=a,o*=n,l*=a,this._mustFixPosition)switch(t){case 0:o=cn(o,0,n-c),l=cn(l,0,a-d);break;case 90:o=cn(o,0,n-d),l=cn(l,c,a);break;case 180:o=cn(o,c,n),l=cn(l,d,a);break;case 270:o=cn(o,d,n),l=cn(l,0,a-c);break}this.x=o/=n,this.y=l/=a;const[h,p]=this.getBaseTranslation();o+=h,l+=p,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#R(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return Nt.#R(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return Nt.#R(t,e,360-this.parentRotation)}#N(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#F(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",n),a.setAttribute("data-resizer-name",n),a.addEventListener("pointerdown",this.#k.bind(this,n),{signal:e}),a.addEventListener("contextmenu",Zn,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#c)}#k(t,e){e.preventDefault();const{isMac:n}=Qe.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#s?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#O.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",Ae,{passive:!1,signal:l}),window.addEventListener("contextmenu",Zn,{signal:l}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const h=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=c,this.div.style.cursor=d,this.#B()};window.addEventListener("pointerup",h,{signal:l}),window.addEventListener("blur",h,{signal:l})}#j(t,e,n,a){this.width=n,this.height=a,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#B(){if(!this.#h)return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:a}=this.#h;this.#h=null;const o=this.x,l=this.y,c=this.width,d=this.height;o===t&&l===e&&c===n&&d===a||this.addCommands({cmd:this.#j.bind(this,o,l,c,d),undo:this.#j.bind(this,t,e,n,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#O(t,e){const[n,a]=this.parentDimensions,o=this.x,l=this.y,c=this.width,d=this.height,h=Nt.MIN_SIZE/n,p=Nt.MIN_SIZE/a,m=this.#N(this.rotation),y=(O,B)=>[m[0]*O+m[2]*B,m[1]*O+m[3]*B],x=this.#N(360-this.rotation),A=(O,B)=>[x[0]*O+x[2]*B,x[1]*O+x[3]*B];let w,C,E=!1,T=!1;switch(t){case"topLeft":E=!0,w=(O,B)=>[0,0],C=(O,B)=>[O,B];break;case"topMiddle":w=(O,B)=>[O/2,0],C=(O,B)=>[O/2,B];break;case"topRight":E=!0,w=(O,B)=>[O,0],C=(O,B)=>[0,B];break;case"middleRight":T=!0,w=(O,B)=>[O,B/2],C=(O,B)=>[0,B/2];break;case"bottomRight":E=!0,w=(O,B)=>[O,B],C=(O,B)=>[0,0];break;case"bottomMiddle":w=(O,B)=>[O/2,B],C=(O,B)=>[O/2,0];break;case"bottomLeft":E=!0,w=(O,B)=>[0,B],C=(O,B)=>[O,0];break;case"middleLeft":T=!0,w=(O,B)=>[0,B/2],C=(O,B)=>[O,B/2];break}const R=w(c,d),N=C(c,d);let D=y(...N);const L=Nt._round(o+D[0]),k=Nt._round(l+D[1]);let j=1,P=1,U,H;if(e.fromKeyboard)({deltaX:U,deltaY:H}=e);else{const{screenX:O,screenY:B}=e,[I,Y]=this.#l;[U,H]=this.screenToPageTranslation(O-I,B-Y),this.#l[0]=O,this.#l[1]=B}if([U,H]=A(U/n,H/a),E){const O=Math.hypot(c,d);j=P=Math.max(Math.min(Math.hypot(N[0]-R[0]-U,N[1]-R[1]-H)/O,1/c,1/d),h/c,p/d)}else T?j=cn(Math.abs(N[0]-R[0]-U),h,1)/c:P=cn(Math.abs(N[1]-R[1]-H),p,1)/d;const J=Nt._round(c*j),at=Nt._round(d*P);D=y(...C(J,at));const q=L-D[0],rt=k-D[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=J,this.height=at,this.x=q,this.y=rt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new fc(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#s?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||(Vs.initialize(Nt._l10n),this.#s=new Vs(this),this.#t&&(this.#s.data=this.#t,this.#t=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(t){this.#s&&(this.#s.data=t)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(t){await this.#s?.setGuessedText(t)}serializeAltText(t){return this.#s?.serialize(t)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new Ad(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:n,deleted:a}}=this.#n;return{text:e,richText:t,date:n,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new Ad(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(this.#n||=new Ad(this),this.#n.setInitialText(t,n),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new Ad(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,c=l+o+1,d=a-100,h=c+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[c,d,h,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#i?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#U();const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),SR(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new Gc({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#$.bind(this),onPinching:this.#_.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#$(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#_(t,e,n){let o=.7*(n/e)+1-.7;if(o===1)return;const l=this.#N(this.rotation),c=(L,k)=>[l[0]*L+l[2]*k,l[1]*L+l[3]*k],[d,h]=this.parentDimensions,p=this.x,m=this.y,y=this.width,x=this.height,A=Nt.MIN_SIZE/d,w=Nt.MIN_SIZE/h;o=Math.max(Math.min(o,1/y,1/x),A/y,w/x);const C=Nt._round(y*o),E=Nt._round(x*o);if(C===y&&E===x)return;this.#u||=[p,m,y,x];const T=c(y/2,x/2),R=Nt._round(p+T[0]),N=Nt._round(m+T[1]),D=c(C/2,E/2);this.x=R-D[0],this.y=N-D[1],this.width=C,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#B()}pointerdown(t){const{isMac:e}=Qe.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#I(t);return}this.#L(t)}#L(t){const{isMac:e}=Qe.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#I(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),l={capture:!0,passive:!1,signal:o},c=h=>{a.abort(),this.#a=null,this.#p=!1,this._uiManager.endDragSession()||this.#L(h),n&&this._onStopDragging()};e&&(this.#E=t.clientX,this.#A=t.clientY,this.#a=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",h=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:m,pointerId:y}=h;if(y!==this.#a){Ae(h);return}const[x,A]=this.screenToPageTranslation(p-this.#E,m-this.#A);this.#E=p,this.#A=m,this._uiManager.dragSelectedEditors(x,A)},l),window.addEventListener("touchmove",Ae,l),window.addEventListener("pointerdown",h=>{h.pointerType===this.#o&&(this.#T||h.isPrimary)&&c(h),Ae(h)},l));const d=h=>{if(!this.#a||this.#a===h.pointerId){c(h);return}Ae(h)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const a=this.parentScale,[o,l]=this.pageDimensions,[c,d]=this.pageTranslation,h=t/a,p=e/a,m=this.x*o,y=this.y*l,x=this.width*o,A=this.height*l;switch(n){case 0:return[m+h+c,l-y-p-A+d,m+h+x+c,l-y-p+d];case 90:return[m+p+c,l-y+h+d,m+p+A+c,l-y+h+x+d];case 180:return[m-h-x+c,l-y+p+d,m-h+c,l-y+p+A+d];case 270:return[m-p-A+c,l-y-h-x+d,m-p+c,l-y-h+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,a,o,l]=t,c=o-n,d=l-a;switch(this.rotation){case 0:return[n,e-l,c,d];case 90:return[n,e-a,d,c];case 180:return[o,e-a,c,d];case 270:return[o,e-l,d,c];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Nt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:a,deleted:o,richText:l},uid:c,pageIndex:d,creationDate:h,modificationDate:p}=this;return{id:c,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:h,modificationDate:n||p,popupRef:!o,color:e,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return e<l&&a>0&&t<o&&n>0}#U(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#U()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,n){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[o,l]=a.pageDimensions,[c,d,h,p]=a.getRectInCurrentCoords(t.rect,l);return a.x=c/o,a.y=d/l,a.width=h/o,a.height=p/l,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#P(),this.removeEditToolbar(),this.#x){for(const t of this.#x.values())clearTimeout(t);this.#x=null}this.parent=null,this.#T?.destroy(),this.#T=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#F(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,a,o,l]=this.getPDFRect();return[Nt._round(n+(o-n)*t),Nt._round(a+(l-a)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const l=this.#X.bind(this),c=this.#q.bind(this),d=this._uiManager._signal;for(const h of this.#e){const p=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",l,{signal:d}),h.addEventListener("blur",c,{signal:d}),h.addEventListener("focus",this.#Y.bind(this,p),{signal:d}),h.setAttribute("data-l10n-id",Nt._l10nResizer[p])}}const n=this.#e[0];let a=0;for(const l of e){if(l===n)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==a){if(o<a)for(let c=0;c<a-o;c++)this.#c.append(this.#c.firstChild);else if(o>a)for(let c=0;c<o-a;c++)this.#c.firstChild.before(this.#c.lastChild);let l=0;for(const c of e){const h=this.#e[l++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Nt._l10nResizer[h])}}this.#V(0),this.#b=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#X(t){Nt._resizerKeyboardManager.exec(this,t)}#q(t){this.#b&&t.relatedTarget?.parentNode!==this.#c&&this.#P()}#Y(t){this.#g=this.#b?t:""}#V(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#b&&this.#O(this.#g,{deltaX:t,deltaY:e,fromKeyboard:!0})}#P(){this.#b=!1,this.#V(-1),this.#B()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(t){this.#m=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#x||=new Map;const{action:n}=t;let a=this.#x.get(n);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#x.delete(n),this.#x.size===0&&(this.#x=null)},Nt._telemetryTimeout),this.#x.set(n,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}updateFakeAnnotationElement(t){if(!this.#d&&!this.deleted){this.#d=t.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class fV extends Nt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const mA=3285377520,ds=4294901760,zs=65535;class AR{constructor(t){this.h1=t?t&4294967295:mA,this.h2=t?t&4294967295:mA}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let w=0,C=t.length;w<C;w++){const E=t.charCodeAt(w);E<=255?e[n++]=E:(e[n++]=E>>>8,e[n++]=E&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=n>>2,o=n-a*4,l=new Uint32Array(e.buffer,0,a);let c=0,d=0,h=this.h1,p=this.h2;const m=3432918353,y=461845907,x=m&zs,A=y&zs;for(let w=0;w<a;w++)w&1?(c=l[w],c=c*m&ds|c*x&zs,c=c<<15|c>>>17,c=c*y&ds|c*A&zs,h^=c,h=h<<13|h>>>19,h=h*5+3864292196):(d=l[w],d=d*m&ds|d*x&zs,d=d<<15|d>>>17,d=d*y&ds|d*A&zs,p^=d,p=p<<13|p>>>19,p=p*5+3864292196);switch(c=0,o){case 3:c^=e[a*4+2]<<16;case 2:c^=e[a*4+1]<<8;case 1:c^=e[a*4],c=c*m&ds|c*x&zs,c=c<<15|c>>>17,c=c*y&ds|c*A&zs,a&1?h^=c:p^=c}this.h1=h,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&ds|t*36045&zs,e=e*4283543511&ds|((e<<16|t>>>16)*2950163797&ds)>>>16,t^=e>>>1,t=t*444984403&ds|t*60499&zs,e=e*3301882366&ds|((e<<16|t>>>16)*3120437893&ds)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Kg=Object.freeze({map:null,hash:"",transfer:void 0});class vv{#t=!1;#e=null;#s=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=this.#n.get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof Nt&&this.#s.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of this.#n.values())if(n instanceof Nt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=this.#n.get(t);let a=!1;if(n!==void 0)for(const[o,l]of Object.entries(e))n[o]!==l&&(a=!0,n[o]=l);else a=!0,this.#n.set(t,e);a&&this.#r(),e instanceof Nt&&((this.#s||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new CR(this)}get serializable(){if(this.#n.size===0)return Kg;const t=new Map,e=new AR,n=[],a=Object.create(null);let o=!1;for(const[l,c]of this.#n){const d=c instanceof Nt?c.serialize(!1,a):c;d&&(t.set(l,d),e.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Kg}get editorStats(){let t=null;const e=new Map;let n=0,a=0;for(const o of this.#n.values()){if(!(o instanceof Nt)){o.popup&&(o.popup.deleted?a+=1:n+=1);continue}o.isCommentDeleted?a+=1:o.hasEditedComment&&(n+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:c}=l;e.has(c)||e.set(c,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[c]||=new Map;for(const[h,p]of Object.entries(l)){if(h==="type")continue;let m=d.get(h);m||(m=new Map,d.set(h,m));const y=m.get(p)??0;m.set(p,y+1)}}if((a>0||n>0)&&(t||=Object.create(null),t.comments={deleted:a,edited:n}),!t)return null;for(const[o,l]of e)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const n=this.#s?.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#s?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#s)for(const e of this.#s.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class CR extends vv{#t;constructor(t){super();const{map:e,hash:n,transfer:a}=t.serializable,o=structuredClone(e,a?{transfer:a}:null);this.#t={map:o,hash:n,transfer:a}}get print(){he("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Ut(this,"modifiedIds",{ids:new Set,hash:""})}}class pV{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||this.#t.has(t.loadedName))){if(Qt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:l}=t,c=new FontFace(a,o,l);this.addNativeFontFace(c);try{await c.load(),this.#t.add(a),n?.(t)}catch{Bt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}he("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(a){throw Bt(`Failed to load font '${n.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const a=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Ut(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Ut(this,"isSyncFontLoadingSupported",bn||Qe.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Qt(!a.done,"completeRequest() cannot be called twice."),a.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,a={done:!1,complete:e,callback:t};return n.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ut(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(N,D){return N.charCodeAt(D)<<24|N.charCodeAt(D+1)<<16|N.charCodeAt(D+2)<<8|N.charCodeAt(D+3)&255}function a(N,D,L,k){const j=N.substring(0,D),P=N.substring(D+L);return j+k+P}let o,l;const c=this._document.createElement("canvas");c.width=1,c.height=1;const d=c.getContext("2d");let h=0;function p(N,D){if(++h>30){Bt("Load test font never loaded."),D();return}if(d.font="30px "+N,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(p.bind(null,N,D))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=a(y,976,m.length,m);const A=16,w=1482184792;let C=n(y,A);for(o=0,l=m.length-3;o<l;o+=4)C=C-w+n(m,o)|0;o<m.length&&(C=C-w+n(m+"XXX",o)|0),y=a(y,A,4,eV(C));const E=`url(data:font/opentype;base64,${btoa(y)});`,T=`@font-face {font-family:"${m}";src:${E}}`;this.insertRule(T);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const N of[t.loadedName,m]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=N,R.append(D)}this._document.body.append(R),p(m,()=>{R.remove(),e.complete()})}}class mV{#t;constructor(t,e=null,n,a){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,n&&Object.assign(this,n),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${mR(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let a;try{a=t.get(n)}catch(l){Bt(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(a||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function gV(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(bn)return s;const t=URL.parse(s,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function yV(s){if(bn&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return Uc(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s?.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Cd(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const Qg=s=>typeof s=="object"&&Number.isInteger(s?.num)&&s.num>=0&&Number.isInteger(s?.gen)&&s.gen>=0,vV=s=>typeof s=="object"&&typeof s?.name=="string",ER=aV.bind(null,Qg,vV);class bV{#t=new Map;#e=Promise.resolve();postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,n)})}addEventListener(t,e,n=null){let a=null;if(n?.signal instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Bt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);a=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Ed={DATA:1,ERROR:2},Ie={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function gA(){}function jn(s){if(s instanceof Ti||s instanceof lh||s instanceof lA||s instanceof _c||s instanceof Wm)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||he('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Ti(s.message);case"InvalidPDFException":return new lh(s.message);case"PasswordException":return new lA(s.message,s.code);case"ResponseException":return new _c(s.message,s.status,s.missing);case"UnknownErrorException":return new Wm(s.message,s.details)}return new Wm(s.message,s.toString())}class ic{#t=new AbortController;constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const n=t.callbackId,a=this.callbackCapabilities[n];if(!a)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===Ed.DATA)a.resolve(t.data);else if(t.callback===Ed.ERROR)a.reject(jn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(l){o.postMessage({sourceName:n,targetName:a,callback:Ed.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:n,targetName:a,callback:Ed.ERROR,callbackId:t.callbackId,reason:jn(l)})});return}if(t.streamId){this.#s(t);return}e(t.data)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},n)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,e,n,a){const o=this.streamId++,l=this.sourceName,c=this.targetName,d=this.comObj;return new ReadableStream({start:h=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:h,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:c,action:t,streamId:o,data:e,desiredSize:h.desiredSize},a),p.promise},pull:h=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,d.postMessage({sourceName:l,targetName:c,stream:Ie.PULL,streamId:o,desiredSize:h.desiredSize}),p.promise},cancel:h=>{Qt(h instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:c,stream:Ie.CANCEL,streamId:o,reason:jn(h)}),p.promise}},n)}#s(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,o=this.comObj,l=this,c=this.actionHandler[t.action],d={enqueue(h,p=1,m){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=p,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:a,stream:Ie.ENQUEUE,streamId:e,chunk:h},m)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:a,stream:Ie.CLOSE,streamId:e}),delete l.streamSinks[e])},error(h){Qt(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:a,stream:Ie.ERROR,streamId:e,reason:jn(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(c,t.data,d).then(function(){o.postMessage({sourceName:n,targetName:a,stream:Ie.START_COMPLETE,streamId:e,success:!0})},function(h){o.postMessage({sourceName:n,targetName:a,stream:Ie.START_COMPLETE,streamId:e,reason:jn(h)})})}#n(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,o=this.comObj,l=this.streamControllers[e],c=this.streamSinks[e];switch(t.stream){case Ie.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(jn(t.reason));break;case Ie.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(jn(t.reason));break;case Ie.PULL:if(!c){o.postMessage({sourceName:n,targetName:a,stream:Ie.PULL_COMPLETE,streamId:e,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||gA).then(function(){o.postMessage({sourceName:n,targetName:a,stream:Ie.PULL_COMPLETE,streamId:e,success:!0})},function(h){o.postMessage({sourceName:n,targetName:a,stream:Ie.PULL_COMPLETE,streamId:e,reason:jn(h)})});break;case Ie.ENQUEUE:if(Qt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case Ie.CLOSE:if(Qt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,e);break;case Ie.ERROR:Qt(l,"error should have stream controller"),l.controller.error(jn(t.reason)),this.#r(l,e);break;case Ie.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(jn(t.reason)),this.#r(l,e);break;case Ie.CANCEL:if(!c)break;const d=jn(t.reason);Promise.try(c.onCancel||gA,d).then(function(){o.postMessage({sourceName:n,targetName:a,stream:Ie.CANCEL_COMPLETE,streamId:e,success:!0})},function(h){o.postMessage({sourceName:n,targetName:a,stream:Ie.CANCEL_COMPLETE,streamId:e,reason:jn(h)})}),c.sinkCapability.reject(d),c.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class _R{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){he("Abstract method `_createCanvas` called.")}}class xV extends _R{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class TR{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){he("Abstract method `_fetch` called.")}}class yA extends TR{async _fetch(t){const e=await Wo(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Uc(e)}}class RR{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,a,o){return"none"}destroy(t=!1){}}class wV extends RR{#t;#e;#s;#n;#r;#i;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#r=e}get#o(){return this.#e||=new Map}get#c(){return this.#i||=new Map}get#l(){if(!this.#s){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const n=this.#r.createElementNS(bi,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#s=this.#r.createElementNS(bi,"defs"),t.append(n),n.append(this.#s),this.#r.body.append(t)}return this.#s}#h(t){if(t.length===1){const d=t[0],h=new Array(256);for(let m=0;m<256;m++)h[m]=d[m]/255;const p=h.join(",");return[p,p,p]}const[e,n,a]=t,o=new Array(256),l=new Array(256),c=new Array(256);for(let d=0;d<256;d++)o[d]=e[d]/255,l[d]=n[d]/255,c[d]=a[d]/255;return[o.join(","),l.join(","),c.join(",")]}#d(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(Hc(e)?Bt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=dv(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[n,a,o]=this.#h(t),l=t.length===1?n:`${n}${a}${o}`;if(e=this.#o.get(l),e)return this.#o.set(t,e),e;const c=`g_${this.#n}_transfer_map_${this.#a++}`,d=this.#d(c);this.#o.set(t,d),this.#o.set(l,d);const h=this.#p(c);return this.#m(n,a,o,h),d}addHCMFilter(t,e){const n=`${t}-${e}`,a="base";let o=this.#c.get(a);if(o?.key===n||(o?(o.filter?.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},this.#c.set(a,o)),!t||!e))return o.url;const l=this.#b(t);t=xt.makeHexColor(...l);const c=this.#b(e);if(e=xt.makeHexColor(...c),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return o.url;const d=new Array(256);for(let x=0;x<=255;x++){const A=x/255;d[x]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const h=d.join(","),p=`g_${this.#n}_hcm_filter`,m=o.filter=this.#p(p);this.#m(h,h,h,m),this.#g(m);const y=(x,A)=>{const w=l[x]/255,C=c[x]/255,E=new Array(A+1);for(let T=0;T<=A;T++)E[T]=w+T/A*(C-w);return E.join(",")};return this.#m(y(0,5),y(1,5),y(2,5),m),o.url=this.#d(p),o.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[n]=this.#h([t]),a=`alpha_${n}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_alpha_map_${this.#a++}`,l=this.#d(o);this.#o.set(t,l),this.#o.set(a,l);const c=this.#p(o);return this.#y(n,c),l}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let n,a;if(t?([n]=this.#h([t]),a=`luminosity_${n}`):a="luminosity",e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_luminosity_map_${this.#a++}`,l=this.#d(o);this.#o.set(t,l),this.#o.set(a,l);const c=this.#p(o);return this.#f(c),t&&this.#y(n,c),l}addHighlightHCMFilter(t,e,n,a,o){const l=`${e}-${n}-${a}-${o}`;let c=this.#c.get(t);if(c?.key===l||(c?(c.filter?.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},this.#c.set(t,c)),!e||!n))return c.url;const[d,h]=[e,n].map(this.#b.bind(this));let p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),m=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[y,x]=[a,o].map(this.#b.bind(this));m<p&&([p,m,y,x]=[m,p,x,y]),this.#l.style.color="";const A=(E,T,R)=>{const N=new Array(256),D=(m-p)/R,L=E/255,k=(T-E)/(255*R);let j=0;for(let P=0;P<=R;P++){const U=Math.round(p+P*D),H=L+P*k;for(let J=j;J<=U;J++)N[J]=H;j=U+1}for(let P=j;P<256;P++)N[P]=N[j-1];return N.join(",")},w=`g_${this.#n}_hcm_${t}_filter`,C=c.filter=this.#p(w);return this.#g(C),this.#m(A(y[0],x[0],5),A(y[1],x[1],5),A(y[2],x[2],5),C),c.url=this.#d(w),c.url}destroy(t=!1){t&&this.#i?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#e?.clear(),this.#e=null,this.#i?.clear(),this.#i=null,this.#a=0)}#f(t){const e=this.#r.createElementNS(bi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(bi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){const e=this.#r.createElementNS(bi,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,n){const a=this.#r.createElementNS(bi,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",n),t.append(a)}#m(t,e,n,a){const o=this.#r.createElementNS(bi,"feComponentTransfer");a.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",e),this.#u(o,"feFuncB",n)}#y(t,e){const n=this.#r.createElementNS(bi,"feComponentTransfer");e.append(n),this.#u(n,"feFuncA",t)}#b(t){return this.#l.style.color=t,Ko(getComputedStyle(this.#l).getPropertyValue("color"))}}class NR{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){he("Abstract method `_fetch` called.")}}class vA extends NR{async _fetch(t){const e=await Wo(t,"arraybuffer");return new Uint8Array(e)}}class DR{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){he("Abstract method `_fetch` called.")}}class bA extends DR{async _fetch(t){const e=await Wo(t,"arraybuffer");return new Uint8Array(e)}}bn&&Bt("Please use the `legacy` build in Node.js environments.");async function bv(s){const e=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(e)}class SV extends RR{}class AV extends _R{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class CV extends TR{async _fetch(t){return bv(t)}}class EV extends NR{async _fetch(t){return bv(t)}}class _V extends DR{async _fetch(t){return bv(t)}}const lo="__forcedDependency",{floor:xA,ceil:wA}=Math;function _d(s,t,e,n,a,o){s[t*4+0]=Math.min(s[t*4+0],e),s[t*4+1]=Math.min(s[t*4+1],n),s[t*4+2]=Math.max(s[t*4+2],a),s[t*4+3]=Math.max(s[t*4+3],o)}const Zg=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class TV{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Zg}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const Td=(s,t)=>{if(!s)return;let e=s.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},s.set(t,e)),e};class RV{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[lo]:[]};#s=new Map;#n=[];#r=[];#i=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#d=new Map;#f;#g;#p;#u;#m;constructor(t,e,n=!1){this.#f=t.width,this.#g=t.height,this.#y(e),n&&(this.#m=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,e){const n=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(n),this.#u=new Uint32Array(n),e&&e.length>0?(this.#u.set(e),this.#u.fill(Zg,e.length)):this.#u.fill(Zg)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[lo]:{__proto__:this.#e[lo]}},this.#a={__proto__:this.#a},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);const n=this.#n.pop();return n!==void 0&&(Td(this.#m,t)?.dependencies.add(n),this.#u[t]=this.#u[n]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(Td(this.#m,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const e=this.#r.pop();return e!==void 0&&(Td(this.#m,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#i.push(xt.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform())),this}popBaseTransform(){return this.#i.length>1&&this.#i.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#s.set(t,e),this}recordSimpleDataFromNamed(t,e,n){this.#t[t]=this.#s.get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(lo,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(lo,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,n,a,o,l){const c=xt.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];xt.axialAlignedBoundingBox([n,o,a,l],c,d);const h=xt.intersect(this.#a,d);return h?(this.#a[0]=h[0],this.#a[1]=h[1],this.#a[2]=h[2],this.#a[3]=h[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,e,n,a,o,l){const c=this.#a;if(c[0]===1/0)return this;const d=xt.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform());if(c[0]===-1/0)return xt.axialAlignedBoundingBox([n,o,a,l],d,this.#o),this;const h=[1/0,1/0,-1/0,-1/0];return xt.axialAlignedBoundingBox([n,o,a,l],d,h),this.#o[0]=Math.min(this.#o[0],Math.max(h[0],c[0])),this.#o[1]=Math.min(this.#o[1],Math.max(h[1],c[1])),this.#o[2]=Math.max(this.#o[2],Math.min(h[2],c[2])),this.#o[3]=Math.max(this.#o[3],Math.min(h[3],c[3])),this}recordCharacterBBox(t,e,n,a=1,o=0,l=0,c){const d=n.bbox;let h,p;if(d&&(h=d[2]!==d[0]&&d[3]!==d[1]&&this.#d.get(n),h!==!1&&(p=[0,0,0,0],xt.axialAlignedBoundingBox(d,n.fontMatrix,p),(a!==1||o!==0||l!==0)&&xt.scaleMinMax([a,0,0,-a,o,l],p),h)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!c)return this.recordFullPageBBox(t);const m=c();return d&&p&&h===void 0&&(h=p[0]<=o-m.actualBoundingBoxLeft&&p[2]>=o+m.actualBoundingBoxRight&&p[1]<=l-m.actualBoundingBoxAscent&&p[3]>=l+m.actualBoundingBoxDescent,this.#d.set(n,h),h)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,o-m.actualBoundingBoxLeft,o+m.actualBoundingBoxRight,l-m.actualBoundingBoxAscent,l+m.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#g,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const n=this.#l,a=this.#t,o=this.#e;for(const l of e)l in this.#t?n.add(a[l]):l in o&&o[l].forEach(n.add,n);return this}recordNamedDependency(t,e){return this.#s.has(e)&&this.#l.add(this.#s.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[lo]),this.#m){const n=Td(this.#m,t),{dependencies:a}=n;this.#l.forEach(a.add,a),this.#n.forEach(a.add,a),this.#r.forEach(a.add,a),a.delete(t),n.isRenderingOperation=!0}if(this.#c===t){const n=xA(this.#o[0]*256/this.#f),a=xA(this.#o[1]*256/this.#g),o=wA(this.#o[2]*256/this.#f),l=wA(this.#o[3]*256/this.#g);_d(this.#p,t,n,a,o,l);for(const c of this.#l)c!==t&&_d(this.#p,c,n,a,o,l);for(const c of this.#n)c!==t&&_d(this.#p,c,n,a,o,l);for(const c of this.#r)c!==t&&_d(this.#p,c,n,a,o,l);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const n=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const a of n)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#h.get(t);return this.#h.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#d.clear(),new TV(this.#u,this.#p)}takeDebugMetadata(){return this.#m}}class dh{#t;#e;#s;#n=0;#r=0;constructor(t,e,n){if(t instanceof dh&&t.#s===!!n)return t;this.#t=t,this.#e=e,this.#s=!!n}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#s||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,n,a,o,l){return this.#s||this.#t.recordClipBox(this.#e,e,n,a,o,l),this}recordBBox(t,e,n,a,o,l){return this.#s||this.#t.recordBBox(this.#e,e,n,a,o,l),this}recordCharacterBBox(t,e,n,a,o,l,c){return this.#s||this.#t.recordCharacterBBox(this.#e,e,n,a,o,l,c),this}recordFullPageBBox(t){return this.#s||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#s||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const hs={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},rn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Jg(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,n),s.clip(a)}class xv{isModifyingCurrentTransform(){return!1}getPattern(){he("Abstract method `getPattern` called.")}}class NV extends xv{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,a){let o;if(a===rn.STROKE||a===rn.FILL){const l=e.current.getClippedPathBoundingBox(a,Se(t))||[0,0,0,0],c=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,h=e.cachedCanvases.getCanvas("pattern",c,d),p=h.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),n=xt.transform(n,[1,0,0,1,l[0],l[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),Jg(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=t.createPattern(h.canvas,"no-repeat");const m=new DOMMatrix(n);o.setTransform(m)}else Jg(t,this._bbox),o=this._createGradient(t);return o}}function Zm(s,t,e,n,a,o,l,c){const d=t.coords,h=t.colors,p=s.data,m=s.width*4;let y;d[e+1]>d[n+1]&&(y=e,e=n,n=y,y=o,o=l,l=y),d[n+1]>d[a+1]&&(y=n,n=a,a=y,y=l,l=c,c=y),d[e+1]>d[n+1]&&(y=e,e=n,n=y,y=o,o=l,l=y);const x=(d[e]+t.offsetX)*t.scaleX,A=(d[e+1]+t.offsetY)*t.scaleY,w=(d[n]+t.offsetX)*t.scaleX,C=(d[n+1]+t.offsetY)*t.scaleY,E=(d[a]+t.offsetX)*t.scaleX,T=(d[a+1]+t.offsetY)*t.scaleY;if(A>=T)return;const R=h[o],N=h[o+1],D=h[o+2],L=h[l],k=h[l+1],j=h[l+2],P=h[c],U=h[c+1],H=h[c+2],J=Math.round(A),at=Math.round(T);let q,rt,O,B,I,Y,ft,F;for(let G=J;G<=at;G++){if(G<C){const et=G<A?0:(A-G)/(A-C);q=x-(x-w)*et,rt=R-(R-L)*et,O=N-(N-k)*et,B=D-(D-j)*et}else{let et;G>T?et=1:C===T?et=0:et=(C-G)/(C-T),q=w-(w-E)*et,rt=L-(L-P)*et,O=k-(k-U)*et,B=j-(j-H)*et}let tt;G<A?tt=0:G>T?tt=1:tt=(A-G)/(A-T),I=x-(x-E)*tt,Y=R-(R-P)*tt,ft=N-(N-U)*tt,F=D-(D-H)*tt;const lt=Math.round(Math.min(q,I)),mt=Math.round(Math.max(q,I));let st=m*G+lt*4;for(let et=lt;et<=mt;et++)tt=(q-et)/(q-I),tt<0?tt=0:tt>1&&(tt=1),p[st++]=rt-(rt-Y)*tt|0,p[st++]=O-(O-ft)*tt|0,p[st++]=B-(B-F)*tt|0,p[st++]=255}}function DV(s,t,e){const n=t.coords,a=t.colors;let o,l;switch(t.type){case"lattice":const c=t.verticesPerRow,d=Math.floor(n.length/c)-1,h=c-1;for(o=0;o<d;o++){let p=o*c;for(let m=0;m<h;m++,p++)Zm(s,e,n[p],n[p+1],n[p+c],a[p],a[p+1],a[p+c]),Zm(s,e,n[p+c+1],n[p+1],n[p+c],a[p+c+1],a[p+1],a[p+c])}break;case"triangles":for(o=0,l=n.length;o<l;o+=3)Zm(s,e,n[o],n[o+1],n[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class MV extends xv{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const c=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-c,p=Math.ceil(this._bounds[3])-d,m=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),x=h/m,A=p/y,w={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-d,scaleX:1/x,scaleY:1/A},C=m+4,E=y+4,T=n.getCanvas("mesh",C,E),R=T.context,N=R.createImageData(m,y);if(e){const L=N.data;for(let k=0,j=L.length;k<j;k+=4)L[k]=e[0],L[k+1]=e[1],L[k+2]=e[2],L[k+3]=255}for(const L of this._figures)DV(N,L,w);return R.putImageData(N,2,2),{canvas:T.canvas,offsetX:c-2*x,offsetY:d-2*A,scaleX:x,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,a){Jg(t,this._bbox);const o=new Float32Array(2);if(a===rn.SHADING)xt.singularValueDecompose2dScale(Se(t),o);else if(this.matrix){xt.singularValueDecompose2dScale(this.matrix,o);const[c,d]=o;xt.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=c,o[1]*=d}else xt.singularValueDecompose2dScale(e.baseTransform,o);const l=this._createMeshCanvas(o,a===rn.SHADING?null:this._background,e.cachedCanvases);return a!==rn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class kV extends xv{getPattern(){return"hotpink"}}function LV(s){switch(s[0]){case"RadialAxial":return new NV(s);case"Mesh":return new MV(s);case"Dummy":return new kV}throw new Error(`Unknown IR type: ${s[0]}`)}const SA={COLORED:1,UNCOLORED:2};class wv{static MAX_PATTERN_SIZE=3e3;constructor(t,e,n,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=a}createPatternCanvas(t,e){const{bbox:n,operatorList:a,paintType:o,tilingType:l,color:c,canvasGraphicsFactory:d}=this;let{xstep:h,ystep:p}=this;h=Math.abs(h),p=Math.abs(p),Oh("TilingType: "+l);const m=n[0],y=n[1],x=n[2],A=n[3],w=x-m,C=A-y,E=new Float32Array(2);xt.singularValueDecompose2dScale(this.matrix,E);const[T,R]=E;xt.singularValueDecompose2dScale(this.baseTransform,E);const N=T*E[0],D=R*E[1];let L=w,k=C,j=!1,P=!1;const U=Math.ceil(h*N),H=Math.ceil(p*D),J=Math.ceil(w*N),at=Math.ceil(C*D);U>=J?L=h:j=!0,H>=at?k=p:P=!0;const q=this.getSizeAndScale(L,this.ctx.canvas.width,N),rt=this.getSizeAndScale(k,this.ctx.canvas.height,D),O=t.cachedCanvases.getCanvas("pattern",q.size,rt.size),B=O.context,I=d.createCanvasGraphics(B,e);if(I.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(I,o,c),B.translate(-q.scale*m,-rt.scale*y),I.transform(0,q.scale,0,0,rt.scale,0,0),B.save(),I.dependencyTracker?.save(),this.clipBbox(I,m,y,x,A),I.baseTransform=Se(I.ctx),I.executeOperatorList(a),I.endDrawing(),I.dependencyTracker?.restore(),B.restore(),j||P){const Y=O.canvas;j&&(L=h),P&&(k=p);const ft=this.getSizeAndScale(L,this.ctx.canvas.width,N),F=this.getSizeAndScale(k,this.ctx.canvas.height,D),G=ft.size,tt=F.size,lt=t.cachedCanvases.getCanvas("pattern-workaround",G,tt),mt=lt.context,st=j?Math.floor(w/h):0,et=P?Math.floor(C/p):0;for(let yt=0;yt<=st;yt++)for(let vt=0;vt<=et;vt++)mt.drawImage(Y,G*yt,tt*vt,G,tt,0,0,G,tt);return{canvas:lt.canvas,scaleX:ft.scale,scaleY:F.scale,offsetX:m,offsetY:y}}return{canvas:O.canvas,scaleX:q.scale,scaleY:rt.scale,offsetX:m,offsetY:y}}getSizeAndScale(t,e,n){const a=Math.max(wv.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=a?o=a:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,a,o){const l=a-e,c=o-n;t.ctx.rect(e,n,l,c),xt.axialAlignedBoundingBox([e,n,a,o],Se(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const a=t.ctx,o=t.current;switch(e){case SA.COLORED:const{fillStyle:l,strokeStyle:c}=this.ctx;a.fillStyle=o.fillColor=l,a.strokeStyle=o.strokeColor=c;break;case SA.UNCOLORED:a.fillStyle=a.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new tV(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,a,o){let l=n;a!==rn.SHADING&&(l=xt.transform(l,e.baseTransform),this.matrix&&(l=xt.transform(l,this.matrix)));const c=this.createPatternCanvas(e,o);let d=new DOMMatrix(l);d=d.translate(c.offsetX,c.offsetY),d=d.scale(1/c.scaleX,1/c.scaleY);const h=t.createPattern(c.canvas,"repeat");return h.setTransform(d),h}}function jV({src:s,srcPos:t=0,dest:e,width:n,height:a,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const c=Qe.isLittleEndian?4278190080:255,[d,h]=l?[o,c]:[c,o],p=n>>3,m=n&7,y=s.length;e=new Uint32Array(e.buffer);let x=0;for(let A=0;A<a;A++){for(const C=t+p;t<C;t++){const E=t<y?s[t]:255;e[x++]=E&128?h:d,e[x++]=E&64?h:d,e[x++]=E&32?h:d,e[x++]=E&16?h:d,e[x++]=E&8?h:d,e[x++]=E&4?h:d,e[x++]=E&2?h:d,e[x++]=E&1?h:d}if(m===0)continue;const w=t<y?s[t++]:255;for(let C=0;C<m;C++)e[x++]=w&1<<7-C?h:d}return{srcPos:t,destPos:x}}const AA=16,CA=100,OV=15,EA=10,On=16,Jm=new DOMMatrix,Wn=new Float32Array(2),bo=new Float32Array([1/0,1/0,-1/0,-1/0]);function PV(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},s.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},s.transform=function(e,n,a,o,l,c){t.transform(e,n,a,o,l,c),this.__originalTransform(e,n,a,o,l,c)},s.setTransform=function(e,n,a,o,l,c){t.setTransform(e,n,a,o,l,c),this.__originalSetTransform(e,n,a,o,l,c)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(e){t.rotate(e),this.__originalRotate(e)},s.clip=function(e){t.clip(e),this.__originalClip(e)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,a,o,l,c){t.bezierCurveTo(e,n,a,o,l,c),this.__originalBezierCurveTo(e,n,a,o,l,c)},s.rect=function(e,n,a,o){t.rect(e,n,a,o),this.__originalRect(e,n,a,o)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class FV{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,n)):(a=this.canvasFactory.create(e,n),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Rd(s,t,e,n,a,o,l,c,d,h){const[p,m,y,x,A,w]=Se(s);if(m===0&&y===0){const T=l*p+A,R=Math.round(T),N=c*x+w,D=Math.round(N),L=(l+d)*p+A,k=Math.abs(Math.round(L)-R)||1,j=(c+h)*x+w,P=Math.abs(Math.round(j)-D)||1;return s.setTransform(Math.sign(p),0,0,Math.sign(x),R,D),s.drawImage(t,e,n,a,o,0,0,k,P),s.setTransform(p,m,y,x,A,w),[k,P]}if(p===0&&x===0){const T=c*y+A,R=Math.round(T),N=l*m+w,D=Math.round(N),L=(c+h)*y+A,k=Math.abs(Math.round(L)-R)||1,j=(l+d)*m+w,P=Math.abs(Math.round(j)-D)||1;return s.setTransform(0,Math.sign(m),Math.sign(y),0,R,D),s.drawImage(t,e,n,a,o,0,0,P,k),s.setTransform(p,m,y,x,A,w),[P,k]}s.drawImage(t,e,n,a,o,l,c,d,h);const C=Math.hypot(p,m),E=Math.hypot(y,x);return[C*d,E*h]}class _A{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Yg;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=sn.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,n){n?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=bo.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=rn.FILL,e=null){const n=this.minMax.slice();if(t===rn.STROKE){e||he("Stroke bounding box must include transform."),xt.singularValueDecompose2dScale(e,Wn);const a=Wn[0]*this.lineWidth/2,o=Wn[1]*this.lineWidth/2;n[0]-=a,n[1]-=o,n[2]+=a,n[3]+=o}return n}updateClipFromPath(){const t=xt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(bo,0)}getClippedPathBoundingBox(t=rn.FILL,e=null){return xt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function TA(s,t){if(t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,a=e%On,o=(e-a)/On,l=a===0?o:o+1,c=s.createImageData(n,On);let d=0,h;const p=t.data,m=c.data;let y,x,A,w;if(t.kind===hc.GRAYSCALE_1BPP){const C=p.byteLength,E=new Uint32Array(m.buffer,0,m.byteLength>>2),T=E.length,R=n+7>>3,N=4294967295,D=Qe.isLittleEndian?4278190080:255;for(y=0;y<l;y++){for(A=y<o?On:a,h=0,x=0;x<A;x++){const L=C-d;let k=0;const j=L>R?n:L*8-7,P=j&-8;let U=0,H=0;for(;k<P;k+=8)H=p[d++],E[h++]=H&128?N:D,E[h++]=H&64?N:D,E[h++]=H&32?N:D,E[h++]=H&16?N:D,E[h++]=H&8?N:D,E[h++]=H&4?N:D,E[h++]=H&2?N:D,E[h++]=H&1?N:D;for(;k<j;k++)U===0&&(H=p[d++],U=128),E[h++]=H&U?N:D,U>>=1}for(;h<T;)E[h++]=0;s.putImageData(c,0,y*On)}}else if(t.kind===hc.RGBA_32BPP){for(x=0,w=n*On*4,y=0;y<o;y++)m.set(p.subarray(d,d+w)),d+=w,s.putImageData(c,0,x),x+=On;y<l&&(w=n*a*4,m.set(p.subarray(d,d+w)),s.putImageData(c,0,x))}else if(t.kind===hc.RGB_24BPP)for(A=On,w=n*A,y=0;y<l;y++){for(y>=o&&(A=a,w=n*A),h=0,x=w;x--;)m[h++]=p[d++],m[h++]=p[d++],m[h++]=p[d++],m[h++]=255;s.putImageData(c,0,y*On)}else throw new Error(`bad image kind: ${t.kind}`)}function RA(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,a=e%On,o=(e-a)/On,l=a===0?o:o+1,c=s.createImageData(n,On);let d=0;const h=t.data,p=c.data;for(let m=0;m<l;m++){const y=m<o?On:a;({srcPos:d}=jV({src:h,srcPos:d,dest:p,width:n,height:y,nonBlackColor:0})),s.putImageData(c,0,m*On)}}function Wl(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function Nd(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}function NA(s,t){if(t)return!0;xt.singularValueDecompose2dScale(s,Wn);const e=Math.fround(Rs.pixelRatio*hr.PDF_TO_CSS_UNITS);return Wn[0]<=e&&Wn[1]<=e}const BV=["butt","round","square"],IV=["miter","round","bevel"],zV={},DA={};class Ro{constructor(t,e,n,a,o,{optionalContentConfig:l,markedContentStack:c=null},d,h,p){this.ctx=t,this.current=new _A(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new FV(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,n=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:a=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=c,n){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Se(this.compositeCtx))}this.ctx.save(),Nd(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Se(this.ctx)}executeOperatorList(t,e,n,a,o){const l=t.argsArray,c=t.fnArray;let d=e||0;const h=l.length;if(h===d)return d;const p=h-d>EA&&typeof n=="function",m=p?Date.now()+OV:0;let y=0;const x=this.commonObjs,A=this.objs;let w,C;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,n),d;if(!o||o(d))if(w=c[d],C=l[d]??null,w!==Po.dependency)C===null?this[w](d):this[w](d,...C);else for(const E of C){this.dependencyTracker?.recordNamedData(E,d);const T=E.startsWith("g_")?x:A;if(!T.has(E))return T.get(E,n),d}if(d++,d===h)return d;if(p&&++y>EA){if(Date.now()>m)return n(),d;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const n=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),c=n,d=a,h="prescale1",p,m;for(;o>2&&c>1||l>2&&d>1;){let y=c,x=d;o>2&&c>1&&(y=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),o/=c/y),l>2&&d>1&&(x=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/x),p=this.cachedCanvases.getCanvas(h,y,x),m=p.context,m.clearRect(0,0,y,x),m.drawImage(t,0,0,c,d,0,0,y,x),t=p.canvas,c=y,d=x,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:d}}_createMaskCanvas(t,e){const n=this.ctx,{width:a,height:o}=e,l=this.current.fillColor,c=this.current.patternFill,d=Se(n);let h,p,m,y;if((e.bitmap||e.data)&&e.count>1){const U=e.bitmap||e.data.buffer;p=JSON.stringify(c?d:[d.slice(0,4),l]),h=this._cachedBitmapsMap.get(U),h||(h=new Map,this._cachedBitmapsMap.set(U,h));const H=h.get(p);if(H&&!c){const J=Math.round(Math.min(d[0],d[2])+d[4]),at=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,hs.transformAndFill),{canvas:H,offsetX:J,offsetY:at}}m=H}m||(y=this.cachedCanvases.getCanvas("maskCanvas",a,o),RA(y.context,e));let x=xt.transform(d,[1/a,0,0,-1/o,0,0]);x=xt.transform(x,[1,0,0,1,0,-o]);const A=bo.slice();xt.axialAlignedBoundingBox([0,0,a,o],x,A);const[w,C,E,T]=A,R=Math.round(E-w)||1,N=Math.round(T-C)||1,D=this.cachedCanvases.getCanvas("fillCanvas",R,N),L=D.context,k=w,j=C;L.translate(-k,-j),L.transform(...x),m||(m=this._scaleImage(y.canvas,Is(L)),m=m.img,h&&c&&h.set(p,m)),L.imageSmoothingEnabled=NA(Se(L),e.interpolate),Rd(L,m,0,0,m.width,m.height,0,0,a,o),L.globalCompositeOperation="source-in";const P=xt.transform(Is(L),[1,0,0,1,-k,-j]);return L.fillStyle=c?l.getPattern(n,this,P,rn.FILL,t):l,L.fillRect(0,0,a,o),h&&!c&&(this.cachedCanvases.delete("fillCanvas"),h.set(p,D.canvas)),this.dependencyTracker?.recordDependencies(t,hs.transformAndFill),{canvas:D.canvas,offsetX:Math.round(k),offsetY:Math.round(j)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=BV[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=IV[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[n,a]of e)switch(n){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,e,n);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),Wl(this.suspendedCtx,l),PV(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Wl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,a){const o=a[0],l=a[1],c=a[2]-o,d=a[3]-l;c===0||d===0||(this.genericComposeSMask(e.context,n,c,d,e.subtype,e.backdrop,e.transferMap,o,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,a,o,l,c,d,h,p,m){let y=t.canvas,x=d-p,A=h-m;if(l)if(x<0||A<0||x+n>y.width||A+a>y.height){const C=this.cachedCanvases.getCanvas("maskExtension",n,a),E=C.context;E.drawImage(y,-x,-A),E.globalCompositeOperation="destination-atop",E.fillStyle=l,E.fillRect(0,0,n,a),E.globalCompositeOperation="source-over",y=C.canvas,x=A=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(x,A,n,a),t.clip(C),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(x,A,n,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const w=new Path2D;w.rect(d,h,n,a),e.clip(w),e.globalCompositeOperation="destination-in",e.drawImage(y,x,A,n,a,d,h,n,a),e.restore()}save(t){this.inSMaskMode&&Wl(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Wl(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,a,o,l,c){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,n,a,o,l,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,a){let[o]=n;if(!a){o||=n[0]=new Path2D,this[e](t,o);return}if(this.dependencyTracker!==null){const l=e===Po.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-l,a[2]+l,a[1]-l,a[3]+l).recordDependencies(t,["transform"])}if(!(o instanceof Path2D)){const l=n[0]=new Path2D;for(let c=0,d=o.length;c<d;)switch(o[c++]){case Sd.moveTo:l.moveTo(o[c++],o[c++]);break;case Sd.lineTo:l.lineTo(o[c++],o[c++]);break;case Sd.curveTo:l.bezierCurveTo(o[c++],o[c++],o[c++],o[c++],o[c++],o[c++]);break;case Sd.closePath:l.closePath();break;default:Bt(`Unrecognized drawing path operator: ${o[c-1]}`);break}o=l}xt.axialAlignedBoundingBox(a,Se(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){const a=this.ctx,o=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=o.getPattern(a,this,Is(a),rn.STROKE,t),l){const c=new Path2D;c.addPath(e,a.getTransform().invertSelf().multiplySelf(l)),e=c}this.rescaleAndStroke(e,!1),a.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,hs.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(rn.STROKE,Se(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){const a=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let c=!1;if(l){const h=o.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=o.getPattern(a,this,Is(a),rn.FILL,t),h){const p=new Path2D;p.addPath(e,a.getTransform().invertSelf().multiplySelf(h)),e=p}c=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(e,"evenodd"),this.pendingEOFill=!1):a.fill(e)),this.dependencyTracker?.recordDependencies(t,hs.fill),c&&(a.restore(),this.dependencyTracker?.restore(t)),n&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,hs.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=zV}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=DA}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;e!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(e!==void 0){const a=new Path2D,o=n.getTransform().invertSelf();for(const{transform:l,x:c,y:d,fontSize:h,path:p}of e)p&&a.addPath(p,new DOMMatrix(l).preMultiplySelf(o).translate(c,d).scale(h,-h));n.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const a=this.commonObjs.get(e),o=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=a.fontMatrix||Yg,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&Bt("Invalid font matrix for font "+e),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=n,a.isType3Font)return;const l=a.loadedName||"sans-serif",c=a.systemFontInfo?.css||`"${l}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const h=a.italic?"italic":"normal";let p=n;n<AA?p=AA:n>CA&&(p=CA),this.current.fontSizeScale=n/p,this.ctx.font=`${h} ${d} ${p}px ${c}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#s(t,e,n){const a=new Path2D;return a.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),a}paintChar(t,e,n,a,o,l){const c=this.ctx,d=this.current,h=d.font,p=d.textRenderingMode,m=d.fontSize/d.fontSizeScale,y=p&sn.FILL_STROKE_MASK,x=!!(p&sn.ADD_TO_PATH_FLAG),A=d.patternFill&&!h.missingFile,w=d.patternStroke&&!h.missingFile;let C;if((h.disableFontFace||x||A||w)&&!h.missingFile&&(C=h.getPathGenerator(this.commonObjs,e)),C&&(h.disableFontFace||A||w)){c.save(),c.translate(n,a),c.scale(m,-m),this.dependencyTracker?.recordCharacterBBox(t,c,h);let E;if(y===sn.FILL||y===sn.FILL_STROKE)if(o){E=c.getTransform(),c.setTransform(...o);const T=this.#s(C,E,o);c.fill(T)}else c.fill(C);if(y===sn.STROKE||y===sn.FILL_STROKE)if(l){E||=c.getTransform(),c.setTransform(...l);const{a:T,b:R,c:N,d:D}=E,L=xt.inverseTransform(l),k=xt.transform([T,R,N,D,0,0],L);xt.singularValueDecompose2dScale(k,Wn),c.lineWidth*=Math.max(Wn[0],Wn[1])/m,c.stroke(this.#s(C,E,l))}else c.lineWidth/=m,c.stroke(C);c.restore()}else(y===sn.FILL||y===sn.FILL_STROKE)&&(c.fillText(e,n,a),this.dependencyTracker?.recordCharacterBBox(t,c,h,m,n,a,()=>c.measureText(e))),(y===sn.STROKE||y===sn.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,c,h,m,n,a,()=>c.measureText(e)).recordDependencies(t,hs.stroke),c.strokeText(e,n,a));x&&((this.pendingTextPaths||=[]).push({transform:Se(c),x:n,y:a,fontSize:m,path:C}),this.dependencyTracker?.recordCharacterBBox(t,c,h,m,n,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){n=!0;break}return Ut(this,"isFontSubpixelAAEnabled",n)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,hs.showText).resetBBox(t),this.current.textRenderingMode&sn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,a=n.font;if(a.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const o=n.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,c=n.fontSizeScale,d=n.charSpacing,h=n.wordSpacing,p=n.fontDirection,m=n.textHScale*p,y=e.length,x=a.vertical,A=x?1:-1,w=a.defaultVMetrics,C=o*n.fontMatrix[0],E=n.textRenderingMode===sn.FILL&&!a.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),p>0?l.scale(m,-1):l.scale(m,1);let T,R;if(n.patternFill){l.save();const j=n.fillColor.getPattern(l,this,Is(l),rn.FILL,t);T=Se(l),l.restore(),l.fillStyle=j}if(n.patternStroke){l.save();const j=n.strokeColor.getPattern(l,this,Is(l),rn.STROKE,t);R=Se(l),l.restore(),l.strokeStyle=j}let N=n.lineWidth;const D=n.textMatrixScale;if(D===0||N===0){const j=n.textRenderingMode&sn.FILL_STROKE_MASK;(j===sn.STROKE||j===sn.FILL_STROKE)&&(N=this.getSinglePixelWidth())}else N/=D;if(c!==1&&(l.scale(c,c),N/=c),l.lineWidth=N,a.isInvalidPDFjsFont){const j=[];let P=0;for(const H of e)j.push(H.unicode),P+=H.width;const U=j.join("");if(l.fillText(U,0,0),this.dependencyTracker!==null){const H=l.measureText(U);this.dependencyTracker.recordBBox(t,this.ctx,-H.actualBoundingBoxLeft,H.actualBoundingBoxRight,-H.actualBoundingBoxAscent,H.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=P*C*m,l.restore(),this.compose();return}let L=0,k;for(k=0;k<y;++k){const j=e[k];if(typeof j=="number"){L+=A*j*o/1e3;continue}let P=!1;const U=(j.isSpace?h:0)+d,H=j.fontChar,J=j.accent;let at,q,rt=j.width;if(x){const I=j.vmetric||w,Y=-(j.vmetric?I[1]:rt*.5)*C,ft=I[2]*C;rt=I?-I[0]:rt,at=Y/c,q=(L+ft)/c}else at=L/c,q=0;let O;if(a.remeasure&&rt>0){O=l.measureText(H);const I=O.width*1e3/o*c;if(rt<I&&this.isFontSubpixelAAEnabled){const Y=rt/I;P=!0,l.save(),l.scale(Y,1),at/=Y}else rt!==I&&(at+=(rt-I)/2e3*o/c)}if(this.contentVisible&&(j.isInFont||a.missingFile)){if(E&&!J)l.fillText(H,at,q),this.dependencyTracker?.recordCharacterBBox(t,l,O?{bbox:null}:a,o/c,at,q,()=>O??l.measureText(H));else if(this.paintChar(t,H,at,q,T,R),J){const I=at+o*J.offset.x/c,Y=q-o*J.offset.y/c;this.paintChar(t,J.fontChar,I,Y,T,R)}}const B=x?rt*C-U*p:rt*C+U*p;L+=B,P&&l.restore()}x?n.y-=L:n.x+=L*m,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,a=this.current,o=a.font,l=a.fontSize,c=a.fontDirection,d=o.vertical?1:-1,h=a.charSpacing,p=a.wordSpacing,m=a.textHScale*c,y=a.fontMatrix||Yg,x=e.length,A=a.textRenderingMode===sn.INVISIBLE;let w,C,E,T;if(A||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),a.textMatrix&&n.transform(...a.textMatrix),n.translate(a.x,a.y+a.textRise),n.scale(m,c);const R=this.dependencyTracker;for(this.dependencyTracker=R?new dh(R,t):null,w=0;w<x;++w){if(C=e[w],typeof C=="number"){T=d*C*l/1e3,this.ctx.translate(T,0),a.x+=T*m;continue}const N=(C.isSpace?p:0)+h,D=o.charProcOperatorList[C.operatorListId];D?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...y),this.executeOperatorList(D),this.restore()):Bt(`Type3 character "${C.operatorListId}" is not available.`);const L=[C.width,0];xt.applyTransform(L,y),E=L[0]*l+N,n.translate(E,0),a.x+=E*m}n.restore(),R&&(this.dependencyTracker=R)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,a,o,l,c){const d=new Path2D;d.rect(a,o,l-a,c-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,a,l,o,c).recordClipBox(t,this.ctx,a,l,o,c),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const a=this.baseTransform||Se(this.ctx),o={createCanvasGraphics:(l,c)=>new Ro(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new dh(this.dependencyTracker,c,!0):null)};n=new wv(e,this.ctx,o,a)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=LV(this.getObject(t,e)),this.cachedPatterns.set(e,a)),n&&(a.matrix=n),a}shadingFill(t,e){if(!this.contentVisible)return;const n=this.ctx;this.save(t);const a=this._getPattern(t,e);n.fillStyle=a.getPattern(n,this,Is(n),rn.SHADING,t);const o=Is(n);if(o){const{width:l,height:c}=n.canvas,d=bo.slice();xt.axialAlignedBoundingBox([0,0,l,c],o,d);const[h,p,m,y]=d;this.ctx.fillRect(h,p,m-h,y-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,hs.transform).recordDependencies(t,hs.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){he("Should not call beginInlineImage")}beginImageData(){he("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Se(this.ctx),n)){xt.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[a,o,l,c]=n,d=new Path2D;d.rect(a,o,l-a,c-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,a,l,o,c),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||Oh("TODO: Support non-isolated groups."),e.knockout&&Bt("Knockout groups not supported.");const a=Se(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=bo.slice();xt.axialAlignedBoundingBox(e.bbox,Se(n),o);const l=[0,0,n.canvas.width,n.canvas.height];o=xt.intersect(o,l)||[0,0,0,0];const c=Math.floor(o[0]),d=Math.floor(o[1]),h=Math.max(Math.ceil(o[2])-c,1),p=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,h,p]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(m,h,p),x=y.context;x.translate(-c,-d),x.transform(...a);let A=new Path2D;const[w,C,E,T]=e.bbox;if(A.rect(w,C,E-w,T-C),e.matrix){const R=new Path2D;R.addPath(A,new DOMMatrix(e.matrix)),A=R}x.clip(A),e.smask&&this.smaskStack.push({canvas:y.canvas,context:x,offsetX:c,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(c,d),n.save()),Wl(n,x),this.ctx=x,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Se(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=bo.slice();xt.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,n,a,o,l){if(this.#t(),Nd(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const c=n[2]-n[0],d=n[3]-n[1];if(l&&this.annotationCanvasMap){a=a.slice(),a[4]-=n[0],a[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=c,n[3]=d,xt.singularValueDecompose2dScale(Se(this.ctx),Wn);const{viewportScale:h}=this,p=Math.ceil(c*this.outputScaleX*h),m=Math.ceil(d*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(p,m);const{canvas:y,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(e,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(Wn[0],0,0,-Wn[1],0,d*Wn[1]),Nd(this.ctx)}else{Nd(this.ctx),this.endPath(t);const h=new Path2D;h.rect(n[0],n[1],c,d),this.ctx.clip(h)}}this.current=new _A(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const a=this.ctx,o=this._createMaskCanvas(t,e),l=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,a=0,o=0,l,c){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const h=Se(d);d.transform(n,a,o,l,0,0);const p=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,p.offsetX-h[4],p.offsetY-h[5]),this.dependencyTracker?.resetBBox(t);for(let m=0,y=c.length;m<y;m+=2){const x=xt.transform(h,[n,a,o,l,c[m],c[m+1]]);d.drawImage(p.canvas,x[4],x[5]),this.dependencyTracker?.recordBBox(t,this.ctx,x[4],x[4]+p.canvas.width,x[5],x[5]+p.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx,a=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,hs.transformAndFill);for(const l of e){const{data:c,width:d,height:h,transform:p}=l,m=this.cachedCanvases.getCanvas("maskCanvas",d,h),y=m.context;y.save();const x=this.getObject(t,c,l);RA(y,x),y.globalCompositeOperation="source-in",y.fillStyle=o?a.getPattern(y,this,Is(n),rn.FILL,t):a,y.fillRect(0,0,d,h),y.restore(),n.save(),n.transform(...p),n.scale(1,-1),Rd(n,m.canvas,0,0,d,h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,n,0,d,0,h),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){Bt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,a,o){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){Bt("Dependent image isn't ready yet");return}const c=l.width,d=l.height,h=[];for(let p=0,m=o.length;p<m;p+=2)h.push({transform:[n,0,0,a,o[p],o[p+1]],x:0,y:0,w:c,h:d});this.paintInlineImageXObjectGroup(t,l,h)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,a),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const n=e.width,a=e.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/n,-1/a);let c;if(e.bitmap)c=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)c=e;else{const p=this.cachedCanvases.getCanvas("inlineImage",n,a).context;TA(p,e),c=this.applyTransferMapsToCanvas(p)}const d=this._scaleImage(c,Is(o));o.imageSmoothingEnabled=NA(Se(o),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,n,-a,0).recordDependencies(t,hs.imageXObject).recordOperation(t),Rd(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,n,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){if(!this.contentVisible)return;const a=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const l=e.width,c=e.height,h=this.cachedCanvases.getCanvas("inlineImage",l,c).context;TA(h,e),o=this.applyTransferMapsToCanvas(h)}this.dependencyTracker?.resetBBox(t);for(const l of n)a.save(),a.transform(...l.transform),a.scale(1,-1),Rd(a,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,hs.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const o=this.ctx;this.pendingClip?(a||(this.pendingClip===DA?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Se(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:a,d:o}=this.ctx.getTransform();let l,c;if(n===0&&a===0){const d=Math.abs(e),h=Math.abs(o);if(d===h)if(t===0)l=c=1/d;else{const p=d*t;l=c=p<1?1/p:1}else if(t===0)l=1/d,c=1/h;else{const p=d*t,m=h*t;l=p<1?1/p:1,c=m<1?1/m:1}}else{const d=Math.abs(e*o-n*a),h=Math.hypot(e,n),p=Math.hypot(a,o);if(t===0)l=p/d,c=h/d;else{const m=t*d;l=p>m?p/m:1,c=h>m?h/m:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:a}}=this,[o,l]=this.getScaleForStroking();if(o===l){n.lineWidth=(a||1)*o,n.stroke(t);return}const c=n.getLineDash();e&&n.save(),n.scale(o,l),Jm.a=1/o,Jm.d=1/l;const d=new Path2D;if(d.addPath(t,Jm),c.length>0){const h=Math.max(o,l);n.setLineDash(c.map(p=>p/h)),n.lineDashOffset/=h}n.lineWidth=a||1,n.stroke(d),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const s in Po)Ro.prototype[s]!==void 0&&(Ro.prototype[Po[s]]=Ro.prototype[s]);class No{#t;#e;#s;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,n={};let a=0;for(const h of No.strings){const p=e.encode(t[h]);n[h]=p,a+=4+p.length}const o=new ArrayBuffer(a),l=new Uint8Array(o),c=new DataView(o);let d=0;for(const h of No.strings){const p=n[h],m=p.length;c.setUint32(d,m),l.set(p,d+4),d+=4+m}return Qt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#s=new TextDecoder}#n(t){Qt(t<No.strings.length,"Invalid string index");let e=0;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#s.decode(new Uint8Array(this.#t,e+4,n))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Do{#t;#e;#s;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,n={};let a=0;for(const y of Do.strings){const x=e.encode(t[y]);n[y]=x,a+=4+x.length}a+=4;let o,l,c=1+a;t.style&&(o=e.encode(t.style.style),l=e.encode(t.style.weight),c+=4+o.length+4+l.length);const d=new ArrayBuffer(c),h=new Uint8Array(d),p=new DataView(d);let m=0;p.setUint8(m++,t.guessFallback?1:0),p.setUint32(m,0),m+=4,a=0;for(const y of Do.strings){const x=n[y],A=x.length;a+=4+A,p.setUint32(m,A),h.set(x,m+4),m+=4+A}return p.setUint32(m-a-4,a),t.style&&(p.setUint32(m,o.length),h.set(o,m+4),m+=4+o.length,p.setUint32(m,l.length),h.set(l,m+4),m+=4+l.length),Qt(m<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(m)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#s=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){Qt(t<Do.strings.length,"Invalid string index");let e=5;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#s.decode(new Uint8Array(this.#t,e+4,n))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),n=this.#s.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const a=this.#e.getUint32(t),o=this.#s.decode(new Uint8Array(this.#t,t+4,a));return{style:n,weight:o}}}class ce{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#s=this.#e+1+8;static#n=this.#s+1+48;static#r=this.#n+1+6;#i;#a;#o;constructor({data:t,extra:e}){this.#i=t,this.#a=new TextDecoder,this.#o=new DataView(this.#i),e&&Object.assign(this,e)}#c(t){Qt(t<ce.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,a=this.#o.getUint8(e)>>n&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Qt(t<ce.numbers.length,"Invalid number index"),this.#o.getFloat64(ce.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=ce.#e;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let a=0;a<4;a++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=ce.#s;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let a=0;a<6;a++)n.push(this.#o.getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=ce.#n;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let a=0;a<3;a++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}#h(t){Qt(t<ce.strings.length,"Invalid string index");let e=ce.#r+4;for(let o=0;o<t;o++)e+=this.#o.getUint32(e)+4;const n=this.#o.getUint32(e),a=new Uint8Array(n);return a.set(new Uint8Array(this.#i,e+4,n)),this.#a.decode(a)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let t=ce.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#i,t+4,o)}clearData(){let t=ce.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);new Uint8Array(this.#i,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=ce.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const a=this.#o.getUint32(t);if(a===0)return null;const o=new Uint8Array(a);return o.set(new Uint8Array(this.#i,t+4,a)),new No(o.buffer)}get systemFontInfo(){let t=ce.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);if(n===0)return null;const a=new Uint8Array(n);return a.set(new Uint8Array(this.#i,t+4,n)),new Do(a.buffer)}static write(t){const e=t.systemFontInfo?Do.write(t.systemFontInfo):null,n=t.cssFontInfo?No.write(t.cssFontInfo):null,a=new TextEncoder,o={};let l=0;for(const w of ce.strings)o[w]=a.encode(t[w]),l+=4+o[w].length;const c=ce.#r+4+l+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(c),h=new Uint8Array(d),p=new DataView(d);let m=0;const y=ce.bools.length;let x=0,A=0;for(let w=0;w<y;w++){const C=t[ce.bools[w]];x|=(C===void 0?0:C?2:1)<<A,A+=2,(A===8||w===y-1)&&(p.setUint8(m++,x),x=0,A=0)}Qt(m===ce.#t,"FontInfo.write: Boolean properties offset mismatch");for(const w of ce.numbers)p.setFloat64(m,t[w]),m+=8;if(Qt(m===ce.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(m++,4);for(const w of t.bbox)p.setInt16(m,w,!0),m+=2}else p.setUint8(m++,0),m+=8;if(Qt(m===ce.#s,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(m++,6);for(const w of t.fontMatrix)p.setFloat64(m,w,!0),m+=8}else p.setUint8(m++,0),m+=48;if(Qt(m===ce.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(m++,1);for(const w of t.defaultVMetrics)p.setInt16(m,w,!0),m+=2}else p.setUint8(m++,0),m+=6;Qt(m===ce.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(ce.#r,0),m+=4;for(const w of ce.strings){const C=o[w],E=C.length;p.setUint32(m,E),h.set(C,m+4),m+=4+E}if(p.setUint32(ce.#r,m-ce.#r-4),!e)p.setUint32(m,0),m+=4;else{const w=e.byteLength;p.setUint32(m,w),Qt(m+4+w<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),h.set(new Uint8Array(e),m+4),m+=4+w}if(!n)p.setUint32(m,0),m+=4;else{const w=n.byteLength;p.setUint32(m,w),Qt(m+4+w<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),h.set(new Uint8Array(n),m+4),m+=4+w}return t.data===void 0?(p.setUint32(m,0),m+=4):(p.setUint32(m,t.data.length),h.set(t.data,m+4),m+=4+t.data.length),Qt(m<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(m)}}class pa{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class UV{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const fo=Symbol("INTERNAL");class VV{#t=!1;#e=!1;#s=!1;#n=!0;constructor(t,{name:e,intent:n,usage:a,rbGroups:o}){this.#t=!!(t&Xn.DISPLAY),this.#e=!!(t&Xn.PRINT),this.name=e,this.intent=n,this.usage=a,this.rbGroups=o}get visible(){if(this.#s)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==fo&&he("Internal method `_setVisible` called."),this.#s=n,this.#n=e}}class HV{#t=null;#e=new Map;#s=null;#n=null;constructor(t,e=Xn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const n of t.groups)this.#e.set(n.id,new VV(e,n));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(fo,!1);for(const n of t.on)this.#e.get(n)._setVisible(fo,!0);for(const n of t.off)this.#e.get(n)._setVisible(fo,!1);this.#s=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let a=1;a<e;a++){const o=t[a];let l;if(Array.isArray(o))l=this.#r(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return Bt(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Oh("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(Bt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return Bt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return Bt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return Bt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return Bt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return Bt(`Unknown optional content policy ${t.policy}.`),!0}return Bt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){const a=this.#e.get(t);if(!a){Bt(`Optional content group not found: ${t}`);return}if(n&&e&&a.rbGroups.length)for(const o of a.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(fo,!1,!0);a._setVisible(fo,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let n;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":n=a;continue}const o=this.#e.get(a);if(o)switch(n){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!o.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new AR;for(const[e,n]of this.#e)t.update(`${e}:${n.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class $V{constructor(t,{disableRange:e=!1,disableStream:n=!1}){Qt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:l,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=c,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,h)=>{this._onReceiveData({begin:d,chunk:h})}),t.addProgressListener((d,h)=>{this._onProgress({loaded:d,total:h})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(n),!0)});Qt(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Qt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new GV(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new qV(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class GV{constructor(t,e,n=!1,a=null){this._stream=t,this._done=n||!1,this._filename=Fh(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class qV{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function XV(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let p=c(e);return p=unescape(p),p=d(p),p=h(p),o(p)}if(e=l(s),e){const p=h(e);return o(p)}if(e=n("filename","i").exec(s),e){e=e[1];let p=c(e);return p=h(p),o(p)}function n(p,m){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function a(p,m){if(p){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const y=new TextDecoder(p,{fatal:!0}),x=Uc(m);m=y.decode(x),t=!1}catch{}}return m}function o(p){return t&&/[\x80-\xff]/.test(p)&&(p=a("utf-8",p),t&&(p=a("iso-8859-1",p))),p}function l(p){const m=[];let y;const x=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=x.exec(p))!==null;){let[,w,C,E]=y;if(w=parseInt(w,10),w in m){if(w===0)break;continue}m[w]=[C,E]}const A=[];for(let w=0;w<m.length&&w in m;++w){let[C,E]=m[w];E=c(E),C&&(E=unescape(E),w===0&&(E=d(E))),A.push(E)}return A.join("")}function c(p){if(p.startsWith('"')){const m=p.slice(1).split('\\"');for(let y=0;y<m.length;++y){const x=m[y].indexOf('"');x!==-1&&(m[y]=m[y].slice(0,x),m.length=y+1),m[y]=m[y].replaceAll(/\\(.)/g,"$1")}p=m.join('"')}return p}function d(p){const m=p.indexOf("'");if(m===-1)return p;const y=p.slice(0,m),A=p.slice(m+1).replace(/^[^']*'/,"");return a(y,A)}function h(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,y,x,A){if(x==="q"||x==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,C){return String.fromCharCode(parseInt(C,16))}),a(y,A);try{A=atob(A)}catch{}return a(y,A)})}return""}function MR(s,t){const e=new Headers;if(!s||!t||typeof t!="object")return e;for(const n in t){const a=t[n];a!==void 0&&e.append(n,a)}return e}function Bh(s){return URL.parse(s)?.origin??null}function kR({responseHeaders:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(s.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*e)||n||!t||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function LR(s){const t=s.get("Content-Disposition");if(t){let e=XV(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Fh(e))return e}return null}function qc(s,t){return new _c(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s,s===404||s===0&&t.startsWith("file:"))}function jR(s){return s===200||s===206}function OR(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function PR(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Bt(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class YV{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=MR(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Qt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new WV(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new KV(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class WV{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),a=e.url;fetch(a,OR(n,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=Bh(o.url),!jR(o.status))throw qc(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:c,suggestedLength:d}=kR({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=d||this._contentLength,this._filename=LR(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ti("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:PR(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class KV{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${n-1}`);const l=a.url;fetch(l,OR(o,this._withCredentials,this._abortController)).then(c=>{const d=Bh(c.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!jR(c.status))throw qc(c.status,l);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:PR(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const tg=200,eg=206;function QV(s){const t=s.response;return typeof t!="string"?t:Uc(t).buffer}class ZV{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=MR(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,a=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,l]of this.headers)e.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=eg):a.expectedStatus=tg,e.responseType="arraybuffer",Qt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){const n=this.pendingRequests[t];n&&n.onProgress?.(e)}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const a=n.xhr;if(a.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){n.onError(a.status);return}const o=a.status||tg;if(!(o===tg&&n.expectedStatus===eg)&&o!==n.expectedStatus){n.onError(a.status);return}const c=QV(a);if(o===eg){const d=a.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);h?n.onDone({begin:parseInt(h[1],10),chunk:c}):(Bt('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class JV{constructor(t){this._source=t,this._manager=new ZV(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Qt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new t6(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new e6(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class t6{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Bh(e.responseURL);const n=e.getAllResponseHeaders(),a=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[d,...h]=c.split(": ");return[d,h.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=kR({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=LR(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=qc(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class e6{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Bh(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=qc(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const n6=/^[a-z][a-z0-9\-+.]+:/i;function s6(s){if(n6.test(s))return new URL(s);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(s))}class i6{constructor(t){this.source=t,this.url=s6(t.url),Qt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Qt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new a6(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new r6(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class a6{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=qc(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ti("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class r6{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Kl=Symbol("INITIAL_DATA");class FR{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Kl}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const n=this.#t[t];if(!n||n.data===Kl)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=this.#t[t];return!!e&&e.data!==Kl}delete(t){const e=this.#t[t];return!e||e.data===Kl?!1:(delete this.#t[t],!0)}resolve(t,e=null){const n=this.#e(t);n.data=e,n.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Kl&&(yield[t,e])}}}const o6=1e5,MA=30;let Rc=class fs{#t=Promise.withResolvers();#e=null;#s=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#i=null;#a=0;#o=0;#c=null;#l=null;#h=0;#d=0;#f=Object.create(null);#g=[];#p=null;#u=[];#m=new WeakMap;#y=null;static#b=new Map;static#v=new Map;static#E=new WeakMap;static#A=null;static#x=new Set;constructor({textContentSource:t,container:e,viewport:n}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#d=n.scale*Rs.pixelRatio,this.#h=n.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:l,pageY:c}=n.rawDims;this.#y=[1,0,0,-1,-l,c+o],this.#o=a,this.#a=o,fs.#N(),ba(e,n),this.#t.promise.finally(()=>{fs.#x.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Qe.platform;return Ut(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:n})=>{if(n){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#T(e.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),fs.#x.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const n=t.scale*Rs.pixelRatio,a=t.rotation;if(a!==this.#h&&(e?.(),this.#h=a,ba(this.#l,{rotation:a})),n!==this.#d){e?.(),this.#d=n;const o={div:null,properties:null,ctx:fs.#D(this.#r)};for(const l of this.#u)o.properties=this.#m.get(l),o.div=l,this.#C(o)}}cancel(){const t=new Ti("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#T(t){if(this.#s)return;this.#i.ctx??=fs.#D(this.#r);const e=this.#u,n=this.#g;for(const a of t){if(e.length>o6){Bt("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),o.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(a.str),this.#S(a)}}#S(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const a=xt.transform(this.#y,t.transform);let o=Math.atan2(a[1],a[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let c=this.#n&&l.fontSubstitution||l.fontFamily;c=fs.fontFamilyMap.get(c)||c;const d=Math.hypot(a[2],a[3]),h=d*fs.#F(c,l,this.#r);let p,m;o===0?(p=a[4],m=a[5]-h):(p=a[4]+h*Math.sin(o),m=a[5]-h*Math.cos(o));const y="calc(var(--total-scale-factor) *",x=e.style;this.#e===this.#l?(x.left=`${(100*p/this.#o).toFixed(2)}%`,x.top=`${(100*m/this.#a).toFixed(2)}%`):(x.left=`${y}${p.toFixed(2)}px)`,x.top=`${y}${m.toFixed(2)}px)`),x.fontSize=`${y}${(fs.#A*d).toFixed(2)}px)`,x.fontFamily=c,n.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),C=Math.abs(t.transform[3]);w!==C&&Math.max(w,C)/Math.min(w,C)>1.5&&(A=!0)}if(A&&(n.canvasWidth=l.vertical?t.height:t.width),this.#m.set(e,n),this.#i.div=e,this.#i.properties=n,this.#C(this.#i),n.hasText&&this.#e.append(e),n.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#e.append(w)}}#C(t){const{div:e,properties:n,ctx:a}=t,{style:o}=e;let l="";if(fs.#A>1&&(l=`scale(${1/fs.#A})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=o,{canvasWidth:d,fontSize:h}=n;fs.#R(a,h*this.#d,c);const{width:p}=a.measureText(e.textContent);p>0&&(l=`scaleX(${d*this.#d/p}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#x.size>0)){this.#b.clear();for(const{canvas:t}of this.#v.values())t.remove();this.#v.clear()}}static#D(t=null){let e=this.#v.get(t||="");if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(t,e),this.#E.set(e,{size:0,family:""})}return e}static#R(t,e,n){const a=this.#E.get(t);e===a.size&&n===a.family||(t.font=`${e}px ${n}`,a.size=e,a.family=n)}static#N(){if(this.#A!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#A=t.getBoundingClientRect().height,t.remove()}static#F(t,e,n){const a=this.#b.get(t);if(a)return a;const o=this.#D(n);o.canvas.width=o.canvas.height=MA,this.#R(o,MA,t);const l=o.measureText(""),c=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let h=.8;return c?h=c/(c+d):(Qe.platform.isFirefox&&Bt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?h=e.ascent:e.descent&&(h=1+e.descent)),this.#b.set(t,h),h}};const l6=100;function Sv(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new Av,{docId:e}=t,n=s.url?gV(s.url):null,a=s.data?yV(s.data):null,o=s.httpHeaders||null,l=s.withCredentials===!0,c=s.password??null,d=s.range instanceof Cv?s.range:null,h=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let p=s.worker instanceof Fo?s.worker:null;const m=s.verbosity,y=typeof s.docBaseUrl=="string"&&!Hc(s.docBaseUrl)?s.docBaseUrl:null,x=Cd(s.cMapUrl),A=s.cMapPacked!==!1,w=s.CMapReaderFactory||(bn?CV:yA),C=Cd(s.iccUrl),E=Cd(s.standardFontDataUrl),T=s.StandardFontDataFactory||(bn?EV:vA),R=Cd(s.wasmUrl),N=s.WasmFactory||(bn?_V:bA),D=s.stopAtErrors!==!0,L=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,k=s.isEvalSupported!==!1,j=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!bn,P=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!bn&&(Qe.platform.isFirefox||!globalThis.chrome),U=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,H=typeof s.disableFontFace=="boolean"?s.disableFontFace:bn,J=s.fontExtraProperties===!0,at=s.enableXfa===!0,q=s.ownerDocument||globalThis.document,rt=s.disableRange===!0,O=s.disableStream===!0,B=s.disableAutoFetch===!0,I=s.pdfBug===!0,Y=s.CanvasFactory||(bn?AV:xV),ft=s.FilterFactory||(bn?SV:wV),F=s.enableHWA===!0,G=s.useWasm!==!1,tt=d?d.length:s.length??NaN,lt=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!bn&&!H,mt=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(w===yA&&T===vA&&N===bA&&x&&E&&R&&sc(x,document.baseURI)&&sc(E,document.baseURI)&&sc(R,document.baseURI)),st=null;QU(m);const et={canvasFactory:new Y({ownerDocument:q,enableHWA:F}),filterFactory:new ft({docId:e,ownerDocument:q}),cMapReaderFactory:mt?null:new w({baseUrl:x,isCompressed:A}),standardFontDataFactory:mt?null:new T({baseUrl:E}),wasmFactory:mt?null:new N({baseUrl:R})};p||(p=Fo.create({verbosity:m,port:pa.workerPort}),t._worker=p);const yt={docId:e,apiVersion:"5.4.296",data:a,password:c,disableAutoFetch:B,rangeChunkSize:h,length:tt,docBaseUrl:y,enableXfa:at,evaluatorOptions:{maxImageSize:L,disableFontFace:H,ignoreErrors:D,isEvalSupported:k,isOffscreenCanvasSupported:j,isImageDecoderSupported:P,canvasMaxAreaInBytes:U,fontExtraProperties:J,useSystemFonts:lt,useWasm:G,useWorkerFetch:mt,cMapUrl:x,iccUrl:C,standardFontDataUrl:E,wasmUrl:R}},vt={ownerDocument:q,pdfBug:I,styleElement:st,loadingParams:{disableAutoFetch:B,enableXfa:at}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Tt=p.messageHandler.sendWithPromise("GetDocRequest",yt,a?[a.buffer]:null);let X;if(d)X=new $V(d,{disableRange:rt,disableStream:O});else if(!a){if(!n)throw new Error("getDocument - no `url` parameter provided.");const ut=sc(n)?YV:bn?i6:JV;X=new ut({url:n,length:tt,httpHeaders:o,withCredentials:l,rangeChunkSize:h,disableRange:rt,disableStream:O})}return Tt.then(ut=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const ht=new ic(e,ut,p.port),pt=new d6(ht,t,X,vt,et,F);t._transport=pt,ht.send("Ready",null)})}).catch(t._capability.reject),t}class Av{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Av.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let Cv=class{#t=Promise.withResolvers();#e=[];#s=[];#n=[];#r=[];constructor(t,e,n=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=a}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#s.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const n of this.#r)n(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const n of this.#n)n(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#s)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){he("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class c6{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ut(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class u6{#t=!1;constructor(t,e,n,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=a?new uA:null,this._pdfBug=a,this.commonObjs=n.commonObjs,this.objs=new FR,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:a=0,dontFlip:o=!1}={}){return new Vc({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ut(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:a="display",annotationMode:o=Gs.ENABLE,transform:l=null,background:c=null,optionalContentConfigPromise:d=null,annotationCanvasMap:h=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:y=!1,recordOperations:x=!1,operationsFilter:A=null}){this._stats?.time("Overall");const w=this._transport.getRenderingIntent(a,o,m,y),{renderingIntent:C,cacheKey:E}=w;this.#t=!1,d||=this._transport.getOptionalContentConfig(C);let T=this._intentStates.get(E);T||(T=Object.create(null),this._intentStates.set(E,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const R=!!(C&Xn.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(w));const N=!!(this._pdfBug&&globalThis.StepperManager?.enabled),D=!this.recordedBBoxes&&(x||N),L=P=>{if(T.renderTasks.delete(k),D){const U=k.gfx?.dependencyTracker.take();U&&(k.stepper&&k.stepper.setOperatorBBoxes(U,k.gfx.dependencyTracker.takeDebugMetadata()),x&&(this.recordedBBoxes=U))}R&&(this.#t=!0),this.#e(),P?(k.capability.reject(P),this._abortOperatorList({intentState:T,reason:P instanceof Error?P:new Error(P)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new xo({callback:L,params:{canvas:e,canvasContext:t,dependencyTracker:D?new RV(e,T.operatorList.length,N):null,viewport:n,transform:l,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:A});(T.renderTasks||=new Set).add(k);const j=k.task;return Promise.all([T.displayReadyCapability.promise,d]).then(([P,U])=>{if(this.destroyed){L();return}if(this._stats?.time("Rendering"),!(U.renderingIntent&C))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:P,optionalContentConfig:U}),k.operatorListChanged()}).catch(L),j}getOperatorList({intent:t="display",annotationMode:e=Gs.ENABLE,printAnnotationStorage:n=null,isEditing:a=!1}={}){function o(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,e,n,a,!0);let c=this._intentStates.get(l.cacheKey);c||(c=Object.create(null),this._intentStates.set(l.cacheKey,c));let d;return c.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(d),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Tc.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,a){function o(){l.read().then(function({value:d,done:h}){if(h){n(c);return}c.lang??=d.lang,Object.assign(c.styles,d.styles),c.items.push(...d.items),o()},a)}const l=e.getReader(),c={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new uA),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,a=t.length;n<a;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:a}){const{map:o,transfer:l}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:a},l).getReader(),h=this._intentStates.get(e);h.streamReader=d;const p=()=>{d.read().then(({value:m,done:y})=>{if(y){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,h),p())},m=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const y of h.renderTasks)y.operatorListChanged();this.#e()}if(h.displayReadyCapability)h.displayReadyCapability.reject(m);else if(h.opListReadCapability)h.opListReadCapability.reject(m);else throw m}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Ph){let a=l6;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new Ti(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var ua,Es,xi,tr,hh,er,nr,Cn,Ud,BR,IR,ac,Lo,Vd;const we=class we{constructor({name:t=null,port:e=null,verbosity:n=ZU()}={}){Fs(this,Cn);Fs(this,ua,Promise.withResolvers());Fs(this,Es,null);Fs(this,xi,null);Fs(this,tr,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(xe(we,nr).has(e))throw new Error("Cannot use more than one PDFWorker per port.");xe(we,nr).set(e,this),Bs(this,Cn,BR).call(this,e)}else Bs(this,Cn,IR).call(this)}get promise(){return xe(this,ua).promise}get port(){return xe(this,xi)}get messageHandler(){return xe(this,Es)}destroy(){this.destroyed=!0,xe(this,tr)?.terminate(),Ln(this,tr,null),xe(we,nr).delete(xe(this,xi)),Ln(this,xi,null),xe(this,Es)?.destroy(),Ln(this,Es,null)}static create(t){const e=xe(this,nr).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new we(t)}static get workerSrc(){if(pa.workerSrc)return pa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ut(this,"_setupFakeWorkerGlobal",(async()=>xe(this,Lo,Vd)?xe(this,Lo,Vd):(await import(this.workerSrc)).WorkerMessageHandler)())}};ua=new WeakMap,Es=new WeakMap,xi=new WeakMap,tr=new WeakMap,hh=new WeakMap,er=new WeakMap,nr=new WeakMap,Cn=new WeakSet,Ud=function(){xe(this,ua).resolve(),xe(this,Es).send("configure",{verbosity:this.verbosity})},BR=function(t){Ln(this,xi,t),Ln(this,Es,new ic("main","worker",t)),xe(this,Es).on("ready",()=>{}),Bs(this,Cn,Ud).call(this)},IR=function(){if(xe(we,er)||xe(we,Lo,Vd)){Bs(this,Cn,ac).call(this);return}let{workerSrc:t}=we;try{we._isSameOrigin(window.location,t)||(t=we._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new ic("main","worker",e),a=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?xe(this,ua).reject(new Error("Worker was destroyed")):Bs(this,Cn,ac).call(this)},o=new AbortController;e.addEventListener("error",()=>{xe(this,tr)||a()},{signal:o.signal}),n.on("test",c=>{if(o.abort(),this.destroyed||!c){a();return}Ln(this,Es,n),Ln(this,xi,e),Ln(this,tr,e),Bs(this,Cn,Ud).call(this)}),n.on("ready",c=>{if(o.abort(),this.destroyed){a();return}try{l()}catch{Bs(this,Cn,ac).call(this)}});const l=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};l();return}catch{Oh("The worker has been disabled.")}Bs(this,Cn,ac).call(this)},ac=function(){xe(we,er)||(Bt("Setting up fake worker."),Ln(we,er,!0)),we._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){xe(this,ua).reject(new Error("Worker was destroyed"));return}const e=new bV;Ln(this,xi,e);const n=`fake${Nw(we,hh)._++}`,a=new ic(n+"_worker",n,e);t.setup(a,e),Ln(this,Es,new ic(n,n+"_worker",e)),Bs(this,Cn,Ud).call(this)}).catch(t=>{xe(this,ua).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Lo=new WeakSet,Vd=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Fs(we,Lo),Fs(we,hh,0),Fs(we,er,!1),Fs(we,nr,new WeakMap),bn&&(Ln(we,er,!0),pa.workerSrc||="./pdf.worker.mjs"),we._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!n?.origin||n.origin==="null")return!1;const a=new URL(e,n);return n.origin===a.origin},we._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},we.fromPort=t=>{if(oV("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return we.create(t)};let Fo=we;class d6{#t=new Map;#e=new Map;#s=new Map;#n=new Map;#r=null;constructor(t,e,n,a,o,l){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new FR,this.fontLoader=new pV({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#i(t,e=null){const n=this.#t.get(t);if(n)return n;const a=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,a),a}get annotationStorage(){return Ut(this,"annotationStorage",new vv)}getRenderingIntent(t,e=Gs.ENABLE,n=null,a=!1,o=!1){let l=Xn.DISPLAY,c=Kg;switch(t){case"any":l=Xn.ANY;break;case"display":break;case"print":l=Xn.PRINT;break;default:Bt(`getRenderingIntent - invalid intent: ${t}`)}const d=l&Xn.PRINT&&n instanceof CR?n:this.annotationStorage;switch(e){case Gs.DISABLE:l+=Xn.ANNOTATIONS_DISABLE;break;case Gs.ENABLE:break;case Gs.ENABLE_FORMS:l+=Xn.ANNOTATIONS_FORMS;break;case Gs.ENABLE_STORAGE:l+=Xn.ANNOTATIONS_STORAGE,c=d.serializable;break;default:Bt(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(l+=Xn.IS_EDITING),o&&(l+=Xn.OPLIST);const{ids:h,hash:p}=d.modifiedIds,m=[l,c.hash,p];return{renderingIntent:l,cacheKey:m.join("_"),annotationStorageSerializable:c,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of this.#e.values())t.push(n._destroy());this.#e.clear(),this.#s.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Rc.cleanup(),this._networkStream?.cancelAllRequests(new Ti("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,a)=>{Qt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){a.close();return}Qt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:l}=this._fullReader;return(!a||!o)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{e.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(n,a)=>{Qt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:l,done:c}){if(c){a.close();return}Qt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{o.cancel(l),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new c6(n,this))}),t.on("DocException",n=>{e._capability.reject(jn(n))}),t.on("PasswordRequest",n=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw jn(n);const a=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};e.onPassword(a,n.code)}catch(a){this.#r.reject(a)}return this.#r.promise}),t.on("DataLoaded",n=>{e.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#e.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,a,o])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(a){case"Font":if("error"in o){const p=o.error;Bt(`Error during font loading: ${p}`),this.commonObjs.resolve(n,p);break}const l=new ce(o),c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,d=new mV(l,c,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:h}=o;Qt(h,"The imageRef must be defined.");for(const p of this.#e.values())for(const[,m]of p.objs)if(m?.ref===h)return m.dataLen?(this.commonObjs.resolve(n,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([n,a,o,l])=>{if(this.destroyed)return;const c=this.#e.get(a);if(!c.objs.has(n)){if(c._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":c.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{this.destroyed||e.onProgress?.({loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[n.type];if(!a)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Bt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=this.#s.get(e);if(n)return n;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#n.set(o.refStr,t);const l=new u6(e,o,this,this._params.pdfBug);return this.#e.set(e,l),l});return this.#s.set(e,a),a}getPageIndex(t){return Qg(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#i("GetOptionalContentConfig").then(e=>new HV(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new UV(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Rc.cleanup()}}cachedPageNumber(t){if(!Qg(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class h6{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class xo{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:a,annotationCanvasMap:o,operatorList:l,pageIndex:c,canvasFactory:d,filterFactory:h,useRequestAnimationFrame:p=!1,pdfBug:m=!1,pageColors:y=null,enableHWA:x=!1,operationsFilter:A=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=c,this.canvasFactory=d,this.filterFactory=h,this._pdfBug=m,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new h6(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=x,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=A}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(xo.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");xo.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:a,background:o,dependencyTracker:l}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Ro(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:a,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),xo.#e.delete(this._canvas),t||=new Ph(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),xo.#e.delete(this._canvas),this.callback())))}}const Ev="5.4.296",zR="f56dc8601";class Yn{#t=null;#e=null;#s;#n=null;#r=!1;#i=!1;#a=null;#o;#c=null;#l=null;static#h=null;static get _keyboardManager(){return Ut(this,"_keyboardManager",new $c([[["Escape","mac+Escape"],Yn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Yn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Yn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Yn.prototype._moveToPrevious],[["Home","mac+Home"],Yn.prototype._moveToBeginning],[["End","mac+End"],Yn.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#i=!1,this.#a=t):this.#i=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#s=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Yn.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const n=this.#e=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#s,t.append(n),t}renderMainDropdown(){const t=this.#n=this.#d();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#d(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",Zn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[n,a]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=n,o.setAttribute("data-l10n-id",Yn.#h[n]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=a,o.ariaSelected=a===this.#s,o.addEventListener("click",this.#f.bind(this,a),{signal:e}),t.append(o)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Wt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#m){this.#p(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#p(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#m){this.#p(t);return}this.#n.lastChild?.focus()}#g(t){Yn._keyboardManager.exec(this,t)}#p(t){if(this.#m){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#d();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#m(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#m){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const n of this.#n.children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class Nc{#t=null;#e=null;#s=null;static#n=null;constructor(t){this.#e=t,this.#s=t._uiManager,Nc.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:n}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=n||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",Nc.#n[t]),a.addEventListener("input",()=>{this.#s.updateParams(e,a.value)},{signal:this.#s._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function kA(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function Ql(s){return Math.max(0,Math.min(255,255*s))}class LA{static CMYK_G([t,e,n,a]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Ql(t),[t,t,t]}static G_HTML([t]){const e=kA(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Ql)}static RGB_HTML(t){return`#${t.map(kA).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,n+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,n,a]){return[Ql(1-Math.min(1,t+a)),Ql(1-Math.min(1,n+a)),Ql(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const a=1-t,o=1-e,l=1-n,c=Math.min(a,o,l);return["CMYK",a,o,l,c]}}class f6{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),n||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){he("Abstract method `_createSVG` called.")}}class Dc extends f6{_createSVG(t){return document.createElementNS(bi,t)}}const p6=9,fr=new WeakSet,m6=new Date().getTimezoneOffset()*60*1e3;class jA{static create(t){switch(t.data.annotationType){case ke.LINK:return new _v(t);case ke.TEXT:return new y6(t);case ke.WIDGET:switch(t.data.fieldType){case"Tx":return new v6(t);case"Btn":return t.data.radioButton?new UR(t):t.data.checkBox?new x6(t):new w6(t);case"Ch":return new S6(t);case"Sig":return new b6(t)}return new yr(t);case ke.POPUP:return new ty(t);case ke.FREETEXT:return new VR(t);case ke.LINE:return new C6(t);case ke.SQUARE:return new E6(t);case ke.CIRCLE:return new _6(t);case ke.POLYLINE:return new HR(t);case ke.CARET:return new R6(t);case ke.INK:return new Tv(t);case ke.POLYGON:return new T6(t);case ke.HIGHLIGHT:return new $R(t);case ke.UNDERLINE:return new N6(t);case ke.SQUIGGLY:return new D6(t);case ke.STRIKEOUT:return new M6(t);case ke.STAMP:return new GR(t);case ke.FILEATTACHMENT:return new k6(t);default:return new _e(t)}}}class _e{#t=null;#e=!1;#s=null;constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return _e._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:a}=this.data;let o=-1/0,l=-1/0;if(e?.length>=8){for(let c=0;c<e.length;c+=8)e[c+1]>l?(l=e[c+1],o=e[c+2]):e[c+1]===l&&(o=Math.max(o,e[c+2]));return[o,l]}if(n?.length>=1){for(const c of n)for(let d=0,h=c.length;d<h;d+=2)c[d+1]>l?(l=c[d+1],o=c[d]):c[d+1]===l&&(o=Math.max(o,c[d]));if(o!==1/0)return[o,l]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:a,pageX:o,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/n,t[1]=100*(t[1]-l)/a,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Ec}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${Ec}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#s?.popup||this.popup)?.remove(),this.#s=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:n}=t;e&&this.#n(e);let a=this.#s?.popup||this.popup;!a&&n?.text&&(this._createPopup(n),a=this.#s.popup),a&&(a.updateEdited(t),n?.deleted&&(a.remove(),this.#s=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#s?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:n,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:c,pageY:d}}}}=this;n?.splice(0,4,...t),e.left=`${100*(t[0]-c)/o}%`,e.top=`${100*(l-t[3]+d)/l}%`,a===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:n,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof yr)&&!(this instanceof _v)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof ty){const{rotation:w}=e;return!e.hasOwnCanvas&&w!==0&&this.setRotation(w,o),o}const{width:c,height:d}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const w=e.borderStyle.horizontalCornerRadius,C=e.borderStyle.verticalCornerRadius;if(w>0||C>0){const T=`calc(${w}px * var(--total-scale-factor)) / calc(${C}px * var(--total-scale-factor))`;l.borderRadius=T}else if(this instanceof UR){const T=`calc(${c}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=T}switch(e.borderStyle.style){case ho.SOLID:l.borderStyle="solid";break;case ho.DASHED:l.borderStyle="dashed";break;case ho.BEVELED:Bt("Unimplemented border style: beveled");break;case ho.INSET:Bt("Unimplemented border style: inset");break;case ho.UNDERLINE:l.borderBottomStyle="solid";break}const E=e.borderColor||null;E?(this.#e=!0,l.borderColor=xt.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):l.borderWidth=0}const h=xt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:m,pageX:y,pageY:x}=a.rawDims;l.left=`${100*(h[0]-y)/p}%`,l.top=`${100*(h[1]-x)/m}%`;const{rotation:A}=e;return e.hasOwnCanvas||A===0?(l.width=`${100*c/p}%`,l.height=`${100*d/m}%`):this.setRotation(A,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),e.style.width=`${100*o/n}%`,e.style.height=`${100*l/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,a)=>{const o=a.detail[e],l=o[0],c=o.slice(1);a.target.style[n]=LA[`${l}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:LA[`${l}_rgb`](c)})};return Ut(this,"_commonActions",{display:e=>{const{display:n}=e.detail,a=n%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||n[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[a,o]of Object.entries(e)){const l=n[a];if(l){const c={detail:{[a]:o},target:t};l(c),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,a,o]=this.data.rect.map(w=>Math.fround(w));if(t.length===8){const[w,C,E,T]=t.subarray(2,6);if(a===w&&o===C&&e===E&&n===T)return}const{style:l}=this.container;let c;if(this.#e){const{borderColor:w,borderWidth:C}=l;l.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const d=a-e,h=o-n,{svgFactory:p}=this,m=p.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const y=p.createElement("defs");m.append(y);const x=p.createElement("clipPath"),A=`clippath_${this.data.id}`;x.setAttribute("id",A),x.setAttribute("clipPathUnits","objectBoundingBox"),y.append(x);for(let w=2,C=t.length;w<C;w+=8){const E=t[w],T=t[w+1],R=t[w+2],N=t[w+3],D=p.createElement("rect"),L=(R-e)/d,k=(o-T)/h,j=(E-R)/d,P=(T-N)/h;D.setAttribute("x",L),D.setAttribute("y",k),D.setAttribute("width",j),D.setAttribute("height",P),x.append(D),c?.push(`<rect vector-effect="non-scaling-stroke" x="${L}" y="${k}" width="${j}" height="${P}"/>`)}this.#e&&(c.push("</g></svg>')"),l.backgroundImage=c.join("")),this.container.append(m),this.container.style.clipPath=`url(#${A})`}_createPopup(t=null){const{data:e}=this;let n,a;t?(n={str:t.text},a=t.date):(n=e.contentsObj,a=e.modificationDate);const o=this.#s=new ty({data:{color:e.color,titleObj:e.titleObj,modificationDate:a,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#s||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#s}render(){he("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:l,exportValues:c}of a){if(o===-1||l===e)continue;const d=typeof c=="string"?c:null,h=document.querySelector(`[data-element-id="${l}"]`);if(h&&!fr.has(h)){Bt(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:d,domElement:h})}return n}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,l=a.getAttribute("data-element-id");l!==e&&fr.has(a)&&n.push({id:l,exportValue:o,domElement:a})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class g6 extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class _v extends _e{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(n,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(n,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#s(n,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(n,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),a=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(n,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(n),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,n=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),n&&(t.title=n)}_bindNamedAction(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),n&&(t.title=n),this.#t()}#e(t,e,n="",a=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:n&&(t.title=n),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,a),!1),this.#t()}#s(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),n&&(t.title=n),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const o=n.get(a);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Bt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();const{fields:a,refs:o,include:l}=e,c=[];if(a.length!==0||o.length!==0){const p=new Set(o);for(const m of a){const y=this._fieldObjects[m]||[];for(const{id:x}of y)p.add(x)}for(const m of Object.values(this._fieldObjects))for(const y of m)p.has(y.id)===l&&c.push(y)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const d=this.annotationStorage,h=[];for(const p of c){const{id:m}=p;switch(h.push(m),p.type){case"text":{const x=p.defaultValue||"";d.setValue(m,{value:x});break}case"checkbox":case"radiobutton":{const x=p.defaultValue===p.exportValues;d.setValue(m,{value:x});break}case"combobox":case"listbox":{const x=p.defaultValue||"";d.setValue(m,{value:x});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!fr.has(y)){Bt(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class y6 extends _e{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class yr extends _e{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Qe.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,a,o){n.includes("mouse")?t.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l)}})})}_setEventListeners(t,e,n,a){for(const[o,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,o,l,a),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":xt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||p6,o=t.style;let l;const c=2,d=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c),p=Math.round(h/(Ym*a))||1,m=h/p;l=Math.min(a,d(m/Ym))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c);l=Math.min(a,d(h/Ym))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=xt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class v6 extends yr{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,a){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),o.setValue(l.id,{[a]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let o=a.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let c=a.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=c??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",c??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),fr.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:h,datetimeType:p,timeStep:m}=this.data,y=!!p&&this.enableScripting;h&&(n.title=h),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",A=>{t.setValue(e,{value:A.target.value}),this.setPropertyOnSiblings(n,"value",A.target.value,"value"),d.formattedValue=null}),n.addEventListener("resetform",A=>{const w=this.data.defaultFieldValue??"";n.value=d.userValue=w,d.formattedValue=null});let x=A=>{const{formattedValue:w}=d;w!=null&&(A.target.value=w),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",w=>{if(d.focused)return;const{target:C}=w;if(y&&(C.type=p,m&&(C.step=m)),d.userValue){const E=d.userValue;if(y)if(p==="time"){const T=new Date(E),R=[T.getHours(),T.getMinutes(),T.getSeconds()];C.value=R.map(N=>N.toString().padStart(2,"0")).join(":")}else C.value=new Date(E-m6).toISOString().split(p==="date"?"T":".",1)[0];else C.value=E}d.lastCommittedValue=C.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),n.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const C={value(E){d.userValue=E.detail.value??"",y||t.setValue(e,{value:d.userValue.toString()}),E.target.value=d.userValue},formattedValue(E){const{formattedValue:T}=E.detail;d.formattedValue=T,T!=null&&E.target!==document.activeElement&&(E.target.value=T);const R={formattedValue:T};y&&(R.value=T),t.setValue(e,R)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:T}=E.detail,{target:R}=E;if(T===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",T);let N=d.userValue;!N||N.length<=T||(N=N.slice(0,T),R.value=d.userValue=N,t.setValue(e,{value:N}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(C,w)}),n.addEventListener("keydown",w=>{d.commitKey=1;let C=-1;if(w.key==="Escape"?C=0:w.key==="Enter"&&!this.data.multiLine?C=2:w.key==="Tab"&&(d.commitKey=3),C===-1)return;const{value:E}=w.target;d.lastCommittedValue!==E&&(d.lastCommittedValue=E,d.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:C,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const A=x;x=null,n.addEventListener("blur",w=>{if(!d.focused||!w.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:C}=w;let{value:E}=C;if(y){if(E&&p==="time"){const T=E.split(":").map(R=>parseInt(R,10));E=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),C.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();C.type="text"}d.userValue=E,d.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:d.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}),A(w)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",w=>{d.lastCommittedValue=null;const{data:C,target:E}=w,{value:T,selectionStart:R,selectionEnd:N}=E;let D=R,L=N;switch(w.inputType){case"deleteWordBackward":{const k=T.substring(0,R).match(/\w*[^\w]*$/);k&&(D-=k[0].length);break}case"deleteWordForward":{const k=T.substring(R).match(/^[^\w]*\w*/);k&&(L+=k[0].length);break}case"deleteContentBackward":R===N&&(D-=1);break;case"deleteContentForward":R===N&&(L+=1);break}w.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,change:C||"",willCommit:!1,selStart:D,selEnd:L}})}),this._setEventListeners(n,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(x&&n.addEventListener("blur",x),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class b6 extends yr{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class x6 extends yr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(n,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return fr.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:c,checked:d}=l.target;for(const h of this._getElementsByName(c,n)){const p=d&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=p),t.setValue(h.id,{value:p})}t.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const c=e.defaultFieldValue||"Off";l.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const c={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class UR extends yr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(n,{value:a})),a)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(fr.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:c,checked:d}=l.target;for(const h of this._getElementsByName(c,n))t.setValue(h.id,{value:!1});t.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const c=e.defaultFieldValue;l.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;o.addEventListener("updatefromsandbox",c=>{const d={value:h=>{const p=l===h.detail.value;for(const m of this._getElementsByName(h.target.name)){const y=p&&m.id===n;m.domElement&&(m.domElement.checked=y),t.setValue(m.id,{value:y})}}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class w6 extends _v{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class S6 extends yr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");fr.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue;for(const y of a.options)y.selected=y.value===m});for(const p of this.data.options){const m=document.createElement("option");m.textContent=p.displayValue,m.value=p.exportValue,n.value.includes(p.exportValue)&&(m.setAttribute("selected",!0),o=!1),a.append(m)}let l=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),a.prepend(p),l=()=>{p.remove(),a.removeEventListener("input",l),l=null},a.addEventListener("input",l)}const c=p=>{const m=p?"value":"textContent",{options:y,multiple:x}=a;return x?Array.prototype.filter.call(y,A=>A.selected).map(A=>A[m]):y.selectedIndex===-1?null:y[y.selectedIndex][m]};let d=c(!1);const h=p=>{const m=p.target.options;return Array.prototype.map.call(m,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",p=>{const m={value(y){l?.();const x=y.detail.value,A=new Set(Array.isArray(x)?x:[x]);for(const w of a.options)w.selected=A.has(w.value);t.setValue(e,{value:c(!0)}),d=c(!1)},multipleSelection(y){a.multiple=!0},remove(y){const x=a.options,A=y.detail.remove;x[A].selected=!1,a.remove(A),x.length>0&&Array.prototype.findIndex.call(x,C=>C.selected)===-1&&(x[0].selected=!0),t.setValue(e,{value:c(!0),items:h(y)}),d=c(!1)},clear(y){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=c(!1)},insert(y){const{index:x,displayValue:A,exportValue:w}=y.detail.insert,C=a.children[x],E=document.createElement("option");E.textContent=A,E.value=w,C?C.before(E):a.append(E),t.setValue(e,{value:c(!0),items:h(y)}),d=c(!1)},items(y){const{items:x}=y.detail;for(;a.length!==0;)a.remove(0);for(const A of x){const{displayValue:w,exportValue:C}=A,E=document.createElement("option");E.textContent=w,E.value=C,a.append(E)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:c(!0),items:h(y)}),d=c(!1)},indices(y){const x=new Set(y.detail.indices);for(const A of y.target.options)A.selected=x.has(A.index);t.setValue(e,{value:c(!0)}),d=c(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(m,p)}),a.addEventListener("input",p=>{const m=c(!0),y=c(!1);t.setValue(e,{value:m}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:y,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):a.addEventListener("input",function(p){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class ty extends _e{constructor(t){const{data:e,elements:n,parent:a}=t,o=!!a._commentManager;if(super(t,{isRenderable:!o&&_e._hasPopupData(e)}),this.elements=n,o&&_e._hasPopupData(e)){const l=this.popup=this.#t();for(const c of n)c.popup=l}else this.popup=null}#t(){return new A6({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),n=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",n.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(a=>`${fv}${a}`).join(",")),this.container}}class A6{#t=null;#e=this.#$.bind(this);#s=this.#I.bind(this);#n=this.#L.bind(this);#r=this.#w.bind(this);#i=null;#a=null;#o=null;#c=null;#l=null;#h=null;#d=null;#f=!1;#g=null;#p=null;#u=null;#m=null;#y=null;#b=null;#v=null;#E=null;#A=null;#x=null;#T=!1;#S=null;#C=null;constructor({container:t,color:e,elements:n,titleObj:a,modificationDate:o,contentsObj:l,richText:c,parent:d,rect:h,parentRect:p,open:m,commentManager:y=null}){this.#a=t,this.#A=a,this.#o=l,this.#E=c,this.#h=d,this.#i=e,this.#v=h,this.#d=p,this.#l=n,this.#t=y,this.#S=n[0],this.#c=ch.toDateObject(o),this.trigger=n.flatMap(x=>x.getElementsToTriggerPopup()),y?this.renderCommentButton():(this.#D(),this.#a.hidden=!0,m&&this.#w())}#D(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const e of this.trigger)e.addEventListener("click",this.#r,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#s,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#R(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#m||(this.#y||this.#R(),!this.#y))return;const{signal:t}=this.#p=new AbortController,e=!!this.#S.extraPopupElement,n=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#m=this.#S.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#m=document.createElement("button");l.className="annotationCommentButton";const c=this.#S.container;l.style.zIndex=c.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#F(),this.#N(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),c.after(l)}}#N(){if(this.#S.extraPopupElement&&!this.#S.editor)return;this.renderCommentButton();const[t,e]=this.#y,{style:n}=this.#m;n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`}#F(){this.#S.extraPopupElement||(this.renderCommentButton(),this.#m.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#S.commentData;return t?this.#h._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#m?.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:a,modificationDate:o}=this.#S.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:a,modificationDate:o}}get elementBeforePopup(){return this.#m}get comment(){return this.#C||=this.#S.commentText,this.#C}set comment(t){t!==this.comment&&(this.#S.commentText=this.#C=t)}get parentBoundingClientRect(){return this.#S.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#m&&(this.#m.classList.toggle("selected",t),this.#m.ariaExpanded=e)}setSelectedCommentButton(t){this.#m.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:t,y:e,height:n}=this.#m.getBoundingClientRect(),{x:a,y:o,width:l,height:c}=this.#S.layer.getBoundingClientRect();return[(t-a)/l,(e+n-o)/c]}set commentPopupPosition(t){this.#b=t}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#m.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=this.#b||this.commentButtonPosition.map(h=>h/100),a=this.parentBoundingClientRect,{x:o,y:l,width:c,height:d}=a;this.#t.showDialog(null,this,o+e*c,l+n*d,{...t,parentDimensions:a})}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#i){const n=t.style.outlineColor=xt.makeHexColor(...this.#i);t.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#A?.str){const n=document.createElement("span");n.className="title",e.append(n),{dir:n.dir,str:n.textContent}=this.#A}if(t.append(e),this.#c){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),n.dateTime=this.#c.toISOString(),e.append(n)}mv({html:this.#k||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#a.append(t)}get#k(){const t=this.#E,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#E.html||null}get#j(){return this.#k?.attributes?.style?.fontSize||0}get#B(){return this.#k?.attributes?.style?.color||null}#O(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#B,fontSize:this.#j?`calc(${this.#j}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:a});return n}#$(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:t,popup:e,deleted:n}){if(this.#t){n?(this.remove(),this.#C=null):e&&(e.deleted?this.remove():(this.#F(),this.#C=e.text)),t&&(this.#y=null,this.#R(),this.#N());return}if(n||e?.deleted){this.remove();return}this.#D(),this.#x||={contentsObj:this.#o,richText:this.#E},t&&(this.#u=null),e&&e.text&&(this.#E=this.#O(e.text),this.#c=ch.toDateObject(e.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#x&&({contentsObj:this.#o,richText:this.#E}=this.#x,this.#x=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#g?.remove(),this.#g=null,this.#T=!1,this.#f=!1,this.#m?.remove(),this.#m=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#_(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:a,pageY:o}}}=this.#h;let l=!!this.#d,c=l?this.#d:this.#v;for(const A of this.#l)if(!c||xt.intersect(A.data.rect,c)!==null){c=A.data.rect,l=!0;break}const d=xt.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),p=l?c[2]-c[0]+5:0,m=d[0]+p,y=d[1];this.#u=[100*(m-a)/e,100*(y-o)/n];const{style:x}=this.#a;x.left=`${this.#u[0]}%`,x.top=`${this.#u[1]}%`}#w(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#L(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#e)):(this.#I(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#e))}#L(){this.#g||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#_(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#I(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#a.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#T&&(this.#g||this.#L(),this.#T=!1,this.#a.hidden=!1))}get isVisible(){return this.#t?!1:this.#a.hidden===!1}}class VR extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Ft.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class C6 extends _e{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:n}=this,a=this.svgFactory.create(e,n,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class E6 extends _e{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:n}=this,a=this.svgFactory.create(e,n,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",e-o),l.setAttribute("height",n-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class _6 extends _e{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:n}=this,a=this.svgFactory.create(e,n,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",n/2),l.setAttribute("rx",e/2-o/2),l.setAttribute("ry",n/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class HR extends _e{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:a},width:o,height:l}=this;if(!e)return this.container;const c=this.svgFactory.create(o,l,!0);let d=[];for(let p=0,m=e.length;p<m;p+=2){const y=e[p]-t[0],x=t[3]-e[p+1];d.push(`${y},${x}`)}d=d.join(" ");const h=this.#t=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",d),h.setAttribute("stroke-width",n.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class T6 extends HR{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class R6 extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Tv extends _e{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ft.HIGHLIGHT:Ft.INK}#s(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:a,popupRef:o}}=this,{transform:l,width:c,height:d}=this.#s(e,t),h=this.svgFactory.create(c,d,!0),p=this.#t=this.svgFactory.createElement("svg:g");h.append(p),p.setAttribute("stroke-width",a.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",l);for(let m=0,y=n.length;m<y;m++){const x=this.svgFactory.createElement(this.svgElementName);this.#e.push(x),x.setAttribute("points",n[m].join(",")),p.append(x)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:a}=t,o=this.#t;if(e>=0&&o.setAttribute("stroke-width",e||1),n)for(let l=0,c=this.#e.length;l<c;l++)this.#e[l].setAttribute("points",n[l].join(","));if(a){const{transform:l,width:c,height:d}=this.#s(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class $R extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ft.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class N6 extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class D6 extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class M6 extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class GR extends _e{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ft.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class k6 extends _e{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;const{isMac:a}=Qe.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let Rv=class qR{#t=null;#e=null;#s=null;#n=new Map;#r=null;#i=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:a,page:o,viewport:l,structTreeLayer:c,commentManager:d,linkService:h,annotationStorage:p}){this.div=t,this.#t=e,this.#e=n,this.#r=c||null,this.#i=h||null,this.#s=p||new vv,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async#a(t,e,n){const a=t.firstChild||t,o=a.id=`${fv}${e}`,l=await this.#r?.getAriaAttributes(o);if(l)for(const[c,d]of l)a.setAttribute(c,d);n?n.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,a,!1))}async render(t){const{annotations:e}=t,n=this.div;ba(n,this.viewport);const a=new Map,o={data:null,layer:n,linkService:this.#i,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Dc,annotationStorage:this.#s,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const c=l.annotationType===ke.POPUP;if(c){const p=a.get(l.id);if(!p)continue;o.elements=p}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const d=jA.create(o);if(!d.isRenderable)continue;if(!c&&l.popupRef){const p=a.get(l.popupRef);p?p.push(d):a.set(l.popupRef,[d])}const h=d.render();l.hidden&&(h.style.visibility="hidden"),await this.#a(h,l.id,o.elements),d.extraPopupElement?.popup?.renderCommentButton(),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#o()}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#i,svgFactory:new Dc,parent:this};for(const n of t){n.borderStyle||=qR._defaultBorderStyle,e.data=n;const a=jA.create(e);if(!a.isRenderable)continue;const o=a.render();await this.#a(o,n.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,ba(e,{rotation:t.rotation}),this.#o(),e.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[e,n]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;n.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):a.append(n);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,n),l._hasNoCanvas=!1):l.canvas=n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:a}=t,o=new g6({data:{id:n,rect:t.getPDFRect(),rotation:a},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#i,annotationStorage:this.#s}),l=o.render();return e.append(l),this.#t?.moveElementInDOM(e,l,l,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return Ut(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:ho.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const Dd=/\r\n?|\n/g;class Ye extends Nt{#t="";#e=`${this.id}-editor`;#s=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Ye.prototype,e=o=>o.isEmpty(),n=Ri.TRANSLATE_SMALL,a=Ri.TRANSLATE_BIG;return Ut(this,"_keyboardManager",new $c([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=Ft.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||Ye._defaultColor||Nt._defaultLineColor,this.#n=t.fontSize||Ye._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){Nt.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Wt.FREETEXT_SIZE:Ye._defaultFontSize=e;break;case Wt.FREETEXT_COLOR:Ye._defaultColor=e;break}}updateParams(t,e){switch(t){case Wt.FREETEXT_SIZE:this.#r(e);break;case Wt.FREETEXT_COLOR:this.#i(e);break}}static get defaultPropertiesToUpdate(){return[[Wt.FREETEXT_SIZE,Ye._defaultFontSize],[Wt.FREETEXT_COLOR,Ye._defaultColor||Nt._defaultLineColor]]}get propertiesToUpdate(){return[[Wt.FREETEXT_SIZE,this.#n],[Wt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Nc(this),[["colorPicker",this._colorPicker]]}get colorType(){return Wt.FREETEXT_COLOR}#r(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#n)*this.parentScale),this.#n=a,this.#o()},n=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#i(t){const e=a=>{this.color=a,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ye._internalPadding*t,-(Ye._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const t=this._uiManager.combinedSignal(this.#s);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let e=null;for(const n of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(Ye.#c(n)),e=n);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#a().trimEnd();if(t===e)return;const n=a=>{if(this.#t=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ye._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[h,p]=this.pageDimensions,[m,y]=this.pageTranslation;let x,A;switch(this.rotation){case 0:x=t+(l[0]-m)/h,A=e+this.height-(l[1]-y)/p;break;case 90:x=t+(l[0]-m)/h,A=e-(l[1]-y)/p,[c,d]=[d,-c];break;case 180:x=t-this.width+(l[0]-m)/h,A=e-(l[1]-y)/p,[c,d]=[-c,-d];break;case 270:x=t+(l[0]-m-this.height*p)/h,A=e+(l[1]-y-this.width*h)/p,[c,d]=[-d,c];break}this.setAt(x*a,A*o,c,d)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Dd,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const a=Ye.#d(e.getData("text")||"").replaceAll(Dd,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!a.includes(`
`)){l.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:d}=l,h=[],p=[];if(c.nodeType===Node.TEXT_NODE){const x=c.parentElement;if(p.push(c.nodeValue.slice(d).replaceAll(Dd,"")),x!==this.editorDiv){let A=h;for(const w of this.editorDiv.childNodes){if(w===x){A=p;continue}A.push(Ye.#c(w))}}h.push(c.nodeValue.slice(0,d).replaceAll(Dd,""))}else if(c===this.editorDiv){let x=h,A=0;for(const w of this.editorDiv.childNodes)A++===d&&(x=p),x.push(Ye.#c(w))}this.#t=`${h.join(`
`)}${a}${p.join(`
`)}`,this.#l();const m=new Range;let y=Math.sumPrecise(h.map(x=>x.length));for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const A=x.nodeValue.length;if(y<=A){m.setStart(x,y),m.setEnd(x,y);break}y-=A}o.removeAllRanges(),o.addRange(m)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#h(){return this.#t.replaceAll(""," ")}static#d(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Ye._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,n){let a=null;if(t instanceof VR){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:d,rotation:h,id:p,popupRef:m,richText:y,contentsObj:x,creationDate:A,modificationDate:w},textContent:C,textPosition:E,parent:{page:{pageNumber:T}}}=t;if(!C||C.length===0)return null;a=t={annotationType:Ft.FREETEXT,color:Array.from(c),fontSize:l,value:C.join(`
`),position:E,pageIndex:T-1,rect:d.slice(0),rotation:h,annotationElementId:p,id:p,deleted:!1,popupRef:m,comment:x?.str||null,richText:y,creationDate:A,modificationDate:w}}const o=await super.deserialize(t,e,n);return o.#n=t.fontSize,o.color=xt.makeHexColor(...t.color),o.#t=Ye.#d(t.value),o._initialData=a,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=Nt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#h()});return this.addComment(n),t?(n.isCopy=!0,n):this.annotationElementId&&!this.#f(n)?null:(n.id=this.annotationElementId,n)}#f(t){const{value:e,fontSize:n,color:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((l,c)=>l!==a[c])||t.pageIndex!==o}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:n}=e;n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,e.replaceChildren();for(const a of this.#t.split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),e.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class bt{static PRECISION=1e-4;toSVGPath(){he("Abstract method `toSVGPath` must be implemented.")}get box(){he("Abstract getter `box` must be implemented.")}serialize(t,e){he("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,a,o,l){l||=new Float32Array(t.length);for(let c=0,d=t.length;c<d;c+=2)l[c]=e+t[c]*a,l[c+1]=n+t[c+1]*o;return l}static _rescaleAndSwap(t,e,n,a,o,l){l||=new Float32Array(t.length);for(let c=0,d=t.length;c<d;c+=2)l[c]=e+t[c+1]*a,l[c+1]=n+t[c]*o;return l}static _translate(t,e,n,a){a||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o],a[o+1]=n+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,a,o){switch(o){case 90:return[1-e/n,t/a];case 180:return[1-t/n,1-e/a];case 270:return[e/n,1-t/a];default:return[t/n,e/a]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,a,o,l){return[(t+5*n)/6,(e+5*a)/6,(5*n+o)/6,(5*a+l)/6,(n+o)/2,(a+l)/2]}}class Ja{#t;#e=[];#s;#n;#r=[];#i=new Float32Array(18);#a;#o;#c;#l;#h;#d;#f=[];static#g=8;static#p=2;static#u=Ja.#g+Ja.#p;constructor({x:t,y:e},n,a,o,l,c=0){this.#t=n,this.#d=o*a,this.#n=l,this.#i.set([NaN,NaN,NaN,NaN,t,e],6),this.#s=c,this.#l=Ja.#g*a,this.#c=Ja.#u*a,this.#h=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#i[8])}#m(){const t=this.#i.subarray(4,6),e=this.#i.subarray(16,18),[n,a,o,l]=this.#t;return[(this.#a+(t[0]-e[0])/2-n)/o,(this.#o+(t[1]-e[1])/2-a)/l,(this.#a+(e[0]-t[0])/2-n)/o,(this.#o+(e[1]-t[1])/2-a)/l]}add({x:t,y:e}){this.#a=t,this.#o=e;const[n,a,o,l]=this.#t;let[c,d,h,p]=this.#i.subarray(8,12);const m=t-h,y=e-p,x=Math.hypot(m,y);if(x<this.#c)return!1;const A=x-this.#l,w=A/x,C=w*m,E=w*y;let T=c,R=d;c=h,d=p,h+=C,p+=E,this.#f?.push(t,e);const N=-E/A,D=C/A,L=N*this.#d,k=D*this.#d;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([h+L,p+k],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([h-L,p-k],16),isNaN(this.#i[6])?(this.#r.length===0&&(this.#i.set([c+L,d+k],2),this.#r.push(NaN,NaN,NaN,NaN,(c+L-n)/o,(d+k-a)/l),this.#i.set([c-L,d-k],14),this.#e.push(NaN,NaN,NaN,NaN,(c-L-n)/o,(d-k-a)/l)),this.#i.set([T,R,c,d,h,p],6),!this.isEmpty()):(this.#i.set([T,R,c,d,h,p],6),Math.abs(Math.atan2(R-d,T-c)-Math.atan2(E,C))<Math.PI/2?([c,d,h,p]=this.#i.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((c+h)/2-n)/o,((d+p)/2-a)/l),[c,d,T,R]=this.#i.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((T+c)/2-n)/o,((R+d)/2-a)/l),!0):([T,R,c,d,h,p]=this.#i.subarray(0,6),this.#r.push(((T+5*c)/6-n)/o,((R+5*d)/6-a)/l,((5*c+h)/6-n)/o,((5*d+p)/6-a)/l,((c+h)/2-n)/o,((d+p)/2-a)/l),[h,p,c,d,T,R]=this.#i.subarray(12,18),this.#e.push(((T+5*c)/6-n)/o,((R+5*d)/6-a)/l,((5*c+h)/6-n)/o,((5*d+p)/6-a)/l,((c+h)/2-n)/o,((d+p)/2-a)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#y();const n=[];n.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?n.push(`L${t[a+4]} ${t[a+5]}`):n.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#v(n);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?n.push(`L${e[a+4]} ${e[a+5]}`):n.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#b(n),n.join(" ")}#y(){const[t,e,n,a]=this.#t,[o,l,c,d]=this.#m();return`M${(this.#i[2]-t)/n} ${(this.#i[3]-e)/a} L${(this.#i[4]-t)/n} ${(this.#i[5]-e)/a} L${o} ${l} L${c} ${d} L${(this.#i[16]-t)/n} ${(this.#i[17]-e)/a} L${(this.#i[14]-t)/n} ${(this.#i[15]-e)/a} Z`}#b(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#v(t){const[e,n,a,o]=this.#t,l=this.#i.subarray(4,6),c=this.#i.subarray(16,18),[d,h,p,m]=this.#m();t.push(`L${(l[0]-e)/a} ${(l[1]-n)/o} L${d} ${h} L${p} ${m} L${(c[0]-e)/a} ${(c[1]-n)/o}`)}newFreeDrawOutline(t,e,n,a,o,l){return new XR(t,e,n,a,o,l)}getOutlines(){const t=this.#r,e=this.#e,n=this.#i,[a,o,l,c]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let m=0,y=d.length-2;m<y;m+=2)d[m]=(this.#f[m]-a)/l,d[m+1]=(this.#f[m+1]-o)/c;if(d[d.length-2]=(this.#a-a)/l,d[d.length-1]=(this.#o-o)/c,isNaN(n[6])&&!this.isEmpty())return this.#E(d);const h=new Float32Array(this.#r.length+24+this.#e.length);let p=t.length;for(let m=0;m<p;m+=2){if(isNaN(t[m])){h[m]=h[m+1]=NaN;continue}h[m]=t[m],h[m+1]=t[m+1]}p=this.#x(h,p);for(let m=e.length-6;m>=6;m-=6)for(let y=0;y<6;y+=2){if(isNaN(e[m+y])){h[p]=h[p+1]=NaN,p+=2;continue}h[p]=e[m+y],h[p+1]=e[m+y+1],p+=2}return this.#A(h,p),this.newFreeDrawOutline(h,d,this.#t,this.#h,this.#s,this.#n)}#E(t){const e=this.#i,[n,a,o,l]=this.#t,[c,d,h,p]=this.#m(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(e[2]-n)/o,(e[3]-a)/l,NaN,NaN,NaN,NaN,(e[4]-n)/o,(e[5]-a)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,h,p,NaN,NaN,NaN,NaN,(e[16]-n)/o,(e[17]-a)/l,NaN,NaN,NaN,NaN,(e[14]-n)/o,(e[15]-a)/l],0),this.newFreeDrawOutline(m,t,this.#t,this.#h,this.#s,this.#n)}#A(t,e){const n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6}#x(t,e){const n=this.#i.subarray(4,6),a=this.#i.subarray(16,18),[o,l,c,d]=this.#t,[h,p,m,y]=this.#m();return t.set([NaN,NaN,NaN,NaN,(n[0]-o)/c,(n[1]-l)/d,NaN,NaN,NaN,NaN,h,p,NaN,NaN,NaN,NaN,m,y,NaN,NaN,NaN,NaN,(a[0]-o)/c,(a[1]-l)/d],e),e+=24}}class XR extends bt{#t;#e=new Float32Array(4);#s;#n;#r;#i;#a;constructor(t,e,n,a,o,l){super(),this.#a=t,this.#r=e,this.#t=n,this.#i=a,this.#s=o,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[c,d,h,p]=this.#e;for(let m=0,y=t.length;m<y;m+=2)t[m]=(t[m]-c)/h,t[m+1]=(t[m+1]-d)/p;for(let m=0,y=e.length;m<y;m+=2)e[m]=(e[m]-c)/h,e[m+1]=(e[m+1]-d)/p}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,n=this.#a.length;e<n;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,a],o){const l=n-t,c=a-e;let d,h;switch(o){case 0:d=bt._rescale(this.#a,t,a,l,-c),h=bt._rescale(this.#r,t,a,l,-c);break;case 90:d=bt._rescaleAndSwap(this.#a,t,e,l,c),h=bt._rescaleAndSwap(this.#r,t,e,l,c);break;case 180:d=bt._rescale(this.#a,n,e,-l,c),h=bt._rescale(this.#r,n,e,-l,c);break;case 270:d=bt._rescaleAndSwap(this.#a,n,a,-l,-c),h=bt._rescaleAndSwap(this.#r,n,a,-l,-c);break}return{outline:Array.from(d),points:[Array.from(h)]}}#o(t){const e=this.#a;let n=e[4],a=e[5];const o=[n,a,n,a];let l=n,c=a,d=n,h=a;const p=t?Math.max:Math.min,m=new Float32Array(4);for(let x=6,A=e.length;x<A;x+=6){const w=e[x+4],C=e[x+5];isNaN(e[x])?(xt.pointBoundingBox(w,C,o),c>C?(l=w,c=C):c===C&&(l=p(l,w)),h<C?(d=w,h=C):h===C&&(d=p(d,w))):(m[0]=m[1]=1/0,m[2]=m[3]=-1/0,xt.bezierBoundingBox(n,a,...e.slice(x,x+6),m),xt.rectBoundingBox(m[0],m[1],m[2],m[3],o),c>m[1]?(l=m[0],c=m[1]):c===m[1]&&(l=p(l,m[0])),h<m[3]?(d=m[2],h=m[3]):h===m[3]&&(d=p(d,m[2]))),n=w,a=C}const y=this.#e;y[0]=o[0]-this.#s,y[1]=o[1]-this.#s,y[2]=o[2]-o[0]+2*this.#s,y[3]=o[3]-o[1]+2*this.#s,this.firstPoint=[l,c],this.lastPoint=[d,h]}get box(){return this.#e}newOutliner(t,e,n,a,o,l=0){return new Ja(t,e,n,a,o,l)}getNewOutline(t,e){const[n,a,o,l]=this.#e,[c,d,h,p]=this.#t,m=o*h,y=l*p,x=n*h+c,A=a*p+d,w=this.newOutliner({x:this.#r[0]*m+x,y:this.#r[1]*y+A},this.#t,this.#i,t,this.#n,e??this.#s);for(let C=2;C<this.#r.length;C+=2)w.add({x:this.#r[C]*m+x,y:this.#r[C+1]*y+A});return w.getOutlines()}}class ey{#t;#e;#s;#n=[];#r=[];constructor(t,e=0,n=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:w,y:C,width:E,height:T}of t){const R=Math.floor((w-e)/l)*l,N=Math.ceil((w+E+e)/l)*l,D=Math.floor((C-e)/l)*l,L=Math.ceil((C+T+e)/l)*l,k=[R,D,L,!0],j=[N,D,L,!1];this.#n.push(k,j),xt.rectBoundingBox(R,D,N,L,o)}const c=o[2]-o[0]+2*n,d=o[3]-o[1]+2*n,h=o[0]-n,p=o[1]-n;let m=a?-1/0:1/0,y=1/0;const x=this.#n.at(a?-1:-2),A=[x[0],x[2]];for(const w of this.#n){const[C,E,T,R]=w;!R&&a?E<y?(y=E,m=C):E===y&&(m=Math.max(m,C)):R&&!a&&(E<y?(y=E,m=C):E===y&&(m=Math.min(m,C))),w[0]=(C-h)/c,w[1]=(E-p)/d,w[2]=(T-p)/d}this.#t=new Float32Array([h,p,c,d]),this.#e=[m,y],this.#s=A}getOutlines(){this.#n.sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#i(t)}#i(t){const e=[],n=new Set;for(const l of t){const[c,d,h]=l;e.push([c,d,l],[c,h,l])}e.sort((l,c)=>l[1]-c[1]||l[0]-c[0]);for(let l=0,c=e.length;l<c;l+=2){const d=e[l][2],h=e[l+1][2];d.push(h),h.push(d),n.add(d),n.add(h)}const a=[];let o;for(;n.size>0;){const l=n.values().next().value;let[c,d,h,p,m]=l;n.delete(l);let y=c,x=d;for(o=[c,h],a.push(o);;){let A;if(n.has(p))A=p;else if(n.has(m))A=m;else break;n.delete(A),[c,d,h,p,m]=A,y!==c&&(o.push(y,x,c,x===d?d:h),y=c),x=x===d?h:d}o.push(y,x)}return new L6(a,this.#t,this.#e,this.#s)}#a(t){const e=this.#r;let n=0,a=e.length-1;for(;n<=a;){const o=n+a>>1,l=e[o][0];if(l===t)return o;l<t?n=o+1:a=o-1}return a+1}#o([,t,e]){const n=this.#a(t);this.#r.splice(n,0,[t,e])}#c([,t,e]){const n=this.#a(t);for(let a=n;a<this.#r.length;a++){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===e){this.#r.splice(a,1);return}}for(let a=n-1;a>=0;a--){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===e){this.#r.splice(a,1);return}}}#l(t){const[e,n,a]=t,o=[[e,n,a]],l=this.#a(a);for(let c=0;c<l;c++){const[d,h]=this.#r[c];for(let p=0,m=o.length;p<m;p++){const[,y,x]=o[p];if(!(h<=y||x<=d)){if(y>=d){if(x>h)o[p][1]=h;else{if(m===1)return[];o.splice(p,1),p--,m--}continue}o[p][2]=d,x>h&&o.push([e,h,x])}}}return o}}class L6 extends bt{#t;#e;constructor(t,e,n,a){super(),this.#e=t,this.#t=e,this.firstPoint=n,this.lastPoint=a}toSVGPath(){const t=[];for(const e of this.#e){let[n,a]=e;t.push(`M${n} ${a}`);for(let o=2;o<e.length;o+=2){const l=e[o],c=e[o+1];l===n?(t.push(`V${c}`),a=c):c===a&&(t.push(`H${l}`),n=l)}t.push("Z")}return t.join(" ")}serialize([t,e,n,a],o){const l=[],c=n-t,d=a-e;for(const h of this.#e){const p=new Array(h.length);for(let m=0;m<h.length;m+=2)p[m]=t+h[m]*c,p[m+1]=a-h[m+1]*d;l.push(p)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class ny extends Ja{newFreeDrawOutline(t,e,n,a,o,l){return new j6(t,e,n,a,o,l)}}class j6 extends XR{newOutliner(t,e,n,a,o,l=0){return new ny(t,e,n,a,o,l)}}class Le extends Nt{#t=null;#e=0;#s;#n=null;#r=null;#i=null;#a=null;#o=0;#c=null;#l=null;#h=null;#d=!1;#f=null;#g=null;#p=null;#u="";#m;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Ft.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=Le.prototype;return Ut(this,"_keyboardManager",new $c([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||Le._defaultColor,this.#m=t.thickness||Le._defaultThickness,this.opacity=t.opacity||Le._defaultOpacity,this.#s=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#d=!0,this.#v(t),this.#S()):this.#s&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#b(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){const t=new ey(this.#s,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new ey(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#i=e.getOutlines();const{firstPoint:n}=this.#l;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height];const{lastPoint:a}=this.#i;this.#g=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#v({highlightOutlines:t,highlightId:e,clipPathId:n}){this.#l=t;const a=1.5;if(this.#i=t.getNewOutline(this.#m/2+a,.0025),e>=0)this.#h=e,this.#n=n,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:Le.#C(this.#l.box,(m-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:Le.#C(this.#i.box,m),path:{d:this.#i.toSVGPath()}})}const[o,l,c,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=d;break;case 90:{const[m,y]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*y/m,this.height=d*m/y;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=d;break;case 270:{const[m,y]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*y/m,this.height=d*m/y;break}}const{firstPoint:h}=t;this.#f=[(h[0]-o)/c,(h[1]-l)/d];const{lastPoint:p}=this.#i;this.#g=[(p[0]-o)/c,(p[1]-l)/d]}static initialize(t,e){Nt.initialize(t,e),Le._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Wt.HIGHLIGHT_COLOR:Le._defaultColor=e;break;case Wt.HIGHLIGHT_THICKNESS:Le._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Wt.HIGHLIGHT_COLOR:this.#E(e);break;case Wt.HIGHLIGHT_THICKNESS:this.#A(e);break}}static get defaultPropertiesToUpdate(){return[[Wt.HIGHLIGHT_COLOR,Le._defaultColor],[Wt.HIGHLIGHT_THICKNESS,Le._defaultThickness]]}get propertiesToUpdate(){return[[Wt.HIGHLIGHT_COLOR,this.color||Le._defaultColor],[Wt.HIGHLIGHT_THICKNESS,this.#m||Le._defaultThickness],[Wt.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#E(t){const e=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},n=this.color,a=this.opacity;this.addCommands({cmd:e.bind(this,t,Le._defaultOpacity),undo:e.bind(this,n,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#A(t){const e=this.#m,n=a=>{this.#m=a,this.#x(a)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new Yn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#N())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#N())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#T():t&&(this.#S(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#x(t){this.#d&&(this.#v({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#T(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#S(t=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#n))}static#C([t,e,n,a],o){switch(o){case 90:return[1-e-a,t,a,n];case 180:return[1-t-n,1-e-a,n,a];case 270:return[e,1-t-n,a,n]}return[t,e,n,a]}rotate(t){const{drawLayer:e}=this.parent;let n;this.#d?(t=(t-this.rotation+360)%360,n=Le.#C(this.#l.box,t)):n=Le.#C([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#h,{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:Le.#C(this.#i.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#d?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(this.width,this.height),SR(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#D(t){Le._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#d||this.#R(!1))}get _mustFixPosition(){return!this.#d}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#N(){return this.#d?this.rotation:0}#F(){if(this.#d)return null;const[t,e]=this.pageDimensions,[n,a]=this.pageTranslation,o=this.#s,l=new Float32Array(o.length*8);let c=0;for(const{x:d,y:h,width:p,height:m}of o){const y=d*t+n,x=(1-h)*e+a;l[c]=l[c+4]=y,l[c+1]=l[c+3]=x,l[c+2]=l[c+6]=y+p*t,l[c+5]=l[c+7]=x-m*e,c+=8}return l}#k(t){return this.#l.serialize(t,this.#N())}static startHighlighting(t,e,{target:n,x:a,y:o}){const{x:l,y:c,width:d,height:h}=n.getBoundingClientRect(),p=new AbortController,m=t.combinedSignal(p),y=x=>{p.abort(),this.#B(t,x)};window.addEventListener("blur",y,{signal:m}),window.addEventListener("pointerup",y,{signal:m}),window.addEventListener("pointerdown",Ae,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Zn,{signal:m}),n.addEventListener("pointermove",this.#j.bind(this,t),{signal:m}),this._freeHighlight=new ny({x:a,y:o},[l,c,d,h],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#j(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#B(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,n){let a=null;if(t instanceof $R){const{data:{quadPoints:A,rect:w,rotation:C,id:E,color:T,opacity:R,popupRef:N,richText:D,contentsObj:L,creationDate:k,modificationDate:j},parent:{page:{pageNumber:P}}}=t;a=t={annotationType:Ft.HIGHLIGHT,color:Array.from(T),opacity:R,quadPoints:A,boxes:null,pageIndex:P-1,rect:w.slice(0),rotation:C,annotationElementId:E,id:E,deleted:!1,popupRef:N,richText:D,comment:L?.str||null,creationDate:k,modificationDate:j}}else if(t instanceof Tv){const{data:{inkLists:A,rect:w,rotation:C,id:E,color:T,borderStyle:{rawWidth:R},popupRef:N,richText:D,contentsObj:L,creationDate:k,modificationDate:j},parent:{page:{pageNumber:P}}}=t;a=t={annotationType:Ft.HIGHLIGHT,color:Array.from(T),thickness:R,inkLists:A,boxes:null,pageIndex:P-1,rect:w.slice(0),rotation:C,annotationElementId:E,id:E,deleted:!1,popupRef:N,richText:D,comment:L?.str||null,creationDate:k,modificationDate:j}}const{color:o,quadPoints:l,inkLists:c,opacity:d}=t,h=await super.deserialize(t,e,n);h.color=xt.makeHexColor(...o),h.opacity=d||1,c&&(h.#m=t.thickness),h._initialData=a,t.comment&&h.setCommentData(t);const[p,m]=h.pageDimensions,[y,x]=h.pageTranslation;if(l){const A=h.#s=[];for(let w=0;w<l.length;w+=8)A.push({x:(l[w]-y)/p,y:1-(l[w+1]-x)/m,width:(l[w+2]-l[w])/p,height:(l[w+1]-l[w+5])/m});h.#b(),h.#S(),h.rotate(h.rotation)}else if(c){h.#d=!0;const A=c[0],w={x:A[0]-y,y:m-(A[1]-x)},C=new ny(w,[0,0,p,m],1,h.#m/2,!0,.001);for(let R=0,N=A.length;R<N;R+=2)w.x=A[R]-y,w.y=m-(A[R+1]-x),C.add(w);const{id:E,clipPathId:T}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);h.#v({highlightOutlines:C.getOutlines(),highlightId:E,clipPathId:T}),h.#S(),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=Nt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(t);return Object.assign(n,{color:e,opacity:this.opacity,thickness:this.#m,quadPoints:this.#F(),outlines:this.#k(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#O(n)?null:(n.id=this.annotationElementId,n)}#O(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((n,a)=>n!==e[a])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class YR{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){he("Not implemented")}}class Mt extends Nt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#n=null;static#r=null;static#i=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#h(t,this.parent),this.#u(t.box)}#h(t,e){const{id:n}=e.drawLayer.draw(Mt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[a,o]of Object.entries(e))n.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){he("Not implemented")}static get typesMap(){he("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(Mt.#s.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,a]of this.typesMap)t.push([n,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,a]of this.constructor.typesMap)t.push([n,e[a]]);return t}_updateProperty(t,e,n){const a=this._drawingOptions,o=a[e],l=c=>{a.updateProperty(e,c);const d=this.#t.updateProperty(e,c);d&&this.#u(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Mt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Mt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Mt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#d()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#t,t)}}#g([t,e,n,a]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[e,1-t,n*(l/o),a*(o/l)];case 180:return[1-t,1-e,n,a];case 270:return[1-e,t,n*(l/o),a*(o/l)];default:return[t,e,n,a]}}#p(){const{x:t,y:e,width:n,height:a,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-e,t,n*(o/l),a*(l/o)];case 180:return[1-t,1-e,n,a];case 270:return[e,1-t,n*(o/l),a*(l/o)];default:return[t,e,n,a]}}#u(t){[this.x,this.y,this.width,this.height]=this.#g(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#m(){const{x:t,y:e,width:n,height:a,rotation:o,parentRotation:l,parentDimensions:[c,d]}=this;switch((o*4+l)/90){case 1:return[1-e-a,t,a,n];case 2:return[1-t-n,1-e-a,n,a];case 3:return[e,1-t-n,a,n];case 4:return[t,e-n*(c/d),a*(d/c),n*(c/d)];case 5:return[1-e,t,n*(c/d),a*(d/c)];case 6:return[1-t-a*(d/c),1-e,a*(d/c),n*(c/d)];case 7:return[e-n*(c/d),1-t-a*(d/c),n*(c/d),a*(d/c)];case 8:return[t-n,e-a,n,a];case 9:return[1-e,t-n,a,n];case 10:return[1-t,1-e,n,a];case 11:return[e-a,1-t,a,n];case 12:return[t-a*(d/c),e,a*(d/c),n*(c/d)];case 13:return[1-e-n*(c/d),t-a*(d/c),n*(c/d),a*(d/c)];case 14:return[1-t,1-e-n*(c/d),a*(d/c),n*(c/d)];case 15:return[e,1-t,n*(c/d),a*(d/c)];default:return[t,e,n,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Mt._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const n=super.render();n.classList.add("draw");const a=document.createElement("div");return n.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),n}static createDrawerInstance(t,e,n,a,o){he("Not implemented")}static startDrawing(t,e,n,a){const{target:o,offsetX:l,offsetY:c,pointerId:d,pointerType:h}=a;if(Mt.#a&&Mt.#a!==h)return;const{viewport:{rotation:p}}=t,{width:m,height:y}=o.getBoundingClientRect(),x=Mt.#n=new AbortController,A=t.combinedSignal(x);if(Mt.#i||=d,Mt.#a??=h,window.addEventListener("pointerup",w=>{Mt.#i===w.pointerId?this._endDraw(w):Mt.#o?.delete(w.pointerId)},{signal:A}),window.addEventListener("pointercancel",w=>{Mt.#i===w.pointerId?this._currentParent.endDrawingSession():Mt.#o?.delete(w.pointerId)},{signal:A}),window.addEventListener("pointerdown",w=>{Mt.#a===w.pointerType&&((Mt.#o||=new Set).add(w.pointerId),Mt.#s.isCancellable()&&(Mt.#s.removeLastElement(),Mt.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",Zn,{signal:A}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),o.addEventListener("touchmove",w=>{w.timeStamp===Mt.#c&&Ae(w)},{signal:A}),t.toggleDrawing(),e._editorUndoBar?.hide(),Mt.#s){t.drawLayer.updateProperties(this._currentDrawId,Mt.#s.startNew(l,c,m,y,p));return}e.updateUIForDefaultProperties(this),Mt.#s=this.createDrawerInstance(l,c,m,y,p),Mt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Mt.#r.toSVGProperties(),Mt.#s.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Mt.#c=-1,!Mt.#s)return;const{offsetX:e,offsetY:n,pointerId:a}=t;if(Mt.#i===a){if(Mt.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Mt.#s.add(e,n)),Mt.#c=t.timeStamp,Ae(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Mt.#s=null,Mt.#r=null,Mt.#a=null,Mt.#c=NaN),Mt.#n&&(Mt.#n.abort(),Mt.#n=null,Mt.#i=NaN,Mt.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,Mt.#s.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=Mt.#s,a=this._currentDrawId,o=n.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,n.setLastElement(o))},undo:()=>{e.drawLayer.updateProperties(a,n.removeLastElement())},mustExec:!1,type:Wt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Wt.DRAW_STEP),!Mt.#s.isEmpty()){const{pageDimensions:[n,a],scale:o}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Mt.#s.getOutlines(n*o,a*o,o,this._INNER_MARGIN),drawingOptions:Mt.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,a,o,l){he("Not implemented")}static async deserialize(t,e,n){const{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:c}}=e.viewport,d=this.deserializeDraw(l,c,a,o,this._INNER_MARGIN,t),h=await super.deserialize(t,e,n);return h.createDrawingOptions(t),h.#l({drawOutlines:d}),h.#f(),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[e,n]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#t.serialize([e,n,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class O6{#t=new Float64Array(6);#e;#s;#n;#r;#i;#a="";#o=0;#c=new Xc;#l;#h;constructor(t,e,n,a,o,l){this.#l=n,this.#h=a,this.#n=o,this.#r=l,[t,e]=this.#d(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#i=[t,e],this.#s=[{line:c,points:this.#i}],this.#t.set(c,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#d(t,e){return bt._normalizePoint(t,e,this.#l,this.#h,this.#n)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#i.length<=10}add(t,e){[t,e]=this.#d(t,e);const[n,a,o,l]=this.#t.subarray(2,6),c=t-o,d=e-l;return Math.hypot(this.#l*c,this.#h*d)<=2?null:(this.#i.push(t,e),isNaN(n)?(this.#t.set([o,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,a,o,l,t,e],0),this.#e.push(...bt.createBezierPoints(n,a,o,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,a,o){this.#l=n,this.#h=a,this.#n=o,[t,e]=this.#d(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#i=[t,e];const c=this.#s.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#s.push({line:l,points:this.#i}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(t){return this.#s?(this.#s.push(t),this.#e=t.line,this.#i=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#s)return this.#c.removeLastElement();this.#s.pop(),this.#a="";for(let t=0,e=this.#s.length;t<e;t++){const{line:n,points:a}=this.#s[t];this.#e=n,this.#i=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=bt.svgRound(this.#e[4]),e=bt.svgRound(this.#e[5]);if(this.#i.length===2)return this.#a=`${this.#a} M ${t} ${e} Z`,this.#a;if(this.#i.length<=6){const a=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,a)} M ${t} ${e}`,this.#o=6}if(this.#i.length===4){const a=bt.svgRound(this.#e[10]),o=bt.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${a} ${o}`,this.#o=12,this.#a}const n=[];this.#o===0&&(n.push(`M ${t} ${e}`),this.#o=6);for(let a=this.#o,o=this.#e.length;a<o;a+=6){const[l,c,d,h,p,m]=this.#e.slice(a,a+6).map(bt.svgRound);n.push(`C${l} ${c} ${d} ${h} ${p} ${m}`)}return this.#a+=n.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,e,n,a){const o=this.#s.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#s,t,e,n,this.#n,this.#r,a),this.#t=null,this.#e=null,this.#s=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Xc extends bt{#t;#e=0;#s;#n;#r;#i;#a;#o;#c;build(t,e,n,a,o,l,c){this.#r=e,this.#i=n,this.#a=a,this.#o=o,this.#c=l,this.#s=c??0,this.#n=t,this.#d()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${bt.svgRound(e[4])} ${bt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${bt.svgRound(e[10])} ${bt.svgRound(e[11])}`);continue}for(let n=6,a=e.length;n<a;n+=6){const[o,l,c,d,h,p]=e.subarray(n,n+6).map(bt.svgRound);t.push(`C${o} ${l} ${c} ${d} ${h} ${p}`)}}return t.join("")}serialize([t,e,n,a],o){const l=[],c=[],[d,h,p,m]=this.#h();let y,x,A,w,C,E,T,R,N;switch(this.#o){case 0:N=bt._rescale,y=t,x=e+a,A=n,w=-a,C=t+d*n,E=e+(1-h-m)*a,T=t+(d+p)*n,R=e+(1-h)*a;break;case 90:N=bt._rescaleAndSwap,y=t,x=e,A=n,w=a,C=t+h*n,E=e+d*a,T=t+(h+m)*n,R=e+(d+p)*a;break;case 180:N=bt._rescale,y=t+n,x=e,A=-n,w=a,C=t+(1-d-p)*n,E=e+h*a,T=t+(1-d)*n,R=e+(h+m)*a;break;case 270:N=bt._rescaleAndSwap,y=t+n,x=e+a,A=-n,w=-a,C=t+(1-h-m)*n,E=e+(1-d-p)*a,T=t+(1-h)*n,R=e+(1-d)*a;break}for(const{line:D,points:L}of this.#n)l.push(N(D,y,x,A,w,o?new Array(D.length):null)),c.push(N(L,y,x,A,w,o?new Array(L.length):null));return{lines:l,points:c,rect:[C,E,T,R]}}static deserialize(t,e,n,a,o,{paths:{lines:l,points:c},rotation:d,thickness:h}){const p=[];let m,y,x,A,w;switch(d){case 0:w=bt._rescale,m=-t/n,y=e/a+1,x=1/n,A=-1/a;break;case 90:w=bt._rescaleAndSwap,m=-e/a,y=-t/n,x=1/a,A=1/n;break;case 180:w=bt._rescale,m=t/n+1,y=-e/a,x=-1/n,A=1/a;break;case 270:w=bt._rescaleAndSwap,m=e/a+1,y=t/n+1,x=-1/a,A=-1/n;break}if(!l){l=[];for(const E of c){const T=E.length;if(T===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(T===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const R=new Float32Array(3*(T-2));l.push(R);let[N,D,L,k]=E.subarray(0,4);R.set([NaN,NaN,NaN,NaN,N,D],0);for(let j=4;j<T;j+=2){const P=E[j],U=E[j+1];R.set(bt.createBezierPoints(N,D,L,k,P,U),(j-2)*3),[N,D,L,k]=[L,k,P,U]}}}for(let E=0,T=l.length;E<T;E++)p.push({line:w(l[E].map(R=>R??NaN),m,y,x,A),points:w(c[E].map(R=>R??NaN),m,y,x,A)});const C=new this.prototype.constructor;return C.build(p,n,a,1,d,h,o),C}#l(t=this.#c){const e=this.#s+t/2*this.#a;return this.#o%180===0?[e/this.#r,e/this.#i]:[e/this.#i,e/this.#r]}#h(){const[t,e,n,a]=this.#t,[o,l]=this.#l(0);return[t+o,e+l,n-2*o,a-2*l]}#d(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#n){if(a.length<=12){for(let c=4,d=a.length;c<d;c+=6)xt.pointBoundingBox(a[c],a[c+1],t);continue}let o=a[4],l=a[5];for(let c=6,d=a.length;c<d;c+=6){const[h,p,m,y,x,A]=a.subarray(c,c+6);xt.bezierBoundingBox(o,l,h,p,m,y,x,A,t),o=x,l=A}}const[e,n]=this.#l();t[0]=cn(t[0]-e,0,1),t[1]=cn(t[1]-n,0,1),t[2]=cn(t[2]+e,0,1),t[3]=cn(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,n]=this.#l();this.#c=t;const[a,o]=this.#l(),[l,c]=[a-e,o-n],d=this.#t;return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d}updateParentDimensions([t,e],n){const[a,o]=this.#l();this.#r=t,this.#i=e,this.#a=n;const[l,c]=this.#l(),d=l-a,h=c-o,p=this.#t;return p[0]-=d,p[1]-=h,p[2]+=2*d,p[3]+=2*h,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(bt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${bt.svgRound(t)} ${bt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let n=0,a=0,o=0,l=0,c=0,d=0;switch(this.#e){case 90:a=e/t,o=-t/e,c=t;break;case 180:n=-1,l=-1,c=t,d=e;break;case 270:a=-e/t,o=t/e,d=e;break;default:return""}return`matrix(${n} ${a} ${o} ${l} ${bt.svgRound(c)} ${bt.svgRound(d)})`}getPathResizingSVGProperties([t,e,n,a]){const[o,l]=this.#l(),[c,d,h,p]=this.#t;if(Math.abs(h-o)<=bt.PRECISION||Math.abs(p-l)<=bt.PRECISION){const w=t+n/2-(c+h/2),C=e+a/2-(d+p/2);return{path:{"transform-origin":`${bt.svgRound(t)} ${bt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${w} ${C})`}}}const m=(n-2*o)/(h-2*o),y=(a-2*l)/(p-2*l),x=h/n,A=p/a;return{path:{"transform-origin":`${bt.svgRound(c)} ${bt.svgRound(d)}`,transform:`${this.rotationTransform} scale(${x} ${A}) translate(${bt.svgRound(o)} ${bt.svgRound(l)}) scale(${m} ${y}) translate(${bt.svgRound(-o)} ${bt.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,n,a]){const[o,l]=this.#l(),c=this.#t,[d,h,p,m]=c;if(c[0]=t,c[1]=e,c[2]=n,c[3]=a,Math.abs(p-o)<=bt.PRECISION||Math.abs(m-l)<=bt.PRECISION){const C=t+n/2-(d+p/2),E=e+a/2-(h+m/2);for(const{line:T,points:R}of this.#n)bt._translate(T,C,E,T),bt._translate(R,C,E,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${bt.svgRound(t)} ${bt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(n-2*o)/(p-2*o),x=(a-2*l)/(m-2*l),A=-y*(d+o)+t+o,w=-x*(h+l)+e+l;if(y!==1||x!==1||A!==0||w!==0)for(const{line:C,points:E}of this.#n)bt._rescale(C,A,w,y,x,C),bt._rescale(E,A,w,y,x,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${bt.svgRound(t)} ${bt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],n){const[a,o]=n,l=this.#t,c=t-l[0],d=e-l[1];if(this.#r===a&&this.#i===o)for(const{line:h,points:p}of this.#n)bt._translate(h,c,d,h),bt._translate(p,c,d,p);else{const h=this.#r/a,p=this.#i/o;this.#r=a,this.#i=o;for(const{line:m,points:y}of this.#n)bt._rescale(m,c,d,h,p,m),bt._rescale(y,c,d,h,p,y);l[2]*=h,l[3]*=p}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${bt.svgRound(t)} ${bt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${bt.svgRound(t[0])} ${bt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Ih extends YR{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Nt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Ih(this._viewParameters);return t.updateAll(this),t}}class Nv extends Mt{static _type="ink";static _editorType=Ft.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){Nt.initialize(t,e),this._defaultDrawingOptions=new Ih(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ut(this,"typesMap",new Map([[Wt.INK_THICKNESS,"stroke-width"],[Wt.INK_COLOR,"stroke"],[Wt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,a,o){return new O6(t,e,n,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,a,o,l){return Xc.deserialize(t,e,n,a,o,l)}static async deserialize(t,e,n){let a=null;if(t instanceof Tv){const{data:{inkLists:l,rect:c,rotation:d,id:h,color:p,opacity:m,borderStyle:{rawWidth:y},popupRef:x,richText:A,contentsObj:w,creationDate:C,modificationDate:E},parent:{page:{pageNumber:T}}}=t;a=t={annotationType:Ft.INK,color:Array.from(p),thickness:y,opacity:m,paths:{points:l},boxes:null,pageIndex:T-1,rect:c.slice(0),rotation:d,annotationElementId:h,id:h,deleted:!1,popupRef:x,richText:A,comment:w?.str||null,creationDate:C,modificationDate:E}}const o=await super.deserialize(t,e,n);return o._initialData=a,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new Nc(this),[["colorPicker",this._colorPicker]]}get colorType(){return Wt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:n}){this._drawingOptions=Nv.getDefaultDrawingOptions({stroke:xt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,c=Object.assign(super.serialize(t),{color:Nt._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:e,points:n}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!this.#t(c)?null:(c.id=this.annotationElementId,c)}#t(t){const{color:e,thickness:n,opacity:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==e[c])||t.thickness!==n||t.opacity!==a||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class sy extends Xc{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Md=8,Zl=3;class Ka{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,n,a){return n-=t,a-=e,n===0?a>0?0:4:n===1?a+6:2-a}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,n,a,o,l,c){const d=this.#e(n,a,o,l);for(let h=0;h<8;h++){const p=(-h+d-c+16)%8,m=this.#s[2*p],y=this.#s[2*p+1];if(t[(n+m)*e+(a+y)]!==0)return p}return-1}static#r(t,e,n,a,o,l,c){const d=this.#e(n,a,o,l);for(let h=0;h<8;h++){const p=(h+d+c+16)%8,m=this.#s[2*p],y=this.#s[2*p+1];if(t[(n+m)*e+(a+y)]!==0)return p}return-1}static#i(t,e,n,a){const o=t.length,l=new Int32Array(o);for(let p=0;p<o;p++)l[p]=t[p]<=a?1:0;for(let p=1;p<n-1;p++)l[p*e]=l[p*e+e-1]=0;for(let p=0;p<e;p++)l[p]=l[e*n-1-p]=0;let c=1,d;const h=[];for(let p=1;p<n-1;p++){d=1;for(let m=1;m<e-1;m++){const y=p*e+m,x=l[y];if(x===0)continue;let A=p,w=m;if(x===1&&l[y-1]===0)c+=1,w-=1;else if(x>=1&&l[y+1]===0)c+=1,w+=1,x>1&&(d=x);else{x!==1&&(d=Math.abs(x));continue}const C=[m,p],E=w===m+1,T={isHole:E,points:C,id:c,parent:0};h.push(T);let R;for(const H of h)if(H.id===d){R=H;break}R?R.isHole?T.parent=E?R.parent:d:T.parent=E?d:R.parent:T.parent=E?d:0;const N=this.#n(l,e,p,m,A,w,0);if(N===-1){l[y]=-c,l[y]!==1&&(d=Math.abs(l[y]));continue}let D=this.#s[2*N],L=this.#s[2*N+1];const k=p+D,j=m+L;A=k,w=j;let P=p,U=m;for(;;){const H=this.#r(l,e,P,U,A,w,1);D=this.#s[2*H],L=this.#s[2*H+1];const J=P+D,at=U+L;C.push(at,J);const q=P*e+U;if(l[q+1]===0?l[q]=-c:l[q]===1&&(l[q]=c),J===p&&at===m&&P===k&&U===j){l[y]!==1&&(d=Math.abs(l[y]));break}else A=P,w=U,P=J,U=at}}}return h}static#a(t,e,n,a){if(n-e<=4){for(let k=e;k<n-2;k+=2)a.push(t[k],t[k+1]);return}const o=t[e],l=t[e+1],c=t[n-4]-o,d=t[n-3]-l,h=Math.hypot(c,d),p=c/h,m=d/h,y=p*l-m*o,x=d/c,A=1/h,w=Math.atan(x),C=Math.cos(w),E=Math.sin(w),T=A*(Math.abs(C)+Math.abs(E)),R=A*(1-T+T**2),N=Math.max(Math.atan(Math.abs(E+C)*R),Math.atan(Math.abs(E-C)*R));let D=0,L=e;for(let k=e+2;k<n-2;k+=2){const j=Math.abs(y-p*t[k+1]+m*t[k]);j>D&&(L=k,D=j)}D>(h*N)**2?(this.#a(t,e,L+2,a),this.#a(t,L,n,a)):a.push(o,l)}static#o(t){const e=[],n=t.length;return this.#a(t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}static#c(t,e,n,a,o,l){const c=new Float32Array(l**2),d=-2*a**2,h=l>>1;for(let w=0;w<l;w++){const C=(w-h)**2;for(let E=0;E<l;E++)c[w*l+E]=Math.exp((C+(E-h)**2)/d)}const p=new Float32Array(256),m=-2*o**2;for(let w=0;w<256;w++)p[w]=Math.exp(w**2/m);const y=t.length,x=new Uint8Array(y),A=new Uint32Array(256);for(let w=0;w<n;w++)for(let C=0;C<e;C++){const E=w*e+C,T=t[E];let R=0,N=0;for(let L=0;L<l;L++){const k=w+L-h;if(!(k<0||k>=n))for(let j=0;j<l;j++){const P=C+j-h;if(P<0||P>=e)continue;const U=t[k*e+P],H=c[L*l+j]*p[Math.abs(U-T)];R+=U*H,N+=H}}const D=x[E]=Math.round(R/N);A[D]++}return[x,A]}static#l(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e}static#h(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let a=-1/0,o=1/0;for(let c=0,d=n.length;c<d;c++){const h=n[c]=t[c<<2];a=Math.max(a,h),o=Math.min(o,h)}const l=255/(a-o);for(let c=0,d=n.length;c<d;c++)n[c]=(n[c]-o)*l;return n}static#d(t){let e,n=-1/0,a=-1/0;const o=t.findIndex(d=>d!==0);let l=o,c=o;for(e=o;e<256;e++){const d=t[e];d>n&&(e-l>a&&(a=e-l,c=e-1),n=d,l=e)}for(e=c-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:n,height:a}=t,{maxDim:o}=this.#t;let l=n,c=a;if(n>o||a>o){let y=n,x=a,A=Math.log2(Math.max(n,a)/o);const w=Math.floor(A);A=A===w?w-1:w;for(let E=0;E<A;E++){l=Math.ceil(y/2),c=Math.ceil(x/2);const T=new OffscreenCanvas(l,c);T.getContext("2d").drawImage(t,0,0,y,x,0,0,l,c),y=l,x=c,t!==e&&t.close(),t=T.transferToImageBitmap()}const C=Math.min(o/l,o/c);l=Math.round(l*C),c=Math.round(c*C)}const h=new OffscreenCanvas(l,c).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,l,c),h.filter="grayscale(1)",h.drawImage(t,0,0,t.width,t.height,0,0,l,c);const p=h.getImageData(0,0,l,c).data;return[this.#h(p),l,c]}static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:a},o,l,c,d){let h=new OffscreenCanvas(1,1),p=h.getContext("2d",{alpha:!1});const m=200,y=p.font=`${n} ${a} ${m}px ${e}`,{actualBoundingBoxLeft:x,actualBoundingBoxRight:A,actualBoundingBoxAscent:w,actualBoundingBoxDescent:C,fontBoundingBoxAscent:E,fontBoundingBoxDescent:T,width:R}=p.measureText(t),N=1.5,D=Math.ceil(Math.max(Math.abs(x)+Math.abs(A)||0,R)*N),L=Math.ceil(Math.max(Math.abs(w)+Math.abs(C)||m,Math.abs(E)+Math.abs(T)||m)*N);h=new OffscreenCanvas(D,L),p=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=y,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,D,L),p.fillStyle="black",p.fillText(t,D*(N-1)/2,L*(3-N)/2);const k=this.#h(p.getImageData(0,0,D,L).data),j=this.#l(k),P=this.#d(j),U=this.#i(k,D,L,P);return this.processDrawnLines({lines:{curves:U,width:D,height:L},pageWidth:o,pageHeight:l,rotation:c,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,n,a,o){const[l,c,d]=this.#f(t),[h,p]=this.#c(l,c,d,Math.hypot(c,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),m=this.#d(p),y=this.#i(h,c,d,m);return this.processDrawnLines({lines:{curves:y,width:c,height:d},pageWidth:e,pageHeight:n,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:a,innerMargin:o,mustSmooth:l,areContours:c}){a%180!==0&&([e,n]=[n,e]);const{curves:d,width:h,height:p}=t,m=t.thickness??0,y=[],x=Math.min(e/h,n/p),A=x/e,w=x/n,C=[];for(const{points:T}of d){const R=l?this.#o(T):T;if(!R)continue;C.push(R);const N=R.length,D=new Float32Array(N),L=new Float32Array(3*(N===2?2:N-2));if(y.push({line:L,points:D}),N===2){D[0]=R[0]*A,D[1]=R[1]*w,L.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[k,j,P,U]=R;k*=A,j*=w,P*=A,U*=w,D.set([k,j,P,U],0),L.set([NaN,NaN,NaN,NaN,k,j],0);for(let H=4;H<N;H+=2){const J=D[H]=R[H]*A,at=D[H+1]=R[H+1]*w;L.set(bt.createBezierPoints(k,j,P,U,J,at),(H-2)*3),[k,j,P,U]=[P,U,J,at]}}if(y.length===0)return null;const E=c?new sy:new Xc;return E.build(y,e,n,1,a,c?0:m,o),{outline:E,newCurves:C,areContours:c,thickness:m,width:h,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:a,height:o}){let l=1/0,c=-1/0,d=0;for(const R of t){d+=R.length;for(let N=2,D=R.length;N<D;N++){const L=R[N]-R[N-2];l=Math.min(l,L),c=Math.max(c,L)}}let h;l>=-128&&c<=127?h=Int8Array:l>=-32768&&c<=32767?h=Int16Array:h=Int32Array;const p=t.length,m=Md+Zl*p,y=new Uint32Array(m);let x=0;y[x++]=m*Uint32Array.BYTES_PER_ELEMENT+(d-2*p)*h.BYTES_PER_ELEMENT,y[x++]=0,y[x++]=a,y[x++]=o,y[x++]=e?0:1,y[x++]=Math.max(0,Math.floor(n??0)),y[x++]=p,y[x++]=h.BYTES_PER_ELEMENT;for(const R of t)y[x++]=R.length-2,y[x++]=R[0],y[x++]=R[1];const A=new CompressionStream("deflate-raw"),w=A.writable.getWriter();await w.ready,w.write(y);const C=h.prototype.constructor;for(const R of t){const N=new C(R.length-2);for(let D=2,L=R.length;D<L;D++)N[D-2]=R[D]-R[D-2];w.write(N)}w.close();const E=await new Response(A.readable).arrayBuffer(),T=new Uint8Array(E);return mR(T)}static async decompressSignature(t){try{const e=rV(t),{readable:n,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,c=0;for await(const R of n)l||=new Uint8Array(new Uint32Array(R.buffer,0,4)[0]),l.set(R,c),c+=R.length;const d=new Uint32Array(l.buffer,0,l.length>>2),h=d[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const p=d[2],m=d[3],y=d[4]===0,x=d[5],A=d[6],w=d[7],C=[],E=(Md+Zl*A)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(w){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(l.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(l.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(l.buffer,E);break}c=0;for(let R=0;R<A;R++){const N=d[Zl*R+Md],D=new Float32Array(N+2);C.push(D);for(let L=0;L<Zl-1;L++)D[L]=d[Zl*R+Md+L+1];for(let L=0;L<N;L++)D[L+2]=D[L]+T[c++]}return{areContours:y,thickness:x,outlines:C,width:p,height:m}}catch(e){return Bt(`decompressSignature: ${e}`),null}}}class Dv extends YR{constructor(){super(),super.updateProperties({fill:Nt._defaultLineColor,"stroke-width":0})}clone(){const t=new Dv;return t.updateAll(this),t}}class Mv extends Ih{constructor(t){super(t),super.updateProperties({stroke:Nt._defaultLineColor,"stroke-width":1})}clone(){const t=new Mv(this._viewParameters);return t.updateAll(this),t}}class Us extends Mt{#t=!1;#e=null;#s=null;#n=null;static _type="signature";static _editorType=Ft.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){Nt.initialize(t,e),this._defaultDrawingOptions=new Dv,this._defaultDrawnSignatureOptions=new Mv(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ut(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:a,mustSmooth:o,areContours:l,description:c,uuid:d,heightInPage:h}=this.#s,{rawDims:{pageWidth:p,pageHeight:m},rotation:y}=this.parent.viewport,x=Ka.processDrawnLines({lines:a,pageWidth:p,pageHeight:m,rotation:y,innerMargin:Us._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(x,h,c,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:n,width:a,height:o}=this.#s,l=Math.max(a,o),c=Ka.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:n,width:a,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,n,a){const{x:o,y:l}=this,{outline:c}=this.#s=t;this.#t=c instanceof sy,this.description=n;let d;this.#t?d=Us.getDefaultDrawingOptions():(d=Us._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:d});const[,h]=this.pageDimensions;let p=e/h;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:a}=this.parent.viewport;return Ka.process(t,e,n,a,Us._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:n,pageHeight:a},rotation:o}=this.parent.viewport;return Ka.extractContoursFromText(t,e,n,a,o,Us._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:a}=this.parent.viewport;return Ka.processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:a,innerMargin:Us._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=Us.getDefaultDrawingOptions():(this._drawingOptions=Us._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a});return this.addComment(o),t?(o.paths={lines:e,points:n},o.uuid=this.#n,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,n,a,o,l){return l.areContours?sy.deserialize(t,e,n,a,o,l):Xc.deserialize(t,e,n,a,o,l)}static async deserialize(t,e,n){const a=await super.deserialize(t,e,n);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#n=t.uuid,a}}class P6 extends Nt{#t=null;#e=null;#s=null;#n=null;#r=null;#i="";#a=null;#o=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=Ft.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){Nt.initialize(t,e)}static isHandlingMimeForPasting(t){return uh.includes(t)}static paste(t,e){e.pasteEditor({mode:Ft.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#d(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#i=t.file.name),this.#p()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await n.guess({name:"altText",request:{data:a,width:o,height:l,channels:a.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#d(n,!0)).finally(()=>this.#f());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(n).then(a=>this.#d(a)).finally(()=>this.#f());return}if(this.#r){const n=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(n).then(a=>this.#d(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=uh.join(",");const e=this._uiManager._signal;this.#s=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(a)}n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#s||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:n,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#e=n,a&&(this.#t=a),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#m()},t)}#p(){const{div:t}=this;let{width:e,height:n}=this.#t;const[a,o]=this.pageDimensions,l=.75;if(this.width)e=this.width*a,n=this.height*o;else if(e>l*a||n>l*o){const d=Math.min(l*a/e,l*o/n);e*=d,n*=d}this._uiManager.enableWaiting(!1);const c=this.#a=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=e/a,this.height=n/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,n=!1){t||(t=224);const{width:a,height:o}=this.#t,l=new Rs;let c=this.#t,d=a,h=o,p=null;if(e){if(a>e||o>e){const L=Math.min(e/a,e/o);d=Math.floor(a*L),h=Math.floor(o*L)}p=document.createElement("canvas");const y=p.width=Math.ceil(d*l.sx),x=p.height=Math.ceil(h*l.sy);this.#l||(c=this.#u(y,x));const A=p.getContext("2d");A.filter=this._uiManager.hcmFilter;let w="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":cV.isDarkMode&&(w="#8f8f9d",C="#42414d");const E=15,T=E*l.sx,R=E*l.sy,N=new OffscreenCanvas(T*2,R*2),D=N.getContext("2d");D.fillStyle=w,D.fillRect(0,0,T*2,R*2),D.fillStyle=C,D.fillRect(0,0,T,R),D.fillRect(T,R,T,R),A.fillStyle=A.createPattern(N,"repeat"),A.fillRect(0,0,y,x),A.drawImage(c,0,0,c.width,c.height,0,0,y,x)}let m=null;if(n){let y,x;if(l.symmetric&&c.width<t&&c.height<t)y=c.width,x=c.height;else if(c=this.#t,a>t||o>t){const C=Math.min(t/a,t/o);y=Math.floor(a*C),x=Math.floor(o*C),this.#l||(c=this.#u(y,x))}const w=new OffscreenCanvas(y,x).getContext("2d",{willReadFrequently:!0});w.drawImage(c,0,0,c.width,c.height,0,0,y,x),m={width:y,height:x,data:w.getImageData(0,0,y,x).data}}return{canvas:p,width:d,height:h,imageData:m}}#u(t,e){const{width:n,height:a}=this.#t;let o=n,l=a,c=this.#t;for(;o>2*t||l>2*e;){const d=o,h=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const p=new OffscreenCanvas(o,l);p.getContext("2d").drawImage(c,0,0,d,h,0,0,o,l),c=p.transferToImageBitmap()}return c}#m(){const[t,e]=this.parentDimensions,{width:n,height:a}=this,o=new Rs,l=Math.ceil(n*t*o.sx),c=Math.ceil(a*e*o.sy),d=this.#a;if(!d||d.width===l&&d.height===c)return;d.width=l,d.height=c;const h=this.#l?this.#t:this.#u(l,c),p=d.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(h,0,0,h.width,h.height,0,0,l,c)}#y(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,n]=this.pageDimensions,a=Math.round(this.width*e*hr.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*hr.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(a,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,n){let a=null,o=!1;if(t instanceof GR){const{data:{rect:w,rotation:C,id:E,structParent:T,popupRef:R,richText:N,contentsObj:D,creationDate:L,modificationDate:k},container:j,parent:{page:{pageNumber:P}},canvas:U}=t;let H,J;U?(delete t.canvas,{id:H,bitmap:J}=n.imageManager.getFromCanvas(j.id,U),U.remove()):(o=!0,t._hasNoCanvas=!0);const at=(await e._structTree.getAriaAttributes(`${fv}${E}`))?.get("aria-label")||"";a=t={annotationType:Ft.STAMP,bitmapId:H,bitmap:J,pageIndex:P-1,rect:w.slice(0),rotation:C,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:at},isSvg:!1,structParent:T,popupRef:R,richText:N,comment:D?.str||null,creationDate:L,modificationDate:k}}const l=await super.deserialize(t,e,n),{rect:c,bitmap:d,bitmapUrl:h,bitmapId:p,isSvg:m,accessibilityData:y}=t;o?(n.addMissingCanvas(t.id,l),l.#o=!0):p&&n.imageManager.isValidId(p)?(l.#e=p,d&&(l.#t=d)):l.#n=h,l.#l=m;const[x,A]=l.pageDimensions;return l.width=(c[2]-c[0])/x,l.height=(c[3]-c[1])/A,y&&(l.altTextData=y),l._initialData=a,t.comment&&l.setCommentData(t),l.#h=!!a,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(n),t)return n.bitmapUrl=this.#y(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(n.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=this.#b(n);return c.isSame?null:(c.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(e===null)return n;e.stamps||=new Map;const l=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:n}),n.bitmap=this.#y(!1);else if(this.#l){const c=e.stamps.get(this.#e);l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=this.#y(!1))}return n}#b(t){const{pageIndex:e,accessibilityData:{altText:n}}=this._initialData,a=t.pageIndex===e,o=(t.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Hs{#t;#e=!1;#s=null;#n=null;#r=null;#i=new Map;#a=!1;#o=!1;#c=!1;#l=null;#h=null;#d=null;#f=null;#g=null;#p=-1;#u;static _initialized=!1;static#m=new Map([Ye,Nv,P6,Le,Us].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:a,accessibilityManager:o,annotationLayer:l,drawLayer:c,textLayer:d,viewport:h,l10n:p}){const m=[...Hs.#m.values()];if(!Hs._initialized){Hs._initialized=!0;for(const y of m)y.initialize(p,t)}t.registerEditorTypes(m),this.#u=t,this.pageIndex=e,this.div=n,this.#t=o,this.#s=l,this.viewport=h,this.#d=d,this.drawLayer=c,this._structTree=a,this.#u.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Ft.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#x(),t){case Ft.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ft.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ft.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Ft.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of Hs.#m.values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#d?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#s?.div.classList.toggle("disabled",!t)}get#y(){return this.#i.size!==0?this.#i.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const t=new Set;for(const n of this.#y)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#u.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));const e=this.#s;if(e)for(const n of e.getEditableAnnotations()){if(n.hide(),this.#u.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const a=await this.deserialize(n);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#g){this.#g=new AbortController;const n=this.#u.combinedSignal(this.#g);this.#d.div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:c,timeStamp:d}=a,h=this.#p;if(d-h>500){this.#p=d;return}this.#p=-1;const{classList:p}=this.div;p.toggle("getElements",!0);const m=document.elementsFromPoint(l,c);if(p.toggle("getElements",!1),!this.div.contains(m[0]))return;let y;const x=new RegExp(`^${Ec}[0-9]+$`);for(const w of m)if(x.test(w.id)){y=w.id;break}if(!y)return;const A=this.#i.get(y);A?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),A.dblclick(a))},{signal:n,capture:!0})}const t=this.#s;if(t){const n=new Map,a=new Map;for(const l of this.#y){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(t);continue}if(l.serialize()!==null){n.set(l.annotationElementId,l);continue}else a.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const o=t.getEditableAnnotations();for(const l of o){const{id:c}=l.data;if(this.#u.isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let d=a.get(c);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=n.get(c),d&&(this.#u.addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}this.#x(),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const n of Hs.#m.values())e.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#s?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#b.bind(this),{signal:t}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#b(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#d.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#d.div.contains(e)){const{isMac:n}=Qe.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#u.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),Le.startHighlighting(this,this.#u.direction==="ltr",{target:this.#d.div,x:t.x,y:t.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#i.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#i.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),Nt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of this.#i.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#v(){return Hs.#m.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#E(t){const e=this.#v;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:n,offsetY:a}=this.#A(),o=this.getNextId(),l=this.#E({parent:this,id:o,x:n,y:a,uiManager:this.#u,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await Hs.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,n={}){const a=this.getNextId(),o=this.#E({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#A(){const{x:t,y:e,width:n,height:a}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,e),c=Math.min(window.innerWidth,t+n),d=Math.min(window.innerHeight,e+a),h=(o+c)/2-t,p=(l+d)/2-e,[m,y]=this.viewport.rotation%180===0?[h,p]:[p,h];return{offsetX:m,offsetY:y}}addNewEditor(t={}){this.createAndAddNewEditor(this.#A(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=Qe.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#a||(this.#a=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const n=this.#u.getMode();if(n===Ft.STAMP||n===Ft.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===Ft.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:e}=Qe.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#a=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}const n=this.#u.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#h=null,this.commitOrRemove())},{signal:e}),this.#v.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#h=e);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#v.endDrawing(t)):null}findNewParent(t,e,n){const a=this.#u.findParent(e,n);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#i.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#i.clear(),this.#u.removeLayer(this)}#x(){for(const t of this.#i.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,ba(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#x();const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,ba(this.div,{rotation:n}),e!==n)for(const a of this.#i.values())a.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class We{#t=null;#e=new Map;#s=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Ut(this,"_svgFactory",new Dc)}static#r(t,[e,n,a,o]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*a}%`,l.height=`${100*o}%`}#i(){const t=We._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,e){const n=We._svgFactory.createElement("clipPath");t.append(n);const a=`clip_${e}`;n.setAttribute("id",a),n.setAttribute("clipPathUnits","objectBoundingBox");const o=We._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),a}#o(t,e){for(const[n,a]of Object.entries(e))a===null?t.removeAttribute(n):t.setAttribute(n,a)}draw(t,e=!1,n=!1){const a=We.#n++,o=this.#i(),l=We._svgFactory.createElement("defs");o.append(l);const c=We._svgFactory.createElement("path");l.append(c);const d=`path_p${this.pageIndex}_${a}`;c.setAttribute("id",d),c.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#s.set(a,c);const h=n?this.#a(l,d):null,p=We._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(a,o),{id:a,clipPathId:`url(#${h})`}}drawOutline(t,e){const n=We.#n++,a=this.#i(),o=We._svgFactory.createElement("defs");a.append(o);const l=We._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const m=We._svgFactory.createElement("mask");o.append(m),d=`mask_p${this.pageIndex}_${n}`,m.setAttribute("id",d),m.setAttribute("maskUnits","objectBoundingBox");const y=We._svgFactory.createElement("rect");m.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const x=We._svgFactory.createElement("use");m.append(x),x.setAttribute("href",`#${c}`),x.setAttribute("stroke","none"),x.setAttribute("fill","black"),x.setAttribute("fill-rule","nonzero"),x.classList.add("mask")}const h=We._svgFactory.createElement("use");a.append(h),h.setAttribute("href",`#${c}`),d&&h.setAttribute("mask",`url(#${d})`);const p=h.cloneNode();return a.append(p),h.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(n,a),n}finalizeDraw(t,e){this.#s.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:n,bbox:a,rootClass:o,path:l}=e,c=typeof t=="number"?this.#e.get(t):t;if(c){if(n&&this.#o(c,n),a&&We.#r(c,a),o){const{classList:d}=c;for(const[h,p]of Object.entries(o))d.toggle(h,p)}if(l){const h=c.firstChild.firstChild;this.#o(h,l)}}}updateParent(t,e){if(e===this)return;const n=this.#e.get(t);n&&(e.#t.append(n),this.#e.delete(t),e.#e.set(t,n))}remove(t){this.#s.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#s.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:ey};globalThis.pdfjsLib={AbortException:Ti,AnnotationEditorLayer:Hs,AnnotationEditorParamsType:Wt,AnnotationEditorType:Ft,AnnotationEditorUIManager:Ri,AnnotationLayer:Rv,AnnotationMode:Gs,AnnotationType:ke,applyOpacity:xR,build:zR,ColorPicker:Yn,createValidAbsoluteUrl:uv,CSSConstants:bR,DOMSVGFactory:Dc,DrawLayer:We,FeatureTest:Qe,fetchData:Wo,findContrastColor:wR,getDocument:Sv,getFilenameFromUrl:gR,getPdfFilenameFromUrl:yR,getRGB:Ko,getUuid:hv,getXfaPageViewport:vR,GlobalWorkerOptions:pa,ImageKind:hc,InvalidPDFException:lh,isDataScheme:Hc,isPdfFile:Fh,isValidExplicitDest:ER,MathClamp:cn,noContextMenu:Zn,normalizeUnicode:pR,OPS:Po,OutputScale:Rs,PasswordResponses:hR,PDFDataRangeTransport:Cv,PDFDateString:ch,PDFWorker:Fo,PermissionFlag:dR,PixelsPerInch:hr,RenderingCancelledException:Ph,renderRichText:mv,ResponseException:_c,setLayerDimensions:ba,shadow:Ut,SignatureExtractor:Ka,stopEvent:Ae,SupportedImageMimeTypes:uh,TextLayer:Rc,TouchManager:Gc,updateUrlHash:dv,Util:xt,VerbosityLevel:zc,version:Ev,XfaLayer:pv};const F6=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Ti,AnnotationEditorLayer:Hs,AnnotationEditorParamsType:Wt,AnnotationEditorType:Ft,AnnotationEditorUIManager:Ri,AnnotationLayer:Rv,AnnotationMode:Gs,AnnotationType:ke,CSSConstants:bR,ColorPicker:Yn,DOMSVGFactory:Dc,DrawLayer:We,FeatureTest:Qe,GlobalWorkerOptions:pa,ImageKind:hc,InvalidPDFException:lh,MathClamp:cn,OPS:Po,OutputScale:Rs,PDFDataRangeTransport:Cv,PDFDateString:ch,PDFWorker:Fo,PasswordResponses:hR,PermissionFlag:dR,PixelsPerInch:hr,RenderingCancelledException:Ph,ResponseException:_c,SignatureExtractor:Ka,SupportedImageMimeTypes:uh,TextLayer:Rc,TouchManager:Gc,Util:xt,VerbosityLevel:zc,XfaLayer:pv,applyOpacity:xR,build:zR,createValidAbsoluteUrl:uv,fetchData:Wo,findContrastColor:wR,getDocument:Sv,getFilenameFromUrl:gR,getPdfFilenameFromUrl:yR,getRGB:Ko,getUuid:hv,getXfaPageViewport:vR,isDataScheme:Hc,isPdfFile:Fh,isValidExplicitDest:ER,noContextMenu:Zn,normalizeUnicode:pR,renderRichText:mv,setLayerDimensions:ba,shadow:Ut,stopEvent:Ae,updateUrlHash:dv,version:Ev},Symbol.toStringTag,{value:"Module"}));var OA=Object.prototype.hasOwnProperty;function PA(s,t,e){for(e of s.keys())if(Mo(e,t))return e}function Mo(s,t){var e,n,a;if(s===t)return!0;if(s&&t&&(e=s.constructor)===t.constructor){if(e===Date)return s.getTime()===t.getTime();if(e===RegExp)return s.toString()===t.toString();if(e===Array){if((n=s.length)===t.length)for(;n--&&Mo(s[n],t[n]););return n===-1}if(e===Set){if(s.size!==t.size)return!1;for(n of s)if(a=n,a&&typeof a=="object"&&(a=PA(t,a),!a)||!t.has(a))return!1;return!0}if(e===Map){if(s.size!==t.size)return!1;for(n of s)if(a=n[0],a&&typeof a=="object"&&(a=PA(t,a),!a)||!Mo(n[1],t.get(a)))return!1;return!0}if(e===ArrayBuffer)s=new Uint8Array(s),t=new Uint8Array(t);else if(e===DataView){if((n=s.byteLength)===t.byteLength)for(;n--&&s.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(s)){if((n=s.byteLength)===t.byteLength)for(;n--&&s[n]===t[n];);return n===-1}if(!e||typeof s=="object"){n=0;for(e in s)if(OA.call(s,e)&&++n&&!OA.call(t,e)||!(e in t)||!Mo(s[e],t[e]))return!1;return Object.keys(t).length===n}}return s!==s&&t!==t}function Yc(s){let t=!1;return{promise:new Promise((n,a)=>{s.then(o=>!t&&n(o)).catch(o=>!t&&a(o))}),cancel(){t=!0}}}const B6=["onCopy","onCut","onPaste"],I6=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],z6=["onFocus","onBlur"],U6=["onInput","onInvalid","onReset","onSubmit"],V6=["onLoad","onError"],H6=["onKeyDown","onKeyPress","onKeyUp"],$6=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],G6=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],q6=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],X6=["onSelect"],Y6=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],W6=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],K6=["onScroll"],Q6=["onWheel"],Z6=["onAnimationStart","onAnimationEnd","onAnimationIteration"],J6=["onTransitionEnd"],tH=["onToggle"],eH=["onChange"],nH=[...B6,...I6,...z6,...U6,...V6,...H6,...$6,...G6,...q6,...X6,...Y6,...W6,...K6,...Q6,...Z6,...J6,...eH,...tH];function WR(s,t){const e={};for(const n of nH){const a=s[n];a&&(t?e[n]=(o=>a(o,t(n))):e[n]=a)}return e}var sH="Invariant failed";function de(s,t){if(!s)throw new Error(sH)}var ng,FA;function iH(){if(FA)return ng;FA=1;var s=function(){};return ng=s,ng}var aH=iH();const hn=ry(aH),KR=S.createContext(null),rH="noopener noreferrer nofollow";class oH{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return de(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){de(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||rH,t.target=n?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{de(this.pdfDocument),de(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{de(Array.isArray(e));const n=e[0];new Promise(a=>{de(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(o=>{a(o)}).catch(()=>{de(!1)}):typeof n=="number"?a(n):de(!1)}).then(a=>{const o=a+1;de(this.pdfViewer),de(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:a,pageNumber:o})})})}goToPage(t){const e=t-1;de(this.pdfViewer),de(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function ko({children:s,type:t}){return g.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:s})}const BA={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function lH(s,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return s}}function Bo(){return S.useReducer(lH,{value:void 0,error:void 0})}const zh=typeof window<"u",QR=zh&&window.location.protocol==="file:";function cH(s){return typeof s<"u"}function qa(s){return cH(s)&&s!==null}function uH(s){return typeof s=="string"}function dH(s){return s instanceof ArrayBuffer}function hH(s){return de(zh),s instanceof Blob}function iy(s){return uH(s)&&/^data:/.test(s)}function IA(s){de(iy(s));const[t="",e=""]=s.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function fH(){return zh&&window.devicePixelRatio||1}const ZR="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function zA(){hn(!QR,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${ZR}`)}function pH(){hn(!QR,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${ZR}`)}function pr(s){s?.cancel&&s.cancel()}function ay(s,t){return Object.defineProperty(s,"width",{get(){return this.getViewport({scale:t}).width},configurable:!0}),Object.defineProperty(s,"height",{get(){return this.getViewport({scale:t}).height},configurable:!0}),Object.defineProperty(s,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(s,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),s}function JR(s){return s.name==="AbortException"||s.name==="RenderingCancelledException"}function mH(s){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=a=>{if(!a.target)return e(new Error("Error while reading a file."));const{error:o}=a.target;if(!o)return e(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(s)})}const{PDFDataRangeTransport:gH}=F6,yH=(s,t)=>{switch(t){case BA.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");s(e);break}case BA.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");s(e);break}}};function UA(s){return typeof s=="object"&&s!==null&&("data"in s||"range"in s||"url"in s)}const vH=S.forwardRef(function({children:t,className:e,error:n="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:c,imageResourcesPath:d,loading:h="Loading PDF",noData:p="No PDF file specified.",onItemClick:m,onLoadError:y,onLoadProgress:x,onLoadSuccess:A,onPassword:w=yH,onSourceError:C,onSourceSuccess:E,options:T,renderMode:R,rotate:N,scale:D,...L},k){const[j,P]=Bo(),{value:U,error:H}=j,[J,at]=Bo(),{value:q,error:rt}=J,O=S.useRef(new oH),B=S.useRef([]),I=S.useRef(void 0),Y=S.useRef(void 0);l&&l!==I.current&&UA(l)&&(hn(!Mo(l,I.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),I.current=l),T&&T!==Y.current&&(hn(!Mo(T,Y.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Y.current=T);const ft=S.useRef({scrollPageIntoView:ht=>{const{dest:pt,pageNumber:Z,pageIndex:dt=Z-1}=ht;if(m){m({dest:pt,pageIndex:dt,pageNumber:Z});return}const _t=B.current[dt];if(_t){_t.scrollIntoView();return}hn(!1,`An internal link leading to page ${Z} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});S.useImperativeHandle(k,()=>({linkService:O,pages:B,viewer:ft}),[]);function F(){E&&E()}function G(){H&&(hn(!1,H.toString()),C&&C(H))}function tt(){P({type:"RESET"})}S.useEffect(tt,[l,P]);const lt=S.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return iy(l)?{data:IA(l)}:(zA(),{url:l});if(l instanceof gH)return{range:l};if(dH(l))return{data:l};if(zh&&hH(l))return{data:await mH(l)};if(de(typeof l=="object"),de(UA(l)),"url"in l&&typeof l.url=="string"){if(iy(l.url)){const{url:ht,...pt}=l;return{data:IA(ht),...pt}}zA()}return l},[l]);S.useEffect(()=>{const ht=Yc(lt());return ht.promise.then(pt=>{P({type:"RESOLVE",value:pt})}).catch(pt=>{P({type:"REJECT",error:pt})}),()=>{pr(ht)}},[lt,P]),S.useEffect(()=>{if(!(typeof U>"u")){if(U===!1){G();return}F()}},[U]);function mt(){q&&(A&&A(q),B.current=new Array(q.numPages),O.current.setDocument(q))}function st(){rt&&(hn(!1,rt.toString()),y&&y(rt))}S.useEffect(function(){at({type:"RESET"})},[at,U]),S.useEffect(function(){if(!U)return;const pt=T?{...U,...T}:U,Z=Sv(pt);x&&(Z.onProgress=x),w&&(Z.onPassword=w);const dt=Z;return dt.promise.then(_t=>{dt.destroyed||at({type:"RESOLVE",value:_t})}).catch(_t=>{dt.destroyed||at({type:"REJECT",error:_t})}),()=>{dt.destroy()}},[T,at,U]),S.useEffect(()=>{if(!(typeof q>"u")){if(q===!1){st();return}mt()}},[q]),S.useEffect(function(){O.current.setViewer(ft.current),O.current.setExternalLinkRel(a),O.current.setExternalLinkTarget(o)},[a,o]);const et=S.useCallback((ht,pt)=>{B.current[ht]=pt},[]),yt=S.useCallback(ht=>{delete B.current[ht]},[]),vt=S.useMemo(()=>({imageResourcesPath:d,linkService:O.current,onItemClick:m,pdf:q,registerPage:et,renderMode:R,rotate:N,scale:D,unregisterPage:yt}),[d,m,q,et,R,N,D,yt]),Tt=S.useMemo(()=>WR(L,()=>q),[L,q]);function X(){function ht(Z){return!!Z?.pdf}if(!ht(vt))throw new Error("pdf is undefined");const pt=typeof t=="function"?t(vt):t;return g.jsx(KR.Provider,{value:vt,children:pt})}function ut(){return l?q==null?g.jsx(ko,{type:"loading",children:typeof h=="function"?h():h}):q===!1?g.jsx(ko,{type:"error",children:typeof n=="function"?n():n}):X():g.jsx(ko,{type:"no-data",children:typeof p=="function"?p():p})}return g.jsx("div",{className:Ho("react-pdf__Document",e),ref:c,...Tt,children:ut()})});function t2(){return S.useContext(KR)}function e2(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];var e=s.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(o){for(var l=0,c=e;l<c.length;l++){var d=c[l];typeof d=="function"?d(o):d&&(d.current=o)}}}const n2=S.createContext(null);function Uh(){return S.useContext(n2)}function bH(){const s=t2(),t=Uh();de(t);const e={...s,...t},{filterAnnotations:n,imageResourcesPath:a,linkService:o,onGetAnnotationsError:l,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:d,onRenderAnnotationLayerSuccess:h,page:p,pdf:m,renderForms:y,rotate:x,scale:A=1}=e;de(m),de(p),de(o);const[w,C]=Bo(),{value:E,error:T}=w,R=S.useRef(null);hn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function N(){E&&c&&c(E)}function D(){T&&(hn(!1,T.toString()),l&&l(T))}S.useEffect(function(){C({type:"RESET"})},[C,p]),S.useEffect(function(){if(!p)return;const U=Yc(p.getAnnotations()),H=U;return U.promise.then(J=>{C({type:"RESOLVE",value:J})}).catch(J=>{C({type:"REJECT",error:J})}),()=>{pr(H)}},[C,p]),S.useEffect(()=>{if(E!==void 0){if(E===!1){D();return}N()}},[E]);function L(){h&&h()}function k(P){hn(!1,`${P}`),d&&d(P)}const j=S.useMemo(()=>p.getViewport({scale:A,rotation:x}),[p,x,A]);return S.useEffect(function(){if(!m||!p||!o||!E)return;const{current:U}=R;if(!U)return;const H=j.clone({dontFlip:!0}),J={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:m.annotationStorage,commentManager:null,div:U,l10n:null,linkService:o,page:p,structTreeLayer:null,viewport:H},at={annotations:n?n({annotations:E}):E,annotationStorage:m.annotationStorage,div:U,imageResourcesPath:a,linkService:o,page:p,renderForms:y,viewport:H};U.innerHTML="";try{new Rv(J).render(at),L()}catch(q){k(q)}return()=>{}},[E,n,a,o,p,m,y,j]),g.jsx("div",{className:Ho("react-pdf__Page__annotations","annotationLayer"),ref:R})}const s2={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},xH=/^H(\d+)$/;function wH(s){return s in s2}function Vh(s){return"children"in s}function i2(s){return Vh(s)?s.children.length===1&&0 in s.children&&"id"in s.children[0]:!1}function SH(s){const t={};if(Vh(s)){const{role:e}=s,n=e.match(xH);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(wH(e)){const a=s2[e];a&&(t.role=a)}}return t}function a2(s){const t={};if(Vh(s)){if(s.alt!==void 0&&(t["aria-label"]=s.alt),s.lang!==void 0&&(t.lang=s.lang),i2(s)){const[e]=s.children;if(e){const n=a2(e);return{...t,...n}}}}else"id"in s&&(t["aria-owns"]=s.id);return t}function AH(s){return s?{...SH(s),...a2(s)}:null}function r2({className:s,node:t}){const e=S.useMemo(()=>AH(t),[t]),n=S.useMemo(()=>!Vh(t)||i2(t)?null:t.children.map((a,o)=>g.jsx(r2,{node:a},o)),[t]);return g.jsx("span",{className:s,...e,children:n})}function CH(){const s=Uh();de(s);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=s,[n,a]=Bo(),{value:o,error:l}=n,{customTextRenderer:c,page:d}=s;function h(){o&&e&&e(o)}function p(){l&&(hn(!1,l.toString()),t&&t(l))}return S.useEffect(function(){a({type:"RESET"})},[a,d]),S.useEffect(function(){if(c||!d)return;const y=Yc(d.getStructTree()),x=y;return y.promise.then(A=>{a({type:"RESOLVE",value:A})}).catch(A=>{a({type:"REJECT",error:A})}),()=>pr(x)},[c,d,a]),S.useEffect(()=>{if(o!==void 0){if(o===!1){p();return}h()}},[o]),o?g.jsx(r2,{className:"react-pdf__Page__structTree structTree",node:o}):null}const VA=Gs;function EH(s){const t=Uh();de(t);const e={...t,...s},{_className:n,canvasBackground:a,devicePixelRatio:o=fH(),onRenderError:l,onRenderSuccess:c,page:d,renderForms:h,renderTextLayer:p,rotate:m,scale:y}=e,{canvasRef:x}=s;de(d);const A=S.useRef(null);function w(){d&&c&&c(ay(d,y))}function C(N){JR(N)||(hn(!1,N.toString()),l&&l(N))}const E=S.useMemo(()=>d.getViewport({scale:y*o,rotation:m}),[o,d,m,y]),T=S.useMemo(()=>d.getViewport({scale:y,rotation:m}),[d,m,y]);S.useEffect(function(){if(!d)return;d.cleanup();const{current:D}=A;if(!D)return;D.width=E.width,D.height=E.height,D.style.width=`${Math.floor(T.width)}px`,D.style.height=`${Math.floor(T.height)}px`,D.style.visibility="hidden";const L={annotationMode:h?VA.ENABLE_FORMS:VA.ENABLE,canvas:D,canvasContext:D.getContext("2d",{alpha:!1}),viewport:E};a&&(L.background=a);const k=d.render(L),j=k;return k.promise.then(()=>{D.style.visibility="",w()}).catch(C),()=>pr(j)},[a,d,h,E,T]);const R=S.useCallback(()=>{const{current:N}=A;N&&(N.width=0,N.height=0)},[]);return S.useEffect(()=>R,[R]),g.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:e2(x,A),style:{display:"block",userSelect:"none"},children:p?g.jsx(CH,{}):null})}function _H(s){return"str"in s}function TH(){const s=Uh();de(s);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:a,onRenderTextLayerSuccess:o,page:l,pageIndex:c,pageNumber:d,rotate:h,scale:p}=s;de(l);const[m,y]=Bo(),{value:x,error:A}=m,w=S.useRef(null);hn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function C(){x&&n&&n(x)}function E(){A&&(hn(!1,A.toString()),e&&e(A))}S.useEffect(function(){y({type:"RESET"})},[l,y]),S.useEffect(function(){if(!l)return;const j=Yc(l.getTextContent()),P=j;return j.promise.then(U=>{y({type:"RESOLVE",value:U})}).catch(U=>{y({type:"REJECT",error:U})}),()=>pr(P)},[l,y]),S.useEffect(()=>{if(x!==void 0){if(x===!1){E();return}C()}},[x]);const T=S.useCallback(()=>{o&&o()},[o]),R=S.useCallback(k=>{JR(k)||(hn(!1,k.toString()),a&&a(k))},[a]);function N(){const k=w.current;k&&k.classList.add("selecting")}function D(){const k=w.current;k&&k.classList.remove("selecting")}const L=S.useMemo(()=>l.getViewport({scale:p,rotation:h}),[l,h,p]);return S.useLayoutEffect(function(){if(!l||!x)return;const{current:j}=w;if(!j)return;j.innerHTML="";const P=l.streamTextContent({includeMarkedContent:!0}),U={container:j,textContentSource:P,viewport:L},H=new Rc(U),J=H;return H.render().then(()=>{const at=document.createElement("div");at.className="endOfContent",j.append(at);const q=j.querySelectorAll('[role="presentation"]');if(t){let rt=0;x.items.forEach((O,B)=>{if(!_H(O))return;const I=q[rt];if(!I)return;const Y=t({pageIndex:c,pageNumber:d,itemIndex:B,...O});I.innerHTML=Y,rt+=O.str&&O.hasEOL?2:1})}T()}).catch(R),()=>pr(J)},[t,R,T,l,c,d,x,L]),g.jsx("div",{className:Ho("react-pdf__Page__textContent","textLayer"),onMouseUp:D,onMouseDown:N,ref:w})}const HA=1;function RH(s){const e={...t2(),...s},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:a=!0,canvasBackground:o,canvasRef:l,children:c,className:d,customRenderer:h,customTextRenderer:p,devicePixelRatio:m,error:y="Failed to load the page.",filterAnnotations:x,height:A,inputRef:w,loading:C="Loading page",noData:E="No page specified.",onGetAnnotationsError:T,onGetAnnotationsSuccess:R,onGetStructTreeError:N,onGetStructTreeSuccess:D,onGetTextError:L,onGetTextSuccess:k,onLoadError:j,onLoadSuccess:P,onRenderAnnotationLayerError:U,onRenderAnnotationLayerSuccess:H,onRenderError:J,onRenderSuccess:at,onRenderTextLayerError:q,onRenderTextLayerSuccess:rt,pageIndex:O,pageNumber:B,pdf:I,registerPage:Y,renderAnnotationLayer:ft=!0,renderForms:F=!1,renderMode:G="canvas",renderTextLayer:tt=!0,rotate:lt,scale:mt=HA,unregisterPage:st,width:et,...yt}=e,[vt,Tt]=Bo(),{value:X,error:ut}=vt,ht=S.useRef(null);de(I);const pt=qa(B)?B-1:O??null,Z=B??(qa(O)?O+1:null),dt=lt??(X?X.rotate:null),_t=S.useMemo(()=>{if(!X)return null;let mn=1;const Ms=mt??HA;if(et||A){const on=X.getViewport({scale:1,rotation:dt});et?mn=et/on.width:A&&(mn=A/on.height)}return Ms*mn},[A,X,dt,mt,et]);S.useEffect(function(){return()=>{qa(pt)&&a&&st&&st(pt)}},[a,I,pt,st]);function Lt(){if(P){if(!X||!_t)return;P(ay(X,_t))}if(a&&Y){if(!qa(pt)||!ht.current)return;Y(pt,ht.current)}}function qt(){ut&&(hn(!1,ut.toString()),j&&j(ut))}S.useEffect(function(){Tt({type:"RESET"})},[Tt,I,pt]),S.useEffect(function(){if(!I||!Z)return;const Ms=Yc(I.getPage(Z)),on=Ms;return Ms.promise.then(Di=>{Tt({type:"RESOLVE",value:Di})}).catch(Di=>{Tt({type:"REJECT",error:Di})}),()=>pr(on)},[Tt,I,Z]),S.useEffect(()=>{if(X!==void 0){if(X===!1){qt();return}Lt()}},[X,_t]);const te=S.useMemo(()=>qa(pt)&&Z&&qa(dt)&&qa(_t)?{_className:n,canvasBackground:o,customTextRenderer:p,devicePixelRatio:m,filterAnnotations:x,onGetAnnotationsError:T,onGetAnnotationsSuccess:R,onGetStructTreeError:N,onGetStructTreeSuccess:D,onGetTextError:L,onGetTextSuccess:k,onRenderAnnotationLayerError:U,onRenderAnnotationLayerSuccess:H,onRenderError:J,onRenderSuccess:at,onRenderTextLayerError:q,onRenderTextLayerSuccess:rt,page:X,pageIndex:pt,pageNumber:Z,renderForms:F,renderTextLayer:tt,rotate:dt,scale:_t}:null,[n,o,p,m,x,T,R,N,D,L,k,U,H,J,at,q,rt,X,pt,Z,F,tt,dt,_t]),Bn=S.useMemo(()=>WR(yt,()=>X&&(_t?ay(X,_t):void 0)),[yt,X,_t]),Jn=`${pt}@${_t}/${dt}`;function Ca(){switch(G){case"custom":return de(h),g.jsx(h,{},`${Jn}_custom`);case"none":return null;default:return g.jsx(EH,{canvasRef:l},`${Jn}_canvas`)}}function Ge(){return tt?g.jsx(TH,{},`${Jn}_text`):null}function Qo(){return ft?g.jsx(bH,{},`${Jn}_annotations`):null}function Js(){function mn(on){return!!on?.page}if(!mn(te))throw new Error("page is undefined");const Ms=typeof c=="function"?c(te):c;return g.jsxs(n2.Provider,{value:te,children:[Ca(),Ge(),Qo(),Ms]})}function vr(){return Z?I===null||X===void 0||X===null?g.jsx(ko,{type:"loading",children:typeof C=="function"?C():C}):I===!1||X===!1?g.jsx(ko,{type:"error",children:typeof y=="function"?y():y}):Js():g.jsx(ko,{type:"no-data",children:typeof E=="function"?E():E})}return g.jsx("div",{className:Ho(n,d),"data-page-number":Z,ref:e2(w,ht),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${_t}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Bn,children:vr()})}pH();pa.workerSrc="pdf.worker.mjs";pa.workerSrc=`//unpkg.com/pdfjs-dist@${Ev}/build/pdf.worker.min.mjs`;const $A=[{value:"top-left",label:"-"},{value:"top-center",label:"-"},{value:"top-right",label:"-"},{value:"center",label:""},{value:"bottom-left",label:"-"},{value:"bottom-center",label:"-"},{value:"bottom-right",label:"-"},{value:"custom",label:""}];function NH({documentName:s,pdfUrl:t,onClose:e,onStampApplied:n}){const[a,o]=S.useState([]),[l,c]=S.useState(null),[d,h]=S.useState(1),[p,m]=S.useState(""),[y,x]=S.useState("bottom-right"),A=.15,[w,C]=S.useState([]),[E,T]=S.useState(!0),[R,N]=S.useState(!1),[D,L]=S.useState({x:50,y:50}),[k,j]=S.useState(!1),[P,U]=S.useState({x:0,y:0}),[H,J]=S.useState(null),[at,q]=S.useState({}),[rt,O]=S.useState({}),B=S.useRef(null),I=S.useRef(null),[Y,ft]=S.useState({width:0,height:0}),F=X=>{if(!X)return console.warn("getFullImageUrl: empty imageUrl"),"";if(X.startsWith("http://")||X.startsWith("https://"))return console.log("getFullImageUrl: already full URL:",X),X;if(X.includes(window.location.origin))return console.log("getFullImageUrl: URL contains origin:",X),X;if(X.startsWith("/api/")){const ht=`${window.location.origin}${X}`;return console.log("getFullImageUrl: API endpoint:",ht),ht}const ut=`${window.location.origin}${X.startsWith("/")?"":"/"}${X}`;return console.log("getFullImageUrl: constructed URL:",ut,"from:",X),ut};S.useEffect(()=>{async function X(){try{const[ut,ht]=await Promise.all([kt.getStamps(),kt.getPdfInfo(s)]);console.log("Loaded stamps:",ut),ut.forEach((dt,_t)=>{const Lt=dt.stamp_image?F(dt.stamp_image):"NO URL";console.log(`Stamp ${_t+1} (${dt.name}):`,{title:dt.title,stamp_image:dt.stamp_image,fullUrl:Lt})}),o(ut),c(ht);const pt={},Z={};if(await Promise.all(ut.map(async dt=>{if(dt.stamp_image){try{const Lt=await kt.getStampPreview(dt.name,s);Z[dt.name]=Lt}catch(Lt){console.warn(`Failed to load preview for stamp ${dt.name}:`,Lt),Z[dt.name]=F(dt.stamp_image)}const _t=Z[dt.name]||F(dt.stamp_image);try{const Lt=new Image;await new Promise((qt,te)=>{Lt.onload=()=>{pt[dt.stamp_image]={width:Lt.width,height:Lt.height},qt(null)},Lt.onerror=te,Lt.src=_t})}catch(Lt){console.warn(`Failed to load image dimensions for stamp ${dt.name}:`,Lt),pt[dt.stamp_image]={width:150,height:50}}}})),q(pt),O(Z),ut.length>0){m(ut[0].name);const dt=ut[0];if(console.log("Selected first stamp:",dt),dt.stamp_image){const _t=F(dt.stamp_image);console.log("First stamp image URL:",{original:dt.stamp_image,full:_t})}else console.warn("First stamp has no stamp_image!")}}catch(ut){console.error("Failed to load data:",ut)}finally{T(!1)}}X()},[s]);const G=S.useCallback(({width:X,height:ut})=>{ft({width:X,height:ut})},[]),tt=()=>{if(!p)return;const X=a.find(Z=>Z.name===p);if(!X)return;let ut,ht;if(y==="custom")if(H&&l?.pages[d-1]){const Z=l.pages[d-1],dt=Y.width/Z.width,_t=Y.height/Z.height;ut=H.x/dt,ht=(Y.height-H.y)/_t}else D.x&&D.y&&(ut=D.x,ht=D.y);const pt={id:`stamp-${Date.now()}`,stamp_name:p,stamp_title:X.title,stamp_image:X.stamp_image,page_number:d-1,position:y,scale:A,x:ut,y:ht};if(C([...w,pt]),y==="custom"&&Y.width&&Y.height){const Z=l?.pages[d-1];if(Z){const dt=Y.width/2,_t=Y.height/2;J({x:dt,y:_t}),L({x:Z.width/2,y:Z.height/2})}}else J(null)},lt=X=>{C(w.filter(ut=>ut.id!==X))},mt=async()=>{if(w.length!==0){N(!0);try{const X=w.map(ht=>({stamp_name:ht.stamp_name,page_number:ht.page_number,position:ht.position,x:ht.x,y:ht.y,scale:ht.scale}));console.log("Applying stamps:",X);const ut=await kt.applyStamps(s,X);if(console.log("Apply stamps result:",ut),ut&&ut.success)n();else{const ht=ut?.message||"   ";alert(ht),console.error("Failed to apply stamps:",ut)}}catch(X){const ut=X?.message||"    ";alert(ut),console.error("Failed to apply stamps:",X)}finally{N(!1)}}},st=X=>{if(y!=="custom"||!B.current||!p||X.target.closest(".stamp-preview-draggable"))return;const ut=B.current.getBoundingClientRect(),ht=X.clientX-ut.left,pt=X.clientY-ut.top;J({x:ht,y:pt});const Z=l?.pages[d-1];if(Z){const dt=Y.width/Z.width,_t=Y.height/Z.height,Lt=ht/dt,qt=(Y.height-pt)/_t;L({x:Lt,y:qt})}else{const dt=ht/ut.width*595,_t=(ut.height-pt)/ut.height*842;L({x:dt,y:_t})}},et=X=>{if(y!=="custom"||!p||!I.current)return;X.preventDefault(),j(!0);const ut=I.current.getBoundingClientRect();U({x:X.clientX-ut.left-ut.width/2,y:X.clientY-ut.top-ut.height/2})};S.useEffect(()=>{if(y==="custom"&&p&&B.current&&Y.width&&Y.height){const X=l?.pages[d-1];if(X&&D.x&&D.y){const ut=Y.width/X.width,ht=Y.height/X.height,pt=D.x*ut,Z=Y.height-D.y*ht;J({x:pt,y:Z})}else H||J({x:Y.width/2,y:Y.height/2})}else y!=="custom"&&J(null)},[y,p,D,d,Y,l]),S.useEffect(()=>{if(y==="custom"&&p&&Y.width&&Y.height){H||J({x:Y.width/2,y:Y.height/2});const X=l?.pages[d-1];X&&(!D.x||!D.y)&&L({x:X.width/2,y:X.height/2})}},[y,p,Y,l,d]),S.useEffect(()=>{if(k){const X=ht=>{if(!B.current)return;const pt=B.current.getBoundingClientRect(),Z=ht.clientX-pt.left-P.x,dt=ht.clientY-pt.top-P.y,_t=Math.max(0,Math.min(Z,pt.width)),Lt=Math.max(0,Math.min(dt,pt.height));J({x:_t,y:Lt});const qt=l?.pages[d-1];if(qt){const te=Y.width/qt.width,Bn=Y.height/qt.height,Jn=_t/te,Ca=(Y.height-Lt)/Bn;L({x:Jn,y:Ca})}},ut=()=>{j(!1)};return window.addEventListener("mousemove",X),window.addEventListener("mouseup",ut),()=>{window.removeEventListener("mousemove",X),window.removeEventListener("mouseup",ut)}}},[k,P,Y,l,d]);const yt=w.filter(X=>X.page_number===d-1),vt=X=>{if(!Y.width||!Y.height)return{};const ut=l?.pages[X.page_number];if(!ut)return{};const ht=Y.width/ut.width,pt=Y.height/ut.height,Z=at[X.stamp_image]||{width:150,height:50},dt=Z.width*X.scale*ht,_t=Z.height*X.scale*pt,Lt=20*ht;let qt=0,te=0;switch(X.position){case"top-left":qt=Lt,te=Lt;break;case"top-center":qt=(Y.width-dt)/2,te=Lt;break;case"top-right":qt=Y.width-dt-Lt,te=Lt;break;case"center":qt=(Y.width-dt)/2,te=(Y.height-_t)/2;break;case"bottom-left":qt=Lt,te=Y.height-_t-Lt;break;case"bottom-center":qt=(Y.width-dt)/2,te=Y.height-_t-Lt;break;case"bottom-right":qt=Y.width-dt-Lt,te=Y.height-_t-Lt;break;case"custom":if(X.x!==void 0&&X.y!==void 0){const Bn=X.x*ht,Jn=Y.height-X.y*pt;qt=Bn-dt/2,te=Jn-_t/2}break}return{left:`${qt}px`,top:`${te}px`,width:`${dt}px`,height:`${_t}px`}},Tt=()=>{if(!p||!Y.width||!Y.height)return null;const X=l?.pages[d-1];if(!X)return null;const ut=Y.width/X.width,ht=Y.height/X.height,pt=a.find(Bn=>Bn.name===p),Z=pt?.stamp_image?at[pt.stamp_image]||{width:150,height:50}:{width:150,height:50},dt=Z.width*A*ut,_t=Z.height*A*ht,Lt=20*ut;let qt=0,te=0;switch(y){case"top-left":qt=Lt,te=Lt;break;case"top-center":qt=(Y.width-dt)/2,te=Lt;break;case"top-right":qt=Y.width-dt-Lt,te=Lt;break;case"center":qt=(Y.width-dt)/2,te=(Y.height-_t)/2;break;case"bottom-left":qt=Lt,te=Y.height-_t-Lt;break;case"bottom-center":qt=(Y.width-dt)/2,te=Y.height-_t-Lt;break;case"bottom-right":qt=Y.width-dt-Lt,te=Y.height-_t-Lt;break;case"custom":return H?{left:`${H.x}px`,top:`${H.y}px`,width:`${dt}px`,height:`${_t}px`,transform:"translate(-50%, -50%)"}:null}return{left:`${qt}px`,top:`${te}px`,width:`${dt}px`,height:`${_t}px`}};return E?g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg p-8",children:[g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),g.jsx("p",{className:"mt-4 text-gray-600",children:"..."})]})}):g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] flex flex-col",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[g.jsx("h2",{className:"text-xl font-semibold",children:"   PDF"}),g.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full",children:g.jsx(ha,{className:"w-5 h-5"})})]}),g.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[g.jsxs("div",{className:"flex-1 p-4 overflow-auto bg-gray-100",children:[g.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[g.jsx(Ht,{variant:"outline",size:"sm",onClick:()=>h(X=>Math.max(1,X-1)),disabled:d<=1,children:g.jsx(IB,{className:"w-4 h-4"})}),g.jsxs("span",{className:"text-sm",children:[" ",d,"  ",l?.page_count||1]}),g.jsx(Ht,{variant:"outline",size:"sm",onClick:()=>h(X=>Math.min(l?.page_count||1,X+1)),disabled:d>=(l?.page_count||1),children:g.jsx(UB,{className:"w-4 h-4"})})]}),g.jsxs("div",{ref:B,className:"relative inline-block mx-auto cursor-crosshair",onClick:st,style:{userSelect:"none"},children:[g.jsx(vH,{file:t,loading:g.jsx("div",{className:"p-8 text-center",children:" PDF..."}),children:g.jsx(RH,{pageNumber:d,width:500,onLoadSuccess:G,renderTextLayer:!1,renderAnnotationLayer:!1})}),yt.map(X=>g.jsx("div",{className:"absolute pointer-events-none border-2 border-dashed border-blue-500 bg-blue-100/30 z-10",style:vt(X),children:g.jsx("img",{src:rt[X.stamp_name]||F(X.stamp_image),alt:X.stamp_title,className:"w-full h-full object-contain opacity-70"})},X.id)),p&&Tt()&&g.jsxs("div",{className:`absolute pointer-events-none border-2 border-dashed border-green-500 bg-green-100/30 z-20 ${y==="custom"?"stamp-preview-draggable cursor-move bg-yellow-50/90 rounded shadow-lg pointer-events-auto":""}`,style:Tt(),ref:y==="custom"?I:void 0,onMouseDown:y==="custom"?et:void 0,children:[y==="custom"&&g.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap pointer-events-none z-20",children:"   "}),(()=>{const X=a.find(ht=>ht.name===p);if(!X||!X.stamp_image)return g.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"  "});const ut=rt[X.name]||F(X.stamp_image);return g.jsx("img",{src:ut,alt:"Preview",className:`w-full h-full object-contain ${y==="custom"?"":"opacity-70"}`,onError:ht=>{console.error("Failed to load preview stamp image:",ut);const pt=ht.target;pt.style.display="none";const Z=pt.parentElement;if(Z&&!Z.querySelector(".error-placeholder")){const dt=document.createElement("div");dt.className="error-placeholder text-center text-gray-400 text-sm py-4",dt.textContent="  ",Z.appendChild(dt)}},onLoad:ht=>{const pt=ht.target;pt.style.display="block";const dt=pt.parentElement?.querySelector(".error-placeholder");dt&&dt.remove()}})})()]})]})]}),g.jsxs("div",{className:"w-80 p-4 border-l flex flex-col",children:[g.jsx("h3",{className:"font-medium mb-4",children:" "}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),g.jsxs(xn,{value:p,onValueChange:m,children:[g.jsx(un,{children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:a.map(X=>g.jsx(Ke,{value:X.name,children:X.title},X.name))})]}),p&&g.jsx("div",{className:"mt-2 p-2 border rounded bg-gray-50 min-h-[80px] flex items-center justify-center relative",children:(()=>{const X=a.find(ht=>ht.name===p);if(!X)return g.jsx("div",{className:"text-center text-gray-400 text-sm py-4",children:"  "});const ut=X.stamp_image?rt[X.name]||F(X.stamp_image):"";return ut?g.jsxs(g.Fragment,{children:[g.jsx("img",{src:ut,alt:"Preview",className:"max-w-full max-h-20 mx-auto",onError:ht=>{console.error("Failed to load stamp image:",ut);const pt=ht.target;pt.style.display="none";const Z=pt.parentElement;if(Z&&!Z.querySelector(".preview-placeholder")){const dt=document.createElement("div");dt.className="preview-placeholder text-center text-gray-400 text-sm py-4",dt.textContent="  ",Z.appendChild(dt)}},onLoad:ht=>{const pt=ht.target,dt=pt.parentElement?.querySelector(".preview-placeholder");dt&&dt.remove(),pt.style.display="block"}},ut),!ut&&g.jsx("div",{className:"text-center text-gray-400 text-sm py-4",children:"URL  "})]}):g.jsx("div",{className:"text-center text-gray-400 text-sm py-4",children:"  "})})()})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),g.jsxs(xn,{value:y,onValueChange:x,children:[g.jsx(un,{children:g.jsx(wn,{})}),g.jsx(dn,{children:$A.map(X=>g.jsx(Ke,{value:X.value,children:X.label},X.value))})]}),y==="custom"&&g.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[g.jsx(E3,{className:"w-3 h-3 inline mr-1"}),"  PDF      "]})]}),g.jsx("div",{className:"mb-4",children:g.jsxs("label",{className:"block text-sm font-medium mb-1",children:[": ",A.toFixed(1),"x (",Math.round(A*100),"%   )"]})}),g.jsxs("div",{className:"mb-4",children:[g.jsxs(Ht,{onClick:tt,disabled:!p||y==="custom"&&!H,className:"w-full",children:[g.jsx(a_,{className:"w-4 h-4 mr-2"})," "]}),y==="custom"&&!H&&g.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"     PDF"})]}),g.jsxs("div",{className:"flex-1 overflow-auto",children:[g.jsxs("h4",{className:"font-medium mb-2 text-sm",children:["  (",w.length,")"]}),w.length===0?g.jsx("p",{className:"text-sm text-gray-500",children:"  "}):g.jsx("div",{className:"space-y-2",children:w.map(X=>g.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm",children:[g.jsxs("div",{children:[g.jsx("div",{className:"font-medium",children:X.stamp_title}),g.jsxs("div",{className:"text-xs text-gray-500",children:[". ",X.page_number+1," | ",$A.find(ut=>ut.value===X.position)?.label]})]}),g.jsx("button",{onClick:()=>lt(X.id),className:"p-1 hover:bg-red-100 rounded text-red-600",children:g.jsx(r_,{className:"w-4 h-4"})})]},X.id))})]})]})]}),g.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t",children:[g.jsx(Ht,{variant:"outline",onClick:e,children:""}),g.jsx(Ht,{onClick:mt,disabled:w.length===0||R,children:R?"...":" "})]})]})})}function DH({document:s,loading:t}){const{t:e}=Ns(),[n,a]=S.useState("document"),[o,l]=S.useState(null),[c,d]=S.useState(!1),[h,p]=S.useState(0),[m,y]=S.useState(!0);S.useEffect(()=>{(async()=>{if(!s){l(null),y(!1);return}try{y(!0);const D=await kt.getDocument(s.name);l(D)}catch(D){console.error("Failed to load full document:",D),l(s),y(!1)}})()},[s?.name,s?.modified,s?.status,s?.director_approved,s?.director_rejected,s?.signatures?.length]),S.useEffect(()=>{o?.main_document&&y(!0)},[o?.main_document,h]);const x=()=>{if(!o)return[];const N=[];return o.executor&&N.push(o.executor),o.co_executors&&o.co_executors.forEach(D=>{D.user&&!N.includes(D.user)&&N.push(D.user)}),N},A=()=>!o||!o.signatures?[]:o.signatures.map(N=>N.user),w=()=>{const N=x(),D=A();if(N.length===0)return{signed:0,total:0,percentage:0};const L=D.length,k=N.length,j=L/k*100;return{signed:L,total:k,percentage:j}},C=()=>{if(!o)return[];const N=[];if(N.push({label:" ",status:"completed",date:o.creation,icon:Fn}),o.reception_user&&o.reception_decision_date?N.push({label:"  ",status:"completed",date:o.reception_decision_date,icon:vo}):N.push({label:"  ",status:"pending",date:void 0,icon:vo}),o.reception_user&&o.reception_decision_date)if(o.director_approved)N.push({label:" ",status:"completed",date:o.director_decision_date||void 0,icon:So});else{if(o.director_rejected)return N.push({label:" ",status:"rejected",date:o.director_decision_date||void 0,icon:Lg}),N;N.push({label:"   ",status:"pending",date:void 0,icon:P3})}const D=x();if(D.length>0&&(o.director_approved||o.reception_user)){const L=w();o.status===""?N.push({label:`  (${L.signed}/${L.total})`,status:"completed",date:o.modified,icon:Ya}):o.status===" "?N.push({label:`  (${L.signed}/${L.total})`,status:"pending",date:void 0,icon:Ya}):N.push({label:`  (0/${D.length})`,status:"pending",date:void 0,icon:Ya})}return o.status===""?N.push({label:"",status:"completed",date:o.modified,icon:Om}):N.push({label:"",status:"pending",date:void 0,icon:Om}),N};if(t)return g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsx("div",{className:"text-muted-foreground",children:e("documentContent.loading")})});if(!s)return g.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[g.jsx(Fn,{className:"w-16 h-16 text-muted-foreground mb-4"}),g.jsx("h2",{className:"text-xl font-semibold mb-2",children:e("documentContent.noDocumentSelected")}),g.jsx("p",{className:"text-muted-foreground",children:e("documentContent.selectDocumentMessage")})]});const E=o||s,T=C(),R=w();return g.jsxs("div",{className:"h-full flex flex-col",children:[g.jsx("div",{className:"border-b px-6 pt-2",children:g.jsxs("div",{className:"flex gap-6",children:[g.jsx("button",{onClick:()=>a("document"),className:`relative pb-3 px-1 text-sm font-medium transition-colors ${n==="document"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"}`,children:e("documentContent.tabs.document")}),g.jsxs("button",{onClick:()=>a("signatures"),className:`relative pb-3 px-1 text-sm font-medium transition-colors ${n==="signatures"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"}`,children:[e("documentContent.tabs.signatures")," (",R.signed,"/",R.total,")"]}),g.jsx("button",{onClick:()=>a("history"),className:`relative pb-3 px-1 text-sm font-medium transition-colors ${n==="history"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"}`,children:e("documentContent.tabs.history")})]})}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar-blue",children:[n==="document"&&g.jsxs(g.Fragment,{children:[E.main_document?g.jsxs("div",{className:"bg-white border rounded-lg shadow-sm mb-6",children:[g.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[g.jsx("h3",{className:"text-sm font-medium",children:" "}),E.main_document.toLowerCase().endsWith(".pdf")&&g.jsxs(Ht,{variant:"outline",size:"sm",onClick:()=>d(!0),children:[g.jsx(z3,{className:"w-4 h-4 mr-2"})," "]})]}),g.jsxs("div",{className:"w-full relative bg-gray-50",style:{height:"800px"},children:[g.jsx(wc,{children:m&&g.jsx(fa.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"absolute inset-0 z-10 flex flex-col items-center justify-center gap-4 overflow-hidden",children:g.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center gap-4 p-8",children:[g.jsx("div",{className:"w-full max-w-2xl bg-white rounded shadow-lg animate-pulse",style:{height:"280px"},children:g.jsxs("div",{className:"h-full flex flex-col p-6 gap-4",children:[g.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),g.jsxs("div",{className:"flex-1 flex flex-col gap-3 mt-4",children:[g.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-4/5"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]})]})}),g.jsx("div",{className:"w-full max-w-2xl bg-white rounded shadow-lg animate-pulse opacity-60",style:{height:"280px",marginTop:"-20px"},children:g.jsxs("div",{className:"h-full flex flex-col p-6 gap-4",children:[g.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/5"}),g.jsxs("div",{className:"flex-1 flex flex-col gap-3 mt-4",children:[g.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]})]})})]})})}),g.jsx("iframe",{src:`${E.main_document}?v=${h}#toolbar=0`,className:`w-full h-full border-0 ${m?"opacity-0":"opacity-100"} transition-opacity duration-300`,title:"Document Preview",onLoad:()=>{setTimeout(()=>{y(!1)},300)},onError:()=>{y(!1)}},`pdf-${h}-${E.main_document}`)]})]}):g.jsxs("div",{className:"bg-white border rounded-lg shadow-sm mb-6 p-12 text-center text-muted-foreground",children:[g.jsx(Fn,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),g.jsx("p",{children:"  "})]}),E.attachments&&E.attachments.length>0&&g.jsxs("div",{className:"bg-white border rounded-lg shadow-sm mb-6",children:[g.jsx("div",{className:"p-4 border-b",children:g.jsx("h3",{className:"text-sm font-medium",children:""})}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{className:"bg-muted/50",children:g.jsxs("tr",{children:[g.jsx("th",{className:"text-left p-3 text-xs font-medium text-muted-foreground",children:""}),g.jsx("th",{className:"text-left p-3 text-xs font-medium text-muted-foreground",children:""}),g.jsx("th",{className:"text-right p-3 text-xs font-medium text-muted-foreground",children:""})]})}),g.jsx("tbody",{children:E.attachments.map((N,D)=>{const L=N.file_size?`${(N.file_size/1024).toFixed(2)} KB`:"-";return g.jsxs("tr",{className:"border-t hover:bg-muted/30",children:[g.jsx("td",{className:"p-3",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Fn,{className:"w-4 h-4 text-muted-foreground"}),g.jsx("span",{className:"text-sm",children:N.file_name||` ${D+1}`})]})}),g.jsx("td",{className:"p-3 text-sm text-muted-foreground",children:L}),g.jsx("td",{className:"p-3 text-right",children:g.jsx("a",{href:N.attachment,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline text-sm",children:""})})]},D)})})]})})]}),g.jsx("div",{className:"mt-8 border-t pt-6",children:g.jsx(KU,{doctype:"EDO Document",docname:E.name,refreshTrigger:E.modified?new Date(E.modified).getTime():void 0})})]}),n==="signatures"&&g.jsxs("div",{className:"space-y-6",children:[E.status!==""&&E.status_name!==""&&g.jsxs(ir,{className:"border-2 shadow-md",children:[g.jsx(Ao,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 border-b py-3",children:g.jsxs(Co,{className:"text-sm flex items-center gap-2",children:[g.jsx(Om,{className:"w-4 h-4 text-blue-600"})," "]})}),g.jsx(ar,{className:"pt-4 pb-4",children:g.jsx("div",{className:"space-y-4",children:T.map((N,D)=>{const L=N.icon;return g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsxs("div",{className:"flex flex-col items-center",children:[g.jsx("div",{className:`relative p-1.5 rounded-full transition-all ${N.status==="completed"?"bg-green-100 dark:bg-green-900/30 ring-2 ring-green-500":N.status==="rejected"?"bg-red-100 dark:bg-red-900/30 ring-2 ring-red-500":"bg-gray-100 dark:bg-gray-800 ring-2 ring-gray-300 dark:ring-gray-700"}`,children:g.jsx(L,{className:`w-4 h-4 ${N.status==="completed"?"text-green-600 dark:text-green-400":N.status==="rejected"?"text-red-600 dark:text-red-400":"text-gray-400"}`})}),D<T.length-1&&g.jsx("div",{className:`w-0.5 h-8 mt-1 transition-all ${N.status==="completed"?"bg-gradient-to-b from-green-500 to-green-300":N.status==="rejected"?"bg-gradient-to-b from-red-500 to-red-300":"bg-gray-300 dark:bg-gray-700"}`})]}),g.jsxs("div",{className:"flex-1 pt-0.5",children:[g.jsx("p",{className:`font-medium text-sm transition-colors ${N.status==="completed"?"text-green-700 dark:text-green-400":N.status==="rejected"?"text-red-700 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:N.label}),N.date&&g.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5 flex items-center gap-1",children:[g.jsx(vo,{className:"w-3 h-3"}),new Date(N.date).toLocaleString("ru-RU")]})]})]},D)})})})]}),g.jsxs(ir,{className:"border-2 shadow-lg",children:[g.jsx(Ao,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 border-b",children:g.jsxs(Co,{className:"text-base flex items-center gap-2",children:[g.jsx(Ya,{className:"w-5 h-5 text-blue-600"})," "]})}),g.jsxs(ar,{className:"pt-6",children:[R.total>0?g.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 rounded-lg border-2 border-blue-200 dark:border-blue-800",children:[g.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[g.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:" "}),g.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:[R.signed,"  ",R.total]})]}),g.jsx(uR,{value:R.percentage,className:"h-2"})]}):g.jsx("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-800",children:g.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"     "})}),g.jsx("div",{className:"space-y-3",children:x().length>0?x().map(N=>{const D=E.signatures?.find(k=>k.user===N),L=E.executor===N?{name:E.executor_full_name||N,image:E.executor_image}:E.co_executors?.find(k=>k.user===N)?{name:E.co_executors.find(k=>k.user===N)?.user_full_name||N,image:E.co_executors.find(k=>k.user===N)?.user_image}:{name:N,image:void 0};return g.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-lg border-2 transition-all ${D?"bg-green-50 dark:bg-green-950/30 border-green-200 dark:border-green-800 shadow-sm":"bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-800"}`,children:[L.image?g.jsx("img",{src:L.image,alt:L.name,className:"w-12 h-12 rounded-full ring-2 ring-offset-2 ring-blue-500"}):g.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-white font-bold text-base ring-2 ring-offset-2 ring-blue-500",children:L.name.charAt(0).toUpperCase()}),g.jsxs("div",{className:"flex-1",children:[g.jsx("p",{className:"font-semibold text-sm text-gray-800 dark:text-gray-200",children:L.name}),D?g.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[g.jsxs("p",{className:"flex items-center gap-1",children:[g.jsx(So,{className:"w-3 h-3 text-green-600"}),": ",D.signed_at?new Date(D.signed_at).toLocaleString("ru-RU"):""]}),D.comment&&g.jsx("p",{className:"mt-1 p-2 bg-white dark:bg-gray-800 rounded text-gray-700 dark:text-gray-300 text-xs",children:D.comment})]}):g.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:" "})]}),D?g.jsx("div",{className:"p-1.5 bg-green-100 dark:bg-green-900/50 rounded-full",children:g.jsx(So,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}):g.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center",children:g.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-300 dark:bg-gray-600"})})]},N)}):g.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[g.jsx(Ya,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),g.jsx("p",{className:"text-sm",children:"  "})]})})]})]})]}),n==="history"&&g.jsxs(ir,{className:"border-2 shadow-lg",children:[g.jsx(Ao,{className:"bg-gradient-to-r from-slate-50 to-gray-50 dark:from-slate-900 dark:to-gray-900 border-b",children:g.jsxs(Co,{className:"text-base flex items-center gap-2",children:[g.jsx(c3,{className:"w-5 h-5 text-gray-600"})," "]})}),g.jsx(ar,{className:"pt-6",children:g.jsx("div",{className:"space-y-4",children:T.map((N,D)=>{const L=N.icon;return g.jsxs("div",{className:"flex items-start gap-3 pb-4 border-b last:border-0 last:pb-0",children:[g.jsx("div",{className:`p-1.5 rounded-full ${N.status==="completed"?"bg-green-100 dark:bg-green-900/30":N.status==="rejected"?"bg-red-100 dark:bg-red-900/30":"bg-gray-100 dark:bg-gray-800"}`,children:g.jsx(L,{className:`w-4 h-4 ${N.status==="completed"?"text-green-600 dark:text-green-400":N.status==="rejected"?"text-red-600 dark:text-red-400":"text-gray-400"}`})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("p",{className:`font-medium text-sm ${N.status==="completed"?"text-green-700 dark:text-green-400":N.status==="rejected"?"text-red-700 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:N.label}),N.date&&g.jsxs("p",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-1",children:[g.jsx(vo,{className:"w-3 h-3"}),new Date(N.date).toLocaleString("ru-RU")]})]})]},D)})})})]})]}),c&&E.main_document&&g.jsx(NH,{documentName:E.name,pdfUrl:E.main_document,onClose:()=>d(!1),onStampApplied:async()=>{if(d(!1),s)try{await new Promise(D=>setTimeout(D,500));const N=await kt.getDocument(s.name);l(N),p(D=>D+1),y(!0),console.log("Document reloaded after stamp application:",N),console.log("New main_document:",N.main_document)}catch(N){console.error("Failed to reload document after stamp application:",N),alert(" ,     .  .")}}})]})}function MH({document:s,canEdit:t=!1,onEdit:e,onDocumentUpdate:n}){const{t:a,i18n:o}=Ns(),[l,c]=S.useState(!1),[d,h]=S.useState(!1),[p,m]=S.useState(!1),[y,x]=S.useState(!1),[A,w]=S.useState(!1),[C,E]=S.useState(!1),[T,R]=S.useState(!1),[N,D]=S.useState(!1),[L,k]=S.useState(""),[j,P]=S.useState(!1),[U,H]=S.useState(""),[J,at]=S.useState(""),[q,rt]=S.useState(!1),[O,B]=S.useState(""),[I,Y]=S.useState([]),[ft,F]=S.useState([]),[G,tt]=S.useState([]);S.useEffect(()=>{s&&lt()},[s?.name,s?.status,s?.director_approved,s?.director_rejected]);const lt=async()=>{if(s)try{const[Z,dt,_t]=await Promise.all([kt.canDirectorApprove(),kt.canExecutorSign(s.name),kt.canReceptionSubmit()]);if(c(Z),h(dt),m(_t),_t&&s.status===""||Z&&s.status===" "){const[Lt,qt]=await Promise.all([kt.getResolutions(),kt.getUsers()]);F(Lt),tt(qt)}}catch(Z){console.error("Failed to check permissions:",Z)}},mt=async()=>{if(s)try{if(P(!0),await kt.directorApproveDocument(s.name,L),x(!1),k(""),n){const Z=await kt.getDocument(s.name);n(Z)}await lt()}catch(Z){alert(Z instanceof Error?Z.message:"  ")}finally{P(!1)}},st=async()=>{if(s)try{if(P(!0),await kt.directorRejectDocument(s.name,L),w(!1),k(""),n){const Z=await kt.getDocument(s.name);n(Z)}await lt()}catch(Z){alert(Z instanceof Error?Z.message:"  ")}finally{P(!1)}},et=async()=>{if(s)try{if(P(!0),await kt.executorSignDocument(s.name,L),E(!1),k(""),n){const Z=await kt.getDocument(s.name);n(Z)}await lt()}catch(Z){alert(Z instanceof Error?Z.message:"  ")}finally{P(!1)}},yt=async()=>{if(s){if(!q&&!U){alert("     ");return}if(q&&!J.trim()){alert("  ");return}if(!O){alert(" ");return}try{if(P(!0),await kt.receptionSubmitToDirector(s.name,q?void 0:U,q?J:void 0,O,I),R(!1),H(""),at(""),rt(!1),B(""),Y([]),n){const Z=await kt.getDocument(s.name);n(Z)}await lt()}catch(Z){alert(Z instanceof Error?Z.message:"   ")}finally{P(!1)}}},vt=async()=>{if(s){if(!q&&!U){alert("     ");return}if(q&&!J.trim()){alert("  ");return}if(!O){alert(" ");return}try{if(P(!0),await kt.updateDocument(s.name,{resolution:q?void 0:U,resolution_text:q?J:void 0,executor:O,co_executors:I.map(Z=>({user:Z}))}),D(!1),H(""),at(""),rt(!1),B(""),Y([]),n){const Z=await kt.getDocument(s.name);n(Z)}}catch(Z){alert(Z instanceof Error?Z.message:"     ")}finally{P(!1)}}};if(!s)return null;const Tt=Z=>Z===a("documents.status.signed")||Z===""||Z===""||Z===""?"text-green-600":Z===a("documents.status.pending")||Z===" "||Z===" "?"text-orange-500":Z===a("documents.status.archived")||Z===""?"text-gray-500":Z===""?"text-red-600":"text-gray-500",X=Z=>{const dt=o.language==="uz"?"uz-UZ":o.language==="en"?"en-US":"ru-RU";return new Date(Z).toLocaleDateString(dt)},ut=s.status==="",ht=s.status===" ",pt=s.status===" ";return g.jsxs("div",{className:"h-full overflow-y-auto custom-scrollbar",children:[g.jsxs("div",{className:"p-4 space-y-6",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:a("documentMetadata.documentInfo")}),g.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-3",children:[g.jsxs("div",{className:"col-span-2",children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:a("documentMetadata.documentNumber")}),g.jsx("p",{className:"font-medium",children:s.name})]}),s.title&&g.jsxs("div",{className:"col-span-2",children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:""}),g.jsx("p",{className:"font-medium",children:s.title})]}),s.incoming_number&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:" "}),g.jsx("p",{className:"font-medium",children:s.incoming_number})]}),s.incoming_date&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:" "}),g.jsx("p",{className:"font-medium",children:X(s.incoming_date)})]}),s.outgoing_number&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:" "}),g.jsx("p",{className:"font-medium",children:s.outgoing_number})]}),s.outgoing_date&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:" "}),g.jsx("p",{className:"font-medium",children:X(s.outgoing_date)})]}),s.document_type&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:a("documentMetadata.documentType")}),g.jsx("p",{className:"font-medium",children:s.document_type_name||s.document_type})]}),s.correspondent&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:""}),g.jsx("p",{className:"font-medium",children:s.correspondent_name||s.correspondent})]}),s.priority&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:""}),g.jsx("p",{className:"font-medium",children:s.priority_name||s.priority})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:a("documentMetadata.status")}),g.jsx("p",{className:`font-medium ${Tt(s.status)}`,children:s.status})]}),s.classification&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:""}),g.jsx("p",{className:"font-medium",children:s.classification_name||s.classification})]}),s.delivery_method&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:" "}),g.jsx("p",{className:"font-medium",children:s.delivery_method_name||s.delivery_method})]}),s.creation&&g.jsxs("div",{className:"col-span-2",children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:" "}),g.jsx("p",{className:"font-medium",children:X(s.creation)})]})]})]}),(s.resolution_name||s.resolution_text||s.resolution_text_from_link)&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:""}),g.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950/30 dark:to-pink-950/30 rounded-lg border border-purple-200 dark:border-purple-800 p-4 space-y-4",children:[(s.resolution_name||s.resolution_text||s.resolution_text_from_link)&&g.jsxs("div",{className:"space-y-2",children:[s.resolution_name&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Fn,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),g.jsx("p",{className:"text-sm font-semibold text-purple-900 dark:text-purple-100",children:s.resolution_name})]}),(s.resolution_text||s.resolution_text_from_link)&&g.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 pl-6 whitespace-pre-wrap",children:s.resolution_text_from_link||s.resolution_text})]}),(s.executor||s.co_executors&&s.co_executors.length>0)&&g.jsxs("div",{className:"pt-3 border-t border-purple-200 dark:border-purple-800 space-y-3",children:[s.executor&&g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"flex-shrink-0",children:s.executor_image?g.jsx("img",{src:s.executor_image,alt:"",className:"w-10 h-10 rounded-full object-cover border-2 border-purple-300 dark:border-purple-700"}):g.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center border-2 border-purple-300 dark:border-purple-700",children:g.jsx(ec,{className:"w-5 h-5 text-white"})})}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s.executor_full_name||s.executor}),g.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:""})]})]}),s.co_executors&&s.co_executors.length>0&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{className:"text-xs font-medium text-purple-700 dark:text-purple-300 flex items-center gap-1",children:[g.jsx(Ya,{className:"w-3 h-3"})," (",s.co_executors.length,")"]}),g.jsx("div",{className:"space-y-2 pl-2",children:s.co_executors.map((Z,dt)=>g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"flex-shrink-0",children:Z.user_image?g.jsx("img",{src:Z.user_image,alt:"",className:"w-8 h-8 rounded-full object-cover border border-purple-200 dark:border-purple-800"}):g.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-400 dark:bg-purple-600 flex items-center justify-center border border-purple-200 dark:border-purple-800",children:g.jsx(ec,{className:"w-4 h-4 text-white"})})}),g.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:Z.user_full_name||Z.user})]},dt))})]})]})]})]}),!(s.resolution_name||s.resolution_text||s.resolution_text_from_link)&&(s.executor||s.co_executors&&s.co_executors.length>0)&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:""}),g.jsxs("div",{className:"space-y-3",children:[s.executor&&g.jsxs("div",{className:"flex items-center gap-3 p-2 bg-blue-50 rounded-lg",children:[s.executor_image?g.jsx("img",{src:s.executor_image,alt:"",className:"w-8 h-8 rounded-full object-cover"}):g.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center",children:g.jsx(ec,{className:"w-4 h-4 text-white"})}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium text-sm",children:s.executor_full_name||s.executor}),g.jsx("p",{className:"text-xs text-blue-600",children:""})]})]}),s.co_executors&&s.co_executors.length>0&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[g.jsx(Ya,{className:"w-3 h-3"})," (",s.co_executors.length,")"]}),s.co_executors.map((Z,dt)=>g.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[Z.user_image?g.jsx("img",{src:Z.user_image,alt:"",className:"w-7 h-7 rounded-full object-cover"}):g.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-400 flex items-center justify-center",children:g.jsx(ec,{className:"w-3 h-3 text-white"})}),g.jsx("p",{className:"text-sm",children:Z.user_full_name||Z.user})]},dt))]})]})]}),s.brief_content&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:" "}),g.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.brief_content})]}),s.director_comment&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:" "}),g.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/30 rounded-lg border border-blue-200 dark:border-blue-800",children:g.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.director_comment})})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:a("documentMetadata.actions")}),g.jsxs("div",{className:"space-y-2",children:[p&&ut&&g.jsxs(Ht,{className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white shadow-md",size:"sm",onClick:()=>R(!0),children:[g.jsx(E1,{className:"w-4 h-4 mr-2"}),"  "]}),l&&pt&&g.jsxs(g.Fragment,{children:[g.jsxs(Ht,{className:"w-full bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white shadow-md",size:"sm",onClick:()=>{s.resolution?(H(s.resolution),rt(!1)):s.resolution_text&&(at(s.resolution_text),rt(!0)),B(s.executor||""),Y(s.co_executors?.map(Z=>Z.user).filter(Boolean)||[]),D(!0)},children:[g.jsx(Pm,{className:"w-4 h-4 mr-2"}),"   "]}),g.jsxs(Ht,{className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white shadow-md",size:"sm",onClick:()=>x(!0),children:[g.jsx(So,{className:"w-4 h-4 mr-2"}),""]}),g.jsxs(Ht,{variant:"destructive",className:"w-full bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 shadow-md",size:"sm",onClick:()=>w(!0),children:[g.jsx(Lg,{className:"w-4 h-4 mr-2"}),""]})]}),d&&ht&&g.jsxs(Ht,{className:"w-full bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white shadow-md",size:"sm",onClick:()=>E(!0),children:[g.jsx(_1,{className:"w-4 h-4 mr-2"})," "]}),t&&g.jsxs(Ht,{className:"w-full bg-blue-600 hover:bg-blue-700",size:"sm",onClick:e,children:[g.jsx(Pm,{className:"w-4 h-4"}),""]}),g.jsxs(Ht,{variant:"outline",className:"w-full",size:"sm",children:[g.jsx(JB,{className:"w-4 h-4"}),a("documentMetadata.download")]}),g.jsxs(Ht,{variant:"outline",className:"w-full",size:"sm",children:[g.jsx(N3,{className:"w-4 h-4"}),a("documentMetadata.print")]})]})]})]}),g.jsx(Wa,{open:y,onOpenChange:x,children:g.jsxs(oa,{className:"sm:max-w-[500px]",children:[g.jsxs(la,{children:[g.jsxs(ca,{className:"flex items-center gap-2 text-xl",children:[g.jsx(So,{className:"w-6 h-6 text-green-600"})," "]}),g.jsx(uo,{className:"text-base pt-2",children:" ,     ?      ."})]}),g.jsx("div",{className:"space-y-4 py-4",children:g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium mb-2 block",children:" ()"}),g.jsx(ra,{value:L,onChange:Z=>k(Z.target.value),placeholder:" ...",rows:4,className:"resize-none"})]})}),g.jsxs(co,{children:[g.jsx(Ht,{variant:"outline",onClick:()=>x(!1),children:""}),g.jsx(Ht,{onClick:mt,disabled:j,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700",children:j?"...":""})]})]})}),g.jsx(Wa,{open:A,onOpenChange:w,children:g.jsxs(oa,{className:"sm:max-w-[500px]",children:[g.jsxs(la,{children:[g.jsxs(ca,{className:"flex items-center gap-2 text-xl",children:[g.jsx(Lg,{className:"w-6 h-6 text-red-600"}),"  "]}),g.jsx(uo,{className:"text-base pt-2",children:" ,       ?       ."})]}),g.jsx("div",{className:"space-y-4 py-4",children:g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium mb-2 block",children:" "}),g.jsx(ra,{value:L,onChange:Z=>k(Z.target.value),placeholder:"  ...",rows:4,className:"resize-none"})]})}),g.jsxs(co,{children:[g.jsx(Ht,{variant:"outline",onClick:()=>w(!1),children:""}),g.jsx(Ht,{variant:"destructive",onClick:st,disabled:j,className:"bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700",children:j?"...":""})]})]})}),g.jsx(Wa,{open:C,onOpenChange:E,children:g.jsxs(oa,{className:"sm:max-w-[500px]",children:[g.jsxs(la,{children:[g.jsxs(ca,{className:"flex items-center gap-2 text-xl",children:[g.jsx(_1,{className:"w-6 h-6 text-blue-600"})," "]}),g.jsx(uo,{className:"text-base pt-2",children:" ,  ,          ."})]}),g.jsx("div",{className:"space-y-4 py-4",children:g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium mb-2 block",children:" ()"}),g.jsx(ra,{value:L,onChange:Z=>k(Z.target.value),placeholder:" ...",rows:4,className:"resize-none"})]})}),g.jsxs(co,{children:[g.jsx(Ht,{variant:"outline",onClick:()=>E(!1),children:""}),g.jsx(Ht,{onClick:et,disabled:j,className:"bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700",children:j?"...":""})]})]})}),g.jsx(Wa,{open:N,onOpenChange:D,children:g.jsxs(oa,{className:"sm:max-w-[600px]",children:[g.jsxs(la,{children:[g.jsxs(ca,{className:"flex items-center gap-2 text-xl",children:[g.jsx(Pm,{className:"w-6 h-6 text-purple-600"}),"   "]}),g.jsx(uo,{className:"text-base pt-2",children:"       ."})]}),g.jsxs("div",{className:"space-y-4 py-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("input",{type:"checkbox",id:"use_custom_resolution_director",checked:q,onChange:Z=>{rt(Z.target.checked),Z.target.checked?H(""):at("")},className:"w-4 h-4"}),g.jsx(Jt,{htmlFor:"use_custom_resolution_director",className:"cursor-pointer",children:"  "})]}),q?g.jsxs(g.Fragment,{children:[g.jsx(Jt,{htmlFor:"resolution_text_director",children:"  *"}),g.jsx(ra,{id:"resolution_text_director",value:J,onChange:Z=>at(Z.target.value),placeholder:"  ...",rows:4,className:"resize-none"})]}):g.jsxs(g.Fragment,{children:[g.jsx(Jt,{htmlFor:"resolution_director",children:" *"}),g.jsxs(xn,{value:U,onValueChange:H,children:[g.jsx(un,{children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:ft.map(Z=>g.jsx(Ke,{value:Z.name,children:Z.resolution_name},Z.name))})]})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{children:" *"}),g.jsx(qg,{users:G,value:O,onChange:B,placeholder:" ..."})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{children:""}),g.jsx(Xg,{users:G,value:I,onChange:Y,excludeUsers:O?[O]:[],placeholder:" ..."})]})]}),g.jsxs(co,{children:[g.jsx(Ht,{variant:"outline",onClick:()=>D(!1),children:""}),g.jsx(Ht,{onClick:vt,disabled:j||!q&&!U||q&&!J.trim()||!O,className:"bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700",children:j?"...":""})]})]})}),g.jsx(Wa,{open:T,onOpenChange:R,children:g.jsxs(oa,{className:"sm:max-w-[600px]",children:[g.jsxs(la,{children:[g.jsxs(ca,{className:"flex items-center gap-2 text-xl",children:[g.jsx(E1,{className:"w-6 h-6 text-purple-600"}),"  "]}),g.jsx(uo,{className:"text-base pt-2",children:"        ."})]}),g.jsxs("div",{className:"space-y-4 py-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("input",{type:"checkbox",id:"use_custom_resolution",checked:q,onChange:Z=>{rt(Z.target.checked),Z.target.checked?H(""):at("")},className:"w-4 h-4"}),g.jsx(Jt,{htmlFor:"use_custom_resolution",className:"cursor-pointer",children:"  "})]}),q?g.jsxs(g.Fragment,{children:[g.jsx(Jt,{htmlFor:"resolution_text",children:"  *"}),g.jsx(ra,{id:"resolution_text",value:J,onChange:Z=>at(Z.target.value),placeholder:"  ...",rows:4,className:"resize-none"})]}):g.jsxs(g.Fragment,{children:[g.jsx(Jt,{htmlFor:"resolution",children:" *"}),g.jsxs(xn,{value:U,onValueChange:H,children:[g.jsx(un,{children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:ft.map(Z=>g.jsx(Ke,{value:Z.name,children:Z.resolution_name},Z.name))})]})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{children:" *"}),g.jsx(qg,{users:G,value:O,onChange:B,placeholder:" ..."})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(Jt,{children:""}),g.jsx(Xg,{users:G,value:I,onChange:Y,excludeUsers:O?[O]:[],placeholder:" ..."})]})]}),g.jsxs(co,{children:[g.jsx(Ht,{variant:"outline",onClick:()=>R(!1),children:""}),g.jsx(Ht,{onClick:yt,disabled:j||!q&&!U||q&&!J.trim()||!O,className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700",children:j?"...":" "})]})]})})]})}function kH({documents:s,selectedDocument:t,onSelectDocument:e,loadingList:n,loadingDocument:a,error:o,onDocumentsRefresh:l,onFiltersChange:c,canEdit:d,onEditDocument:h}){const{t:p}=Ns();return S.useEffect(()=>{s.length>0&&!t&&!n&&e(s[0])},[s,t,n,e]),g.jsxs(g.Fragment,{children:[g.jsx(x_,{title:p("documents.title"),subtitle:p("documents.subtitle")}),g.jsxs(fa.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex-1 flex overflow-hidden",children:[g.jsx("aside",{className:"w-80 border-r bg-background shrink-0 overflow-hidden",children:g.jsx($U,{documents:s,selectedDocument:t,onSelectDocument:e,loading:n,error:o,onDocumentsRefresh:l,onFiltersChange:c})}),g.jsx("main",{className:"flex-1 overflow-hidden relative",children:g.jsx(wc,{mode:"wait",children:g.jsx(fa.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,ease:"easeInOut"},className:"h-full",children:g.jsx(DH,{document:t,loading:a})},t?.name||"empty")})}),g.jsx("aside",{className:"w-96 border-l bg-background shrink-0 overflow-hidden relative",children:g.jsx(wc,{mode:"wait",children:g.jsx(fa.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"h-full",children:g.jsx(MH,{document:t,canEdit:d,onEdit:h})},t?.name||"empty")})})]},"documents")]})}function LH(){const s=dC(),t=xa(),{t:e}=Ns(),[n,a]=S.useState([]),[o,l]=S.useState(null),[c,d]=S.useState(!0),[h,p]=S.useState(!1),[m,y]=S.useState(null),[x,A]=S.useState(!1),[w,C]=S.useState(!1),E=t.pathname.startsWith("/documents")?"documents":"dashboard";S.useEffect(()=>{R(),T()},[]);const T=async()=>{try{const j=await kt.canEditDocument();A(j)}catch(j){console.error("Failed to check edit permission:",j)}},R=S.useCallback(async j=>{try{d(!0),y(null);const P=await kt.getDocuments(j);a(P)}catch(P){y(P instanceof Error?P.message:e("documents.loadError"))}finally{d(!1)}},[e]),N=async j=>{l(j),p(!0);try{const P=await kt.getDocument(j.name);l(P)}catch(P){console.error("Failed to load document details:",P)}finally{p(!1)}},D=j=>{j==="dashboard"?(s("/"),l(null)):(s("/documents"),l(null))},L=()=>{o&&C(!0)},k=async j=>{const P=await kt.getDocument(j.name);l(P),R()};return g.jsxs("div",{className:"h-screen flex bg-background",children:[g.jsx(II,{currentPage:E,onNavigate:D}),g.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:g.jsx(wc,{mode:"wait",children:g.jsxs(aL,{location:t,children:[g.jsx(lg,{path:"/",element:g.jsx(GI,{documents:n,onNavigateToDocuments:()=>D("documents")})}),g.jsx(lg,{path:"/documents/*",element:g.jsx(kH,{documents:n,selectedDocument:o,onSelectDocument:N,loadingList:c,loadingDocument:h,error:m,onDocumentsRefresh:()=>R(),onFiltersChange:R,canEdit:x,onEditDocument:L})})]},t.pathname)})}),g.jsx(cR,{open:w,onOpenChange:C,editDocument:o,onDocumentUpdated:k})]})}function jH(){return g.jsx(NL,{children:g.jsx(LH,{})})}ND.createRoot(document.getElementById("root")).render(g.jsx(S.StrictMode,{children:g.jsx(jH,{})}));
