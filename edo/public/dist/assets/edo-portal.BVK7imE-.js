var ww=s=>{throw TypeError(s)};var tm=(s,t,e)=>t.has(s)||ww("Cannot "+e);var xe=(s,t,e)=>(tm(s,t,"read from private field"),e?e.call(s):t.get(s)),Ps=(s,t,e)=>t.has(s)?ww("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),Tn=(s,t,e,n)=>(tm(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),js=(s,t,e)=>(tm(s,t,"access private method"),e);var Sw=(s,t,e,n)=>({set _(a){Tn(s,t,a,e)},get _(){return xe(s,t,n)}});function gM(s,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in s)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(s,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}function Jg(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var em={exports:{}},Ll={};var Aw;function yM(){if(Aw)return Ll;Aw=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var c in a)c!=="key"&&(o[c]=a[c])}else o=a;return a=o.ref,{$$typeof:s,type:n,key:l,ref:a!==void 0?a:null,props:o}}return Ll.Fragment=t,Ll.jsx=e,Ll.jsxs=e,Ll}var Ew;function vM(){return Ew||(Ew=1,em.exports=yM()),em.exports}var v=vM(),nm={exports:{}},Pt={};var Cw;function bM(){if(Cw)return Pt;Cw=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function x(B){return B===null||typeof B!="object"?null:(B=y&&B[y]||B["@@iterator"],typeof B=="function"?B:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function C(B,X,tt){this.props=B,this.context=X,this.refs=E,this.updater=tt||S}C.prototype.isReactComponent={},C.prototype.setState=function(B,X){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,X,"setState")},C.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function T(){}T.prototype=C.prototype;function R(B,X,tt){this.props=B,this.context=X,this.refs=E,this.updater=tt||S}var N=R.prototype=new T;N.constructor=R,w(N,C.prototype),N.isPureReactComponent=!0;var M=Array.isArray;function O(){}var k={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function j(B,X,tt){var ot=tt.ref;return{$$typeof:s,type:B,key:X,ref:ot!==void 0?ot:null,props:tt}}function U(B,X){return j(B.type,X,B.props)}function H(B){return typeof B=="object"&&B!==null&&B.$$typeof===s}function $(B){var X={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(tt){return X[tt]})}var Z=/\/+/g;function et(B,X){return typeof B=="object"&&B!==null&&B.key!=null?$(""+B.key):X.toString(36)}function ct(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(O,O):(B.status="pending",B.then(function(X){B.status==="pending"&&(B.status="fulfilled",B.value=X)},function(X){B.status==="pending"&&(B.status="rejected",B.reason=X)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function P(B,X,tt,ot,pt){var st=typeof B;(st==="undefined"||st==="boolean")&&(B=null);var nt=!1;if(B===null)nt=!0;else switch(st){case"bigint":case"string":case"number":nt=!0;break;case"object":switch(B.$$typeof){case s:case t:nt=!0;break;case p:return nt=B._init,P(nt(B._payload),X,tt,ot,pt)}}if(nt)return pt=pt(B),nt=ot===""?"."+et(B,0):ot,M(pt)?(tt="",nt!=null&&(tt=nt.replace(Z,"$&/")+"/"),P(pt,X,tt,"",function(Nt){return Nt})):pt!=null&&(H(pt)&&(pt=U(pt,tt+(pt.key==null||B&&B.key===pt.key?"":(""+pt.key).replace(Z,"$&/")+"/")+nt)),X.push(pt)),1;nt=0;var Et=ot===""?".":ot+":";if(M(B))for(var bt=0;bt<B.length;bt++)ot=B[bt],st=Et+et(ot,bt),nt+=P(ot,X,tt,st,pt);else if(bt=x(B),typeof bt=="function")for(B=bt.call(B),bt=0;!(ot=B.next()).done;)ot=ot.value,st=Et+et(ot,bt++),nt+=P(ot,X,tt,st,pt);else if(st==="object"){if(typeof B.then=="function")return P(ct(B),X,tt,ot,pt);throw X=String(B),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return nt}function z(B,X,tt){if(B==null)return B;var ot=[],pt=0;return P(B,ot,"","",function(st){return X.call(tt,st,pt++)}),ot}function I(B){if(B._status===-1){var X=B._result;X=X(),X.then(function(tt){(B._status===0||B._status===-1)&&(B._status=1,B._result=tt)},function(tt){(B._status===0||B._status===-1)&&(B._status=2,B._result=tt)}),B._status===-1&&(B._status=0,B._result=X)}if(B._status===1)return B._result.default;throw B._result}var K=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},ht={map:z,forEach:function(B,X,tt){z(B,function(){X.apply(this,arguments)},tt)},count:function(B){var X=0;return z(B,function(){X++}),X},toArray:function(B){return z(B,function(X){return X})||[]},only:function(B){if(!H(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Pt.Activity=m,Pt.Children=ht,Pt.Component=C,Pt.Fragment=e,Pt.Profiler=a,Pt.PureComponent=R,Pt.StrictMode=n,Pt.Suspense=d,Pt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Pt.__COMPILER_RUNTIME={__proto__:null,c:function(B){return k.H.useMemoCache(B)}},Pt.cache=function(B){return function(){return B.apply(null,arguments)}},Pt.cacheSignal=function(){return null},Pt.cloneElement=function(B,X,tt){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ot=w({},B.props),pt=B.key;if(X!=null)for(st in X.key!==void 0&&(pt=""+X.key),X)!L.call(X,st)||st==="key"||st==="__self"||st==="__source"||st==="ref"&&X.ref===void 0||(ot[st]=X[st]);var st=arguments.length-2;if(st===1)ot.children=tt;else if(1<st){for(var nt=Array(st),Et=0;Et<st;Et++)nt[Et]=arguments[Et+2];ot.children=nt}return j(B.type,pt,ot)},Pt.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:o,_context:B},B},Pt.createElement=function(B,X,tt){var ot,pt={},st=null;if(X!=null)for(ot in X.key!==void 0&&(st=""+X.key),X)L.call(X,ot)&&ot!=="key"&&ot!=="__self"&&ot!=="__source"&&(pt[ot]=X[ot]);var nt=arguments.length-2;if(nt===1)pt.children=tt;else if(1<nt){for(var Et=Array(nt),bt=0;bt<nt;bt++)Et[bt]=arguments[bt+2];pt.children=Et}if(B&&B.defaultProps)for(ot in nt=B.defaultProps,nt)pt[ot]===void 0&&(pt[ot]=nt[ot]);return j(B,st,pt)},Pt.createRef=function(){return{current:null}},Pt.forwardRef=function(B){return{$$typeof:c,render:B}},Pt.isValidElement=H,Pt.lazy=function(B){return{$$typeof:p,_payload:{_status:-1,_result:B},_init:I}},Pt.memo=function(B,X){return{$$typeof:h,type:B,compare:X===void 0?null:X}},Pt.startTransition=function(B){var X=k.T,tt={};k.T=tt;try{var ot=B(),pt=k.S;pt!==null&&pt(tt,ot),typeof ot=="object"&&ot!==null&&typeof ot.then=="function"&&ot.then(O,K)}catch(st){K(st)}finally{X!==null&&tt.types!==null&&(X.types=tt.types),k.T=X}},Pt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Pt.use=function(B){return k.H.use(B)},Pt.useActionState=function(B,X,tt){return k.H.useActionState(B,X,tt)},Pt.useCallback=function(B,X){return k.H.useCallback(B,X)},Pt.useContext=function(B){return k.H.useContext(B)},Pt.useDebugValue=function(){},Pt.useDeferredValue=function(B,X){return k.H.useDeferredValue(B,X)},Pt.useEffect=function(B,X){return k.H.useEffect(B,X)},Pt.useEffectEvent=function(B){return k.H.useEffectEvent(B)},Pt.useId=function(){return k.H.useId()},Pt.useImperativeHandle=function(B,X,tt){return k.H.useImperativeHandle(B,X,tt)},Pt.useInsertionEffect=function(B,X){return k.H.useInsertionEffect(B,X)},Pt.useLayoutEffect=function(B,X){return k.H.useLayoutEffect(B,X)},Pt.useMemo=function(B,X){return k.H.useMemo(B,X)},Pt.useOptimistic=function(B,X){return k.H.useOptimistic(B,X)},Pt.useReducer=function(B,X,tt){return k.H.useReducer(B,X,tt)},Pt.useRef=function(B){return k.H.useRef(B)},Pt.useState=function(B){return k.H.useState(B)},Pt.useSyncExternalStore=function(B,X,tt){return k.H.useSyncExternalStore(B,X,tt)},Pt.useTransition=function(){return k.H.useTransition()},Pt.version="19.2.3",Pt}var Tw;function dh(){return Tw||(Tw=1,nm.exports=bM()),nm.exports}var A=dh();const Zi=Jg(A),ty=gM({__proto__:null,default:Zi},[A]);var sm={exports:{}},Ol={},im={exports:{}},am={};var _w;function xM(){return _w||(_w=1,(function(s){function t(P,z){var I=P.length;P.push(z);t:for(;0<I;){var K=I-1>>>1,ht=P[K];if(0<a(ht,z))P[K]=z,P[I]=ht,I=K;else break t}}function e(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var z=P[0],I=P.pop();if(I!==z){P[0]=I;t:for(var K=0,ht=P.length,B=ht>>>1;K<B;){var X=2*(K+1)-1,tt=P[X],ot=X+1,pt=P[ot];if(0>a(tt,I))ot<ht&&0>a(pt,tt)?(P[K]=pt,P[ot]=I,K=ot):(P[K]=tt,P[X]=I,K=X);else if(ot<ht&&0>a(pt,I))P[K]=pt,P[ot]=I,K=ot;else break t}}return z}function a(P,z){var I=P.sortIndex-z.sortIndex;return I!==0?I:P.id-z.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();s.unstable_now=function(){return l.now()-c}}var d=[],h=[],p=1,m=null,y=3,x=!1,S=!1,w=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function N(P){for(var z=e(h);z!==null;){if(z.callback===null)n(h);else if(z.startTime<=P)n(h),z.sortIndex=z.expirationTime,t(d,z);else break;z=e(h)}}function M(P){if(w=!1,N(P),!S)if(e(d)!==null)S=!0,O||(O=!0,$());else{var z=e(h);z!==null&&ct(M,z.startTime-P)}}var O=!1,k=-1,L=5,j=-1;function U(){return E?!0:!(s.unstable_now()-j<L)}function H(){if(E=!1,O){var P=s.unstable_now();j=P;var z=!0;try{t:{S=!1,w&&(w=!1,T(k),k=-1),x=!0;var I=y;try{e:{for(N(P),m=e(d);m!==null&&!(m.expirationTime>P&&U());){var K=m.callback;if(typeof K=="function"){m.callback=null,y=m.priorityLevel;var ht=K(m.expirationTime<=P);if(P=s.unstable_now(),typeof ht=="function"){m.callback=ht,N(P),z=!0;break e}m===e(d)&&n(d),N(P)}else n(d);m=e(d)}if(m!==null)z=!0;else{var B=e(h);B!==null&&ct(M,B.startTime-P),z=!1}}break t}finally{m=null,y=I,x=!1}z=void 0}}finally{z?$():O=!1}}}var $;if(typeof R=="function")$=function(){R(H)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,et=Z.port2;Z.port1.onmessage=H,$=function(){et.postMessage(null)}}else $=function(){C(H,0)};function ct(P,z){k=C(function(){P(s.unstable_now())},z)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(P){P.callback=null},s.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<P?Math.floor(1e3/P):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_next=function(P){switch(y){case 1:case 2:case 3:var z=3;break;default:z=y}var I=y;y=z;try{return P()}finally{y=I}},s.unstable_requestPaint=function(){E=!0},s.unstable_runWithPriority=function(P,z){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var I=y;y=P;try{return z()}finally{y=I}},s.unstable_scheduleCallback=function(P,z,I){var K=s.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?K+I:K):I=K,P){case 1:var ht=-1;break;case 2:ht=250;break;case 5:ht=1073741823;break;case 4:ht=1e4;break;default:ht=5e3}return ht=I+ht,P={id:p++,callback:z,priorityLevel:P,startTime:I,expirationTime:ht,sortIndex:-1},I>K?(P.sortIndex=I,t(h,P),e(d)===null&&P===e(h)&&(w?(T(k),k=-1):w=!0,ct(M,I-K))):(P.sortIndex=ht,t(d,P),S||x||(S=!0,O||(O=!0,$()))),P},s.unstable_shouldYield=U,s.unstable_wrapCallback=function(P){var z=y;return function(){var I=y;y=z;try{return P.apply(this,arguments)}finally{y=I}}}})(am)),am}var Rw;function wM(){return Rw||(Rw=1,im.exports=xM()),im.exports}var rm={exports:{}},rn={};var Nw;function SM(){if(Nw)return rn;Nw=1;var s=dh();function t(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,h,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:d,containerInfo:h,implementation:p}}var l=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,rn.createPortal=function(d,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return o(d,h,null,p)},rn.flushSync=function(d){var h=l.T,p=n.p;try{if(l.T=null,n.p=2,d)return d()}finally{l.T=h,n.p=p,n.d.f()}},rn.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},rn.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},rn.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:x}):p==="script"&&n.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},rn.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},rn.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,m=c(p,h.crossOrigin);n.d.L(d,p,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},rn.preloadModule=function(d,h){if(typeof d=="string")if(h){var p=c(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},rn.requestFormReset=function(d){n.d.r(d)},rn.unstable_batchedUpdates=function(d,h){return d(h)},rn.useFormState=function(d,h,p){return l.H.useFormState(d,h,p)},rn.useFormStatus=function(){return l.H.useHostTransitionStatus()},rn.version="19.2.3",rn}var Mw;function FA(){if(Mw)return rm.exports;Mw=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),rm.exports=SM(),rm.exports}var Dw;function AM(){if(Dw)return Ol;Dw=1;var s=wM(),t=dh(),e=FA();function n(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)r+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var r=i,u=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(u=r.return),i=r.return;while(i)}return r.tag===3?u:null}function l(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function c(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function h(i){var r=i.alternate;if(!r){if(r=o(i),r===null)throw Error(n(188));return r!==i?null:i}for(var u=i,f=r;;){var g=u.return;if(g===null)break;var b=g.alternate;if(b===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===u)return d(g),i;if(b===f)return d(g),r;b=b.sibling}throw Error(n(188))}if(u.return!==f.return)u=g,f=b;else{for(var _=!1,D=g.child;D;){if(D===u){_=!0,u=g,f=b;break}if(D===f){_=!0,f=g,u=b;break}D=D.sibling}if(!_){for(D=b.child;D;){if(D===u){_=!0,u=b,f=g;break}if(D===f){_=!0,f=b,u=g;break}D=D.sibling}if(!_)throw Error(n(189))}}if(u.alternate!==f)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?i:r}function p(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=p(i),r!==null)return r;i=i.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),R=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function $(i){return i===null||typeof i!="object"?null:(i=H&&i[H]||i["@@iterator"],typeof i=="function"?i:null)}var Z=Symbol.for("react.client.reference");function et(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Z?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case C:return"Profiler";case E:return"StrictMode";case M:return"Suspense";case O:return"SuspenseList";case j:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case R:return i.displayName||"Context";case T:return(i._context.displayName||"Context")+".Consumer";case N:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case k:return r=i.displayName||null,r!==null?r:et(i.type)||"Memo";case L:r=i._payload,i=i._init;try{return et(i(r))}catch{}}return null}var ct=Array.isArray,P=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},K=[],ht=-1;function B(i){return{current:i}}function X(i){0>ht||(i.current=K[ht],K[ht]=null,ht--)}function tt(i,r){ht++,K[ht]=i.current,i.current=r}var ot=B(null),pt=B(null),st=B(null),nt=B(null);function Et(i,r){switch(tt(st,r),tt(pt,i),tt(ot,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?$x(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=$x(r),i=Gx(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}X(ot),tt(ot,i)}function bt(){X(ot),X(pt),X(st)}function Nt(i){i.memoizedState!==null&&tt(nt,i);var r=ot.current,u=Gx(r,i.type);r!==u&&(tt(pt,i),tt(ot,u))}function q(i){pt.current===i&&(X(ot),X(pt)),nt.current===i&&(X(nt),Nl._currentValue=I)}var lt,ut;function ft(i){if(lt===void 0)try{throw Error()}catch(u){var r=u.stack.trim().match(/\n( *(at )?)/);lt=r&&r[1]||"",ut=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lt+i+ut}var gt=!1;function dt(i,r){if(!i||gt)return"";gt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(r){var rt=function(){throw Error()};if(Object.defineProperty(rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rt,[])}catch(J){var Q=J}Reflect.construct(i,[],rt)}else{try{rt.call()}catch(J){Q=J}i.call(rt.prototype)}}else{try{throw Error()}catch(J){Q=J}(rt=i())&&typeof rt.catch=="function"&&rt.catch(function(){})}}catch(J){if(J&&Q&&typeof J.stack=="string")return[J.stack,Q.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),_=b[0],D=b[1];if(_&&D){var F=_.split(`
`),W=D.split(`
`);for(g=f=0;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;for(;g<W.length&&!W[g].includes("DetermineComponentFrameRoot");)g++;if(f===F.length||g===W.length)for(f=F.length-1,g=W.length-1;1<=f&&0<=g&&F[f]!==W[g];)g--;for(;1<=f&&0<=g;f--,g--)if(F[f]!==W[g]){if(f!==1||g!==1)do if(f--,g--,0>g||F[f]!==W[g]){var it=`
`+F[f].replace(" at new "," at ");return i.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",i.displayName)),it}while(1<=f&&0<=g);break}}}finally{gt=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?ft(u):""}function Tt(i,r){switch(i.tag){case 26:case 27:case 5:return ft(i.type);case 16:return ft("Lazy");case 13:return i.child!==r&&r!==null?ft("Suspense Fallback"):ft("Suspense");case 19:return ft("SuspenseList");case 0:case 15:return dt(i.type,!1);case 11:return dt(i.type.render,!1);case 1:return dt(i.type,!0);case 31:return ft("Activity");default:return""}}function kt(i){try{var r="",u=null;do r+=Tt(i,u),u=i,i=i.return;while(i);return r}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var Kt=Object.prototype.hasOwnProperty,Zt=s.unstable_scheduleCallback,Mn=s.unstable_cancelCallback,Yn=s.unstable_shouldYield,pa=s.unstable_requestPaint,Ke=s.unstable_now,Uo=s.unstable_getCurrentPriorityLevel,rr=s.unstable_ImmediatePriority,or=s.unstable_UserBlockingPriority,dn=s.unstable_NormalPriority,gs=s.unstable_LowPriority,mt=s.unstable_IdlePriority,fe=s.log,Ns=s.unstable_setDisableYieldValue,Ms=null,pe=null;function Wn(i){if(typeof fe=="function"&&Ns(i),pe&&typeof pe.setStrictMode=="function")try{pe.setStrictMode(Ms,i)}catch{}}var Dn=Math.clz32?Math.clz32:n2,t2=Math.log,e2=Math.LN2;function n2(i){return i>>>=0,i===0?32:31-(t2(i)/e2|0)|0}var Ic=256,zc=262144,Uc=4194304;function ma(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Vc(i,r,u){var f=i.pendingLanes;if(f===0)return 0;var g=0,b=i.suspendedLanes,_=i.pingedLanes;i=i.warmLanes;var D=f&134217727;return D!==0?(f=D&~b,f!==0?g=ma(f):(_&=D,_!==0?g=ma(_):u||(u=D&~i,u!==0&&(g=ma(u))))):(D=f&~b,D!==0?g=ma(D):_!==0?g=ma(_):u||(u=f&~i,u!==0&&(g=ma(u)))),g===0?0:r!==0&&r!==g&&(r&b)===0&&(b=g&-g,u=r&-r,b>=u||b===32&&(u&4194048)!==0)?r:g}function Vo(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function s2(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cv(){var i=Uc;return Uc<<=1,(Uc&62914560)===0&&(Uc=4194304),i}function Uh(i){for(var r=[],u=0;31>u;u++)r.push(i);return r}function Ho(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function i2(i,r,u,f,g,b){var _=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var D=i.entanglements,F=i.expirationTimes,W=i.hiddenUpdates;for(u=_&~u;0<u;){var it=31-Dn(u),rt=1<<it;D[it]=0,F[it]=-1;var Q=W[it];if(Q!==null)for(W[it]=null,it=0;it<Q.length;it++){var J=Q[it];J!==null&&(J.lane&=-536870913)}u&=~rt}f!==0&&Tv(i,f,0),b!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=b&~(_&~r))}function Tv(i,r,u){i.pendingLanes|=r,i.suspendedLanes&=~r;var f=31-Dn(r);i.entangledLanes|=r,i.entanglements[f]=i.entanglements[f]|1073741824|u&261930}function _v(i,r){var u=i.entangledLanes|=r;for(i=i.entanglements;u;){var f=31-Dn(u),g=1<<f;g&r|i[f]&r&&(i[f]|=r),u&=~g}}function Rv(i,r){var u=r&-r;return u=(u&42)!==0?1:Vh(u),(u&(i.suspendedLanes|r))!==0?0:u}function Vh(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Hh(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Nv(){var i=z.p;return i!==0?i:(i=window.event,i===void 0?32:pw(i.type))}function Mv(i,r){var u=z.p;try{return z.p=i,r()}finally{z.p=u}}var _i=Math.random().toString(36).slice(2),Qe="__reactFiber$"+_i,bn="__reactProps$"+_i,lr="__reactContainer$"+_i,$h="__reactEvents$"+_i,a2="__reactListeners$"+_i,r2="__reactHandles$"+_i,Dv="__reactResources$"+_i,$o="__reactMarker$"+_i;function Gh(i){delete i[Qe],delete i[bn],delete i[$h],delete i[a2],delete i[r2]}function cr(i){var r=i[Qe];if(r)return r;for(var u=i.parentNode;u;){if(r=u[lr]||u[Qe]){if(u=r.alternate,r.child!==null||u!==null&&u.child!==null)for(i=Zx(i);i!==null;){if(u=i[Qe])return u;i=Zx(i)}return r}i=u,u=i.parentNode}return null}function ur(i){if(i=i[Qe]||i[lr]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Go(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(n(33))}function dr(i){var r=i[Dv];return r||(r=i[Dv]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ge(i){i[$o]=!0}var kv=new Set,Lv={};function ga(i,r){hr(i,r),hr(i+"Capture",r)}function hr(i,r){for(Lv[i]=r,i=0;i<r.length;i++)kv.add(r[i])}var o2=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ov={},Pv={};function l2(i){return Kt.call(Pv,i)?!0:Kt.call(Ov,i)?!1:o2.test(i)?Pv[i]=!0:(Ov[i]=!0,!1)}function Hc(i,r,u){if(l2(r))if(u===null)i.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var f=r.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+u)}}function $c(i,r,u){if(u===null)i.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+u)}}function Qs(i,r,u,f){if(f===null)i.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(r,u,""+f)}}function Kn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function jv(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function c2(i,r,u){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var g=f.get,b=f.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return g.call(this)},set:function(_){u=""+_,b.call(this,_)}}),Object.defineProperty(i,r,{enumerable:f.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function qh(i){if(!i._valueTracker){var r=jv(i)?"checked":"value";i._valueTracker=c2(i,r,""+i[r])}}function Bv(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var u=r.getValue(),f="";return i&&(f=jv(i)?i.checked?"true":"false":i.value),i=f,i!==u?(r.setValue(i),!0):!1}function Gc(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var u2=/[\n"\\]/g;function Qn(i){return i.replace(u2,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Xh(i,r,u,f,g,b,_,D){i.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?i.type=_:i.removeAttribute("type"),r!=null?_==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Kn(r)):i.value!==""+Kn(r)&&(i.value=""+Kn(r)):_!=="submit"&&_!=="reset"||i.removeAttribute("value"),r!=null?Yh(i,_,Kn(r)):u!=null?Yh(i,_,Kn(u)):f!=null&&i.removeAttribute("value"),g==null&&b!=null&&(i.defaultChecked=!!b),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.name=""+Kn(D):i.removeAttribute("name")}function Fv(i,r,u,f,g,b,_,D){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),r!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||r!=null)){qh(i);return}u=u!=null?""+Kn(u):"",r=r!=null?""+Kn(r):u,D||r===i.value||(i.value=r),i.defaultValue=r}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=D?i.checked:!!f,i.defaultChecked=!!f,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.name=_),qh(i)}function Yh(i,r,u){r==="number"&&Gc(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function fr(i,r,u,f){if(i=i.options,r){r={};for(var g=0;g<u.length;g++)r["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=r.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&f&&(i[u].defaultSelected=!0)}else{for(u=""+Kn(u),r=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}r!==null||i[g].disabled||(r=i[g])}r!==null&&(r.selected=!0)}}function Iv(i,r,u){if(r!=null&&(r=""+Kn(r),r!==i.value&&(i.value=r),u==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=u!=null?""+Kn(u):""}function zv(i,r,u,f){if(r==null){if(f!=null){if(u!=null)throw Error(n(92));if(ct(f)){if(1<f.length)throw Error(n(93));f=f[0]}u=f}u==null&&(u=""),r=u}u=Kn(r),i.defaultValue=u,f=i.textContent,f===u&&f!==""&&f!==null&&(i.value=f),qh(i)}function pr(i,r){if(r){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=r;return}}i.textContent=r}var d2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Uv(i,r,u){var f=r.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":f?i.setProperty(r,u):typeof u!="number"||u===0||d2.has(r)?r==="float"?i.cssFloat=u:i[r]=(""+u).trim():i[r]=u+"px"}function Vv(i,r,u){if(r!=null&&typeof r!="object")throw Error(n(62));if(i=i.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||r!=null&&r.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var g in r)f=r[g],r.hasOwnProperty(g)&&u[g]!==f&&Uv(i,g,f)}else for(var b in r)r.hasOwnProperty(b)&&Uv(i,b,r[b])}function Wh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var h2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),f2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qc(i){return f2.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Zs(){}var Kh=null;function Qh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var mr=null,gr=null;function Hv(i){var r=ur(i);if(r&&(i=r.stateNode)){var u=i[bn]||null;t:switch(i=r.stateNode,r.type){case"input":if(Xh(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),r=u.name,u.type==="radio"&&r!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Qn(""+r)+'"][type="radio"]'),r=0;r<u.length;r++){var f=u[r];if(f!==i&&f.form===i.form){var g=f[bn]||null;if(!g)throw Error(n(90));Xh(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<u.length;r++)f=u[r],f.form===i.form&&Bv(f)}break t;case"textarea":Iv(i,u.value,u.defaultValue);break t;case"select":r=u.value,r!=null&&fr(i,!!u.multiple,r,!1)}}}var Zh=!1;function $v(i,r,u){if(Zh)return i(r,u);Zh=!0;try{var f=i(r);return f}finally{if(Zh=!1,(mr!==null||gr!==null)&&(Lu(),mr&&(r=mr,i=gr,gr=mr=null,Hv(r),i)))for(r=0;r<i.length;r++)Hv(i[r])}}function qo(i,r){var u=i.stateNode;if(u===null)return null;var f=u[bn]||null;if(f===null)return null;u=f[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break t;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(n(231,r,typeof u));return u}var Js=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jh=!1;if(Js)try{var Xo={};Object.defineProperty(Xo,"passive",{get:function(){Jh=!0}}),window.addEventListener("test",Xo,Xo),window.removeEventListener("test",Xo,Xo)}catch{Jh=!1}var Ri=null,tf=null,Xc=null;function Gv(){if(Xc)return Xc;var i,r=tf,u=r.length,f,g="value"in Ri?Ri.value:Ri.textContent,b=g.length;for(i=0;i<u&&r[i]===g[i];i++);var _=u-i;for(f=1;f<=_&&r[u-f]===g[b-f];f++);return Xc=g.slice(i,1<f?1-f:void 0)}function Yc(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Wc(){return!0}function qv(){return!1}function xn(i){function r(u,f,g,b,_){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=b,this.target=_,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(u=i[D],this[D]=u?u(b):b[D]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Wc:qv,this.isPropagationStopped=qv,this}return m(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Wc)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Wc)},persist:function(){},isPersistent:Wc}),r}var ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kc=xn(ya),Yo=m({},ya,{view:0,detail:0}),p2=xn(Yo),ef,nf,Wo,Qc=m({},Yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:af,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Wo&&(Wo&&i.type==="mousemove"?(ef=i.screenX-Wo.screenX,nf=i.screenY-Wo.screenY):nf=ef=0,Wo=i),ef)},movementY:function(i){return"movementY"in i?i.movementY:nf}}),Xv=xn(Qc),m2=m({},Qc,{dataTransfer:0}),g2=xn(m2),y2=m({},Yo,{relatedTarget:0}),sf=xn(y2),v2=m({},ya,{animationName:0,elapsedTime:0,pseudoElement:0}),b2=xn(v2),x2=m({},ya,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),w2=xn(x2),S2=m({},ya,{data:0}),Yv=xn(S2),A2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},E2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},C2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T2(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=C2[i])?!!r[i]:!1}function af(){return T2}var _2=m({},Yo,{key:function(i){if(i.key){var r=A2[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Yc(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?E2[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:af,charCode:function(i){return i.type==="keypress"?Yc(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Yc(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),R2=xn(_2),N2=m({},Qc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wv=xn(N2),M2=m({},Yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:af}),D2=xn(M2),k2=m({},ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),L2=xn(k2),O2=m({},Qc,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),P2=xn(O2),j2=m({},ya,{newState:0,oldState:0}),B2=xn(j2),F2=[9,13,27,32],rf=Js&&"CompositionEvent"in window,Ko=null;Js&&"documentMode"in document&&(Ko=document.documentMode);var I2=Js&&"TextEvent"in window&&!Ko,Kv=Js&&(!rf||Ko&&8<Ko&&11>=Ko),Qv=" ",Zv=!1;function Jv(i,r){switch(i){case"keyup":return F2.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tb(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var yr=!1;function z2(i,r){switch(i){case"compositionend":return tb(r);case"keypress":return r.which!==32?null:(Zv=!0,Qv);case"textInput":return i=r.data,i===Qv&&Zv?null:i;default:return null}}function U2(i,r){if(yr)return i==="compositionend"||!rf&&Jv(i,r)?(i=Gv(),Xc=tf=Ri=null,yr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Kv&&r.locale!=="ko"?null:r.data;default:return null}}var V2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eb(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!V2[i.type]:r==="textarea"}function nb(i,r,u,f){mr?gr?gr.push(f):gr=[f]:mr=f,r=zu(r,"onChange"),0<r.length&&(u=new Kc("onChange","change",null,u,f),i.push({event:u,listeners:r}))}var Qo=null,Zo=null;function H2(i){Fx(i,0)}function Zc(i){var r=Go(i);if(Bv(r))return i}function sb(i,r){if(i==="change")return r}var ib=!1;if(Js){var of;if(Js){var lf="oninput"in document;if(!lf){var ab=document.createElement("div");ab.setAttribute("oninput","return;"),lf=typeof ab.oninput=="function"}of=lf}else of=!1;ib=of&&(!document.documentMode||9<document.documentMode)}function rb(){Qo&&(Qo.detachEvent("onpropertychange",ob),Zo=Qo=null)}function ob(i){if(i.propertyName==="value"&&Zc(Zo)){var r=[];nb(r,Zo,i,Qh(i)),$v(H2,r)}}function $2(i,r,u){i==="focusin"?(rb(),Qo=r,Zo=u,Qo.attachEvent("onpropertychange",ob)):i==="focusout"&&rb()}function G2(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Zc(Zo)}function q2(i,r){if(i==="click")return Zc(r)}function X2(i,r){if(i==="input"||i==="change")return Zc(r)}function Y2(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var kn=typeof Object.is=="function"?Object.is:Y2;function Jo(i,r){if(kn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var u=Object.keys(i),f=Object.keys(r);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!Kt.call(r,g)||!kn(i[g],r[g]))return!1}return!0}function lb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function cb(i,r){var u=lb(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=r&&f>=r)return{node:u,offset:r-i};i=f}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=lb(u)}}function ub(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?ub(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function db(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Gc(i.document);r instanceof i.HTMLIFrameElement;){try{var u=typeof r.contentWindow.location.href=="string"}catch{u=!1}if(u)i=r.contentWindow;else break;r=Gc(i.document)}return r}function cf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var W2=Js&&"documentMode"in document&&11>=document.documentMode,vr=null,uf=null,tl=null,df=!1;function hb(i,r,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;df||vr==null||vr!==Gc(f)||(f=vr,"selectionStart"in f&&cf(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),tl&&Jo(tl,f)||(tl=f,f=zu(uf,"onSelect"),0<f.length&&(r=new Kc("onSelect","select",null,r,u),i.push({event:r,listeners:f}),r.target=vr)))}function va(i,r){var u={};return u[i.toLowerCase()]=r.toLowerCase(),u["Webkit"+i]="webkit"+r,u["Moz"+i]="moz"+r,u}var br={animationend:va("Animation","AnimationEnd"),animationiteration:va("Animation","AnimationIteration"),animationstart:va("Animation","AnimationStart"),transitionrun:va("Transition","TransitionRun"),transitionstart:va("Transition","TransitionStart"),transitioncancel:va("Transition","TransitionCancel"),transitionend:va("Transition","TransitionEnd")},hf={},fb={};Js&&(fb=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);function ba(i){if(hf[i])return hf[i];if(!br[i])return i;var r=br[i],u;for(u in r)if(r.hasOwnProperty(u)&&u in fb)return hf[i]=r[u];return i}var pb=ba("animationend"),mb=ba("animationiteration"),gb=ba("animationstart"),K2=ba("transitionrun"),Q2=ba("transitionstart"),Z2=ba("transitioncancel"),yb=ba("transitionend"),vb=new Map,ff="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ff.push("scrollEnd");function ys(i,r){vb.set(i,r),ga(r,[i])}var Jc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Zn=[],xr=0,pf=0;function tu(){for(var i=xr,r=pf=xr=0;r<i;){var u=Zn[r];Zn[r++]=null;var f=Zn[r];Zn[r++]=null;var g=Zn[r];Zn[r++]=null;var b=Zn[r];if(Zn[r++]=null,f!==null&&g!==null){var _=f.pending;_===null?g.next=g:(g.next=_.next,_.next=g),f.pending=g}b!==0&&bb(u,g,b)}}function eu(i,r,u,f){Zn[xr++]=i,Zn[xr++]=r,Zn[xr++]=u,Zn[xr++]=f,pf|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function mf(i,r,u,f){return eu(i,r,u,f),nu(i)}function xa(i,r){return eu(i,null,null,r),nu(i)}function bb(i,r,u){i.lanes|=u;var f=i.alternate;f!==null&&(f.lanes|=u);for(var g=!1,b=i.return;b!==null;)b.childLanes|=u,f=b.alternate,f!==null&&(f.childLanes|=u),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(g=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,g&&r!==null&&(g=31-Dn(u),i=b.hiddenUpdates,f=i[g],f===null?i[g]=[r]:f.push(r),r.lane=u|536870912),b):null}function nu(i){if(50<Sl)throw Sl=0,Ep=null,Error(n(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var wr={};function J2(i,r,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(i,r,u,f){return new J2(i,r,u,f)}function gf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ti(i,r){var u=i.alternate;return u===null?(u=Ln(i.tag,r,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=r,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,r=i.dependencies,u.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function xb(i,r){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,r=u.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function su(i,r,u,f,g,b){var _=0;if(f=i,typeof i=="function")gf(i)&&(_=1);else if(typeof i=="string")_=iM(i,u,ot.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case j:return i=Ln(31,u,r,g),i.elementType=j,i.lanes=b,i;case w:return wa(u.children,g,b,r);case E:_=8,g|=24;break;case C:return i=Ln(12,u,r,g|2),i.elementType=C,i.lanes=b,i;case M:return i=Ln(13,u,r,g),i.elementType=M,i.lanes=b,i;case O:return i=Ln(19,u,r,g),i.elementType=O,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:_=10;break t;case T:_=9;break t;case N:_=11;break t;case k:_=14;break t;case L:_=16,f=null;break t}_=29,u=Error(n(130,i===null?"null":typeof i,"")),f=null}return r=Ln(_,u,r,g),r.elementType=i,r.type=f,r.lanes=b,r}function wa(i,r,u,f){return i=Ln(7,i,f,r),i.lanes=u,i}function yf(i,r,u){return i=Ln(6,i,null,r),i.lanes=u,i}function wb(i){var r=Ln(18,null,null,0);return r.stateNode=i,r}function vf(i,r,u){return r=Ln(4,i.children!==null?i.children:[],i.key,r),r.lanes=u,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var Sb=new WeakMap;function Jn(i,r){if(typeof i=="object"&&i!==null){var u=Sb.get(i);return u!==void 0?u:(r={value:i,source:r,stack:kt(r)},Sb.set(i,r),r)}return{value:i,source:r,stack:kt(r)}}var Sr=[],Ar=0,iu=null,el=0,ts=[],es=0,Ni=null,Ds=1,ks="";function ei(i,r){Sr[Ar++]=el,Sr[Ar++]=iu,iu=i,el=r}function Ab(i,r,u){ts[es++]=Ds,ts[es++]=ks,ts[es++]=Ni,Ni=i;var f=Ds;i=ks;var g=32-Dn(f)-1;f&=~(1<<g),u+=1;var b=32-Dn(r)+g;if(30<b){var _=g-g%5;b=(f&(1<<_)-1).toString(32),f>>=_,g-=_,Ds=1<<32-Dn(r)+g|u<<g|f,ks=b+i}else Ds=1<<b|u<<g|f,ks=i}function bf(i){i.return!==null&&(ei(i,1),Ab(i,1,0))}function xf(i){for(;i===iu;)iu=Sr[--Ar],Sr[Ar]=null,el=Sr[--Ar],Sr[Ar]=null;for(;i===Ni;)Ni=ts[--es],ts[es]=null,ks=ts[--es],ts[es]=null,Ds=ts[--es],ts[es]=null}function Eb(i,r){ts[es++]=Ds,ts[es++]=ks,ts[es++]=Ni,Ds=r.id,ks=r.overflow,Ni=i}var Ze=null,me=null,Yt=!1,Mi=null,ns=!1,wf=Error(n(519));function Di(i){var r=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nl(Jn(r,i)),wf}function Cb(i){var r=i.stateNode,u=i.type,f=i.memoizedProps;switch(r[Qe]=i,r[bn]=f,u){case"dialog":$t("cancel",r),$t("close",r);break;case"iframe":case"object":case"embed":$t("load",r);break;case"video":case"audio":for(u=0;u<El.length;u++)$t(El[u],r);break;case"source":$t("error",r);break;case"img":case"image":case"link":$t("error",r),$t("load",r);break;case"details":$t("toggle",r);break;case"input":$t("invalid",r),Fv(r,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":$t("invalid",r);break;case"textarea":$t("invalid",r),zv(r,f.value,f.defaultValue,f.children)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||r.textContent===""+u||f.suppressHydrationWarning===!0||Vx(r.textContent,u)?(f.popover!=null&&($t("beforetoggle",r),$t("toggle",r)),f.onScroll!=null&&$t("scroll",r),f.onScrollEnd!=null&&$t("scrollend",r),f.onClick!=null&&(r.onclick=Zs),r=!0):r=!1,r||Di(i,!0)}function Tb(i){for(Ze=i.return;Ze;)switch(Ze.tag){case 5:case 31:case 13:ns=!1;return;case 27:case 3:ns=!0;return;default:Ze=Ze.return}}function Er(i){if(i!==Ze)return!1;if(!Yt)return Tb(i),Yt=!0,!1;var r=i.tag,u;if((u=r!==3&&r!==27)&&((u=r===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||Ip(i.type,i.memoizedProps)),u=!u),u&&me&&Di(i),Tb(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));me=Qx(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));me=Qx(i)}else r===27?(r=me,Gi(i.type)?(i=$p,$p=null,me=i):me=r):me=Ze?is(i.stateNode.nextSibling):null;return!0}function Sa(){me=Ze=null,Yt=!1}function Sf(){var i=Mi;return i!==null&&(En===null?En=i:En.push.apply(En,i),Mi=null),i}function nl(i){Mi===null?Mi=[i]:Mi.push(i)}var Af=B(null),Aa=null,ni=null;function ki(i,r,u){tt(Af,r._currentValue),r._currentValue=u}function si(i){i._currentValue=Af.current,X(Af)}function Ef(i,r,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,f!==null&&(f.childLanes|=r)):f!==null&&(f.childLanes&r)!==r&&(f.childLanes|=r),i===u)break;i=i.return}}function Cf(i,r,u,f){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var b=g.dependencies;if(b!==null){var _=g.child;b=b.firstContext;t:for(;b!==null;){var D=b;b=g;for(var F=0;F<r.length;F++)if(D.context===r[F]){b.lanes|=u,D=b.alternate,D!==null&&(D.lanes|=u),Ef(b.return,u,i),f||(_=null);break t}b=D.next}}else if(g.tag===18){if(_=g.return,_===null)throw Error(n(341));_.lanes|=u,b=_.alternate,b!==null&&(b.lanes|=u),Ef(_,u,i),_=null}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===i){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}}function Cr(i,r,u,f){i=null;for(var g=r,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var _=g.alternate;if(_===null)throw Error(n(387));if(_=_.memoizedProps,_!==null){var D=g.type;kn(g.pendingProps.value,_.value)||(i!==null?i.push(D):i=[D])}}else if(g===nt.current){if(_=g.alternate,_===null)throw Error(n(387));_.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Nl):i=[Nl])}g=g.return}i!==null&&Cf(r,i,u,f),r.flags|=262144}function au(i){for(i=i.firstContext;i!==null;){if(!kn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ea(i){Aa=i,ni=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Je(i){return _b(Aa,i)}function ru(i,r){return Aa===null&&Ea(i),_b(i,r)}function _b(i,r){var u=r._currentValue;if(r={context:r,memoizedValue:u,next:null},ni===null){if(i===null)throw Error(n(308));ni=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else ni=ni.next=r;return u}var tN=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(u,f){i.push(f)}};this.abort=function(){r.aborted=!0,i.forEach(function(u){return u()})}},eN=s.unstable_scheduleCallback,nN=s.unstable_NormalPriority,je={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tf(){return{controller:new tN,data:new Map,refCount:0}}function sl(i){i.refCount--,i.refCount===0&&eN(nN,function(){i.controller.abort()})}var il=null,_f=0,Tr=0,_r=null;function sN(i,r){if(il===null){var u=il=[];_f=0,Tr=Mp(),_r={status:"pending",value:void 0,then:function(f){u.push(f)}}}return _f++,r.then(Rb,Rb),r}function Rb(){if(--_f===0&&il!==null){_r!==null&&(_r.status="fulfilled");var i=il;il=null,Tr=0,_r=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function iN(i,r){var u=[],f={status:"pending",value:null,reason:null,then:function(g){u.push(g)}};return i.then(function(){f.status="fulfilled",f.value=r;for(var g=0;g<u.length;g++)(0,u[g])(r)},function(g){for(f.status="rejected",f.reason=g,g=0;g<u.length;g++)(0,u[g])(void 0)}),f}var Nb=P.S;P.S=function(i,r){hx=Ke(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&sN(i,r),Nb!==null&&Nb(i,r)};var Ca=B(null);function Rf(){var i=Ca.current;return i!==null?i:ce.pooledCache}function ou(i,r){r===null?tt(Ca,Ca.current):tt(Ca,r.pool)}function Mb(){var i=Rf();return i===null?null:{parent:je._currentValue,pool:i}}var Rr=Error(n(460)),Nf=Error(n(474)),lu=Error(n(542)),cu={then:function(){}};function Db(i){return i=i.status,i==="fulfilled"||i==="rejected"}function kb(i,r,u){switch(u=i[u],u===void 0?i.push(r):u!==r&&(r.then(Zs,Zs),r=u),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Ob(i),i;default:if(typeof r.status=="string")r.then(Zs,Zs);else{if(i=ce,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=r,i.status="pending",i.then(function(f){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=f}},function(f){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=f}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,Ob(i),i}throw _a=r,Rr}}function Ta(i){try{var r=i._init;return r(i._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(_a=u,Rr):u}}var _a=null;function Lb(){if(_a===null)throw Error(n(459));var i=_a;return _a=null,i}function Ob(i){if(i===Rr||i===lu)throw Error(n(483))}var Nr=null,al=0;function uu(i){var r=al;return al+=1,Nr===null&&(Nr=[]),kb(Nr,i,r)}function rl(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function du(i,r){throw r.$$typeof===y?Error(n(525)):(i=Object.prototype.toString.call(r),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Pb(i){function r(G,V){if(i){var Y=G.deletions;Y===null?(G.deletions=[V],G.flags|=16):Y.push(V)}}function u(G,V){if(!i)return null;for(;V!==null;)r(G,V),V=V.sibling;return null}function f(G){for(var V=new Map;G!==null;)G.key!==null?V.set(G.key,G):V.set(G.index,G),G=G.sibling;return V}function g(G,V){return G=ti(G,V),G.index=0,G.sibling=null,G}function b(G,V,Y){return G.index=Y,i?(Y=G.alternate,Y!==null?(Y=Y.index,Y<V?(G.flags|=67108866,V):Y):(G.flags|=67108866,V)):(G.flags|=1048576,V)}function _(G){return i&&G.alternate===null&&(G.flags|=67108866),G}function D(G,V,Y,at){return V===null||V.tag!==6?(V=yf(Y,G.mode,at),V.return=G,V):(V=g(V,Y),V.return=G,V)}function F(G,V,Y,at){var _t=Y.type;return _t===w?it(G,V,Y.props.children,at,Y.key):V!==null&&(V.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===L&&Ta(_t)===V.type)?(V=g(V,Y.props),rl(V,Y),V.return=G,V):(V=su(Y.type,Y.key,Y.props,null,G.mode,at),rl(V,Y),V.return=G,V)}function W(G,V,Y,at){return V===null||V.tag!==4||V.stateNode.containerInfo!==Y.containerInfo||V.stateNode.implementation!==Y.implementation?(V=vf(Y,G.mode,at),V.return=G,V):(V=g(V,Y.children||[]),V.return=G,V)}function it(G,V,Y,at,_t){return V===null||V.tag!==7?(V=wa(Y,G.mode,at,_t),V.return=G,V):(V=g(V,Y),V.return=G,V)}function rt(G,V,Y){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=yf(""+V,G.mode,Y),V.return=G,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case x:return Y=su(V.type,V.key,V.props,null,G.mode,Y),rl(Y,V),Y.return=G,Y;case S:return V=vf(V,G.mode,Y),V.return=G,V;case L:return V=Ta(V),rt(G,V,Y)}if(ct(V)||$(V))return V=wa(V,G.mode,Y,null),V.return=G,V;if(typeof V.then=="function")return rt(G,uu(V),Y);if(V.$$typeof===R)return rt(G,ru(G,V),Y);du(G,V)}return null}function Q(G,V,Y,at){var _t=V!==null?V.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return _t!==null?null:D(G,V,""+Y,at);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:return Y.key===_t?F(G,V,Y,at):null;case S:return Y.key===_t?W(G,V,Y,at):null;case L:return Y=Ta(Y),Q(G,V,Y,at)}if(ct(Y)||$(Y))return _t!==null?null:it(G,V,Y,at,null);if(typeof Y.then=="function")return Q(G,V,uu(Y),at);if(Y.$$typeof===R)return Q(G,V,ru(G,Y),at);du(G,Y)}return null}function J(G,V,Y,at,_t){if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return G=G.get(Y)||null,D(V,G,""+at,_t);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case x:return G=G.get(at.key===null?Y:at.key)||null,F(V,G,at,_t);case S:return G=G.get(at.key===null?Y:at.key)||null,W(V,G,at,_t);case L:return at=Ta(at),J(G,V,Y,at,_t)}if(ct(at)||$(at))return G=G.get(Y)||null,it(V,G,at,_t,null);if(typeof at.then=="function")return J(G,V,Y,uu(at),_t);if(at.$$typeof===R)return J(G,V,Y,ru(V,at),_t);du(V,at)}return null}function xt(G,V,Y,at){for(var _t=null,te=null,Ct=V,It=V=0,qt=null;Ct!==null&&It<Y.length;It++){Ct.index>It?(qt=Ct,Ct=null):qt=Ct.sibling;var ee=Q(G,Ct,Y[It],at);if(ee===null){Ct===null&&(Ct=qt);break}i&&Ct&&ee.alternate===null&&r(G,Ct),V=b(ee,V,It),te===null?_t=ee:te.sibling=ee,te=ee,Ct=qt}if(It===Y.length)return u(G,Ct),Yt&&ei(G,It),_t;if(Ct===null){for(;It<Y.length;It++)Ct=rt(G,Y[It],at),Ct!==null&&(V=b(Ct,V,It),te===null?_t=Ct:te.sibling=Ct,te=Ct);return Yt&&ei(G,It),_t}for(Ct=f(Ct);It<Y.length;It++)qt=J(Ct,G,It,Y[It],at),qt!==null&&(i&&qt.alternate!==null&&Ct.delete(qt.key===null?It:qt.key),V=b(qt,V,It),te===null?_t=qt:te.sibling=qt,te=qt);return i&&Ct.forEach(function(Ki){return r(G,Ki)}),Yt&&ei(G,It),_t}function Mt(G,V,Y,at){if(Y==null)throw Error(n(151));for(var _t=null,te=null,Ct=V,It=V=0,qt=null,ee=Y.next();Ct!==null&&!ee.done;It++,ee=Y.next()){Ct.index>It?(qt=Ct,Ct=null):qt=Ct.sibling;var Ki=Q(G,Ct,ee.value,at);if(Ki===null){Ct===null&&(Ct=qt);break}i&&Ct&&Ki.alternate===null&&r(G,Ct),V=b(Ki,V,It),te===null?_t=Ki:te.sibling=Ki,te=Ki,Ct=qt}if(ee.done)return u(G,Ct),Yt&&ei(G,It),_t;if(Ct===null){for(;!ee.done;It++,ee=Y.next())ee=rt(G,ee.value,at),ee!==null&&(V=b(ee,V,It),te===null?_t=ee:te.sibling=ee,te=ee);return Yt&&ei(G,It),_t}for(Ct=f(Ct);!ee.done;It++,ee=Y.next())ee=J(Ct,G,It,ee.value,at),ee!==null&&(i&&ee.alternate!==null&&Ct.delete(ee.key===null?It:ee.key),V=b(ee,V,It),te===null?_t=ee:te.sibling=ee,te=ee);return i&&Ct.forEach(function(mM){return r(G,mM)}),Yt&&ei(G,It),_t}function oe(G,V,Y,at){if(typeof Y=="object"&&Y!==null&&Y.type===w&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:t:{for(var _t=Y.key;V!==null;){if(V.key===_t){if(_t=Y.type,_t===w){if(V.tag===7){u(G,V.sibling),at=g(V,Y.props.children),at.return=G,G=at;break t}}else if(V.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===L&&Ta(_t)===V.type){u(G,V.sibling),at=g(V,Y.props),rl(at,Y),at.return=G,G=at;break t}u(G,V);break}else r(G,V);V=V.sibling}Y.type===w?(at=wa(Y.props.children,G.mode,at,Y.key),at.return=G,G=at):(at=su(Y.type,Y.key,Y.props,null,G.mode,at),rl(at,Y),at.return=G,G=at)}return _(G);case S:t:{for(_t=Y.key;V!==null;){if(V.key===_t)if(V.tag===4&&V.stateNode.containerInfo===Y.containerInfo&&V.stateNode.implementation===Y.implementation){u(G,V.sibling),at=g(V,Y.children||[]),at.return=G,G=at;break t}else{u(G,V);break}else r(G,V);V=V.sibling}at=vf(Y,G.mode,at),at.return=G,G=at}return _(G);case L:return Y=Ta(Y),oe(G,V,Y,at)}if(ct(Y))return xt(G,V,Y,at);if($(Y)){if(_t=$(Y),typeof _t!="function")throw Error(n(150));return Y=_t.call(Y),Mt(G,V,Y,at)}if(typeof Y.then=="function")return oe(G,V,uu(Y),at);if(Y.$$typeof===R)return oe(G,V,ru(G,Y),at);du(G,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,V!==null&&V.tag===6?(u(G,V.sibling),at=g(V,Y),at.return=G,G=at):(u(G,V),at=yf(Y,G.mode,at),at.return=G,G=at),_(G)):u(G,V)}return function(G,V,Y,at){try{al=0;var _t=oe(G,V,Y,at);return Nr=null,_t}catch(Ct){if(Ct===Rr||Ct===lu)throw Ct;var te=Ln(29,Ct,null,G.mode);return te.lanes=at,te.return=G,te}}}var Ra=Pb(!0),jb=Pb(!1),Li=!1;function Mf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Df(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Oi(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Pi(i,r,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(ne&2)!==0){var g=f.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),f.pending=r,r=nu(i),bb(i,null,u),r}return eu(i,f,r,u),nu(i)}function ol(i,r,u){if(r=r.updateQueue,r!==null&&(r=r.shared,(u&4194048)!==0)){var f=r.lanes;f&=i.pendingLanes,u|=f,r.lanes=u,_v(i,u)}}function kf(i,r){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var _={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?g=b=_:b=b.next=_,u=u.next}while(u!==null);b===null?g=b=r:b=b.next=r}else g=b=r;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=r:i.next=r,u.lastBaseUpdate=r}var Lf=!1;function ll(){if(Lf){var i=_r;if(i!==null)throw i}}function cl(i,r,u,f){Lf=!1;var g=i.updateQueue;Li=!1;var b=g.firstBaseUpdate,_=g.lastBaseUpdate,D=g.shared.pending;if(D!==null){g.shared.pending=null;var F=D,W=F.next;F.next=null,_===null?b=W:_.next=W,_=F;var it=i.alternate;it!==null&&(it=it.updateQueue,D=it.lastBaseUpdate,D!==_&&(D===null?it.firstBaseUpdate=W:D.next=W,it.lastBaseUpdate=F))}if(b!==null){var rt=g.baseState;_=0,it=W=F=null,D=b;do{var Q=D.lane&-536870913,J=Q!==D.lane;if(J?(Gt&Q)===Q:(f&Q)===Q){Q!==0&&Q===Tr&&(Lf=!0),it!==null&&(it=it.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});t:{var xt=i,Mt=D;Q=r;var oe=u;switch(Mt.tag){case 1:if(xt=Mt.payload,typeof xt=="function"){rt=xt.call(oe,rt,Q);break t}rt=xt;break t;case 3:xt.flags=xt.flags&-65537|128;case 0:if(xt=Mt.payload,Q=typeof xt=="function"?xt.call(oe,rt,Q):xt,Q==null)break t;rt=m({},rt,Q);break t;case 2:Li=!0}}Q=D.callback,Q!==null&&(i.flags|=64,J&&(i.flags|=8192),J=g.callbacks,J===null?g.callbacks=[Q]:J.push(Q))}else J={lane:Q,tag:D.tag,payload:D.payload,callback:D.callback,next:null},it===null?(W=it=J,F=rt):it=it.next=J,_|=Q;if(D=D.next,D===null){if(D=g.shared.pending,D===null)break;J=D,D=J.next,J.next=null,g.lastBaseUpdate=J,g.shared.pending=null}}while(!0);it===null&&(F=rt),g.baseState=F,g.firstBaseUpdate=W,g.lastBaseUpdate=it,b===null&&(g.shared.lanes=0),zi|=_,i.lanes=_,i.memoizedState=rt}}function Bb(i,r){if(typeof i!="function")throw Error(n(191,i));i.call(r)}function Fb(i,r){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)Bb(u[i],r)}var Mr=B(null),hu=B(0);function Ib(i,r){i=hi,tt(hu,i),tt(Mr,r),hi=i|r.baseLanes}function Of(){tt(hu,hi),tt(Mr,Mr.current)}function Pf(){hi=hu.current,X(Mr),X(hu)}var On=B(null),ss=null;function ji(i){var r=i.alternate;tt(De,De.current&1),tt(On,i),ss===null&&(r===null||Mr.current!==null||r.memoizedState!==null)&&(ss=i)}function jf(i){tt(De,De.current),tt(On,i),ss===null&&(ss=i)}function zb(i){i.tag===22?(tt(De,De.current),tt(On,i),ss===null&&(ss=i)):Bi()}function Bi(){tt(De,De.current),tt(On,On.current)}function Pn(i){X(On),ss===i&&(ss=null),X(De)}var De=B(0);function fu(i){for(var r=i;r!==null;){if(r.tag===13){var u=r.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Vp(u)||Hp(u)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ii=0,Ft=null,ae=null,Be=null,pu=!1,Dr=!1,Na=!1,mu=0,ul=0,kr=null,aN=0;function _e(){throw Error(n(321))}function Bf(i,r){if(r===null)return!1;for(var u=0;u<r.length&&u<i.length;u++)if(!kn(i[u],r[u]))return!1;return!0}function Ff(i,r,u,f,g,b){return ii=b,Ft=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,P.H=i===null||i.memoizedState===null?A0:Jf,Na=!1,b=u(f,g),Na=!1,Dr&&(b=Vb(r,u,f,g)),Ub(i),b}function Ub(i){P.H=fl;var r=ae!==null&&ae.next!==null;if(ii=0,Be=ae=Ft=null,pu=!1,ul=0,kr=null,r)throw Error(n(300));i===null||Fe||(i=i.dependencies,i!==null&&au(i)&&(Fe=!0))}function Vb(i,r,u,f){Ft=i;var g=0;do{if(Dr&&(kr=null),ul=0,Dr=!1,25<=g)throw Error(n(301));if(g+=1,Be=ae=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}P.H=E0,b=r(u,f)}while(Dr);return b}function rN(){var i=P.H,r=i.useState()[0];return r=typeof r.then=="function"?dl(r):r,i=i.useState()[0],(ae!==null?ae.memoizedState:null)!==i&&(Ft.flags|=1024),r}function If(){var i=mu!==0;return mu=0,i}function zf(i,r,u){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~u}function Uf(i){if(pu){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}pu=!1}ii=0,Be=ae=Ft=null,Dr=!1,ul=mu=0,kr=null}function hn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Ft.memoizedState=Be=i:Be=Be.next=i,Be}function ke(){if(ae===null){var i=Ft.alternate;i=i!==null?i.memoizedState:null}else i=ae.next;var r=Be===null?Ft.memoizedState:Be.next;if(r!==null)Be=r,ae=i;else{if(i===null)throw Ft.alternate===null?Error(n(467)):Error(n(310));ae=i,i={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},Be===null?Ft.memoizedState=Be=i:Be=Be.next=i}return Be}function gu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dl(i){var r=ul;return ul+=1,kr===null&&(kr=[]),i=kb(kr,i,r),r=Ft,(Be===null?r.memoizedState:Be.next)===null&&(r=r.alternate,P.H=r===null||r.memoizedState===null?A0:Jf),i}function yu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return dl(i);if(i.$$typeof===R)return Je(i)}throw Error(n(438,String(i)))}function Vf(i){var r=null,u=Ft.updateQueue;if(u!==null&&(r=u.memoCache),r==null){var f=Ft.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(r={data:f.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),u===null&&(u=gu(),Ft.updateQueue=u),u.memoCache=r,u=r.data[r.index],u===void 0)for(u=r.data[r.index]=Array(i),f=0;f<i;f++)u[f]=U;return r.index++,u}function ai(i,r){return typeof r=="function"?r(i):r}function vu(i){var r=ke();return Hf(r,ae,i)}function Hf(i,r,u){var f=i.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=u;var g=i.baseQueue,b=f.pending;if(b!==null){if(g!==null){var _=g.next;g.next=b.next,b.next=_}r.baseQueue=g=b,f.pending=null}if(b=i.baseState,g===null)i.memoizedState=b;else{r=g.next;var D=_=null,F=null,W=r,it=!1;do{var rt=W.lane&-536870913;if(rt!==W.lane?(Gt&rt)===rt:(ii&rt)===rt){var Q=W.revertLane;if(Q===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),rt===Tr&&(it=!0);else if((ii&Q)===Q){W=W.next,Q===Tr&&(it=!0);continue}else rt={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},F===null?(D=F=rt,_=b):F=F.next=rt,Ft.lanes|=Q,zi|=Q;rt=W.action,Na&&u(b,rt),b=W.hasEagerState?W.eagerState:u(b,rt)}else Q={lane:rt,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},F===null?(D=F=Q,_=b):F=F.next=Q,Ft.lanes|=rt,zi|=rt;W=W.next}while(W!==null&&W!==r);if(F===null?_=b:F.next=D,!kn(b,i.memoizedState)&&(Fe=!0,it&&(u=_r,u!==null)))throw u;i.memoizedState=b,i.baseState=_,i.baseQueue=F,f.lastRenderedState=b}return g===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function $f(i){var r=ke(),u=r.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=i;var f=u.dispatch,g=u.pending,b=r.memoizedState;if(g!==null){u.pending=null;var _=g=g.next;do b=i(b,_.action),_=_.next;while(_!==g);kn(b,r.memoizedState)||(Fe=!0),r.memoizedState=b,r.baseQueue===null&&(r.baseState=b),u.lastRenderedState=b}return[b,f]}function Hb(i,r,u){var f=Ft,g=ke(),b=Yt;if(b){if(u===void 0)throw Error(n(407));u=u()}else u=r();var _=!kn((ae||g).memoizedState,u);if(_&&(g.memoizedState=u,Fe=!0),g=g.queue,Xf(qb.bind(null,f,g,i),[i]),g.getSnapshot!==r||_||Be!==null&&Be.memoizedState.tag&1){if(f.flags|=2048,Lr(9,{destroy:void 0},Gb.bind(null,f,g,u,r),null),ce===null)throw Error(n(349));b||(ii&127)!==0||$b(f,r,u)}return u}function $b(i,r,u){i.flags|=16384,i={getSnapshot:r,value:u},r=Ft.updateQueue,r===null?(r=gu(),Ft.updateQueue=r,r.stores=[i]):(u=r.stores,u===null?r.stores=[i]:u.push(i))}function Gb(i,r,u,f){r.value=u,r.getSnapshot=f,Xb(r)&&Yb(i)}function qb(i,r,u){return u(function(){Xb(r)&&Yb(i)})}function Xb(i){var r=i.getSnapshot;i=i.value;try{var u=r();return!kn(i,u)}catch{return!0}}function Yb(i){var r=xa(i,2);r!==null&&Cn(r,i,2)}function Gf(i){var r=hn();if(typeof i=="function"){var u=i;if(i=u(),Na){Wn(!0);try{u()}finally{Wn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:i},r}function Wb(i,r,u,f){return i.baseState=u,Hf(i,ae,typeof f=="function"?f:ai)}function oN(i,r,u,f,g){if(wu(i))throw Error(n(485));if(i=r.action,i!==null){var b={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){b.listeners.push(_)}};P.T!==null?u(!0):b.isTransition=!1,f(b),u=r.pending,u===null?(b.next=r.pending=b,Kb(r,b)):(b.next=u.next,r.pending=u.next=b)}}function Kb(i,r){var u=r.action,f=r.payload,g=i.state;if(r.isTransition){var b=P.T,_={};P.T=_;try{var D=u(g,f),F=P.S;F!==null&&F(_,D),Qb(i,r,D)}catch(W){qf(i,r,W)}finally{b!==null&&_.types!==null&&(b.types=_.types),P.T=b}}else try{b=u(g,f),Qb(i,r,b)}catch(W){qf(i,r,W)}}function Qb(i,r,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){Zb(i,r,f)},function(f){return qf(i,r,f)}):Zb(i,r,u)}function Zb(i,r,u){r.status="fulfilled",r.value=u,Jb(r),i.state=u,r=i.pending,r!==null&&(u=r.next,u===r?i.pending=null:(u=u.next,r.next=u,Kb(i,u)))}function qf(i,r,u){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do r.status="rejected",r.reason=u,Jb(r),r=r.next;while(r!==f)}i.action=null}function Jb(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function t0(i,r){return r}function e0(i,r){if(Yt){var u=ce.formState;if(u!==null){t:{var f=Ft;if(Yt){if(me){e:{for(var g=me,b=ns;g.nodeType!==8;){if(!b){g=null;break e}if(g=is(g.nextSibling),g===null){g=null;break e}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){me=is(g.nextSibling),f=g.data==="F!";break t}}Di(f)}f=!1}f&&(r=u[0])}}return u=hn(),u.memoizedState=u.baseState=r,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t0,lastRenderedState:r},u.queue=f,u=x0.bind(null,Ft,f),f.dispatch=u,f=Gf(!1),b=Zf.bind(null,Ft,!1,f.queue),f=hn(),g={state:r,dispatch:null,action:i,pending:null},f.queue=g,u=oN.bind(null,Ft,g,b,u),g.dispatch=u,f.memoizedState=i,[r,u,!1]}function n0(i){var r=ke();return s0(r,ae,i)}function s0(i,r,u){if(r=Hf(i,r,t0)[0],i=vu(ai)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var f=dl(r)}catch(_){throw _===Rr?lu:_}else f=r;r=ke();var g=r.queue,b=g.dispatch;return u!==r.memoizedState&&(Ft.flags|=2048,Lr(9,{destroy:void 0},lN.bind(null,g,u),null)),[f,b,i]}function lN(i,r){i.action=r}function i0(i){var r=ke(),u=ae;if(u!==null)return s0(r,u,i);ke(),r=r.memoizedState,u=ke();var f=u.queue.dispatch;return u.memoizedState=i,[r,f,!1]}function Lr(i,r,u,f){return i={tag:i,create:u,deps:f,inst:r,next:null},r=Ft.updateQueue,r===null&&(r=gu(),Ft.updateQueue=r),u=r.lastEffect,u===null?r.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,r.lastEffect=i),i}function a0(){return ke().memoizedState}function bu(i,r,u,f){var g=hn();Ft.flags|=i,g.memoizedState=Lr(1|r,{destroy:void 0},u,f===void 0?null:f)}function xu(i,r,u,f){var g=ke();f=f===void 0?null:f;var b=g.memoizedState.inst;ae!==null&&f!==null&&Bf(f,ae.memoizedState.deps)?g.memoizedState=Lr(r,b,u,f):(Ft.flags|=i,g.memoizedState=Lr(1|r,b,u,f))}function r0(i,r){bu(8390656,8,i,r)}function Xf(i,r){xu(2048,8,i,r)}function cN(i){Ft.flags|=4;var r=Ft.updateQueue;if(r===null)r=gu(),Ft.updateQueue=r,r.events=[i];else{var u=r.events;u===null?r.events=[i]:u.push(i)}}function o0(i){var r=ke().memoizedState;return cN({ref:r,nextImpl:i}),function(){if((ne&2)!==0)throw Error(n(440));return r.impl.apply(void 0,arguments)}}function l0(i,r){return xu(4,2,i,r)}function c0(i,r){return xu(4,4,i,r)}function u0(i,r){if(typeof r=="function"){i=i();var u=r(i);return function(){typeof u=="function"?u():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function d0(i,r,u){u=u!=null?u.concat([i]):null,xu(4,4,u0.bind(null,r,i),u)}function Yf(){}function h0(i,r){var u=ke();r=r===void 0?null:r;var f=u.memoizedState;return r!==null&&Bf(r,f[1])?f[0]:(u.memoizedState=[i,r],i)}function f0(i,r){var u=ke();r=r===void 0?null:r;var f=u.memoizedState;if(r!==null&&Bf(r,f[1]))return f[0];if(f=i(),Na){Wn(!0);try{i()}finally{Wn(!1)}}return u.memoizedState=[f,r],f}function Wf(i,r,u){return u===void 0||(ii&1073741824)!==0&&(Gt&261930)===0?i.memoizedState=r:(i.memoizedState=u,i=px(),Ft.lanes|=i,zi|=i,u)}function p0(i,r,u,f){return kn(u,r)?u:Mr.current!==null?(i=Wf(i,u,f),kn(i,r)||(Fe=!0),i):(ii&42)===0||(ii&1073741824)!==0&&(Gt&261930)===0?(Fe=!0,i.memoizedState=u):(i=px(),Ft.lanes|=i,zi|=i,r)}function m0(i,r,u,f,g){var b=z.p;z.p=b!==0&&8>b?b:8;var _=P.T,D={};P.T=D,Zf(i,!1,r,u);try{var F=g(),W=P.S;if(W!==null&&W(D,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var it=iN(F,f);hl(i,r,it,Fn(i))}else hl(i,r,f,Fn(i))}catch(rt){hl(i,r,{then:function(){},status:"rejected",reason:rt},Fn())}finally{z.p=b,_!==null&&D.types!==null&&(_.types=D.types),P.T=_}}function uN(){}function Kf(i,r,u,f){if(i.tag!==5)throw Error(n(476));var g=g0(i).queue;m0(i,g,r,I,u===null?uN:function(){return y0(i),u(f)})}function g0(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:I},next:null};var u={};return r.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:u},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function y0(i){var r=g0(i);r.next===null&&(r=i.alternate.memoizedState),hl(i,r.next.queue,{},Fn())}function Qf(){return Je(Nl)}function v0(){return ke().memoizedState}function b0(){return ke().memoizedState}function dN(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var u=Fn();i=Oi(u);var f=Pi(r,i,u);f!==null&&(Cn(f,r,u),ol(f,r,u)),r={cache:Tf()},i.payload=r;return}r=r.return}}function hN(i,r,u){var f=Fn();u={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},wu(i)?w0(r,u):(u=mf(i,r,u,f),u!==null&&(Cn(u,i,f),S0(u,r,f)))}function x0(i,r,u){var f=Fn();hl(i,r,u,f)}function hl(i,r,u,f){var g={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(wu(i))w0(r,g);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=r.lastRenderedReducer,b!==null))try{var _=r.lastRenderedState,D=b(_,u);if(g.hasEagerState=!0,g.eagerState=D,kn(D,_))return eu(i,r,g,0),ce===null&&tu(),!1}catch{}if(u=mf(i,r,g,f),u!==null)return Cn(u,i,f),S0(u,r,f),!0}return!1}function Zf(i,r,u,f){if(f={lane:2,revertLane:Mp(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},wu(i)){if(r)throw Error(n(479))}else r=mf(i,u,f,2),r!==null&&Cn(r,i,2)}function wu(i){var r=i.alternate;return i===Ft||r!==null&&r===Ft}function w0(i,r){Dr=pu=!0;var u=i.pending;u===null?r.next=r:(r.next=u.next,u.next=r),i.pending=r}function S0(i,r,u){if((u&4194048)!==0){var f=r.lanes;f&=i.pendingLanes,u|=f,r.lanes=u,_v(i,u)}}var fl={readContext:Je,use:yu,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useLayoutEffect:_e,useInsertionEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useSyncExternalStore:_e,useId:_e,useHostTransitionStatus:_e,useFormState:_e,useActionState:_e,useOptimistic:_e,useMemoCache:_e,useCacheRefresh:_e};fl.useEffectEvent=_e;var A0={readContext:Je,use:yu,useCallback:function(i,r){return hn().memoizedState=[i,r===void 0?null:r],i},useContext:Je,useEffect:r0,useImperativeHandle:function(i,r,u){u=u!=null?u.concat([i]):null,bu(4194308,4,u0.bind(null,r,i),u)},useLayoutEffect:function(i,r){return bu(4194308,4,i,r)},useInsertionEffect:function(i,r){bu(4,2,i,r)},useMemo:function(i,r){var u=hn();r=r===void 0?null:r;var f=i();if(Na){Wn(!0);try{i()}finally{Wn(!1)}}return u.memoizedState=[f,r],f},useReducer:function(i,r,u){var f=hn();if(u!==void 0){var g=u(r);if(Na){Wn(!0);try{u(r)}finally{Wn(!1)}}}else g=r;return f.memoizedState=f.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},f.queue=i,i=i.dispatch=hN.bind(null,Ft,i),[f.memoizedState,i]},useRef:function(i){var r=hn();return i={current:i},r.memoizedState=i},useState:function(i){i=Gf(i);var r=i.queue,u=x0.bind(null,Ft,r);return r.dispatch=u,[i.memoizedState,u]},useDebugValue:Yf,useDeferredValue:function(i,r){var u=hn();return Wf(u,i,r)},useTransition:function(){var i=Gf(!1);return i=m0.bind(null,Ft,i.queue,!0,!1),hn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,u){var f=Ft,g=hn();if(Yt){if(u===void 0)throw Error(n(407));u=u()}else{if(u=r(),ce===null)throw Error(n(349));(Gt&127)!==0||$b(f,r,u)}g.memoizedState=u;var b={value:u,getSnapshot:r};return g.queue=b,r0(qb.bind(null,f,b,i),[i]),f.flags|=2048,Lr(9,{destroy:void 0},Gb.bind(null,f,b,u,r),null),u},useId:function(){var i=hn(),r=ce.identifierPrefix;if(Yt){var u=ks,f=Ds;u=(f&~(1<<32-Dn(f)-1)).toString(32)+u,r="_"+r+"R_"+u,u=mu++,0<u&&(r+="H"+u.toString(32)),r+="_"}else u=aN++,r="_"+r+"r_"+u.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Qf,useFormState:e0,useActionState:e0,useOptimistic:function(i){var r=hn();r.memoizedState=r.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=u,r=Zf.bind(null,Ft,!0,u),u.dispatch=r,[i,r]},useMemoCache:Vf,useCacheRefresh:function(){return hn().memoizedState=dN.bind(null,Ft)},useEffectEvent:function(i){var r=hn(),u={impl:i};return r.memoizedState=u,function(){if((ne&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}},Jf={readContext:Je,use:yu,useCallback:h0,useContext:Je,useEffect:Xf,useImperativeHandle:d0,useInsertionEffect:l0,useLayoutEffect:c0,useMemo:f0,useReducer:vu,useRef:a0,useState:function(){return vu(ai)},useDebugValue:Yf,useDeferredValue:function(i,r){var u=ke();return p0(u,ae.memoizedState,i,r)},useTransition:function(){var i=vu(ai)[0],r=ke().memoizedState;return[typeof i=="boolean"?i:dl(i),r]},useSyncExternalStore:Hb,useId:v0,useHostTransitionStatus:Qf,useFormState:n0,useActionState:n0,useOptimistic:function(i,r){var u=ke();return Wb(u,ae,i,r)},useMemoCache:Vf,useCacheRefresh:b0};Jf.useEffectEvent=o0;var E0={readContext:Je,use:yu,useCallback:h0,useContext:Je,useEffect:Xf,useImperativeHandle:d0,useInsertionEffect:l0,useLayoutEffect:c0,useMemo:f0,useReducer:$f,useRef:a0,useState:function(){return $f(ai)},useDebugValue:Yf,useDeferredValue:function(i,r){var u=ke();return ae===null?Wf(u,i,r):p0(u,ae.memoizedState,i,r)},useTransition:function(){var i=$f(ai)[0],r=ke().memoizedState;return[typeof i=="boolean"?i:dl(i),r]},useSyncExternalStore:Hb,useId:v0,useHostTransitionStatus:Qf,useFormState:i0,useActionState:i0,useOptimistic:function(i,r){var u=ke();return ae!==null?Wb(u,ae,i,r):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:Vf,useCacheRefresh:b0};E0.useEffectEvent=o0;function tp(i,r,u,f){r=i.memoizedState,u=u(f,r),u=u==null?r:m({},r,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var ep={enqueueSetState:function(i,r,u){i=i._reactInternals;var f=Fn(),g=Oi(f);g.payload=r,u!=null&&(g.callback=u),r=Pi(i,g,f),r!==null&&(Cn(r,i,f),ol(r,i,f))},enqueueReplaceState:function(i,r,u){i=i._reactInternals;var f=Fn(),g=Oi(f);g.tag=1,g.payload=r,u!=null&&(g.callback=u),r=Pi(i,g,f),r!==null&&(Cn(r,i,f),ol(r,i,f))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var u=Fn(),f=Oi(u);f.tag=2,r!=null&&(f.callback=r),r=Pi(i,f,u),r!==null&&(Cn(r,i,u),ol(r,i,u))}};function C0(i,r,u,f,g,b,_){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,b,_):r.prototype&&r.prototype.isPureReactComponent?!Jo(u,f)||!Jo(g,b):!0}function T0(i,r,u,f){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(u,f),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(u,f),r.state!==i&&ep.enqueueReplaceState(r,r.state,null)}function Ma(i,r){var u=r;if("ref"in r){u={};for(var f in r)f!=="ref"&&(u[f]=r[f])}if(i=i.defaultProps){u===r&&(u=m({},u));for(var g in i)u[g]===void 0&&(u[g]=i[g])}return u}function _0(i){Jc(i)}function R0(i){console.error(i)}function N0(i){Jc(i)}function Su(i,r){try{var u=i.onUncaughtError;u(r.value,{componentStack:r.stack})}catch(f){setTimeout(function(){throw f})}}function M0(i,r,u){try{var f=i.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function np(i,r,u){return u=Oi(u),u.tag=3,u.payload={element:null},u.callback=function(){Su(i,r)},u}function D0(i){return i=Oi(i),i.tag=3,i}function k0(i,r,u,f){var g=u.type.getDerivedStateFromError;if(typeof g=="function"){var b=f.value;i.payload=function(){return g(b)},i.callback=function(){M0(r,u,f)}}var _=u.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(i.callback=function(){M0(r,u,f),typeof g!="function"&&(Ui===null?Ui=new Set([this]):Ui.add(this));var D=f.stack;this.componentDidCatch(f.value,{componentStack:D!==null?D:""})})}function fN(i,r,u,f,g){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(r=u.alternate,r!==null&&Cr(r,u,g,!0),u=On.current,u!==null){switch(u.tag){case 31:case 13:return ss===null?Ou():u.alternate===null&&Re===0&&(Re=3),u.flags&=-257,u.flags|=65536,u.lanes=g,f===cu?u.flags|=16384:(r=u.updateQueue,r===null?u.updateQueue=new Set([f]):r.add(f),_p(i,f,g)),!1;case 22:return u.flags|=65536,f===cu?u.flags|=16384:(r=u.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=r):(u=r.retryQueue,u===null?r.retryQueue=new Set([f]):u.add(f)),_p(i,f,g)),!1}throw Error(n(435,u.tag))}return _p(i,f,g),Ou(),!1}if(Yt)return r=On.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,f!==wf&&(i=Error(n(422),{cause:f}),nl(Jn(i,u)))):(f!==wf&&(r=Error(n(423),{cause:f}),nl(Jn(r,u))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,f=Jn(f,u),g=np(i.stateNode,f,g),kf(i,g),Re!==4&&(Re=2)),!1;var b=Error(n(520),{cause:f});if(b=Jn(b,u),wl===null?wl=[b]:wl.push(b),Re!==4&&(Re=2),r===null)return!0;f=Jn(f,u),u=r;do{switch(u.tag){case 3:return u.flags|=65536,i=g&-g,u.lanes|=i,i=np(u.stateNode,f,i),kf(u,i),!1;case 1:if(r=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ui===null||!Ui.has(b))))return u.flags|=65536,g&=-g,u.lanes|=g,g=D0(g),k0(g,i,u,f),kf(u,g),!1}u=u.return}while(u!==null);return!1}var sp=Error(n(461)),Fe=!1;function tn(i,r,u,f){r.child=i===null?jb(r,null,u,f):Ra(r,i.child,u,f)}function L0(i,r,u,f,g){u=u.render;var b=r.ref;if("ref"in f){var _={};for(var D in f)D!=="ref"&&(_[D]=f[D])}else _=f;return Ea(r),f=Ff(i,r,u,_,b,g),D=If(),i!==null&&!Fe?(zf(i,r,g),ri(i,r,g)):(Yt&&D&&bf(r),r.flags|=1,tn(i,r,f,g),r.child)}function O0(i,r,u,f,g){if(i===null){var b=u.type;return typeof b=="function"&&!gf(b)&&b.defaultProps===void 0&&u.compare===null?(r.tag=15,r.type=b,P0(i,r,b,f,g)):(i=su(u.type,null,f,r,r.mode,g),i.ref=r.ref,i.return=r,r.child=i)}if(b=i.child,!dp(i,g)){var _=b.memoizedProps;if(u=u.compare,u=u!==null?u:Jo,u(_,f)&&i.ref===r.ref)return ri(i,r,g)}return r.flags|=1,i=ti(b,f),i.ref=r.ref,i.return=r,r.child=i}function P0(i,r,u,f,g){if(i!==null){var b=i.memoizedProps;if(Jo(b,f)&&i.ref===r.ref)if(Fe=!1,r.pendingProps=f=b,dp(i,g))(i.flags&131072)!==0&&(Fe=!0);else return r.lanes=i.lanes,ri(i,r,g)}return ip(i,r,u,f,g)}function j0(i,r,u,f){var g=f.children,b=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((r.flags&128)!==0){if(b=b!==null?b.baseLanes|u:u,i!==null){for(f=r.child=i.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;f=g&~b}else f=0,r.child=null;return B0(i,r,b,u,f)}if((u&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&ou(r,b!==null?b.cachePool:null),b!==null?Ib(r,b):Of(),zb(r);else return f=r.lanes=536870912,B0(i,r,b!==null?b.baseLanes|u:u,u,f)}else b!==null?(ou(r,b.cachePool),Ib(r,b),Bi(),r.memoizedState=null):(i!==null&&ou(r,null),Of(),Bi());return tn(i,r,g,u),r.child}function pl(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function B0(i,r,u,f,g){var b=Rf();return b=b===null?null:{parent:je._currentValue,pool:b},r.memoizedState={baseLanes:u,cachePool:b},i!==null&&ou(r,null),Of(),zb(r),i!==null&&Cr(i,r,f,!0),r.childLanes=g,null}function Au(i,r){return r=Cu({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function F0(i,r,u){return Ra(r,i.child,null,u),i=Au(r,r.pendingProps),i.flags|=2,Pn(r),r.memoizedState=null,i}function pN(i,r,u){var f=r.pendingProps,g=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(Yt){if(f.mode==="hidden")return i=Au(r,f),r.lanes=536870912,pl(null,i);if(jf(r),(i=me)?(i=Kx(i,ns),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ni!==null?{id:Ds,overflow:ks}:null,retryLane:536870912,hydrationErrors:null},u=wb(i),u.return=r,r.child=u,Ze=r,me=null)):i=null,i===null)throw Di(r);return r.lanes=536870912,null}return Au(r,f)}var b=i.memoizedState;if(b!==null){var _=b.dehydrated;if(jf(r),g)if(r.flags&256)r.flags&=-257,r=F0(i,r,u);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(n(558));else if(Fe||Cr(i,r,u,!1),g=(u&i.childLanes)!==0,Fe||g){if(f=ce,f!==null&&(_=Rv(f,u),_!==0&&_!==b.retryLane))throw b.retryLane=_,xa(i,_),Cn(f,i,_),sp;Ou(),r=F0(i,r,u)}else i=b.treeContext,me=is(_.nextSibling),Ze=r,Yt=!0,Mi=null,ns=!1,i!==null&&Eb(r,i),r=Au(r,f),r.flags|=4096;return r}return i=ti(i.child,{mode:f.mode,children:f.children}),i.ref=r.ref,r.child=i,i.return=r,i}function Eu(i,r){var u=r.ref;if(u===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(i===null||i.ref!==u)&&(r.flags|=4194816)}}function ip(i,r,u,f,g){return Ea(r),u=Ff(i,r,u,f,void 0,g),f=If(),i!==null&&!Fe?(zf(i,r,g),ri(i,r,g)):(Yt&&f&&bf(r),r.flags|=1,tn(i,r,u,g),r.child)}function I0(i,r,u,f,g,b){return Ea(r),r.updateQueue=null,u=Vb(r,f,u,g),Ub(i),f=If(),i!==null&&!Fe?(zf(i,r,b),ri(i,r,b)):(Yt&&f&&bf(r),r.flags|=1,tn(i,r,u,b),r.child)}function z0(i,r,u,f,g){if(Ea(r),r.stateNode===null){var b=wr,_=u.contextType;typeof _=="object"&&_!==null&&(b=Je(_)),b=new u(f,b),r.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=ep,r.stateNode=b,b._reactInternals=r,b=r.stateNode,b.props=f,b.state=r.memoizedState,b.refs={},Mf(r),_=u.contextType,b.context=typeof _=="object"&&_!==null?Je(_):wr,b.state=r.memoizedState,_=u.getDerivedStateFromProps,typeof _=="function"&&(tp(r,u,_,f),b.state=r.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(_=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),_!==b.state&&ep.enqueueReplaceState(b,b.state,null),cl(r,f,b,g),ll(),b.state=r.memoizedState),typeof b.componentDidMount=="function"&&(r.flags|=4194308),f=!0}else if(i===null){b=r.stateNode;var D=r.memoizedProps,F=Ma(u,D);b.props=F;var W=b.context,it=u.contextType;_=wr,typeof it=="object"&&it!==null&&(_=Je(it));var rt=u.getDerivedStateFromProps;it=typeof rt=="function"||typeof b.getSnapshotBeforeUpdate=="function",D=r.pendingProps!==D,it||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(D||W!==_)&&T0(r,b,f,_),Li=!1;var Q=r.memoizedState;b.state=Q,cl(r,f,b,g),ll(),W=r.memoizedState,D||Q!==W||Li?(typeof rt=="function"&&(tp(r,u,rt,f),W=r.memoizedState),(F=Li||C0(r,u,F,f,Q,W,_))?(it||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(r.flags|=4194308)):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=f,r.memoizedState=W),b.props=f,b.state=W,b.context=_,f=F):(typeof b.componentDidMount=="function"&&(r.flags|=4194308),f=!1)}else{b=r.stateNode,Df(i,r),_=r.memoizedProps,it=Ma(u,_),b.props=it,rt=r.pendingProps,Q=b.context,W=u.contextType,F=wr,typeof W=="object"&&W!==null&&(F=Je(W)),D=u.getDerivedStateFromProps,(W=typeof D=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(_!==rt||Q!==F)&&T0(r,b,f,F),Li=!1,Q=r.memoizedState,b.state=Q,cl(r,f,b,g),ll();var J=r.memoizedState;_!==rt||Q!==J||Li||i!==null&&i.dependencies!==null&&au(i.dependencies)?(typeof D=="function"&&(tp(r,u,D,f),J=r.memoizedState),(it=Li||C0(r,u,it,f,Q,J,F)||i!==null&&i.dependencies!==null&&au(i.dependencies))?(W||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,J,F),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,J,F)),typeof b.componentDidUpdate=="function"&&(r.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof b.componentDidUpdate!="function"||_===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),r.memoizedProps=f,r.memoizedState=J),b.props=f,b.state=J,b.context=F,f=it):(typeof b.componentDidUpdate!="function"||_===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),f=!1)}return b=f,Eu(i,r),f=(r.flags&128)!==0,b||f?(b=r.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:b.render(),r.flags|=1,i!==null&&f?(r.child=Ra(r,i.child,null,g),r.child=Ra(r,null,u,g)):tn(i,r,u,g),r.memoizedState=b.state,i=r.child):i=ri(i,r,g),i}function U0(i,r,u,f){return Sa(),r.flags|=256,tn(i,r,u,f),r.child}var ap={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rp(i){return{baseLanes:i,cachePool:Mb()}}function op(i,r,u){return i=i!==null?i.childLanes&~u:0,r&&(i|=Bn),i}function V0(i,r,u){var f=r.pendingProps,g=!1,b=(r.flags&128)!==0,_;if((_=b)||(_=i!==null&&i.memoizedState===null?!1:(De.current&2)!==0),_&&(g=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,i===null){if(Yt){if(g?ji(r):Bi(),(i=me)?(i=Kx(i,ns),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:Ni!==null?{id:Ds,overflow:ks}:null,retryLane:536870912,hydrationErrors:null},u=wb(i),u.return=r,r.child=u,Ze=r,me=null)):i=null,i===null)throw Di(r);return Hp(i)?r.lanes=32:r.lanes=536870912,null}var D=f.children;return f=f.fallback,g?(Bi(),g=r.mode,D=Cu({mode:"hidden",children:D},g),f=wa(f,g,u,null),D.return=r,f.return=r,D.sibling=f,r.child=D,f=r.child,f.memoizedState=rp(u),f.childLanes=op(i,_,u),r.memoizedState=ap,pl(null,f)):(ji(r),lp(r,D))}var F=i.memoizedState;if(F!==null&&(D=F.dehydrated,D!==null)){if(b)r.flags&256?(ji(r),r.flags&=-257,r=cp(i,r,u)):r.memoizedState!==null?(Bi(),r.child=i.child,r.flags|=128,r=null):(Bi(),D=f.fallback,g=r.mode,f=Cu({mode:"visible",children:f.children},g),D=wa(D,g,u,null),D.flags|=2,f.return=r,D.return=r,f.sibling=D,r.child=f,Ra(r,i.child,null,u),f=r.child,f.memoizedState=rp(u),f.childLanes=op(i,_,u),r.memoizedState=ap,r=pl(null,f));else if(ji(r),Hp(D)){if(_=D.nextSibling&&D.nextSibling.dataset,_)var W=_.dgst;_=W,f=Error(n(419)),f.stack="",f.digest=_,nl({value:f,source:null,stack:null}),r=cp(i,r,u)}else if(Fe||Cr(i,r,u,!1),_=(u&i.childLanes)!==0,Fe||_){if(_=ce,_!==null&&(f=Rv(_,u),f!==0&&f!==F.retryLane))throw F.retryLane=f,xa(i,f),Cn(_,i,f),sp;Vp(D)||Ou(),r=cp(i,r,u)}else Vp(D)?(r.flags|=192,r.child=i.child,r=null):(i=F.treeContext,me=is(D.nextSibling),Ze=r,Yt=!0,Mi=null,ns=!1,i!==null&&Eb(r,i),r=lp(r,f.children),r.flags|=4096);return r}return g?(Bi(),D=f.fallback,g=r.mode,F=i.child,W=F.sibling,f=ti(F,{mode:"hidden",children:f.children}),f.subtreeFlags=F.subtreeFlags&65011712,W!==null?D=ti(W,D):(D=wa(D,g,u,null),D.flags|=2),D.return=r,f.return=r,f.sibling=D,r.child=f,pl(null,f),f=r.child,D=i.child.memoizedState,D===null?D=rp(u):(g=D.cachePool,g!==null?(F=je._currentValue,g=g.parent!==F?{parent:F,pool:F}:g):g=Mb(),D={baseLanes:D.baseLanes|u,cachePool:g}),f.memoizedState=D,f.childLanes=op(i,_,u),r.memoizedState=ap,pl(i.child,f)):(ji(r),u=i.child,i=u.sibling,u=ti(u,{mode:"visible",children:f.children}),u.return=r,u.sibling=null,i!==null&&(_=r.deletions,_===null?(r.deletions=[i],r.flags|=16):_.push(i)),r.child=u,r.memoizedState=null,u)}function lp(i,r){return r=Cu({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Cu(i,r){return i=Ln(22,i,null,r),i.lanes=0,i}function cp(i,r,u){return Ra(r,i.child,null,u),i=lp(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function H0(i,r,u){i.lanes|=r;var f=i.alternate;f!==null&&(f.lanes|=r),Ef(i.return,r,u)}function up(i,r,u,f,g,b){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g,treeForkCount:b}:(_.isBackwards=r,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=u,_.tailMode=g,_.treeForkCount=b)}function $0(i,r,u){var f=r.pendingProps,g=f.revealOrder,b=f.tail;f=f.children;var _=De.current,D=(_&2)!==0;if(D?(_=_&1|2,r.flags|=128):_&=1,tt(De,_),tn(i,r,f,u),f=Yt?el:0,!D&&i!==null&&(i.flags&128)!==0)t:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&H0(i,u,r);else if(i.tag===19)H0(i,u,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break t;for(;i.sibling===null;){if(i.return===null||i.return===r)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(u=r.child,g=null;u!==null;)i=u.alternate,i!==null&&fu(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=r.child,r.child=null):(g=u.sibling,u.sibling=null),up(r,!1,g,u,b,f);break;case"backwards":case"unstable_legacy-backwards":for(u=null,g=r.child,r.child=null;g!==null;){if(i=g.alternate,i!==null&&fu(i)===null){r.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}up(r,!0,u,null,b,f);break;case"together":up(r,!1,null,null,void 0,f);break;default:r.memoizedState=null}return r.child}function ri(i,r,u){if(i!==null&&(r.dependencies=i.dependencies),zi|=r.lanes,(u&r.childLanes)===0)if(i!==null){if(Cr(i,r,u,!1),(u&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(n(153));if(r.child!==null){for(i=r.child,u=ti(i,i.pendingProps),r.child=u,u.return=r;i.sibling!==null;)i=i.sibling,u=u.sibling=ti(i,i.pendingProps),u.return=r;u.sibling=null}return r.child}function dp(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&au(i)))}function mN(i,r,u){switch(r.tag){case 3:Et(r,r.stateNode.containerInfo),ki(r,je,i.memoizedState.cache),Sa();break;case 27:case 5:Nt(r);break;case 4:Et(r,r.stateNode.containerInfo);break;case 10:ki(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,jf(r),null;break;case 13:var f=r.memoizedState;if(f!==null)return f.dehydrated!==null?(ji(r),r.flags|=128,null):(u&r.child.childLanes)!==0?V0(i,r,u):(ji(r),i=ri(i,r,u),i!==null?i.sibling:null);ji(r);break;case 19:var g=(i.flags&128)!==0;if(f=(u&r.childLanes)!==0,f||(Cr(i,r,u,!1),f=(u&r.childLanes)!==0),g){if(f)return $0(i,r,u);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),tt(De,De.current),f)break;return null;case 22:return r.lanes=0,j0(i,r,u,r.pendingProps);case 24:ki(r,je,i.memoizedState.cache)}return ri(i,r,u)}function G0(i,r,u){if(i!==null)if(i.memoizedProps!==r.pendingProps)Fe=!0;else{if(!dp(i,u)&&(r.flags&128)===0)return Fe=!1,mN(i,r,u);Fe=(i.flags&131072)!==0}else Fe=!1,Yt&&(r.flags&1048576)!==0&&Ab(r,el,r.index);switch(r.lanes=0,r.tag){case 16:t:{var f=r.pendingProps;if(i=Ta(r.elementType),r.type=i,typeof i=="function")gf(i)?(f=Ma(i,f),r.tag=1,r=z0(null,r,i,f,u)):(r.tag=0,r=ip(null,r,i,f,u));else{if(i!=null){var g=i.$$typeof;if(g===N){r.tag=11,r=L0(null,r,i,f,u);break t}else if(g===k){r.tag=14,r=O0(null,r,i,f,u);break t}}throw r=et(i)||i,Error(n(306,r,""))}}return r;case 0:return ip(i,r,r.type,r.pendingProps,u);case 1:return f=r.type,g=Ma(f,r.pendingProps),z0(i,r,f,g,u);case 3:t:{if(Et(r,r.stateNode.containerInfo),i===null)throw Error(n(387));f=r.pendingProps;var b=r.memoizedState;g=b.element,Df(i,r),cl(r,f,null,u);var _=r.memoizedState;if(f=_.cache,ki(r,je,f),f!==b.cache&&Cf(r,[je],u,!0),ll(),f=_.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=b,r.memoizedState=b,r.flags&256){r=U0(i,r,f,u);break t}else if(f!==g){g=Jn(Error(n(424)),r),nl(g),r=U0(i,r,f,u);break t}else for(i=r.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,me=is(i.firstChild),Ze=r,Yt=!0,Mi=null,ns=!0,u=jb(r,null,f,u),r.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Sa(),f===g){r=ri(i,r,u);break t}tn(i,r,f,u)}r=r.child}return r;case 26:return Eu(i,r),i===null?(u=nw(r.type,null,r.pendingProps,null))?r.memoizedState=u:Yt||(u=r.type,i=r.pendingProps,f=Uu(st.current).createElement(u),f[Qe]=r,f[bn]=i,en(f,u,i),Ge(f),r.stateNode=f):r.memoizedState=nw(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Nt(r),i===null&&Yt&&(f=r.stateNode=Jx(r.type,r.pendingProps,st.current),Ze=r,ns=!0,g=me,Gi(r.type)?($p=g,me=is(f.firstChild)):me=g),tn(i,r,r.pendingProps.children,u),Eu(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Yt&&((g=f=me)&&(f=GN(f,r.type,r.pendingProps,ns),f!==null?(r.stateNode=f,Ze=r,me=is(f.firstChild),ns=!1,g=!0):g=!1),g||Di(r)),Nt(r),g=r.type,b=r.pendingProps,_=i!==null?i.memoizedProps:null,f=b.children,Ip(g,b)?f=null:_!==null&&Ip(g,_)&&(r.flags|=32),r.memoizedState!==null&&(g=Ff(i,r,rN,null,null,u),Nl._currentValue=g),Eu(i,r),tn(i,r,f,u),r.child;case 6:return i===null&&Yt&&((i=u=me)&&(u=qN(u,r.pendingProps,ns),u!==null?(r.stateNode=u,Ze=r,me=null,i=!0):i=!1),i||Di(r)),null;case 13:return V0(i,r,u);case 4:return Et(r,r.stateNode.containerInfo),f=r.pendingProps,i===null?r.child=Ra(r,null,f,u):tn(i,r,f,u),r.child;case 11:return L0(i,r,r.type,r.pendingProps,u);case 7:return tn(i,r,r.pendingProps,u),r.child;case 8:return tn(i,r,r.pendingProps.children,u),r.child;case 12:return tn(i,r,r.pendingProps.children,u),r.child;case 10:return f=r.pendingProps,ki(r,r.type,f.value),tn(i,r,f.children,u),r.child;case 9:return g=r.type._context,f=r.pendingProps.children,Ea(r),g=Je(g),f=f(g),r.flags|=1,tn(i,r,f,u),r.child;case 14:return O0(i,r,r.type,r.pendingProps,u);case 15:return P0(i,r,r.type,r.pendingProps,u);case 19:return $0(i,r,u);case 31:return pN(i,r,u);case 22:return j0(i,r,u,r.pendingProps);case 24:return Ea(r),f=Je(je),i===null?(g=Rf(),g===null&&(g=ce,b=Tf(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=u),g=b),r.memoizedState={parent:f,cache:g},Mf(r),ki(r,je,g)):((i.lanes&u)!==0&&(Df(i,r),cl(r,null,null,u),ll()),g=i.memoizedState,b=r.memoizedState,g.parent!==f?(g={parent:f,cache:f},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),ki(r,je,f)):(f=b.cache,ki(r,je,f),f!==g.cache&&Cf(r,[je],u,!0))),tn(i,r,r.pendingProps.children,u),r.child;case 29:throw r.pendingProps}throw Error(n(156,r.tag))}function oi(i){i.flags|=4}function hp(i,r,u,f,g){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(vx())i.flags|=8192;else throw _a=cu,Nf}else i.flags&=-16777217}function q0(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!ow(r))if(vx())i.flags|=8192;else throw _a=cu,Nf}function Tu(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?Cv():536870912,i.lanes|=r,Br|=r)}function ml(i,r){if(!Yt)switch(i.tailMode){case"hidden":r=i.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function ge(i){var r=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(r)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=u,r}function gN(i,r,u){var f=r.pendingProps;switch(xf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ge(r),null;case 1:return ge(r),null;case 3:return u=r.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),si(je),bt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(Er(r)?oi(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Sf())),ge(r),null;case 26:var g=r.type,b=r.memoizedState;return i===null?(oi(r),b!==null?(ge(r),q0(r,b)):(ge(r),hp(r,g,null,f,u))):b?b!==i.memoizedState?(oi(r),ge(r),q0(r,b)):(ge(r),r.flags&=-16777217):(i=i.memoizedProps,i!==f&&oi(r),ge(r),hp(r,g,i,f,u)),null;case 27:if(q(r),u=st.current,g=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==f&&oi(r);else{if(!f){if(r.stateNode===null)throw Error(n(166));return ge(r),null}i=ot.current,Er(r)?Cb(r):(i=Jx(g,f,u),r.stateNode=i,oi(r))}return ge(r),null;case 5:if(q(r),g=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==f&&oi(r);else{if(!f){if(r.stateNode===null)throw Error(n(166));return ge(r),null}if(b=ot.current,Er(r))Cb(r);else{var _=Uu(st.current);switch(b){case 1:b=_.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:b=_.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":b=_.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":b=_.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":b=_.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof f.is=="string"?_.createElement("select",{is:f.is}):_.createElement("select"),f.multiple?b.multiple=!0:f.size&&(b.size=f.size);break;default:b=typeof f.is=="string"?_.createElement(g,{is:f.is}):_.createElement(g)}}b[Qe]=r,b[bn]=f;t:for(_=r.child;_!==null;){if(_.tag===5||_.tag===6)b.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===r)break t;for(;_.sibling===null;){if(_.return===null||_.return===r)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}r.stateNode=b;t:switch(en(b,g,f),g){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break t;case"img":f=!0;break t;default:f=!1}f&&oi(r)}}return ge(r),hp(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,u),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==f&&oi(r);else{if(typeof f!="string"&&r.stateNode===null)throw Error(n(166));if(i=st.current,Er(r)){if(i=r.stateNode,u=r.memoizedProps,f=null,g=Ze,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}i[Qe]=r,i=!!(i.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||Vx(i.nodeValue,u)),i||Di(r,!0)}else i=Uu(i).createTextNode(f),i[Qe]=r,r.stateNode=i}return ge(r),null;case 31:if(u=r.memoizedState,i===null||i.memoizedState!==null){if(f=Er(r),u!==null){if(i===null){if(!f)throw Error(n(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[Qe]=r}else Sa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ge(r),i=!1}else u=Sf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=u),i=!0;if(!i)return r.flags&256?(Pn(r),r):(Pn(r),null);if((r.flags&128)!==0)throw Error(n(558))}return ge(r),null;case 13:if(f=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Er(r),f!==null&&f.dehydrated!==null){if(i===null){if(!g)throw Error(n(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[Qe]=r}else Sa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ge(r),g=!1}else g=Sf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(Pn(r),r):(Pn(r),null)}return Pn(r),(r.flags&128)!==0?(r.lanes=u,r):(u=f!==null,i=i!==null&&i.memoizedState!==null,u&&(f=r.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==g&&(f.flags|=2048)),u!==i&&u&&(r.child.flags|=8192),Tu(r,r.updateQueue),ge(r),null);case 4:return bt(),i===null&&Op(r.stateNode.containerInfo),ge(r),null;case 10:return si(r.type),ge(r),null;case 19:if(X(De),f=r.memoizedState,f===null)return ge(r),null;if(g=(r.flags&128)!==0,b=f.rendering,b===null)if(g)ml(f,!1);else{if(Re!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(b=fu(i),b!==null){for(r.flags|=128,ml(f,!1),i=b.updateQueue,r.updateQueue=i,Tu(r,i),r.subtreeFlags=0,i=u,u=r.child;u!==null;)xb(u,i),u=u.sibling;return tt(De,De.current&1|2),Yt&&ei(r,f.treeForkCount),r.child}i=i.sibling}f.tail!==null&&Ke()>Du&&(r.flags|=128,g=!0,ml(f,!1),r.lanes=4194304)}else{if(!g)if(i=fu(b),i!==null){if(r.flags|=128,g=!0,i=i.updateQueue,r.updateQueue=i,Tu(r,i),ml(f,!0),f.tail===null&&f.tailMode==="hidden"&&!b.alternate&&!Yt)return ge(r),null}else 2*Ke()-f.renderingStartTime>Du&&u!==536870912&&(r.flags|=128,g=!0,ml(f,!1),r.lanes=4194304);f.isBackwards?(b.sibling=r.child,r.child=b):(i=f.last,i!==null?i.sibling=b:r.child=b,f.last=b)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Ke(),i.sibling=null,u=De.current,tt(De,g?u&1|2:u&1),Yt&&ei(r,f.treeForkCount),i):(ge(r),null);case 22:case 23:return Pn(r),Pf(),f=r.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(r.flags|=8192):f&&(r.flags|=8192),f?(u&536870912)!==0&&(r.flags&128)===0&&(ge(r),r.subtreeFlags&6&&(r.flags|=8192)):ge(r),u=r.updateQueue,u!==null&&Tu(r,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),f=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(f=r.memoizedState.cachePool.pool),f!==u&&(r.flags|=2048),i!==null&&X(Ca),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),si(je),ge(r),null;case 25:return null;case 30:return null}throw Error(n(156,r.tag))}function yN(i,r){switch(xf(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return si(je),bt(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return q(r),null;case 31:if(r.memoizedState!==null){if(Pn(r),r.alternate===null)throw Error(n(340));Sa()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Pn(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Sa()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return X(De),null;case 4:return bt(),null;case 10:return si(r.type),null;case 22:case 23:return Pn(r),Pf(),i!==null&&X(Ca),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return si(je),null;case 25:return null;default:return null}}function X0(i,r){switch(xf(r),r.tag){case 3:si(je),bt();break;case 26:case 27:case 5:q(r);break;case 4:bt();break;case 31:r.memoizedState!==null&&Pn(r);break;case 13:Pn(r);break;case 19:X(De);break;case 10:si(r.type);break;case 22:case 23:Pn(r),Pf(),i!==null&&X(Ca);break;case 24:si(je)}}function gl(i,r){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&i)===i){f=void 0;var b=u.create,_=u.inst;f=b(),_.destroy=f}u=u.next}while(u!==g)}}catch(D){ie(r,r.return,D)}}function Fi(i,r,u){try{var f=r.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&i)===i){var _=f.inst,D=_.destroy;if(D!==void 0){_.destroy=void 0,g=r;var F=u,W=D;try{W()}catch(it){ie(g,F,it)}}}f=f.next}while(f!==b)}}catch(it){ie(r,r.return,it)}}function Y0(i){var r=i.updateQueue;if(r!==null){var u=i.stateNode;try{Fb(r,u)}catch(f){ie(i,i.return,f)}}}function W0(i,r,u){u.props=Ma(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(f){ie(i,r,f)}}function yl(i,r){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof u=="function"?i.refCleanup=u(f):u.current=f}}catch(g){ie(i,r,g)}}function Ls(i,r){var u=i.ref,f=i.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(g){ie(i,r,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(g){ie(i,r,g)}else u.current=null}function K0(i){var r=i.type,u=i.memoizedProps,f=i.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break t;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(g){ie(i,i.return,g)}}function fp(i,r,u){try{var f=i.stateNode;IN(f,i.type,u,r),f[bn]=r}catch(g){ie(i,i.return,g)}}function Q0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Gi(i.type)||i.tag===4}function pp(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||Q0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Gi(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function mp(i,r,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,r?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,r):(r=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,r.appendChild(i),u=u._reactRootContainer,u!=null||r.onclick!==null||(r.onclick=Zs));else if(f!==4&&(f===27&&Gi(i.type)&&(u=i.stateNode,r=null),i=i.child,i!==null))for(mp(i,r,u),i=i.sibling;i!==null;)mp(i,r,u),i=i.sibling}function _u(i,r,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,r?u.insertBefore(i,r):u.appendChild(i);else if(f!==4&&(f===27&&Gi(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(_u(i,r,u),i=i.sibling;i!==null;)_u(i,r,u),i=i.sibling}function Z0(i){var r=i.stateNode,u=i.memoizedProps;try{for(var f=i.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);en(r,f,u),r[Qe]=i,r[bn]=u}catch(b){ie(i,i.return,b)}}var li=!1,Ie=!1,gp=!1,J0=typeof WeakSet=="function"?WeakSet:Set,qe=null;function vN(i,r){if(i=i.containerInfo,Bp=Yu,i=db(i),cf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else t:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break t}var _=0,D=-1,F=-1,W=0,it=0,rt=i,Q=null;e:for(;;){for(var J;rt!==u||g!==0&&rt.nodeType!==3||(D=_+g),rt!==b||f!==0&&rt.nodeType!==3||(F=_+f),rt.nodeType===3&&(_+=rt.nodeValue.length),(J=rt.firstChild)!==null;)Q=rt,rt=J;for(;;){if(rt===i)break e;if(Q===u&&++W===g&&(D=_),Q===b&&++it===f&&(F=_),(J=rt.nextSibling)!==null)break;rt=Q,Q=rt.parentNode}rt=J}u=D===-1||F===-1?null:{start:D,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(Fp={focusedElem:i,selectionRange:u},Yu=!1,qe=r;qe!==null;)if(r=qe,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,qe=i;else for(;qe!==null;){switch(r=qe,b=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(u=0;u<i.length;u++)g=i[u],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,u=r,g=b.memoizedProps,b=b.memoizedState,f=u.stateNode;try{var xt=Ma(u.type,g);i=f.getSnapshotBeforeUpdate(xt,b),f.__reactInternalSnapshotBeforeUpdate=i}catch(Mt){ie(u,u.return,Mt)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,u=i.nodeType,u===9)Up(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Up(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=r.sibling,i!==null){i.return=r.return,qe=i;break}qe=r.return}}function tx(i,r,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:ui(i,u),f&4&&gl(5,u);break;case 1:if(ui(i,u),f&4)if(i=u.stateNode,r===null)try{i.componentDidMount()}catch(_){ie(u,u.return,_)}else{var g=Ma(u.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(g,r,i.__reactInternalSnapshotBeforeUpdate)}catch(_){ie(u,u.return,_)}}f&64&&Y0(u),f&512&&yl(u,u.return);break;case 3:if(ui(i,u),f&64&&(i=u.updateQueue,i!==null)){if(r=null,u.child!==null)switch(u.child.tag){case 27:case 5:r=u.child.stateNode;break;case 1:r=u.child.stateNode}try{Fb(i,r)}catch(_){ie(u,u.return,_)}}break;case 27:r===null&&f&4&&Z0(u);case 26:case 5:ui(i,u),r===null&&f&4&&K0(u),f&512&&yl(u,u.return);break;case 12:ui(i,u);break;case 31:ui(i,u),f&4&&sx(i,u);break;case 13:ui(i,u),f&4&&ix(i,u),f&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=_N.bind(null,u),XN(i,u))));break;case 22:if(f=u.memoizedState!==null||li,!f){r=r!==null&&r.memoizedState!==null||Ie,g=li;var b=Ie;li=f,(Ie=r)&&!b?di(i,u,(u.subtreeFlags&8772)!==0):ui(i,u),li=g,Ie=b}break;case 30:break;default:ui(i,u)}}function ex(i){var r=i.alternate;r!==null&&(i.alternate=null,ex(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Gh(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var be=null,wn=!1;function ci(i,r,u){for(u=u.child;u!==null;)nx(i,r,u),u=u.sibling}function nx(i,r,u){if(pe&&typeof pe.onCommitFiberUnmount=="function")try{pe.onCommitFiberUnmount(Ms,u)}catch{}switch(u.tag){case 26:Ie||Ls(u,r),ci(i,r,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Ie||Ls(u,r);var f=be,g=wn;Gi(u.type)&&(be=u.stateNode,wn=!1),ci(i,r,u),Tl(u.stateNode),be=f,wn=g;break;case 5:Ie||Ls(u,r);case 6:if(f=be,g=wn,be=null,ci(i,r,u),be=f,wn=g,be!==null)if(wn)try{(be.nodeType===9?be.body:be.nodeName==="HTML"?be.ownerDocument.body:be).removeChild(u.stateNode)}catch(b){ie(u,r,b)}else try{be.removeChild(u.stateNode)}catch(b){ie(u,r,b)}break;case 18:be!==null&&(wn?(i=be,Yx(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),Gr(i)):Yx(be,u.stateNode));break;case 4:f=be,g=wn,be=u.stateNode.containerInfo,wn=!0,ci(i,r,u),be=f,wn=g;break;case 0:case 11:case 14:case 15:Fi(2,u,r),Ie||Fi(4,u,r),ci(i,r,u);break;case 1:Ie||(Ls(u,r),f=u.stateNode,typeof f.componentWillUnmount=="function"&&W0(u,r,f)),ci(i,r,u);break;case 21:ci(i,r,u);break;case 22:Ie=(f=Ie)||u.memoizedState!==null,ci(i,r,u),Ie=f;break;default:ci(i,r,u)}}function sx(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Gr(i)}catch(u){ie(r,r.return,u)}}}function ix(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Gr(i)}catch(u){ie(r,r.return,u)}}function bN(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new J0),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new J0),r;default:throw Error(n(435,i.tag))}}function Ru(i,r){var u=bN(i);r.forEach(function(f){if(!u.has(f)){u.add(f);var g=RN.bind(null,i,f);f.then(g,g)}})}function Sn(i,r){var u=r.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f],b=i,_=r,D=_;t:for(;D!==null;){switch(D.tag){case 27:if(Gi(D.type)){be=D.stateNode,wn=!1;break t}break;case 5:be=D.stateNode,wn=!1;break t;case 3:case 4:be=D.stateNode.containerInfo,wn=!0;break t}D=D.return}if(be===null)throw Error(n(160));nx(b,_,g),be=null,wn=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)ax(r,i),r=r.sibling}var vs=null;function ax(i,r){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Sn(r,i),An(i),f&4&&(Fi(3,i,i.return),gl(3,i),Fi(5,i,i.return));break;case 1:Sn(r,i),An(i),f&512&&(Ie||u===null||Ls(u,u.return)),f&64&&li&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var g=vs;if(Sn(r,i),An(i),f&512&&(Ie||u===null||Ls(u,u.return)),f&4){var b=u!==null?u.memoizedState:null;if(f=i.memoizedState,u===null)if(f===null)if(i.stateNode===null){t:{f=i.type,u=i.memoizedProps,g=g.ownerDocument||g;e:switch(f){case"title":b=g.getElementsByTagName("title")[0],(!b||b[$o]||b[Qe]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(f),g.head.insertBefore(b,g.querySelector("head > title"))),en(b,f,u),b[Qe]=i,Ge(b),f=b;break t;case"link":var _=aw("link","href",g).get(f+(u.href||""));if(_){for(var D=0;D<_.length;D++)if(b=_[D],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){_.splice(D,1);break e}}b=g.createElement(f),en(b,f,u),g.head.appendChild(b);break;case"meta":if(_=aw("meta","content",g).get(f+(u.content||""))){for(D=0;D<_.length;D++)if(b=_[D],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){_.splice(D,1);break e}}b=g.createElement(f),en(b,f,u),g.head.appendChild(b);break;default:throw Error(n(468,f))}b[Qe]=i,Ge(b),f=b}i.stateNode=f}else rw(g,i.type,i.stateNode);else i.stateNode=iw(g,f,i.memoizedProps);else b!==f?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,f===null?rw(g,i.type,i.stateNode):iw(g,f,i.memoizedProps)):f===null&&i.stateNode!==null&&fp(i,i.memoizedProps,u.memoizedProps)}break;case 27:Sn(r,i),An(i),f&512&&(Ie||u===null||Ls(u,u.return)),u!==null&&f&4&&fp(i,i.memoizedProps,u.memoizedProps);break;case 5:if(Sn(r,i),An(i),f&512&&(Ie||u===null||Ls(u,u.return)),i.flags&32){g=i.stateNode;try{pr(g,"")}catch(xt){ie(i,i.return,xt)}}f&4&&i.stateNode!=null&&(g=i.memoizedProps,fp(i,g,u!==null?u.memoizedProps:g)),f&1024&&(gp=!0);break;case 6:if(Sn(r,i),An(i),f&4){if(i.stateNode===null)throw Error(n(162));f=i.memoizedProps,u=i.stateNode;try{u.nodeValue=f}catch(xt){ie(i,i.return,xt)}}break;case 3:if($u=null,g=vs,vs=Vu(r.containerInfo),Sn(r,i),vs=g,An(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Gr(r.containerInfo)}catch(xt){ie(i,i.return,xt)}gp&&(gp=!1,rx(i));break;case 4:f=vs,vs=Vu(i.stateNode.containerInfo),Sn(r,i),An(i),vs=f;break;case 12:Sn(r,i),An(i);break;case 31:Sn(r,i),An(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ru(i,f)));break;case 13:Sn(r,i),An(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Mu=Ke()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ru(i,f)));break;case 22:g=i.memoizedState!==null;var F=u!==null&&u.memoizedState!==null,W=li,it=Ie;if(li=W||g,Ie=it||F,Sn(r,i),Ie=it,li=W,An(i),f&8192)t:for(r=i.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(u===null||F||li||Ie||Da(i)),u=null,r=i;;){if(r.tag===5||r.tag===26){if(u===null){F=u=r;try{if(b=F.stateNode,g)_=b.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{D=F.stateNode;var rt=F.memoizedProps.style,Q=rt!=null&&rt.hasOwnProperty("display")?rt.display:null;D.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(xt){ie(F,F.return,xt)}}}else if(r.tag===6){if(u===null){F=r;try{F.stateNode.nodeValue=g?"":F.memoizedProps}catch(xt){ie(F,F.return,xt)}}}else if(r.tag===18){if(u===null){F=r;try{var J=F.stateNode;g?Wx(J,!0):Wx(F.stateNode,!1)}catch(xt){ie(F,F.return,xt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break t;for(;r.sibling===null;){if(r.return===null||r.return===i)break t;u===r&&(u=null),r=r.return}u===r&&(u=null),r.sibling.return=r.return,r=r.sibling}f&4&&(f=i.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,Ru(i,u))));break;case 19:Sn(r,i),An(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ru(i,f)));break;case 30:break;case 21:break;default:Sn(r,i),An(i)}}function An(i){var r=i.flags;if(r&2){try{for(var u,f=i.return;f!==null;){if(Q0(f)){u=f;break}f=f.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var g=u.stateNode,b=pp(i);_u(i,b,g);break;case 5:var _=u.stateNode;u.flags&32&&(pr(_,""),u.flags&=-33);var D=pp(i);_u(i,D,_);break;case 3:case 4:var F=u.stateNode.containerInfo,W=pp(i);mp(i,W,F);break;default:throw Error(n(161))}}catch(it){ie(i,i.return,it)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function rx(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;rx(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function ui(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)tx(i,r.alternate,r),r=r.sibling}function Da(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Fi(4,r,r.return),Da(r);break;case 1:Ls(r,r.return);var u=r.stateNode;typeof u.componentWillUnmount=="function"&&W0(r,r.return,u),Da(r);break;case 27:Tl(r.stateNode);case 26:case 5:Ls(r,r.return),Da(r);break;case 22:r.memoizedState===null&&Da(r);break;case 30:Da(r);break;default:Da(r)}i=i.sibling}}function di(i,r,u){for(u=u&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var f=r.alternate,g=i,b=r,_=b.flags;switch(b.tag){case 0:case 11:case 15:di(g,b,u),gl(4,b);break;case 1:if(di(g,b,u),f=b,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(W){ie(f,f.return,W)}if(f=b,g=f.updateQueue,g!==null){var D=f.stateNode;try{var F=g.shared.hiddenCallbacks;if(F!==null)for(g.shared.hiddenCallbacks=null,g=0;g<F.length;g++)Bb(F[g],D)}catch(W){ie(f,f.return,W)}}u&&_&64&&Y0(b),yl(b,b.return);break;case 27:Z0(b);case 26:case 5:di(g,b,u),u&&f===null&&_&4&&K0(b),yl(b,b.return);break;case 12:di(g,b,u);break;case 31:di(g,b,u),u&&_&4&&sx(g,b);break;case 13:di(g,b,u),u&&_&4&&ix(g,b);break;case 22:b.memoizedState===null&&di(g,b,u),yl(b,b.return);break;case 30:break;default:di(g,b,u)}r=r.sibling}}function yp(i,r){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&sl(u))}function vp(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&sl(i))}function bs(i,r,u,f){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ox(i,r,u,f),r=r.sibling}function ox(i,r,u,f){var g=r.flags;switch(r.tag){case 0:case 11:case 15:bs(i,r,u,f),g&2048&&gl(9,r);break;case 1:bs(i,r,u,f);break;case 3:bs(i,r,u,f),g&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&sl(i)));break;case 12:if(g&2048){bs(i,r,u,f),i=r.stateNode;try{var b=r.memoizedProps,_=b.id,D=b.onPostCommit;typeof D=="function"&&D(_,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(F){ie(r,r.return,F)}}else bs(i,r,u,f);break;case 31:bs(i,r,u,f);break;case 13:bs(i,r,u,f);break;case 23:break;case 22:b=r.stateNode,_=r.alternate,r.memoizedState!==null?b._visibility&2?bs(i,r,u,f):vl(i,r):b._visibility&2?bs(i,r,u,f):(b._visibility|=2,Or(i,r,u,f,(r.subtreeFlags&10256)!==0||!1)),g&2048&&yp(_,r);break;case 24:bs(i,r,u,f),g&2048&&vp(r.alternate,r);break;default:bs(i,r,u,f)}}function Or(i,r,u,f,g){for(g=g&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var b=i,_=r,D=u,F=f,W=_.flags;switch(_.tag){case 0:case 11:case 15:Or(b,_,D,F,g),gl(8,_);break;case 23:break;case 22:var it=_.stateNode;_.memoizedState!==null?it._visibility&2?Or(b,_,D,F,g):vl(b,_):(it._visibility|=2,Or(b,_,D,F,g)),g&&W&2048&&yp(_.alternate,_);break;case 24:Or(b,_,D,F,g),g&&W&2048&&vp(_.alternate,_);break;default:Or(b,_,D,F,g)}r=r.sibling}}function vl(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var u=i,f=r,g=f.flags;switch(f.tag){case 22:vl(u,f),g&2048&&yp(f.alternate,f);break;case 24:vl(u,f),g&2048&&vp(f.alternate,f);break;default:vl(u,f)}r=r.sibling}}var bl=8192;function Pr(i,r,u){if(i.subtreeFlags&bl)for(i=i.child;i!==null;)lx(i,r,u),i=i.sibling}function lx(i,r,u){switch(i.tag){case 26:Pr(i,r,u),i.flags&bl&&i.memoizedState!==null&&aM(u,vs,i.memoizedState,i.memoizedProps);break;case 5:Pr(i,r,u);break;case 3:case 4:var f=vs;vs=Vu(i.stateNode.containerInfo),Pr(i,r,u),vs=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=bl,bl=16777216,Pr(i,r,u),bl=f):Pr(i,r,u));break;default:Pr(i,r,u)}}function cx(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function xl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var u=0;u<r.length;u++){var f=r[u];qe=f,dx(f,i)}cx(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ux(i),i=i.sibling}function ux(i){switch(i.tag){case 0:case 11:case 15:xl(i),i.flags&2048&&Fi(9,i,i.return);break;case 3:xl(i);break;case 12:xl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,Nu(i)):xl(i);break;default:xl(i)}}function Nu(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var u=0;u<r.length;u++){var f=r[u];qe=f,dx(f,i)}cx(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Fi(8,r,r.return),Nu(r);break;case 22:u=r.stateNode,u._visibility&2&&(u._visibility&=-3,Nu(r));break;default:Nu(r)}i=i.sibling}}function dx(i,r){for(;qe!==null;){var u=qe;switch(u.tag){case 0:case 11:case 15:Fi(8,u,r);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:sl(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,qe=f;else t:for(u=i;qe!==null;){f=qe;var g=f.sibling,b=f.return;if(ex(f),f===u){qe=null;break t}if(g!==null){g.return=b,qe=g;break t}qe=b}}}var xN={getCacheForType:function(i){var r=Je(je),u=r.data.get(i);return u===void 0&&(u=i(),r.data.set(i,u)),u},cacheSignal:function(){return Je(je).controller.signal}},wN=typeof WeakMap=="function"?WeakMap:Map,ne=0,ce=null,Ht=null,Gt=0,se=0,jn=null,Ii=!1,jr=!1,bp=!1,hi=0,Re=0,zi=0,ka=0,xp=0,Bn=0,Br=0,wl=null,En=null,wp=!1,Mu=0,hx=0,Du=1/0,ku=null,Ui=null,Ve=0,Vi=null,Fr=null,fi=0,Sp=0,Ap=null,fx=null,Sl=0,Ep=null;function Fn(){return(ne&2)!==0&&Gt!==0?Gt&-Gt:P.T!==null?Mp():Nv()}function px(){if(Bn===0)if((Gt&536870912)===0||Yt){var i=zc;zc<<=1,(zc&3932160)===0&&(zc=262144),Bn=i}else Bn=536870912;return i=On.current,i!==null&&(i.flags|=32),Bn}function Cn(i,r,u){(i===ce&&(se===2||se===9)||i.cancelPendingCommit!==null)&&(Ir(i,0),Hi(i,Gt,Bn,!1)),Ho(i,u),((ne&2)===0||i!==ce)&&(i===ce&&((ne&2)===0&&(ka|=u),Re===4&&Hi(i,Gt,Bn,!1)),Os(i))}function mx(i,r,u){if((ne&6)!==0)throw Error(n(327));var f=!u&&(r&127)===0&&(r&i.expiredLanes)===0||Vo(i,r),g=f?EN(i,r):Tp(i,r,!0),b=f;do{if(g===0){jr&&!f&&Hi(i,r,0,!1);break}else{if(u=i.current.alternate,b&&!SN(u)){g=Tp(i,r,!1),b=!1;continue}if(g===2){if(b=r,i.errorRecoveryDisabledLanes&b)var _=0;else _=i.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;t:{var D=i;g=wl;var F=D.current.memoizedState.isDehydrated;if(F&&(Ir(D,_).flags|=256),_=Tp(D,_,!1),_!==2){if(bp&&!F){D.errorRecoveryDisabledLanes|=b,ka|=b,g=4;break t}b=En,En=g,b!==null&&(En===null?En=b:En.push.apply(En,b))}g=_}if(b=!1,g!==2)continue}}if(g===1){Ir(i,0),Hi(i,r,0,!0);break}t:{switch(f=i,b=g,b){case 0:case 1:throw Error(n(345));case 4:if((r&4194048)!==r)break;case 6:Hi(f,r,Bn,!Ii);break t;case 2:En=null;break;case 3:case 5:break;default:throw Error(n(329))}if((r&62914560)===r&&(g=Mu+300-Ke(),10<g)){if(Hi(f,r,Bn,!Ii),Vc(f,0,!0)!==0)break t;fi=r,f.timeoutHandle=qx(gx.bind(null,f,u,En,ku,wp,r,Bn,ka,Br,Ii,b,"Throttled",-0,0),g);break t}gx(f,u,En,ku,wp,r,Bn,ka,Br,Ii,b,null,-0,0)}}break}while(!0);Os(i)}function gx(i,r,u,f,g,b,_,D,F,W,it,rt,Q,J){if(i.timeoutHandle=-1,rt=r.subtreeFlags,rt&8192||(rt&16785408)===16785408){rt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zs},lx(r,b,rt);var xt=(b&62914560)===b?Mu-Ke():(b&4194048)===b?hx-Ke():0;if(xt=rM(rt,xt),xt!==null){fi=b,i.cancelPendingCommit=xt(Ex.bind(null,i,r,b,u,f,g,_,D,F,it,rt,null,Q,J)),Hi(i,b,_,!W);return}}Ex(i,r,b,u,f,g,_,D,F)}function SN(i){for(var r=i;;){var u=r.tag;if((u===0||u===11||u===15)&&r.flags&16384&&(u=r.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var g=u[f],b=g.getSnapshot;g=g.value;try{if(!kn(b(),g))return!1}catch{return!1}}if(u=r.child,r.subtreeFlags&16384&&u!==null)u.return=r,r=u;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Hi(i,r,u,f){r&=~xp,r&=~ka,i.suspendedLanes|=r,i.pingedLanes&=~r,f&&(i.warmLanes|=r),f=i.expirationTimes;for(var g=r;0<g;){var b=31-Dn(g),_=1<<b;f[b]=-1,g&=~_}u!==0&&Tv(i,u,r)}function Lu(){return(ne&6)===0?(Al(0),!1):!0}function Cp(){if(Ht!==null){if(se===0)var i=Ht.return;else i=Ht,ni=Aa=null,Uf(i),Nr=null,al=0,i=Ht;for(;i!==null;)X0(i.alternate,i),i=i.return;Ht=null}}function Ir(i,r){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,VN(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),fi=0,Cp(),ce=i,Ht=u=ti(i.current,null),Gt=r,se=0,jn=null,Ii=!1,jr=Vo(i,r),bp=!1,Br=Bn=xp=ka=zi=Re=0,En=wl=null,wp=!1,(r&8)!==0&&(r|=r&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=r;0<f;){var g=31-Dn(f),b=1<<g;r|=i[g],f&=~b}return hi=r,tu(),u}function yx(i,r){Ft=null,P.H=fl,r===Rr||r===lu?(r=Lb(),se=3):r===Nf?(r=Lb(),se=4):se=r===sp?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,jn=r,Ht===null&&(Re=1,Su(i,Jn(r,i.current)))}function vx(){var i=On.current;return i===null?!0:(Gt&4194048)===Gt?ss===null:(Gt&62914560)===Gt||(Gt&536870912)!==0?i===ss:!1}function bx(){var i=P.H;return P.H=fl,i===null?fl:i}function xx(){var i=P.A;return P.A=xN,i}function Ou(){Re=4,Ii||(Gt&4194048)!==Gt&&On.current!==null||(jr=!0),(zi&134217727)===0&&(ka&134217727)===0||ce===null||Hi(ce,Gt,Bn,!1)}function Tp(i,r,u){var f=ne;ne|=2;var g=bx(),b=xx();(ce!==i||Gt!==r)&&(ku=null,Ir(i,r)),r=!1;var _=Re;t:do try{if(se!==0&&Ht!==null){var D=Ht,F=jn;switch(se){case 8:Cp(),_=6;break t;case 3:case 2:case 9:case 6:On.current===null&&(r=!0);var W=se;if(se=0,jn=null,zr(i,D,F,W),u&&jr){_=0;break t}break;default:W=se,se=0,jn=null,zr(i,D,F,W)}}AN(),_=Re;break}catch(it){yx(i,it)}while(!0);return r&&i.shellSuspendCounter++,ni=Aa=null,ne=f,P.H=g,P.A=b,Ht===null&&(ce=null,Gt=0,tu()),_}function AN(){for(;Ht!==null;)wx(Ht)}function EN(i,r){var u=ne;ne|=2;var f=bx(),g=xx();ce!==i||Gt!==r?(ku=null,Du=Ke()+500,Ir(i,r)):jr=Vo(i,r);t:do try{if(se!==0&&Ht!==null){r=Ht;var b=jn;e:switch(se){case 1:se=0,jn=null,zr(i,r,b,1);break;case 2:case 9:if(Db(b)){se=0,jn=null,Sx(r);break}r=function(){se!==2&&se!==9||ce!==i||(se=7),Os(i)},b.then(r,r);break t;case 3:se=7;break t;case 4:se=5;break t;case 7:Db(b)?(se=0,jn=null,Sx(r)):(se=0,jn=null,zr(i,r,b,7));break;case 5:var _=null;switch(Ht.tag){case 26:_=Ht.memoizedState;case 5:case 27:var D=Ht;if(_?ow(_):D.stateNode.complete){se=0,jn=null;var F=D.sibling;if(F!==null)Ht=F;else{var W=D.return;W!==null?(Ht=W,Pu(W)):Ht=null}break e}}se=0,jn=null,zr(i,r,b,5);break;case 6:se=0,jn=null,zr(i,r,b,6);break;case 8:Cp(),Re=6;break t;default:throw Error(n(462))}}CN();break}catch(it){yx(i,it)}while(!0);return ni=Aa=null,P.H=f,P.A=g,ne=u,Ht!==null?0:(ce=null,Gt=0,tu(),Re)}function CN(){for(;Ht!==null&&!Yn();)wx(Ht)}function wx(i){var r=G0(i.alternate,i,hi);i.memoizedProps=i.pendingProps,r===null?Pu(i):Ht=r}function Sx(i){var r=i,u=r.alternate;switch(r.tag){case 15:case 0:r=I0(u,r,r.pendingProps,r.type,void 0,Gt);break;case 11:r=I0(u,r,r.pendingProps,r.type.render,r.ref,Gt);break;case 5:Uf(r);default:X0(u,r),r=Ht=xb(r,hi),r=G0(u,r,hi)}i.memoizedProps=i.pendingProps,r===null?Pu(i):Ht=r}function zr(i,r,u,f){ni=Aa=null,Uf(r),Nr=null,al=0;var g=r.return;try{if(fN(i,g,r,u,Gt)){Re=1,Su(i,Jn(u,i.current)),Ht=null;return}}catch(b){if(g!==null)throw Ht=g,b;Re=1,Su(i,Jn(u,i.current)),Ht=null;return}r.flags&32768?(Yt||f===1?i=!0:jr||(Gt&536870912)!==0?i=!1:(Ii=i=!0,(f===2||f===9||f===3||f===6)&&(f=On.current,f!==null&&f.tag===13&&(f.flags|=16384))),Ax(r,i)):Pu(r)}function Pu(i){var r=i;do{if((r.flags&32768)!==0){Ax(r,Ii);return}i=r.return;var u=gN(r.alternate,r,hi);if(u!==null){Ht=u;return}if(r=r.sibling,r!==null){Ht=r;return}Ht=r=i}while(r!==null);Re===0&&(Re=5)}function Ax(i,r){do{var u=yN(i.alternate,i);if(u!==null){u.flags&=32767,Ht=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!r&&(i=i.sibling,i!==null)){Ht=i;return}Ht=i=u}while(i!==null);Re=6,Ht=null}function Ex(i,r,u,f,g,b,_,D,F){i.cancelPendingCommit=null;do ju();while(Ve!==0);if((ne&6)!==0)throw Error(n(327));if(r!==null){if(r===i.current)throw Error(n(177));if(b=r.lanes|r.childLanes,b|=pf,i2(i,u,b,_,D,F),i===ce&&(Ht=ce=null,Gt=0),Fr=r,Vi=i,fi=u,Sp=b,Ap=g,fx=f,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,NN(dn,function(){return Nx(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||f){f=P.T,P.T=null,g=z.p,z.p=2,_=ne,ne|=4;try{vN(i,r,u)}finally{ne=_,z.p=g,P.T=f}}Ve=1,Cx(),Tx(),_x()}}function Cx(){if(Ve===1){Ve=0;var i=Vi,r=Fr,u=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||u){u=P.T,P.T=null;var f=z.p;z.p=2;var g=ne;ne|=4;try{ax(r,i);var b=Fp,_=db(i.containerInfo),D=b.focusedElem,F=b.selectionRange;if(_!==D&&D&&D.ownerDocument&&ub(D.ownerDocument.documentElement,D)){if(F!==null&&cf(D)){var W=F.start,it=F.end;if(it===void 0&&(it=W),"selectionStart"in D)D.selectionStart=W,D.selectionEnd=Math.min(it,D.value.length);else{var rt=D.ownerDocument||document,Q=rt&&rt.defaultView||window;if(Q.getSelection){var J=Q.getSelection(),xt=D.textContent.length,Mt=Math.min(F.start,xt),oe=F.end===void 0?Mt:Math.min(F.end,xt);!J.extend&&Mt>oe&&(_=oe,oe=Mt,Mt=_);var G=cb(D,Mt),V=cb(D,oe);if(G&&V&&(J.rangeCount!==1||J.anchorNode!==G.node||J.anchorOffset!==G.offset||J.focusNode!==V.node||J.focusOffset!==V.offset)){var Y=rt.createRange();Y.setStart(G.node,G.offset),J.removeAllRanges(),Mt>oe?(J.addRange(Y),J.extend(V.node,V.offset)):(Y.setEnd(V.node,V.offset),J.addRange(Y))}}}}for(rt=[],J=D;J=J.parentNode;)J.nodeType===1&&rt.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<rt.length;D++){var at=rt[D];at.element.scrollLeft=at.left,at.element.scrollTop=at.top}}Yu=!!Bp,Fp=Bp=null}finally{ne=g,z.p=f,P.T=u}}i.current=r,Ve=2}}function Tx(){if(Ve===2){Ve=0;var i=Vi,r=Fr,u=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||u){u=P.T,P.T=null;var f=z.p;z.p=2;var g=ne;ne|=4;try{tx(i,r.alternate,r)}finally{ne=g,z.p=f,P.T=u}}Ve=3}}function _x(){if(Ve===4||Ve===3){Ve=0,pa();var i=Vi,r=Fr,u=fi,f=fx;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ve=5:(Ve=0,Fr=Vi=null,Rx(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(Ui=null),Hh(u),r=r.stateNode,pe&&typeof pe.onCommitFiberRoot=="function")try{pe.onCommitFiberRoot(Ms,r,void 0,(r.current.flags&128)===128)}catch{}if(f!==null){r=P.T,g=z.p,z.p=2,P.T=null;try{for(var b=i.onRecoverableError,_=0;_<f.length;_++){var D=f[_];b(D.value,{componentStack:D.stack})}}finally{P.T=r,z.p=g}}(fi&3)!==0&&ju(),Os(i),g=i.pendingLanes,(u&261930)!==0&&(g&42)!==0?i===Ep?Sl++:(Sl=0,Ep=i):Sl=0,Al(0)}}function Rx(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,sl(r)))}function ju(){return Cx(),Tx(),_x(),Nx()}function Nx(){if(Ve!==5)return!1;var i=Vi,r=Sp;Sp=0;var u=Hh(fi),f=P.T,g=z.p;try{z.p=32>u?32:u,P.T=null,u=Ap,Ap=null;var b=Vi,_=fi;if(Ve=0,Fr=Vi=null,fi=0,(ne&6)!==0)throw Error(n(331));var D=ne;if(ne|=4,ux(b.current),ox(b,b.current,_,u),ne=D,Al(0,!1),pe&&typeof pe.onPostCommitFiberRoot=="function")try{pe.onPostCommitFiberRoot(Ms,b)}catch{}return!0}finally{z.p=g,P.T=f,Rx(i,r)}}function Mx(i,r,u){r=Jn(u,r),r=np(i.stateNode,r,2),i=Pi(i,r,2),i!==null&&(Ho(i,2),Os(i))}function ie(i,r,u){if(i.tag===3)Mx(i,i,u);else for(;r!==null;){if(r.tag===3){Mx(r,i,u);break}else if(r.tag===1){var f=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ui===null||!Ui.has(f))){i=Jn(u,i),u=D0(2),f=Pi(r,u,2),f!==null&&(k0(u,f,r,i),Ho(f,2),Os(f));break}}r=r.return}}function _p(i,r,u){var f=i.pingCache;if(f===null){f=i.pingCache=new wN;var g=new Set;f.set(r,g)}else g=f.get(r),g===void 0&&(g=new Set,f.set(r,g));g.has(u)||(bp=!0,g.add(u),i=TN.bind(null,i,r,u),r.then(i,i))}function TN(i,r,u){var f=i.pingCache;f!==null&&f.delete(r),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,ce===i&&(Gt&u)===u&&(Re===4||Re===3&&(Gt&62914560)===Gt&&300>Ke()-Mu?(ne&2)===0&&Ir(i,0):xp|=u,Br===Gt&&(Br=0)),Os(i)}function Dx(i,r){r===0&&(r=Cv()),i=xa(i,r),i!==null&&(Ho(i,r),Os(i))}function _N(i){var r=i.memoizedState,u=0;r!==null&&(u=r.retryLane),Dx(i,u)}function RN(i,r){var u=0;switch(i.tag){case 31:case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(n(314))}f!==null&&f.delete(r),Dx(i,u)}function NN(i,r){return Zt(i,r)}var Bu=null,Ur=null,Rp=!1,Fu=!1,Np=!1,$i=0;function Os(i){i!==Ur&&i.next===null&&(Ur===null?Bu=Ur=i:Ur=Ur.next=i),Fu=!0,Rp||(Rp=!0,DN())}function Al(i,r){if(!Np&&Fu){Np=!0;do for(var u=!1,f=Bu;f!==null;){if(i!==0){var g=f.pendingLanes;if(g===0)var b=0;else{var _=f.suspendedLanes,D=f.pingedLanes;b=(1<<31-Dn(42|i)+1)-1,b&=g&~(_&~D),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,Px(f,b))}else b=Gt,b=Vc(f,f===ce?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||Vo(f,b)||(u=!0,Px(f,b));f=f.next}while(u);Np=!1}}function MN(){kx()}function kx(){Fu=Rp=!1;var i=0;$i!==0&&UN()&&(i=$i);for(var r=Ke(),u=null,f=Bu;f!==null;){var g=f.next,b=Lx(f,r);b===0?(f.next=null,u===null?Bu=g:u.next=g,g===null&&(Ur=u)):(u=f,(i!==0||(b&3)!==0)&&(Fu=!0)),f=g}Ve!==0&&Ve!==5||Al(i),$i!==0&&($i=0)}function Lx(i,r){for(var u=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var _=31-Dn(b),D=1<<_,F=g[_];F===-1?((D&u)===0||(D&f)!==0)&&(g[_]=s2(D,r)):F<=r&&(i.expiredLanes|=D),b&=~D}if(r=ce,u=Gt,u=Vc(i,i===r?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,u===0||i===r&&(se===2||se===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&Mn(f),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||Vo(i,u)){if(r=u&-u,r===i.callbackPriority)return r;switch(f!==null&&Mn(f),Hh(u)){case 2:case 8:u=or;break;case 32:u=dn;break;case 268435456:u=mt;break;default:u=dn}return f=Ox.bind(null,i),u=Zt(u,f),i.callbackPriority=r,i.callbackNode=u,r}return f!==null&&f!==null&&Mn(f),i.callbackPriority=2,i.callbackNode=null,2}function Ox(i,r){if(Ve!==0&&Ve!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(ju()&&i.callbackNode!==u)return null;var f=Gt;return f=Vc(i,i===ce?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(mx(i,f,r),Lx(i,Ke()),i.callbackNode!=null&&i.callbackNode===u?Ox.bind(null,i):null)}function Px(i,r){if(ju())return null;mx(i,r,!0)}function DN(){HN(function(){(ne&6)!==0?Zt(rr,MN):kx()})}function Mp(){if($i===0){var i=Tr;i===0&&(i=Ic,Ic<<=1,(Ic&261888)===0&&(Ic=256)),$i=i}return $i}function jx(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:qc(""+i)}function Bx(i,r){var u=r.ownerDocument.createElement("input");return u.name=r.name,u.value=r.value,i.id&&u.setAttribute("form",i.id),r.parentNode.insertBefore(u,r),i=new FormData(i),u.parentNode.removeChild(u),i}function kN(i,r,u,f,g){if(r==="submit"&&u&&u.stateNode===g){var b=jx((g[bn]||null).action),_=f.submitter;_&&(r=(r=_[bn]||null)?jx(r.formAction):_.getAttribute("formAction"),r!==null&&(b=r,_=null));var D=new Kc("action","action",null,f,g);i.push({event:D,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if($i!==0){var F=_?Bx(g,_):new FormData(g);Kf(u,{pending:!0,data:F,method:g.method,action:b},null,F)}}else typeof b=="function"&&(D.preventDefault(),F=_?Bx(g,_):new FormData(g),Kf(u,{pending:!0,data:F,method:g.method,action:b},b,F))},currentTarget:g}]})}}for(var Dp=0;Dp<ff.length;Dp++){var kp=ff[Dp],LN=kp.toLowerCase(),ON=kp[0].toUpperCase()+kp.slice(1);ys(LN,"on"+ON)}ys(pb,"onAnimationEnd"),ys(mb,"onAnimationIteration"),ys(gb,"onAnimationStart"),ys("dblclick","onDoubleClick"),ys("focusin","onFocus"),ys("focusout","onBlur"),ys(K2,"onTransitionRun"),ys(Q2,"onTransitionStart"),ys(Z2,"onTransitionCancel"),ys(yb,"onTransitionEnd"),hr("onMouseEnter",["mouseout","mouseover"]),hr("onMouseLeave",["mouseout","mouseover"]),hr("onPointerEnter",["pointerout","pointerover"]),hr("onPointerLeave",["pointerout","pointerover"]),ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ga("onBeforeInput",["compositionend","keypress","textInput","paste"]),ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(El));function Fx(i,r){r=(r&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],g=f.event;f=f.listeners;t:{var b=void 0;if(r)for(var _=f.length-1;0<=_;_--){var D=f[_],F=D.instance,W=D.currentTarget;if(D=D.listener,F!==b&&g.isPropagationStopped())break t;b=D,g.currentTarget=W;try{b(g)}catch(it){Jc(it)}g.currentTarget=null,b=F}else for(_=0;_<f.length;_++){if(D=f[_],F=D.instance,W=D.currentTarget,D=D.listener,F!==b&&g.isPropagationStopped())break t;b=D,g.currentTarget=W;try{b(g)}catch(it){Jc(it)}g.currentTarget=null,b=F}}}}function $t(i,r){var u=r[$h];u===void 0&&(u=r[$h]=new Set);var f=i+"__bubble";u.has(f)||(Ix(r,i,2,!1),u.add(f))}function Lp(i,r,u){var f=0;r&&(f|=4),Ix(u,i,f,r)}var Iu="_reactListening"+Math.random().toString(36).slice(2);function Op(i){if(!i[Iu]){i[Iu]=!0,kv.forEach(function(u){u!=="selectionchange"&&(PN.has(u)||Lp(u,!1,i),Lp(u,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[Iu]||(r[Iu]=!0,Lp("selectionchange",!1,r))}}function Ix(i,r,u,f){switch(pw(r)){case 2:var g=cM;break;case 8:g=uM;break;default:g=Wp}u=g.bind(null,r,u,i),g=void 0,!Jh||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(r,u,{capture:!0,passive:g}):i.addEventListener(r,u,!0):g!==void 0?i.addEventListener(r,u,{passive:g}):i.addEventListener(r,u,!1)}function Pp(i,r,u,f,g){var b=f;if((r&1)===0&&(r&2)===0&&f!==null)t:for(;;){if(f===null)return;var _=f.tag;if(_===3||_===4){var D=f.stateNode.containerInfo;if(D===g)break;if(_===4)for(_=f.return;_!==null;){var F=_.tag;if((F===3||F===4)&&_.stateNode.containerInfo===g)return;_=_.return}for(;D!==null;){if(_=cr(D),_===null)return;if(F=_.tag,F===5||F===6||F===26||F===27){f=b=_;continue t}D=D.parentNode}}f=f.return}$v(function(){var W=b,it=Qh(u),rt=[];t:{var Q=vb.get(i);if(Q!==void 0){var J=Kc,xt=i;switch(i){case"keypress":if(Yc(u)===0)break t;case"keydown":case"keyup":J=R2;break;case"focusin":xt="focus",J=sf;break;case"focusout":xt="blur",J=sf;break;case"beforeblur":case"afterblur":J=sf;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Xv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=g2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=D2;break;case pb:case mb:case gb:J=b2;break;case yb:J=L2;break;case"scroll":case"scrollend":J=p2;break;case"wheel":J=P2;break;case"copy":case"cut":case"paste":J=w2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Wv;break;case"toggle":case"beforetoggle":J=B2}var Mt=(r&4)!==0,oe=!Mt&&(i==="scroll"||i==="scrollend"),G=Mt?Q!==null?Q+"Capture":null:Q;Mt=[];for(var V=W,Y;V!==null;){var at=V;if(Y=at.stateNode,at=at.tag,at!==5&&at!==26&&at!==27||Y===null||G===null||(at=qo(V,G),at!=null&&Mt.push(Cl(V,at,Y))),oe)break;V=V.return}0<Mt.length&&(Q=new J(Q,xt,null,u,it),rt.push({event:Q,listeners:Mt}))}}if((r&7)===0){t:{if(Q=i==="mouseover"||i==="pointerover",J=i==="mouseout"||i==="pointerout",Q&&u!==Kh&&(xt=u.relatedTarget||u.fromElement)&&(cr(xt)||xt[lr]))break t;if((J||Q)&&(Q=it.window===it?it:(Q=it.ownerDocument)?Q.defaultView||Q.parentWindow:window,J?(xt=u.relatedTarget||u.toElement,J=W,xt=xt?cr(xt):null,xt!==null&&(oe=o(xt),Mt=xt.tag,xt!==oe||Mt!==5&&Mt!==27&&Mt!==6)&&(xt=null)):(J=null,xt=W),J!==xt)){if(Mt=Xv,at="onMouseLeave",G="onMouseEnter",V="mouse",(i==="pointerout"||i==="pointerover")&&(Mt=Wv,at="onPointerLeave",G="onPointerEnter",V="pointer"),oe=J==null?Q:Go(J),Y=xt==null?Q:Go(xt),Q=new Mt(at,V+"leave",J,u,it),Q.target=oe,Q.relatedTarget=Y,at=null,cr(it)===W&&(Mt=new Mt(G,V+"enter",xt,u,it),Mt.target=Y,Mt.relatedTarget=oe,at=Mt),oe=at,J&&xt)e:{for(Mt=jN,G=J,V=xt,Y=0,at=G;at;at=Mt(at))Y++;at=0;for(var _t=V;_t;_t=Mt(_t))at++;for(;0<Y-at;)G=Mt(G),Y--;for(;0<at-Y;)V=Mt(V),at--;for(;Y--;){if(G===V||V!==null&&G===V.alternate){Mt=G;break e}G=Mt(G),V=Mt(V)}Mt=null}else Mt=null;J!==null&&zx(rt,Q,J,Mt,!1),xt!==null&&oe!==null&&zx(rt,oe,xt,Mt,!0)}}t:{if(Q=W?Go(W):window,J=Q.nodeName&&Q.nodeName.toLowerCase(),J==="select"||J==="input"&&Q.type==="file")var te=sb;else if(eb(Q))if(ib)te=X2;else{te=G2;var Ct=$2}else J=Q.nodeName,!J||J.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?W&&Wh(W.elementType)&&(te=sb):te=q2;if(te&&(te=te(i,W))){nb(rt,te,u,it);break t}Ct&&Ct(i,Q,W),i==="focusout"&&W&&Q.type==="number"&&W.memoizedProps.value!=null&&Yh(Q,"number",Q.value)}switch(Ct=W?Go(W):window,i){case"focusin":(eb(Ct)||Ct.contentEditable==="true")&&(vr=Ct,uf=W,tl=null);break;case"focusout":tl=uf=vr=null;break;case"mousedown":df=!0;break;case"contextmenu":case"mouseup":case"dragend":df=!1,hb(rt,u,it);break;case"selectionchange":if(W2)break;case"keydown":case"keyup":hb(rt,u,it)}var It;if(rf)t:{switch(i){case"compositionstart":var qt="onCompositionStart";break t;case"compositionend":qt="onCompositionEnd";break t;case"compositionupdate":qt="onCompositionUpdate";break t}qt=void 0}else yr?Jv(i,u)&&(qt="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(qt="onCompositionStart");qt&&(Kv&&u.locale!=="ko"&&(yr||qt!=="onCompositionStart"?qt==="onCompositionEnd"&&yr&&(It=Gv()):(Ri=it,tf="value"in Ri?Ri.value:Ri.textContent,yr=!0)),Ct=zu(W,qt),0<Ct.length&&(qt=new Yv(qt,i,null,u,it),rt.push({event:qt,listeners:Ct}),It?qt.data=It:(It=tb(u),It!==null&&(qt.data=It)))),(It=I2?z2(i,u):U2(i,u))&&(qt=zu(W,"onBeforeInput"),0<qt.length&&(Ct=new Yv("onBeforeInput","beforeinput",null,u,it),rt.push({event:Ct,listeners:qt}),Ct.data=It)),kN(rt,i,W,u,it)}Fx(rt,r)})}function Cl(i,r,u){return{instance:i,listener:r,currentTarget:u}}function zu(i,r){for(var u=r+"Capture",f=[];i!==null;){var g=i,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=qo(i,u),g!=null&&f.unshift(Cl(i,g,b)),g=qo(i,r),g!=null&&f.push(Cl(i,g,b))),i.tag===3)return f;i=i.return}return[]}function jN(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function zx(i,r,u,f,g){for(var b=r._reactName,_=[];u!==null&&u!==f;){var D=u,F=D.alternate,W=D.stateNode;if(D=D.tag,F!==null&&F===f)break;D!==5&&D!==26&&D!==27||W===null||(F=W,g?(W=qo(u,b),W!=null&&_.unshift(Cl(u,W,F))):g||(W=qo(u,b),W!=null&&_.push(Cl(u,W,F)))),u=u.return}_.length!==0&&i.push({event:r,listeners:_})}var BN=/\r\n?/g,FN=/\u0000|\uFFFD/g;function Ux(i){return(typeof i=="string"?i:""+i).replace(BN,`
`).replace(FN,"")}function Vx(i,r){return r=Ux(r),Ux(i)===r}function re(i,r,u,f,g,b){switch(u){case"children":typeof f=="string"?r==="body"||r==="textarea"&&f===""||pr(i,f):(typeof f=="number"||typeof f=="bigint")&&r!=="body"&&pr(i,""+f);break;case"className":$c(i,"class",f);break;case"tabIndex":$c(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":$c(i,u,f);break;case"style":Vv(i,f,b);break;case"data":if(r!=="object"){$c(i,"data",f);break}case"src":case"href":if(f===""&&(r!=="a"||u!=="href")){i.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(u);break}f=qc(""+f),i.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(r!=="input"&&re(i,r,"name",g.name,g,null),re(i,r,"formEncType",g.formEncType,g,null),re(i,r,"formMethod",g.formMethod,g,null),re(i,r,"formTarget",g.formTarget,g,null)):(re(i,r,"encType",g.encType,g,null),re(i,r,"method",g.method,g,null),re(i,r,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(u);break}f=qc(""+f),i.setAttribute(u,f);break;case"onClick":f!=null&&(i.onclick=Zs);break;case"onScroll":f!=null&&$t("scroll",i);break;case"onScrollEnd":f!=null&&$t("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(u=f.__html,u!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}u=qc(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,""+f):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":f===!0?i.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,f):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(u,f):i.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(u):i.setAttribute(u,f);break;case"popover":$t("beforetoggle",i),$t("toggle",i),Hc(i,"popover",f);break;case"xlinkActuate":Qs(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Qs(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Qs(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Qs(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Qs(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Qs(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Qs(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Qs(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Qs(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Hc(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=h2.get(u)||u,Hc(i,u,f))}}function jp(i,r,u,f,g,b){switch(u){case"style":Vv(i,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(u=f.__html,u!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"children":typeof f=="string"?pr(i,f):(typeof f=="number"||typeof f=="bigint")&&pr(i,""+f);break;case"onScroll":f!=null&&$t("scroll",i);break;case"onScrollEnd":f!=null&&$t("scrollend",i);break;case"onClick":f!=null&&(i.onclick=Zs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lv.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(g=u.endsWith("Capture"),r=u.slice(2,g?u.length-7:void 0),b=i[bn]||null,b=b!=null?b[u]:null,typeof b=="function"&&i.removeEventListener(r,b,g),typeof f=="function")){typeof b!="function"&&b!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(r,f,g);break t}u in i?i[u]=f:f===!0?i.setAttribute(u,""):Hc(i,u,f)}}}function en(i,r,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$t("error",i),$t("load",i);var f=!1,g=!1,b;for(b in u)if(u.hasOwnProperty(b)){var _=u[b];if(_!=null)switch(b){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:re(i,r,b,_,u,null)}}g&&re(i,r,"srcSet",u.srcSet,u,null),f&&re(i,r,"src",u.src,u,null);return;case"input":$t("invalid",i);var D=b=_=g=null,F=null,W=null;for(f in u)if(u.hasOwnProperty(f)){var it=u[f];if(it!=null)switch(f){case"name":g=it;break;case"type":_=it;break;case"checked":F=it;break;case"defaultChecked":W=it;break;case"value":b=it;break;case"defaultValue":D=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(n(137,r));break;default:re(i,r,f,it,u,null)}}Fv(i,b,D,F,W,_,g,!1);return;case"select":$t("invalid",i),f=_=b=null;for(g in u)if(u.hasOwnProperty(g)&&(D=u[g],D!=null))switch(g){case"value":b=D;break;case"defaultValue":_=D;break;case"multiple":f=D;default:re(i,r,g,D,u,null)}r=b,u=_,i.multiple=!!f,r!=null?fr(i,!!f,r,!1):u!=null&&fr(i,!!f,u,!0);return;case"textarea":$t("invalid",i),b=g=f=null;for(_ in u)if(u.hasOwnProperty(_)&&(D=u[_],D!=null))switch(_){case"value":f=D;break;case"defaultValue":g=D;break;case"children":b=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(n(91));break;default:re(i,r,_,D,u,null)}zv(i,f,g,b);return;case"option":for(F in u)u.hasOwnProperty(F)&&(f=u[F],f!=null)&&(F==="selected"?i.selected=f&&typeof f!="function"&&typeof f!="symbol":re(i,r,F,f,u,null));return;case"dialog":$t("beforetoggle",i),$t("toggle",i),$t("cancel",i),$t("close",i);break;case"iframe":case"object":$t("load",i);break;case"video":case"audio":for(f=0;f<El.length;f++)$t(El[f],i);break;case"image":$t("error",i),$t("load",i);break;case"details":$t("toggle",i);break;case"embed":case"source":case"link":$t("error",i),$t("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in u)if(u.hasOwnProperty(W)&&(f=u[W],f!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:re(i,r,W,f,u,null)}return;default:if(Wh(r)){for(it in u)u.hasOwnProperty(it)&&(f=u[it],f!==void 0&&jp(i,r,it,f,u,void 0));return}}for(D in u)u.hasOwnProperty(D)&&(f=u[D],f!=null&&re(i,r,D,f,u,null))}function IN(i,r,u,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,_=null,D=null,F=null,W=null,it=null;for(J in u){var rt=u[J];if(u.hasOwnProperty(J)&&rt!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":F=rt;default:f.hasOwnProperty(J)||re(i,r,J,null,f,rt)}}for(var Q in f){var J=f[Q];if(rt=u[Q],f.hasOwnProperty(Q)&&(J!=null||rt!=null))switch(Q){case"type":b=J;break;case"name":g=J;break;case"checked":W=J;break;case"defaultChecked":it=J;break;case"value":_=J;break;case"defaultValue":D=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(n(137,r));break;default:J!==rt&&re(i,r,Q,J,f,rt)}}Xh(i,_,D,F,W,it,b,g);return;case"select":J=_=D=Q=null;for(b in u)if(F=u[b],u.hasOwnProperty(b)&&F!=null)switch(b){case"value":break;case"multiple":J=F;default:f.hasOwnProperty(b)||re(i,r,b,null,f,F)}for(g in f)if(b=f[g],F=u[g],f.hasOwnProperty(g)&&(b!=null||F!=null))switch(g){case"value":Q=b;break;case"defaultValue":D=b;break;case"multiple":_=b;default:b!==F&&re(i,r,g,b,f,F)}r=D,u=_,f=J,Q!=null?fr(i,!!u,Q,!1):!!f!=!!u&&(r!=null?fr(i,!!u,r,!0):fr(i,!!u,u?[]:"",!1));return;case"textarea":J=Q=null;for(D in u)if(g=u[D],u.hasOwnProperty(D)&&g!=null&&!f.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:re(i,r,D,null,f,g)}for(_ in f)if(g=f[_],b=u[_],f.hasOwnProperty(_)&&(g!=null||b!=null))switch(_){case"value":Q=g;break;case"defaultValue":J=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==b&&re(i,r,_,g,f,b)}Iv(i,Q,J);return;case"option":for(var xt in u)Q=u[xt],u.hasOwnProperty(xt)&&Q!=null&&!f.hasOwnProperty(xt)&&(xt==="selected"?i.selected=!1:re(i,r,xt,null,f,Q));for(F in f)Q=f[F],J=u[F],f.hasOwnProperty(F)&&Q!==J&&(Q!=null||J!=null)&&(F==="selected"?i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":re(i,r,F,Q,f,J));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Mt in u)Q=u[Mt],u.hasOwnProperty(Mt)&&Q!=null&&!f.hasOwnProperty(Mt)&&re(i,r,Mt,null,f,Q);for(W in f)if(Q=f[W],J=u[W],f.hasOwnProperty(W)&&Q!==J&&(Q!=null||J!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(n(137,r));break;default:re(i,r,W,Q,f,J)}return;default:if(Wh(r)){for(var oe in u)Q=u[oe],u.hasOwnProperty(oe)&&Q!==void 0&&!f.hasOwnProperty(oe)&&jp(i,r,oe,void 0,f,Q);for(it in f)Q=f[it],J=u[it],!f.hasOwnProperty(it)||Q===J||Q===void 0&&J===void 0||jp(i,r,it,Q,f,J);return}}for(var G in u)Q=u[G],u.hasOwnProperty(G)&&Q!=null&&!f.hasOwnProperty(G)&&re(i,r,G,null,f,Q);for(rt in f)Q=f[rt],J=u[rt],!f.hasOwnProperty(rt)||Q===J||Q==null&&J==null||re(i,r,rt,Q,f,J)}function Hx(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function zN(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,u=performance.getEntriesByType("resource"),f=0;f<u.length;f++){var g=u[f],b=g.transferSize,_=g.initiatorType,D=g.duration;if(b&&D&&Hx(_)){for(_=0,D=g.responseEnd,f+=1;f<u.length;f++){var F=u[f],W=F.startTime;if(W>D)break;var it=F.transferSize,rt=F.initiatorType;it&&Hx(rt)&&(F=F.responseEnd,_+=it*(F<D?1:(D-W)/(F-W)))}if(--f,r+=8*(b+_)/(g.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Bp=null,Fp=null;function Uu(i){return i.nodeType===9?i:i.ownerDocument}function $x(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gx(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Ip(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var zp=null;function UN(){var i=window.event;return i&&i.type==="popstate"?i===zp?!1:(zp=i,!0):(zp=null,!1)}var qx=typeof setTimeout=="function"?setTimeout:void 0,VN=typeof clearTimeout=="function"?clearTimeout:void 0,Xx=typeof Promise=="function"?Promise:void 0,HN=typeof queueMicrotask=="function"?queueMicrotask:typeof Xx<"u"?function(i){return Xx.resolve(null).then(i).catch($N)}:qx;function $N(i){setTimeout(function(){throw i})}function Gi(i){return i==="head"}function Yx(i,r){var u=r,f=0;do{var g=u.nextSibling;if(i.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"||u==="/&"){if(f===0){i.removeChild(g),Gr(r);return}f--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")f++;else if(u==="html")Tl(i.ownerDocument.documentElement);else if(u==="head"){u=i.ownerDocument.head,Tl(u);for(var b=u.firstChild;b;){var _=b.nextSibling,D=b.nodeName;b[$o]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&b.rel.toLowerCase()==="stylesheet"||u.removeChild(b),b=_}}else u==="body"&&Tl(i.ownerDocument.body);u=g}while(u);Gr(r)}function Wx(i,r){var u=i;i=0;do{var f=u.nextSibling;if(u.nodeType===1?r?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(r?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(i===0)break;i--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||i++;u=f}while(u)}function Up(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var u=r;switch(r=r.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Up(u),Gh(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function GN(i,r,u,f){for(;i.nodeType===1;){var g=u;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[$o])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=is(i.nextSibling),i===null)break}return null}function qN(i,r,u){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=is(i.nextSibling),i===null))return null;return i}function Kx(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=is(i.nextSibling),i===null))return null;return i}function Vp(i){return i.data==="$?"||i.data==="$~"}function Hp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function XN(i,r){var u=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||u.readyState!=="loading")r();else{var f=function(){r(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function is(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var $p=null;function Qx(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"||u==="/&"){if(r===0)return is(i.nextSibling);r--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||r++}i=i.nextSibling}return null}function Zx(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(r===0)return i;r--}else u!=="/$"&&u!=="/&"||r++}i=i.previousSibling}return null}function Jx(i,r,u){switch(r=Uu(u),i){case"html":if(i=r.documentElement,!i)throw Error(n(452));return i;case"head":if(i=r.head,!i)throw Error(n(453));return i;case"body":if(i=r.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Tl(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Gh(i)}var as=new Map,tw=new Set;function Vu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var pi=z.d;z.d={f:YN,r:WN,D:KN,C:QN,L:ZN,m:JN,X:eM,S:tM,M:nM};function YN(){var i=pi.f(),r=Lu();return i||r}function WN(i){var r=ur(i);r!==null&&r.tag===5&&r.type==="form"?y0(r):pi.r(i)}var Vr=typeof document>"u"?null:document;function ew(i,r,u){var f=Vr;if(f&&typeof r=="string"&&r){var g=Qn(r);g='link[rel="'+i+'"][href="'+g+'"]',typeof u=="string"&&(g+='[crossorigin="'+u+'"]'),tw.has(g)||(tw.add(g),i={rel:i,crossOrigin:u,href:r},f.querySelector(g)===null&&(r=f.createElement("link"),en(r,"link",i),Ge(r),f.head.appendChild(r)))}}function KN(i){pi.D(i),ew("dns-prefetch",i,null)}function QN(i,r){pi.C(i,r),ew("preconnect",i,r)}function ZN(i,r,u){pi.L(i,r,u);var f=Vr;if(f&&i&&r){var g='link[rel="preload"][as="'+Qn(r)+'"]';r==="image"&&u&&u.imageSrcSet?(g+='[imagesrcset="'+Qn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(g+='[imagesizes="'+Qn(u.imageSizes)+'"]')):g+='[href="'+Qn(i)+'"]';var b=g;switch(r){case"style":b=Hr(i);break;case"script":b=$r(i)}as.has(b)||(i=m({rel:"preload",href:r==="image"&&u&&u.imageSrcSet?void 0:i,as:r},u),as.set(b,i),f.querySelector(g)!==null||r==="style"&&f.querySelector(_l(b))||r==="script"&&f.querySelector(Rl(b))||(r=f.createElement("link"),en(r,"link",i),Ge(r),f.head.appendChild(r)))}}function JN(i,r){pi.m(i,r);var u=Vr;if(u&&i){var f=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+Qn(f)+'"][href="'+Qn(i)+'"]',b=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=$r(i)}if(!as.has(b)&&(i=m({rel:"modulepreload",href:i},r),as.set(b,i),u.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Rl(b)))return}f=u.createElement("link"),en(f,"link",i),Ge(f),u.head.appendChild(f)}}}function tM(i,r,u){pi.S(i,r,u);var f=Vr;if(f&&i){var g=dr(f).hoistableStyles,b=Hr(i);r=r||"default";var _=g.get(b);if(!_){var D={loading:0,preload:null};if(_=f.querySelector(_l(b)))D.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":r},u),(u=as.get(b))&&Gp(i,u);var F=_=f.createElement("link");Ge(F),en(F,"link",i),F._p=new Promise(function(W,it){F.onload=W,F.onerror=it}),F.addEventListener("load",function(){D.loading|=1}),F.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Hu(_,r,f)}_={type:"stylesheet",instance:_,count:1,state:D},g.set(b,_)}}}function eM(i,r){pi.X(i,r);var u=Vr;if(u&&i){var f=dr(u).hoistableScripts,g=$r(i),b=f.get(g);b||(b=u.querySelector(Rl(g)),b||(i=m({src:i,async:!0},r),(r=as.get(g))&&qp(i,r),b=u.createElement("script"),Ge(b),en(b,"link",i),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function nM(i,r){pi.M(i,r);var u=Vr;if(u&&i){var f=dr(u).hoistableScripts,g=$r(i),b=f.get(g);b||(b=u.querySelector(Rl(g)),b||(i=m({src:i,async:!0,type:"module"},r),(r=as.get(g))&&qp(i,r),b=u.createElement("script"),Ge(b),en(b,"link",i),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(g,b))}}function nw(i,r,u,f){var g=(g=st.current)?Vu(g):null;if(!g)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(r=Hr(u.href),u=dr(g).hoistableStyles,f=u.get(r),f||(f={type:"style",instance:null,count:0,state:null},u.set(r,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=Hr(u.href);var b=dr(g).hoistableStyles,_=b.get(i);if(_||(g=g.ownerDocument||g,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,_),(b=g.querySelector(_l(i)))&&!b._p&&(_.instance=b,_.state.loading=5),as.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},as.set(i,u),b||sM(g,i,u,_.state))),r&&f===null)throw Error(n(528,""));return _}if(r&&f!==null)throw Error(n(529,""));return null;case"script":return r=u.async,u=u.src,typeof u=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=$r(u),u=dr(g).hoistableScripts,f=u.get(r),f||(f={type:"script",instance:null,count:0,state:null},u.set(r,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Hr(i){return'href="'+Qn(i)+'"'}function _l(i){return'link[rel="stylesheet"]['+i+"]"}function sw(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function sM(i,r,u,f){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?f.loading=1:(r=i.createElement("link"),f.preload=r,r.addEventListener("load",function(){return f.loading|=1}),r.addEventListener("error",function(){return f.loading|=2}),en(r,"link",u),Ge(r),i.head.appendChild(r))}function $r(i){return'[src="'+Qn(i)+'"]'}function Rl(i){return"script[async]"+i}function iw(i,r,u){if(r.count++,r.instance===null)switch(r.type){case"style":var f=i.querySelector('style[data-href~="'+Qn(u.href)+'"]');if(f)return r.instance=f,Ge(f),f;var g=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),Ge(f),en(f,"style",g),Hu(f,u.precedence,i),r.instance=f;case"stylesheet":g=Hr(u.href);var b=i.querySelector(_l(g));if(b)return r.state.loading|=4,r.instance=b,Ge(b),b;f=sw(u),(g=as.get(g))&&Gp(f,g),b=(i.ownerDocument||i).createElement("link"),Ge(b);var _=b;return _._p=new Promise(function(D,F){_.onload=D,_.onerror=F}),en(b,"link",f),r.state.loading|=4,Hu(b,u.precedence,i),r.instance=b;case"script":return b=$r(u.src),(g=i.querySelector(Rl(b)))?(r.instance=g,Ge(g),g):(f=u,(g=as.get(b))&&(f=m({},u),qp(f,g)),i=i.ownerDocument||i,g=i.createElement("script"),Ge(g),en(g,"link",f),i.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(n(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(f=r.instance,r.state.loading|=4,Hu(f,u.precedence,i));return r.instance}function Hu(i,r,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,b=g,_=0;_<f.length;_++){var D=f[_];if(D.dataset.precedence===r)b=D;else if(b!==g)break}b?b.parentNode.insertBefore(i,b.nextSibling):(r=u.nodeType===9?u.head:u,r.insertBefore(i,r.firstChild))}function Gp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function qp(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var $u=null;function aw(i,r,u){if($u===null){var f=new Map,g=$u=new Map;g.set(u,f)}else g=$u,f=g.get(u),f||(f=new Map,g.set(u,f));if(f.has(i))return f;for(f.set(i,null),u=u.getElementsByTagName(i),g=0;g<u.length;g++){var b=u[g];if(!(b[$o]||b[Qe]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var _=b.getAttribute(r)||"";_=i+_;var D=f.get(_);D?D.push(b):f.set(_,[b])}}return f}function rw(i,r,u){i=i.ownerDocument||i,i.head.insertBefore(u,r==="title"?i.querySelector("head > title"):null)}function iM(i,r,u){if(u===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(i=r.disabled,typeof r.precedence=="string"&&i==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function ow(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function aM(i,r,u,f){if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var g=Hr(f.href),b=r.querySelector(_l(g));if(b){r=b._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=Gu.bind(i),r.then(i,i)),u.state.loading|=4,u.instance=b,Ge(b);return}b=r.ownerDocument||r,f=sw(f),(g=as.get(g))&&Gp(f,g),b=b.createElement("link"),Ge(b);var _=b;_._p=new Promise(function(D,F){_.onload=D,_.onerror=F}),en(b,"link",f),u.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(u,r),(r=u.state.preload)&&(u.state.loading&3)===0&&(i.count++,u=Gu.bind(i),r.addEventListener("load",u),r.addEventListener("error",u))}}var Xp=0;function rM(i,r){return i.stylesheets&&i.count===0&&Xu(i,i.stylesheets),0<i.count||0<i.imgCount?function(u){var f=setTimeout(function(){if(i.stylesheets&&Xu(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+r);0<i.imgBytes&&Xp===0&&(Xp=62500*zN());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Xu(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>Xp?50:800)+r);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(g)}}:null}function Gu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xu(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var qu=null;function Xu(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,qu=new Map,r.forEach(oM,i),qu=null,Gu.call(i))}function oM(i,r){if(!(r.state.loading&4)){var u=qu.get(i);if(u)var f=u.get(null);else{u=new Map,qu.set(i,u);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var _=g[b];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(u.set(_.dataset.precedence,_),f=_)}f&&u.set(null,f)}g=r.instance,_=g.getAttribute("data-precedence"),b=u.get(_)||f,b===f&&u.set(null,g),u.set(_,g),this.count++,f=Gu.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),b?b.parentNode.insertBefore(g,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),r.state.loading|=4}}var Nl={$$typeof:R,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function lM(i,r,u,f,g,b,_,D,F){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Uh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uh(0),this.hiddenUpdates=Uh(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function lw(i,r,u,f,g,b,_,D,F,W,it,rt){return i=new lM(i,r,u,_,F,W,it,rt,D),r=1,b===!0&&(r|=24),b=Ln(3,null,null,r),i.current=b,b.stateNode=i,r=Tf(),r.refCount++,i.pooledCache=r,r.refCount++,b.memoizedState={element:f,isDehydrated:u,cache:r},Mf(b),i}function cw(i){return i?(i=wr,i):wr}function uw(i,r,u,f,g,b){g=cw(g),f.context===null?f.context=g:f.pendingContext=g,f=Oi(r),f.payload={element:u},b=b===void 0?null:b,b!==null&&(f.callback=b),u=Pi(i,f,r),u!==null&&(Cn(u,i,r),ol(u,i,r))}function dw(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<r?u:r}}function Yp(i,r){dw(i,r),(i=i.alternate)&&dw(i,r)}function hw(i){if(i.tag===13||i.tag===31){var r=xa(i,67108864);r!==null&&Cn(r,i,67108864),Yp(i,67108864)}}function fw(i){if(i.tag===13||i.tag===31){var r=Fn();r=Vh(r);var u=xa(i,r);u!==null&&Cn(u,i,r),Yp(i,r)}}var Yu=!0;function cM(i,r,u,f){var g=P.T;P.T=null;var b=z.p;try{z.p=2,Wp(i,r,u,f)}finally{z.p=b,P.T=g}}function uM(i,r,u,f){var g=P.T;P.T=null;var b=z.p;try{z.p=8,Wp(i,r,u,f)}finally{z.p=b,P.T=g}}function Wp(i,r,u,f){if(Yu){var g=Kp(f);if(g===null)Pp(i,r,f,Wu,u),mw(i,f);else if(hM(g,i,r,u,f))f.stopPropagation();else if(mw(i,f),r&4&&-1<dM.indexOf(i)){for(;g!==null;){var b=ur(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var _=ma(b.pendingLanes);if(_!==0){var D=b;for(D.pendingLanes|=2,D.entangledLanes|=2;_;){var F=1<<31-Dn(_);D.entanglements[1]|=F,_&=~F}Os(b),(ne&6)===0&&(Du=Ke()+500,Al(0))}}break;case 31:case 13:D=xa(b,2),D!==null&&Cn(D,b,2),Lu(),Yp(b,2)}if(b=Kp(f),b===null&&Pp(i,r,f,Wu,u),b===g)break;g=b}g!==null&&f.stopPropagation()}else Pp(i,r,f,null,u)}}function Kp(i){return i=Qh(i),Qp(i)}var Wu=null;function Qp(i){if(Wu=null,i=cr(i),i!==null){var r=o(i);if(r===null)i=null;else{var u=r.tag;if(u===13){if(i=l(r),i!==null)return i;i=null}else if(u===31){if(i=c(r),i!==null)return i;i=null}else if(u===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Wu=i,null}function pw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Uo()){case rr:return 2;case or:return 8;case dn:case gs:return 32;case mt:return 268435456;default:return 32}default:return 32}}var Zp=!1,qi=null,Xi=null,Yi=null,Ml=new Map,Dl=new Map,Wi=[],dM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mw(i,r){switch(i){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":Yi=null;break;case"pointerover":case"pointerout":Ml.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dl.delete(r.pointerId)}}function kl(i,r,u,f,g,b){return i===null||i.nativeEvent!==b?(i={blockedOn:r,domEventName:u,eventSystemFlags:f,nativeEvent:b,targetContainers:[g]},r!==null&&(r=ur(r),r!==null&&hw(r)),i):(i.eventSystemFlags|=f,r=i.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),i)}function hM(i,r,u,f,g){switch(r){case"focusin":return qi=kl(qi,i,r,u,f,g),!0;case"dragenter":return Xi=kl(Xi,i,r,u,f,g),!0;case"mouseover":return Yi=kl(Yi,i,r,u,f,g),!0;case"pointerover":var b=g.pointerId;return Ml.set(b,kl(Ml.get(b)||null,i,r,u,f,g)),!0;case"gotpointercapture":return b=g.pointerId,Dl.set(b,kl(Dl.get(b)||null,i,r,u,f,g)),!0}return!1}function gw(i){var r=cr(i.target);if(r!==null){var u=o(r);if(u!==null){if(r=u.tag,r===13){if(r=l(u),r!==null){i.blockedOn=r,Mv(i.priority,function(){fw(u)});return}}else if(r===31){if(r=c(u),r!==null){i.blockedOn=r,Mv(i.priority,function(){fw(u)});return}}else if(r===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ku(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var u=Kp(i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);Kh=f,u.target.dispatchEvent(f),Kh=null}else return r=ur(u),r!==null&&hw(r),i.blockedOn=u,!1;r.shift()}return!0}function yw(i,r,u){Ku(i)&&u.delete(r)}function fM(){Zp=!1,qi!==null&&Ku(qi)&&(qi=null),Xi!==null&&Ku(Xi)&&(Xi=null),Yi!==null&&Ku(Yi)&&(Yi=null),Ml.forEach(yw),Dl.forEach(yw)}function Qu(i,r){i.blockedOn===r&&(i.blockedOn=null,Zp||(Zp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,fM)))}var Zu=null;function vw(i){Zu!==i&&(Zu=i,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Zu===i&&(Zu=null);for(var r=0;r<i.length;r+=3){var u=i[r],f=i[r+1],g=i[r+2];if(typeof f!="function"){if(Qp(f||u)===null)continue;break}var b=ur(u);b!==null&&(i.splice(r,3),r-=3,Kf(b,{pending:!0,data:g,method:u.method,action:f},f,g))}}))}function Gr(i){function r(F){return Qu(F,i)}qi!==null&&Qu(qi,i),Xi!==null&&Qu(Xi,i),Yi!==null&&Qu(Yi,i),Ml.forEach(r),Dl.forEach(r);for(var u=0;u<Wi.length;u++){var f=Wi[u];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Wi.length&&(u=Wi[0],u.blockedOn===null);)gw(u),u.blockedOn===null&&Wi.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var g=u[f],b=u[f+1],_=g[bn]||null;if(typeof b=="function")_||vw(u);else if(_){var D=null;if(b&&b.hasAttribute("formAction")){if(g=b,_=b[bn]||null)D=_.formAction;else if(Qp(g)!==null)continue}else D=_.action;typeof D=="function"?u[f+1]=D:(u.splice(f,3),f-=3),vw(u)}}}function bw(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(_){return g=_})},focusReset:"manual",scroll:"manual"})}function r(){g!==null&&(g(),g=null),f||setTimeout(u,20)}function u(){if(!f&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(u,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),g!==null&&(g(),g=null)}}}function Jp(i){this._internalRoot=i}Ju.prototype.render=Jp.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(n(409));var u=r.current,f=Fn();uw(u,f,i,r,null,null)},Ju.prototype.unmount=Jp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;uw(i.current,2,null,i,null,null),Lu(),r[lr]=null}};function Ju(i){this._internalRoot=i}Ju.prototype.unstable_scheduleHydration=function(i){if(i){var r=Nv();i={blockedOn:null,target:i,priority:r};for(var u=0;u<Wi.length&&r!==0&&r<Wi[u].priority;u++);Wi.splice(u,0,i),u===0&&gw(i)}};var xw=t.version;if(xw!=="19.2.3")throw Error(n(527,xw,"19.2.3"));z.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=h(r),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var pM={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!td.isDisabled&&td.supportsFiber)try{Ms=td.inject(pM),pe=td}catch{}}return Ol.createRoot=function(i,r){if(!a(i))throw Error(n(299));var u=!1,f="",g=_0,b=R0,_=N0;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError)),r=lw(i,1,!1,null,null,u,f,null,g,b,_,bw),i[lr]=r.current,Op(i),new Jp(r)},Ol.hydrateRoot=function(i,r,u){if(!a(i))throw Error(n(299));var f=!1,g="",b=_0,_=R0,D=N0,F=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(D=u.onRecoverableError),u.formState!==void 0&&(F=u.formState)),r=lw(i,1,!0,r,u??null,f,g,F,b,_,D,bw),r.context=cw(null),u=r.current,f=Fn(),f=Vh(f),g=Oi(f),g.callback=null,Pi(u,g,f),u=f,r.current.lanes=u,Ho(r,u),Os(r),i[lr]=r.current,Op(i),new Ju(r)},Ol.version="19.2.3",Ol}var kw;function EM(){if(kw)return sm.exports;kw=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),sm.exports=AM(),sm.exports}var CM=EM();const Ot=s=>typeof s=="string",Pl=()=>{let s,t;const e=new Promise((n,a)=>{s=n,t=a});return e.resolve=s,e.reject=t,e},Lw=s=>s==null?"":""+s,TM=(s,t,e)=>{s.forEach(n=>{t[n]&&(e[n]=t[n])})},_M=/###/g,Ow=s=>s&&s.indexOf("###")>-1?s.replace(_M,"."):s,Pw=s=>!s||Ot(s),Kl=(s,t,e)=>{const n=Ot(t)?t.split("."):t;let a=0;for(;a<n.length-1;){if(Pw(s))return{};const o=Ow(n[a]);!s[o]&&e&&(s[o]=new e),Object.prototype.hasOwnProperty.call(s,o)?s=s[o]:s={},++a}return Pw(s)?{}:{obj:s,k:Ow(n[a])}},jw=(s,t,e)=>{const{obj:n,k:a}=Kl(s,t,Object);if(n!==void 0||t.length===1){n[a]=e;return}let o=t[t.length-1],l=t.slice(0,t.length-1),c=Kl(s,l,Object);for(;c.obj===void 0&&l.length;)o=`${l[l.length-1]}.${o}`,l=l.slice(0,l.length-1),c=Kl(s,l,Object),c?.obj&&typeof c.obj[`${c.k}.${o}`]<"u"&&(c.obj=void 0);c.obj[`${c.k}.${o}`]=e},RM=(s,t,e,n)=>{const{obj:a,k:o}=Kl(s,t,Object);a[o]=a[o]||[],a[o].push(e)},Id=(s,t)=>{const{obj:e,k:n}=Kl(s,t);if(e&&Object.prototype.hasOwnProperty.call(e,n))return e[n]},NM=(s,t,e)=>{const n=Id(s,e);return n!==void 0?n:Id(t,e)},IA=(s,t,e)=>{for(const n in t)n!=="__proto__"&&n!=="constructor"&&(n in s?Ot(s[n])||s[n]instanceof String||Ot(t[n])||t[n]instanceof String?e&&(s[n]=t[n]):IA(s[n],t[n],e):s[n]=t[n]);return s},qr=s=>s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var MM={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const DM=s=>Ot(s)?s.replace(/[&<>"'\/]/g,t=>MM[t]):s;class kM{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const e=this.regExpMap.get(t);if(e!==void 0)return e;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}const LM=[" ",",","?","!",";"],OM=new kM(20),PM=(s,t,e)=>{t=t||"",e=e||"";const n=LM.filter(l=>t.indexOf(l)<0&&e.indexOf(l)<0);if(n.length===0)return!0;const a=OM.getRegExp(`(${n.map(l=>l==="?"?"\\?":l).join("|")})`);let o=!a.test(s);if(!o){const l=s.indexOf(e);l>0&&!a.test(s.substring(0,l))&&(o=!0)}return o},Qm=(s,t,e=".")=>{if(!s)return;if(s[t])return Object.prototype.hasOwnProperty.call(s,t)?s[t]:void 0;const n=t.split(e);let a=s;for(let o=0;o<n.length;){if(!a||typeof a!="object")return;let l,c="";for(let d=o;d<n.length;++d)if(d!==o&&(c+=e),c+=n[d],l=a[c],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&d<n.length-1)continue;o+=d-o+1;break}a=l}return a},ac=s=>s?.replace("_","-"),jM={type:"logger",log(s){this.output("log",s)},warn(s){this.output("warn",s)},error(s){this.output("error",s)},output(s,t){console?.[s]?.apply?.(console,t)}};class zd{constructor(t,e={}){this.init(t,e)}init(t,e={}){this.prefix=e.prefix||"i18next:",this.logger=t||jM,this.options=e,this.debug=e.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,e,n,a){return a&&!this.debug?null:(Ot(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[e](t))}create(t){return new zd(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new zd(this.logger,t)}}var $s=new zd;class hh{constructor(){this.observers={}}on(t,e){return t.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const a=this.observers[n].get(e)||0;this.observers[n].set(e,a+1)}),this}off(t,e){if(this.observers[t]){if(!e){delete this.observers[t];return}this.observers[t].delete(e)}}emit(t,...e){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([a,o])=>{for(let l=0;l<o;l++)a(...e)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([a,o])=>{for(let l=0;l<o;l++)a.apply(a,[t,...e])})}}class Bw extends hh{constructor(t,e={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}getResource(t,e,n,a={}){const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,l=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;t.indexOf(".")>-1?c=t.split("."):(c=[t,e],n&&(Array.isArray(n)?c.push(...n):Ot(n)&&o?c.push(...n.split(o)):c.push(n)));const d=Id(this.data,c);return!d&&!e&&!n&&t.indexOf(".")>-1&&(t=c[0],e=c[1],n=c.slice(2).join(".")),d||!l||!Ot(n)?d:Qm(this.data?.[t]?.[e],n,o)}addResource(t,e,n,a,o={silent:!1}){const l=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let c=[t,e];n&&(c=c.concat(l?n.split(l):n)),t.indexOf(".")>-1&&(c=t.split("."),a=e,e=c[1]),this.addNamespaces(e),jw(this.data,c,a),o.silent||this.emit("added",t,e,n,a)}addResources(t,e,n,a={silent:!1}){for(const o in n)(Ot(n[o])||Array.isArray(n[o]))&&this.addResource(t,e,o,n[o],{silent:!0});a.silent||this.emit("added",t,e,n)}addResourceBundle(t,e,n,a,o,l={silent:!1,skipCopy:!1}){let c=[t,e];t.indexOf(".")>-1&&(c=t.split("."),a=n,n=e,e=c[1]),this.addNamespaces(e);let d=Id(this.data,c)||{};l.skipCopy||(n=JSON.parse(JSON.stringify(n))),a?IA(d,n,o):d={...d,...n},jw(this.data,c,d),l.silent||this.emit("added",t,e,n)}removeResourceBundle(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}hasResourceBundle(t,e){return this.getResource(t,e)!==void 0}getResourceBundle(t,e){return e||(e=this.options.defaultNS),this.getResource(t,e)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find(a=>e[a]&&Object.keys(e[a]).length>0)}toJSON(){return this.data}}var zA={processors:{},addPostProcessor(s){this.processors[s.name]=s},handle(s,t,e,n,a){return s.forEach(o=>{t=this.processors[o]?.process(t,e,n,a)??t}),t}};const UA=Symbol("i18next/PATH_KEY");function BM(){const s=[],t=Object.create(null);let e;return t.get=(n,a)=>(e?.revoke?.(),a===UA?s:(s.push(a),e=Proxy.revocable(n,t),e.proxy)),Proxy.revocable(Object.create(null),t).proxy}function Zm(s,t){const{[UA]:e}=s(BM());return e.join(t?.keySeparator??".")}const Fw={},om=s=>!Ot(s)&&typeof s!="boolean"&&typeof s!="number";class Ud extends hh{constructor(t,e={}){super(),TM(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=e,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=$s.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,e={interpolation:{}}){const n={...e};if(t==null)return!1;const a=this.resolve(t,n);if(a?.res===void 0)return!1;const o=om(a.res);return!(n.returnObjects===!1&&o)}extractFromKey(t,e){let n=e.nsSeparator!==void 0?e.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const a=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator;let o=e.ns||this.options.defaultNS||[];const l=n&&t.indexOf(n)>-1,c=!this.options.userDefinedKeySeparator&&!e.keySeparator&&!this.options.userDefinedNsSeparator&&!e.nsSeparator&&!PM(t,n,a);if(l&&!c){const d=t.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:t,namespaces:Ot(o)?[o]:o};const h=t.split(n);(n!==a||n===a&&this.options.ns.indexOf(h[0])>-1)&&(o=h.shift()),t=h.join(a)}return{key:t,namespaces:Ot(o)?[o]:o}}translate(t,e,n){let a=typeof e=="object"?{...e}:e;if(typeof a!="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),typeof a=="object"&&(a={...a}),a||(a={}),t==null)return"";typeof t=="function"&&(t=Zm(t,{...this.options,...a})),Array.isArray(t)||(t=[String(t)]);const o=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,{key:c,namespaces:d}=this.extractFromKey(t[t.length-1],a),h=d[d.length-1];let p=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;p===void 0&&(p=":");const m=a.lng||this.language,y=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(m?.toLowerCase()==="cimode")return y?o?{res:`${h}${p}${c}`,usedKey:c,exactUsedKey:c,usedLng:m,usedNS:h,usedParams:this.getUsedParamsDetails(a)}:`${h}${p}${c}`:o?{res:c,usedKey:c,exactUsedKey:c,usedLng:m,usedNS:h,usedParams:this.getUsedParamsDetails(a)}:c;const x=this.resolve(t,a);let S=x?.res;const w=x?.usedKey||c,E=x?.exactUsedKey||c,C=["[object Number]","[object Function]","[object RegExp]"],T=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,R=!this.i18nFormat||this.i18nFormat.handleAsObject,N=a.count!==void 0&&!Ot(a.count),M=Ud.hasDefaultValue(a),O=N?this.pluralResolver.getSuffix(m,a.count,a):"",k=a.ordinal&&N?this.pluralResolver.getSuffix(m,a.count,{ordinal:!1}):"",L=N&&!a.ordinal&&a.count===0,j=L&&a[`defaultValue${this.options.pluralSeparator}zero`]||a[`defaultValue${O}`]||a[`defaultValue${k}`]||a.defaultValue;let U=S;R&&!S&&M&&(U=j);const H=om(U),$=Object.prototype.toString.apply(U);if(R&&U&&H&&C.indexOf($)<0&&!(Ot(T)&&Array.isArray(U))){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Z=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,U,{...a,ns:d}):`key '${c} (${this.language})' returned an object instead of string.`;return o?(x.res=Z,x.usedParams=this.getUsedParamsDetails(a),x):Z}if(l){const Z=Array.isArray(U),et=Z?[]:{},ct=Z?E:w;for(const P in U)if(Object.prototype.hasOwnProperty.call(U,P)){const z=`${ct}${l}${P}`;M&&!S?et[P]=this.translate(z,{...a,defaultValue:om(j)?j[P]:void 0,joinArrays:!1,ns:d}):et[P]=this.translate(z,{...a,joinArrays:!1,ns:d}),et[P]===z&&(et[P]=U[P])}S=et}}else if(R&&Ot(T)&&Array.isArray(S))S=S.join(T),S&&(S=this.extendTranslation(S,t,a,n));else{let Z=!1,et=!1;!this.isValidLookup(S)&&M&&(Z=!0,S=j),this.isValidLookup(S)||(et=!0,S=c);const P=(a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&et?void 0:S,z=M&&j!==S&&this.options.updateMissing;if(et||Z||z){if(this.logger.log(z?"updateKey":"missingKey",m,h,c,z?j:S),l){const B=this.resolve(c,{...a,keySeparator:!1});B&&B.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let I=[];const K=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&K&&K[0])for(let B=0;B<K.length;B++)I.push(K[B]);else this.options.saveMissingTo==="all"?I=this.languageUtils.toResolveHierarchy(a.lng||this.language):I.push(a.lng||this.language);const ht=(B,X,tt)=>{const ot=M&&tt!==S?tt:P;this.options.missingKeyHandler?this.options.missingKeyHandler(B,h,X,ot,z,a):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(B,h,X,ot,z,a),this.emit("missingKey",B,h,X,S)};this.options.saveMissing&&(this.options.saveMissingPlurals&&N?I.forEach(B=>{const X=this.pluralResolver.getSuffixes(B,a);L&&a[`defaultValue${this.options.pluralSeparator}zero`]&&X.indexOf(`${this.options.pluralSeparator}zero`)<0&&X.push(`${this.options.pluralSeparator}zero`),X.forEach(tt=>{ht([B],c+tt,a[`defaultValue${tt}`]||j)})}):ht(I,c,j))}S=this.extendTranslation(S,t,a,x,n),et&&S===c&&this.options.appendNamespaceToMissingKey&&(S=`${h}${p}${c}`),(et||Z)&&this.options.parseMissingKeyHandler&&(S=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${p}${c}`:c,Z?S:void 0,a))}return o?(x.res=S,x.usedParams=this.getUsedParamsDetails(a),x):S}extendTranslation(t,e,n,a,o){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=Ot(t)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(d){const m=t.match(this.interpolator.nestingRegexp);h=m&&m.length}let p=n.replace&&!Ot(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),t=this.interpolator.interpolate(t,p,n.lng||this.language||a.usedLng,n),d){const m=t.match(this.interpolator.nestingRegexp),y=m&&m.length;h<y&&(n.nest=!1)}!n.lng&&a&&a.res&&(n.lng=this.language||a.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,(...m)=>o?.[0]===m[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${m[0]} in key: ${e[0]}`),null):this.translate(...m,e),n)),n.interpolation&&this.interpolator.reset()}const l=n.postProcess||this.options.postProcess,c=Ot(l)?[l]:l;return t!=null&&c?.length&&n.applyPostProcessor!==!1&&(t=zA.handle(c,t,e,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t,e={}){let n,a,o,l,c;return Ot(t)&&(t=[t]),t.forEach(d=>{if(this.isValidLookup(n))return;const h=this.extractFromKey(d,e),p=h.key;a=p;let m=h.namespaces;this.options.fallbackNS&&(m=m.concat(this.options.fallbackNS));const y=e.count!==void 0&&!Ot(e.count),x=y&&!e.ordinal&&e.count===0,S=e.context!==void 0&&(Ot(e.context)||typeof e.context=="number")&&e.context!=="",w=e.lngs?e.lngs:this.languageUtils.toResolveHierarchy(e.lng||this.language,e.fallbackLng);m.forEach(E=>{this.isValidLookup(n)||(c=E,!Fw[`${w[0]}-${E}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(c)&&(Fw[`${w[0]}-${E}`]=!0,this.logger.warn(`key "${a}" for languages "${w.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(C=>{if(this.isValidLookup(n))return;l=C;const T=[p];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(T,p,C,E,e);else{let N;y&&(N=this.pluralResolver.getSuffix(C,e.count,e));const M=`${this.options.pluralSeparator}zero`,O=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(y&&(e.ordinal&&N.indexOf(O)===0&&T.push(p+N.replace(O,this.options.pluralSeparator)),T.push(p+N),x&&T.push(p+M)),S){const k=`${p}${this.options.contextSeparator||"_"}${e.context}`;T.push(k),y&&(e.ordinal&&N.indexOf(O)===0&&T.push(k+N.replace(O,this.options.pluralSeparator)),T.push(k+N),x&&T.push(k+M))}}let R;for(;R=T.pop();)this.isValidLookup(n)||(o=R,n=this.getResource(C,E,R,e))}))})}),{res:n,usedKey:a,exactUsedKey:o,usedLng:l,usedNS:c}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,e,n,a={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,e,n,a):this.resourceStore.getResource(t,e,n,a)}getUsedParamsDetails(t={}){const e=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!Ot(t.replace);let a=n?t.replace:t;if(n&&typeof t.count<"u"&&(a.count=t.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!n){a={...a};for(const o of e)delete a[o]}return a}static hasDefaultValue(t){const e="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e===n.substring(0,e.length)&&t[n]!==void 0)return!0;return!1}}class Iw{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=$s.create("languageUtils")}getScriptPartFromCode(t){if(t=ac(t),!t||t.indexOf("-")<0)return null;const e=t.split("-");return e.length===2||(e.pop(),e[e.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(e.join("-"))}getLanguagePartFromCode(t){if(t=ac(t),!t||t.indexOf("-")<0)return t;const e=t.split("-");return this.formatLanguageCode(e[0])}formatLanguageCode(t){if(Ot(t)&&t.indexOf("-")>-1){let e;try{e=Intl.getCanonicalLocales(t)[0]}catch{}return e&&this.options.lowerCaseLng&&(e=e.toLowerCase()),e||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let e;return t.forEach(n=>{if(e)return;const a=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(a))&&(e=a)}),!e&&this.options.supportedLngs&&t.forEach(n=>{if(e)return;const a=this.getScriptPartFromCode(n);if(this.isSupportedCode(a))return e=a;const o=this.getLanguagePartFromCode(n);if(this.isSupportedCode(o))return e=o;e=this.options.supportedLngs.find(l=>{if(l===o)return l;if(!(l.indexOf("-")<0&&o.indexOf("-")<0)&&(l.indexOf("-")>0&&o.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===o||l.indexOf(o)===0&&o.length>1))return l})}),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e}getFallbackCodes(t,e){if(!t)return[];if(typeof t=="function"&&(t=t(e)),Ot(t)&&(t=[t]),Array.isArray(t))return t;if(!e)return t.default||[];let n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}toResolveHierarchy(t,e){const n=this.getFallbackCodes((e===!1?[]:e)||this.options.fallbackLng||[],t),a=[],o=l=>{l&&(this.isSupportedCode(l)?a.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return Ot(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(t))):Ot(t)&&o(this.formatLanguageCode(t)),n.forEach(l=>{a.indexOf(l)<0&&o(this.formatLanguageCode(l))}),a}}const zw={zero:0,one:1,two:2,few:3,many:4,other:5},Uw={select:s=>s===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class FM{constructor(t,e={}){this.languageUtils=t,this.options=e,this.logger=$s.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(t,e={}){const n=ac(t==="dev"?"en":t),a=e.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:n,type:a});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let l;try{l=new Intl.PluralRules(n,{type:a})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Uw;if(!t.match(/-|_/))return Uw;const d=this.languageUtils.getLanguagePartFromCode(t);l=this.getRule(d,e)}return this.pluralRulesCache[o]=l,l}needsPlural(t,e={}){let n=this.getRule(t,e);return n||(n=this.getRule("dev",e)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,e,n={}){return this.getSuffixes(t,n).map(a=>`${e}${a}`)}getSuffixes(t,e={}){let n=this.getRule(t,e);return n||(n=this.getRule("dev",e)),n?n.resolvedOptions().pluralCategories.sort((a,o)=>zw[a]-zw[o]).map(a=>`${this.options.prepend}${e.ordinal?`ordinal${this.options.prepend}`:""}${a}`):[]}getSuffix(t,e,n={}){const a=this.getRule(t,n);return a?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a.select(e)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",e,n))}}const Vw=(s,t,e,n=".",a=!0)=>{let o=NM(s,t,e);return!o&&a&&Ot(e)&&(o=Qm(s,e,n),o===void 0&&(o=Qm(t,e,n))),o},lm=s=>s.replace(/\$/g,"$$$$");class Hw{constructor(t={}){this.logger=$s.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(e=>e),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:e,escapeValue:n,useRawValueToEscape:a,prefix:o,prefixEscaped:l,suffix:c,suffixEscaped:d,formatSeparator:h,unescapeSuffix:p,unescapePrefix:m,nestingPrefix:y,nestingPrefixEscaped:x,nestingSuffix:S,nestingSuffixEscaped:w,nestingOptionsSeparator:E,maxReplaces:C,alwaysFormat:T}=t.interpolation;this.escape=e!==void 0?e:DM,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=o?qr(o):l||"{{",this.suffix=c?qr(c):d||"}}",this.formatSeparator=h||",",this.unescapePrefix=p?"":m||"-",this.unescapeSuffix=this.unescapePrefix?"":p||"",this.nestingPrefix=y?qr(y):x||qr("$t("),this.nestingSuffix=S?qr(S):w||qr(")"),this.nestingOptionsSeparator=E||",",this.maxReplaces=C||1e3,this.alwaysFormat=T!==void 0?T:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(e,n)=>e?.source===n?(e.lastIndex=0,e):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,e,n,a){let o,l,c;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=x=>{if(x.indexOf(this.formatSeparator)<0){const C=Vw(e,d,x,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(C,void 0,n,{...a,...e,interpolationkey:x}):C}const S=x.split(this.formatSeparator),w=S.shift().trim(),E=S.join(this.formatSeparator).trim();return this.format(Vw(e,d,w,this.options.keySeparator,this.options.ignoreJSONStructure),E,n,{...a,...e,interpolationkey:w})};this.resetRegExp();const p=a?.missingInterpolationHandler||this.options.missingInterpolationHandler,m=a?.interpolation?.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:x=>lm(x)},{regex:this.regexp,safeValue:x=>this.escapeValue?lm(this.escape(x)):lm(x)}].forEach(x=>{for(c=0;o=x.regex.exec(t);){const S=o[1].trim();if(l=h(S),l===void 0)if(typeof p=="function"){const E=p(t,o,a);l=Ot(E)?E:""}else if(a&&Object.prototype.hasOwnProperty.call(a,S))l="";else if(m){l=o[0];continue}else this.logger.warn(`missed to pass in variable ${S} for interpolating ${t}`),l="";else!Ot(l)&&!this.useRawValueToEscape&&(l=Lw(l));const w=x.safeValue(l);if(t=t.replace(o[0],w),m?(x.regex.lastIndex+=l.length,x.regex.lastIndex-=o[0].length):x.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),t}nest(t,e,n={}){let a,o,l;const c=(d,h)=>{const p=this.nestingOptionsSeparator;if(d.indexOf(p)<0)return d;const m=d.split(new RegExp(`${p}[ ]*{`));let y=`{${m[1]}`;d=m[0],y=this.interpolate(y,l);const x=y.match(/'/g),S=y.match(/"/g);((x?.length??0)%2===0&&!S||S.length%2!==0)&&(y=y.replace(/'/g,'"'));try{l=JSON.parse(y),h&&(l={...h,...l})}catch(w){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,w),`${d}${p}${y}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,d};for(;a=this.nestingRegexp.exec(t);){let d=[];l={...n},l=l.replace&&!Ot(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const h=/{.*}/.test(a[1])?a[1].lastIndexOf("}")+1:a[1].indexOf(this.formatSeparator);if(h!==-1&&(d=a[1].slice(h).split(this.formatSeparator).map(p=>p.trim()).filter(Boolean),a[1]=a[1].slice(0,h)),o=e(c.call(this,a[1].trim(),l),l),o&&a[0]===t&&!Ot(o))return o;Ot(o)||(o=Lw(o)),o||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${t}`),o=""),d.length&&(o=d.reduce((p,m)=>this.format(p,m,n.lng,{...n,interpolationkey:a[1].trim()}),o.trim())),t=t.replace(a[0],o),this.regexp.lastIndex=0}return t}}const IM=s=>{let t=s.toLowerCase().trim();const e={};if(s.indexOf("(")>-1){const n=s.split("(");t=n[0].toLowerCase().trim();const a=n[1].substring(0,n[1].length-1);t==="currency"&&a.indexOf(":")<0?e.currency||(e.currency=a.trim()):t==="relativetime"&&a.indexOf(":")<0?e.range||(e.range=a.trim()):a.split(";").forEach(l=>{if(l){const[c,...d]=l.split(":"),h=d.join(":").trim().replace(/^'+|'+$/g,""),p=c.trim();e[p]||(e[p]=h),h==="false"&&(e[p]=!1),h==="true"&&(e[p]=!0),isNaN(h)||(e[p]=parseInt(h,10))}})}return{formatName:t,formatOptions:e}},$w=s=>{const t={};return(e,n,a)=>{let o=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(o={...o,[a.interpolationkey]:void 0});const l=n+JSON.stringify(o);let c=t[l];return c||(c=s(ac(n),a),t[l]=c),c(e)}},zM=s=>(t,e,n)=>s(ac(e),n)(t);class UM{constructor(t={}){this.logger=$s.create("formatter"),this.options=t,this.init(t)}init(t,e={interpolation:{}}){this.formatSeparator=e.interpolation.formatSeparator||",";const n=e.cacheInBuiltFormats?$w:zM;this.formats={number:n((a,o)=>{const l=new Intl.NumberFormat(a,{...o});return c=>l.format(c)}),currency:n((a,o)=>{const l=new Intl.NumberFormat(a,{...o,style:"currency"});return c=>l.format(c)}),datetime:n((a,o)=>{const l=new Intl.DateTimeFormat(a,{...o});return c=>l.format(c)}),relativetime:n((a,o)=>{const l=new Intl.RelativeTimeFormat(a,{...o});return c=>l.format(c,o.range||"day")}),list:n((a,o)=>{const l=new Intl.ListFormat(a,{...o});return c=>l.format(c)})}}add(t,e){this.formats[t.toLowerCase().trim()]=e}addCached(t,e){this.formats[t.toLowerCase().trim()]=$w(e)}format(t,e,n,a={}){const o=e.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(c=>c.indexOf(")")>-1)){const c=o.findIndex(d=>d.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,c)].join(this.formatSeparator)}return o.reduce((c,d)=>{const{formatName:h,formatOptions:p}=IM(d);if(this.formats[h]){let m=c;try{const y=a?.formatParams?.[a.interpolationkey]||{},x=y.locale||y.lng||a.locale||a.lng||n;m=this.formats[h](c,x,{...p,...a,...y})}catch(y){this.logger.warn(y)}return m}else this.logger.warn(`there was no format function for ${h}`);return c},t)}}const VM=(s,t)=>{s.pending[t]!==void 0&&(delete s.pending[t],s.pendingCount--)};class HM extends hh{constructor(t,e,n,a={}){super(),this.backend=t,this.store=e,this.services=n,this.languageUtils=n.languageUtils,this.options=a,this.logger=$s.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,a.backend,a)}queueLoad(t,e,n,a){const o={},l={},c={},d={};return t.forEach(h=>{let p=!0;e.forEach(m=>{const y=`${h}|${m}`;!n.reload&&this.store.hasResourceBundle(h,m)?this.state[y]=2:this.state[y]<0||(this.state[y]===1?l[y]===void 0&&(l[y]=!0):(this.state[y]=1,p=!1,l[y]===void 0&&(l[y]=!0),o[y]===void 0&&(o[y]=!0),d[m]===void 0&&(d[m]=!0)))}),p||(c[h]=!0)}),(Object.keys(o).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(o),pending:Object.keys(l),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(d)}}loaded(t,e,n){const a=t.split("|"),o=a[0],l=a[1];e&&this.emit("failedLoading",o,l,e),!e&&n&&this.store.addResourceBundle(o,l,n,void 0,void 0,{skipCopy:!0}),this.state[t]=e?-1:2,e&&n&&(this.state[t]=0);const c={};this.queue.forEach(d=>{RM(d.loaded,[o],l),VM(d,t),e&&d.errors.push(e),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(h=>{c[h]||(c[h]={});const p=d.loaded[h];p.length&&p.forEach(m=>{c[h][m]===void 0&&(c[h][m]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(d=>!d.done)}read(t,e,n,a=0,o=this.retryTimeout,l){if(!t.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:e,fcName:n,tried:a,wait:o,callback:l});return}this.readingCalls++;const c=(h,p)=>{if(this.readingCalls--,this.waitingReads.length>0){const m=this.waitingReads.shift();this.read(m.lng,m.ns,m.fcName,m.tried,m.wait,m.callback)}if(h&&p&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,t,e,n,a+1,o*2,l)},o);return}l(h,p)},d=this.backend[n].bind(this.backend);if(d.length===2){try{const h=d(t,e);h&&typeof h.then=="function"?h.then(p=>c(null,p)).catch(c):c(null,h)}catch(h){c(h)}return}return d(t,e,c)}prepareLoading(t,e,n={},a){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();Ot(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Ot(e)&&(e=[e]);const o=this.queueLoad(t,e,n,a);if(!o.toLoad.length)return o.pending.length||a(),null;o.toLoad.forEach(l=>{this.loadOne(l)})}load(t,e,n){this.prepareLoading(t,e,{},n)}reload(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}loadOne(t,e=""){const n=t.split("|"),a=n[0],o=n[1];this.read(a,o,"read",void 0,void 0,(l,c)=>{l&&this.logger.warn(`${e}loading namespace ${o} for language ${a} failed`,l),!l&&c&&this.logger.log(`${e}loaded namespace ${o} for language ${a}`,c),this.loaded(t,l,c)})}saveMissing(t,e,n,a,o,l={},c=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(e)){this.logger.warn(`did not save key "${n}" as the namespace "${e}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const d={...l,isUpdate:o},h=this.backend.create.bind(this.backend);if(h.length<6)try{let p;h.length===5?p=h(t,e,n,a,d):p=h(t,e,n,a),p&&typeof p.then=="function"?p.then(m=>c(null,m)).catch(c):c(null,p)}catch(p){c(p)}else h(t,e,n,a,c,d)}!t||!t[0]||this.store.addResource(t[0],e,n,a)}}}const cm=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:s=>{let t={};if(typeof s[1]=="object"&&(t=s[1]),Ot(s[1])&&(t.defaultValue=s[1]),Ot(s[2])&&(t.tDescription=s[2]),typeof s[2]=="object"||typeof s[3]=="object"){const e=s[3]||s[2];Object.keys(e).forEach(n=>{t[n]=e[n]})}return t},interpolation:{escapeValue:!0,format:s=>s,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Gw=s=>(Ot(s.ns)&&(s.ns=[s.ns]),Ot(s.fallbackLng)&&(s.fallbackLng=[s.fallbackLng]),Ot(s.fallbackNS)&&(s.fallbackNS=[s.fallbackNS]),s.supportedLngs?.indexOf?.("cimode")<0&&(s.supportedLngs=s.supportedLngs.concat(["cimode"])),typeof s.initImmediate=="boolean"&&(s.initAsync=s.initImmediate),s),ed=()=>{},$M=s=>{Object.getOwnPropertyNames(Object.getPrototypeOf(s)).forEach(e=>{typeof s[e]=="function"&&(s[e]=s[e].bind(s))})};class Ql extends hh{constructor(t={},e){if(super(),this.options=Gw(t),this.services={},this.logger=$s,this.modules={external:[]},$M(this),e&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,e),this;setTimeout(()=>{this.init(t,e)},0)}}init(t={},e){this.isInitializing=!0,typeof t=="function"&&(e=t,t={}),t.defaultNS==null&&t.ns&&(Ot(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=cm();this.options={...n,...this.options,...Gw(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=n.overloadTranslationOptionHandler),this.options.debug===!0&&typeof console<"u"&&console.warn("i18next is maintained with support from locize.com  consider powering your project with managed localization (AI, CDN, integrations): https://locize.com");const a=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?$s.init(a(this.modules.logger),this.options):$s.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=UM;const p=new Iw(this.options);this.store=new Bw(this.options.resources,this.options);const m=this.services;m.logger=$s,m.resourceStore=this.store,m.languageUtils=p,m.pluralResolver=new FM(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(m.formatter=a(h),m.formatter.init&&m.formatter.init(m,this.options),this.options.interpolation.format=m.formatter.format.bind(m.formatter)),m.interpolator=new Hw(this.options),m.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},m.backendConnector=new HM(a(this.modules.backend),m.resourceStore,m,this.options),m.backendConnector.on("*",(x,...S)=>{this.emit(x,...S)}),this.modules.languageDetector&&(m.languageDetector=a(this.modules.languageDetector),m.languageDetector.init&&m.languageDetector.init(m,this.options.detection,this.options)),this.modules.i18nFormat&&(m.i18nFormat=a(this.modules.i18nFormat),m.i18nFormat.init&&m.i18nFormat.init(this)),this.translator=new Ud(this.services,this.options),this.translator.on("*",(x,...S)=>{this.emit(x,...S)}),this.modules.external.forEach(x=>{x.init&&x.init(this)})}if(this.format=this.options.interpolation.format,e||(e=ed),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...p)=>this.store[h](...p)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...p)=>(this.store[h](...p),this)});const c=Pl(),d=()=>{const h=(p,m)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(m),e(p,m)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),c}loadResources(t,e=ed){let n=e;const a=Ot(t)?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(a?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const o=[],l=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(h=>{h!=="cimode"&&o.indexOf(h)<0&&o.push(h)})};a?l(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>l(d)),this.options.preload?.forEach?.(c=>l(c)),this.services.backendConnector.load(o,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(c)})}else n(null)}reloadResources(t,e,n){const a=Pl();return typeof t=="function"&&(n=t,t=void 0),typeof e=="function"&&(n=e,e=void 0),t||(t=this.languages),e||(e=this.options.ns),n||(n=ed),this.services.backendConnector.reload(t,e,o=>{a.resolve(),n(o)}),a}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&zA.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let e=0;e<this.languages.length;e++){const n=this.languages[e];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,e){this.isLanguageChangingTo=t;const n=Pl();this.emit("languageChanging",t);const a=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},o=(c,d)=>{d?this.isLanguageChangingTo===t&&(a(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,n.resolve((...h)=>this.t(...h)),e&&e(c,(...h)=>this.t(...h))},l=c=>{!t&&!c&&this.services.languageDetector&&(c=[]);const d=Ot(c)?c:c&&c[0],h=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(Ot(c)?[c]:c);h&&(this.language||a(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector?.cacheUserLanguage?.(h)),this.loadResources(h,p=>{o(p,h)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(t),n}getFixedT(t,e,n){const a=(o,l,...c)=>{let d;typeof l!="object"?d=this.options.overloadTranslationOptionHandler([o,l].concat(c)):d={...l},d.lng=d.lng||a.lng,d.lngs=d.lngs||a.lngs,d.ns=d.ns||a.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||n||a.keyPrefix);const h=this.options.keySeparator||".";let p;return d.keyPrefix&&Array.isArray(o)?p=o.map(m=>(typeof m=="function"&&(m=Zm(m,{...this.options,...l})),`${d.keyPrefix}${h}${m}`)):(typeof o=="function"&&(o=Zm(o,{...this.options,...l})),p=d.keyPrefix?`${d.keyPrefix}${h}${o}`:o),this.t(p,d)};return Ot(t)?a.lng=t:a.lngs=t,a.ns=e,a.keyPrefix=n,a}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,e={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=e.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const l=(c,d)=>{const h=this.services.backendConnector.state[`${c}|${d}`];return h===-1||h===0||h===2};if(e.precheck){const c=e.precheck(this,l);if(c!==void 0)return c}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(n,t)&&(!a||l(o,t)))}loadNamespaces(t,e){const n=Pl();return this.options.ns?(Ot(t)&&(t=[t]),t.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{n.resolve(),e&&e(a)}),n):(e&&e(),Promise.resolve())}loadLanguages(t,e){const n=Pl();Ot(t)&&(t=[t]);const a=this.options.preload||[],o=t.filter(l=>a.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return o.length?(this.options.preload=a.concat(o),this.loadResources(l=>{n.resolve(),e&&e(l)}),n):(e&&e(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{const a=new Intl.Locale(t);if(a&&a.getTextInfo){const o=a.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const e=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new Iw(cm());return t.toLowerCase().indexOf("-latn")>1?"ltr":e.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},e){const n=new Ql(t,e);return n.createInstance=Ql.createInstance,n}cloneInstance(t={},e=ed){const n=t.forkResourceStore;n&&delete t.forkResourceStore;const a={...this.options,...t,isClone:!0},o=new Ql(a);if((t.debug!==void 0||t.prefix!==void 0)&&(o.logger=o.logger.clone(t)),["store","services","language"].forEach(c=>{o[c]=this[c]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},n){const c=Object.keys(this.store.data).reduce((d,h)=>(d[h]={...this.store.data[h]},d[h]=Object.keys(d[h]).reduce((p,m)=>(p[m]={...d[h][m]},p),d[h]),d),{});o.store=new Bw(c,a),o.services.resourceStore=o.store}if(t.interpolation){const d={...cm().interpolation,...this.options.interpolation,...t.interpolation},h={...a,interpolation:d};o.services.interpolator=new Hw(h)}return o.translator=new Ud(o.services,a),o.translator.on("*",(c,...d)=>{o.emit(c,...d)}),o.init(a,e),o.translator.options=a,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const vn=Ql.createInstance();vn.createInstance;vn.dir;vn.init;vn.loadResources;vn.reloadResources;vn.use;vn.changeLanguage;vn.getFixedT;vn.t;vn.exists;vn.setDefaultNamespace;vn.hasLoadedNamespace;vn.loadNamespaces;vn.loadLanguages;const GM=(s,t,e,n)=>{const a=[e,{code:t,...n||{}}];if(s?.services?.logger?.forward)return s.services.logger.forward(a,"warn","react-i18next::",!0);Ya(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),s?.services?.logger?.warn?s.services.logger.warn(...a):console?.warn&&console.warn(...a)},qw={},VA=(s,t,e,n)=>{Ya(e)&&qw[e]||(Ya(e)&&(qw[e]=new Date),GM(s,t,e,n))},HA=(s,t)=>()=>{if(s.isInitialized)t();else{const e=()=>{setTimeout(()=>{s.off("initialized",e)},0),t()};s.on("initialized",e)}},Jm=(s,t,e)=>{s.loadNamespaces(t,HA(s,e))},Xw=(s,t,e,n)=>{if(Ya(e)&&(e=[e]),s.options.preload&&s.options.preload.indexOf(t)>-1)return Jm(s,e,n);e.forEach(a=>{s.options.ns.indexOf(a)<0&&s.options.ns.push(a)}),s.loadLanguages(t,HA(s,n))},qM=(s,t,e={})=>!t.languages||!t.languages.length?(VA(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(s,{lng:e.lng,precheck:(n,a)=>{if(e.bindI18n&&e.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!a(n.isLanguageChangingTo,s))return!1}}),Ya=s=>typeof s=="string",XM=s=>typeof s=="object"&&s!==null,YM=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,WM={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},KM=s=>WM[s],QM=s=>s.replace(YM,KM);let tg={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:QM,transDefaultProps:void 0};const ZM=(s={})=>{tg={...tg,...s}},JM=()=>tg;let $A;const tD=s=>{$A=s},eD=()=>$A,nD={type:"3rdParty",init(s){ZM(s.options.react),tD(s)}},sD=A.createContext();class iD{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var um={exports:{}},dm={};var Yw;function aD(){if(Yw)return dm;Yw=1;var s=dh();function t(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var e=typeof Object.is=="function"?Object.is:t,n=s.useState,a=s.useEffect,o=s.useLayoutEffect,l=s.useDebugValue;function c(m,y){var x=y(),S=n({inst:{value:x,getSnapshot:y}}),w=S[0].inst,E=S[1];return o(function(){w.value=x,w.getSnapshot=y,d(w)&&E({inst:w})},[m,x,y]),a(function(){return d(w)&&E({inst:w}),m(function(){d(w)&&E({inst:w})})},[m]),l(x),x}function d(m){var y=m.getSnapshot;m=m.value;try{var x=y();return!e(m,x)}catch{return!0}}function h(m,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return dm.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:p,dm}var Ww;function rD(){return Ww||(Ww=1,um.exports=aD()),um.exports}var oD=rD();const lD=(s,t)=>Ya(t)?t:XM(t)&&Ya(t.defaultValue)?t.defaultValue:Array.isArray(s)?s[s.length-1]:s,cD={t:lD,ready:!1},uD=()=>()=>{},_s=(s,t={})=>{const{i18n:e}=t,{i18n:n,defaultNS:a}=A.useContext(sD)||{},o=e||n||eD();o&&!o.reportNamespaces&&(o.reportNamespaces=new iD),o||VA(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const l=A.useMemo(()=>({...JM(),...o?.options?.react,...t}),[o,t]),{useSuspense:c,keyPrefix:d}=l,h=a||o?.options?.defaultNS,p=Ya(h)?[h]:h||["translation"],m=A.useMemo(()=>p,p);o?.reportNamespaces?.addUsedNamespaces?.(m);const y=A.useRef(0),x=A.useCallback(j=>{if(!o)return uD;const{bindI18n:U,bindI18nStore:H}=l,$=()=>{y.current+=1,j()};return U&&o.on(U,$),H&&o.store.on(H,$),()=>{U&&U.split(" ").forEach(Z=>o.off(Z,$)),H&&H.split(" ").forEach(Z=>o.store.off(Z,$))}},[o,l]),S=A.useRef(),w=A.useCallback(()=>{if(!o)return cD;const j=!!(o.isInitialized||o.initializedStoreOnce)&&m.every(ct=>qM(ct,o,l)),U=t.lng||o.language,H=y.current,$=S.current;if($&&$.ready===j&&$.lng===U&&$.keyPrefix===d&&$.revision===H)return $;const et={t:o.getFixedT(U,l.nsMode==="fallback"?m:m[0],d),ready:j,lng:U,keyPrefix:d,revision:H};return S.current=et,et},[o,m,d,l,t.lng]),[E,C]=A.useState(0),{t:T,ready:R}=oD.useSyncExternalStore(x,w,w);A.useEffect(()=>{if(o&&!R&&!c){const j=()=>C(U=>U+1);t.lng?Xw(o,t.lng,m,j):Jm(o,m,j)}},[o,t.lng,m,R,c,E]);const N=o||{},M=A.useRef(null),O=A.useRef(),k=j=>{const U=Object.getOwnPropertyDescriptors(j);U.__original&&delete U.__original;const H=Object.create(Object.getPrototypeOf(j),U);if(!Object.prototype.hasOwnProperty.call(H,"__original"))try{Object.defineProperty(H,"__original",{value:j,writable:!1,enumerable:!1,configurable:!1})}catch{}return H},L=A.useMemo(()=>{const j=N,U=j?.language;let H=j;j&&(M.current&&M.current.__original===j?O.current!==U?(H=k(j),M.current=H,O.current=U):H=M.current:(H=k(j),M.current=H,O.current=U));const $=[T,H,R];return $.t=T,$.i18n=H,$.ready=R,$},[T,N,R,N.resolvedLanguage,N.language,N.languages]);if(o&&c&&!R)throw new Promise(j=>{const U=()=>j();t.lng?Xw(o,t.lng,m,U):Jm(o,m,U)});return L},dD={loading:"...",error:"",save:"",cancel:"",delete:"",edit:"",search:"",settings:"",help:"",logout:"",of:""},hD="",fD=" ...",pD="",mD="...",gD=" ,     ?",yD="   ",vD={name:"EDO",subtitle:""},bD={dashboard:" ",documents:""},xD={title:"Dashboard",subtitle:"   ",stats:{total:" ",pending:" ",signed:"",archived:" "},pendingSignatures:" ",recentDocuments:" ",noPending:"   ",noDocuments:" ",waiting:""},wD={title:"",subtitle:" ",loadError:"   ",noDocumentSelected:"   ",loading:" ...",fields:{title:"",documentType:" ",status:"",documentDate:" ",registrationDate:" ",description:"",author:""},status:{inProgress:" ",pending:" ",signed:"",archived:""}},SD={userMenu:{profile:""}},AD={searchPlaceholder:" ...",noDocuments:" ",addDocument:" "},ED={loading:" ...",noDocumentSelected:" ",selectDocumentMessage:"      ",tabs:{document:"",signatures:"",history:""},viewMode:" ",signatureRequired:" ",signatureWaiting:"     ",noContent:"   ",supplier:":",buyer:":",signature:" / ",notSpecified:" "},CD={documentInfo:"  ",documentNumber:" ",documentType:" ",creationDate:" ",from:" ",organization:"",status:"",signingProgress:" ",signaturesRequired:" ",signedAt:"",waitingSignature:" ",actions:"",sign:"",download:" ",print:"",history:" "},TD={common:dD,comments:hD,addComment:fD,send:pD,sending:mD,deleteCommentConfirm:gD,deleteCommentError:yD,app:vD,navigation:bD,dashboard:xD,documents:wD,header:SD,documentSidebar:AD,documentContent:ED,documentMetadata:CD},_D={loading:"Loading...",error:"Error",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",search:"Search",settings:"Settings",help:"Help",logout:"Logout",of:"of"},RD={name:"EDO",subtitle:"Document Management"},ND={dashboard:"Dashboard",documents:"Documents"},MD={title:"Dashboard",subtitle:"Electronic document management system overview",stats:{total:"Total Documents",pending:"Pending Signature",signed:"Signed",archived:"Archived"},pendingSignatures:"Require Signature",recentDocuments:"Recent Documents",noPending:"No documents pending signature",noDocuments:"No documents",waiting:"Waiting"},DD={title:"Documents",subtitle:"Document Management",loadError:"Failed to load documents",noDocumentSelected:"Select a document to view",loading:"Loading document...",fields:{title:"Title",documentType:"Document Type",status:"Status",documentDate:"Document Date",registrationDate:"Registration Date",description:"Description",author:"Author"},status:{inProgress:"In Progress",pending:"Pending",signed:"Signed",archived:"Archived"}},kD="Comments",LD="Add a comment...",OD="Send",PD="Sending...",jD="Are you sure you want to delete this comment?",BD="Failed to delete comment",FD={userMenu:{profile:"Profile"}},ID={searchPlaceholder:"Search documents...",noDocuments:"No documents",addDocument:"Add Document"},zD={loading:"Loading document...",noDocumentSelected:"Select a document",selectDocumentMessage:"Select a document from the list on the left to view",tabs:{document:"Document",signatures:"Signatures",history:"History"},viewMode:"View mode",signatureRequired:"Signature required",signatureWaiting:"Document is waiting for signatures from authorized persons",noContent:"Document content not specified",supplier:"SUPPLIER:",buyer:"BUYER:",signature:"Signature / EDS",notSpecified:"Not specified"},UD={documentInfo:"Document Information",documentNumber:"Document Number",documentType:"Document Type",creationDate:"Creation Date",from:"From",organization:"Organization",status:"Status",signingProgress:"Signing Progress",signaturesRequired:"Signatures Required",signedAt:"Signed at",waitingSignature:"Waiting for signature",actions:"Actions",sign:"Sign",download:"Download document",print:"Print",history:"Change history"},VD={common:_D,app:RD,navigation:ND,dashboard:MD,documents:DD,comments:kD,addComment:LD,send:OD,sending:PD,deleteCommentConfirm:jD,deleteCommentError:BD,header:FD,documentSidebar:ID,documentContent:zD,documentMetadata:UD},HD={loading:"Yuklanmoqda...",error:"Xatolik",save:"Saqlash",cancel:"Bekor qilish",delete:"O'chirish",edit:"Tahrirlash",search:"Qidirish",settings:"Sozlamalar",help:"Yordam",logout:"Chiqish",of:"dan"},$D={name:"EDO",subtitle:"Hujjatlar boshqaruvi"},GD={dashboard:"Boshqaruv paneli",documents:"Hujjatlar"},qD={title:"Boshqaruv paneli",subtitle:"Elektron hujjatlar boshqaruvi tizimi ko'rinishi",stats:{total:"Jami hujjatlar",pending:"Imzolanishi kerak",signed:"Imzolangan",archived:"Arxivda"},pendingSignatures:"Imzo talab qilinadi",recentDocuments:"So'nggi hujjatlar",noPending:"Imzolanishi kerak bo'lgan hujjatlar yo'q",noDocuments:"Hujjatlar yo'q",waiting:"Kutilmoqda"},XD={title:"Hujjatlar",subtitle:"Hujjatlar boshqaruvi",loadError:"Hujjatlarni yuklab bo'lmadi",noDocumentSelected:"Ko'rish uchun hujjatni tanlang",loading:"Hujjat yuklanmoqda...",fields:{title:"Nomi",documentType:"Hujjat turi",status:"Holati",documentDate:"Hujjat sanasi",registrationDate:"Ro'yxatga olish sanasi",description:"Tavsif",author:"Muallif"},status:{inProgress:"Jarayonda",pending:"Imzolanishi kerak",signed:"Imzolangan",archived:"Arxivda"}},YD="Izohlar",WD="Izoh qo'shish...",KD="Yuborish",QD="Yuborilmoqda...",ZD="Bu izohni o'chirishni xohlaysizmi?",JD="Izohni o'chirib bo'lmadi",tk={userMenu:{profile:"Profil"}},ek={searchPlaceholder:"Hujjatlarni qidirish...",noDocuments:"Hujjatlar yo'q",addDocument:"Hujjat qo'shish"},nk={loading:"Hujjat yuklanmoqda...",noDocumentSelected:"Hujjatni tanlang",selectDocumentMessage:"Ko'rish uchun chapdagi ro'yxatdan hujjatni tanlang",tabs:{document:"Hujjat",signatures:"Imzolar",history:"Tarix"},viewMode:"Ko'rish rejimi",signatureRequired:"Imzo talab qilinadi",signatureWaiting:"Hujjat vakolatli shaxslardan imzo kutmoqda",noContent:"Hujjat mazmuni ko'rsatilmagan",supplier:"TA'MINOTCHI:",buyer:"XARIDOR:",signature:"Imzo / EDS",notSpecified:"Ko'rsatilmagan"},sk={documentInfo:"Hujjat ma'lumotlari",documentNumber:"Hujjat raqami",documentType:"Hujjat turi",creationDate:"Yaratilgan sana",from:"Kimdan",organization:"Tashkilot",status:"Holati",signingProgress:"Imzolash jarayoni",signaturesRequired:"Imzolar talab qilinadi",signedAt:"Imzolangan",waitingSignature:"Imzo kutmoqda",actions:"Harakatlar",sign:"Imzolash",download:"Hujjatni yuklab olish",print:"Chop etish",history:"O'zgarishlar tarixi"},ik={common:HD,app:$D,navigation:GD,dashboard:qD,documents:XD,comments:YD,addComment:WD,send:KD,sending:QD,deleteCommentConfirm:ZD,deleteCommentError:JD,header:tk,documentSidebar:ek,documentContent:nk,documentMetadata:sk};vn.use(nD).init({resources:{ru:{translation:TD},en:{translation:VD},uz:{translation:ik}},lng:localStorage.getItem("i18nextLng")||"ru",fallbackLng:"ru",interpolation:{escapeValue:!1}});var Kw="popstate";function ak(s={}){function t(a,o){let{pathname:l="/",search:c="",hash:d=""}=sr(a.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),eg("",{pathname:l,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function e(a,o){let l=a.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let d=a.location.href,h=d.indexOf("#");c=h===-1?d:d.slice(0,h)}return c+"#"+(typeof o=="string"?o:rc(o))}function n(a,o){ps(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return ok(t,e,n,s)}function Ce(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function ps(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function rk(){return Math.random().toString(36).substring(2,10)}function Qw(s,t){return{usr:s.state,key:s.key,idx:t}}function eg(s,t,e=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof t=="string"?sr(t):t,state:e,key:t&&t.key||n||rk()}}function rc({pathname:s="/",search:t="",hash:e=""}){return t&&t!=="?"&&(s+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(s+=e.charAt(0)==="#"?e:"#"+e),s}function sr(s){let t={};if(s){let e=s.indexOf("#");e>=0&&(t.hash=s.substring(e),s=s.substring(0,e));let n=s.indexOf("?");n>=0&&(t.search=s.substring(n),s=s.substring(0,n)),s&&(t.pathname=s)}return t}function ok(s,t,e,n={}){let{window:a=document.defaultView,v5Compat:o=!1}=n,l=a.history,c="POP",d=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function m(){c="POP";let E=p(),C=E==null?null:E-h;h=E,d&&d({action:c,location:w.location,delta:C})}function y(E,C){c="PUSH";let T=eg(w.location,E,C);e&&e(T,E),h=p()+1;let R=Qw(T,h),N=w.createHref(T);try{l.pushState(R,"",N)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;a.location.assign(N)}o&&d&&d({action:c,location:w.location,delta:1})}function x(E,C){c="REPLACE";let T=eg(w.location,E,C);e&&e(T,E),h=p();let R=Qw(T,h),N=w.createHref(T);l.replaceState(R,"",N),o&&d&&d({action:c,location:w.location,delta:0})}function S(E){return lk(E)}let w={get action(){return c},get location(){return s(a,l)},listen(E){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Kw,m),d=E,()=>{a.removeEventListener(Kw,m),d=null}},createHref(E){return t(a,E)},createURL:S,encodeLocation(E){let C=S(E);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:y,replace:x,go(E){return l.go(E)}};return w}function lk(s,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Ce(e,"No window.location.(origin|href) available to create URL");let n=typeof s=="string"?s:rc(s);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function GA(s,t,e="/"){return ck(s,t,e,!1)}function ck(s,t,e,n){let a=typeof t=="string"?sr(t):t,o=xi(a.pathname||"/",e);if(o==null)return null;let l=qA(s);uk(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let h=wk(o);c=bk(l[d],h,n)}return c}function qA(s,t=[],e=[],n="",a=!1){let o=(l,c,d=a,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&d)return;Ce(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let m=vi([n,p.relativePath]),y=e.concat(p);l.children&&l.children.length>0&&(Ce(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),qA(l.children,t,y,m,d)),!(l.path==null&&!l.index)&&t.push({path:m,score:yk(m,l.index),routesMeta:y})};return s.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))o(l,c);else for(let d of XA(l.path))o(l,c,!0,d)}),t}function XA(s){let t=s.split("/");if(t.length===0)return[];let[e,...n]=t,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let l=XA(n.join("/")),c=[];return c.push(...l.map(d=>d===""?o:[o,d].join("/"))),a&&c.push(...l),c.map(d=>s.startsWith("/")&&d===""?"/":d)}function uk(s){s.sort((t,e)=>t.score!==e.score?e.score-t.score:vk(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var dk=/^:[\w-]+$/,hk=3,fk=2,pk=1,mk=10,gk=-2,Zw=s=>s==="*";function yk(s,t){let e=s.split("/"),n=e.length;return e.some(Zw)&&(n+=gk),t&&(n+=fk),e.filter(a=>!Zw(a)).reduce((a,o)=>a+(dk.test(o)?hk:o===""?pk:mk),n)}function vk(s,t){return s.length===t.length&&s.slice(0,-1).every((n,a)=>n===t[a])?s[s.length-1]-t[t.length-1]:0}function bk(s,t,e=!1){let{routesMeta:n}=s,a={},o="/",l=[];for(let c=0;c<n.length;++c){let d=n[c],h=c===n.length-1,p=o==="/"?t:t.slice(o.length)||"/",m=Vd({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},p),y=d.route;if(!m&&h&&e&&!n[n.length-1].route.index&&(m=Vd({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!m)return null;Object.assign(a,m.params),l.push({params:a,pathname:vi([o,m.pathname]),pathnameBase:Ck(vi([o,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(o=vi([o,m.pathnameBase]))}return l}function Vd(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[e,n]=xk(s.path,s.caseSensitive,s.end),a=t.match(e);if(!a)return null;let o=a[0],l=o.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:n.reduce((h,{paramName:p,isOptional:m},y)=>{if(p==="*"){let S=c[y]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const x=c[y];return m&&!x?h[p]=void 0:h[p]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:l,pattern:s}}function xk(s,t=!1,e=!0){ps(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],a="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(n.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(n.push({paramName:"*"}),a+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":s!==""&&s!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function wk(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ps(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),s}}function xi(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=s.charAt(e);return n&&n!=="/"?null:s.slice(e)||"/"}var YA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sk=s=>YA.test(s);function Ak(s,t="/"){let{pathname:e,search:n="",hash:a=""}=typeof s=="string"?sr(s):s,o;if(e)if(Sk(e))o=e;else{if(e.includes("//")){let l=e;e=e.replace(/\/\/+/g,"/"),ps(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${e}`)}e.startsWith("/")?o=Jw(e.substring(1),"/"):o=Jw(e,t)}else o=t;return{pathname:o,search:Tk(n),hash:_k(a)}}function Jw(s,t){let e=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function hm(s,t,e,n){return`Cannot include a '${s}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ek(s){return s.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function WA(s){let t=Ek(s);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function KA(s,t,e,n=!1){let a;typeof s=="string"?a=sr(s):(a={...s},Ce(!a.pathname||!a.pathname.includes("?"),hm("?","pathname","search",a)),Ce(!a.pathname||!a.pathname.includes("#"),hm("#","pathname","hash",a)),Ce(!a.search||!a.search.includes("#"),hm("#","search","hash",a)));let o=s===""||a.pathname==="",l=o?"/":a.pathname,c;if(l==null)c=e;else{let m=t.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),m-=1;a.pathname=y.join("/")}c=m>=0?t[m]:"/"}let d=Ak(a,c),h=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(h||p)&&(d.pathname+="/"),d}var vi=s=>s.join("/").replace(/\/\/+/g,"/"),Ck=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Tk=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,_k=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,Rk=class{constructor(s,t,e,n=!1){this.status=s,this.statusText=t||"",this.internal=n,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function Nk(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function Mk(s){return s.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var QA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ZA(s,t){let e=s;if(typeof e!="string"||!YA.test(e))return{absoluteURL:void 0,isExternal:!1,to:e};let n=e,a=!1;if(QA)try{let o=new URL(window.location.href),l=e.startsWith("//")?new URL(o.protocol+e):new URL(e),c=xi(l.pathname,t);l.origin===o.origin&&c!=null?e=c+l.search+l.hash:a=!0}catch{ps(!1,`<Link to="${e}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:a,to:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var JA=["POST","PUT","PATCH","DELETE"];new Set(JA);var Dk=["GET",...JA];new Set(Dk);var No=A.createContext(null);No.displayName="DataRouter";var fh=A.createContext(null);fh.displayName="DataRouterState";var kk=A.createContext(!1),tE=A.createContext({isTransitioning:!1});tE.displayName="ViewTransition";var Lk=A.createContext(new Map);Lk.displayName="Fetchers";var Ok=A.createContext(null);Ok.displayName="Await";var ms=A.createContext(null);ms.displayName="Navigation";var wc=A.createContext(null);wc.displayName="Location";var Ti=A.createContext({outlet:null,matches:[],isDataRoute:!1});Ti.displayName="Route";var ey=A.createContext(null);ey.displayName="RouteError";var eE="REACT_ROUTER_ERROR",Pk="REDIRECT",jk="ROUTE_ERROR_RESPONSE";function Bk(s){if(s.startsWith(`${eE}:${Pk}:{`))try{let t=JSON.parse(s.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function Fk(s){if(s.startsWith(`${eE}:${jk}:{`))try{let t=JSON.parse(s.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new Rk(t.status,t.statusText,t.data)}catch{}}function Ik(s,{relative:t}={}){Ce(Sc(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=A.useContext(ms),{hash:a,pathname:o,search:l}=Ac(s,{relative:t}),c=o;return e!=="/"&&(c=o==="/"?e:vi([e,o])),n.createHref({pathname:c,search:l,hash:a})}function Sc(){return A.useContext(wc)!=null}function ua(){return Ce(Sc(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(wc).location}var nE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sE(s){A.useContext(ms).static||A.useLayoutEffect(s)}function iE(){let{isDataRoute:s}=A.useContext(Ti);return s?Zk():zk()}function zk(){Ce(Sc(),"useNavigate() may be used only in the context of a <Router> component.");let s=A.useContext(No),{basename:t,navigator:e}=A.useContext(ms),{matches:n}=A.useContext(Ti),{pathname:a}=ua(),o=JSON.stringify(WA(n)),l=A.useRef(!1);return sE(()=>{l.current=!0}),A.useCallback((d,h={})=>{if(ps(l.current,nE),!l.current)return;if(typeof d=="number"){e.go(d);return}let p=KA(d,JSON.parse(o),a,h.relative==="path");s==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:vi([t,p.pathname])),(h.replace?e.replace:e.push)(p,h.state,h)},[t,e,o,a,s])}A.createContext(null);function Ac(s,{relative:t}={}){let{matches:e}=A.useContext(Ti),{pathname:n}=ua(),a=JSON.stringify(WA(e));return A.useMemo(()=>KA(s,JSON.parse(a),n,t==="path"),[s,a,n,t])}function Uk(s,t){return aE(s,t)}function aE(s,t,e,n,a){Ce(Sc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=A.useContext(ms),{matches:l}=A.useContext(Ti),c=l[l.length-1],d=c?c.params:{},h=c?c.pathname:"/",p=c?c.pathnameBase:"/",m=c&&c.route;{let T=m&&m.path||"";oE(h,!m||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let y=ua(),x;if(t){let T=typeof t=="string"?sr(t):t;Ce(p==="/"||T.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${T.pathname}" was given in the \`location\` prop.`),x=T}else x=y;let S=x.pathname||"/",w=S;if(p!=="/"){let T=p.replace(/^\//,"").split("/");w="/"+S.replace(/^\//,"").split("/").slice(T.length).join("/")}let E=GA(s,{pathname:w});ps(m||E!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),ps(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=qk(E&&E.map(T=>Object.assign({},T,{params:Object.assign({},d,T.params),pathname:vi([p,o.encodeLocation?o.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?p:vi([p,o.encodeLocation?o.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),l,e,n,a);return t&&C?A.createElement(wc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},C):C}function Vk(){let s=Qk(),t=Nk(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),e=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",s),l=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:o},"ErrorBoundary")," or"," ",A.createElement("code",{style:o},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),e?A.createElement("pre",{style:a},e):null,l)}var Hk=A.createElement(Vk,null),rE=class extends A.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,t){return t.location!==s.location||t.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:t.error,location:t.location,revalidation:s.revalidation||t.revalidation}}componentDidCatch(s,t){this.props.onError?this.props.onError(s,t):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const e=Fk(s.digest);e&&(s=e)}let t=s!==void 0?A.createElement(Ti.Provider,{value:this.props.routeContext},A.createElement(ey.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?A.createElement($k,{error:s},t):t}};rE.contextType=kk;var fm=new WeakMap;function $k({children:s,error:t}){let{basename:e}=A.useContext(ms);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=Bk(t.digest);if(n){let a=fm.get(t);if(a)throw a;let o=ZA(n.location,e);if(QA&&!fm.get(t))if(o.isExternal||n.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:n.replace}));throw fm.set(t,l),l}return A.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return s}function Gk({routeContext:s,match:t,children:e}){let n=A.useContext(No);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(Ti.Provider,{value:s},e)}function qk(s,t=[],e=null,n=null,a=null){if(s==null){if(!e)return null;if(e.errors)s=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)s=e.matches;else return null}let o=s,l=e?.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);Ce(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,d=-1;if(e)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=p),m.route.id){let{loaderData:y,errors:x}=e,S=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!x||x[m.route.id]===void 0);if(m.route.lazy||S){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let h=e&&n?(p,m)=>{n(p,{location:e.location,params:e.matches?.[0]?.params??{},unstable_pattern:Mk(e.matches),errorInfo:m})}:void 0;return o.reduceRight((p,m,y)=>{let x,S=!1,w=null,E=null;e&&(x=l&&m.route.id?l[m.route.id]:void 0,w=m.route.errorElement||Hk,c&&(d<0&&y===0?(oE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,E=null):d===y&&(S=!0,E=m.route.hydrateFallbackElement||null)));let C=t.concat(o.slice(0,y+1)),T=()=>{let R;return x?R=w:S?R=E:m.route.Component?R=A.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=p,A.createElement(Gk,{match:m,routeContext:{outlet:p,matches:C,isDataRoute:e!=null},children:R})};return e&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?A.createElement(rE,{location:e.location,revalidation:e.revalidation,component:w,error:x,children:T(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:h}):T()},null)}function ny(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xk(s){let t=A.useContext(No);return Ce(t,ny(s)),t}function Yk(s){let t=A.useContext(fh);return Ce(t,ny(s)),t}function Wk(s){let t=A.useContext(Ti);return Ce(t,ny(s)),t}function sy(s){let t=Wk(s),e=t.matches[t.matches.length-1];return Ce(e.route.id,`${s} can only be used on routes that contain a unique "id"`),e.route.id}function Kk(){return sy("useRouteId")}function Qk(){let s=A.useContext(ey),t=Yk("useRouteError"),e=sy("useRouteError");return s!==void 0?s:t.errors?.[e]}function Zk(){let{router:s}=Xk("useNavigate"),t=sy("useNavigate"),e=A.useRef(!1);return sE(()=>{e.current=!0}),A.useCallback(async(a,o={})=>{ps(e.current,nE),e.current&&(typeof a=="number"?await s.navigate(a):await s.navigate(a,{fromRouteId:t,...o}))},[s,t])}var tS={};function oE(s,t,e){!t&&!tS[s]&&(tS[s]=!0,ps(!1,e))}A.memo(Jk);function Jk({routes:s,future:t,state:e,onError:n}){return aE(s,void 0,e,n,t)}function ng(s){Ce(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tL({basename:s="/",children:t=null,location:e,navigationType:n="POP",navigator:a,static:o=!1,unstable_useTransitions:l}){Ce(!Sc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=s.replace(/^\/*/,"/"),d=A.useMemo(()=>({basename:c,navigator:a,static:o,unstable_useTransitions:l,future:{}}),[c,a,o,l]);typeof e=="string"&&(e=sr(e));let{pathname:h="/",search:p="",hash:m="",state:y=null,key:x="default"}=e,S=A.useMemo(()=>{let w=xi(h,c);return w==null?null:{location:{pathname:w,search:p,hash:m,state:y,key:x},navigationType:n}},[c,h,p,m,y,x,n]);return ps(S!=null,`<Router basename="${c}"> is not able to match the URL "${h}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:A.createElement(ms.Provider,{value:d},A.createElement(wc.Provider,{children:t,value:S}))}function eL({children:s,location:t}){return Uk(sg(s),t)}function sg(s,t=[]){let e=[];return A.Children.forEach(s,(n,a)=>{if(!A.isValidElement(n))return;let o=[...t,a];if(n.type===A.Fragment){e.push.apply(e,sg(n.props.children,o));return}Ce(n.type===ng,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ce(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=sg(n.props.children,o)),e.push(l)}),e}var Cd="get",Td="application/x-www-form-urlencoded";function ph(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function nL(s){return ph(s)&&s.tagName.toLowerCase()==="button"}function sL(s){return ph(s)&&s.tagName.toLowerCase()==="form"}function iL(s){return ph(s)&&s.tagName.toLowerCase()==="input"}function aL(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function rL(s,t){return s.button===0&&(!t||t==="_self")&&!aL(s)}var nd=null;function oL(){if(nd===null)try{new FormData(document.createElement("form"),0),nd=!1}catch{nd=!0}return nd}var lL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pm(s){return s!=null&&!lL.has(s)?(ps(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Td}"`),null):s}function cL(s,t){let e,n,a,o,l;if(sL(s)){let c=s.getAttribute("action");n=c?xi(c,t):null,e=s.getAttribute("method")||Cd,a=pm(s.getAttribute("enctype"))||Td,o=new FormData(s)}else if(nL(s)||iL(s)&&(s.type==="submit"||s.type==="image")){let c=s.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=s.getAttribute("formaction")||c.getAttribute("action");if(n=d?xi(d,t):null,e=s.getAttribute("formmethod")||c.getAttribute("method")||Cd,a=pm(s.getAttribute("formenctype"))||pm(c.getAttribute("enctype"))||Td,o=new FormData(c,s),!oL()){let{name:h,type:p,value:m}=s;if(p==="image"){let y=h?`${h}.`:"";o.append(`${y}x`,"0"),o.append(`${y}y`,"0")}else h&&o.append(h,m)}}else{if(ph(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Cd,n=null,a=Td,l=s}return o&&a==="text/plain"&&(l=o,o=void 0),{action:n,method:e.toLowerCase(),encType:a,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function iy(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function uL(s,t,e,n){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return e?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${n}`:a.pathname=`${a.pathname}.${n}`:a.pathname==="/"?a.pathname=`_root.${n}`:t&&xi(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function dL(s,t){if(s.id in t)return t[s.id];try{let e=await import(s.module);return t[s.id]=e,e}catch(e){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hL(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function fL(s,t,e){let n=await Promise.all(s.map(async a=>{let o=t.routes[a.route.id];if(o){let l=await dL(o,e);return l.links?l.links():[]}return[]}));return yL(n.flat(1).filter(hL).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function eS(s,t,e,n,a,o){let l=(d,h)=>e[h]?d.route.id!==e[h].route.id:!0,c=(d,h)=>e[h].pathname!==d.pathname||e[h].route.path?.endsWith("*")&&e[h].params["*"]!==d.params["*"];return o==="assets"?t.filter((d,h)=>l(d,h)||c(d,h)):o==="data"?t.filter((d,h)=>{let p=n.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,h)||c(d,h))return!0;if(d.route.shouldRevalidate){let m=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function pL(s,t,{includeHydrateFallback:e}={}){return mL(s.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function mL(s){return[...new Set(s)]}function gL(s){let t={},e=Object.keys(s).sort();for(let n of e)t[n]=s[n];return t}function yL(s,t){let e=new Set;return new Set(t),s.reduce((n,a)=>{let o=JSON.stringify(gL(a));return e.has(o)||(e.add(o),n.push({key:o,link:a})),n},[])}function lE(){let s=A.useContext(No);return iy(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function vL(){let s=A.useContext(fh);return iy(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var ay=A.createContext(void 0);ay.displayName="FrameworkContext";function cE(){let s=A.useContext(ay);return iy(s,"You must render this element inside a <HydratedRouter> element"),s}function bL(s,t){let e=A.useContext(ay),[n,a]=A.useState(!1),[o,l]=A.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=t,y=A.useRef(null);A.useEffect(()=>{if(s==="render"&&l(!0),s==="viewport"){let w=C=>{C.forEach(T=>{l(T.isIntersecting)})},E=new IntersectionObserver(w,{threshold:.5});return y.current&&E.observe(y.current),()=>{E.disconnect()}}},[s]),A.useEffect(()=>{if(n){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[n]);let x=()=>{a(!0)},S=()=>{a(!1),l(!1)};return e?s!=="intent"?[o,y,{}]:[o,y,{onFocus:jl(c,x),onBlur:jl(d,S),onMouseEnter:jl(h,x),onMouseLeave:jl(p,S),onTouchStart:jl(m,x)}]:[!1,y,{}]}function jl(s,t){return e=>{s&&s(e),e.defaultPrevented||t(e)}}function xL({page:s,...t}){let{router:e}=lE(),n=A.useMemo(()=>GA(e.routes,s,e.basename),[e.routes,s,e.basename]);return n?A.createElement(SL,{page:s,matches:n,...t}):null}function wL(s){let{manifest:t,routeModules:e}=cE(),[n,a]=A.useState([]);return A.useEffect(()=>{let o=!1;return fL(s,t,e).then(l=>{o||a(l)}),()=>{o=!0}},[s,t,e]),n}function SL({page:s,matches:t,...e}){let n=ua(),{future:a,manifest:o,routeModules:l}=cE(),{basename:c}=lE(),{loaderData:d,matches:h}=vL(),p=A.useMemo(()=>eS(s,t,h,o,n,"data"),[s,t,h,o,n]),m=A.useMemo(()=>eS(s,t,h,o,n,"assets"),[s,t,h,o,n]),y=A.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let w=new Set,E=!1;if(t.forEach(T=>{let R=o.routes[T.route.id];!R||!R.hasLoader||(!p.some(N=>N.route.id===T.route.id)&&T.route.id in d&&l[T.route.id]?.shouldRevalidate||R.hasClientLoader?E=!0:w.add(T.route.id))}),w.size===0)return[];let C=uL(s,c,a.unstable_trailingSlashAwareDataRequests,"data");return E&&w.size>0&&C.searchParams.set("_routes",t.filter(T=>w.has(T.route.id)).map(T=>T.route.id).join(",")),[C.pathname+C.search]},[c,a.unstable_trailingSlashAwareDataRequests,d,n,o,p,t,s,l]),x=A.useMemo(()=>pL(m,o),[m,o]),S=wL(m);return A.createElement(A.Fragment,null,y.map(w=>A.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...e})),x.map(w=>A.createElement("link",{key:w,rel:"modulepreload",href:w,...e})),S.map(({key:w,link:E})=>A.createElement("link",{key:w,nonce:e.nonce,...E})))}function AL(...s){return t=>{s.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var EL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{EL&&(window.__reactRouterVersion="7.12.0")}catch{}function CL({basename:s,children:t,unstable_useTransitions:e,window:n}){let a=A.useRef();a.current==null&&(a.current=ak({window:n,v5Compat:!0}));let o=a.current,[l,c]=A.useState({action:o.action,location:o.location}),d=A.useCallback(h=>{e===!1?c(h):A.startTransition(()=>c(h))},[e]);return A.useLayoutEffect(()=>o.listen(d),[o,d]),A.createElement(tL,{basename:s,children:t,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:e})}var uE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dE=A.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:a,reloadDocument:o,replace:l,state:c,target:d,to:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y,...x},S){let{basename:w,unstable_useTransitions:E}=A.useContext(ms),C=typeof h=="string"&&uE.test(h),T=ZA(h,w);h=T.to;let R=Ik(h,{relative:a}),[N,M,O]=bL(n,x),k=NL(h,{replace:l,state:c,target:d,preventScrollReset:p,relative:a,viewTransition:m,unstable_defaultShouldRevalidate:y,unstable_useTransitions:E});function L(U){t&&t(U),U.defaultPrevented||k(U)}let j=A.createElement("a",{...x,...O,href:T.absoluteURL||R,onClick:T.isExternal||o?t:L,ref:AL(S,M),target:d,"data-discover":!C&&e==="render"?"true":void 0});return N&&!C?A.createElement(A.Fragment,null,j,A.createElement(xL,{page:R})):j});dE.displayName="Link";var TL=A.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:a=!1,style:o,to:l,viewTransition:c,children:d,...h},p){let m=Ac(l,{relative:h.relative}),y=ua(),x=A.useContext(fh),{navigator:S,basename:w}=A.useContext(ms),E=x!=null&&OL(m)&&c===!0,C=S.encodeLocation?S.encodeLocation(m).pathname:m.pathname,T=y.pathname,R=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;e||(T=T.toLowerCase(),R=R?R.toLowerCase():null,C=C.toLowerCase()),R&&w&&(R=xi(R,w)||R);const N=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let M=T===C||!a&&T.startsWith(C)&&T.charAt(N)==="/",O=R!=null&&(R===C||!a&&R.startsWith(C)&&R.charAt(C.length)==="/"),k={isActive:M,isPending:O,isTransitioning:E},L=M?t:void 0,j;typeof n=="function"?j=n(k):j=[n,M?"active":null,O?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let U=typeof o=="function"?o(k):o;return A.createElement(dE,{...h,"aria-current":L,className:j,ref:p,style:U,to:l,viewTransition:c},typeof d=="function"?d(k):d)});TL.displayName="NavLink";var _L=A.forwardRef(({discover:s="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:a,state:o,method:l=Cd,action:c,onSubmit:d,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y,...x},S)=>{let{unstable_useTransitions:w}=A.useContext(ms),E=kL(),C=LL(c,{relative:h}),T=l.toLowerCase()==="get"?"get":"post",R=typeof c=="string"&&uE.test(c),N=M=>{if(d&&d(M),M.defaultPrevented)return;M.preventDefault();let O=M.nativeEvent.submitter,k=O?.getAttribute("formmethod")||l,L=()=>E(O||M.currentTarget,{fetcherKey:t,method:k,navigate:e,replace:a,state:o,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:y});w&&e!==!1?A.startTransition(()=>L()):L()};return A.createElement("form",{ref:S,method:T,action:C,onSubmit:n?d:N,...x,"data-discover":!R&&s==="render"?"true":void 0})});_L.displayName="Form";function RL(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hE(s){let t=A.useContext(No);return Ce(t,RL(s)),t}function NL(s,{target:t,replace:e,state:n,preventScrollReset:a,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:c,unstable_useTransitions:d}={}){let h=iE(),p=ua(),m=Ac(s,{relative:o});return A.useCallback(y=>{if(rL(y,t)){y.preventDefault();let x=e!==void 0?e:rc(p)===rc(m),S=()=>h(s,{replace:x,state:n,preventScrollReset:a,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:c});d?A.startTransition(()=>S()):S()}},[p,h,m,e,n,t,s,a,o,l,c,d])}var ML=0,DL=()=>`__${String(++ML)}__`;function kL(){let{router:s}=hE("useSubmit"),{basename:t}=A.useContext(ms),e=Kk(),n=s.fetch,a=s.navigate;return A.useCallback(async(o,l={})=>{let{action:c,method:d,encType:h,formData:p,body:m}=cL(o,t);if(l.navigate===!1){let y=l.fetcherKey||DL();await n(y,e,l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:m,formMethod:l.method||d,formEncType:l.encType||h,flushSync:l.flushSync})}else await a(l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:m,formMethod:l.method||d,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:e,flushSync:l.flushSync,viewTransition:l.viewTransition})},[n,a,t,e])}function LL(s,{relative:t}={}){let{basename:e}=A.useContext(ms),n=A.useContext(Ti);Ce(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),o={...Ac(s||".",{relative:t})},l=ua();if(s==null){o.search=l.search;let c=new URLSearchParams(o.search),d=c.getAll("index");if(d.some(p=>p==="")){c.delete("index"),d.filter(m=>m).forEach(m=>c.append("index",m));let p=c.toString();o.search=p?`?${p}`:""}}return(!s||s===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:vi([e,o.pathname])),rc(o)}function OL(s,{relative:t}={}){let e=A.useContext(tE);Ce(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=hE("useViewTransitionState"),a=Ac(s,{relative:t});if(!e.isTransitioning)return!1;let o=xi(e.currentLocation.pathname,n)||e.currentLocation.pathname,l=xi(e.nextLocation.pathname,n)||e.nextLocation.pathname;return Vd(a.pathname,l)!=null||Vd(a.pathname,o)!=null}var Ec=FA();const PL=Jg(Ec),ry=A.createContext({});function oy(s){const t=A.useRef(null);return t.current===null&&(t.current=s()),t.current}const fE=typeof window<"u",pE=fE?A.useLayoutEffect:A.useEffect,mh=A.createContext(null);function ly(s,t){s.indexOf(t)===-1&&s.push(t)}function cy(s,t){const e=s.indexOf(t);e>-1&&s.splice(e,1)}const Ys=(s,t,e)=>e>t?t:e<s?s:e;let uy=()=>{};const wi={},mE=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function gE(s){return typeof s=="object"&&s!==null}const yE=s=>/^0[^.\s]+$/u.test(s);function dy(s){let t;return()=>(t===void 0&&(t=s()),t)}const fs=s=>s,jL=(s,t)=>e=>t(s(e)),Cc=(...s)=>s.reduce(jL),oc=(s,t,e)=>{const n=t-s;return n===0?1:(e-s)/n};class hy{constructor(){this.subscriptions=[]}add(t){return ly(this.subscriptions,t),()=>cy(this.subscriptions,t)}notify(t,e,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,e,n);else for(let o=0;o<a;o++){const l=this.subscriptions[o];l&&l(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const bi=s=>s*1e3,hs=s=>s/1e3;function vE(s,t){return t?s*(1e3/t):0}const bE=(s,t,e)=>(((1-3*e+3*t)*s+(3*e-6*t))*s+3*t)*s,BL=1e-7,FL=12;function IL(s,t,e,n,a){let o,l,c=0;do l=t+(e-t)/2,o=bE(l,n,a)-s,o>0?e=l:t=l;while(Math.abs(o)>BL&&++c<FL);return l}function Tc(s,t,e,n){if(s===t&&e===n)return fs;const a=o=>IL(o,0,1,s,e);return o=>o===0||o===1?o:bE(a(o),t,n)}const xE=s=>t=>t<=.5?s(2*t)/2:(2-s(2*(1-t)))/2,wE=s=>t=>1-s(1-t),SE=Tc(.33,1.53,.69,.99),fy=wE(SE),AE=xE(fy),EE=s=>(s*=2)<1?.5*fy(s):.5*(2-Math.pow(2,-10*(s-1))),py=s=>1-Math.sin(Math.acos(s)),CE=wE(py),TE=xE(py),zL=Tc(.42,0,1,1),UL=Tc(0,0,.58,1),_E=Tc(.42,0,.58,1),VL=s=>Array.isArray(s)&&typeof s[0]!="number",RE=s=>Array.isArray(s)&&typeof s[0]=="number",HL={linear:fs,easeIn:zL,easeInOut:_E,easeOut:UL,circIn:py,circInOut:TE,circOut:CE,backIn:fy,backInOut:AE,backOut:SE,anticipate:EE},$L=s=>typeof s=="string",nS=s=>{if(RE(s)){uy(s.length===4);const[t,e,n,a]=s;return Tc(t,e,n,a)}else if($L(s))return HL[s];return s},sd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function GL(s,t){let e=new Set,n=new Set,a=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function d(p){l.has(p)&&(h.schedule(p),s()),p(c)}const h={schedule:(p,m=!1,y=!1)=>{const S=y&&a?e:n;return m&&l.add(p),S.has(p)||S.add(p),p},cancel:p=>{n.delete(p),l.delete(p)},process:p=>{if(c=p,a){o=!0;return}a=!0,[e,n]=[n,e],e.forEach(d),e.clear(),a=!1,o&&(o=!1,h.process(p))}};return h}const qL=40;function NE(s,t){let e=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=()=>e=!0,l=sd.reduce((R,N)=>(R[N]=GL(o),R),{}),{setup:c,read:d,resolveKeyframes:h,preUpdate:p,update:m,preRender:y,render:x,postRender:S}=l,w=()=>{const R=wi.useManualTiming?a.timestamp:performance.now();e=!1,wi.useManualTiming||(a.delta=n?1e3/60:Math.max(Math.min(R-a.timestamp,qL),1)),a.timestamp=R,a.isProcessing=!0,c.process(a),d.process(a),h.process(a),p.process(a),m.process(a),y.process(a),x.process(a),S.process(a),a.isProcessing=!1,e&&t&&(n=!1,s(w))},E=()=>{e=!0,n=!0,a.isProcessing||s(w)};return{schedule:sd.reduce((R,N)=>{const M=l[N];return R[N]=(O,k=!1,L=!1)=>(e||E(),M.schedule(O,k,L)),R},{}),cancel:R=>{for(let N=0;N<sd.length;N++)l[sd[N]].cancel(R)},state:a,steps:l}}const{schedule:ve,cancel:aa,state:sn,steps:mm}=NE(typeof requestAnimationFrame<"u"?requestAnimationFrame:fs,!0);let _d;function XL(){_d=void 0}const mn={now:()=>(_d===void 0&&mn.set(sn.isProcessing||wi.useManualTiming?sn.timestamp:performance.now()),_d),set:s=>{_d=s,queueMicrotask(XL)}},ME=s=>t=>typeof t=="string"&&t.startsWith(s),DE=ME("--"),YL=ME("var(--"),my=s=>YL(s)?WL.test(s.split("/*")[0].trim()):!1,WL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function sS(s){return typeof s!="string"?!1:s.split("/*")[0].includes("var(--")}const Mo={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},lc={...Mo,transform:s=>Ys(0,1,s)},id={...Mo,default:1},Zl=s=>Math.round(s*1e5)/1e5,gy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function KL(s){return s==null}const QL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yy=(s,t)=>e=>!!(typeof e=="string"&&QL.test(e)&&e.startsWith(s)||t&&!KL(e)&&Object.prototype.hasOwnProperty.call(e,t)),kE=(s,t,e)=>n=>{if(typeof n!="string")return n;const[a,o,l,c]=n.match(gy);return{[s]:parseFloat(a),[t]:parseFloat(o),[e]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},ZL=s=>Ys(0,255,s),gm={...Mo,transform:s=>Math.round(ZL(s))},Fa={test:yy("rgb","red"),parse:kE("red","green","blue"),transform:({red:s,green:t,blue:e,alpha:n=1})=>"rgba("+gm.transform(s)+", "+gm.transform(t)+", "+gm.transform(e)+", "+Zl(lc.transform(n))+")"};function JL(s){let t="",e="",n="",a="";return s.length>5?(t=s.substring(1,3),e=s.substring(3,5),n=s.substring(5,7),a=s.substring(7,9)):(t=s.substring(1,2),e=s.substring(2,3),n=s.substring(3,4),a=s.substring(4,5),t+=t,e+=e,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const ig={test:yy("#"),parse:JL,transform:Fa.transform},_c=s=>({test:t=>typeof t=="string"&&t.endsWith(s)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${s}`}),Ji=_c("deg"),qs=_c("%"),At=_c("px"),tO=_c("vh"),eO=_c("vw"),iS={...qs,parse:s=>qs.parse(s)/100,transform:s=>qs.transform(s*100)},to={test:yy("hsl","hue"),parse:kE("hue","saturation","lightness"),transform:({hue:s,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(s)+", "+qs.transform(Zl(t))+", "+qs.transform(Zl(e))+", "+Zl(lc.transform(n))+")"},Ue={test:s=>Fa.test(s)||ig.test(s)||to.test(s),parse:s=>Fa.test(s)?Fa.parse(s):to.test(s)?to.parse(s):ig.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?Fa.transform(s):to.transform(s),getAnimatableNone:s=>{const t=Ue.parse(s);return t.alpha=0,Ue.transform(t)}},nO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function sO(s){return isNaN(s)&&typeof s=="string"&&(s.match(gy)?.length||0)+(s.match(nO)?.length||0)>0}const LE="number",OE="color",iO="var",aO="var(",aS="${}",rO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function cc(s){const t=s.toString(),e=[],n={color:[],number:[],var:[]},a=[];let o=0;const c=t.replace(rO,d=>(Ue.test(d)?(n.color.push(o),a.push(OE),e.push(Ue.parse(d))):d.startsWith(aO)?(n.var.push(o),a.push(iO),e.push(d)):(n.number.push(o),a.push(LE),e.push(parseFloat(d))),++o,aS)).split(aS);return{values:e,split:c,indexes:n,types:a}}function PE(s){return cc(s).values}function jE(s){const{split:t,types:e}=cc(s),n=t.length;return a=>{let o="";for(let l=0;l<n;l++)if(o+=t[l],a[l]!==void 0){const c=e[l];c===LE?o+=Zl(a[l]):c===OE?o+=Ue.transform(a[l]):o+=a[l]}return o}}const oO=s=>typeof s=="number"?0:Ue.test(s)?Ue.getAnimatableNone(s):s;function lO(s){const t=PE(s);return jE(s)(t.map(oO))}const ra={test:sO,parse:PE,createTransformer:jE,getAnimatableNone:lO};function ym(s,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?s+(t-s)*6*e:e<1/2?t:e<2/3?s+(t-s)*(2/3-e)*6:s}function cO({hue:s,saturation:t,lightness:e,alpha:n}){s/=360,t/=100,e/=100;let a=0,o=0,l=0;if(!t)a=o=l=e;else{const c=e<.5?e*(1+t):e+t-e*t,d=2*e-c;a=ym(d,c,s+1/3),o=ym(d,c,s),l=ym(d,c,s-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:n}}function Hd(s,t){return e=>e>0?t:s}const Ee=(s,t,e)=>s+(t-s)*e,vm=(s,t,e)=>{const n=s*s,a=e*(t*t-n)+n;return a<0?0:Math.sqrt(a)},uO=[ig,Fa,to],dO=s=>uO.find(t=>t.test(s));function rS(s){const t=dO(s);if(!t)return!1;let e=t.parse(s);return t===to&&(e=cO(e)),e}const oS=(s,t)=>{const e=rS(s),n=rS(t);if(!e||!n)return Hd(s,t);const a={...e};return o=>(a.red=vm(e.red,n.red,o),a.green=vm(e.green,n.green,o),a.blue=vm(e.blue,n.blue,o),a.alpha=Ee(e.alpha,n.alpha,o),Fa.transform(a))},ag=new Set(["none","hidden"]);function hO(s,t){return ag.has(s)?e=>e<=0?s:t:e=>e>=1?t:s}function fO(s,t){return e=>Ee(s,t,e)}function vy(s){return typeof s=="number"?fO:typeof s=="string"?my(s)?Hd:Ue.test(s)?oS:gO:Array.isArray(s)?BE:typeof s=="object"?Ue.test(s)?oS:pO:Hd}function BE(s,t){const e=[...s],n=e.length,a=s.map((o,l)=>vy(o)(o,t[l]));return o=>{for(let l=0;l<n;l++)e[l]=a[l](o);return e}}function pO(s,t){const e={...s,...t},n={};for(const a in e)s[a]!==void 0&&t[a]!==void 0&&(n[a]=vy(s[a])(s[a],t[a]));return a=>{for(const o in n)e[o]=n[o](a);return e}}function mO(s,t){const e=[],n={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const o=t.types[a],l=s.indexes[o][n[o]],c=s.values[l]??0;e[a]=c,n[o]++}return e}const gO=(s,t)=>{const e=ra.createTransformer(t),n=cc(s),a=cc(t);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?ag.has(s)&&!a.values.length||ag.has(t)&&!n.values.length?hO(s,t):Cc(BE(mO(n,a),a.values),e):Hd(s,t)};function FE(s,t,e){return typeof s=="number"&&typeof t=="number"&&typeof e=="number"?Ee(s,t,e):vy(s)(s,t)}const yO=s=>{const t=({timestamp:e})=>s(e);return{start:(e=!0)=>ve.update(t,e),stop:()=>aa(t),now:()=>sn.isProcessing?sn.timestamp:mn.now()}},IE=(s,t,e=10)=>{let n="";const a=Math.max(Math.round(t/e),2);for(let o=0;o<a;o++)n+=Math.round(s(o/(a-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},$d=2e4;function by(s){let t=0;const e=50;let n=s.next(t);for(;!n.done&&t<$d;)t+=e,n=s.next(t);return t>=$d?1/0:t}function vO(s,t=100,e){const n=e({...s,keyframes:[0,t]}),a=Math.min(by(n),$d);return{type:"keyframes",ease:o=>n.next(a*o).value/t,duration:hs(a)}}const bO=5;function zE(s,t,e){const n=Math.max(t-bO,0);return vE(e-s(n),t-n)}const Me={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},bm=.001;function xO({duration:s=Me.duration,bounce:t=Me.bounce,velocity:e=Me.velocity,mass:n=Me.mass}){let a,o,l=1-t;l=Ys(Me.minDamping,Me.maxDamping,l),s=Ys(Me.minDuration,Me.maxDuration,hs(s)),l<1?(a=h=>{const p=h*l,m=p*s,y=p-e,x=rg(h,l),S=Math.exp(-m);return bm-y/x*S},o=h=>{const m=h*l*s,y=m*e+e,x=Math.pow(l,2)*Math.pow(h,2)*s,S=Math.exp(-m),w=rg(Math.pow(h,2),l);return(-a(h)+bm>0?-1:1)*((y-x)*S)/w}):(a=h=>{const p=Math.exp(-h*s),m=(h-e)*s+1;return-bm+p*m},o=h=>{const p=Math.exp(-h*s),m=(e-h)*(s*s);return p*m});const c=5/s,d=SO(a,o,c);if(s=bi(s),isNaN(d))return{stiffness:Me.stiffness,damping:Me.damping,duration:s};{const h=Math.pow(d,2)*n;return{stiffness:h,damping:l*2*Math.sqrt(n*h),duration:s}}}const wO=12;function SO(s,t,e){let n=e;for(let a=1;a<wO;a++)n=n-s(n)/t(n);return n}function rg(s,t){return s*Math.sqrt(1-t*t)}const AO=["duration","bounce"],EO=["stiffness","damping","mass"];function lS(s,t){return t.some(e=>s[e]!==void 0)}function CO(s){let t={velocity:Me.velocity,stiffness:Me.stiffness,damping:Me.damping,mass:Me.mass,isResolvedFromDuration:!1,...s};if(!lS(s,EO)&&lS(s,AO))if(s.visualDuration){const e=s.visualDuration,n=2*Math.PI/(e*1.2),a=n*n,o=2*Ys(.05,1,1-(s.bounce||0))*Math.sqrt(a);t={...t,mass:Me.mass,stiffness:a,damping:o}}else{const e=xO(s);t={...t,...e,mass:Me.mass},t.isResolvedFromDuration=!0}return t}function Gd(s=Me.visualDuration,t=Me.bounce){const e=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:t}:s;let{restSpeed:n,restDelta:a}=e;const o=e.keyframes[0],l=e.keyframes[e.keyframes.length-1],c={done:!1,value:o},{stiffness:d,damping:h,mass:p,duration:m,velocity:y,isResolvedFromDuration:x}=CO({...e,velocity:-hs(e.velocity||0)}),S=y||0,w=h/(2*Math.sqrt(d*p)),E=l-o,C=hs(Math.sqrt(d/p)),T=Math.abs(E)<5;n||(n=T?Me.restSpeed.granular:Me.restSpeed.default),a||(a=T?Me.restDelta.granular:Me.restDelta.default);let R;if(w<1){const M=rg(C,w);R=O=>{const k=Math.exp(-w*C*O);return l-k*((S+w*C*E)/M*Math.sin(M*O)+E*Math.cos(M*O))}}else if(w===1)R=M=>l-Math.exp(-C*M)*(E+(S+C*E)*M);else{const M=C*Math.sqrt(w*w-1);R=O=>{const k=Math.exp(-w*C*O),L=Math.min(M*O,300);return l-k*((S+w*C*E)*Math.sinh(L)+M*E*Math.cosh(L))/M}}const N={calculatedDuration:x&&m||null,next:M=>{const O=R(M);if(x)c.done=M>=m;else{let k=M===0?S:0;w<1&&(k=M===0?bi(S):zE(R,M,O));const L=Math.abs(k)<=n,j=Math.abs(l-O)<=a;c.done=L&&j}return c.value=c.done?l:O,c},toString:()=>{const M=Math.min(by(N),$d),O=IE(k=>N.next(M*k).value,M,30);return M+"ms "+O},toTransition:()=>{}};return N}Gd.applyToOptions=s=>{const t=vO(s,100,Gd);return s.ease=t.ease,s.duration=bi(t.duration),s.type="keyframes",s};function og({keyframes:s,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:d,restDelta:h=.5,restSpeed:p}){const m=s[0],y={done:!1,value:m},x=L=>c!==void 0&&L<c||d!==void 0&&L>d,S=L=>c===void 0?d:d===void 0||Math.abs(c-L)<Math.abs(d-L)?c:d;let w=e*t;const E=m+w,C=l===void 0?E:l(E);C!==E&&(w=C-m);const T=L=>-w*Math.exp(-L/n),R=L=>C+T(L),N=L=>{const j=T(L),U=R(L);y.done=Math.abs(j)<=h,y.value=y.done?C:U};let M,O;const k=L=>{x(y.value)&&(M=L,O=Gd({keyframes:[y.value,S(y.value)],velocity:zE(R,L,y.value),damping:a,stiffness:o,restDelta:h,restSpeed:p}))};return k(0),{calculatedDuration:null,next:L=>{let j=!1;return!O&&M===void 0&&(j=!0,N(L),k(L)),M!==void 0&&L>=M?O.next(L-M):(!j&&N(L),y)}}}function TO(s,t,e){const n=[],a=e||wi.mix||FE,o=s.length-1;for(let l=0;l<o;l++){let c=a(s[l],s[l+1]);if(t){const d=Array.isArray(t)?t[l]||fs:t;c=Cc(d,c)}n.push(c)}return n}function _O(s,t,{clamp:e=!0,ease:n,mixer:a}={}){const o=s.length;if(uy(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const l=s[0]===s[1];s[0]>s[o-1]&&(s=[...s].reverse(),t=[...t].reverse());const c=TO(t,n,a),d=c.length,h=p=>{if(l&&p<s[0])return t[0];let m=0;if(d>1)for(;m<s.length-2&&!(p<s[m+1]);m++);const y=oc(s[m],s[m+1],p);return c[m](y)};return e?p=>h(Ys(s[0],s[o-1],p)):h}function RO(s,t){const e=s[s.length-1];for(let n=1;n<=t;n++){const a=oc(0,t,n);s.push(Ee(e,1,a))}}function NO(s){const t=[0];return RO(t,s.length-1),t}function MO(s,t){return s.map(e=>e*t)}function DO(s,t){return s.map(()=>t||_E).splice(0,s.length-1)}function Jl({duration:s=300,keyframes:t,times:e,ease:n="easeInOut"}){const a=VL(n)?n.map(nS):nS(n),o={done:!1,value:t[0]},l=MO(e&&e.length===t.length?e:NO(t),s),c=_O(l,t,{ease:Array.isArray(a)?a:DO(t,a)});return{calculatedDuration:s,next:d=>(o.value=c(d),o.done=d>=s,o)}}const kO=s=>s!==null;function xy(s,{repeat:t,repeatType:e="loop"},n,a=1){const o=s.filter(kO),c=a<0||t&&e!=="loop"&&t%2===1?0:o.length-1;return!c||n===void 0?o[c]:n}const LO={decay:og,inertia:og,tween:Jl,keyframes:Jl,spring:Gd};function UE(s){typeof s.type=="string"&&(s.type=LO[s.type])}class wy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const OO=s=>s/100;class Sy extends wy{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==mn.now()&&this.tick(mn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;UE(t);const{type:e=Jl,repeat:n=0,repeatDelay:a=0,repeatType:o,velocity:l=0}=t;let{keyframes:c}=t;const d=e||Jl;d!==Jl&&typeof c[0]!="number"&&(this.mixKeyframes=Cc(OO,FE(c[0],c[1])),c=[0,100]);const h=d({...t,keyframes:c});o==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...c].reverse(),velocity:-l})),h.calculatedDuration===null&&(h.calculatedDuration=by(h));const{calculatedDuration:p}=h;this.calculatedDuration=p,this.resolvedDuration=p+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=h}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:a,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return n.next(0);const{delay:h=0,keyframes:p,repeat:m,repeatType:y,repeatDelay:x,type:S,onUpdate:w,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const C=this.currentTime-h*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?C<0:C>a;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let R=this.currentTime,N=n;if(m){const L=Math.min(this.currentTime,a)/c;let j=Math.floor(L),U=L%1;!U&&L>=1&&(U=1),U===1&&j--,j=Math.min(j,m+1),j%2&&(y==="reverse"?(U=1-U,x&&(U-=x/c)):y==="mirror"&&(N=l)),R=Ys(0,1,U)*c}const M=T?{done:!1,value:p[0]}:N.next(R);o&&(M.value=o(M.value));let{done:O}=M;!T&&d!==null&&(O=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return k&&S!==og&&(M.value=xy(p,this.options,E,this.speed)),w&&w(M.value),k&&this.finish(),M}then(t,e){return this.finished.then(t,e)}get duration(){return hs(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+hs(t)}get time(){return hs(this.currentTime)}set time(t){t=bi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(mn.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=hs(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=yO,startTime:e}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(mn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function PO(s){for(let t=1;t<s.length;t++)s[t]??(s[t]=s[t-1])}const Ia=s=>s*180/Math.PI,lg=s=>{const t=Ia(Math.atan2(s[1],s[0]));return cg(t)},jO={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:lg,rotateZ:lg,skewX:s=>Ia(Math.atan(s[1])),skewY:s=>Ia(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},cg=s=>(s=s%360,s<0&&(s+=360),s),cS=lg,uS=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),dS=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),BO={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:uS,scaleY:dS,scale:s=>(uS(s)+dS(s))/2,rotateX:s=>cg(Ia(Math.atan2(s[6],s[5]))),rotateY:s=>cg(Ia(Math.atan2(-s[2],s[0]))),rotateZ:cS,rotate:cS,skewX:s=>Ia(Math.atan(s[4])),skewY:s=>Ia(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function ug(s){return s.includes("scale")?1:0}function dg(s,t){if(!s||s==="none")return ug(t);const e=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,a;if(e)n=BO,a=e;else{const c=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=jO,a=c}if(!a)return ug(t);const o=n[t],l=a[1].split(",").map(IO);return typeof o=="function"?o(l):l[o]}const FO=(s,t)=>{const{transform:e="none"}=getComputedStyle(s);return dg(e,t)};function IO(s){return parseFloat(s.trim())}const Do=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ko=new Set(Do),hS=s=>s===Mo||s===At,zO=new Set(["x","y","z"]),UO=Do.filter(s=>!zO.has(s));function VO(s){const t=[];return UO.forEach(e=>{const n=s.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const na={width:({x:s},{paddingLeft:t="0",paddingRight:e="0"})=>s.max-s.min-parseFloat(t)-parseFloat(e),height:({y:s},{paddingTop:t="0",paddingBottom:e="0"})=>s.max-s.min-parseFloat(t)-parseFloat(e),top:(s,{top:t})=>parseFloat(t),left:(s,{left:t})=>parseFloat(t),bottom:({y:s},{top:t})=>parseFloat(t)+(s.max-s.min),right:({x:s},{left:t})=>parseFloat(t)+(s.max-s.min),x:(s,{transform:t})=>dg(t,"x"),y:(s,{transform:t})=>dg(t,"y")};na.translateX=na.x;na.translateY=na.y;const $a=new Set;let hg=!1,fg=!1,pg=!1;function VE(){if(fg){const s=Array.from($a).filter(n=>n.needsMeasurement),t=new Set(s.map(n=>n.element)),e=new Map;t.forEach(n=>{const a=VO(n);a.length&&(e.set(n,a),n.render())}),s.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const a=e.get(n);a&&a.forEach(([o,l])=>{n.getValue(o)?.set(l)})}),s.forEach(n=>n.measureEndState()),s.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}fg=!1,hg=!1,$a.forEach(s=>s.complete(pg)),$a.clear()}function HE(){$a.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(fg=!0)})}function HO(){pg=!0,HE(),VE(),pg=!1}class Ay{constructor(t,e,n,a,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=a,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?($a.add(this),hg||(hg=!0,ve.read(HE),ve.resolveKeyframes(VE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:a}=this;if(t[0]===null){const o=a?.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(n&&e){const c=n.readValue(e,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),a&&o===void 0&&a.set(t[0])}PO(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),$a.delete(this)}cancel(){this.state==="scheduled"&&($a.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const $O=s=>s.startsWith("--");function GO(s,t,e){$O(t)?s.style.setProperty(t,e):s.style[t]=e}const qO=dy(()=>window.ScrollTimeline!==void 0),XO={};function YO(s,t){const e=dy(s);return()=>XO[t]??e()}const $E=YO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$l=([s,t,e,n])=>`cubic-bezier(${s}, ${t}, ${e}, ${n})`,fS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$l([0,.65,.55,1]),circOut:$l([.55,0,1,.45]),backIn:$l([.31,.01,.66,-.59]),backOut:$l([.33,1.53,.69,.99])};function GE(s,t){if(s)return typeof s=="function"?$E()?IE(s,t):"ease-out":RE(s)?$l(s):Array.isArray(s)?s.map(e=>GE(e,t)||fS.easeOut):fS[s]}function WO(s,t,e,{delay:n=0,duration:a=300,repeat:o=0,repeatType:l="loop",ease:c="easeOut",times:d}={},h=void 0){const p={[t]:e};d&&(p.offset=d);const m=GE(c,a);Array.isArray(m)&&(p.easing=m);const y={delay:n,duration:a,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return h&&(y.pseudoElement=h),s.animate(p,y)}function qE(s){return typeof s=="function"&&"applyToOptions"in s}function KO({type:s,...t}){return qE(s)&&$E()?s.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class QO extends wy{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:e,name:n,keyframes:a,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:c,onComplete:d}=t;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=t,uy(typeof t.type!="string");const h=KO(t);this.animation=WO(e,n,a,h,o),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const p=xy(a,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):GO(e,n,p),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return hs(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+hs(t)}get time(){return hs(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=bi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&qO()?(this.animation.timeline=t,fs):e(this)}}const XE={anticipate:EE,backInOut:AE,circInOut:TE};function ZO(s){return s in XE}function JO(s){typeof s.ease=="string"&&ZO(s.ease)&&(s.ease=XE[s.ease])}const xm=10;class tP extends QO{constructor(t){JO(t),UE(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:a,element:o,...l}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const c=new Sy({...l,autoplay:!1}),d=Math.max(xm,mn.now()-this.startTime),h=Ys(0,xm,d-xm);e.setWithVelocity(c.sample(Math.max(0,d-h)).value,c.sample(d).value,h),c.stop()}}const pS=(s,t)=>t==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(ra.test(s)||s==="0")&&!s.startsWith("url("));function eP(s){const t=s[0];if(s.length===1)return!0;for(let e=0;e<s.length;e++)if(s[e]!==t)return!0}function nP(s,t,e,n){const a=s[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const o=s[s.length-1],l=pS(a,t),c=pS(o,t);return!l||!c?!1:eP(s)||(e==="spring"||qE(e))&&n}function mg(s){s.duration=0,s.type="keyframes"}const sP=new Set(["opacity","clipPath","filter","transform"]),iP=dy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function aP(s){const{motionValue:t,name:e,repeatDelay:n,repeatType:a,damping:o,type:l}=s;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=t.owner.getProps();return iP()&&e&&sP.has(e)&&(e!=="transform"||!h)&&!d&&!n&&a!=="mirror"&&o!==0&&l!=="inertia"}const rP=40;class oP extends wy{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:l="loop",keyframes:c,name:d,motionValue:h,element:p,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=mn.now();const y={autoplay:t,delay:e,type:n,repeat:a,repeatDelay:o,repeatType:l,name:d,motionValue:h,element:p,...m},x=p?.KeyframeResolver||Ay;this.keyframeResolver=new x(c,(S,w,E)=>this.onKeyframesResolved(S,w,y,!E),d,h,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,n,a){this.keyframeResolver=void 0;const{name:o,type:l,velocity:c,delay:d,isHandoff:h,onUpdate:p}=n;this.resolvedAt=mn.now(),nP(t,o,l,c)||((wi.instantAnimations||!d)&&p?.(xy(t,n,e)),t[0]=t[t.length-1],mg(n),n.repeat=0);const y={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>rP?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},x=!h&&aP(y),S=y.motionValue?.owner?.current,w=x?new tP({...y,element:S}):new Sy(y);w.finished.then(()=>{this.notifyFinished()}).catch(fs),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),HO()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function YE(s,t,e,n=0,a=1){const o=Array.from(s).sort((h,p)=>h.sortNodePosition(p)).indexOf(t),l=s.size,c=(l-1)*n;return typeof e=="function"?e(o,l):a===1?o*n:c-o*n}const lP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function cP(s){const t=lP.exec(s);if(!t)return[,];const[,e,n,a]=t;return[`--${e??n}`,a]}function WE(s,t,e=1){const[n,a]=cP(s);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const l=o.trim();return mE(l)?parseFloat(l):l}return my(a)?WE(a,t,e+1):a}const uP={type:"spring",stiffness:500,damping:25,restSpeed:10},dP=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),hP={type:"keyframes",duration:.8},fP={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},pP=(s,{keyframes:t})=>t.length>2?hP:ko.has(s)?s.startsWith("scale")?dP(t[1]):uP:fP,mP=s=>s!==null;function gP(s,{repeat:t,repeatType:e="loop"},n){const a=s.filter(mP),o=t&&e!=="loop"&&t%2===1?0:a.length-1;return a[o]}function Ey(s,t){return s?.[t]??s?.default??s}function yP({when:s,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:a,repeat:o,repeatType:l,repeatDelay:c,from:d,elapsed:h,...p}){return!!Object.keys(p).length}const Cy=(s,t,e,n={},a,o)=>l=>{const c=Ey(n,s)||{},d=c.delay||n.delay||0;let{elapsed:h=0}=n;h=h-bi(d);const p={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-h,onUpdate:y=>{t.set(y),c.onUpdate&&c.onUpdate(y)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:s,motionValue:t,element:o?void 0:a};yP(c)||Object.assign(p,pP(s,p)),p.duration&&(p.duration=bi(p.duration)),p.repeatDelay&&(p.repeatDelay=bi(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(mg(p),p.delay===0&&(m=!0)),(wi.instantAnimations||wi.skipAnimations)&&(m=!0,mg(p),p.delay=0),p.allowFlatten=!c.type&&!c.ease,m&&!o&&t.get()!==void 0){const y=gP(p.keyframes,c);if(y!==void 0){ve.update(()=>{p.onUpdate(y),p.onComplete()});return}}return c.isSync?new Sy(p):new oP(p)};function mS(s){const t=[{},{}];return s?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function Ty(s,t,e,n){if(typeof t=="function"){const[a,o]=mS(n);t=t(e!==void 0?e:s.custom,a,o)}if(typeof t=="string"&&(t=s.variants&&s.variants[t]),typeof t=="function"){const[a,o]=mS(n);t=t(e!==void 0?e:s.custom,a,o)}return t}function ro(s,t,e){const n=s.getProps();return Ty(n,t,e!==void 0?e:n.custom,s)}const KE=new Set(["width","height","top","left","right","bottom",...Do]),gS=30,vP=s=>!isNaN(parseFloat(s));class bP{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const a=mn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=mn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=vP(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new hy);const n=this.events[t].add(e);return t==="change"?()=>{n(),ve.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=mn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>gS)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,gS);return vE(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Eo(s,t){return new bP(s,t)}const gg=s=>Array.isArray(s);function xP(s,t,e){s.hasValue(t)?s.getValue(t).set(e):s.addValue(t,Eo(e))}function wP(s){return gg(s)?s[s.length-1]||0:s}function SP(s,t){const e=ro(s,t);let{transitionEnd:n={},transition:a={},...o}=e||{};o={...o,...n};for(const l in o){const c=wP(o[l]);xP(s,l,c)}}const cn=s=>!!(s&&s.getVelocity);function AP(s){return!!(cn(s)&&s.add)}function yg(s,t){const e=s.getValue("willChange");if(AP(e))return e.add(t);if(!e&&wi.WillChange){const n=new wi.WillChange("auto");s.addValue("willChange",n),n.add(t)}}function _y(s){return s.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const EP="framerAppearId",QE="data-"+_y(EP);function ZE(s){return s.props[QE]}function CP({protectedKeys:s,needsAnimating:t},e){const n=s.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function JE(s,t,{delay:e=0,transitionOverride:n,type:a}={}){let{transition:o=s.getDefaultTransition(),transitionEnd:l,...c}=t;n&&(o=n);const d=[],h=a&&s.animationState&&s.animationState.getState()[a];for(const p in c){const m=s.getValue(p,s.latestValues[p]??null),y=c[p];if(y===void 0||h&&CP(h,p))continue;const x={delay:e,...Ey(o||{},p)},S=m.get();if(S!==void 0&&!m.isAnimating&&!Array.isArray(y)&&y===S&&!x.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const C=ZE(s);if(C){const T=window.MotionHandoffAnimation(C,p,ve);T!==null&&(x.startTime=T,w=!0)}}yg(s,p),m.start(Cy(p,m,y,s.shouldReduceMotion&&KE.has(p)?{type:!1}:x,s,w));const E=m.animation;E&&d.push(E)}return l&&Promise.all(d).then(()=>{ve.update(()=>{l&&SP(s,l)})}),d}function vg(s,t,e={}){const n=ro(s,t,e.type==="exit"?s.presenceContext?.custom:void 0);let{transition:a=s.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(a=e.transitionOverride);const o=n?()=>Promise.all(JE(s,n,e)):()=>Promise.resolve(),l=s.variantChildren&&s.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:m}=a;return TP(s,t,d,h,p,m,e)}:()=>Promise.resolve(),{when:c}=a;if(c){const[d,h]=c==="beforeChildren"?[o,l]:[l,o];return d().then(()=>h())}else return Promise.all([o(),l(e.delay)])}function TP(s,t,e=0,n=0,a=0,o=1,l){const c=[];for(const d of s.variantChildren)d.notify("AnimationStart",t),c.push(vg(d,t,{...l,delay:e+(typeof n=="function"?0:n)+YE(s.variantChildren,d,n,a,o)}).then(()=>d.notify("AnimationComplete",t)));return Promise.all(c)}function _P(s,t,e={}){s.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(o=>vg(s,o,e));n=Promise.all(a)}else if(typeof t=="string")n=vg(s,t,e);else{const a=typeof t=="function"?ro(s,t,e.custom):t;n=Promise.all(JE(s,a,e))}return n.then(()=>{s.notify("AnimationComplete",t)})}const RP={test:s=>s==="auto",parse:s=>s},tC=s=>t=>t.test(s),eC=[Mo,At,qs,Ji,eO,tO,RP],yS=s=>eC.find(tC(s));function NP(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||yE(s):!0}const MP=new Set(["brightness","contrast","saturate","opacity"]);function DP(s){const[t,e]=s.slice(0,-1).split("(");if(t==="drop-shadow")return s;const[n]=e.match(gy)||[];if(!n)return s;const a=e.replace(n,"");let o=MP.has(t)?1:0;return n!==e&&(o*=100),t+"("+o+a+")"}const kP=/\b([a-z-]*)\(.*?\)/gu,bg={...ra,getAnimatableNone:s=>{const t=s.match(kP);return t?t.map(DP).join(" "):s}},vS={...Mo,transform:Math.round},LP={rotate:Ji,rotateX:Ji,rotateY:Ji,rotateZ:Ji,scale:id,scaleX:id,scaleY:id,scaleZ:id,skew:Ji,skewX:Ji,skewY:Ji,distance:At,translateX:At,translateY:At,translateZ:At,x:At,y:At,z:At,perspective:At,transformPerspective:At,opacity:lc,originX:iS,originY:iS,originZ:At},Ry={borderWidth:At,borderTopWidth:At,borderRightWidth:At,borderBottomWidth:At,borderLeftWidth:At,borderRadius:At,borderTopLeftRadius:At,borderTopRightRadius:At,borderBottomRightRadius:At,borderBottomLeftRadius:At,width:At,maxWidth:At,height:At,maxHeight:At,top:At,right:At,bottom:At,left:At,inset:At,insetBlock:At,insetBlockStart:At,insetBlockEnd:At,insetInline:At,insetInlineStart:At,insetInlineEnd:At,padding:At,paddingTop:At,paddingRight:At,paddingBottom:At,paddingLeft:At,paddingBlock:At,paddingBlockStart:At,paddingBlockEnd:At,paddingInline:At,paddingInlineStart:At,paddingInlineEnd:At,margin:At,marginTop:At,marginRight:At,marginBottom:At,marginLeft:At,marginBlock:At,marginBlockStart:At,marginBlockEnd:At,marginInline:At,marginInlineStart:At,marginInlineEnd:At,fontSize:At,backgroundPositionX:At,backgroundPositionY:At,...LP,zIndex:vS,fillOpacity:lc,strokeOpacity:lc,numOctaves:vS},OP={...Ry,color:Ue,backgroundColor:Ue,outlineColor:Ue,fill:Ue,stroke:Ue,borderColor:Ue,borderTopColor:Ue,borderRightColor:Ue,borderBottomColor:Ue,borderLeftColor:Ue,filter:bg,WebkitFilter:bg},nC=s=>OP[s];function sC(s,t){let e=nC(s);return e!==bg&&(e=ra),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const PP=new Set(["auto","none","0"]);function jP(s,t,e){let n=0,a;for(;n<s.length&&!a;){const o=s[n];typeof o=="string"&&!PP.has(o)&&cc(o).values.length&&(a=s[n]),n++}if(a&&e)for(const o of t)s[o]=sC(e,a)}class BP extends Ay{constructor(t,e,n,a,o){super(t,e,n,a,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let p=0;p<t.length;p++){let m=t[p];if(typeof m=="string"&&(m=m.trim(),my(m))){const y=WE(m,e.current);y!==void 0&&(t[p]=y),p===t.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!KE.has(n)||t.length!==2)return;const[a,o]=t,l=yS(a),c=yS(o),d=sS(a),h=sS(o);if(d!==h&&na[n]){this.needsMeasurement=!0;return}if(l!==c)if(hS(l)&&hS(c))for(let p=0;p<t.length;p++){const m=t[p];typeof m=="string"&&(t[p]=parseFloat(m))}else na[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let a=0;a<t.length;a++)(t[a]===null||NP(t[a]))&&n.push(a);n.length&&jP(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=na[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const a=e[e.length-1];a!==void 0&&t.getValue(n,a).jump(a,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const a=t.getValue(e);a&&a.jump(this.measuredOrigin,!1);const o=n.length-1,l=n[o];n[o]=na[e](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,d])=>{t.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function FP(s,t,e){if(s==null)return[];if(s instanceof EventTarget)return[s];if(typeof s=="string"){let n=document;const a=e?.[s]??n.querySelectorAll(s);return a?Array.from(a):[]}return Array.from(s).filter(n=>n!=null)}const iC=(s,t)=>t&&typeof s=="number"?t.transform(s):s;function xg(s){return gE(s)&&"offsetHeight"in s}const{schedule:Ny}=NE(queueMicrotask,!1),ws={x:!1,y:!1};function aC(){return ws.x||ws.y}function IP(s){return s==="x"||s==="y"?ws[s]?null:(ws[s]=!0,()=>{ws[s]=!1}):ws.x||ws.y?null:(ws.x=ws.y=!0,()=>{ws.x=ws.y=!1})}function rC(s,t){const e=FP(s),n=new AbortController,a={passive:!0,...t,signal:n.signal};return[e,a,()=>n.abort()]}function bS(s){return!(s.pointerType==="touch"||aC())}function zP(s,t,e={}){const[n,a,o]=rC(s,e),l=c=>{if(!bS(c))return;const{target:d}=c,h=t(d,c);if(typeof h!="function"||!d)return;const p=m=>{bS(m)&&(h(m),d.removeEventListener("pointerleave",p))};d.addEventListener("pointerleave",p,a)};return n.forEach(c=>{c.addEventListener("pointerenter",l,a)}),o}const oC=(s,t)=>t?s===t?!0:oC(s,t.parentElement):!1,My=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,UP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function lC(s){return UP.has(s.tagName)||s.isContentEditable===!0}const Rd=new WeakSet;function xS(s){return t=>{t.key==="Enter"&&s(t)}}function wm(s,t){s.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const VP=(s,t)=>{const e=s.currentTarget;if(!e)return;const n=xS(()=>{if(Rd.has(e))return;wm(e,"down");const a=xS(()=>{wm(e,"up")}),o=()=>wm(e,"cancel");e.addEventListener("keyup",a,t),e.addEventListener("blur",o,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function wS(s){return My(s)&&!aC()}function HP(s,t,e={}){const[n,a,o]=rC(s,e),l=c=>{const d=c.currentTarget;if(!wS(c))return;Rd.add(d);const h=t(d,c),p=(x,S)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",y),Rd.has(d)&&Rd.delete(d),wS(x)&&typeof h=="function"&&h(x,{success:S})},m=x=>{p(x,d===window||d===document||e.useGlobalTarget||oC(d,x.target))},y=x=>{p(x,!1)};window.addEventListener("pointerup",m,a),window.addEventListener("pointercancel",y,a)};return n.forEach(c=>{(e.useGlobalTarget?window:c).addEventListener("pointerdown",l,a),xg(c)&&(c.addEventListener("focus",h=>VP(h,a)),!lC(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function cC(s){return gE(s)&&"ownerSVGElement"in s}function $P(s){return cC(s)&&s.tagName==="svg"}const GP=[...eC,Ue,ra],qP=s=>GP.find(tC(s)),SS=()=>({translate:0,scale:1,origin:0,originPoint:0}),eo=()=>({x:SS(),y:SS()}),AS=()=>({min:0,max:0}),$e=()=>({x:AS(),y:AS()}),wg={current:null},uC={current:!1},XP=typeof window<"u";function YP(){if(uC.current=!0,!!XP)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),t=()=>wg.current=s.matches;s.addEventListener("change",t),t()}else wg.current=!1}const WP=new WeakMap;function gh(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function uc(s){return typeof s=="string"||Array.isArray(s)}const Dy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ky=["initial",...Dy];function yh(s){return gh(s.animate)||ky.some(t=>uc(s[t]))}function dC(s){return!!(yh(s)||s.variants)}function KP(s,t,e){for(const n in t){const a=t[n],o=e[n];if(cn(a))s.addValue(n,a);else if(cn(o))s.addValue(n,Eo(a,{owner:s}));else if(o!==a)if(s.hasValue(n)){const l=s.getValue(n);l.liveStyle===!0?l.jump(a):l.hasAnimated||l.set(a)}else{const l=s.getStaticValue(n);s.addValue(n,Eo(l!==void 0?l:a,{owner:s}))}}for(const n in e)t[n]===void 0&&s.removeValue(n);return t}const ES=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let qd={};function hC(s){qd=s}function QP(){return qd}class ZP{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ay,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=mn.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,ve.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=e.initial?{...d}:{},this.renderState=h,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=yh(e),this.isVariantNode=dC(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(e,{},this);for(const y in m){const x=m[y];d[y]!==void 0&&cn(x)&&x.set(d[y])}}mount(t){this.current=t,WP.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(uC.current||YP(),this.shouldReduceMotion=wg.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),aa(this.notifyUpdate),aa(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=ko.has(t);n&&this.onBindTransform&&this.onBindTransform();const a=e.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&ve.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;typeof window<"u"&&window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{a(),o&&o(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in qd){const e=qd[t];if(!e)continue;const{isEnabled:n,Feature:a}=e;if(!this.features[t]&&a&&n(this.props)&&(this.features[t]=new a(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$e()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<ES.length;n++){const a=ES[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o="on"+a,l=t[o];l&&(this.propEventSubscriptions[a]=this.on(a,l))}this.prevMotionValues=KP(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=Eo(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(mE(n)||yE(n))?n=parseFloat(n):!qP(n)&&ra.test(e)&&(n=sC(t,e)),this.setBaseTarget(t,cn(n)?n.get():n)),cn(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const o=Ty(this.props,e,this.presenceContext?.custom);o&&(n=o[t])}if(e&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!cn(a)?a:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new hy),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){Ny.render(this.render)}}class fC extends ZP{constructor(){super(...arguments),this.KeyframeResolver=BP}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){const n=t.style;return n?n[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;cn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}class da{constructor(t){this.isMounted=!1,this.node=t}update(){}}function pC({top:s,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:s,max:n}}}function JP({x:s,y:t}){return{top:t.min,right:s.max,bottom:t.max,left:s.min}}function tj(s,t){if(!t)return s;const e=t({x:s.left,y:s.top}),n=t({x:s.right,y:s.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function Sm(s){return s===void 0||s===1}function Sg({scale:s,scaleX:t,scaleY:e}){return!Sm(s)||!Sm(t)||!Sm(e)}function ja(s){return Sg(s)||mC(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function mC(s){return CS(s.x)||CS(s.y)}function CS(s){return s&&s!=="0%"}function Xd(s,t,e){const n=s-e,a=t*n;return e+a}function TS(s,t,e,n,a){return a!==void 0&&(s=Xd(s,a,n)),Xd(s,e,n)+t}function Ag(s,t=0,e=1,n,a){s.min=TS(s.min,t,e,n,a),s.max=TS(s.max,t,e,n,a)}function gC(s,{x:t,y:e}){Ag(s.x,t.translate,t.scale,t.originPoint),Ag(s.y,e.translate,e.scale,e.originPoint)}const _S=.999999999999,RS=1.0000000000001;function ej(s,t,e,n=!1){const a=e.length;if(!a)return;t.x=t.y=1;let o,l;for(let c=0;c<a;c++){o=e[c],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&so(s,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,gC(s,l)),n&&ja(o.latestValues)&&so(s,o.latestValues))}t.x<RS&&t.x>_S&&(t.x=1),t.y<RS&&t.y>_S&&(t.y=1)}function no(s,t){s.min=s.min+t,s.max=s.max+t}function NS(s,t,e,n,a=.5){const o=Ee(s.min,s.max,a);Ag(s,t,e,o,n)}function so(s,t){NS(s.x,t.x,t.scaleX,t.scale,t.originX),NS(s.y,t.y,t.scaleY,t.scale,t.originY)}function yC(s,t){return pC(tj(s.getBoundingClientRect(),t))}function nj(s,t,e){const n=yC(s,e),{scroll:a}=t;return a&&(no(n.x,a.offset.x),no(n.y,a.offset.y)),n}const sj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ij=Do.length;function aj(s,t,e){let n="",a=!0;for(let o=0;o<ij;o++){const l=Do[o],c=s[l];if(c===void 0)continue;let d=!0;if(typeof c=="number")d=c===(l.startsWith("scale")?1:0);else{const h=parseFloat(c);d=l.startsWith("scale")?h===1:h===0}if(!d||e){const h=iC(c,Ry[l]);if(!d){a=!1;const p=sj[l]||l;n+=`${p}(${h}) `}e&&(t[l]=h)}}return n=n.trim(),e?n=e(t,a?"":n):a&&(n="none"),n}function Ly(s,t,e){const{style:n,vars:a,transformOrigin:o}=s;let l=!1,c=!1;for(const d in t){const h=t[d];if(ko.has(d)){l=!0;continue}else if(DE(d)){a[d]=h;continue}else{const p=iC(h,Ry[d]);d.startsWith("origin")?(c=!0,o[d]=p):n[d]=p}}if(t.transform||(l||e?n.transform=aj(t,s.transform,e):n.transform&&(n.transform="none")),c){const{originX:d="50%",originY:h="50%",originZ:p=0}=o;n.transformOrigin=`${d} ${h} ${p}`}}function vC(s,{style:t,vars:e},n,a){const o=s.style;let l;for(l in t)o[l]=t[l];a?.applyProjectionStyles(o,n);for(l in e)o.setProperty(l,e[l])}function MS(s,t){return t.max===t.min?0:s/(t.max-t.min)*100}const Bl={correct:(s,t)=>{if(!t.target)return s;if(typeof s=="string")if(At.test(s))s=parseFloat(s);else return s;const e=MS(s,t.target.x),n=MS(s,t.target.y);return`${e}% ${n}%`}},rj={correct:(s,{treeScale:t,projectionDelta:e})=>{const n=s,a=ra.parse(s);if(a.length>5)return n;const o=ra.createTransformer(s),l=typeof a[0]!="number"?1:0,c=e.x.scale*t.x,d=e.y.scale*t.y;a[0+l]/=c,a[1+l]/=d;const h=Ee(c,d,.5);return typeof a[2+l]=="number"&&(a[2+l]/=h),typeof a[3+l]=="number"&&(a[3+l]/=h),o(a)}},Eg={borderRadius:{...Bl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Bl,borderTopRightRadius:Bl,borderBottomLeftRadius:Bl,borderBottomRightRadius:Bl,boxShadow:rj};function bC(s,{layout:t,layoutId:e}){return ko.has(s)||s.startsWith("origin")||(t||e!==void 0)&&(!!Eg[s]||s==="opacity")}function Oy(s,t,e){const n=s.style,a=t?.style,o={};if(!n)return o;for(const l in n)(cn(n[l])||a&&cn(a[l])||bC(l,s)||e?.getValue(l)?.liveStyle!==void 0)&&(o[l]=n[l]);return o}function oj(s){return window.getComputedStyle(s)}class lj extends fC{constructor(){super(...arguments),this.type="html",this.renderInstance=vC}readValueFromInstance(t,e){if(ko.has(e))return this.projection?.isProjecting?ug(e):FO(t,e);{const n=oj(t),a=(DE(e)?n.getPropertyValue(e):n[e])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:e}){return yC(t,e)}build(t,e,n){Ly(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return Oy(t,e,n)}}const cj={offset:"stroke-dashoffset",array:"stroke-dasharray"},uj={offset:"strokeDashoffset",array:"strokeDasharray"};function dj(s,t,e=1,n=0,a=!0){s.pathLength=1;const o=a?cj:uj;s[o.offset]=`${-n}`,s[o.array]=`${t} ${e}`}const hj=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function xC(s,{attrX:t,attrY:e,attrScale:n,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},d,h,p){if(Ly(s,c,h),d){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:m,style:y}=s;m.transform&&(y.transform=m.transform,delete m.transform),(y.transform||m.transformOrigin)&&(y.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),y.transform&&(y.transformBox=p?.transformBox??"fill-box",delete m.transformBox);for(const x of hj)m[x]!==void 0&&(y[x]=m[x],delete m[x]);t!==void 0&&(m.x=t),e!==void 0&&(m.y=e),n!==void 0&&(m.scale=n),a!==void 0&&dj(m,a,o,l,!1)}const wC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),SC=s=>typeof s=="string"&&s.toLowerCase()==="svg";function fj(s,t,e,n){vC(s,t,void 0,n);for(const a in t.attrs)s.setAttribute(wC.has(a)?a:_y(a),t.attrs[a])}function AC(s,t,e){const n=Oy(s,t,e);for(const a in s)if(cn(s[a])||cn(t[a])){const o=Do.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[o]=s[a]}return n}class pj extends fC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$e}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(ko.has(e)){const n=nC(e);return n&&n.default||0}return e=wC.has(e)?e:_y(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return AC(t,e,n)}build(t,e,n){xC(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,a){fj(t,e,n,a)}mount(t){this.isSVGTag=SC(t.tagName),super.mount(t)}}const mj=ky.length;function EC(s){if(!s)return;if(!s.isControllingVariants){const e=s.parent?EC(s.parent)||{}:{};return s.props.initial!==void 0&&(e.initial=s.props.initial),e}const t={};for(let e=0;e<mj;e++){const n=ky[e],a=s.props[n];(uc(a)||a===!1)&&(t[n]=a)}return t}function CC(s,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==s.length)return!1;for(let n=0;n<e;n++)if(t[n]!==s[n])return!1;return!0}const gj=[...Dy].reverse(),yj=Dy.length;function vj(s){return t=>Promise.all(t.map(({animation:e,options:n})=>_P(s,e,n)))}function bj(s){let t=vj(s),e=DS(),n=!0;const a=d=>(h,p)=>{const m=ro(s,p,d==="exit"?s.presenceContext?.custom:void 0);if(m){const{transition:y,transitionEnd:x,...S}=m;h={...h,...S,...x}}return h};function o(d){t=d(s)}function l(d){const{props:h}=s,p=EC(s.parent)||{},m=[],y=new Set;let x={},S=1/0;for(let E=0;E<yj;E++){const C=gj[E],T=e[C],R=h[C]!==void 0?h[C]:p[C],N=uc(R),M=C===d?T.isActive:null;M===!1&&(S=E);let O=R===p[C]&&R!==h[C]&&N;if(O&&n&&s.manuallyAnimateOnMount&&(O=!1),T.protectedKeys={...x},!T.isActive&&M===null||!R&&!T.prevProp||gh(R)||typeof R=="boolean")continue;const k=xj(T.prevProp,R);let L=k||C===d&&T.isActive&&!O&&N||E>S&&N,j=!1;const U=Array.isArray(R)?R:[R];let H=U.reduce(a(C),{});M===!1&&(H={});const{prevResolvedValues:$={}}=T,Z={...$,...H},et=z=>{L=!0,y.has(z)&&(j=!0,y.delete(z)),T.needsAnimating[z]=!0;const I=s.getValue(z);I&&(I.liveStyle=!1)};for(const z in Z){const I=H[z],K=$[z];if(x.hasOwnProperty(z))continue;let ht=!1;gg(I)&&gg(K)?ht=!CC(I,K):ht=I!==K,ht?I!=null?et(z):y.add(z):I!==void 0&&y.has(z)?et(z):T.protectedKeys[z]=!0}T.prevProp=R,T.prevResolvedValues=H,T.isActive&&(x={...x,...H}),n&&s.blockInitialAnimation&&(L=!1);const ct=O&&k;L&&(!ct||j)&&m.push(...U.map(z=>{const I={type:C};if(typeof z=="string"&&n&&!ct&&s.manuallyAnimateOnMount&&s.parent){const{parent:K}=s,ht=ro(K,z);if(K.enteringChildren&&ht){const{delayChildren:B}=ht.transition||{};I.delay=YE(K.enteringChildren,s,B)}}return{animation:z,options:I}}))}if(y.size){const E={};if(typeof h.initial!="boolean"){const C=ro(s,Array.isArray(h.initial)?h.initial[0]:h.initial);C&&C.transition&&(E.transition=C.transition)}y.forEach(C=>{const T=s.getBaseTarget(C),R=s.getValue(C);R&&(R.liveStyle=!0),E[C]=T??null}),m.push({animation:E})}let w=!!m.length;return n&&(h.initial===!1||h.initial===h.animate)&&!s.manuallyAnimateOnMount&&(w=!1),n=!1,w?t(m):Promise.resolve()}function c(d,h){if(e[d].isActive===h)return Promise.resolve();s.variantChildren?.forEach(m=>m.animationState?.setActive(d,h)),e[d].isActive=h;const p=l(d);for(const m in e)e[m].protectedKeys={};return p}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>e,reset:()=>{e=DS()}}}function xj(s,t){return typeof t=="string"?t!==s:Array.isArray(t)?!CC(t,s):!1}function La(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function DS(){return{animate:La(!0),whileInView:La(),whileHover:La(),whileTap:La(),whileDrag:La(),whileFocus:La(),exit:La()}}function kS(s,t){s.min=t.min,s.max=t.max}function xs(s,t){kS(s.x,t.x),kS(s.y,t.y)}function LS(s,t){s.translate=t.translate,s.scale=t.scale,s.originPoint=t.originPoint,s.origin=t.origin}const TC=1e-4,wj=1-TC,Sj=1+TC,_C=.01,Aj=0-_C,Ej=0+_C;function gn(s){return s.max-s.min}function Cj(s,t,e){return Math.abs(s-t)<=e}function OS(s,t,e,n=.5){s.origin=n,s.originPoint=Ee(t.min,t.max,s.origin),s.scale=gn(e)/gn(t),s.translate=Ee(e.min,e.max,s.origin)-s.originPoint,(s.scale>=wj&&s.scale<=Sj||isNaN(s.scale))&&(s.scale=1),(s.translate>=Aj&&s.translate<=Ej||isNaN(s.translate))&&(s.translate=0)}function tc(s,t,e,n){OS(s.x,t.x,e.x,n?n.originX:void 0),OS(s.y,t.y,e.y,n?n.originY:void 0)}function PS(s,t,e){s.min=e.min+t.min,s.max=s.min+gn(t)}function Tj(s,t,e){PS(s.x,t.x,e.x),PS(s.y,t.y,e.y)}function jS(s,t,e){s.min=t.min-e.min,s.max=s.min+gn(t)}function Yd(s,t,e){jS(s.x,t.x,e.x),jS(s.y,t.y,e.y)}function BS(s,t,e,n,a){return s-=t,s=Xd(s,1/e,n),a!==void 0&&(s=Xd(s,1/a,n)),s}function _j(s,t=0,e=1,n=.5,a,o=s,l=s){if(qs.test(t)&&(t=parseFloat(t),t=Ee(l.min,l.max,t/100)-l.min),typeof t!="number")return;let c=Ee(o.min,o.max,n);s===o&&(c-=t),s.min=BS(s.min,t,e,c,a),s.max=BS(s.max,t,e,c,a)}function FS(s,t,[e,n,a],o,l){_j(s,t[e],t[n],t[a],t.scale,o,l)}const Rj=["x","scaleX","originX"],Nj=["y","scaleY","originY"];function IS(s,t,e,n){FS(s.x,t,Rj,e?e.x:void 0,n?n.x:void 0),FS(s.y,t,Nj,e?e.y:void 0,n?n.y:void 0)}function zS(s){return s.translate===0&&s.scale===1}function RC(s){return zS(s.x)&&zS(s.y)}function US(s,t){return s.min===t.min&&s.max===t.max}function Mj(s,t){return US(s.x,t.x)&&US(s.y,t.y)}function VS(s,t){return Math.round(s.min)===Math.round(t.min)&&Math.round(s.max)===Math.round(t.max)}function NC(s,t){return VS(s.x,t.x)&&VS(s.y,t.y)}function HS(s){return gn(s.x)/gn(s.y)}function $S(s,t){return s.translate===t.translate&&s.scale===t.scale&&s.originPoint===t.originPoint}function cs(s){return[s("x"),s("y")]}function Dj(s,t,e){let n="";const a=s.x.translate/t.x,o=s.y.translate/t.y,l=e?.z||0;if((a||o||l)&&(n=`translate3d(${a}px, ${o}px, ${l}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:h,rotate:p,rotateX:m,rotateY:y,skewX:x,skewY:S}=e;h&&(n=`perspective(${h}px) ${n}`),p&&(n+=`rotate(${p}deg) `),m&&(n+=`rotateX(${m}deg) `),y&&(n+=`rotateY(${y}deg) `),x&&(n+=`skewX(${x}deg) `),S&&(n+=`skewY(${S}deg) `)}const c=s.x.scale*t.x,d=s.y.scale*t.y;return(c!==1||d!==1)&&(n+=`scale(${c}, ${d})`),n||"none"}const MC=["TopLeft","TopRight","BottomLeft","BottomRight"],kj=MC.length,GS=s=>typeof s=="string"?parseFloat(s):s,qS=s=>typeof s=="number"||At.test(s);function Lj(s,t,e,n,a,o){a?(s.opacity=Ee(0,e.opacity??1,Oj(n)),s.opacityExit=Ee(t.opacity??1,0,Pj(n))):o&&(s.opacity=Ee(t.opacity??1,e.opacity??1,n));for(let l=0;l<kj;l++){const c=`border${MC[l]}Radius`;let d=XS(t,c),h=XS(e,c);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||qS(d)===qS(h)?(s[c]=Math.max(Ee(GS(d),GS(h),n),0),(qs.test(h)||qs.test(d))&&(s[c]+="%")):s[c]=h}(t.rotate||e.rotate)&&(s.rotate=Ee(t.rotate||0,e.rotate||0,n))}function XS(s,t){return s[t]!==void 0?s[t]:s.borderRadius}const Oj=DC(0,.5,CE),Pj=DC(.5,.95,fs);function DC(s,t,e){return n=>n<s?0:n>t?1:e(oc(s,t,n))}function jj(s,t,e){const n=cn(s)?s:Eo(s);return n.start(Cy("",n,t,e)),n.animation}function dc(s,t,e,n={passive:!0}){return s.addEventListener(t,e,n),()=>s.removeEventListener(t,e)}const Bj=(s,t)=>s.depth-t.depth;class Fj{constructor(){this.children=[],this.isDirty=!1}add(t){ly(this.children,t),this.isDirty=!0}remove(t){cy(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Bj),this.isDirty=!1,this.children.forEach(t)}}function Ij(s,t){const e=mn.now(),n=({timestamp:a})=>{const o=a-e;o>=t&&(aa(n),s(o-t))};return ve.setup(n,!0),()=>aa(n)}function Nd(s){return cn(s)?s.get():s}class zj{constructor(){this.members=[]}add(t){ly(this.members,t),t.scheduleRender()}remove(t){if(cy(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(a=>t===a);if(e===0)return!1;let n;for(let a=e;a>=0;a--){const o=this.members[a];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender();const a=n.options.layoutDependency,o=t.options.layoutDependency;a!==void 0&&o!==void 0&&a===o||(t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0));const{crossfade:c}=t.options;c===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Md={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Am=["","X","Y","Z"],Uj=1e3;let Vj=0;function Em(s,t,e,n){const{latestValues:a}=t;a[s]&&(e[s]=a[s],t.setStaticValue(s,0),n&&(n[s]=0))}function kC(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:t}=s.options;if(!t)return;const e=ZE(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:a,layoutId:o}=s.options;window.MotionCancelOptimisedAnimation(e,"transform",ve,!(a||o))}const{parent:n}=s;n&&!n.hasCheckedOptimisedAppear&&kC(n)}function LC({attachResizeListener:s,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(l={},c=t?.()){this.id=Vj++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Gj),this.nodes.forEach(Wj),this.nodes.forEach(Kj),this.nodes.forEach(qj)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new Fj)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new hy),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=cC(l)&&!$P(l),this.instance=l;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),s){let p,m=0;const y=()=>this.root.updateBlockedByResize=!1;ve.read(()=>{m=window.innerWidth}),s(l,()=>{const x=window.innerWidth;x!==m&&(m=x,this.root.updateBlockedByResize=!0,p&&p(),p=Ij(y,250),Md.hasAnimatedSinceResize&&(Md.hasAnimatedSinceResize=!1,this.nodes.forEach(KS)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeLayoutChanged:y,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||h.getDefaultTransition()||eB,{onLayoutAnimationStart:w,onLayoutAnimationComplete:E}=h.getProps(),C=!this.targetLayout||!NC(this.targetLayout,x),T=!m&&y;if(this.options.layoutRoot||this.resumeFrom||T||m&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...Ey(S,"layout"),onPlay:w,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(p,T)}else m||KS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),aa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Qj),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&kC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(YS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(WS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Yj),this.nodes.forEach(Hj),this.nodes.forEach($j)):this.nodes.forEach(WS),this.clearAllSnapshots();const c=mn.now();sn.delta=Ys(0,1e3/60,c-sn.timestamp),sn.timestamp=c,sn.isProcessing=!0,mm.update.process(sn),mm.preRender.process(sn),mm.render.process(sn),sn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ny.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Xj),this.sharedNodes.forEach(Zj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ve.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ve.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!gn(this.snapshot.measuredBox.x)&&!gn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=$e(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const d=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!a)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!RC(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,p=h!==this.prevTransformTemplateValue;l&&this.instance&&(c||ja(this.latestValues)||p)&&(a(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),nB(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return $e();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(sB))){const{scroll:h}=this.root;h&&(no(c.x,h.offset.x),no(c.y,h.offset.y))}return c}removeElementScroll(l){const c=$e();if(xs(c,l),this.scroll?.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:p,options:m}=h;h!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&xs(c,l),no(c.x,p.offset.x),no(c.y,p.offset.y))}return c}applyTransform(l,c=!1){const d=$e();xs(d,l);for(let h=0;h<this.path.length;h++){const p=this.path[h];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&so(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),ja(p.latestValues)&&so(d,p.latestValues)}return ja(this.latestValues)&&so(d,this.latestValues),d}removeTransform(l){const c=$e();xs(c,l);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!ja(h.latestValues))continue;Sg(h.latestValues)&&h.updateSnapshot();const p=$e(),m=h.measurePageBox();xs(p,m),IS(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,p)}return ja(this.latestValues)&&IS(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==sn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!this.layout||!(p||m))return;this.resolvedRelativeTargetAt=sn.timestamp;const y=this.getClosestProjectingParent();y&&this.linkedParentVersion!==y.layoutVersion&&!y.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(y&&y.layout?this.createRelativeTarget(y,this.layout.layoutBox,y.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=$e(),this.targetWithTransforms=$e()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Tj(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xs(this.target,this.layout.layoutBox),gC(this.target,this.targetDelta)):xs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?this.createRelativeTarget(y,this.target,y.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Sg(this.parent.latestValues)||mC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,c,d){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$e(),this.relativeTargetOrigin=$e(),Yd(this.relativeTargetOrigin,c,d),xs(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===sn.timestamp&&(d=!1),d)return;const{layout:h,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||p))return;xs(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;ej(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=$e());const{target:x}=l;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(LS(this.prevProjectionDelta.x,this.projectionDelta.x),LS(this.prevProjectionDelta.y,this.projectionDelta.y)),tc(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==y||!$S(this.projectionDelta.x,this.prevProjectionDelta.x)||!$S(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=eo(),this.projectionDelta=eo(),this.projectionDeltaWithTransform=eo()}setAnimationOrigin(l,c=!1){const d=this.snapshot,h=d?d.latestValues:{},p={...this.latestValues},m=eo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const y=$e(),x=d?d.source:void 0,S=this.layout?this.layout.source:void 0,w=x!==S,E=this.getStack(),C=!E||E.members.length<=1,T=!!(w&&!C&&this.options.crossfade===!0&&!this.path.some(tB));this.animationProgress=0;let R;this.mixTargetDelta=N=>{const M=N/1e3;QS(m.x,l.x,M),QS(m.y,l.y,M),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Yd(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Jj(this.relativeTarget,this.relativeTargetOrigin,y,M),R&&Mj(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=$e()),xs(R,this.relativeTarget)),w&&(this.animationValues=p,Lj(p,h,this.latestValues,M,T,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(aa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ve.update(()=>{Md.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Eo(0)),this.currentAnimation=jj(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Uj),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:h,latestValues:p}=l;if(!(!c||!d||!h)){if(this!==l&&this.layout&&h&&OC(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||$e();const m=gn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+m;const y=gn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+y}xs(c,d),so(c,p),tc(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new zj),this.sharedNodes.get(l).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const h={};d.z&&Em("z",l,h,this.animationValues);for(let p=0;p<Am.length;p++)Em(`rotate${Am[p]}`,l,h,this.animationValues),Em(`skew${Am[p]}`,l,h,this.animationValues);l.render();for(const p in h)l.setStaticValue(p,h[p]),this.animationValues&&(this.animationValues[p]=h[p]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Nd(c?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Nd(c?.pointerEvents)||""),this.hasProjected&&!ja(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const p=h.animationValues||h.latestValues;this.applyTransformsToTarget();let m=Dj(this.projectionDeltaWithTransform,this.treeScale,p);d&&(m=d(p,m)),l.transform=m;const{x:y,y:x}=this.projectionDelta;l.transformOrigin=`${y.origin*100}% ${x.origin*100}% 0`,h.animationValues?l.opacity=h===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const S in Eg){if(p[S]===void 0)continue;const{correct:w,applyTo:E,isCSSVariable:C}=Eg[S],T=m==="none"?p[S]:w(p[S],h);if(E){const R=E.length;for(let N=0;N<R;N++)l[E[N]]=T}else C?this.options.visualElement.renderState.vars[S]=T:l[S]=T}this.options.layoutId&&(l.pointerEvents=h===this?Nd(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(YS),this.root.sharedNodes.clear()}}}function Hj(s){s.updateLayout()}function $j(s){const t=s.resumeFrom?.snapshot||s.snapshot;if(s.isLead()&&s.layout&&t&&s.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:n}=s.layout,{animationType:a}=s.options,o=t.source!==s.layout.source;a==="size"?cs(p=>{const m=o?t.measuredBox[p]:t.layoutBox[p],y=gn(m);m.min=e[p].min,m.max=m.min+y}):OC(a,t.layoutBox,e)&&cs(p=>{const m=o?t.measuredBox[p]:t.layoutBox[p],y=gn(e[p]);m.max=m.min+y,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[p].max=s.relativeTarget[p].min+y)});const l=eo();tc(l,e,t.layoutBox);const c=eo();o?tc(c,s.applyTransform(n,!0),t.measuredBox):tc(c,e,t.layoutBox);const d=!RC(l);let h=!1;if(!s.resumeFrom){const p=s.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:y}=p;if(m&&y){const x=$e();Yd(x,t.layoutBox,m.layoutBox);const S=$e();Yd(S,e,y.layoutBox),NC(x,S)||(h=!0),p.options.layoutRoot&&(s.relativeTarget=S,s.relativeTargetOrigin=x,s.relativeParent=p)}}}s.notifyListeners("didUpdate",{layout:e,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(s.isLead()){const{onExitComplete:e}=s.options;e&&e()}s.options.transition=void 0}function Gj(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function qj(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function Xj(s){s.clearSnapshot()}function YS(s){s.clearMeasurements()}function WS(s){s.isLayoutDirty=!1}function Yj(s){const{visualElement:t}=s.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),s.resetTransform()}function KS(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function Wj(s){s.resolveTargetDelta()}function Kj(s){s.calcProjection()}function Qj(s){s.resetSkewAndRotation()}function Zj(s){s.removeLeadSnapshot()}function QS(s,t,e){s.translate=Ee(t.translate,0,e),s.scale=Ee(t.scale,1,e),s.origin=t.origin,s.originPoint=t.originPoint}function ZS(s,t,e,n){s.min=Ee(t.min,e.min,n),s.max=Ee(t.max,e.max,n)}function Jj(s,t,e,n){ZS(s.x,t.x,e.x,n),ZS(s.y,t.y,e.y,n)}function tB(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const eB={duration:.45,ease:[.4,0,.1,1]},JS=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),t1=JS("applewebkit/")&&!JS("chrome/")?Math.round:fs;function e1(s){s.min=t1(s.min),s.max=t1(s.max)}function nB(s){e1(s.x),e1(s.y)}function OC(s,t,e){return s==="position"||s==="preserve-aspect"&&!Cj(HS(t),HS(e),.2)}function sB(s){return s!==s.root&&s.scroll?.wasRoot}const iB=LC({attachResizeListener:(s,t)=>dc(s,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),Cm={current:void 0},PC=LC({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!Cm.current){const s=new iB({});s.mount(window),s.setOptions({layoutScroll:!0}),Cm.current=s}return Cm.current},resetTransform:(s,t)=>{s.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),Py=A.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function n1(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function aB(...s){return t=>{let e=!1;const n=s.map(a=>{const o=n1(a,t);return!e&&typeof o=="function"&&(e=!0),o});if(e)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():n1(s[a],null)}}}}function rB(...s){return A.useCallback(aB(...s),s)}class oB extends A.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const n=e.offsetParent,a=xg(n)&&n.offsetWidth||0,o=xg(n)&&n.offsetHeight||0,l=this.props.sizeRef.current;l.height=e.offsetHeight||0,l.width=e.offsetWidth||0,l.top=e.offsetTop,l.left=e.offsetLeft,l.right=a-l.width-l.left,l.bottom=o-l.height-l.top}return null}componentDidUpdate(){}render(){return this.props.children}}function lB({children:s,isPresent:t,anchorX:e,anchorY:n,root:a}){const o=A.useId(),l=A.useRef(null),c=A.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:d}=A.useContext(Py),h=s.props?.ref??s?.ref,p=rB(l,h);return A.useInsertionEffect(()=>{const{width:m,height:y,top:x,left:S,right:w,bottom:E}=c.current;if(t||!l.current||!m||!y)return;const C=e==="left"?`left: ${S}`:`right: ${w}`,T=n==="bottom"?`bottom: ${E}`:`top: ${x}`;l.current.dataset.motionPopId=o;const R=document.createElement("style");d&&(R.nonce=d);const N=a??document.head;return N.appendChild(R),R.sheet&&R.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${y}px !important;
            ${C}px !important;
            ${T}px !important;
          }
        `),()=>{N.contains(R)&&N.removeChild(R)}},[t]),v.jsx(oB,{isPresent:t,childRef:l,sizeRef:c,children:A.cloneElement(s,{ref:p})})}const cB=({children:s,initial:t,isPresent:e,onExitComplete:n,custom:a,presenceAffectsLayout:o,mode:l,anchorX:c,anchorY:d,root:h})=>{const p=oy(uB),m=A.useId();let y=!0,x=A.useMemo(()=>(y=!1,{id:m,initial:t,isPresent:e,custom:a,onExitComplete:S=>{p.set(S,!0);for(const w of p.values())if(!w)return;n&&n()},register:S=>(p.set(S,!1),()=>p.delete(S))}),[e,p,n]);return o&&y&&(x={...x}),A.useMemo(()=>{p.forEach((S,w)=>p.set(w,!1))},[e]),A.useEffect(()=>{!e&&!p.size&&n&&n()},[e]),l==="popLayout"&&(s=v.jsx(lB,{isPresent:e,anchorX:c,anchorY:d,root:h,children:s})),v.jsx(mh.Provider,{value:x,children:s})};function uB(){return new Map}function jC(s=!0){const t=A.useContext(mh);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:a}=t,o=A.useId();A.useEffect(()=>{if(s)return a(o)},[s]);const l=A.useCallback(()=>s&&n&&n(o),[o,n,s]);return!e&&n?[!1,l]:[!0]}const ad=s=>s.key||"";function s1(s){const t=[];return A.Children.forEach(s,e=>{A.isValidElement(e)&&t.push(e)}),t}const Wd=({children:s,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",anchorY:d="top",root:h})=>{const[p,m]=jC(l),y=A.useMemo(()=>s1(s),[s]),x=l&&!p?[]:y.map(ad),S=A.useRef(!0),w=A.useRef(y),E=oy(()=>new Map),C=A.useRef(new Set),[T,R]=A.useState(y),[N,M]=A.useState(y);pE(()=>{S.current=!1,w.current=y;for(let L=0;L<N.length;L++){const j=ad(N[L]);x.includes(j)?(E.delete(j),C.current.delete(j)):E.get(j)!==!0&&E.set(j,!1)}},[N,x.length,x.join("-")]);const O=[];if(y!==T){let L=[...y];for(let j=0;j<N.length;j++){const U=N[j],H=ad(U);x.includes(H)||(L.splice(j,0,U),O.push(U))}return o==="wait"&&O.length&&(L=O),M(s1(L)),R(y),null}const{forceRender:k}=A.useContext(ry);return v.jsx(v.Fragment,{children:N.map(L=>{const j=ad(L),U=l&&!p?!1:y===N||x.includes(j),H=()=>{if(C.current.has(j))return;if(C.current.add(j),E.has(j))E.set(j,!0);else return;let $=!0;E.forEach(Z=>{Z||($=!1)}),$&&(k?.(),M(w.current),l&&m?.(),n&&n())};return v.jsx(cB,{isPresent:U,initial:!S.current||e?void 0:!1,custom:t,presenceAffectsLayout:a,mode:o,root:h,onExitComplete:U?void 0:H,anchorX:c,anchorY:d,children:L},j)})})},BC=A.createContext({strict:!1}),i1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let a1=!1;function dB(){if(a1)return;const s={};for(const t in i1)s[t]={isEnabled:e=>i1[t].some(n=>!!e[n])};hC(s),a1=!0}function FC(){return dB(),QP()}function hB(s){const t=FC();for(const e in s)t[e]={...t[e],...s[e]};hC(t)}const fB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Kd(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||fB.has(s)}let IC=s=>!Kd(s);function pB(s){typeof s=="function"&&(IC=t=>t.startsWith("on")?!Kd(t):s(t))}try{pB(require("@emotion/is-prop-valid").default)}catch{}function mB(s,t,e){const n={};for(const a in s)a==="values"&&typeof s.values=="object"||(IC(a)||e===!0&&Kd(a)||!t&&!Kd(a)||s.draggable&&a.startsWith("onDrag"))&&(n[a]=s[a]);return n}const vh=A.createContext({});function gB(s,t){if(yh(s)){const{initial:e,animate:n}=s;return{initial:e===!1||uc(e)?e:void 0,animate:uc(n)?n:void 0}}return s.inherit!==!1?t:{}}function yB(s){const{initial:t,animate:e}=gB(s,A.useContext(vh));return A.useMemo(()=>({initial:t,animate:e}),[r1(t),r1(e)])}function r1(s){return Array.isArray(s)?s.join(" "):s}const jy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function zC(s,t,e){for(const n in t)!cn(t[n])&&!bC(n,e)&&(s[n]=t[n])}function vB({transformTemplate:s},t){return A.useMemo(()=>{const e=jy();return Ly(e,t,s),Object.assign({},e.vars,e.style)},[t])}function bB(s,t){const e=s.style||{},n={};return zC(n,e,s),Object.assign(n,vB(s,t)),n}function xB(s,t){const e={},n=bB(s,t);return s.drag&&s.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(e.tabIndex=0),e.style=n,e}const UC=()=>({...jy(),attrs:{}});function wB(s,t,e,n){const a=A.useMemo(()=>{const o=UC();return xC(o,t,SC(n),s.transformTemplate,s.style),{...o.attrs,style:{...o.style}}},[t]);if(s.style){const o={};zC(o,s.style,s),a.style={...o,...a.style}}return a}const SB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function By(s){return typeof s!="string"||s.includes("-")?!1:!!(SB.indexOf(s)>-1||/[A-Z]/u.test(s))}function AB(s,t,e,{latestValues:n},a,o=!1,l){const d=(l??By(s)?wB:xB)(t,n,a,s),h=mB(t,typeof s=="string",o),p=s!==A.Fragment?{...h,...d,ref:e}:{},{children:m}=t,y=A.useMemo(()=>cn(m)?m.get():m,[m]);return A.createElement(s,{...p,children:y})}function EB({scrapeMotionValuesFromProps:s,createRenderState:t},e,n,a){return{latestValues:CB(e,n,a,s),renderState:t()}}function CB(s,t,e,n){const a={},o=n(s,{});for(const y in o)a[y]=Nd(o[y]);let{initial:l,animate:c}=s;const d=yh(s),h=dC(s);t&&h&&!d&&s.inherit!==!1&&(l===void 0&&(l=t.initial),c===void 0&&(c=t.animate));let p=e?e.initial===!1:!1;p=p||l===!1;const m=p?c:l;if(m&&typeof m!="boolean"&&!gh(m)){const y=Array.isArray(m)?m:[m];for(let x=0;x<y.length;x++){const S=Ty(s,y[x]);if(S){const{transitionEnd:w,transition:E,...C}=S;for(const T in C){let R=C[T];if(Array.isArray(R)){const N=p?R.length-1:0;R=R[N]}R!==null&&(a[T]=R)}for(const T in w)a[T]=w[T]}}}return a}const VC=s=>(t,e)=>{const n=A.useContext(vh),a=A.useContext(mh),o=()=>EB(s,t,n,a);return e?o():oy(o)},TB=VC({scrapeMotionValuesFromProps:Oy,createRenderState:jy}),_B=VC({scrapeMotionValuesFromProps:AC,createRenderState:UC}),RB=Symbol.for("motionComponentSymbol");function NB(s,t,e){const n=A.useRef(e);A.useInsertionEffect(()=>{n.current=e});const a=A.useRef(null);return A.useCallback(o=>{o&&s.onMount?.(o),t&&(o?t.mount(o):t.unmount());const l=n.current;if(typeof l=="function")if(o){const c=l(o);typeof c=="function"&&(a.current=c)}else a.current?(a.current(),a.current=null):l(o);else l&&(l.current=o)},[t])}const HC=A.createContext({});function Gl(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function MB(s,t,e,n,a,o){const{visualElement:l}=A.useContext(vh),c=A.useContext(BC),d=A.useContext(mh),h=A.useContext(Py).reducedMotion,p=A.useRef(null),m=A.useRef(!1);n=n||c.renderer,!p.current&&n&&(p.current=n(s,{visualState:t,parent:l,props:e,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h,isSVG:o}),m.current&&p.current&&(p.current.manuallyAnimateOnMount=!0));const y=p.current,x=A.useContext(HC);y&&!y.projection&&a&&(y.type==="html"||y.type==="svg")&&DB(p.current,e,a,x);const S=A.useRef(!1);A.useInsertionEffect(()=>{y&&S.current&&y.update(e,d)});const w=e[QE],E=A.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return pE(()=>{m.current=!0,y&&(S.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),E.current&&y.animationState&&y.animationState.animateChanges())}),A.useEffect(()=>{y&&(!E.current&&y.animationState&&y.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),E.current=!1),y.enteringChildren=void 0)}),y}function DB(s,t,e,n){const{layoutId:a,layout:o,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:h,layoutCrossfade:p}=t;s.projection=new e(s.latestValues,t["data-framer-portal-id"]?void 0:$C(s.parent)),s.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:!!l||c&&Gl(c),visualElement:s,animationType:typeof o=="string"?o:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:d,layoutRoot:h})}function $C(s){if(s)return s.options.allowProjection!==!1?s.projection:$C(s.parent)}function Tm(s,{forwardMotionProps:t=!1,type:e}={},n,a){n&&hB(n);const o=e?e==="svg":By(s),l=o?_B:TB;function c(h,p){let m;const y={...A.useContext(Py),...h,layoutId:kB(h)},{isStatic:x}=y,S=yB(h),w=l(h,x);if(!x&&fE){LB();const E=OB(y);m=E.MeasureLayout,S.visualElement=MB(s,w,y,a,E.ProjectionNode,o)}return v.jsxs(vh.Provider,{value:S,children:[m&&S.visualElement?v.jsx(m,{visualElement:S.visualElement,...y}):null,AB(s,h,NB(w,S.visualElement,p),w,x,t,o)]})}c.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const d=A.forwardRef(c);return d[RB]=s,d}function kB({layoutId:s}){const t=A.useContext(ry).id;return t&&s!==void 0?t+"-"+s:s}function LB(s,t){A.useContext(BC).strict}function OB(s){const t=FC(),{drag:e,layout:n}=t;if(!e&&!n)return{};const a={...e,...n};return{MeasureLayout:e?.isEnabled(s)||n?.isEnabled(s)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function PB(s,t){if(typeof Proxy>"u")return Tm;const e=new Map,n=(o,l)=>Tm(o,l,s,t),a=(o,l)=>n(o,l);return new Proxy(a,{get:(o,l)=>l==="create"?n:(e.has(l)||e.set(l,Tm(l,void 0,s,t)),e.get(l))})}const jB=(s,t)=>t.isSVG??By(s)?new pj(t):new lj(t,{allowProjection:s!==A.Fragment});class BB extends da{constructor(t){super(t),t.animationState||(t.animationState=bj(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();gh(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let FB=0;class IB extends da{constructor(){super(...arguments),this.id=FB++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const a=this.node.animationState.setActive("exit",!t);e&&!t&&a.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const zB={animation:{Feature:BB},exit:{Feature:IB}};function Rc(s){return{point:{x:s.pageX,y:s.pageY}}}const UB=s=>t=>My(t)&&s(t,Rc(t));function ec(s,t,e,n){return dc(s,t,UB(e),n)}const GC=({current:s})=>s?s.ownerDocument.defaultView:null,o1=(s,t)=>Math.abs(s-t);function VB(s,t){const e=o1(s.x,t.x),n=o1(s.y,t.y);return Math.sqrt(e**2+n**2)}const l1=new Set(["auto","scroll"]);class qC{constructor(t,e,{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=x=>{this.handleScroll(x.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Rm(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,w=VB(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!w)return;const{point:E}=x,{timestamp:C}=sn;this.history.push({...E,timestamp:C});const{onStart:T,onMove:R}=this.handlers;S||(T&&T(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,x)},this.handlePointerMove=(x,S)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=_m(S,this.transformPagePoint),ve.update(this.updatePoint,!0)},this.handlePointerUp=(x,S)=>{this.end();const{onEnd:w,onSessionEnd:E,resumeAnimation:C}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Rm(x.type==="pointercancel"?this.lastMoveEventInfo:_m(S,this.transformPagePoint),this.history);this.startEvent&&w&&w(x,T),E&&E(x,T)},!My(t))return;this.dragSnapToOrigin=o,this.handlers=e,this.transformPagePoint=n,this.distanceThreshold=l,this.contextWindow=a||window;const d=Rc(t),h=_m(d,this.transformPagePoint),{point:p}=h,{timestamp:m}=sn;this.history=[{...p,timestamp:m}];const{onSessionStart:y}=e;y&&y(t,Rm(h,this.history)),this.removeListeners=Cc(ec(this.contextWindow,"pointermove",this.handlePointerMove),ec(this.contextWindow,"pointerup",this.handlePointerUp),ec(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(t){let e=t.parentElement;for(;e;){const n=getComputedStyle(e);(l1.has(n.overflowX)||l1.has(n.overflowY))&&this.scrollPositions.set(e,{x:e.scrollLeft,y:e.scrollTop}),e=e.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const e=this.scrollPositions.get(t);if(!e)return;const n=t===window,a=n?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},o={x:a.x-e.x,y:a.y-e.y};o.x===0&&o.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(t,a),ve.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),aa(this.updatePoint)}}function _m(s,t){return t?{point:t(s.point)}:s}function c1(s,t){return{x:s.x-t.x,y:s.y-t.y}}function Rm({point:s},t){return{point:s,delta:c1(s,XC(t)),offset:c1(s,HB(t)),velocity:$B(t,.1)}}function HB(s){return s[0]}function XC(s){return s[s.length-1]}function $B(s,t){if(s.length<2)return{x:0,y:0};let e=s.length-1,n=null;const a=XC(s);for(;e>=0&&(n=s[e],!(a.timestamp-n.timestamp>bi(t)));)e--;if(!n)return{x:0,y:0};const o=hs(a.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const l={x:(a.x-n.x)/o,y:(a.y-n.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function GB(s,{min:t,max:e},n){return t!==void 0&&s<t?s=n?Ee(t,s,n.min):Math.max(s,t):e!==void 0&&s>e&&(s=n?Ee(e,s,n.max):Math.min(s,e)),s}function u1(s,t,e){return{min:t!==void 0?s.min+t:void 0,max:e!==void 0?s.max+e-(s.max-s.min):void 0}}function qB(s,{top:t,left:e,bottom:n,right:a}){return{x:u1(s.x,e,a),y:u1(s.y,t,n)}}function d1(s,t){let e=t.min-s.min,n=t.max-s.max;return t.max-t.min<s.max-s.min&&([e,n]=[n,e]),{min:e,max:n}}function XB(s,t){return{x:d1(s.x,t.x),y:d1(s.y,t.y)}}function YB(s,t){let e=.5;const n=gn(s),a=gn(t);return a>n?e=oc(t.min,t.max-n,s.min):n>a&&(e=oc(s.min,s.max-a,t.min)),Ys(0,1,e)}function WB(s,t){const e={};return t.min!==void 0&&(e.min=t.min-s.min),t.max!==void 0&&(e.max=t.max-s.min),e}const Cg=.35;function KB(s=Cg){return s===!1?s=0:s===!0&&(s=Cg),{x:h1(s,"left","right"),y:h1(s,"top","bottom")}}function h1(s,t,e){return{min:f1(s,t),max:f1(s,e)}}function f1(s,t){return typeof s=="number"?s:s[t]||0}const QB=new WeakMap;class ZB{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$e(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const o=m=>{e?(this.stopAnimation(),this.snapToCursor(Rc(m).point)):this.pauseAnimation()},l=(m,y)=>{this.stopAnimation();const{drag:x,dragPropagation:S,onDragStart:w}=this.getProps();if(x&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=IP(x),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),cs(C=>{let T=this.getAxisMotionValue(C).get()||0;if(qs.test(T)){const{projection:R}=this.visualElement;if(R&&R.layout){const N=R.layout.layoutBox[C];N&&(T=gn(N)*(parseFloat(T)/100))}}this.originPoint[C]=T}),w&&ve.postRender(()=>w(m,y)),yg(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},c=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y;const{dragPropagation:x,dragDirectionLock:S,onDirectionLock:w,onDrag:E}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:C}=y;if(S&&this.currentDirection===null){this.currentDirection=JB(C),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",y.point,C),this.updateAxis("y",y.point,C),this.visualElement.render(),E&&E(m,y)},d=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y,this.stop(m,y),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>cs(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new qC(t,{onSessionStart:o,onStart:l,onMove:c,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:n,contextWindow:GC(this.visualElement),element:this.visualElement.current})}stop(t,e){const n=t||this.latestPointerEvent,a=e||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!a||!n)return;const{velocity:l}=a;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&ve.postRender(()=>c(n,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,e,n){const{drag:a}=this.getProps();if(!n||!rd(t,a,this.currentDirection))return;const o=this.getAxisMotionValue(t);let l=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(l=GB(l,this.constraints[t],this.elastic[t])),o.set(l)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;t&&Gl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=qB(n.layoutBox,t):this.constraints=!1,this.elastic=KB(e),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&cs(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=WB(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Gl(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=nj(n,a.root,this.visualElement.getTransformPagePoint());let l=XB(a.layout.layoutBox,o);if(e){const c=e(JP(l));this.hasMutatedConstraints=!!c,c&&(l=pC(c))}return l}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:a,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},h=cs(p=>{if(!rd(p,e,this.currentDirection))return;let m=d&&d[p]||{};l&&(m={min:0,max:0});const y=a?200:1e6,x=a?40:1e7,S={type:"inertia",velocity:n?t[p]:0,bounceStiffness:y,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...o,...m};return this.startAxisValueAnimation(p,S)});return Promise.all(h).then(c)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return yg(this.visualElement,t),n.start(Cy(t,n,0,e,this.visualElement,!1))}stopAnimation(){cs(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){cs(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),a=n[e];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){cs(e=>{const{drag:n}=this.getProps();if(!rd(e,n,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(e);if(a&&a.layout){const{min:l,max:c}=a.layout.layoutBox[e],d=o.get()||0;o.set(t[e]-Ee(l,c,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Gl(e)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};cs(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();a[l]=YB({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),cs(l=>{if(!rd(l,t,null))return;const c=this.getAxisMotionValue(l),{min:d,max:h}=this.constraints[l];c.set(Ee(d,h,a[l]))})}addListeners(){if(!this.visualElement.current)return;QB.set(this.visualElement,this);const t=this.visualElement.current,e=ec(t,"pointerdown",d=>{const{drag:h,dragListener:p=!0}=this.getProps(),m=d.target,y=m!==t&&lC(m);h&&p&&!y&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();Gl(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,o=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ve.read(n);const l=dc(window,"resize",()=>this.scalePositionWithinConstraints()),c=a.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(cs(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=d[p].translate,m.set(m.get()+d[p].translate))}),this.visualElement.render())}));return()=>{l(),e(),o(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:l=Cg,dragMomentum:c=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:a,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function rd(s,t,e){return(t===!0||t===s)&&(e===null||e===s)}function JB(s,t=10){let e=null;return Math.abs(s.y)>t?e="y":Math.abs(s.x)>t&&(e="x"),e}class tF extends da{constructor(t){super(t),this.removeGroupControls=fs,this.removeListeners=fs,this.controls=new ZB(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||fs}update(){const{dragControls:t}=this.node.getProps(),{dragControls:e}=this.node.prevProps||{};t!==e&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const p1=s=>(t,e)=>{s&&ve.postRender(()=>s(t,e))};class eF extends da{constructor(){super(...arguments),this.removePointerDownListener=fs}onPointerDown(t){this.session=new qC(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:GC(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:p1(t),onStart:p1(e),onMove:n,onEnd:(o,l)=>{delete this.session,a&&ve.postRender(()=>a(o,l))}}}mount(){this.removePointerDownListener=ec(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Nm=!1;class nF extends A.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:a}=this.props,{projection:o}=t;o&&(e.group&&e.group.add(o),n&&n.register&&a&&n.register(o),Nm&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Md.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:a,isPresent:o}=this.props,{projection:l}=n;return l&&(l.isPresent=o,t.layoutDependency!==e&&l.setOptions({...l.options,layoutDependency:e}),Nm=!0,a||t.layoutDependency!==e||e===void 0||t.isPresent!==o?l.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?l.promote():l.relegate()||ve.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Ny.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:a}=t;Nm=!0,a&&(a.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function YC(s){const[t,e]=jC(),n=A.useContext(ry);return v.jsx(nF,{...s,layoutGroup:n,switchLayoutGroup:A.useContext(HC),isPresent:t,safeToRemove:e})}const sF={pan:{Feature:eF},drag:{Feature:tF,ProjectionNode:PC,MeasureLayout:YC}};function m1(s,t,e){const{props:n}=s;s.animationState&&n.whileHover&&s.animationState.setActive("whileHover",e==="Start");const a="onHover"+e,o=n[a];o&&ve.postRender(()=>o(t,Rc(t)))}class iF extends da{mount(){const{current:t}=this.node;t&&(this.unmount=zP(t,(e,n)=>(m1(this.node,n,"Start"),a=>m1(this.node,a,"End"))))}unmount(){}}class aF extends da{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Cc(dc(this.node.current,"focus",()=>this.onFocus()),dc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function g1(s,t,e){const{props:n}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&n.whileTap&&s.animationState.setActive("whileTap",e==="Start");const a="onTap"+(e==="End"?"":e),o=n[a];o&&ve.postRender(()=>o(t,Rc(t)))}class rF extends da{mount(){const{current:t}=this.node;t&&(this.unmount=HP(t,(e,n)=>(g1(this.node,n,"Start"),(a,{success:o})=>g1(this.node,a,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Tg=new WeakMap,Mm=new WeakMap,oF=s=>{const t=Tg.get(s.target);t&&t(s)},lF=s=>{s.forEach(oF)};function cF({root:s,...t}){const e=s||document;Mm.has(e)||Mm.set(e,{});const n=Mm.get(e),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(lF,{root:s,...t})),n[a]}function uF(s,t,e){const n=cF(t);return Tg.set(s,e),n.observe(s),()=>{Tg.delete(s),n.unobserve(s)}}const dF={some:0,all:1};class hF extends da{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:a="some",once:o}=t,l={root:e?e.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:dF[a]},c=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),y=h?p:m;y&&y(d)};return uF(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(fF(t,e))&&this.startObserver()}unmount(){}}function fF({viewport:s={}},{viewport:t={}}={}){return e=>s[e]!==t[e]}const pF={inView:{Feature:hF},tap:{Feature:rF},focus:{Feature:aF},hover:{Feature:iF}},mF={layout:{ProjectionNode:PC,MeasureLayout:YC}},gF={...zB,...pF,...sF,...mF},Ga=PB(gF,jB);const yF=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vF=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),y1=s=>{const t=vF(s);return t.charAt(0).toUpperCase()+t.slice(1)},WC=(...s)=>s.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim(),bF=s=>{for(const t in s)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var xF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const wF=A.forwardRef(({color:s="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:a="",children:o,iconNode:l,...c},d)=>A.createElement("svg",{ref:d,...xF,width:t,height:t,stroke:s,strokeWidth:n?Number(e)*24/Number(t):e,className:WC("lucide",a),...!o&&!bF(c)&&{"aria-hidden":"true"},...c},[...l.map(([h,p])=>A.createElement(h,p)),...Array.isArray(o)?o:[o]]));const Lt=(s,t)=>{const e=A.forwardRef(({className:n,...a},o)=>A.createElement(wF,{ref:o,iconNode:t,className:WC(`lucide-${yF(y1(s))}`,`lucide-${s}`,n),...a}));return e.displayName=y1(s),e};const SF=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],AF=Lt("archive",SF);const EF=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],CF=Lt("bell",EF);const TF=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],_F=Lt("bold",TF);const RF=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],NF=Lt("building-2",RF);const MF=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],DF=Lt("calendar",MF);const kF=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],KC=Lt("check",kF);const LF=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],bh=Lt("chevron-down",LF);const OF=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],PF=Lt("chevron-left",OF);const jF=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],BF=Lt("chevron-right",jF);const FF=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],QC=Lt("chevron-up",FF);const IF=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],zF=Lt("chevrons-up-down",IF);const UF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],VF=Lt("circle-alert",UF);const HF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],oo=Lt("circle-check",HF);const $F=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],GF=Lt("circle-question-mark",$F);const qF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],_g=Lt("circle-x",qF);const XF=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Qd=Lt("clock",XF);const YF=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],WF=Lt("download",YF);const KF=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Gn=Lt("file-text",KF);const QF=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M11 18h2",key:"12mj7e"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M9 13v-.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v.5",key:"qbrxap"}]],ZF=Lt("file-type",QF);const JF=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],t3=Lt("funnel",JF);const e3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],n3=Lt("globe",e3);const s3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],i3=Lt("history",s3);const a3=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],r3=Lt("italic",a3);const o3=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],l3=Lt("layout-dashboard",o3);const c3=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],u3=Lt("link",c3);const d3=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],h3=Lt("list-ordered",d3);const f3=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],p3=Lt("list",f3);const m3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],g3=Lt("log-out",m3);const y3=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],v3=Lt("message-square",y3);const b3=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],x3=Lt("move",b3);const w3=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],v1=Lt("pen-tool",w3);const S3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ZC=Lt("plus",S3);const A3=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],E3=Lt("printer",A3);const C3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],xh=Lt("search",C3);const T3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],_3=Lt("send",T3);const R3=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],N3=Lt("settings",R3);const M3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],D3=Lt("shield",M3);const k3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],b1=Lt("sparkles",k3);const L3=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],O3=Lt("square-pen",L3);const P3=[["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-6 0c0 2 1 2 1 3.5V13",key:"i9gjdv"}],["path",{d:"M20 15.5a2.5 2.5 0 0 0-2.5-2.5h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1z",key:"1vzg3v"}],["path",{d:"M5 22h14",key:"ehvnwv"}]],j3=Lt("stamp",P3);const B3=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],F3=Lt("tag",B3);const I3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],JC=Lt("trash-2",I3);const z3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],U3=Lt("trending-up",z3);const V3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],H3=Lt("upload",V3);const $3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Rg=Lt("user",$3);const G3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Dd=Lt("users",G3);const q3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],sa=Lt("x",q3);function tT(s){var t,e,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var a=s.length;for(t=0;t<a;t++)s[t]&&(e=tT(s[t]))&&(n&&(n+=" "),n+=e)}else for(e in s)s[e]&&(n&&(n+=" "),n+=e);return n}function Lo(){for(var s,t,e=0,n="",a=arguments.length;e<a;e++)(s=arguments[e])&&(t=tT(s))&&(n&&(n+=" "),n+=t);return n}const X3=(s,t)=>{const e=new Array(s.length+t.length);for(let n=0;n<s.length;n++)e[n]=s[n];for(let n=0;n<t.length;n++)e[s.length+n]=t[n];return e},Y3=(s,t)=>({classGroupId:s,validator:t}),eT=(s=new Map,t=null,e)=>({nextPart:s,validators:t,classGroupId:e}),Zd="-",x1=[],W3="arbitrary..",K3=s=>{const t=Z3(s),{conflictingClassGroups:e,conflictingClassGroupModifiers:n}=s;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return Q3(l);const c=l.split(Zd),d=c[0]===""&&c.length>1?1:0;return nT(c,d,t)},getConflictingClassGroupIds:(l,c)=>{if(c){const d=n[l],h=e[l];return d?h?X3(h,d):d:h||x1}return e[l]||x1}}},nT=(s,t,e)=>{if(s.length-t===0)return e.classGroupId;const a=s[t],o=e.nextPart.get(a);if(o){const h=nT(s,t+1,o);if(h)return h}const l=e.validators;if(l===null)return;const c=t===0?s.join(Zd):s.slice(t).join(Zd),d=l.length;for(let h=0;h<d;h++){const p=l[h];if(p.validator(c))return p.classGroupId}},Q3=s=>s.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=s.slice(1,-1),e=t.indexOf(":"),n=t.slice(0,e);return n?W3+n:void 0})(),Z3=s=>{const{theme:t,classGroups:e}=s;return J3(e,t)},J3=(s,t)=>{const e=eT();for(const n in s){const a=s[n];Fy(a,e,n,t)}return e},Fy=(s,t,e,n)=>{const a=s.length;for(let o=0;o<a;o++){const l=s[o];tI(l,t,e,n)}},tI=(s,t,e,n)=>{if(typeof s=="string"){eI(s,t,e);return}if(typeof s=="function"){nI(s,t,e,n);return}sI(s,t,e,n)},eI=(s,t,e)=>{const n=s===""?t:sT(t,s);n.classGroupId=e},nI=(s,t,e,n)=>{if(iI(s)){Fy(s(n),t,e,n);return}t.validators===null&&(t.validators=[]),t.validators.push(Y3(e,s))},sI=(s,t,e,n)=>{const a=Object.entries(s),o=a.length;for(let l=0;l<o;l++){const[c,d]=a[l];Fy(d,sT(t,c),e,n)}},sT=(s,t)=>{let e=s;const n=t.split(Zd),a=n.length;for(let o=0;o<a;o++){const l=n[o];let c=e.nextPart.get(l);c||(c=eT(),e.nextPart.set(l,c)),e=c}return e},iI=s=>"isThemeGetter"in s&&s.isThemeGetter===!0,aI=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,e=Object.create(null),n=Object.create(null);const a=(o,l)=>{e[o]=l,t++,t>s&&(t=0,n=e,e=Object.create(null))};return{get(o){let l=e[o];if(l!==void 0)return l;if((l=n[o])!==void 0)return a(o,l),l},set(o,l){o in e?e[o]=l:a(o,l)}}},Ng="!",w1=":",rI=[],S1=(s,t,e,n,a)=>({modifiers:s,hasImportantModifier:t,baseClassName:e,maybePostfixModifierPosition:n,isExternal:a}),oI=s=>{const{prefix:t,experimentalParseClassName:e}=s;let n=a=>{const o=[];let l=0,c=0,d=0,h;const p=a.length;for(let w=0;w<p;w++){const E=a[w];if(l===0&&c===0){if(E===w1){o.push(a.slice(d,w)),d=w+1;continue}if(E==="/"){h=w;continue}}E==="["?l++:E==="]"?l--:E==="("?c++:E===")"&&c--}const m=o.length===0?a:a.slice(d);let y=m,x=!1;m.endsWith(Ng)?(y=m.slice(0,-1),x=!0):m.startsWith(Ng)&&(y=m.slice(1),x=!0);const S=h&&h>d?h-d:void 0;return S1(o,x,y,S)};if(t){const a=t+w1,o=n;n=l=>l.startsWith(a)?o(l.slice(a.length)):S1(rI,!1,l,void 0,!0)}if(e){const a=n;n=o=>e({className:o,parseClassName:a})}return n},lI=s=>{const t=new Map;return s.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{const n=[];let a=[];for(let o=0;o<e.length;o++){const l=e[o],c=l[0]==="[",d=t.has(l);c||d?(a.length>0&&(a.sort(),n.push(...a),a=[]),n.push(l)):a.push(l)}return a.length>0&&(a.sort(),n.push(...a)),n}},cI=s=>({cache:aI(s.cacheSize),parseClassName:oI(s),sortModifiers:lI(s),...K3(s)}),uI=/\s+/,dI=(s,t)=>{const{parseClassName:e,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:o}=t,l=[],c=s.trim().split(uI);let d="";for(let h=c.length-1;h>=0;h-=1){const p=c[h],{isExternal:m,modifiers:y,hasImportantModifier:x,baseClassName:S,maybePostfixModifierPosition:w}=e(p);if(m){d=p+(d.length>0?" "+d:d);continue}let E=!!w,C=n(E?S.substring(0,w):S);if(!C){if(!E){d=p+(d.length>0?" "+d:d);continue}if(C=n(S),!C){d=p+(d.length>0?" "+d:d);continue}E=!1}const T=y.length===0?"":y.length===1?y[0]:o(y).join(":"),R=x?T+Ng:T,N=R+C;if(l.indexOf(N)>-1)continue;l.push(N);const M=a(C,E);for(let O=0;O<M.length;++O){const k=M[O];l.push(R+k)}d=p+(d.length>0?" "+d:d)}return d},hI=(...s)=>{let t=0,e,n,a="";for(;t<s.length;)(e=s[t++])&&(n=iT(e))&&(a&&(a+=" "),a+=n);return a},iT=s=>{if(typeof s=="string")return s;let t,e="";for(let n=0;n<s.length;n++)s[n]&&(t=iT(s[n]))&&(e&&(e+=" "),e+=t);return e},fI=(s,...t)=>{let e,n,a,o;const l=d=>{const h=t.reduce((p,m)=>m(p),s());return e=cI(h),n=e.cache.get,a=e.cache.set,o=c,c(d)},c=d=>{const h=n(d);if(h)return h;const p=dI(d,e);return a(d,p),p};return o=l,(...d)=>o(hI(...d))},pI=[],He=s=>{const t=e=>e[s]||pI;return t.isThemeGetter=!0,t},aT=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,rT=/^\((?:(\w[\w-]*):)?(.+)\)$/i,mI=/^\d+\/\d+$/,gI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,yI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,vI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,bI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,xI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Xr=s=>mI.test(s),Vt=s=>!!s&&!Number.isNaN(Number(s)),Qi=s=>!!s&&Number.isInteger(Number(s)),Dm=s=>s.endsWith("%")&&Vt(s.slice(0,-1)),mi=s=>gI.test(s),wI=()=>!0,SI=s=>yI.test(s)&&!vI.test(s),oT=()=>!1,AI=s=>bI.test(s),EI=s=>xI.test(s),CI=s=>!wt(s)&&!St(s),TI=s=>Oo(s,uT,oT),wt=s=>aT.test(s),Oa=s=>Oo(s,dT,SI),km=s=>Oo(s,DI,Vt),A1=s=>Oo(s,lT,oT),_I=s=>Oo(s,cT,EI),od=s=>Oo(s,hT,AI),St=s=>rT.test(s),Fl=s=>Po(s,dT),RI=s=>Po(s,kI),E1=s=>Po(s,lT),NI=s=>Po(s,uT),MI=s=>Po(s,cT),ld=s=>Po(s,hT,!0),Oo=(s,t,e)=>{const n=aT.exec(s);return n?n[1]?t(n[1]):e(n[2]):!1},Po=(s,t,e=!1)=>{const n=rT.exec(s);return n?n[1]?t(n[1]):e:!1},lT=s=>s==="position"||s==="percentage",cT=s=>s==="image"||s==="url",uT=s=>s==="length"||s==="size"||s==="bg-size",dT=s=>s==="length",DI=s=>s==="number",kI=s=>s==="family-name",hT=s=>s==="shadow",LI=()=>{const s=He("color"),t=He("font"),e=He("text"),n=He("font-weight"),a=He("tracking"),o=He("leading"),l=He("breakpoint"),c=He("container"),d=He("spacing"),h=He("radius"),p=He("shadow"),m=He("inset-shadow"),y=He("text-shadow"),x=He("drop-shadow"),S=He("blur"),w=He("perspective"),E=He("aspect"),C=He("ease"),T=He("animate"),R=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...N(),St,wt],O=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto","contain","none"],L=()=>[St,wt,d],j=()=>[Xr,"full","auto",...L()],U=()=>[Qi,"none","subgrid",St,wt],H=()=>["auto",{span:["full",Qi,St,wt]},Qi,St,wt],$=()=>[Qi,"auto",St,wt],Z=()=>["auto","min","max","fr",St,wt],et=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ct=()=>["start","end","center","stretch","center-safe","end-safe"],P=()=>["auto",...L()],z=()=>[Xr,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...L()],I=()=>[s,St,wt],K=()=>[...N(),E1,A1,{position:[St,wt]}],ht=()=>["no-repeat",{repeat:["","x","y","space","round"]}],B=()=>["auto","cover","contain",NI,TI,{size:[St,wt]}],X=()=>[Dm,Fl,Oa],tt=()=>["","none","full",h,St,wt],ot=()=>["",Vt,Fl,Oa],pt=()=>["solid","dashed","dotted","double"],st=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],nt=()=>[Vt,Dm,E1,A1],Et=()=>["","none",S,St,wt],bt=()=>["none",Vt,St,wt],Nt=()=>["none",Vt,St,wt],q=()=>[Vt,St,wt],lt=()=>[Xr,"full",...L()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[mi],breakpoint:[mi],color:[wI],container:[mi],"drop-shadow":[mi],ease:["in","out","in-out"],font:[CI],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[mi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[mi],shadow:[mi],spacing:["px",Vt],text:[mi],"text-shadow":[mi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Xr,wt,St,E]}],container:["container"],columns:[{columns:[Vt,wt,St,c]}],"break-after":[{"break-after":R()}],"break-before":[{"break-before":R()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:j()}],"inset-x":[{"inset-x":j()}],"inset-y":[{"inset-y":j()}],start:[{start:j()}],end:[{end:j()}],top:[{top:j()}],right:[{right:j()}],bottom:[{bottom:j()}],left:[{left:j()}],visibility:["visible","invisible","collapse"],z:[{z:[Qi,"auto",St,wt]}],basis:[{basis:[Xr,"full","auto",c,...L()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Vt,Xr,"auto","initial","none",wt]}],grow:[{grow:["",Vt,St,wt]}],shrink:[{shrink:["",Vt,St,wt]}],order:[{order:[Qi,"first","last","none",St,wt]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:H()}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:H()}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Z()}],"auto-rows":[{"auto-rows":Z()}],gap:[{gap:L()}],"gap-x":[{"gap-x":L()}],"gap-y":[{"gap-y":L()}],"justify-content":[{justify:[...et(),"normal"]}],"justify-items":[{"justify-items":[...ct(),"normal"]}],"justify-self":[{"justify-self":["auto",...ct()]}],"align-content":[{content:["normal",...et()]}],"align-items":[{items:[...ct(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ct(),{baseline:["","last"]}]}],"place-content":[{"place-content":et()}],"place-items":[{"place-items":[...ct(),"baseline"]}],"place-self":[{"place-self":["auto",...ct()]}],p:[{p:L()}],px:[{px:L()}],py:[{py:L()}],ps:[{ps:L()}],pe:[{pe:L()}],pt:[{pt:L()}],pr:[{pr:L()}],pb:[{pb:L()}],pl:[{pl:L()}],m:[{m:P()}],mx:[{mx:P()}],my:[{my:P()}],ms:[{ms:P()}],me:[{me:P()}],mt:[{mt:P()}],mr:[{mr:P()}],mb:[{mb:P()}],ml:[{ml:P()}],"space-x":[{"space-x":L()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":L()}],"space-y-reverse":["space-y-reverse"],size:[{size:z()}],w:[{w:[c,"screen",...z()]}],"min-w":[{"min-w":[c,"screen","none",...z()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[l]},...z()]}],h:[{h:["screen","lh",...z()]}],"min-h":[{"min-h":["screen","lh","none",...z()]}],"max-h":[{"max-h":["screen","lh",...z()]}],"font-size":[{text:["base",e,Fl,Oa]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,St,km]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Dm,wt]}],"font-family":[{font:[RI,wt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,St,wt]}],"line-clamp":[{"line-clamp":[Vt,"none",St,km]}],leading:[{leading:[o,...L()]}],"list-image":[{"list-image":["none",St,wt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",St,wt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:I()}],"text-color":[{text:I()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pt(),"wavy"]}],"text-decoration-thickness":[{decoration:[Vt,"from-font","auto",St,Oa]}],"text-decoration-color":[{decoration:I()}],"underline-offset":[{"underline-offset":[Vt,"auto",St,wt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:L()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",St,wt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",St,wt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:K()}],"bg-repeat":[{bg:ht()}],"bg-size":[{bg:B()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Qi,St,wt],radial:["",St,wt],conic:[Qi,St,wt]},MI,_I]}],"bg-color":[{bg:I()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:I()}],"gradient-via":[{via:I()}],"gradient-to":[{to:I()}],rounded:[{rounded:tt()}],"rounded-s":[{"rounded-s":tt()}],"rounded-e":[{"rounded-e":tt()}],"rounded-t":[{"rounded-t":tt()}],"rounded-r":[{"rounded-r":tt()}],"rounded-b":[{"rounded-b":tt()}],"rounded-l":[{"rounded-l":tt()}],"rounded-ss":[{"rounded-ss":tt()}],"rounded-se":[{"rounded-se":tt()}],"rounded-ee":[{"rounded-ee":tt()}],"rounded-es":[{"rounded-es":tt()}],"rounded-tl":[{"rounded-tl":tt()}],"rounded-tr":[{"rounded-tr":tt()}],"rounded-br":[{"rounded-br":tt()}],"rounded-bl":[{"rounded-bl":tt()}],"border-w":[{border:ot()}],"border-w-x":[{"border-x":ot()}],"border-w-y":[{"border-y":ot()}],"border-w-s":[{"border-s":ot()}],"border-w-e":[{"border-e":ot()}],"border-w-t":[{"border-t":ot()}],"border-w-r":[{"border-r":ot()}],"border-w-b":[{"border-b":ot()}],"border-w-l":[{"border-l":ot()}],"divide-x":[{"divide-x":ot()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ot()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...pt(),"hidden","none"]}],"divide-style":[{divide:[...pt(),"hidden","none"]}],"border-color":[{border:I()}],"border-color-x":[{"border-x":I()}],"border-color-y":[{"border-y":I()}],"border-color-s":[{"border-s":I()}],"border-color-e":[{"border-e":I()}],"border-color-t":[{"border-t":I()}],"border-color-r":[{"border-r":I()}],"border-color-b":[{"border-b":I()}],"border-color-l":[{"border-l":I()}],"divide-color":[{divide:I()}],"outline-style":[{outline:[...pt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Vt,St,wt]}],"outline-w":[{outline:["",Vt,Fl,Oa]}],"outline-color":[{outline:I()}],shadow:[{shadow:["","none",p,ld,od]}],"shadow-color":[{shadow:I()}],"inset-shadow":[{"inset-shadow":["none",m,ld,od]}],"inset-shadow-color":[{"inset-shadow":I()}],"ring-w":[{ring:ot()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:I()}],"ring-offset-w":[{"ring-offset":[Vt,Oa]}],"ring-offset-color":[{"ring-offset":I()}],"inset-ring-w":[{"inset-ring":ot()}],"inset-ring-color":[{"inset-ring":I()}],"text-shadow":[{"text-shadow":["none",y,ld,od]}],"text-shadow-color":[{"text-shadow":I()}],opacity:[{opacity:[Vt,St,wt]}],"mix-blend":[{"mix-blend":[...st(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":st()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Vt]}],"mask-image-linear-from-pos":[{"mask-linear-from":nt()}],"mask-image-linear-to-pos":[{"mask-linear-to":nt()}],"mask-image-linear-from-color":[{"mask-linear-from":I()}],"mask-image-linear-to-color":[{"mask-linear-to":I()}],"mask-image-t-from-pos":[{"mask-t-from":nt()}],"mask-image-t-to-pos":[{"mask-t-to":nt()}],"mask-image-t-from-color":[{"mask-t-from":I()}],"mask-image-t-to-color":[{"mask-t-to":I()}],"mask-image-r-from-pos":[{"mask-r-from":nt()}],"mask-image-r-to-pos":[{"mask-r-to":nt()}],"mask-image-r-from-color":[{"mask-r-from":I()}],"mask-image-r-to-color":[{"mask-r-to":I()}],"mask-image-b-from-pos":[{"mask-b-from":nt()}],"mask-image-b-to-pos":[{"mask-b-to":nt()}],"mask-image-b-from-color":[{"mask-b-from":I()}],"mask-image-b-to-color":[{"mask-b-to":I()}],"mask-image-l-from-pos":[{"mask-l-from":nt()}],"mask-image-l-to-pos":[{"mask-l-to":nt()}],"mask-image-l-from-color":[{"mask-l-from":I()}],"mask-image-l-to-color":[{"mask-l-to":I()}],"mask-image-x-from-pos":[{"mask-x-from":nt()}],"mask-image-x-to-pos":[{"mask-x-to":nt()}],"mask-image-x-from-color":[{"mask-x-from":I()}],"mask-image-x-to-color":[{"mask-x-to":I()}],"mask-image-y-from-pos":[{"mask-y-from":nt()}],"mask-image-y-to-pos":[{"mask-y-to":nt()}],"mask-image-y-from-color":[{"mask-y-from":I()}],"mask-image-y-to-color":[{"mask-y-to":I()}],"mask-image-radial":[{"mask-radial":[St,wt]}],"mask-image-radial-from-pos":[{"mask-radial-from":nt()}],"mask-image-radial-to-pos":[{"mask-radial-to":nt()}],"mask-image-radial-from-color":[{"mask-radial-from":I()}],"mask-image-radial-to-color":[{"mask-radial-to":I()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[Vt]}],"mask-image-conic-from-pos":[{"mask-conic-from":nt()}],"mask-image-conic-to-pos":[{"mask-conic-to":nt()}],"mask-image-conic-from-color":[{"mask-conic-from":I()}],"mask-image-conic-to-color":[{"mask-conic-to":I()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:K()}],"mask-repeat":[{mask:ht()}],"mask-size":[{mask:B()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",St,wt]}],filter:[{filter:["","none",St,wt]}],blur:[{blur:Et()}],brightness:[{brightness:[Vt,St,wt]}],contrast:[{contrast:[Vt,St,wt]}],"drop-shadow":[{"drop-shadow":["","none",x,ld,od]}],"drop-shadow-color":[{"drop-shadow":I()}],grayscale:[{grayscale:["",Vt,St,wt]}],"hue-rotate":[{"hue-rotate":[Vt,St,wt]}],invert:[{invert:["",Vt,St,wt]}],saturate:[{saturate:[Vt,St,wt]}],sepia:[{sepia:["",Vt,St,wt]}],"backdrop-filter":[{"backdrop-filter":["","none",St,wt]}],"backdrop-blur":[{"backdrop-blur":Et()}],"backdrop-brightness":[{"backdrop-brightness":[Vt,St,wt]}],"backdrop-contrast":[{"backdrop-contrast":[Vt,St,wt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Vt,St,wt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Vt,St,wt]}],"backdrop-invert":[{"backdrop-invert":["",Vt,St,wt]}],"backdrop-opacity":[{"backdrop-opacity":[Vt,St,wt]}],"backdrop-saturate":[{"backdrop-saturate":[Vt,St,wt]}],"backdrop-sepia":[{"backdrop-sepia":["",Vt,St,wt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":L()}],"border-spacing-x":[{"border-spacing-x":L()}],"border-spacing-y":[{"border-spacing-y":L()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",St,wt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Vt,"initial",St,wt]}],ease:[{ease:["linear","initial",C,St,wt]}],delay:[{delay:[Vt,St,wt]}],animate:[{animate:["none",T,St,wt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,St,wt]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:bt()}],"rotate-x":[{"rotate-x":bt()}],"rotate-y":[{"rotate-y":bt()}],"rotate-z":[{"rotate-z":bt()}],scale:[{scale:Nt()}],"scale-x":[{"scale-x":Nt()}],"scale-y":[{"scale-y":Nt()}],"scale-z":[{"scale-z":Nt()}],"scale-3d":["scale-3d"],skew:[{skew:q()}],"skew-x":[{"skew-x":q()}],"skew-y":[{"skew-y":q()}],transform:[{transform:[St,wt,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:lt()}],"translate-x":[{"translate-x":lt()}],"translate-y":[{"translate-y":lt()}],"translate-z":[{"translate-z":lt()}],"translate-none":["translate-none"],accent:[{accent:I()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:I()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",St,wt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":L()}],"scroll-mx":[{"scroll-mx":L()}],"scroll-my":[{"scroll-my":L()}],"scroll-ms":[{"scroll-ms":L()}],"scroll-me":[{"scroll-me":L()}],"scroll-mt":[{"scroll-mt":L()}],"scroll-mr":[{"scroll-mr":L()}],"scroll-mb":[{"scroll-mb":L()}],"scroll-ml":[{"scroll-ml":L()}],"scroll-p":[{"scroll-p":L()}],"scroll-px":[{"scroll-px":L()}],"scroll-py":[{"scroll-py":L()}],"scroll-ps":[{"scroll-ps":L()}],"scroll-pe":[{"scroll-pe":L()}],"scroll-pt":[{"scroll-pt":L()}],"scroll-pr":[{"scroll-pr":L()}],"scroll-pb":[{"scroll-pb":L()}],"scroll-pl":[{"scroll-pl":L()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",St,wt]}],fill:[{fill:["none",...I()]}],"stroke-w":[{stroke:[Vt,Fl,Oa,km]}],stroke:[{stroke:["none",...I()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},OI=fI(LI);function Qt(...s){return OI(Lo(s))}function PI({currentPage:s,onNavigate:t}){const{t:e}=_s(),n=[{id:"dashboard",label:e("navigation.dashboard"),icon:l3},{id:"documents",label:e("navigation.documents"),icon:Gn}];return v.jsxs("aside",{className:"w-64 border-r bg-white flex flex-col shrink-0",children:[v.jsxs("div",{className:"h-14 px-4 border-b flex items-center gap-3",children:[v.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:v.jsx(Gn,{className:"w-4 h-4 text-primary-foreground"})}),v.jsxs("div",{children:[v.jsx("h1",{className:"font-bold text-base leading-tight",children:e("app.name")}),v.jsx("p",{className:"text-xs text-muted-foreground leading-tight",children:e("app.subtitle")})]})]}),v.jsxs("nav",{className:"flex-1 p-3 space-y-1",children:[n.map(a=>v.jsxs("button",{onClick:()=>t(a.id),className:Qt("w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors",s===a.id?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"),children:[v.jsx(a.icon,{className:"w-5 h-5"}),a.label]},a.id)),v.jsxs("div",{className:"pt-4 mt-4 border-t",children:[v.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted transition-colors",children:[v.jsx(N3,{className:"w-5 h-5"}),e("common.settings")]}),v.jsxs("button",{className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted transition-colors",children:[v.jsx(GF,{className:"w-5 h-5"}),e("common.help")]})]})]})]})}class jI{baseURL;constructor(){this.baseURL=window.location.origin}async call(t,e){const n=await fetch(`${this.baseURL}/api/method/${t}`,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":this.getCSRFToken()},body:JSON.stringify(e||{})});if(!n.ok)throw new Error(`API call failed: ${n.statusText}`);return(await n.json()).message}async getDocuments(t){return this.call("edo.edo.doctype.edo_document.edo_document.get_portal_documents",t||{})}async getDocument(t){const e=await fetch(`${this.baseURL}/api/method/edo.edo.doctype.edo_document.edo_document.get_document`,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":this.getCSRFToken()},body:JSON.stringify({name:t})});if(!e.ok)throw new Error(`Failed to fetch document: ${e.statusText}`);return(await e.json()).message}async getCurrentUser(){const t=await fetch(`${this.baseURL}/api/method/frappe.auth.get_logged_user`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!t.ok)throw new Error(`Failed to get user: ${t.statusText}`);const n=(await t.json()).message,a=await fetch(`${this.baseURL}/api/resource/User/${n}`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!a.ok)return{name:n,full_name:n,email:n};const o=await a.json();let l=[];try{l=await this.call("edo.edo.doctype.edo_document.edo_document.get_user_roles")}catch(c){console.warn("Failed to get user roles:",c)}return{name:o.data.name,full_name:o.data.full_name||o.data.name,email:o.data.email,user_image:o.data.user_image,roles:l}}async logout(){await fetch(`${this.baseURL}/api/method/logout`,{method:"POST",headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}}),window.location.href="/login"}async getComments(t,e){return this.call("edo.edo.doctype.edo_document.edo_document.get_comments",{doctype:t,docname:e})}async addComment(t,e,n){return this.call("edo.edo.doctype.edo_document.edo_document.add_comment",{doctype:t,docname:e,content:n})}async deleteComment(t){return this.call("edo.edo.doctype.edo_document.edo_document.delete_comment",{comment_name:t})}async getCorrespondents(){const t=await fetch(`${this.baseURL}/api/resource/EDO Correspondent?fields=["name","correspondent_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!t.ok)throw new Error("Failed to fetch correspondents");return(await t.json()).data}async getDocumentTypes(){const t=await fetch(`${this.baseURL}/api/resource/EDO Document Type?fields=["name","document_type_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!t.ok)throw new Error("Failed to fetch document types");return(await t.json()).data}async getPriorities(){const t=await fetch(`${this.baseURL}/api/resource/EDO Priority?fields=["name","priority_name","weight"]&limit_page_length=999&order_by=weight desc`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!t.ok)throw new Error("Failed to fetch priorities");return(await t.json()).data}async getStatuses(){const t=await fetch(`${this.baseURL}/api/resource/EDO Status?fields=["name","status_name","color"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!t.ok)throw new Error("Failed to fetch statuses");return(await t.json()).data}async getClassifications(){const t=await fetch(`${this.baseURL}/api/resource/EDO Classification?fields=["name","classification_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!t.ok)throw new Error("Failed to fetch classifications");return(await t.json()).data}async getDeliveryMethods(){const t=await fetch(`${this.baseURL}/api/resource/EDO Delivery Method?fields=["name","delivery_method_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!t.ok)throw new Error("Failed to fetch delivery methods");return(await t.json()).data}async getUsers(){return this.call("edo.edo.doctype.edo_document.edo_document.get_users_list")}async createDocument(t){return this.call("edo.edo.doctype.edo_document.edo_document.create_document",t)}async updateDocument(t,e){return this.call("edo.edo.doctype.edo_document.edo_document.update_document",{name:t,...e})}async canEditDocument(){return this.call("edo.edo.doctype.edo_document.edo_document.can_edit_document")}async directorApproveDocument(t,e){return this.call("edo.edo.doctype.edo_document.edo_document.director_approve_document",{name:t,comment:e})}async directorRejectDocument(t,e){return this.call("edo.edo.doctype.edo_document.edo_document.director_reject_document",{name:t,comment:e})}async executorSignDocument(t,e){return this.call("edo.edo.doctype.edo_document.edo_document.executor_sign_document",{name:t,comment:e})}async canDirectorApprove(){return this.call("edo.edo.doctype.edo_document.edo_document.can_director_approve")}async canExecutorSign(t){return this.call("edo.edo.doctype.edo_document.edo_document.can_executor_sign",{name:t})}async uploadFile(t){const e=new FormData;e.append("file",t),e.append("is_private","0");const n=await fetch(`${this.baseURL}/api/method/upload_file`,{method:"POST",headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()},body:e});if(!n.ok)throw new Error("Failed to upload file");return(await n.json()).message.file_url}async getStamps(){return this.call("edo.edo.doctype.edo_document.edo_document.get_stamps")}async getStampPreview(t,e){return this.call("edo.edo.doctype.edo_stamp.edo_stamp.get_stamp_preview",{stamp_name:t,document_name:e})}async getPdfInfo(t){return this.call("edo.edo.doctype.edo_document.edo_document.get_pdf_info",{document_name:t})}async applyStamps(t,e){return this.call("edo.edo.doctype.edo_document.edo_document.apply_stamps_to_pdf",{document_name:t,stamps:JSON.stringify(e)})}getCSRFToken(){return document.cookie.split("; ").find(e=>e.startsWith("csrf_token="))?.split("=")[1]||""}}const zt=new jI,C1=[{code:"ru",label:""},{code:"en",label:"English"},{code:"uz",label:"O'zbek"}];function BI(){const{i18n:s}=_s(),[t,e]=A.useState(!1),n=A.useRef(null),a=o=>{s.changeLanguage(o),localStorage.setItem("i18nextLng",o),e(!1)};return A.useEffect(()=>{const o=l=>{n.current&&!n.current.contains(l.target)&&e(!1)};return t&&document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[t]),v.jsxs("div",{className:"relative",ref:n,children:[v.jsxs("button",{onClick:()=>e(!t),className:"flex items-center gap-2 px-3 py-2 text-sm text-muted-foreground hover:text-foreground hover:bg-muted rounded-lg transition-colors",children:[v.jsx(n3,{className:"w-4 h-4"}),v.jsx("span",{className:"hidden md:inline",children:C1.find(o=>o.code===s.language)?.label||""})]}),t&&v.jsx("div",{className:"absolute right-0 top-full mt-1 w-40 bg-white border rounded-lg shadow-lg z-20 py-1",children:C1.map(o=>v.jsx("button",{onClick:()=>a(o.code),className:Qt("w-full text-left px-4 py-2 text-sm hover:bg-muted transition-colors",s.language===o.code&&"bg-primary/10 text-primary font-medium"),children:o.label},o.code))})]})}function fT({title:s,subtitle:t}){const{t:e}=_s(),[n,a]=A.useState(null),[o,l]=A.useState(!1);A.useEffect(()=>{c()},[]);const c=async()=>{try{const p=await zt.getCurrentUser();a(p)}catch(p){console.error("Failed to load user:",p)}},d=async()=>{try{await zt.logout()}catch(p){console.error("Failed to logout:",p),window.location.href="/login"}},h=p=>p.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2);return v.jsxs("header",{className:"h-14 border-b bg-white flex items-center justify-between px-6 shrink-0",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-lg font-semibold",children:s}),t&&v.jsx("p",{className:"text-xs text-muted-foreground",children:t})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("button",{className:"p-2 text-muted-foreground hover:text-foreground hover:bg-muted rounded-lg transition-colors",children:v.jsx(xh,{className:"w-5 h-5"})}),v.jsxs("button",{className:"p-2 text-muted-foreground hover:text-foreground hover:bg-muted rounded-lg transition-colors relative",children:[v.jsx(CF,{className:"w-5 h-5"}),v.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full"})]}),v.jsx(BI,{}),v.jsx("div",{className:"w-px h-8 bg-border mx-2"}),v.jsxs("div",{className:"relative",children:[v.jsxs("button",{onClick:()=>l(!o),className:"flex items-center gap-2 hover:bg-muted rounded-lg px-2 py-1.5 transition-colors",children:[n?.user_image?v.jsx("img",{src:n.user_image,alt:n.full_name,className:"w-8 h-8 rounded-full object-cover"}):v.jsx("div",{className:"w-8 h-8 bg-primary/10 text-primary rounded-full flex items-center justify-center text-sm font-medium",children:n?h(n.full_name):v.jsx(Rg,{className:"w-4 h-4"})}),v.jsx("span",{className:"text-sm font-medium hidden md:block max-w-32 truncate",children:n?.full_name||e("common.loading")}),v.jsx(bh,{className:"w-4 h-4 text-muted-foreground"})]}),o&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>l(!1)}),v.jsxs("div",{className:"absolute right-0 top-full mt-1 w-56 bg-white border rounded-lg shadow-lg z-20 py-1",children:[v.jsxs("div",{className:"px-4 py-2 border-b",children:[v.jsx("p",{className:"text-sm font-medium truncate",children:n?.full_name}),v.jsx("p",{className:"text-xs text-muted-foreground truncate",children:n?.email}),n?.roles&&n.roles.length>0&&v.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:n.roles.filter(p=>p.startsWith("EDO")).map(p=>v.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${p==="EDO Admin"?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:p.replace("EDO ","")},p))})]}),v.jsxs("button",{onClick:d,className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[v.jsx(g3,{className:"w-4 h-4"}),e("common.logout")]})]})]})]})]})]})}const qa=A.forwardRef(({className:s,...t},e)=>v.jsx("div",{ref:e,className:Qt("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));qa.displayName="Card";const lo=A.forwardRef(({className:s,...t},e)=>v.jsx("div",{ref:e,className:Qt("flex flex-col space-y-1.5 p-6",s),...t}));lo.displayName="CardHeader";const co=A.forwardRef(({className:s,...t},e)=>v.jsx("h3",{ref:e,className:Qt("text-2xl font-semibold leading-none tracking-tight",s),...t}));co.displayName="CardTitle";const FI=A.forwardRef(({className:s,...t},e)=>v.jsx("p",{ref:e,className:Qt("text-sm text-muted-foreground",s),...t}));FI.displayName="CardDescription";const Xa=A.forwardRef(({className:s,...t},e)=>v.jsx("div",{ref:e,className:Qt("p-6 pt-0",s),...t}));Xa.displayName="CardContent";const II=A.forwardRef(({className:s,...t},e)=>v.jsx("div",{ref:e,className:Qt("flex items-center p-6 pt-0",s),...t}));II.displayName="CardFooter";function zI({documents:s,onNavigateToDocuments:t}){const{t:e}=_s(),n=s.length,a=s.filter(p=>p.status===e("documents.status.pending")||p.status===" ").length,o=s.filter(p=>p.status===e("documents.status.signed")||p.status==="").length,l=s.filter(p=>p.status===e("documents.status.archived")||p.status==="").length,c=[{title:e("dashboard.stats.total"),value:n,icon:Gn,color:"text-blue-600",bgColor:"bg-blue-50"},{title:e("dashboard.stats.pending"),value:a,icon:Qd,color:"text-orange-600",bgColor:"bg-orange-50"},{title:e("dashboard.stats.signed"),value:o,icon:oo,color:"text-green-600",bgColor:"bg-green-50"},{title:e("dashboard.stats.archived"),value:l,icon:AF,color:"text-gray-600",bgColor:"bg-gray-50"}],d=[...s].sort((p,m)=>{const y=p.creation?new Date(p.creation).getTime():0;return(m.creation?new Date(m.creation).getTime():0)-y}).slice(0,5),h=s.filter(p=>p.status===e("documents.status.pending")||p.status===" ").slice(0,5);return v.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:v.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-bold",children:e("dashboard.title")}),v.jsx("p",{className:"text-muted-foreground",children:e("dashboard.subtitle")})]}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:c.map(p=>v.jsx(qa,{children:v.jsx(Xa,{className:"p-4",children:v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:`p-3 rounded-lg ${p.bgColor}`,children:v.jsx(p.icon,{className:`w-6 h-6 ${p.color}`})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-2xl font-bold",children:p.value}),v.jsx("p",{className:"text-sm text-muted-foreground",children:p.title})]})]})})},p.title))}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[v.jsxs(qa,{children:[v.jsx(lo,{className:"pb-3",children:v.jsxs(co,{className:"text-lg flex items-center gap-2",children:[v.jsx(Qd,{className:"w-5 h-5 text-orange-500"}),e("dashboard.pendingSignatures")]})}),v.jsx(Xa,{children:h.length===0?v.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:e("dashboard.noPending")}):v.jsx("div",{className:"space-y-3",children:h.map(p=>v.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg cursor-pointer hover:bg-orange-100 transition-colors",onClick:t,children:[v.jsxs("div",{className:"min-w-0 flex-1",children:[v.jsx("p",{className:"font-medium text-sm truncate",children:p.title}),v.jsx("p",{className:"text-xs text-muted-foreground",children:p.document_type})]}),v.jsx("div",{className:"text-xs text-orange-600 shrink-0 ml-2",children:e("dashboard.waiting")})]},p.name))})})]}),v.jsxs(qa,{children:[v.jsx(lo,{className:"pb-3",children:v.jsxs(co,{className:"text-lg flex items-center gap-2",children:[v.jsx(U3,{className:"w-5 h-5 text-blue-500"}),e("dashboard.recentDocuments")]})}),v.jsx(Xa,{children:d.length===0?v.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:e("dashboard.noDocuments")}):v.jsx("div",{className:"space-y-3",children:d.map(p=>v.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg cursor-pointer hover:bg-muted transition-colors",onClick:t,children:[v.jsxs("div",{className:"min-w-0 flex-1",children:[v.jsx("p",{className:"font-medium text-sm truncate",children:p.title}),v.jsx("p",{className:"text-xs text-muted-foreground",children:p.creation&&new Date(p.creation).toLocaleDateString("ru-RU")})]}),v.jsx("div",{className:`text-xs shrink-0 ml-2 px-2 py-1 rounded ${p.status===e("documents.status.signed")||p.status===""?"bg-green-100 text-green-700":p.status===e("documents.status.pending")||p.status===" "?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-700"}`,children:p.status})]},p.name))})})]})]})]})})}const T1=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,_1=Lo,Iy=(s,t)=>e=>{var n;if(t?.variants==null)return _1(s,e?.class,e?.className);const{variants:a,defaultVariants:o}=t,l=Object.keys(a).map(h=>{const p=e?.[h],m=o?.[h];if(p===null)return null;const y=T1(p)||T1(m);return a[h][y]}),c=e&&Object.entries(e).reduce((h,p)=>{let[m,y]=p;return y===void 0||(h[m]=y),h},{}),d=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((h,p)=>{let{class:m,className:y,...x}=p;return Object.entries(x).every(S=>{let[w,E]=S;return Array.isArray(E)?E.includes({...o,...c}[w]):{...o,...c}[w]===E})?[...h,m,y]:h},[]);return _1(s,l,d,e?.class,e?.className)},UI=Iy("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function R1({className:s,variant:t,...e}){return v.jsx("div",{className:Qt(UI({variant:t}),s),...e})}function Il({className:s,...t}){return v.jsx("div",{className:Qt("animate-pulse rounded-md bg-muted",s),...t})}const VI=Iy("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Jt=A.forwardRef(({className:s,variant:t,size:e,asChild:n=!1,...a},o)=>v.jsx("button",{className:Qt(VI({variant:t,size:e,className:s})),ref:o,...a}));Jt.displayName="Button";function N1(s,[t,e]){return Math.min(e,Math.max(t,s))}function ye(s,t,{checkForDefaultPrevented:e=!0}={}){return function(a){if(s?.(a),e===!1||!a.defaultPrevented)return t?.(a)}}function HI(s,t){const e=A.createContext(t),n=o=>{const{children:l,...c}=o,d=A.useMemo(()=>c,Object.values(c));return v.jsx(e.Provider,{value:d,children:l})};n.displayName=s+"Provider";function a(o){const l=A.useContext(e);if(l)return l;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${s}\``)}return[n,a]}function wh(s,t=[]){let e=[];function n(o,l){const c=A.createContext(l),d=e.length;e=[...e,l];const h=m=>{const{scope:y,children:x,...S}=m,w=y?.[s]?.[d]||c,E=A.useMemo(()=>S,Object.values(S));return v.jsx(w.Provider,{value:E,children:x})};h.displayName=o+"Provider";function p(m,y){const x=y?.[s]?.[d]||c,S=A.useContext(x);if(S)return S;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[h,p]}const a=()=>{const o=e.map(l=>A.createContext(l));return function(c){const d=c?.[s]||o;return A.useMemo(()=>({[`__scope${s}`]:{...c,[s]:d}}),[c,d])}};return a.scopeName=s,[n,$I(a,...t)]}function $I(...s){const t=s[0];if(s.length===1)return t;const e=()=>{const n=s.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const l=n.reduce((c,{useScope:d,scopeName:h})=>{const m=d(o)[`__scope${h}`];return{...c,...m}},{});return A.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return e.scopeName=t.scopeName,e}function M1(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function zy(...s){return t=>{let e=!1;const n=s.map(a=>{const o=M1(a,t);return!e&&typeof o=="function"&&(e=!0),o});if(e)return()=>{for(let a=0;a<n.length;a++){const o=n[a];typeof o=="function"?o():M1(s[a],null)}}}}function Pe(...s){return A.useCallback(zy(...s),s)}function hc(s){const t=GI(s),e=A.forwardRef((n,a)=>{const{children:o,...l}=n,c=A.Children.toArray(o),d=c.find(XI);if(d){const h=d.props.children,p=c.map(m=>m===d?A.Children.count(h)>1?A.Children.only(null):A.isValidElement(h)?h.props.children:null:m);return v.jsx(t,{...l,ref:a,children:A.isValidElement(h)?A.cloneElement(h,void 0,p):null})}return v.jsx(t,{...l,ref:a,children:o})});return e.displayName=`${s}.Slot`,e}function GI(s){const t=A.forwardRef((e,n)=>{const{children:a,...o}=e;if(A.isValidElement(a)){const l=WI(a),c=YI(o,a.props);return a.type!==A.Fragment&&(c.ref=n?zy(n,l):l),A.cloneElement(a,c)}return A.Children.count(a)>1?A.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var qI=Symbol("radix.slottable");function XI(s){return A.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===qI}function YI(s,t){const e={...t};for(const n in t){const a=s[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?e[n]=(...c)=>{const d=o(...c);return a(...c),d}:a&&(e[n]=a):n==="style"?e[n]={...a,...o}:n==="className"&&(e[n]=[a,o].filter(Boolean).join(" "))}return{...s,...e}}function WI(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}function KI(s){const t=s+"CollectionProvider",[e,n]=wh(t),[a,o]=e(t,{collectionRef:{current:null},itemMap:new Map}),l=w=>{const{scope:E,children:C}=w,T=Zi.useRef(null),R=Zi.useRef(new Map).current;return v.jsx(a,{scope:E,itemMap:R,collectionRef:T,children:C})};l.displayName=t;const c=s+"CollectionSlot",d=hc(c),h=Zi.forwardRef((w,E)=>{const{scope:C,children:T}=w,R=o(c,C),N=Pe(E,R.collectionRef);return v.jsx(d,{ref:N,children:T})});h.displayName=c;const p=s+"CollectionItemSlot",m="data-radix-collection-item",y=hc(p),x=Zi.forwardRef((w,E)=>{const{scope:C,children:T,...R}=w,N=Zi.useRef(null),M=Pe(E,N),O=o(p,C);return Zi.useEffect(()=>(O.itemMap.set(N,{ref:N,...R}),()=>{O.itemMap.delete(N)})),v.jsx(y,{[m]:"",ref:M,children:T})});x.displayName=p;function S(w){const E=o(s+"CollectionConsumer",w);return Zi.useCallback(()=>{const T=E.collectionRef.current;if(!T)return[];const R=Array.from(T.querySelectorAll(`[${m}]`));return Array.from(E.itemMap.values()).sort((O,k)=>R.indexOf(O.ref.current)-R.indexOf(k.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:l,Slot:h,ItemSlot:x},S,n]}var QI=A.createContext(void 0);function ZI(s){const t=A.useContext(QI);return s||t||"ltr"}var JI=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],he=JI.reduce((s,t)=>{const e=hc(`Primitive.${t}`),n=A.forwardRef((a,o)=>{const{asChild:l,...c}=a,d=l?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(d,{...c,ref:o})});return n.displayName=`Primitive.${t}`,{...s,[t]:n}},{});function t5(s,t){s&&Ec.flushSync(()=>s.dispatchEvent(t))}function Wa(s){const t=A.useRef(s);return A.useEffect(()=>{t.current=s}),A.useMemo(()=>(...e)=>t.current?.(...e),[])}function e5(s,t=globalThis?.document){const e=Wa(s);A.useEffect(()=>{const n=a=>{a.key==="Escape"&&e(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[e,t])}var n5="DismissableLayer",Mg="dismissableLayer.update",s5="dismissableLayer.pointerDownOutside",i5="dismissableLayer.focusOutside",D1,pT=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Uy=A.forwardRef((s,t)=>{const{disableOutsidePointerEvents:e=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=s,h=A.useContext(pT),[p,m]=A.useState(null),y=p?.ownerDocument??globalThis?.document,[,x]=A.useState({}),S=Pe(t,k=>m(k)),w=Array.from(h.layers),[E]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),C=w.indexOf(E),T=p?w.indexOf(p):-1,R=h.layersWithOutsidePointerEventsDisabled.size>0,N=T>=C,M=o5(k=>{const L=k.target,j=[...h.branches].some(U=>U.contains(L));!N||j||(a?.(k),l?.(k),k.defaultPrevented||c?.())},y),O=l5(k=>{const L=k.target;[...h.branches].some(U=>U.contains(L))||(o?.(k),l?.(k),k.defaultPrevented||c?.())},y);return e5(k=>{T===h.layers.size-1&&(n?.(k),!k.defaultPrevented&&c&&(k.preventDefault(),c()))},y),A.useEffect(()=>{if(p)return e&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(D1=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(p)),h.layers.add(p),k1(),()=>{e&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=D1)}},[p,y,e,h]),A.useEffect(()=>()=>{p&&(h.layers.delete(p),h.layersWithOutsidePointerEventsDisabled.delete(p),k1())},[p,h]),A.useEffect(()=>{const k=()=>x({});return document.addEventListener(Mg,k),()=>document.removeEventListener(Mg,k)},[]),v.jsx(he.div,{...d,ref:S,style:{pointerEvents:R?N?"auto":"none":void 0,...s.style},onFocusCapture:ye(s.onFocusCapture,O.onFocusCapture),onBlurCapture:ye(s.onBlurCapture,O.onBlurCapture),onPointerDownCapture:ye(s.onPointerDownCapture,M.onPointerDownCapture)})});Uy.displayName=n5;var a5="DismissableLayerBranch",r5=A.forwardRef((s,t)=>{const e=A.useContext(pT),n=A.useRef(null),a=Pe(t,n);return A.useEffect(()=>{const o=n.current;if(o)return e.branches.add(o),()=>{e.branches.delete(o)}},[e.branches]),v.jsx(he.div,{...s,ref:a})});r5.displayName=a5;function o5(s,t=globalThis?.document){const e=Wa(s),n=A.useRef(!1),a=A.useRef(()=>{});return A.useEffect(()=>{const o=c=>{if(c.target&&!n.current){let d=function(){mT(s5,e,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}else t.removeEventListener("click",a.current);n.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",o),t.removeEventListener("click",a.current)}},[t,e]),{onPointerDownCapture:()=>n.current=!0}}function l5(s,t=globalThis?.document){const e=Wa(s),n=A.useRef(!1);return A.useEffect(()=>{const a=o=>{o.target&&!n.current&&mT(i5,e,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,e]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function k1(){const s=new CustomEvent(Mg);document.dispatchEvent(s)}function mT(s,t,e,{discrete:n}){const a=e.originalEvent.target,o=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:e});t&&a.addEventListener(s,t,{once:!0}),n?t5(a,o):a.dispatchEvent(o)}var Lm=0;function gT(){A.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??L1()),document.body.insertAdjacentElement("beforeend",s[1]??L1()),Lm++,()=>{Lm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Lm--}},[])}function L1(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var Om="focusScope.autoFocusOnMount",Pm="focusScope.autoFocusOnUnmount",O1={bubbles:!1,cancelable:!0},c5="FocusScope",Vy=A.forwardRef((s,t)=>{const{loop:e=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...l}=s,[c,d]=A.useState(null),h=Wa(a),p=Wa(o),m=A.useRef(null),y=Pe(t,w=>d(w)),x=A.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;A.useEffect(()=>{if(n){let w=function(R){if(x.paused||!c)return;const N=R.target;c.contains(N)?m.current=N:ta(m.current,{select:!0})},E=function(R){if(x.paused||!c)return;const N=R.relatedTarget;N!==null&&(c.contains(N)||ta(m.current,{select:!0}))},C=function(R){if(document.activeElement===document.body)for(const M of R)M.removedNodes.length>0&&ta(c)};document.addEventListener("focusin",w),document.addEventListener("focusout",E);const T=new MutationObserver(C);return c&&T.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",E),T.disconnect()}}},[n,c,x.paused]),A.useEffect(()=>{if(c){j1.add(x);const w=document.activeElement;if(!c.contains(w)){const C=new CustomEvent(Om,O1);c.addEventListener(Om,h),c.dispatchEvent(C),C.defaultPrevented||(u5(m5(yT(c)),{select:!0}),document.activeElement===w&&ta(c))}return()=>{c.removeEventListener(Om,h),setTimeout(()=>{const C=new CustomEvent(Pm,O1);c.addEventListener(Pm,p),c.dispatchEvent(C),C.defaultPrevented||ta(w??document.body,{select:!0}),c.removeEventListener(Pm,p),j1.remove(x)},0)}}},[c,h,p,x]);const S=A.useCallback(w=>{if(!e&&!n||x.paused)return;const E=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,C=document.activeElement;if(E&&C){const T=w.currentTarget,[R,N]=d5(T);R&&N?!w.shiftKey&&C===N?(w.preventDefault(),e&&ta(R,{select:!0})):w.shiftKey&&C===R&&(w.preventDefault(),e&&ta(N,{select:!0})):C===T&&w.preventDefault()}},[e,n,x.paused]);return v.jsx(he.div,{tabIndex:-1,...l,ref:y,onKeyDown:S})});Vy.displayName=c5;function u5(s,{select:t=!1}={}){const e=document.activeElement;for(const n of s)if(ta(n,{select:t}),document.activeElement!==e)return}function d5(s){const t=yT(s),e=P1(t,s),n=P1(t.reverse(),s);return[e,n]}function yT(s){const t=[],e=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)t.push(e.currentNode);return t}function P1(s,t){for(const e of s)if(!h5(e,{upTo:t}))return e}function h5(s,{upTo:t}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(t!==void 0&&s===t)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function f5(s){return s instanceof HTMLInputElement&&"select"in s}function ta(s,{select:t=!1}={}){if(s&&s.focus){const e=document.activeElement;s.focus({preventScroll:!0}),s!==e&&f5(s)&&t&&s.select()}}var j1=p5();function p5(){let s=[];return{add(t){const e=s[0];t!==e&&e?.pause(),s=B1(s,t),s.unshift(t)},remove(t){s=B1(s,t),s[0]?.resume()}}}function B1(s,t){const e=[...s],n=e.indexOf(t);return n!==-1&&e.splice(n,1),e}function m5(s){return s.filter(t=>t.tagName!=="A")}var un=globalThis?.document?A.useLayoutEffect:()=>{},g5=ty[" useId ".trim().toString()]||(()=>{}),y5=0;function uo(s){const[t,e]=A.useState(g5());return un(()=>{e(n=>n??String(y5++))},[s]),t?`radix-${t}`:""}const v5=["top","right","bottom","left"],oa=Math.min,Vn=Math.max,Jd=Math.round,cd=Math.floor,Xs=s=>({x:s,y:s}),b5={left:"right",right:"left",bottom:"top",top:"bottom"},x5={start:"end",end:"start"};function Dg(s,t,e){return Vn(s,oa(t,e))}function Si(s,t){return typeof s=="function"?s(t):s}function Ai(s){return s.split("-")[0]}function jo(s){return s.split("-")[1]}function Hy(s){return s==="x"?"y":"x"}function $y(s){return s==="y"?"height":"width"}const w5=new Set(["top","bottom"]);function Gs(s){return w5.has(Ai(s))?"y":"x"}function Gy(s){return Hy(Gs(s))}function S5(s,t,e){e===void 0&&(e=!1);const n=jo(s),a=Gy(s),o=$y(a);let l=a==="x"?n===(e?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(l=th(l)),[l,th(l)]}function A5(s){const t=th(s);return[kg(s),t,kg(t)]}function kg(s){return s.replace(/start|end/g,t=>x5[t])}const F1=["left","right"],I1=["right","left"],E5=["top","bottom"],C5=["bottom","top"];function T5(s,t,e){switch(s){case"top":case"bottom":return e?t?I1:F1:t?F1:I1;case"left":case"right":return t?E5:C5;default:return[]}}function _5(s,t,e,n){const a=jo(s);let o=T5(Ai(s),e==="start",n);return a&&(o=o.map(l=>l+"-"+a),t&&(o=o.concat(o.map(kg)))),o}function th(s){return s.replace(/left|right|bottom|top/g,t=>b5[t])}function R5(s){return{top:0,right:0,bottom:0,left:0,...s}}function vT(s){return typeof s!="number"?R5(s):{top:s,right:s,bottom:s,left:s}}function eh(s){const{x:t,y:e,width:n,height:a}=s;return{width:n,height:a,top:e,left:t,right:t+n,bottom:e+a,x:t,y:e}}function z1(s,t,e){let{reference:n,floating:a}=s;const o=Gs(t),l=Gy(t),c=$y(l),d=Ai(t),h=o==="y",p=n.x+n.width/2-a.width/2,m=n.y+n.height/2-a.height/2,y=n[c]/2-a[c]/2;let x;switch(d){case"top":x={x:p,y:n.y-a.height};break;case"bottom":x={x:p,y:n.y+n.height};break;case"right":x={x:n.x+n.width,y:m};break;case"left":x={x:n.x-a.width,y:m};break;default:x={x:n.x,y:n.y}}switch(jo(t)){case"start":x[l]-=y*(e&&h?-1:1);break;case"end":x[l]+=y*(e&&h?-1:1);break}return x}const N5=async(s,t,e)=>{const{placement:n="bottom",strategy:a="absolute",middleware:o=[],platform:l}=e,c=o.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(t));let h=await l.getElementRects({reference:s,floating:t,strategy:a}),{x:p,y:m}=z1(h,n,d),y=n,x={},S=0;for(let w=0;w<c.length;w++){const{name:E,fn:C}=c[w],{x:T,y:R,data:N,reset:M}=await C({x:p,y:m,initialPlacement:n,placement:y,strategy:a,middlewareData:x,rects:h,platform:l,elements:{reference:s,floating:t}});p=T??p,m=R??m,x={...x,[E]:{...x[E],...N}},M&&S<=50&&(S++,typeof M=="object"&&(M.placement&&(y=M.placement),M.rects&&(h=M.rects===!0?await l.getElementRects({reference:s,floating:t,strategy:a}):M.rects),{x:p,y:m}=z1(h,y,d)),w=-1)}return{x:p,y:m,placement:y,strategy:a,middlewareData:x}};async function fc(s,t){var e;t===void 0&&(t={});const{x:n,y:a,platform:o,rects:l,elements:c,strategy:d}=s,{boundary:h="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:y=!1,padding:x=0}=Si(t,s),S=vT(x),E=c[y?m==="floating"?"reference":"floating":m],C=eh(await o.getClippingRect({element:(e=await(o.isElement==null?void 0:o.isElement(E)))==null||e?E:E.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:h,rootBoundary:p,strategy:d})),T=m==="floating"?{x:n,y:a,width:l.floating.width,height:l.floating.height}:l.reference,R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),N=await(o.isElement==null?void 0:o.isElement(R))?await(o.getScale==null?void 0:o.getScale(R))||{x:1,y:1}:{x:1,y:1},M=eh(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:T,offsetParent:R,strategy:d}):T);return{top:(C.top-M.top+S.top)/N.y,bottom:(M.bottom-C.bottom+S.bottom)/N.y,left:(C.left-M.left+S.left)/N.x,right:(M.right-C.right+S.right)/N.x}}const M5=s=>({name:"arrow",options:s,async fn(t){const{x:e,y:n,placement:a,rects:o,platform:l,elements:c,middlewareData:d}=t,{element:h,padding:p=0}=Si(s,t)||{};if(h==null)return{};const m=vT(p),y={x:e,y:n},x=Gy(a),S=$y(x),w=await l.getDimensions(h),E=x==="y",C=E?"top":"left",T=E?"bottom":"right",R=E?"clientHeight":"clientWidth",N=o.reference[S]+o.reference[x]-y[x]-o.floating[S],M=y[x]-o.reference[x],O=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let k=O?O[R]:0;(!k||!await(l.isElement==null?void 0:l.isElement(O)))&&(k=c.floating[R]||o.floating[S]);const L=N/2-M/2,j=k/2-w[S]/2-1,U=oa(m[C],j),H=oa(m[T],j),$=U,Z=k-w[S]-H,et=k/2-w[S]/2+L,ct=Dg($,et,Z),P=!d.arrow&&jo(a)!=null&&et!==ct&&o.reference[S]/2-(et<$?U:H)-w[S]/2<0,z=P?et<$?et-$:et-Z:0;return{[x]:y[x]+z,data:{[x]:ct,centerOffset:et-ct-z,...P&&{alignmentOffset:z}},reset:P}}}),D5=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(t){var e,n;const{placement:a,middlewareData:o,rects:l,initialPlacement:c,platform:d,elements:h}=t,{mainAxis:p=!0,crossAxis:m=!0,fallbackPlacements:y,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:w=!0,...E}=Si(s,t);if((e=o.arrow)!=null&&e.alignmentOffset)return{};const C=Ai(a),T=Gs(c),R=Ai(c)===c,N=await(d.isRTL==null?void 0:d.isRTL(h.floating)),M=y||(R||!w?[th(c)]:A5(c)),O=S!=="none";!y&&O&&M.push(..._5(c,w,S,N));const k=[c,...M],L=await fc(t,E),j=[];let U=((n=o.flip)==null?void 0:n.overflows)||[];if(p&&j.push(L[C]),m){const et=S5(a,l,N);j.push(L[et[0]],L[et[1]])}if(U=[...U,{placement:a,overflows:j}],!j.every(et=>et<=0)){var H,$;const et=(((H=o.flip)==null?void 0:H.index)||0)+1,ct=k[et];if(ct&&(!(m==="alignment"?T!==Gs(ct):!1)||U.every(I=>Gs(I.placement)===T?I.overflows[0]>0:!0)))return{data:{index:et,overflows:U},reset:{placement:ct}};let P=($=U.filter(z=>z.overflows[0]<=0).sort((z,I)=>z.overflows[1]-I.overflows[1])[0])==null?void 0:$.placement;if(!P)switch(x){case"bestFit":{var Z;const z=(Z=U.filter(I=>{if(O){const K=Gs(I.placement);return K===T||K==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(K=>K>0).reduce((K,ht)=>K+ht,0)]).sort((I,K)=>I[1]-K[1])[0])==null?void 0:Z[0];z&&(P=z);break}case"initialPlacement":P=c;break}if(a!==P)return{reset:{placement:P}}}return{}}}};function U1(s,t){return{top:s.top-t.height,right:s.right-t.width,bottom:s.bottom-t.height,left:s.left-t.width}}function V1(s){return v5.some(t=>s[t]>=0)}const k5=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(t){const{rects:e}=t,{strategy:n="referenceHidden",...a}=Si(s,t);switch(n){case"referenceHidden":{const o=await fc(t,{...a,elementContext:"reference"}),l=U1(o,e.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:V1(l)}}}case"escaped":{const o=await fc(t,{...a,altBoundary:!0}),l=U1(o,e.floating);return{data:{escapedOffsets:l,escaped:V1(l)}}}default:return{}}}}},bT=new Set(["left","top"]);async function L5(s,t){const{placement:e,platform:n,elements:a}=s,o=await(n.isRTL==null?void 0:n.isRTL(a.floating)),l=Ai(e),c=jo(e),d=Gs(e)==="y",h=bT.has(l)?-1:1,p=o&&d?-1:1,m=Si(t,s);let{mainAxis:y,crossAxis:x,alignmentAxis:S}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return c&&typeof S=="number"&&(x=c==="end"?S*-1:S),d?{x:x*p,y:y*h}:{x:y*h,y:x*p}}const O5=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(t){var e,n;const{x:a,y:o,placement:l,middlewareData:c}=t,d=await L5(t,s);return l===((e=c.offset)==null?void 0:e.placement)&&(n=c.arrow)!=null&&n.alignmentOffset?{}:{x:a+d.x,y:o+d.y,data:{...d,placement:l}}}}},P5=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(t){const{x:e,y:n,placement:a}=t,{mainAxis:o=!0,crossAxis:l=!1,limiter:c={fn:E=>{let{x:C,y:T}=E;return{x:C,y:T}}},...d}=Si(s,t),h={x:e,y:n},p=await fc(t,d),m=Gs(Ai(a)),y=Hy(m);let x=h[y],S=h[m];if(o){const E=y==="y"?"top":"left",C=y==="y"?"bottom":"right",T=x+p[E],R=x-p[C];x=Dg(T,x,R)}if(l){const E=m==="y"?"top":"left",C=m==="y"?"bottom":"right",T=S+p[E],R=S-p[C];S=Dg(T,S,R)}const w=c.fn({...t,[y]:x,[m]:S});return{...w,data:{x:w.x-e,y:w.y-n,enabled:{[y]:o,[m]:l}}}}}},j5=function(s){return s===void 0&&(s={}),{options:s,fn(t){const{x:e,y:n,placement:a,rects:o,middlewareData:l}=t,{offset:c=0,mainAxis:d=!0,crossAxis:h=!0}=Si(s,t),p={x:e,y:n},m=Gs(a),y=Hy(m);let x=p[y],S=p[m];const w=Si(c,t),E=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(d){const R=y==="y"?"height":"width",N=o.reference[y]-o.floating[R]+E.mainAxis,M=o.reference[y]+o.reference[R]-E.mainAxis;x<N?x=N:x>M&&(x=M)}if(h){var C,T;const R=y==="y"?"width":"height",N=bT.has(Ai(a)),M=o.reference[m]-o.floating[R]+(N&&((C=l.offset)==null?void 0:C[m])||0)+(N?0:E.crossAxis),O=o.reference[m]+o.reference[R]+(N?0:((T=l.offset)==null?void 0:T[m])||0)-(N?E.crossAxis:0);S<M?S=M:S>O&&(S=O)}return{[y]:x,[m]:S}}}},B5=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(t){var e,n;const{placement:a,rects:o,platform:l,elements:c}=t,{apply:d=()=>{},...h}=Si(s,t),p=await fc(t,h),m=Ai(a),y=jo(a),x=Gs(a)==="y",{width:S,height:w}=o.floating;let E,C;m==="top"||m==="bottom"?(E=m,C=y===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(C=m,E=y==="end"?"top":"bottom");const T=w-p.top-p.bottom,R=S-p.left-p.right,N=oa(w-p[E],T),M=oa(S-p[C],R),O=!t.middlewareData.shift;let k=N,L=M;if((e=t.middlewareData.shift)!=null&&e.enabled.x&&(L=R),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(k=T),O&&!y){const U=Vn(p.left,0),H=Vn(p.right,0),$=Vn(p.top,0),Z=Vn(p.bottom,0);x?L=S-2*(U!==0||H!==0?U+H:Vn(p.left,p.right)):k=w-2*($!==0||Z!==0?$+Z:Vn(p.top,p.bottom))}await d({...t,availableWidth:L,availableHeight:k});const j=await l.getDimensions(c.floating);return S!==j.width||w!==j.height?{reset:{rects:!0}}:{}}}};function Sh(){return typeof window<"u"}function Bo(s){return xT(s)?(s.nodeName||"").toLowerCase():"#document"}function qn(s){var t;return(s==null||(t=s.ownerDocument)==null?void 0:t.defaultView)||window}function Ks(s){var t;return(t=(xT(s)?s.ownerDocument:s.document)||window.document)==null?void 0:t.documentElement}function xT(s){return Sh()?s instanceof Node||s instanceof qn(s).Node:!1}function Es(s){return Sh()?s instanceof Element||s instanceof qn(s).Element:!1}function Ws(s){return Sh()?s instanceof HTMLElement||s instanceof qn(s).HTMLElement:!1}function H1(s){return!Sh()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof qn(s).ShadowRoot}const F5=new Set(["inline","contents"]);function Nc(s){const{overflow:t,overflowX:e,overflowY:n,display:a}=Cs(s);return/auto|scroll|overlay|hidden|clip/.test(t+n+e)&&!F5.has(a)}const I5=new Set(["table","td","th"]);function z5(s){return I5.has(Bo(s))}const U5=[":popover-open",":modal"];function Ah(s){return U5.some(t=>{try{return s.matches(t)}catch{return!1}})}const V5=["transform","translate","scale","rotate","perspective"],H5=["transform","translate","scale","rotate","perspective","filter"],$5=["paint","layout","strict","content"];function qy(s){const t=Xy(),e=Es(s)?Cs(s):s;return V5.some(n=>e[n]?e[n]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||H5.some(n=>(e.willChange||"").includes(n))||$5.some(n=>(e.contain||"").includes(n))}function G5(s){let t=la(s);for(;Ws(t)&&!Co(t);){if(qy(t))return t;if(Ah(t))return null;t=la(t)}return null}function Xy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const q5=new Set(["html","body","#document"]);function Co(s){return q5.has(Bo(s))}function Cs(s){return qn(s).getComputedStyle(s)}function Eh(s){return Es(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function la(s){if(Bo(s)==="html")return s;const t=s.assignedSlot||s.parentNode||H1(s)&&s.host||Ks(s);return H1(t)?t.host:t}function wT(s){const t=la(s);return Co(t)?s.ownerDocument?s.ownerDocument.body:s.body:Ws(t)&&Nc(t)?t:wT(t)}function pc(s,t,e){var n;t===void 0&&(t=[]),e===void 0&&(e=!0);const a=wT(s),o=a===((n=s.ownerDocument)==null?void 0:n.body),l=qn(a);if(o){const c=Lg(l);return t.concat(l,l.visualViewport||[],Nc(a)?a:[],c&&e?pc(c):[])}return t.concat(a,pc(a,[],e))}function Lg(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function ST(s){const t=Cs(s);let e=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=Ws(s),o=a?s.offsetWidth:e,l=a?s.offsetHeight:n,c=Jd(e)!==o||Jd(n)!==l;return c&&(e=o,n=l),{width:e,height:n,$:c}}function Yy(s){return Es(s)?s:s.contextElement}function ho(s){const t=Yy(s);if(!Ws(t))return Xs(1);const e=t.getBoundingClientRect(),{width:n,height:a,$:o}=ST(t);let l=(o?Jd(e.width):e.width)/n,c=(o?Jd(e.height):e.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const X5=Xs(0);function AT(s){const t=qn(s);return!Xy()||!t.visualViewport?X5:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Y5(s,t,e){return t===void 0&&(t=!1),!e||t&&e!==qn(s)?!1:t}function Ka(s,t,e,n){t===void 0&&(t=!1),e===void 0&&(e=!1);const a=s.getBoundingClientRect(),o=Yy(s);let l=Xs(1);t&&(n?Es(n)&&(l=ho(n)):l=ho(s));const c=Y5(o,e,n)?AT(o):Xs(0);let d=(a.left+c.x)/l.x,h=(a.top+c.y)/l.y,p=a.width/l.x,m=a.height/l.y;if(o){const y=qn(o),x=n&&Es(n)?qn(n):n;let S=y,w=Lg(S);for(;w&&n&&x!==S;){const E=ho(w),C=w.getBoundingClientRect(),T=Cs(w),R=C.left+(w.clientLeft+parseFloat(T.paddingLeft))*E.x,N=C.top+(w.clientTop+parseFloat(T.paddingTop))*E.y;d*=E.x,h*=E.y,p*=E.x,m*=E.y,d+=R,h+=N,S=qn(w),w=Lg(S)}}return eh({width:p,height:m,x:d,y:h})}function Ch(s,t){const e=Eh(s).scrollLeft;return t?t.left+e:Ka(Ks(s)).left+e}function ET(s,t){const e=s.getBoundingClientRect(),n=e.left+t.scrollLeft-Ch(s,e),a=e.top+t.scrollTop;return{x:n,y:a}}function W5(s){let{elements:t,rect:e,offsetParent:n,strategy:a}=s;const o=a==="fixed",l=Ks(n),c=t?Ah(t.floating):!1;if(n===l||c&&o)return e;let d={scrollLeft:0,scrollTop:0},h=Xs(1);const p=Xs(0),m=Ws(n);if((m||!m&&!o)&&((Bo(n)!=="body"||Nc(l))&&(d=Eh(n)),Ws(n))){const x=Ka(n);h=ho(n),p.x=x.x+n.clientLeft,p.y=x.y+n.clientTop}const y=l&&!m&&!o?ET(l,d):Xs(0);return{width:e.width*h.x,height:e.height*h.y,x:e.x*h.x-d.scrollLeft*h.x+p.x+y.x,y:e.y*h.y-d.scrollTop*h.y+p.y+y.y}}function K5(s){return Array.from(s.getClientRects())}function Q5(s){const t=Ks(s),e=Eh(s),n=s.ownerDocument.body,a=Vn(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=Vn(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let l=-e.scrollLeft+Ch(s);const c=-e.scrollTop;return Cs(n).direction==="rtl"&&(l+=Vn(t.clientWidth,n.clientWidth)-a),{width:a,height:o,x:l,y:c}}const $1=25;function Z5(s,t){const e=qn(s),n=Ks(s),a=e.visualViewport;let o=n.clientWidth,l=n.clientHeight,c=0,d=0;if(a){o=a.width,l=a.height;const p=Xy();(!p||p&&t==="fixed")&&(c=a.offsetLeft,d=a.offsetTop)}const h=Ch(n);if(h<=0){const p=n.ownerDocument,m=p.body,y=getComputedStyle(m),x=p.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,S=Math.abs(n.clientWidth-m.clientWidth-x);S<=$1&&(o-=S)}else h<=$1&&(o+=h);return{width:o,height:l,x:c,y:d}}const J5=new Set(["absolute","fixed"]);function t4(s,t){const e=Ka(s,!0,t==="fixed"),n=e.top+s.clientTop,a=e.left+s.clientLeft,o=Ws(s)?ho(s):Xs(1),l=s.clientWidth*o.x,c=s.clientHeight*o.y,d=a*o.x,h=n*o.y;return{width:l,height:c,x:d,y:h}}function G1(s,t,e){let n;if(t==="viewport")n=Z5(s,e);else if(t==="document")n=Q5(Ks(s));else if(Es(t))n=t4(t,e);else{const a=AT(s);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return eh(n)}function CT(s,t){const e=la(s);return e===t||!Es(e)||Co(e)?!1:Cs(e).position==="fixed"||CT(e,t)}function e4(s,t){const e=t.get(s);if(e)return e;let n=pc(s,[],!1).filter(c=>Es(c)&&Bo(c)!=="body"),a=null;const o=Cs(s).position==="fixed";let l=o?la(s):s;for(;Es(l)&&!Co(l);){const c=Cs(l),d=qy(l);!d&&c.position==="fixed"&&(a=null),(o?!d&&!a:!d&&c.position==="static"&&!!a&&J5.has(a.position)||Nc(l)&&!d&&CT(s,l))?n=n.filter(p=>p!==l):a=c,l=la(l)}return t.set(s,n),n}function n4(s){let{element:t,boundary:e,rootBoundary:n,strategy:a}=s;const l=[...e==="clippingAncestors"?Ah(t)?[]:e4(t,this._c):[].concat(e),n],c=l[0],d=l.reduce((h,p)=>{const m=G1(t,p,a);return h.top=Vn(m.top,h.top),h.right=oa(m.right,h.right),h.bottom=oa(m.bottom,h.bottom),h.left=Vn(m.left,h.left),h},G1(t,c,a));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function s4(s){const{width:t,height:e}=ST(s);return{width:t,height:e}}function i4(s,t,e){const n=Ws(t),a=Ks(t),o=e==="fixed",l=Ka(s,!0,o,t);let c={scrollLeft:0,scrollTop:0};const d=Xs(0);function h(){d.x=Ch(a)}if(n||!n&&!o)if((Bo(t)!=="body"||Nc(a))&&(c=Eh(t)),n){const x=Ka(t,!0,o,t);d.x=x.x+t.clientLeft,d.y=x.y+t.clientTop}else a&&h();o&&!n&&a&&h();const p=a&&!n&&!o?ET(a,c):Xs(0),m=l.left+c.scrollLeft-d.x-p.x,y=l.top+c.scrollTop-d.y-p.y;return{x:m,y,width:l.width,height:l.height}}function jm(s){return Cs(s).position==="static"}function q1(s,t){if(!Ws(s)||Cs(s).position==="fixed")return null;if(t)return t(s);let e=s.offsetParent;return Ks(s)===e&&(e=e.ownerDocument.body),e}function TT(s,t){const e=qn(s);if(Ah(s))return e;if(!Ws(s)){let a=la(s);for(;a&&!Co(a);){if(Es(a)&&!jm(a))return a;a=la(a)}return e}let n=q1(s,t);for(;n&&z5(n)&&jm(n);)n=q1(n,t);return n&&Co(n)&&jm(n)&&!qy(n)?e:n||G5(s)||e}const a4=async function(s){const t=this.getOffsetParent||TT,e=this.getDimensions,n=await e(s.floating);return{reference:i4(s.reference,await t(s.floating),s.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function r4(s){return Cs(s).direction==="rtl"}const o4={convertOffsetParentRelativeRectToViewportRelativeRect:W5,getDocumentElement:Ks,getClippingRect:n4,getOffsetParent:TT,getElementRects:a4,getClientRects:K5,getDimensions:s4,getScale:ho,isElement:Es,isRTL:r4};function _T(s,t){return s.x===t.x&&s.y===t.y&&s.width===t.width&&s.height===t.height}function l4(s,t){let e=null,n;const a=Ks(s);function o(){var c;clearTimeout(n),(c=e)==null||c.disconnect(),e=null}function l(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),o();const h=s.getBoundingClientRect(),{left:p,top:m,width:y,height:x}=h;if(c||t(),!y||!x)return;const S=cd(m),w=cd(a.clientWidth-(p+y)),E=cd(a.clientHeight-(m+x)),C=cd(p),R={rootMargin:-S+"px "+-w+"px "+-E+"px "+-C+"px",threshold:Vn(0,oa(1,d))||1};let N=!0;function M(O){const k=O[0].intersectionRatio;if(k!==d){if(!N)return l();k?l(!1,k):n=setTimeout(()=>{l(!1,1e-7)},1e3)}k===1&&!_T(h,s.getBoundingClientRect())&&l(),N=!1}try{e=new IntersectionObserver(M,{...R,root:a.ownerDocument})}catch{e=new IntersectionObserver(M,R)}e.observe(s)}return l(!0),o}function c4(s,t,e,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=n,h=Yy(s),p=a||o?[...h?pc(h):[],...pc(t)]:[];p.forEach(C=>{a&&C.addEventListener("scroll",e,{passive:!0}),o&&C.addEventListener("resize",e)});const m=h&&c?l4(h,e):null;let y=-1,x=null;l&&(x=new ResizeObserver(C=>{let[T]=C;T&&T.target===h&&x&&(x.unobserve(t),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var R;(R=x)==null||R.observe(t)})),e()}),h&&!d&&x.observe(h),x.observe(t));let S,w=d?Ka(s):null;d&&E();function E(){const C=Ka(s);w&&!_T(w,C)&&e(),w=C,S=requestAnimationFrame(E)}return e(),()=>{var C;p.forEach(T=>{a&&T.removeEventListener("scroll",e),o&&T.removeEventListener("resize",e)}),m?.(),(C=x)==null||C.disconnect(),x=null,d&&cancelAnimationFrame(S)}}const u4=O5,d4=P5,h4=D5,f4=B5,p4=k5,X1=M5,m4=j5,g4=(s,t,e)=>{const n=new Map,a={platform:o4,...e},o={...a.platform,_c:n};return N5(s,t,{...a,platform:o})};var y4=typeof document<"u",v4=function(){},kd=y4?A.useLayoutEffect:v4;function nh(s,t){if(s===t)return!0;if(typeof s!=typeof t)return!1;if(typeof s=="function"&&s.toString()===t.toString())return!0;let e,n,a;if(s&&t&&typeof s=="object"){if(Array.isArray(s)){if(e=s.length,e!==t.length)return!1;for(n=e;n--!==0;)if(!nh(s[n],t[n]))return!1;return!0}if(a=Object.keys(s),e=a.length,e!==Object.keys(t).length)return!1;for(n=e;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=e;n--!==0;){const o=a[n];if(!(o==="_owner"&&s.$$typeof)&&!nh(s[o],t[o]))return!1}return!0}return s!==s&&t!==t}function RT(s){return typeof window>"u"?1:(s.ownerDocument.defaultView||window).devicePixelRatio||1}function Y1(s,t){const e=RT(s);return Math.round(t*e)/e}function Bm(s){const t=A.useRef(s);return kd(()=>{t.current=s}),t}function b4(s){s===void 0&&(s={});const{placement:t="bottom",strategy:e="absolute",middleware:n=[],platform:a,elements:{reference:o,floating:l}={},transform:c=!0,whileElementsMounted:d,open:h}=s,[p,m]=A.useState({x:0,y:0,strategy:e,placement:t,middlewareData:{},isPositioned:!1}),[y,x]=A.useState(n);nh(y,n)||x(n);const[S,w]=A.useState(null),[E,C]=A.useState(null),T=A.useCallback(I=>{I!==O.current&&(O.current=I,w(I))},[]),R=A.useCallback(I=>{I!==k.current&&(k.current=I,C(I))},[]),N=o||S,M=l||E,O=A.useRef(null),k=A.useRef(null),L=A.useRef(p),j=d!=null,U=Bm(d),H=Bm(a),$=Bm(h),Z=A.useCallback(()=>{if(!O.current||!k.current)return;const I={placement:t,strategy:e,middleware:y};H.current&&(I.platform=H.current),g4(O.current,k.current,I).then(K=>{const ht={...K,isPositioned:$.current!==!1};et.current&&!nh(L.current,ht)&&(L.current=ht,Ec.flushSync(()=>{m(ht)}))})},[y,t,e,H,$]);kd(()=>{h===!1&&L.current.isPositioned&&(L.current.isPositioned=!1,m(I=>({...I,isPositioned:!1})))},[h]);const et=A.useRef(!1);kd(()=>(et.current=!0,()=>{et.current=!1}),[]),kd(()=>{if(N&&(O.current=N),M&&(k.current=M),N&&M){if(U.current)return U.current(N,M,Z);Z()}},[N,M,Z,U,j]);const ct=A.useMemo(()=>({reference:O,floating:k,setReference:T,setFloating:R}),[T,R]),P=A.useMemo(()=>({reference:N,floating:M}),[N,M]),z=A.useMemo(()=>{const I={position:e,left:0,top:0};if(!P.floating)return I;const K=Y1(P.floating,p.x),ht=Y1(P.floating,p.y);return c?{...I,transform:"translate("+K+"px, "+ht+"px)",...RT(P.floating)>=1.5&&{willChange:"transform"}}:{position:e,left:K,top:ht}},[e,c,P.floating,p.x,p.y]);return A.useMemo(()=>({...p,update:Z,refs:ct,elements:P,floatingStyles:z}),[p,Z,ct,P,z])}const x4=s=>{function t(e){return{}.hasOwnProperty.call(e,"current")}return{name:"arrow",options:s,fn(e){const{element:n,padding:a}=typeof s=="function"?s(e):s;return n&&t(n)?n.current!=null?X1({element:n.current,padding:a}).fn(e):{}:n?X1({element:n,padding:a}).fn(e):{}}}},w4=(s,t)=>({...u4(s),options:[s,t]}),S4=(s,t)=>({...d4(s),options:[s,t]}),A4=(s,t)=>({...m4(s),options:[s,t]}),E4=(s,t)=>({...h4(s),options:[s,t]}),C4=(s,t)=>({...f4(s),options:[s,t]}),T4=(s,t)=>({...p4(s),options:[s,t]}),_4=(s,t)=>({...x4(s),options:[s,t]});var R4="Arrow",NT=A.forwardRef((s,t)=>{const{children:e,width:n=10,height:a=5,...o}=s;return v.jsx(he.svg,{...o,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:s.asChild?e:v.jsx("polygon",{points:"0,0 30,0 15,10"})})});NT.displayName=R4;var N4=NT;function M4(s){const[t,e]=A.useState(void 0);return un(()=>{if(s){e({width:s.offsetWidth,height:s.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const o=a[0];let l,c;if("borderBoxSize"in o){const d=o.borderBoxSize,h=Array.isArray(d)?d[0]:d;l=h.inlineSize,c=h.blockSize}else l=s.offsetWidth,c=s.offsetHeight;e({width:l,height:c})});return n.observe(s,{box:"border-box"}),()=>n.unobserve(s)}else e(void 0)},[s]),t}var Wy="Popper",[MT,DT]=wh(Wy),[D4,kT]=MT(Wy),LT=s=>{const{__scopePopper:t,children:e}=s,[n,a]=A.useState(null);return v.jsx(D4,{scope:t,anchor:n,onAnchorChange:a,children:e})};LT.displayName=Wy;var OT="PopperAnchor",PT=A.forwardRef((s,t)=>{const{__scopePopper:e,virtualRef:n,...a}=s,o=kT(OT,e),l=A.useRef(null),c=Pe(t,l),d=A.useRef(null);return A.useEffect(()=>{const h=d.current;d.current=n?.current||l.current,h!==d.current&&o.onAnchorChange(d.current)}),n?null:v.jsx(he.div,{...a,ref:c})});PT.displayName=OT;var Ky="PopperContent",[k4,L4]=MT(Ky),jT=A.forwardRef((s,t)=>{const{__scopePopper:e,side:n="bottom",sideOffset:a=0,align:o="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:p=0,sticky:m="partial",hideWhenDetached:y=!1,updatePositionStrategy:x="optimized",onPlaced:S,...w}=s,E=kT(Ky,e),[C,T]=A.useState(null),R=Pe(t,nt=>T(nt)),[N,M]=A.useState(null),O=M4(N),k=O?.width??0,L=O?.height??0,j=n+(o!=="center"?"-"+o:""),U=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},H=Array.isArray(h)?h:[h],$=H.length>0,Z={padding:U,boundary:H.filter(P4),altBoundary:$},{refs:et,floatingStyles:ct,placement:P,isPositioned:z,middlewareData:I}=b4({strategy:"fixed",placement:j,whileElementsMounted:(...nt)=>c4(...nt,{animationFrame:x==="always"}),elements:{reference:E.anchor},middleware:[w4({mainAxis:a+L,alignmentAxis:l}),d&&S4({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?A4():void 0,...Z}),d&&E4({...Z}),C4({...Z,apply:({elements:nt,rects:Et,availableWidth:bt,availableHeight:Nt})=>{const{width:q,height:lt}=Et.reference,ut=nt.floating.style;ut.setProperty("--radix-popper-available-width",`${bt}px`),ut.setProperty("--radix-popper-available-height",`${Nt}px`),ut.setProperty("--radix-popper-anchor-width",`${q}px`),ut.setProperty("--radix-popper-anchor-height",`${lt}px`)}}),N&&_4({element:N,padding:c}),j4({arrowWidth:k,arrowHeight:L}),y&&T4({strategy:"referenceHidden",...Z})]}),[K,ht]=IT(P),B=Wa(S);un(()=>{z&&B?.()},[z,B]);const X=I.arrow?.x,tt=I.arrow?.y,ot=I.arrow?.centerOffset!==0,[pt,st]=A.useState();return un(()=>{C&&st(window.getComputedStyle(C).zIndex)},[C]),v.jsx("div",{ref:et.setFloating,"data-radix-popper-content-wrapper":"",style:{...ct,transform:z?ct.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:pt,"--radix-popper-transform-origin":[I.transformOrigin?.x,I.transformOrigin?.y].join(" "),...I.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:s.dir,children:v.jsx(k4,{scope:e,placedSide:K,onArrowChange:M,arrowX:X,arrowY:tt,shouldHideArrow:ot,children:v.jsx(he.div,{"data-side":K,"data-align":ht,...w,ref:R,style:{...w.style,animation:z?void 0:"none"}})})})});jT.displayName=Ky;var BT="PopperArrow",O4={top:"bottom",right:"left",bottom:"top",left:"right"},FT=A.forwardRef(function(t,e){const{__scopePopper:n,...a}=t,o=L4(BT,n),l=O4[o.placedSide];return v.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:v.jsx(N4,{...a,ref:e,style:{...a.style,display:"block"}})})});FT.displayName=BT;function P4(s){return s!==null}var j4=s=>({name:"transformOrigin",options:s,fn(t){const{placement:e,rects:n,middlewareData:a}=t,l=a.arrow?.centerOffset!==0,c=l?0:s.arrowWidth,d=l?0:s.arrowHeight,[h,p]=IT(e),m={start:"0%",center:"50%",end:"100%"}[p],y=(a.arrow?.x??0)+c/2,x=(a.arrow?.y??0)+d/2;let S="",w="";return h==="bottom"?(S=l?m:`${y}px`,w=`${-d}px`):h==="top"?(S=l?m:`${y}px`,w=`${n.floating.height+d}px`):h==="right"?(S=`${-d}px`,w=l?m:`${x}px`):h==="left"&&(S=`${n.floating.width+d}px`,w=l?m:`${x}px`),{data:{x:S,y:w}}}});function IT(s){const[t,e="center"]=s.split("-");return[t,e]}var B4=LT,F4=PT,I4=jT,z4=FT,U4="Portal",Qy=A.forwardRef((s,t)=>{const{container:e,...n}=s,[a,o]=A.useState(!1);un(()=>o(!0),[]);const l=e||a&&globalThis?.document?.body;return l?PL.createPortal(v.jsx(he.div,{...n,ref:t}),l):null});Qy.displayName=U4;var V4=ty[" useInsertionEffect ".trim().toString()]||un;function Og({prop:s,defaultProp:t,onChange:e=()=>{},caller:n}){const[a,o,l]=H4({defaultProp:t,onChange:e}),c=s!==void 0,d=c?s:a;{const p=A.useRef(s!==void 0);A.useEffect(()=>{const m=p.current;m!==c&&console.warn(`${n} is changing from ${m?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=c},[c,n])}const h=A.useCallback(p=>{if(c){const m=$4(p)?p(s):p;m!==s&&l.current?.(m)}else o(p)},[c,s,o,l]);return[d,h]}function H4({defaultProp:s,onChange:t}){const[e,n]=A.useState(s),a=A.useRef(e),o=A.useRef(t);return V4(()=>{o.current=t},[t]),A.useEffect(()=>{a.current!==e&&(o.current?.(e),a.current=e)},[e,a]),[e,n,o]}function $4(s){return typeof s=="function"}function G4(s){const t=A.useRef({value:s,previous:s});return A.useMemo(()=>(t.current.value!==s&&(t.current.previous=t.current.value,t.current.value=s),t.current.previous),[s])}var zT=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),q4="VisuallyHidden",X4=A.forwardRef((s,t)=>v.jsx(he.span,{...s,ref:t,style:{...zT,...s.style}}));X4.displayName=q4;var Y4=function(s){if(typeof document>"u")return null;var t=Array.isArray(s)?s[0]:s;return t.ownerDocument.body},Yr=new WeakMap,ud=new WeakMap,dd={},Fm=0,UT=function(s){return s&&(s.host||UT(s.parentNode))},W4=function(s,t){return t.map(function(e){if(s.contains(e))return e;var n=UT(e);return n&&s.contains(n)?n:(console.error("aria-hidden",e,"in not contained inside",s,". Doing nothing"),null)}).filter(function(e){return!!e})},K4=function(s,t,e,n){var a=W4(t,Array.isArray(s)?s:[s]);dd[e]||(dd[e]=new WeakMap);var o=dd[e],l=[],c=new Set,d=new Set(a),h=function(m){!m||c.has(m)||(c.add(m),h(m.parentNode))};a.forEach(h);var p=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(y){if(c.has(y))p(y);else try{var x=y.getAttribute(n),S=x!==null&&x!=="false",w=(Yr.get(y)||0)+1,E=(o.get(y)||0)+1;Yr.set(y,w),o.set(y,E),l.push(y),w===1&&S&&ud.set(y,!0),E===1&&y.setAttribute(e,"true"),S||y.setAttribute(n,"true")}catch(C){console.error("aria-hidden: cannot operate on ",y,C)}})};return p(t),c.clear(),Fm++,function(){l.forEach(function(m){var y=Yr.get(m)-1,x=o.get(m)-1;Yr.set(m,y),o.set(m,x),y||(ud.has(m)||m.removeAttribute(n),ud.delete(m)),x||m.removeAttribute(e)}),Fm--,Fm||(Yr=new WeakMap,Yr=new WeakMap,ud=new WeakMap,dd={})}},VT=function(s,t,e){e===void 0&&(e="data-aria-hidden");var n=Array.from(Array.isArray(s)?s:[s]),a=Y4(s);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),K4(n,a,e,"aria-hidden")):function(){return null}},Vs=function(){return Vs=Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Vs.apply(this,arguments)};function HT(s,t){var e={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&t.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(s);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(s,n[a])&&(e[n[a]]=s[n[a]]);return e}function Q4(s,t,e){if(e||arguments.length===2)for(var n=0,a=t.length,o;n<a;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return s.concat(o||Array.prototype.slice.call(t))}var Ld="right-scroll-bar-position",Od="width-before-scroll-bar",Z4="with-scroll-bars-hidden",J4="--removed-body-scroll-bar-size";function Im(s,t){return typeof s=="function"?s(t):s&&(s.current=t),s}function tz(s,t){var e=A.useState(function(){return{value:s,callback:t,facade:{get current(){return e.value},set current(n){var a=e.value;a!==n&&(e.value=n,e.callback(n,a))}}}})[0];return e.callback=t,e.facade}var ez=typeof window<"u"?A.useLayoutEffect:A.useEffect,W1=new WeakMap;function nz(s,t){var e=tz(null,function(n){return s.forEach(function(a){return Im(a,n)})});return ez(function(){var n=W1.get(e);if(n){var a=new Set(n),o=new Set(s),l=e.current;a.forEach(function(c){o.has(c)||Im(c,null)}),o.forEach(function(c){a.has(c)||Im(c,l)})}W1.set(e,s)},[s]),e}function sz(s){return s}function iz(s,t){t===void 0&&(t=sz);var e=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:s},useMedium:function(o){var l=t(o,n);return e.push(l),function(){e=e.filter(function(c){return c!==l})}},assignSyncMedium:function(o){for(n=!0;e.length;){var l=e;e=[],l.forEach(o)}e={push:function(c){return o(c)},filter:function(){return e}}},assignMedium:function(o){n=!0;var l=[];if(e.length){var c=e;e=[],c.forEach(o),l=e}var d=function(){var p=l;l=[],p.forEach(o)},h=function(){return Promise.resolve().then(d)};h(),e={push:function(p){l.push(p),h()},filter:function(p){return l=l.filter(p),e}}}};return a}function az(s){s===void 0&&(s={});var t=iz(null);return t.options=Vs({async:!0,ssr:!1},s),t}var $T=function(s){var t=s.sideCar,e=HT(s,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return A.createElement(n,Vs({},e))};$T.isSideCarExport=!0;function rz(s,t){return s.useMedium(t),$T}var GT=az(),zm=function(){},Th=A.forwardRef(function(s,t){var e=A.useRef(null),n=A.useState({onScrollCapture:zm,onWheelCapture:zm,onTouchMoveCapture:zm}),a=n[0],o=n[1],l=s.forwardProps,c=s.children,d=s.className,h=s.removeScrollBar,p=s.enabled,m=s.shards,y=s.sideCar,x=s.noRelative,S=s.noIsolation,w=s.inert,E=s.allowPinchZoom,C=s.as,T=C===void 0?"div":C,R=s.gapMode,N=HT(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=y,O=nz([e,t]),k=Vs(Vs({},N),a);return A.createElement(A.Fragment,null,p&&A.createElement(M,{sideCar:GT,removeScrollBar:h,shards:m,noRelative:x,noIsolation:S,inert:w,setCallbacks:o,allowPinchZoom:!!E,lockRef:e,gapMode:R}),l?A.cloneElement(A.Children.only(c),Vs(Vs({},k),{ref:O})):A.createElement(T,Vs({},k,{className:d,ref:O}),c))});Th.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Th.classNames={fullWidth:Od,zeroRight:Ld};var oz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function lz(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var t=oz();return t&&s.setAttribute("nonce",t),s}function cz(s,t){s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t))}function uz(s){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(s)}var dz=function(){var s=0,t=null;return{add:function(e){s==0&&(t=lz())&&(cz(t,e),uz(t)),s++},remove:function(){s--,!s&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},hz=function(){var s=dz();return function(t,e){A.useEffect(function(){return s.add(t),function(){s.remove()}},[t&&e])}},qT=function(){var s=hz(),t=function(e){var n=e.styles,a=e.dynamic;return s(n,a),null};return t},fz={left:0,top:0,right:0,gap:0},Um=function(s){return parseInt(s||"",10)||0},pz=function(s){var t=window.getComputedStyle(document.body),e=t[s==="padding"?"paddingLeft":"marginLeft"],n=t[s==="padding"?"paddingTop":"marginTop"],a=t[s==="padding"?"paddingRight":"marginRight"];return[Um(e),Um(n),Um(a)]},mz=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return fz;var t=pz(s),e=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-e+t[2]-t[0])}},gz=qT(),fo="data-scroll-locked",yz=function(s,t,e,n){var a=s.left,o=s.top,l=s.right,c=s.gap;return e===void 0&&(e="margin"),`
  .`.concat(Z4,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body[`).concat(fo,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),e==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),e==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ld,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Od,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Ld," .").concat(Ld,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Od," .").concat(Od,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(fo,`] {
    `).concat(J4,": ").concat(c,`px;
  }
`)},K1=function(){var s=parseInt(document.body.getAttribute(fo)||"0",10);return isFinite(s)?s:0},vz=function(){A.useEffect(function(){return document.body.setAttribute(fo,(K1()+1).toString()),function(){var s=K1()-1;s<=0?document.body.removeAttribute(fo):document.body.setAttribute(fo,s.toString())}},[])},bz=function(s){var t=s.noRelative,e=s.noImportant,n=s.gapMode,a=n===void 0?"margin":n;vz();var o=A.useMemo(function(){return mz(a)},[a]);return A.createElement(gz,{styles:yz(o,!t,a,e?"":"!important")})},Pg=!1;if(typeof window<"u")try{var hd=Object.defineProperty({},"passive",{get:function(){return Pg=!0,!0}});window.addEventListener("test",hd,hd),window.removeEventListener("test",hd,hd)}catch{Pg=!1}var Wr=Pg?{passive:!1}:!1,xz=function(s){return s.tagName==="TEXTAREA"},XT=function(s,t){if(!(s instanceof Element))return!1;var e=window.getComputedStyle(s);return e[t]!=="hidden"&&!(e.overflowY===e.overflowX&&!xz(s)&&e[t]==="visible")},wz=function(s){return XT(s,"overflowY")},Sz=function(s){return XT(s,"overflowX")},Q1=function(s,t){var e=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=YT(s,n);if(a){var o=WT(s,n),l=o[1],c=o[2];if(l>c)return!0}n=n.parentNode}while(n&&n!==e.body);return!1},Az=function(s){var t=s.scrollTop,e=s.scrollHeight,n=s.clientHeight;return[t,e,n]},Ez=function(s){var t=s.scrollLeft,e=s.scrollWidth,n=s.clientWidth;return[t,e,n]},YT=function(s,t){return s==="v"?wz(t):Sz(t)},WT=function(s,t){return s==="v"?Az(t):Ez(t)},Cz=function(s,t){return s==="h"&&t==="rtl"?-1:1},Tz=function(s,t,e,n,a){var o=Cz(s,window.getComputedStyle(t).direction),l=o*n,c=e.target,d=t.contains(c),h=!1,p=l>0,m=0,y=0;do{if(!c)break;var x=WT(s,c),S=x[0],w=x[1],E=x[2],C=w-E-o*S;(S||C)&&YT(s,c)&&(m+=C,y+=S);var T=c.parentNode;c=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!d&&c!==document.body||d&&(t.contains(c)||t===c));return(p&&Math.abs(m)<1||!p&&Math.abs(y)<1)&&(h=!0),h},fd=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},Z1=function(s){return[s.deltaX,s.deltaY]},J1=function(s){return s&&"current"in s?s.current:s},_z=function(s,t){return s[0]===t[0]&&s[1]===t[1]},Rz=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},Nz=0,Kr=[];function Mz(s){var t=A.useRef([]),e=A.useRef([0,0]),n=A.useRef(),a=A.useState(Nz++)[0],o=A.useState(qT)[0],l=A.useRef(s);A.useEffect(function(){l.current=s},[s]),A.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(a));var w=Q4([s.lockRef.current],(s.shards||[]).map(J1),!0).filter(Boolean);return w.forEach(function(E){return E.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),w.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(a))})}}},[s.inert,s.lockRef.current,s.shards]);var c=A.useCallback(function(w,E){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!l.current.allowPinchZoom;var C=fd(w),T=e.current,R="deltaX"in w?w.deltaX:T[0]-C[0],N="deltaY"in w?w.deltaY:T[1]-C[1],M,O=w.target,k=Math.abs(R)>Math.abs(N)?"h":"v";if("touches"in w&&k==="h"&&O.type==="range")return!1;var L=window.getSelection(),j=L&&L.anchorNode,U=j?j===O||j.contains(O):!1;if(U)return!1;var H=Q1(k,O);if(!H)return!0;if(H?M=k:(M=k==="v"?"h":"v",H=Q1(k,O)),!H)return!1;if(!n.current&&"changedTouches"in w&&(R||N)&&(n.current=M),!M)return!0;var $=n.current||M;return Tz($,E,w,$==="h"?R:N)},[]),d=A.useCallback(function(w){var E=w;if(!(!Kr.length||Kr[Kr.length-1]!==o)){var C="deltaY"in E?Z1(E):fd(E),T=t.current.filter(function(M){return M.name===E.type&&(M.target===E.target||E.target===M.shadowParent)&&_z(M.delta,C)})[0];if(T&&T.should){E.cancelable&&E.preventDefault();return}if(!T){var R=(l.current.shards||[]).map(J1).filter(Boolean).filter(function(M){return M.contains(E.target)}),N=R.length>0?c(E,R[0]):!l.current.noIsolation;N&&E.cancelable&&E.preventDefault()}}},[]),h=A.useCallback(function(w,E,C,T){var R={name:w,delta:E,target:C,should:T,shadowParent:Dz(C)};t.current.push(R),setTimeout(function(){t.current=t.current.filter(function(N){return N!==R})},1)},[]),p=A.useCallback(function(w){e.current=fd(w),n.current=void 0},[]),m=A.useCallback(function(w){h(w.type,Z1(w),w.target,c(w,s.lockRef.current))},[]),y=A.useCallback(function(w){h(w.type,fd(w),w.target,c(w,s.lockRef.current))},[]);A.useEffect(function(){return Kr.push(o),s.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:y}),document.addEventListener("wheel",d,Wr),document.addEventListener("touchmove",d,Wr),document.addEventListener("touchstart",p,Wr),function(){Kr=Kr.filter(function(w){return w!==o}),document.removeEventListener("wheel",d,Wr),document.removeEventListener("touchmove",d,Wr),document.removeEventListener("touchstart",p,Wr)}},[]);var x=s.removeScrollBar,S=s.inert;return A.createElement(A.Fragment,null,S?A.createElement(o,{styles:Rz(a)}):null,x?A.createElement(bz,{noRelative:s.noRelative,gapMode:s.gapMode}):null)}function Dz(s){for(var t=null;s!==null;)s instanceof ShadowRoot&&(t=s.host,s=s.host),s=s.parentNode;return t}const kz=rz(GT,Mz);var Zy=A.forwardRef(function(s,t){return A.createElement(Th,Vs({},s,{ref:t,sideCar:kz}))});Zy.classNames=Th.classNames;var Lz=[" ","Enter","ArrowUp","ArrowDown"],Oz=[" ","Enter"],Qa="Select",[_h,Rh,Pz]=KI(Qa),[Fo]=wh(Qa,[Pz,DT]),Nh=DT(),[jz,ha]=Fo(Qa),[Bz,Fz]=Fo(Qa),KT=s=>{const{__scopeSelect:t,children:e,open:n,defaultOpen:a,onOpenChange:o,value:l,defaultValue:c,onValueChange:d,dir:h,name:p,autoComplete:m,disabled:y,required:x,form:S}=s,w=Nh(t),[E,C]=A.useState(null),[T,R]=A.useState(null),[N,M]=A.useState(!1),O=ZI(h),[k,L]=Og({prop:n,defaultProp:a??!1,onChange:o,caller:Qa}),[j,U]=Og({prop:l,defaultProp:c,onChange:d,caller:Qa}),H=A.useRef(null),$=E?S||!!E.closest("form"):!0,[Z,et]=A.useState(new Set),ct=Array.from(Z).map(P=>P.props.value).join(";");return v.jsx(B4,{...w,children:v.jsxs(jz,{required:x,scope:t,trigger:E,onTriggerChange:C,valueNode:T,onValueNodeChange:R,valueNodeHasChildren:N,onValueNodeHasChildrenChange:M,contentId:uo(),value:j,onValueChange:U,open:k,onOpenChange:L,dir:O,triggerPointerDownPosRef:H,disabled:y,children:[v.jsx(_h.Provider,{scope:t,children:v.jsx(Bz,{scope:s.__scopeSelect,onNativeOptionAdd:A.useCallback(P=>{et(z=>new Set(z).add(P))},[]),onNativeOptionRemove:A.useCallback(P=>{et(z=>{const I=new Set(z);return I.delete(P),I})},[]),children:e})}),$?v.jsxs(x_,{"aria-hidden":!0,required:x,tabIndex:-1,name:p,autoComplete:m,value:j,onChange:P=>U(P.target.value),disabled:y,form:S,children:[j===void 0?v.jsx("option",{value:""}):null,Array.from(Z)]},ct):null]})})};KT.displayName=Qa;var QT="SelectTrigger",ZT=A.forwardRef((s,t)=>{const{__scopeSelect:e,disabled:n=!1,...a}=s,o=Nh(e),l=ha(QT,e),c=l.disabled||n,d=Pe(t,l.onTriggerChange),h=Rh(e),p=A.useRef("touch"),[m,y,x]=S_(w=>{const E=h().filter(R=>!R.disabled),C=E.find(R=>R.value===l.value),T=A_(E,w,C);T!==void 0&&l.onValueChange(T.value)}),S=w=>{c||(l.onOpenChange(!0),x()),w&&(l.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return v.jsx(F4,{asChild:!0,...o,children:v.jsx(he.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":w_(l.value)?"":void 0,...a,ref:d,onClick:ye(a.onClick,w=>{w.currentTarget.focus(),p.current!=="mouse"&&S(w)}),onPointerDown:ye(a.onPointerDown,w=>{p.current=w.pointerType;const E=w.target;E.hasPointerCapture(w.pointerId)&&E.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(S(w),w.preventDefault())}),onKeyDown:ye(a.onKeyDown,w=>{const E=m.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&y(w.key),!(E&&w.key===" ")&&Lz.includes(w.key)&&(S(),w.preventDefault())})})})});ZT.displayName=QT;var JT="SelectValue",t_=A.forwardRef((s,t)=>{const{__scopeSelect:e,className:n,style:a,children:o,placeholder:l="",...c}=s,d=ha(JT,e),{onValueNodeHasChildrenChange:h}=d,p=o!==void 0,m=Pe(t,d.onValueNodeChange);return un(()=>{h(p)},[h,p]),v.jsx(he.span,{...c,ref:m,style:{pointerEvents:"none"},children:w_(d.value)?v.jsx(v.Fragment,{children:l}):o})});t_.displayName=JT;var Iz="SelectIcon",e_=A.forwardRef((s,t)=>{const{__scopeSelect:e,children:n,...a}=s;return v.jsx(he.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});e_.displayName=Iz;var zz="SelectPortal",n_=s=>v.jsx(Qy,{asChild:!0,...s});n_.displayName=zz;var Za="SelectContent",s_=A.forwardRef((s,t)=>{const e=ha(Za,s.__scopeSelect),[n,a]=A.useState();if(un(()=>{a(new DocumentFragment)},[]),!e.open){const o=n;return o?Ec.createPortal(v.jsx(i_,{scope:s.__scopeSelect,children:v.jsx(_h.Slot,{scope:s.__scopeSelect,children:v.jsx("div",{children:s.children})})}),o):null}return v.jsx(a_,{...s,ref:t})});s_.displayName=Za;var Ss=10,[i_,fa]=Fo(Za),Uz="SelectContentImpl",Vz=hc("SelectContent.RemoveScroll"),a_=A.forwardRef((s,t)=>{const{__scopeSelect:e,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:o,onPointerDownOutside:l,side:c,sideOffset:d,align:h,alignOffset:p,arrowPadding:m,collisionBoundary:y,collisionPadding:x,sticky:S,hideWhenDetached:w,avoidCollisions:E,...C}=s,T=ha(Za,e),[R,N]=A.useState(null),[M,O]=A.useState(null),k=Pe(t,nt=>N(nt)),[L,j]=A.useState(null),[U,H]=A.useState(null),$=Rh(e),[Z,et]=A.useState(!1),ct=A.useRef(!1);A.useEffect(()=>{if(R)return VT(R)},[R]),gT();const P=A.useCallback(nt=>{const[Et,...bt]=$().map(lt=>lt.ref.current),[Nt]=bt.slice(-1),q=document.activeElement;for(const lt of nt)if(lt===q||(lt?.scrollIntoView({block:"nearest"}),lt===Et&&M&&(M.scrollTop=0),lt===Nt&&M&&(M.scrollTop=M.scrollHeight),lt?.focus(),document.activeElement!==q))return},[$,M]),z=A.useCallback(()=>P([L,R]),[P,L,R]);A.useEffect(()=>{Z&&z()},[Z,z]);const{onOpenChange:I,triggerPointerDownPosRef:K}=T;A.useEffect(()=>{if(R){let nt={x:0,y:0};const Et=Nt=>{nt={x:Math.abs(Math.round(Nt.pageX)-(K.current?.x??0)),y:Math.abs(Math.round(Nt.pageY)-(K.current?.y??0))}},bt=Nt=>{nt.x<=10&&nt.y<=10?Nt.preventDefault():R.contains(Nt.target)||I(!1),document.removeEventListener("pointermove",Et),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",Et),document.addEventListener("pointerup",bt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Et),document.removeEventListener("pointerup",bt,{capture:!0})}}},[R,I,K]),A.useEffect(()=>{const nt=()=>I(!1);return window.addEventListener("blur",nt),window.addEventListener("resize",nt),()=>{window.removeEventListener("blur",nt),window.removeEventListener("resize",nt)}},[I]);const[ht,B]=S_(nt=>{const Et=$().filter(q=>!q.disabled),bt=Et.find(q=>q.ref.current===document.activeElement),Nt=A_(Et,nt,bt);Nt&&setTimeout(()=>Nt.ref.current.focus())}),X=A.useCallback((nt,Et,bt)=>{const Nt=!ct.current&&!bt;(T.value!==void 0&&T.value===Et||Nt)&&(j(nt),Nt&&(ct.current=!0))},[T.value]),tt=A.useCallback(()=>R?.focus(),[R]),ot=A.useCallback((nt,Et,bt)=>{const Nt=!ct.current&&!bt;(T.value!==void 0&&T.value===Et||Nt)&&H(nt)},[T.value]),pt=n==="popper"?jg:r_,st=pt===jg?{side:c,sideOffset:d,align:h,alignOffset:p,arrowPadding:m,collisionBoundary:y,collisionPadding:x,sticky:S,hideWhenDetached:w,avoidCollisions:E}:{};return v.jsx(i_,{scope:e,content:R,viewport:M,onViewportChange:O,itemRefCallback:X,selectedItem:L,onItemLeave:tt,itemTextRefCallback:ot,focusSelectedItem:z,selectedItemText:U,position:n,isPositioned:Z,searchRef:ht,children:v.jsx(Zy,{as:Vz,allowPinchZoom:!0,children:v.jsx(Vy,{asChild:!0,trapped:T.open,onMountAutoFocus:nt=>{nt.preventDefault()},onUnmountAutoFocus:ye(a,nt=>{T.trigger?.focus({preventScroll:!0}),nt.preventDefault()}),children:v.jsx(Uy,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:nt=>nt.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:v.jsx(pt,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:nt=>nt.preventDefault(),...C,...st,onPlaced:()=>et(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...C.style},onKeyDown:ye(C.onKeyDown,nt=>{const Et=nt.ctrlKey||nt.altKey||nt.metaKey;if(nt.key==="Tab"&&nt.preventDefault(),!Et&&nt.key.length===1&&B(nt.key),["ArrowUp","ArrowDown","Home","End"].includes(nt.key)){let Nt=$().filter(q=>!q.disabled).map(q=>q.ref.current);if(["ArrowUp","End"].includes(nt.key)&&(Nt=Nt.slice().reverse()),["ArrowUp","ArrowDown"].includes(nt.key)){const q=nt.target,lt=Nt.indexOf(q);Nt=Nt.slice(lt+1)}setTimeout(()=>P(Nt)),nt.preventDefault()}})})})})})})});a_.displayName=Uz;var Hz="SelectItemAlignedPosition",r_=A.forwardRef((s,t)=>{const{__scopeSelect:e,onPlaced:n,...a}=s,o=ha(Za,e),l=fa(Za,e),[c,d]=A.useState(null),[h,p]=A.useState(null),m=Pe(t,k=>p(k)),y=Rh(e),x=A.useRef(!1),S=A.useRef(!0),{viewport:w,selectedItem:E,selectedItemText:C,focusSelectedItem:T}=l,R=A.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&h&&w&&E&&C){const k=o.trigger.getBoundingClientRect(),L=h.getBoundingClientRect(),j=o.valueNode.getBoundingClientRect(),U=C.getBoundingClientRect();if(o.dir!=="rtl"){const q=U.left-L.left,lt=j.left-q,ut=k.left-lt,ft=k.width+ut,gt=Math.max(ft,L.width),dt=window.innerWidth-Ss,Tt=N1(lt,[Ss,Math.max(Ss,dt-gt)]);c.style.minWidth=ft+"px",c.style.left=Tt+"px"}else{const q=L.right-U.right,lt=window.innerWidth-j.right-q,ut=window.innerWidth-k.right-lt,ft=k.width+ut,gt=Math.max(ft,L.width),dt=window.innerWidth-Ss,Tt=N1(lt,[Ss,Math.max(Ss,dt-gt)]);c.style.minWidth=ft+"px",c.style.right=Tt+"px"}const H=y(),$=window.innerHeight-Ss*2,Z=w.scrollHeight,et=window.getComputedStyle(h),ct=parseInt(et.borderTopWidth,10),P=parseInt(et.paddingTop,10),z=parseInt(et.borderBottomWidth,10),I=parseInt(et.paddingBottom,10),K=ct+P+Z+I+z,ht=Math.min(E.offsetHeight*5,K),B=window.getComputedStyle(w),X=parseInt(B.paddingTop,10),tt=parseInt(B.paddingBottom,10),ot=k.top+k.height/2-Ss,pt=$-ot,st=E.offsetHeight/2,nt=E.offsetTop+st,Et=ct+P+nt,bt=K-Et;if(Et<=ot){const q=H.length>0&&E===H[H.length-1].ref.current;c.style.bottom="0px";const lt=h.clientHeight-w.offsetTop-w.offsetHeight,ut=Math.max(pt,st+(q?tt:0)+lt+z),ft=Et+ut;c.style.height=ft+"px"}else{const q=H.length>0&&E===H[0].ref.current;c.style.top="0px";const ut=Math.max(ot,ct+w.offsetTop+(q?X:0)+st)+bt;c.style.height=ut+"px",w.scrollTop=Et-ot+w.offsetTop}c.style.margin=`${Ss}px 0`,c.style.minHeight=ht+"px",c.style.maxHeight=$+"px",n?.(),requestAnimationFrame(()=>x.current=!0)}},[y,o.trigger,o.valueNode,c,h,w,E,C,o.dir,n]);un(()=>R(),[R]);const[N,M]=A.useState();un(()=>{h&&M(window.getComputedStyle(h).zIndex)},[h]);const O=A.useCallback(k=>{k&&S.current===!0&&(R(),T?.(),S.current=!1)},[R,T]);return v.jsx(Gz,{scope:e,contentWrapper:c,shouldExpandOnScrollRef:x,onScrollButtonChange:O,children:v.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:v.jsx(he.div,{...a,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});r_.displayName=Hz;var $z="SelectPopperPosition",jg=A.forwardRef((s,t)=>{const{__scopeSelect:e,align:n="start",collisionPadding:a=Ss,...o}=s,l=Nh(e);return v.jsx(I4,{...l,...o,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});jg.displayName=$z;var[Gz,Jy]=Fo(Za,{}),Bg="SelectViewport",o_=A.forwardRef((s,t)=>{const{__scopeSelect:e,nonce:n,...a}=s,o=fa(Bg,e),l=Jy(Bg,e),c=Pe(t,o.onViewportChange),d=A.useRef(0);return v.jsxs(v.Fragment,{children:[v.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),v.jsx(_h.Slot,{scope:e,children:v.jsx(he.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:ye(a.onScroll,h=>{const p=h.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:y}=l;if(y?.current&&m){const x=Math.abs(d.current-p.scrollTop);if(x>0){const S=window.innerHeight-Ss*2,w=parseFloat(m.style.minHeight),E=parseFloat(m.style.height),C=Math.max(w,E);if(C<S){const T=C+x,R=Math.min(S,T),N=T-R;m.style.height=R+"px",m.style.bottom==="0px"&&(p.scrollTop=N>0?N:0,m.style.justifyContent="flex-end")}}}d.current=p.scrollTop})})})]})});o_.displayName=Bg;var l_="SelectGroup",[qz,Xz]=Fo(l_),Yz=A.forwardRef((s,t)=>{const{__scopeSelect:e,...n}=s,a=uo();return v.jsx(qz,{scope:e,id:a,children:v.jsx(he.div,{role:"group","aria-labelledby":a,...n,ref:t})})});Yz.displayName=l_;var c_="SelectLabel",u_=A.forwardRef((s,t)=>{const{__scopeSelect:e,...n}=s,a=Xz(c_,e);return v.jsx(he.div,{id:a.id,...n,ref:t})});u_.displayName=c_;var sh="SelectItem",[Wz,d_]=Fo(sh),h_=A.forwardRef((s,t)=>{const{__scopeSelect:e,value:n,disabled:a=!1,textValue:o,...l}=s,c=ha(sh,e),d=fa(sh,e),h=c.value===n,[p,m]=A.useState(o??""),[y,x]=A.useState(!1),S=Pe(t,T=>d.itemRefCallback?.(T,n,a)),w=uo(),E=A.useRef("touch"),C=()=>{a||(c.onValueChange(n),c.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return v.jsx(Wz,{scope:e,value:n,disabled:a,textId:w,isSelected:h,onItemTextChange:A.useCallback(T=>{m(R=>R||(T?.textContent??"").trim())},[]),children:v.jsx(_h.ItemSlot,{scope:e,value:n,disabled:a,textValue:p,children:v.jsx(he.div,{role:"option","aria-labelledby":w,"data-highlighted":y?"":void 0,"aria-selected":h&&y,"data-state":h?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:S,onFocus:ye(l.onFocus,()=>x(!0)),onBlur:ye(l.onBlur,()=>x(!1)),onClick:ye(l.onClick,()=>{E.current!=="mouse"&&C()}),onPointerUp:ye(l.onPointerUp,()=>{E.current==="mouse"&&C()}),onPointerDown:ye(l.onPointerDown,T=>{E.current=T.pointerType}),onPointerMove:ye(l.onPointerMove,T=>{E.current=T.pointerType,a?d.onItemLeave?.():E.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ye(l.onPointerLeave,T=>{T.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:ye(l.onKeyDown,T=>{d.searchRef?.current!==""&&T.key===" "||(Oz.includes(T.key)&&C(),T.key===" "&&T.preventDefault())})})})})});h_.displayName=sh;var ql="SelectItemText",f_=A.forwardRef((s,t)=>{const{__scopeSelect:e,className:n,style:a,...o}=s,l=ha(ql,e),c=fa(ql,e),d=d_(ql,e),h=Fz(ql,e),[p,m]=A.useState(null),y=Pe(t,C=>m(C),d.onItemTextChange,C=>c.itemTextRefCallback?.(C,d.value,d.disabled)),x=p?.textContent,S=A.useMemo(()=>v.jsx("option",{value:d.value,disabled:d.disabled,children:x},d.value),[d.disabled,d.value,x]),{onNativeOptionAdd:w,onNativeOptionRemove:E}=h;return un(()=>(w(S),()=>E(S)),[w,E,S]),v.jsxs(v.Fragment,{children:[v.jsx(he.span,{id:d.textId,...o,ref:y}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Ec.createPortal(o.children,l.valueNode):null]})});f_.displayName=ql;var p_="SelectItemIndicator",m_=A.forwardRef((s,t)=>{const{__scopeSelect:e,...n}=s;return d_(p_,e).isSelected?v.jsx(he.span,{"aria-hidden":!0,...n,ref:t}):null});m_.displayName=p_;var Fg="SelectScrollUpButton",g_=A.forwardRef((s,t)=>{const e=fa(Fg,s.__scopeSelect),n=Jy(Fg,s.__scopeSelect),[a,o]=A.useState(!1),l=Pe(t,n.onScrollButtonChange);return un(()=>{if(e.viewport&&e.isPositioned){let c=function(){const h=d.scrollTop>0;o(h)};const d=e.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[e.viewport,e.isPositioned]),a?v.jsx(v_,{...s,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=e;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});g_.displayName=Fg;var Ig="SelectScrollDownButton",y_=A.forwardRef((s,t)=>{const e=fa(Ig,s.__scopeSelect),n=Jy(Ig,s.__scopeSelect),[a,o]=A.useState(!1),l=Pe(t,n.onScrollButtonChange);return un(()=>{if(e.viewport&&e.isPositioned){let c=function(){const h=d.scrollHeight-d.clientHeight,p=Math.ceil(d.scrollTop)<h;o(p)};const d=e.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[e.viewport,e.isPositioned]),a?v.jsx(v_,{...s,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=e;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});y_.displayName=Ig;var v_=A.forwardRef((s,t)=>{const{__scopeSelect:e,onAutoScroll:n,...a}=s,o=fa("SelectScrollButton",e),l=A.useRef(null),c=Rh(e),d=A.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return A.useEffect(()=>()=>d(),[d]),un(()=>{c().find(p=>p.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),v.jsx(he.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:ye(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(n,50))}),onPointerMove:ye(a.onPointerMove,()=>{o.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(n,50))}),onPointerLeave:ye(a.onPointerLeave,()=>{d()})})}),Kz="SelectSeparator",b_=A.forwardRef((s,t)=>{const{__scopeSelect:e,...n}=s;return v.jsx(he.div,{"aria-hidden":!0,...n,ref:t})});b_.displayName=Kz;var zg="SelectArrow",Qz=A.forwardRef((s,t)=>{const{__scopeSelect:e,...n}=s,a=Nh(e),o=ha(zg,e),l=fa(zg,e);return o.open&&l.position==="popper"?v.jsx(z4,{...a,...n,ref:t}):null});Qz.displayName=zg;var Zz="SelectBubbleInput",x_=A.forwardRef(({__scopeSelect:s,value:t,...e},n)=>{const a=A.useRef(null),o=Pe(n,a),l=G4(t);return A.useEffect(()=>{const c=a.current;if(!c)return;const d=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==t&&p){const m=new Event("change",{bubbles:!0});p.call(c,t),c.dispatchEvent(m)}},[l,t]),v.jsx(he.select,{...e,style:{...zT,...e.style},ref:o,defaultValue:t})});x_.displayName=Zz;function w_(s){return s===""||s===void 0}function S_(s){const t=Wa(s),e=A.useRef(""),n=A.useRef(0),a=A.useCallback(l=>{const c=e.current+l;t(c),(function d(h){e.current=h,window.clearTimeout(n.current),h!==""&&(n.current=window.setTimeout(()=>d(""),1e3))})(c)},[t]),o=A.useCallback(()=>{e.current="",window.clearTimeout(n.current)},[]);return A.useEffect(()=>()=>window.clearTimeout(n.current),[]),[e,a,o]}function A_(s,t,e){const a=t.length>1&&Array.from(t).every(h=>h===t[0])?t[0]:t,o=e?s.indexOf(e):-1;let l=Jz(s,Math.max(o,0));a.length===1&&(l=l.filter(h=>h!==e));const d=l.find(h=>h.textValue.toLowerCase().startsWith(a.toLowerCase()));return d!==e?d:void 0}function Jz(s,t){return s.map((e,n)=>s[(t+n)%s.length])}var tU=KT,E_=ZT,eU=t_,nU=e_,sU=n_,C_=s_,iU=o_,T_=u_,__=h_,aU=f_,rU=m_,R_=g_,N_=y_,M_=b_;const us=tU,ds=eU,Hn=A.forwardRef(({className:s,children:t,...e},n)=>v.jsxs(E_,{ref:n,className:Qt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...e,children:[t,v.jsx(nU,{asChild:!0,children:v.jsx(bh,{className:"h-4 w-4 opacity-50"})})]}));Hn.displayName=E_.displayName;const D_=A.forwardRef(({className:s,...t},e)=>v.jsx(R_,{ref:e,className:Qt("flex cursor-default items-center justify-center py-1",s),...t,children:v.jsx(QC,{className:"h-4 w-4"})}));D_.displayName=R_.displayName;const k_=A.forwardRef(({className:s,...t},e)=>v.jsx(N_,{ref:e,className:Qt("flex cursor-default items-center justify-center py-1",s),...t,children:v.jsx(bh,{className:"h-4 w-4"})}));k_.displayName=N_.displayName;const $n=A.forwardRef(({className:s,children:t,position:e="popper",...n},a)=>v.jsx(sU,{children:v.jsxs(C_,{ref:a,className:Qt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:e,...n,children:[v.jsx(D_,{}),v.jsx(iU,{className:Qt("p-1",e==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),v.jsx(k_,{})]})}));$n.displayName=C_.displayName;const oU=A.forwardRef(({className:s,...t},e)=>v.jsx(T_,{ref:e,className:Qt("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));oU.displayName=T_.displayName;const pn=A.forwardRef(({className:s,children:t,...e},n)=>v.jsxs(__,{ref:n,className:Qt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...e,children:[v.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:v.jsx(rU,{children:v.jsx(KC,{className:"h-4 w-4"})})}),v.jsx(aU,{children:t})]}));pn.displayName=__.displayName;const lU=A.forwardRef(({className:s,...t},e)=>v.jsx(M_,{ref:e,className:Qt("-mx-1 my-1 h-px bg-muted",s),...t}));lU.displayName=M_.displayName;const Nn=A.forwardRef(({className:s,type:t,...e},n)=>v.jsx("input",{type:t,className:Qt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:n,...e}));Nn.displayName="Input";var cU=Symbol.for("react.lazy"),ih=ty[" use ".trim().toString()];function uU(s){return typeof s=="object"&&s!==null&&"then"in s}function L_(s){return s!=null&&typeof s=="object"&&"$$typeof"in s&&s.$$typeof===cU&&"_payload"in s&&uU(s._payload)}function dU(s){const t=hU(s),e=A.forwardRef((n,a)=>{let{children:o,...l}=n;L_(o)&&typeof ih=="function"&&(o=ih(o._payload));const c=A.Children.toArray(o),d=c.find(pU);if(d){const h=d.props.children,p=c.map(m=>m===d?A.Children.count(h)>1?A.Children.only(null):A.isValidElement(h)?h.props.children:null:m);return v.jsx(t,{...l,ref:a,children:A.isValidElement(h)?A.cloneElement(h,void 0,p):null})}return v.jsx(t,{...l,ref:a,children:o})});return e.displayName=`${s}.Slot`,e}function hU(s){const t=A.forwardRef((e,n)=>{let{children:a,...o}=e;if(L_(a)&&typeof ih=="function"&&(a=ih(a._payload)),A.isValidElement(a)){const l=gU(a),c=mU(o,a.props);return a.type!==A.Fragment&&(c.ref=n?zy(n,l):l),A.cloneElement(a,c)}return A.Children.count(a)>1?A.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var fU=Symbol("radix.slottable");function pU(s){return A.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===fU}function mU(s,t){const e={...t};for(const n in t){const a=s[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?e[n]=(...c)=>{const d=o(...c);return a(...c),d}:a&&(e[n]=a):n==="style"?e[n]={...a,...o}:n==="className"&&(e[n]=[a,o].filter(Boolean).join(" "))}return{...s,...e}}function gU(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}var yU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vU=yU.reduce((s,t)=>{const e=dU(`Primitive.${t}`),n=A.forwardRef((a,o)=>{const{asChild:l,...c}=a,d=l?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(d,{...c,ref:o})});return n.displayName=`Primitive.${t}`,{...s,[t]:n}},{}),bU="Label",O_=A.forwardRef((s,t)=>v.jsx(vU.label,{...s,ref:t,onMouseDown:e=>{e.target.closest("button, input, select, textarea")||(s.onMouseDown?.(e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}}));O_.displayName=bU;var P_=O_;const xU=Iy("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ne=A.forwardRef(({className:s,...t},e)=>v.jsx(P_,{ref:e,className:Qt(xU(),s),...t}));Ne.displayName=P_.displayName;const po=A.forwardRef(({className:s,...t},e)=>v.jsx("textarea",{className:Qt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:e,...t}));po.displayName="Textarea";function wU(s,t){return A.useReducer((e,n)=>t[e][n]??e,s)}var Mh=s=>{const{present:t,children:e}=s,n=SU(t),a=typeof e=="function"?e({present:n.isPresent}):A.Children.only(e),o=Pe(n.ref,AU(a));return typeof e=="function"||n.isPresent?A.cloneElement(a,{ref:o}):null};Mh.displayName="Presence";function SU(s){const[t,e]=A.useState(),n=A.useRef(null),a=A.useRef(s),o=A.useRef("none"),l=s?"mounted":"unmounted",[c,d]=wU(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const h=pd(n.current);o.current=c==="mounted"?h:"none"},[c]),un(()=>{const h=n.current,p=a.current;if(p!==s){const y=o.current,x=pd(h);s?d("MOUNT"):x==="none"||h?.display==="none"?d("UNMOUNT"):d(p&&y!==x?"ANIMATION_OUT":"UNMOUNT"),a.current=s}},[s,d]),un(()=>{if(t){let h;const p=t.ownerDocument.defaultView??window,m=x=>{const w=pd(n.current).includes(CSS.escape(x.animationName));if(x.target===t&&w&&(d("ANIMATION_END"),!a.current)){const E=t.style.animationFillMode;t.style.animationFillMode="forwards",h=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=E)})}},y=x=>{x.target===t&&(o.current=pd(n.current))};return t.addEventListener("animationstart",y),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{p.clearTimeout(h),t.removeEventListener("animationstart",y),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:A.useCallback(h=>{n.current=h?getComputedStyle(h):null,e(h)},[])}}function pd(s){return s?.animationName||"none"}function AU(s){let t=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=Object.getOwnPropertyDescriptor(s,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}var Dh="Dialog",[j_]=wh(Dh),[EU,Rs]=j_(Dh),B_=s=>{const{__scopeDialog:t,children:e,open:n,defaultOpen:a,onOpenChange:o,modal:l=!0}=s,c=A.useRef(null),d=A.useRef(null),[h,p]=Og({prop:n,defaultProp:a??!1,onChange:o,caller:Dh});return v.jsx(EU,{scope:t,triggerRef:c,contentRef:d,contentId:uo(),titleId:uo(),descriptionId:uo(),open:h,onOpenChange:p,onOpenToggle:A.useCallback(()=>p(m=>!m),[p]),modal:l,children:e})};B_.displayName=Dh;var F_="DialogTrigger",CU=A.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Rs(F_,e),o=Pe(t,a.triggerRef);return v.jsx(he.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":nv(a.open),...n,ref:o,onClick:ye(s.onClick,a.onOpenToggle)})});CU.displayName=F_;var tv="DialogPortal",[TU,I_]=j_(tv,{forceMount:void 0}),z_=s=>{const{__scopeDialog:t,forceMount:e,children:n,container:a}=s,o=Rs(tv,t);return v.jsx(TU,{scope:t,forceMount:e,children:A.Children.map(n,l=>v.jsx(Mh,{present:e||o.open,children:v.jsx(Qy,{asChild:!0,container:a,children:l})}))})};z_.displayName=tv;var ah="DialogOverlay",U_=A.forwardRef((s,t)=>{const e=I_(ah,s.__scopeDialog),{forceMount:n=e.forceMount,...a}=s,o=Rs(ah,s.__scopeDialog);return o.modal?v.jsx(Mh,{present:n||o.open,children:v.jsx(RU,{...a,ref:t})}):null});U_.displayName=ah;var _U=hc("DialogOverlay.RemoveScroll"),RU=A.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Rs(ah,e);return v.jsx(Zy,{as:_U,allowPinchZoom:!0,shards:[a.contentRef],children:v.jsx(he.div,{"data-state":nv(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Ja="DialogContent",V_=A.forwardRef((s,t)=>{const e=I_(Ja,s.__scopeDialog),{forceMount:n=e.forceMount,...a}=s,o=Rs(Ja,s.__scopeDialog);return v.jsx(Mh,{present:n||o.open,children:o.modal?v.jsx(NU,{...a,ref:t}):v.jsx(MU,{...a,ref:t})})});V_.displayName=Ja;var NU=A.forwardRef((s,t)=>{const e=Rs(Ja,s.__scopeDialog),n=A.useRef(null),a=Pe(t,e.contentRef,n);return A.useEffect(()=>{const o=n.current;if(o)return VT(o)},[]),v.jsx(H_,{...s,ref:a,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ye(s.onCloseAutoFocus,o=>{o.preventDefault(),e.triggerRef.current?.focus()}),onPointerDownOutside:ye(s.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&o.preventDefault()}),onFocusOutside:ye(s.onFocusOutside,o=>o.preventDefault())})}),MU=A.forwardRef((s,t)=>{const e=Rs(Ja,s.__scopeDialog),n=A.useRef(!1),a=A.useRef(!1);return v.jsx(H_,{...s,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{s.onCloseAutoFocus?.(o),o.defaultPrevented||(n.current||e.triggerRef.current?.focus(),o.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:o=>{s.onInteractOutside?.(o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const l=o.target;e.triggerRef.current?.contains(l)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),H_=A.forwardRef((s,t)=>{const{__scopeDialog:e,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,...l}=s,c=Rs(Ja,e),d=A.useRef(null),h=Pe(t,d);return gT(),v.jsxs(v.Fragment,{children:[v.jsx(Vy,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o,children:v.jsx(Uy,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":nv(c.open),...l,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),v.jsxs(v.Fragment,{children:[v.jsx(DU,{titleId:c.titleId}),v.jsx(LU,{contentRef:d,descriptionId:c.descriptionId})]})]})}),ev="DialogTitle",$_=A.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Rs(ev,e);return v.jsx(he.h2,{id:a.titleId,...n,ref:t})});$_.displayName=ev;var G_="DialogDescription",q_=A.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Rs(G_,e);return v.jsx(he.p,{id:a.descriptionId,...n,ref:t})});q_.displayName=G_;var X_="DialogClose",Y_=A.forwardRef((s,t)=>{const{__scopeDialog:e,...n}=s,a=Rs(X_,e);return v.jsx(he.button,{type:"button",...n,ref:t,onClick:ye(s.onClick,()=>a.onOpenChange(!1))})});Y_.displayName=X_;function nv(s){return s?"open":"closed"}var W_="DialogTitleWarning",[P6,K_]=HI(W_,{contentName:Ja,titleName:ev,docsSlug:"dialog"}),DU=({titleId:s})=>{const t=K_(W_),e=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return A.useEffect(()=>{s&&(document.getElementById(s)||console.error(e))},[e,s]),null},kU="DialogDescriptionWarning",LU=({contentRef:s,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${K_(kU).contentName}}.`;return A.useEffect(()=>{const a=s.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,s,t]),null},OU=B_,PU=z_,Q_=U_,Z_=V_,J_=$_,tR=q_,jU=Y_;const nc=OU,BU=PU,eR=A.forwardRef(({className:s,...t},e)=>v.jsx(Q_,{ref:e,className:Qt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));eR.displayName=Q_.displayName;const mo=A.forwardRef(({className:s,children:t,...e},n)=>v.jsxs(BU,{children:[v.jsx(eR,{}),v.jsxs(Z_,{ref:n,className:Qt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...e,children:[t,v.jsxs(jU,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[v.jsx(sa,{className:"h-4 w-4"}),v.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));mo.displayName=Z_.displayName;const go=({className:s,...t})=>v.jsx("div",{className:Qt("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});go.displayName="DialogHeader";const Pd=({className:s,...t})=>v.jsx("div",{className:Qt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});Pd.displayName="DialogFooter";const yo=A.forwardRef(({className:s,...t},e)=>v.jsx(J_,{ref:e,className:Qt("text-lg font-semibold leading-none tracking-tight",s),...t}));yo.displayName=J_.displayName;const jd=A.forwardRef(({className:s,...t},e)=>v.jsx(tR,{ref:e,className:Qt("text-sm text-muted-foreground",s),...t}));jd.displayName=tR.displayName;function FU({open:s,onOpenChange:t,onCorrespondentCreated:e}){const[n,a]=A.useState(!1),[o,l]=A.useState(""),[c,d]=A.useState(" "),[h,p]=A.useState(""),[m,y]=A.useState(""),[x,S]=A.useState(""),[w,E]=A.useState(""),[C,T]=A.useState(""),[R,N]=A.useState(""),M=async()=>{if(!o){alert("  ");return}a(!0);try{const k=await fetch(`${window.location.origin}/api/resource/EDO Correspondent`,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":zt.getCSRFToken()},body:JSON.stringify({correspondent_name:o,correspondent_type:c,organization_name:h,inn:m,address:x,contact_person:w,phone:C,email:R})});if(!k.ok){const U=await k.json();throw new Error(U.message||"Failed to create correspondent")}const L=await k.json(),j={name:L.data.name,correspondent_name:L.data.correspondent_name};e?.(j),O(),t(!1)}catch(k){console.error("Failed to create correspondent:",k),alert("   ")}finally{a(!1)}},O=()=>{l(""),d(" "),p(""),y(""),S(""),E(""),T(""),N("")};return v.jsx(nc,{open:s,onOpenChange:t,children:v.jsxs(mo,{className:"max-w-2xl",children:[v.jsx(go,{className:"text-left",children:v.jsx(yo,{className:"text-xl",children:" "})}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsxs(Ne,{htmlFor:"correspondent_name",children:[" ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx(Nn,{id:"correspondent_name",placeholder:"  ",value:o,onChange:k=>l(k.target.value)})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Ne,{htmlFor:"correspondent_type",children:" "}),v.jsxs(us,{value:c,onValueChange:d,children:[v.jsx(Hn,{children:v.jsx(ds,{})}),v.jsxs($n,{children:[v.jsx(pn,{value:" ",children:" "}),v.jsx(pn,{value:" ",children:" "}),v.jsx(pn,{value:" ",children:" "})]})]})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx(Ne,{htmlFor:"organization",children:"  "}),v.jsx(Nn,{id:"organization",placeholder:" ",value:h,onChange:k=>p(k.target.value)})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Ne,{htmlFor:"inn",children:""}),v.jsx(Nn,{id:"inn",placeholder:"1234567890",value:m,onChange:k=>y(k.target.value)})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Ne,{htmlFor:"address",children:""}),v.jsx(po,{id:"address",placeholder:". , . , . 1",rows:2,value:x,onChange:k=>S(k.target.value)})]}),v.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx(Ne,{htmlFor:"contact_person",children:" "}),v.jsx(Nn,{id:"contact_person",placeholder:" ..",value:w,onChange:k=>E(k.target.value)})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Ne,{htmlFor:"phone",children:""}),v.jsx(Nn,{id:"phone",placeholder:"+998 90 123 45 67",value:C,onChange:k=>T(k.target.value)})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Ne,{htmlFor:"email",children:"Email"}),v.jsx(Nn,{id:"email",type:"email",placeholder:"info@example.com",value:R,onChange:k=>N(k.target.value)})]})]})]}),v.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 border-t",children:[v.jsx(Jt,{type:"button",variant:"outline",onClick:()=>{O(),t(!1)},children:""}),v.jsx(Jt,{type:"button",onClick:M,disabled:n,className:"bg-blue-600 hover:bg-blue-700 text-white",children:n?"...":""})]})]})})}function IU({users:s,value:t,onChange:e,placeholder:n=" ",disabled:a=!1}){const[o,l]=A.useState(!1),[c,d]=A.useState(""),h=s.find(m=>m.name===t),p=A.useMemo(()=>{if(!c.trim())return s;const m=c.toLowerCase();return s.filter(y=>(y.full_name||"").toLowerCase().includes(m)||y.name.toLowerCase().includes(m)||(y.email||"").toLowerCase().includes(m))},[s,c]);return v.jsxs("div",{className:"relative",children:[v.jsxs(Jt,{type:"button",variant:"outline",role:"combobox","aria-expanded":o,disabled:a,className:"w-full justify-between font-normal",onClick:()=>l(!o),children:[h?v.jsxs("div",{className:"flex items-center gap-2",children:[h.user_image?v.jsx("img",{src:h.user_image,alt:"",className:"w-5 h-5 rounded-full"}):v.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-300 flex items-center justify-center text-xs",children:(h.full_name||h.name).charAt(0).toUpperCase()}),v.jsx("span",{className:"truncate",children:h.full_name||h.name})]}):v.jsx("span",{className:"text-muted-foreground",children:n}),v.jsx(zF,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}),o&&v.jsxs("div",{className:"absolute z-50 mt-1 w-full rounded-md border bg-white shadow-lg",children:[v.jsx("div",{className:"p-2 border-b",children:v.jsxs("div",{className:"relative",children:[v.jsx(xh,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),v.jsx(Nn,{placeholder:"...",value:c,onChange:m=>d(m.target.value),className:"pl-8",autoFocus:!0})]})}),v.jsx("div",{className:"max-h-60 overflow-y-auto p-1",children:p.length===0?v.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"  "}):p.map(m=>v.jsxs("div",{className:Qt("flex items-center gap-2 px-2 py-2 cursor-pointer rounded hover:bg-gray-100",t===m.name&&"bg-blue-50"),onClick:()=>{e(m.name),l(!1),d("")},children:[v.jsx(KC,{className:Qt("h-4 w-4",t===m.name?"opacity-100":"opacity-0")}),m.user_image?v.jsx("img",{src:m.user_image,alt:"",className:"w-6 h-6 rounded-full"}):v.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-xs",children:(m.full_name||m.name).charAt(0).toUpperCase()}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("div",{className:"text-sm font-medium truncate",children:m.full_name||m.name}),v.jsx("div",{className:"text-xs text-muted-foreground truncate",children:m.email})]})]},m.name))})]}),o&&v.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)})]})}function zU({users:s,value:t,onChange:e,placeholder:n=" ",disabled:a=!1,excludeUsers:o=[]}){const[l,c]=A.useState(!1),[d,h]=A.useState(""),p=A.useMemo(()=>s.filter(w=>!o.includes(w.name)),[s,o]),m=A.useMemo(()=>{if(!d.trim())return p;const w=d.toLowerCase();return p.filter(E=>(E.full_name||"").toLowerCase().includes(w)||E.name.toLowerCase().includes(w)||(E.email||"").toLowerCase().includes(w))},[p,d]),y=s.filter(w=>t.includes(w.name)),x=w=>{t.includes(w)?e(t.filter(E=>E!==w)):e([...t,w])},S=w=>{e(t.filter(E=>E!==w))};return v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:Qt("min-h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm cursor-pointer",a&&"opacity-50 cursor-not-allowed"),onClick:()=>!a&&c(!l),children:y.length>0?v.jsx("div",{className:"flex flex-wrap gap-1",children:y.map(w=>v.jsxs("span",{className:"inline-flex items-center gap-1 bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs",children:[w.full_name||w.name,v.jsx(sa,{className:"h-3 w-3 cursor-pointer hover:text-blue-600",onClick:E=>{E.stopPropagation(),S(w.name)}})]},w.name))}):v.jsx("span",{className:"text-muted-foreground",children:n})}),l&&v.jsxs("div",{className:"absolute z-50 mt-1 w-full rounded-md border bg-white shadow-lg",children:[v.jsx("div",{className:"p-2 border-b",children:v.jsxs("div",{className:"relative",children:[v.jsx(xh,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),v.jsx(Nn,{placeholder:"...",value:d,onChange:w=>h(w.target.value),className:"pl-8",autoFocus:!0})]})}),v.jsx("div",{className:"max-h-60 overflow-y-auto p-1",children:m.length===0?v.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"  "}):m.map(w=>v.jsxs("div",{className:Qt("flex items-center gap-2 px-2 py-2 cursor-pointer rounded hover:bg-gray-100",t.includes(w.name)&&"bg-blue-50"),onClick:()=>x(w.name),children:[v.jsx("input",{type:"checkbox",checked:t.includes(w.name),onChange:()=>{},className:"rounded border-gray-300"}),w.user_image?v.jsx("img",{src:w.user_image,alt:"",className:"w-6 h-6 rounded-full"}):v.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-xs",children:(w.full_name||w.name).charAt(0).toUpperCase()}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("div",{className:"text-sm font-medium truncate",children:w.full_name||w.name}),v.jsx("div",{className:"text-xs text-muted-foreground truncate",children:w.email})]})]},w.name))})]}),l&&v.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)})]})}function nR({open:s,onOpenChange:t,onDocumentCreated:e,editDocument:n,onDocumentUpdated:a}){const o=!!n,[l,c]=A.useState(!1),[d,h]=A.useState(!1),[p,m]=A.useState(!1),[y,x]=A.useState(""),[S,w]=A.useState(""),[E,C]=A.useState(""),[T,R]=A.useState(""),[N,M]=A.useState(""),[O,k]=A.useState(""),[L,j]=A.useState(""),[U,H]=A.useState(""),[$,Z]=A.useState(""),[et,ct]=A.useState(""),[P,z]=A.useState(""),[I,K]=A.useState(null),[ht,B]=A.useState([]),[X,tt]=A.useState(null),[ot,pt]=A.useState([]),[st,nt]=A.useState(""),[Et,bt]=A.useState([]),[Nt,q]=A.useState([]),[lt,ut]=A.useState([]),[ft,gt]=A.useState([]),[dt,Tt]=A.useState([]),[kt,Kt]=A.useState([]),[Zt,Mn]=A.useState([]);A.useEffect(()=>{s&&(Yn(),n?(x(n.incoming_number||""),w(n.incoming_date||""),C(n.outgoing_number||""),R(n.outgoing_date||""),M(n.title||""),k(n.correspondent||""),j(n.document_type||""),H(n.priority||""),Z(n.brief_content||""),ct(n.classification||""),z(n.delivery_method||""),nt(n.executor||""),bt(n.co_executors?.map(mt=>mt.user)||[]),tt(n.main_document||null),pt(n.attachments||[])):w(new Date().toISOString().split("T")[0]))},[s,n]);const Yn=async()=>{try{const[mt,fe,Ns,Ms,pe,Wn]=await Promise.all([zt.getCorrespondents(),zt.getDocumentTypes(),zt.getPriorities(),zt.getClassifications(),zt.getDeliveryMethods(),zt.getUsers()]);q(mt),ut(fe),gt(Ns),Tt(Ms),Kt(pe),Mn(Wn)}catch(mt){console.error("Failed to load reference data:",mt)}},pa=mt=>{mt.target.files&&mt.target.files[0]&&K(mt.target.files[0])},Ke=mt=>{if(mt.target.files){const fe=Array.from(mt.target.files);B([...ht,...fe])}},Uo=mt=>{B(ht.filter((fe,Ns)=>Ns!==mt))},rr=mt=>{pt(ot.filter((fe,Ns)=>Ns!==mt))},or=async mt=>{const fe=await zt.getCorrespondents();q(fe),k(mt.name)},dn=async()=>{if(!O||!L){alert("  ");return}c(!0);try{h(!0);let mt=X||"";I&&(mt=await zt.uploadFile(I));const fe=[];for(const pe of ht){const Wn=await zt.uploadFile(pe);fe.push({attachment:Wn,file_name:pe.name,file_size:pe.size})}const Ns=[...ot,...fe];h(!1);const Ms={incoming_number:y||void 0,incoming_date:S||void 0,outgoing_number:E||void 0,outgoing_date:T||void 0,title:N||void 0,correspondent:O,document_type:L,priority:U||void 0,brief_content:$||void 0,classification:et||void 0,delivery_method:P||void 0,main_document:mt||void 0,attachments:Ns.length>0?Ns:void 0,executor:st||void 0,co_executors:Et.length>0?Et.map(pe=>({user:pe})):void 0};if(o&&n){const pe=await zt.updateDocument(n.name,Ms);a?.(pe)}else{const pe=await zt.createDocument(Ms);e?.(pe)}gs(),t(!1)}catch(mt){console.error(o?"Failed to update document:":"Failed to create document:",mt);let fe=o?"   ":"   ";mt?.message&&(fe+=": "+mt.message),alert(fe)}finally{c(!1),h(!1)}},gs=()=>{x(""),w(""),C(""),R(""),M(""),k(""),j(""),H(""),Z(""),ct(""),z(""),K(null),B([]),nt(""),bt([]),tt(null),pt([])};return v.jsxs(v.Fragment,{children:[v.jsx(nc,{open:s,onOpenChange:t,children:v.jsxs(mo,{className:"max-w-4xl max-h-[90vh] overflow-y-auto custom-scrollbar",children:[v.jsx(go,{className:"text-left",children:v.jsx(yo,{className:"text-xl",children:o?" ":" "})}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[v.jsxs("div",{className:"space-y-4",children:[v.jsx("h3",{className:"text-base font-semibold",children:" "}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsxs(Ne,{htmlFor:"incoming_number",children:["  ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx(Nn,{id:"incoming_number",placeholder:" ",value:y,onChange:mt=>x(mt.target.value)})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs(Ne,{htmlFor:"incoming_date",children:["  ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx(Nn,{id:"incoming_date",type:"date",value:S,onChange:mt=>w(mt.target.value)})]})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx(Ne,{htmlFor:"outgoing_number",children:" "}),v.jsx(Nn,{id:"outgoing_number",placeholder:" ",value:E,onChange:mt=>C(mt.target.value)})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Ne,{htmlFor:"outgoing_date",children:" "}),v.jsx(Nn,{id:"outgoing_date",type:"date",placeholder:"..",value:T,onChange:mt=>R(mt.target.value)})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Ne,{htmlFor:"title",children:" "}),v.jsx(Nn,{id:"title",placeholder:"  ",value:N,onChange:mt=>M(mt.target.value)})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs(Ne,{htmlFor:"correspondent",children:[" ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs(us,{value:O,onValueChange:k,children:[v.jsx(Hn,{className:"flex-1",children:v.jsx(ds,{placeholder:"  "})}),v.jsx($n,{children:Nt.map(mt=>v.jsx(pn,{value:mt.name,children:mt.correspondent_name},mt.name))})]}),v.jsx(Jt,{type:"button",variant:"outline",className:"shrink-0",onClick:()=>m(!0),children:""})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsxs(Ne,{htmlFor:"brief_content",children:["  ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx(po,{id:"brief_content",placeholder:"   ",rows:3,value:$,onChange:mt=>Z(mt.target.value)})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsxs(Ne,{htmlFor:"document_type",children:["  ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsxs(us,{value:L,onValueChange:j,children:[v.jsx(Hn,{children:v.jsx(ds,{placeholder:" "})}),v.jsx($n,{children:lt.map(mt=>v.jsx(pn,{value:mt.name,children:mt.document_type_name},mt.name))})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Ne,{htmlFor:"priority",children:""}),v.jsxs(us,{value:U,onValueChange:H,children:[v.jsx(Hn,{children:v.jsx(ds,{placeholder:""})}),v.jsx($n,{children:ft.map(mt=>v.jsx(pn,{value:mt.name,children:mt.priority_name},mt.name))})]})]})]})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("h3",{className:"text-base font-semibold",children:""}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Ne,{children:""}),v.jsx(IU,{users:Zt,value:st,onChange:nt,placeholder:" ..."})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Ne,{children:""}),v.jsx(zU,{users:Zt,value:Et,onChange:bt,excludeUsers:st?[st]:[],placeholder:" ..."})]})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("h3",{className:"text-base font-semibold",children:" "}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx(Ne,{htmlFor:"delivery_method",children:" "}),v.jsxs(us,{value:P,onValueChange:z,children:[v.jsx(Hn,{children:v.jsx(ds,{placeholder:" "})}),v.jsx($n,{children:kt.map(mt=>v.jsx(pn,{value:mt.name,children:mt.delivery_method_name},mt.name))})]})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(Ne,{htmlFor:"classification",children:""}),v.jsxs(us,{value:et,onValueChange:ct,children:[v.jsx(Hn,{children:v.jsx(ds,{placeholder:""})}),v.jsx($n,{children:dt.map(mt=>v.jsx(pn,{value:mt.name,children:mt.classification_name},mt.name))})]})]})]})]})]}),v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"space-y-4",children:[v.jsx("h3",{className:"text-base font-semibold",children:" "}),v.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[v.jsx(H3,{className:"w-12 h-12 mx-auto text-muted-foreground mb-3"}),v.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"      "}),v.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"PDF, DOC, DOCX  10 "}),v.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:".pdf,.doc,.docx",onChange:pa}),v.jsx(Jt,{type:"button",variant:"outline",size:"sm",onClick:()=>document.getElementById("file-upload")?.click(),children:" "}),X&&!I&&v.jsxs("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[v.jsx(Gn,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("p",{className:"text-sm font-medium text-green-900 truncate",children:X.split("/").pop()}),v.jsx("p",{className:"text-xs text-green-600",children:" "})]}),v.jsx("button",{type:"button",onClick:()=>tt(null),className:"text-green-600 hover:text-red-600",title:" ",children:v.jsx(sa,{className:"w-4 h-4"})})]}),I&&v.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center gap-2",children:[v.jsx(Gn,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("p",{className:"text-sm font-medium text-blue-900 truncate",children:I.name}),v.jsxs("p",{className:"text-xs text-blue-600",children:[(I.size/1024).toFixed(1),"  ()"]})]}),v.jsx("button",{type:"button",onClick:()=>K(null),className:"text-blue-600 hover:text-blue-800",children:v.jsx(sa,{className:"w-4 h-4"})})]})]})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("h3",{className:"text-base font-semibold",children:""}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("input",{type:"file",id:"attachments-upload",className:"hidden",multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:Ke}),v.jsx(Jt,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("attachments-upload")?.click(),children:" "}),ot.length>0&&v.jsxs("div",{className:"space-y-2 mt-2",children:[v.jsx("p",{className:"text-xs text-muted-foreground",children:" :"}),ot.map((mt,fe)=>v.jsxs("div",{className:"p-2 bg-green-50 border border-green-200 rounded flex items-center gap-2",children:[v.jsx(Gn,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("p",{className:"text-sm text-green-900 truncate",children:mt.file_name}),mt.file_size&&v.jsxs("p",{className:"text-xs text-green-600",children:[(mt.file_size/1024).toFixed(1)," "]})]}),v.jsx("button",{type:"button",onClick:()=>rr(fe),className:"text-green-600 hover:text-red-600",title:" ",children:v.jsx(sa,{className:"w-4 h-4"})})]},`existing-${fe}`))]}),ht.length>0&&v.jsxs("div",{className:"space-y-2 mt-2",children:[v.jsx("p",{className:"text-xs text-muted-foreground",children:" :"}),ht.map((mt,fe)=>v.jsxs("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded flex items-center gap-2",children:[v.jsx(Gn,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("p",{className:"text-sm text-blue-900 truncate",children:mt.name}),v.jsxs("p",{className:"text-xs text-blue-600",children:[(mt.size/1024).toFixed(1)," "]})]}),v.jsx("button",{type:"button",onClick:()=>Uo(fe),className:"text-blue-600 hover:text-red-600",children:v.jsx(sa,{className:"w-4 h-4"})})]},fe))]})]})]}),v.jsxs("div",{className:"space-y-3 text-sm",children:[v.jsx("h3",{className:"text-base font-semibold",children:""}),v.jsxs("div",{className:"space-y-2 text-muted-foreground",children:[v.jsxs("p",{children:[v.jsx("strong",{children:" :"}),"    "]}),v.jsxs("p",{children:[v.jsx("strong",{children:":"}),"    "]}),v.jsxs("p",{children:[v.jsx("strong",{children:" :"}),"    "]})]})]})]})]}),v.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[v.jsx(Jt,{type:"button",variant:"outline",onClick:()=>{gs(),t(!1)},children:""}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx(Jt,{type:"button",variant:"outline",disabled:l,children:" "}),v.jsx(Jt,{type:"button",onClick:dn,disabled:l||d,className:"bg-blue-600 hover:bg-blue-700 text-white",children:d?" ...":l?o?"...":"...":o?"":""})]})]})]})}),v.jsx(FU,{open:p,onOpenChange:m,onCorrespondentCreated:or})]})}function UU({documents:s,selectedDocument:t,onSelectDocument:e,loading:n,error:a,onDocumentsRefresh:o,onFiltersChange:l}){const{t:c}=_s(),[d,h]=A.useState([]),[p,m]=A.useState(!1),[y,x]=A.useState(!1),[S,w]=A.useState(""),[E,C]=A.useState(""),[T,R]=A.useState(""),[N,M]=A.useState(""),[O,k]=A.useState(""),L=A.useRef(null),[j,U]=A.useState([]),[H,$]=A.useState([]),[Z,et]=A.useState([]),[ct,P]=A.useState([]);A.useEffect(()=>{B(),z()},[]);const z=async()=>{try{const[st,nt,Et,bt]=await Promise.all([zt.getStatuses(),zt.getDocumentTypes(),zt.getPriorities(),zt.getCorrespondents()]);U(st),$(nt),et(Et),P(bt)}catch(st){console.error("Failed to load filter data:",st)}},I=A.useCallback(()=>{l&&l({search:S.trim()||void 0,status:E||void 0,document_type:T||void 0,priority:N||void 0,correspondent:O||void 0})},[S,E,T,N,O,l]);A.useEffect(()=>{const st=setTimeout(()=>{I()},500);return()=>clearTimeout(st)},[S,E,T,N,O,I]);const K=()=>{w(""),C(""),R(""),M(""),k("")},ht=[E,T,N,O].filter(Boolean).length,B=async()=>{try{const st=await zt.getCurrentUser();h(st.roles||[])}catch(st){console.error("Failed to load user roles:",st)}},X=d.includes("EDO Admin")||d.includes("EDO Manager"),tt=()=>{m(!0)},ot=async st=>{o&&(await o(),st&&setTimeout(()=>{e(st)},100))},pt=st=>st===c("documents.status.signed")||st===""?"default":st===c("documents.status.pending")||st===" "?"secondary":st===c("documents.status.archived")||st===""?"outline":"secondary";return n?v.jsxs("div",{className:"flex flex-col h-full",children:[v.jsx("div",{className:"p-3 border-b",children:v.jsx(Il,{className:"h-9 w-full"})}),v.jsx("div",{className:"flex-1 overflow-y-auto",children:Array.from({length:5}).map((st,nt)=>v.jsxs("div",{className:"p-4 border-b",children:[v.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[v.jsx(Il,{className:"h-4 w-3/4"}),v.jsx(Il,{className:"h-5 w-16 shrink-0"})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(Il,{className:"h-3 w-24"}),v.jsx(Il,{className:"h-3 w-20"})]})]},nt))})]}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex flex-col h-full",children:[v.jsx("div",{className:"p-3 border-b",children:v.jsxs("div",{className:"relative",children:[v.jsx(xh,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),v.jsx("input",{ref:L,type:"text",placeholder:c("documentSidebar.searchPlaceholder"),value:S,onChange:st=>{const nt=st.target.value,Et=document.activeElement===st.target;w(nt),Et&&L.current&&requestAnimationFrame(()=>{if(L.current){L.current.focus();const bt=L.current.value.length;L.current.setSelectionRange(bt,bt)}})},className:"w-full pl-9 pr-3 py-2 text-sm border rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-ring"})]})}),v.jsx("div",{className:"p-3 border-b bg-muted/30",children:v.jsxs(Jt,{variant:"ghost",size:"sm",onClick:()=>x(!y),className:"w-full justify-between h-9",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(t3,{className:"w-4 h-4"}),v.jsx("span",{className:"text-sm font-medium",children:""}),ht>0&&v.jsx(R1,{variant:"secondary",className:"ml-1 h-5 min-w-5 px-1.5 text-xs",children:ht})]}),y?v.jsx(QC,{className:"w-4 h-4 text-muted-foreground"}):v.jsx(bh,{className:"w-4 h-4 text-muted-foreground"})]})}),y&&v.jsxs("div",{className:"p-3 border-b bg-muted/20 space-y-3 animate-in slide-in-from-top-2 duration-200",children:[v.jsxs("div",{className:"space-y-1.5",children:[v.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[v.jsx(F3,{className:"w-3.5 h-3.5"}),""]}),v.jsxs(us,{value:E||void 0,onValueChange:st=>C(st||""),children:[v.jsx(Hn,{className:"h-9 text-sm",children:v.jsx(ds,{placeholder:" "})}),v.jsx($n,{children:j.map(st=>v.jsx(pn,{value:st.name,children:st.status_name},st.name))})]})]}),v.jsxs("div",{className:"space-y-1.5",children:[v.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[v.jsx(ZF,{className:"w-3.5 h-3.5"})," "]}),v.jsxs(us,{value:T||void 0,onValueChange:st=>R(st||""),children:[v.jsx(Hn,{className:"h-9 text-sm",children:v.jsx(ds,{placeholder:" "})}),v.jsx($n,{children:H.map(st=>v.jsx(pn,{value:st.name,children:st.document_type_name},st.name))})]})]}),v.jsxs("div",{className:"space-y-1.5",children:[v.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[v.jsx(VF,{className:"w-3.5 h-3.5"}),""]}),v.jsxs(us,{value:N||void 0,onValueChange:st=>M(st||""),children:[v.jsx(Hn,{className:"h-9 text-sm",children:v.jsx(ds,{placeholder:" "})}),v.jsx($n,{children:Z.map(st=>v.jsx(pn,{value:st.name,children:st.priority_name},st.name))})]})]}),v.jsxs("div",{className:"space-y-1.5",children:[v.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[v.jsx(NF,{className:"w-3.5 h-3.5"}),""]}),v.jsxs(us,{value:O||void 0,onValueChange:st=>k(st||""),children:[v.jsx(Hn,{className:"h-9 text-sm",children:v.jsx(ds,{placeholder:" "})}),v.jsx($n,{children:ct.map(st=>v.jsx(pn,{value:st.name,children:st.correspondent_name},st.name))})]})]}),ht>0&&v.jsxs(Jt,{variant:"outline",size:"sm",onClick:K,className:"w-full h-9 text-sm",children:[v.jsx(sa,{className:"w-4 h-4 mr-2"}),"  (",ht,")"]})]}),X&&v.jsx("div",{className:"p-3 border-b bg-muted/30",children:v.jsxs(Jt,{onClick:tt,className:"w-full",size:"sm",children:[v.jsx(ZC,{className:"w-4 h-4 mr-2"}),c("documentSidebar.addDocument")]})}),a&&v.jsx("div",{className:"p-3 border-b",children:v.jsxs("div",{className:"text-sm text-destructive bg-destructive/10 p-2 rounded",children:[c("common.error"),": ",a]})}),v.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.length===0&&!n?v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[v.jsx(Gn,{className:"w-12 h-12 text-muted-foreground mb-3"}),v.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:c("documentSidebar.noDocuments")}),(S||ht>0)&&v.jsx("p",{className:"text-xs text-muted-foreground",children:"     "})]}):s.map(st=>v.jsxs("div",{onClick:()=>e(st),className:Qt("p-4 border-b cursor-pointer transition-colors hover:bg-muted/50",t?.name===st.name&&"bg-muted"),children:[v.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[v.jsx("h3",{className:"font-medium text-sm line-clamp-2",children:st.title}),v.jsx(R1,{variant:pt(st.status),className:"text-xs shrink-0",children:st.status})]}),v.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[st.document_type&&v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(Gn,{className:"w-3 h-3"}),st.document_type]}),st.document_date&&v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(DF,{className:"w-3 h-3"}),new Date(st.document_date).toLocaleDateString("ru-RU")]})]})]},st.name))})]}),v.jsx(nR,{open:p,onOpenChange:m,onDocumentCreated:ot})]})}const VU="_editor_191r9_2",HU={editor:VU};function $U({value:s,onChange:t,placeholder:e}){const n=A.useRef(null),a=A.useRef(null),o=A.useRef(!0),[l,c]=A.useState(!1);A.useEffect(()=>{o.current&&n.current&&s&&(n.current.innerHTML=s,o.current=!1)},[]),A.useEffect(()=>{n.current&&s===""&&n.current.innerHTML!==""&&(n.current.innerHTML="")},[s]);const d=()=>{n.current&&t(n.current.innerHTML)},h=()=>{c(!0)},p=()=>{c(!1)},m=(x,S)=>{document.execCommand(x,!1,S),n.current?.focus()},y=()=>{const x=window.prompt(" URL:");x&&m("createLink",x)};return v.jsxs(Ga.div,{ref:a,animate:{scale:l?1.005:1},transition:{type:"spring",stiffness:400,damping:30},className:`relative border border-input rounded-xl overflow-hidden focus-within:border-primary focus-within:ring-1 focus-within:ring-primary/20 transition-all bg-background ${HU.editor}`,children:[v.jsxs("div",{className:"flex items-center gap-1 px-4 py-2.5 border-b border-border/60 bg-slate-50/50",children:[v.jsx("button",{type:"button",onClick:()=>m("bold"),className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:" (Ctrl+B)",children:v.jsx(_F,{className:"h-4 w-4",strokeWidth:2.5})}),v.jsx("button",{type:"button",onClick:()=>m("italic"),className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:" (Ctrl+I)",children:v.jsx(r3,{className:"h-4 w-4",strokeWidth:2.5})}),v.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1.5"}),v.jsx("button",{type:"button",onClick:()=>m("insertUnorderedList"),className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:" ",children:v.jsx(p3,{className:"h-4 w-4",strokeWidth:2.5})}),v.jsx("button",{type:"button",onClick:()=>m("insertOrderedList"),className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:" ",children:v.jsx(h3,{className:"h-4 w-4",strokeWidth:2.5})}),v.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1.5"}),v.jsx("button",{type:"button",onClick:y,className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:"  (Ctrl+K)",children:v.jsx(u3,{className:"h-4 w-4",strokeWidth:2.5})})]}),v.jsx("div",{ref:n,contentEditable:!0,onInput:d,onFocus:h,onBlur:p,className:"min-h-[140px] max-h-[500px] overflow-y-auto px-4 py-3.5 text-[15px] leading-relaxed focus:outline-none","data-placeholder":e,style:{wordBreak:"break-word"}})]})}const GU="_customScrollbar_1a8f8_2",qU="_commentContent_1a8f8_31",tA={customScrollbar:GU,commentContent:qU};function XU({doctype:s,docname:t}){const{t:e}=_s(),[n,a]=A.useState([]),[o,l]=A.useState(5),[c,d]=A.useState(""),[h,p]=A.useState(!1),[m,y]=A.useState(!1),[x,S]=A.useState(null),[w,E]=A.useState(!1),C=A.useRef(null),T=A.useRef(null),R=A.useRef(null);A.useEffect(()=>{M(),N()},[s,t]);const N=async()=>{try{const Z=await zt.getCurrentUser();E(Z.roles?.includes("EDO Admin")||!1)}catch(Z){console.error("Failed to check admin role:",Z),E(!1)}},M=async()=>{p(!0);try{const Z=await zt.getComments(s,t);a(Z.reverse())}catch(Z){console.error("Failed to load comments:",Z)}finally{p(!1)}},O=Z=>{const et=Z.currentTarget;et.scrollHeight-et.scrollTop<=et.clientHeight+50&&o<n.length&&l(P=>Math.min(P+5,n.length))},k=n.slice(0,o),L=o<n.length,j=async Z=>{Z.preventDefault();const et=document.createElement("div");if(et.innerHTML=c,!!(et.textContent||et.innerText||"").trim()){y(!0);try{const P=await zt.addComment(s,t,c);d(""),S(P.name),await new Promise(z=>setTimeout(z,50)),await M(),setTimeout(()=>{T.current&&T.current.scrollTo({top:0,behavior:"smooth"})},100)}catch(P){console.error("Failed to add comment:",P)}finally{y(!1)}}},U=Z=>{const et=new Date(Z);return new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(et)},H=Z=>Z.split(" ").map(et=>et[0]).join("").toUpperCase().slice(0,2),$=async Z=>{if(!w)return;const et=e("deleteCommentConfirm")||" ,     ?";if(confirm(et))try{await zt.deleteComment(Z),a(ct=>ct.filter(P=>P.name!==Z))}catch(ct){console.error("Failed to delete comment:",ct);const P=e("deleteCommentError")||"   ";alert(P)}};return v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[v.jsx(v3,{className:"h-4 w-4"}),e("comments"),v.jsxs("span",{className:"text-muted-foreground",children:["(",n.length,")"]})]}),h?v.jsxs("div",{className:"text-sm text-muted-foreground",children:[e("loading"),"..."]}):v.jsx("div",{ref:T,className:`pr-2 ${tA.customScrollbar}`,onScroll:O,style:{maxHeight:"300px",overflowY:"scroll"},children:v.jsxs("div",{ref:C,className:"space-y-3",children:[v.jsx(Wd,{mode:"popLayout",children:k.map(Z=>{const et=Z.name===x;return v.jsxs(Ga.div,{layout:!0,initial:et?{opacity:0,x:-100}:!1,animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{type:"spring",stiffness:400,damping:30,mass:.8},className:"flex gap-3",children:[v.jsx("div",{className:"h-8 w-8 rounded-full bg-primary flex items-center justify-center shrink-0",children:v.jsx("span",{className:"text-xs font-medium text-primary-foreground",children:H(Z.comment_by)})}),v.jsxs("div",{className:"flex-1 space-y-1",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-sm font-medium",children:Z.comment_by}),v.jsx("span",{className:"text-xs text-muted-foreground",children:U(Z.creation)})]}),w&&v.jsx(Jt,{variant:"ghost",size:"sm",onClick:()=>$(Z.name),className:"h-6 w-6 p-0 text-muted-foreground hover:text-destructive",children:v.jsx(JC,{className:"h-3 w-3"})})]}),v.jsx("div",{className:`text-sm text-foreground ${tA.commentContent}`,dangerouslySetInnerHTML:{__html:Z.content}})]})]},Z.name)})}),L&&v.jsx("div",{className:"text-center py-2 text-xs text-muted-foreground",children:"    ..."})]})}),v.jsxs(Ga.form,{ref:R,onSubmit:j,className:"space-y-2",animate:m?{scale:.98}:{scale:1},transition:{type:"spring",stiffness:500,damping:30},children:[v.jsx($U,{value:c,onChange:d,placeholder:e("addComment")}),v.jsxs(Jt,{type:"submit",size:"sm",disabled:m,children:[v.jsx(_3,{className:"h-4 w-4 mr-2"}),e(m?"sending":"send")]})]})]})}const sR=A.forwardRef(({className:s,value:t=0,...e},n)=>v.jsx("div",{ref:n,className:Qt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...e,children:v.jsx("div",{className:"h-full bg-primary transition-all duration-300 ease-in-out",style:{width:`${Math.min(100,Math.max(0,t))}%`}})}));sR.displayName="Progress";const fn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Ug=[.001,0,0,.001,0,0],Vm=1.35,In={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Hs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},mc="pdfjs_internal_editor_",jt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Xt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},iR={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},nn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},sc={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Le={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Zr={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Mc={ERRORS:0,WARNINGS:1,INFOS:5},To={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},md={moveTo:0,lineTo:1,curveTo:2,closePath:3},aR={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let kh=Mc.WARNINGS;function YU(s){Number.isInteger(s)&&(kh=s)}function WU(){return kh}function Lh(s){kh>=Mc.INFOS&&console.info(`Info: ${s}`)}function Bt(s){kh>=Mc.WARNINGS&&console.warn(`Warning: ${s}`)}function de(s){throw new Error(s)}function Wt(s,t){s||de(t)}function KU(s){switch(s?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function sv(s,t=null,e=null){if(!s)return null;if(e&&typeof s=="string"&&(e.addDefaultProtocol&&s.startsWith("www.")&&s.match(/\./g)?.length>=2&&(s=`http://${s}`),e.tryConvertEncoding))try{s=eV(s)}catch{}const n=t?URL.parse(s,t):URL.parse(s);return KU(n)?n:null}function iv(s,t,e=!1){const n=URL.parse(s);return n?(n.hash=t,n.href):e&&sv(s,"http://example.com")?s.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Ut(s,t,e,n=!1){return Object.defineProperty(s,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const ir=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class eA extends ir{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Hm extends ir{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class rh extends ir{constructor(t){super(t,"InvalidPDFException")}}class gc extends ir{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class QU extends ir{constructor(t){super(t,"FormatError")}}class Ei extends ir{constructor(t){super(t,"AbortException")}}function rR(s){(typeof s!="object"||s?.length===void 0)&&de("Invalid argument for bytesToString");const t=s.length,e=8192;if(t<e)return String.fromCharCode.apply(null,s);const n=[];for(let a=0;a<t;a+=e){const o=Math.min(a+e,t),l=s.subarray(a,o);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function Dc(s){typeof s!="string"&&de("Invalid argument for stringToBytes");const t=s.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=s.charCodeAt(n)&255;return e}function ZU(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function JU(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function tV(){try{return new Function(""),!0}catch{return!1}}class We{static get isLittleEndian(){return Ut(this,"isLittleEndian",JU())}static get isEvalSupported(){return Ut(this,"isEvalSupported",tV())}static get isOffscreenCanvasSupported(){return Ut(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ut(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Ut(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Ut(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const $m=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));class vt{static makeHexColor(t,e,n){return`#${$m[t]}${$m[e]}${$m[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const a=t[n],o=t[n+1];t[n]=a*e[0]+o*e[2]+e[4],t[n+1]=a*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const a=e[0],o=e[1],l=e[2],c=e[3],d=e[4],h=e[5];for(let p=0;p<6;p+=2){const m=t[n+p],y=t[n+p+1];t[n+p]=m*a+y*l+d,t[n+p+1]=m*o+y*c+h}}static applyInverseTransform(t,e){const n=t[0],a=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-n*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,n){const a=e[0],o=e[1],l=e[2],c=e[3],d=e[4],h=e[5],p=t[0],m=t[1],y=t[2],x=t[3];let S=a*p+d,w=S,E=a*y+d,C=E,T=c*m+h,R=T,N=c*x+h,M=N;if(o!==0||l!==0){const O=o*p,k=o*y,L=l*m,j=l*x;S+=L,C+=L,E+=j,w+=j,T+=O,M+=O,N+=k,R+=k}n[0]=Math.min(n[0],S,E,w,C),n[1]=Math.min(n[1],T,N,R,M),n[2]=Math.max(n[2],S,E,w,C),n[3]=Math.max(n[3],T,N,R,M)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],a=t[1],o=t[2],l=t[3],c=n**2+a**2,d=n*o+a*l,h=o**2+l**2,p=(c+h)/2,m=Math.sqrt(p**2-(c*h-d**2));e[0]=Math.sqrt(p+m||1),e[1]=Math.sqrt(p-m||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>l?null:[n,o,a,l]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,a,o){o[0]=Math.min(o[0],t,n),o[1]=Math.min(o[1],e,a),o[2]=Math.max(o[2],t,n),o[3]=Math.max(o[3],e,a)}static#t(t,e,n,a,o,l,c,d,h,p){if(h<=0||h>=1)return;const m=1-h,y=h*h,x=y*h,S=m*(m*(m*t+3*h*e)+3*y*n)+x*a,w=m*(m*(m*o+3*h*l)+3*y*c)+x*d;p[0]=Math.min(p[0],S),p[1]=Math.min(p[1],w),p[2]=Math.max(p[2],S),p[3]=Math.max(p[3],w)}static#e(t,e,n,a,o,l,c,d,h,p,m,y){if(Math.abs(h)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,e,n,a,o,l,c,d,-m/p,y);return}const x=p**2-4*m*h;if(x<0)return;const S=Math.sqrt(x),w=2*h;this.#t(t,e,n,a,o,l,c,d,(-p+S)/w,y),this.#t(t,e,n,a,o,l,c,d,(-p-S)/w,y)}static bezierBoundingBox(t,e,n,a,o,l,c,d,h){h[0]=Math.min(h[0],t,c),h[1]=Math.min(h[1],e,d),h[2]=Math.max(h[2],t,c),h[3]=Math.max(h[3],e,d),this.#e(t,n,o,c,e,a,l,d,3*(-t+3*(n-o)+c),6*(t-2*n+o),3*(n-t),h),this.#e(t,n,o,c,e,a,l,d,3*(-e+3*(a-l)+d),6*(e-2*a+l),3*(a-e),h)}}function eV(s){return decodeURIComponent(escape(s))}let Gm=null,nA=null;function oR(s){return Gm||(Gm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,nA=new Map([["","t"]])),s.replaceAll(Gm,(t,e,n)=>e?e.normalize("NFKC"):nA.get(n))}function av(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),rR(s)}const rv="pdfjs_internal_id_";function nV(s,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,a,...o]=e;if(!s(n)&&!Number.isInteger(n)||!t(a))return!1;const l=o.length;let c=!0;switch(a.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;c=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||c&&d===null))return!1;return!0}function on(s,t,e){return Math.min(Math.max(s,t),e)}function lR(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(rR(s))}function sV(s){return Uint8Array.fromBase64?Uint8Array.fromBase64(s):Dc(atob(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...t){return new Promise(e=>{e(s(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((t,e)=>t+e,0)});class yc{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function a(o){if(!o)return;let l=null;const c=o.name;if(c==="#text")l=o.value;else if(yc.shouldBuildText(c))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&e.push({str:l}),!!o.children)for(const d of o.children)a(d)}return a(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class ov{static setupStorage(t,e,n,a,o){const l=a.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",c=>{a.setValue(e,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",c=>{a.setValue(e,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",c=>{a.setValue(e,{value:c.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const c of n.children)c.attributes.value===l.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}t.addEventListener("input",c=>{const d=c.target.options,h=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:a,linkService:o}){const{attributes:l}=e,c=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${a}`);for(const[d,h]of Object.entries(l))if(h!=null)switch(d){case"class":h.length&&t.setAttribute(d,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!c||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,h)}c&&o.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,a=t.xfaHtml,o=t.intent||"display",l=document.createElement(a.name);a.attributes&&this.setAttributes({html:l,element:a,intent:o,linkService:n});const c=o!=="richText",d=t.div;if(d.append(l),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=m}c&&d.setAttribute("class","xfaLayer xfaFont");const h=[];if(a.children.length===0){if(a.value){const m=document.createTextNode(a.value);l.append(m),c&&yc.shouldBuildText(a.name)&&h.push(m)}return{textDivs:h}}const p=[[a,-1,l]];for(;p.length>0;){const[m,y,x]=p.at(-1);if(y+1===m.children.length){p.pop();continue}const S=m.children[++p.at(-1)[1]];if(S===null)continue;const{name:w}=S;if(w==="#text"){const C=document.createTextNode(S.value);h.push(C),x.append(C);continue}const E=S?.attributes?.xmlns?document.createElementNS(S.attributes.xmlns,w):document.createElement(w);if(x.append(E),S.attributes&&this.setAttributes({html:E,element:S,storage:e,intent:o,linkService:n}),S.children?.length>0)p.push([S,-1,E]);else if(S.value){const C=document.createTextNode(S.value);c&&yc.shouldBuildText(w)&&h.push(C),E.append(C)}}for(const m of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const gi="http://www.w3.org/2000/svg";class tr{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Io(s,t="text"){if(Xl(s,document.baseURI)){const e=await fetch(s);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const a=new XMLHttpRequest;a.open("GET",s,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}n(new Error(a.statusText))}},a.send(null)})}class kc{constructor({viewBox:t,userUnit:e,scale:n,rotation:a,offsetX:o=0,offsetY:l=0,dontFlip:c=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=a,this.offsetX=o,this.offsetY=l,n*=e;const d=(t[2]+t[0])/2,h=(t[3]+t[1])/2;let p,m,y,x;switch(a%=360,a<0&&(a+=360),a){case 180:p=-1,m=0,y=0,x=1;break;case 90:p=0,m=1,y=1,x=0;break;case 270:p=0,m=-1,y=-1,x=0;break;case 0:p=1,m=0,y=0,x=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(y=-y,x=-x);let S,w,E,C;p===0?(S=Math.abs(h-t[1])*n+o,w=Math.abs(d-t[0])*n+l,E=(t[3]-t[1])*n,C=(t[2]-t[0])*n):(S=Math.abs(d-t[0])*n+o,w=Math.abs(h-t[1])*n+l,E=(t[2]-t[0])*n,C=(t[3]-t[1])*n),this.transform=[p*n,m*n,y*n,x*n,S-p*n*d-y*n*h,w-m*n*d-x*n*h],this.width=E,this.height=C}get rawDims(){const t=this.viewBox;return Ut(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new kc({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:o})}convertToViewportPoint(t,e){const n=[t,e];return vt.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];vt.applyTransform(e,this.transform);const n=[t[2],t[3]];return vt.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return vt.applyInverseTransform(n,this.transform),n}}class Oh extends ir{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Lc(s){const t=s.length;let e=0;for(;e<t&&s[e].trim()==="";)e++;return s.substring(e,e+5).toLowerCase()==="data:"}function Ph(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function cR(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function uR(s,t="document.pdf"){if(typeof s!="string")return t;if(Lc(s))return Bt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return t;const a=c=>{try{let d=decodeURIComponent(c);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:c):d}catch{return c}},o=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(o.test(l))return a(l);if(n.searchParams.size>0){const c=Array.from(n.searchParams.values()).reverse();for(const h of c)if(o.test(h))return a(h);const d=Array.from(n.searchParams.keys()).reverse();for(const h of d)if(o.test(h))return a(h)}if(n.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(d)return a(d[0])}return t}class sA{started=Object.create(null);times=[];time(t){t in this.started&&Bt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Bt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:a,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-a}ms
`);return t.join("")}}function Xl(s,t){const e=t?URL.parse(s,t):URL.parse(s);return e?.protocol==="http:"||e?.protocol==="https:"}function Xn(s){s.preventDefault()}function Ae(s){s.preventDefault(),s.stopPropagation()}function iV(s){console.log("Deprecated API usage: "+s)}class oh{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const n=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let c=parseInt(e[5],10);c=c>=0&&c<=59?c:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const h=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let m=parseInt(e[9],10)||0;return m=m>=0&&m<=59?m:0,h==="-"?(l+=p,c+=m):h==="+"&&(l-=p,c-=m),new Date(Date.UTC(n,a,o,l,c,d))}}function dR(s,{scale:t=1,rotation:e=0}){const{width:n,height:a}=s.attributes.style,o=[0,0,parseInt(n),parseInt(a)];return new kc({viewBox:o,userUnit:1,scale:t,rotation:e})}function zo(s){if(s.startsWith("#")){const t=parseInt(s.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(t=>parseInt(t)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Bt(`Not a valid color format: "${s}"`),[0,0,0])}function aV(s){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of s.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;s.set(e,zo(n))}t.remove()}function Se(s){const{a:t,b:e,c:n,d:a,e:o,f:l}=s.getTransform();return[t,e,n,a,o,l]}function Bs(s){const{a:t,b:e,c:n,d:a,e:o,f:l}=s.getTransform().invertSelf();return[t,e,n,a,o,l]}function ca(s,t,e=!1,n=!0){if(t instanceof kc){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:l}=s,c=We.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,h=`var(--total-scale-factor) * ${o}px`,p=c?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,m=c?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!e||t.rotation%180===0?(l.width=p,l.height=m):(l.width=m,l.height=p)}n&&s.setAttribute("data-main-rotation",t.rotation)}class Ts{constructor(){const{pixelRatio:t}=Ts;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,a,o=-1){let l=1/0,c=1/0,d=1/0;n=Ts.capPixels(n,o),n>0&&(l=Math.sqrt(n/(t*e))),a!==-1&&(c=a/t,d=a/e);const h=Math.min(l,c,d);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const lh=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class rV{static get isDarkMode(){return Ut(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class hR{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Ut(this,"commentForegroundColor",zo(n))}}function fR(s,t,e,n){n=Math.min(Math.max(n??1,0),1);const a=255*(1-n);return s=Math.round(s*n+a),t=Math.round(t*n+a),e=Math.round(e*n+a),[s,t,e]}function iA(s,t){const e=s[0]/255,n=s[1]/255,a=s[2]/255,o=Math.max(e,n,a),l=Math.min(e,n,a),c=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const d=o-l;switch(t[1]=c<.5?d/(o+l):d/(2-o-l),o){case e:t[0]=((n-a)/d+(n<a?6:0))*60;break;case n:t[0]=((a-e)/d+2)*60;break;case a:t[0]=((e-n)/d+4)*60;break}}t[2]=c}function Vg(s,t){const e=s[0],n=s[1],a=s[2],o=(1-Math.abs(2*a-1))*n,l=o*(1-Math.abs(e/60%2-1)),c=a-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+c,t[1]=l+c,t[2]=c;break;case 1:t[0]=l+c,t[1]=o+c,t[2]=c;break;case 2:t[0]=c,t[1]=o+c,t[2]=l+c;break;case 3:t[0]=c,t[1]=l+c,t[2]=o+c;break;case 4:t[0]=l+c,t[1]=c,t[2]=o+c;break;case 5:case 6:t[0]=o+c,t[1]=c,t[2]=l+c;break}}function aA(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function rA(s,t,e){Vg(s,e),e.map(aA);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];Vg(t,e),e.map(aA);const a=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>a?(n+.05)/(a+.05):(a+.05)/(n+.05)}const oA=new Map;function pR(s,t){const e=s[0]+s[1]*256+s[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=oA.get(e);if(n)return n;const a=new Float32Array(9),o=a.subarray(0,3),l=a.subarray(3,6);iA(s,l);const c=a.subarray(6,9);iA(t,c);const d=c[2]<.5,h=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),rA(l,c,o)<h){let p,m;d?(p=l[2],m=1):(p=0,m=l[2]);const y=.005;for(;m-p>y;){const x=l[2]=(p+m)/2;d===rA(l,c,o)<h?p=x:m=x}l[2]=d?m:p}return Vg(l,o),n=vt.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),oA.set(e,n),n}function lv({html:s,dir:t,className:e},n){const a=document.createDocumentFragment();if(typeof s=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=s.split(/(?:\r\n?|\n)/);for(let c=0,d=l.length;c<d;++c){const h=l[c];o.append(document.createTextNode(h)),c<d-1&&o.append(document.createElement("br"))}a.append(o)}else ov.render({xfaHtml:s,div:a,intent:"richText"});a.firstChild.classList.add("richText",e),n.append(a)}class ic{#t=null;#e=null;#s;#n=null;#r=null;#i=null;#a=null;#o=null;static#c=null;constructor(t){this.#s=t,ic.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#s._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Xn,{signal:e}),t.addEventListener("pointerdown",ic.#l,{signal:e}));const n=this.#n=document.createElement("div");n.className="buttons",t.append(n);const a=this.#s.toolbarPosition;if(a){const{style:o}=t,l=this.#s._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#h(t){this.#s._focusEventsAllowed=!1,Ae(t)}#d(t){this.#s._focusEventsAllowed=!0,Ae(t)}#f(t){const e=this.#s._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Xn,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#i?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#s,n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",ic.#c[t]),this.#f(n)&&n.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#n.append(n)}get#g(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#g),this.#r=t}addComment(t,e=null){if(this.#i)return;const n=t.renderForToolbar();if(!n)return;this.#f(n);const a=this.#a=this.#g;e?(this.#n.insertBefore(n,e),this.#n.insertBefore(a,e)):this.#n.append(n,a),this.#i=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#g)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#s);this.#f(e),this.#n.append(e,this.#g)}removeButton(t){t==="comment"&&(this.#i?.removeToolbarCommentButton(),this.#i=null,this.#a?.remove(),this.#a=null)}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,n){const a=this.#n.querySelector(n);a&&t==="comment"&&this.addComment(e,a)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class oV{#t=null;#e=null;#s;constructor(t){this.#s=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#s._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Xn,{signal:e});const n=this.#t=document.createElement("div");return n.className="buttons",t.append(n),this.#s.hasCommentManager()&&this.#i("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#s.commentSelection("floating_button")}),this.#i("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#s.highlightSelection("floating_button")}),t}#r(t,e){let n=0,a=0;for(const o of t){const l=o.y+o.height;if(l<n)continue;const c=o.x+(e?o.width:0);if(l>n){a=c,n=l;continue}e?c>a&&(a=c):c<a&&(a=c)}return[e?1-a:a,n]}show(t,e,n){const[a,o]=this.#r(e,n),{style:l}=this.#e||=this.#n();t.append(this.#e),l.insetInlineEnd=`${100*a}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#i(t,e,n,a){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",n);const c=this.#s._signal;c instanceof AbortSignal&&!c.aborted&&(o.addEventListener("contextmenu",Xn,{signal:c}),o.addEventListener("click",a,{signal:c})),this.#t.append(o)}}function mR(s,t,e){for(const n of e)t.addEventListener(n,s[n].bind(s))}class lV{#t=0;get id(){return`${mc}${this.#t++}`}}class cv{#t=av();#e=0;#s=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(n.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Ut(this,"_isSVGFittingCanvas",o)}async#n(t,e){this.#s||=new Map;let n=this.#s.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(n.url=e,a=await Io(e,"blob")):e instanceof File?a=n.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const o=cv._isSVGFittingCanvas,l=new FileReader,c=new Image,d=new Promise((h,p)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,h()},l.onload=async()=>{const m=n.svgUrl=l.result;c.src=await o?`${m}#svgView(preserveAspectRatio(none))`:m},c.onerror=l.onerror=p});l.readAsDataURL(a),await d}else n.bitmap=await createImageBitmap(a);n.refCounter=1}catch(a){Bt(a),n=null}return this.#s.set(t,n),n&&this.#s.set(n.id,n),n}async getFromFile(t){const{lastModified:e,name:n,size:a,type:o}=t;return this.#n(`${e}_${n}_${a}_${o}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const n=await e;return this.#n(t,n)}async getFromId(t){this.#s||=new Map;const e=this.#s.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#s||=new Map;let n=this.#s.get(t);if(n?.bitmap)return n.refCounter+=1,n;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),n={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#s.set(t,n),this.#s.set(n.id,n),n}getSvgUrl(t){const e=this.#s.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#s||=new Map;const e=this.#s.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(n.width,n.height);a.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=a.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class cV{#t=[];#e=!1;#s;#n=-1;constructor(t=128){this.#s=t}add({cmd:t,undo:e,post:n,mustExec:a,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:c=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:e,post:n,type:o};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(d);return}if(l&&this.#t[this.#n].type===o){c&&(d.undo=this.#t[this.#n].undo),this.#t[this.#n]=d;return}const h=this.#n+1;h===this.#s?this.#t.splice(0,1):(this.#n=h,h<this.#t.length&&this.#t.splice(h)),this.#t.push(d)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class Oc{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=We.platform;for(const[n,a,o={}]of t)for(const l of n){const c=l.startsWith("mac+");e&&c?(this.callbacks.set(l.slice(4),{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1))):!e&&!c&&(this.callbacks.set(l,{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(this.#t(e));if(!n)return;const{callback:a,options:{bubbles:o=!1,args:l=[],checker:c=null}}=n;c&&!c(t,e)||(a.bind(t,...l,e)(),o||Ae(e))}}class uv{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return aV(t),Ut(this,"_colors",t)}convert(t){const e=zo(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,a]of this._colors)if(a.every((o,l)=>o===e[l]))return uv._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?vt.makeHexColor(...e):t}}class Ci{#t=new AbortController;#e=null;#s=null;#n=new Map;#r=new Map;#i=null;#a=null;#o=null;#c=new cV;#l=null;#h=null;#d=null;#f=0;#g=new Set;#p=null;#u=null;#m=new Set;_editorUndoBar=null;#y=!1;#b=!1;#v=!1;#C=null;#A=null;#x=null;#_=null;#S=!1;#E=null;#M=new lV;#R=!1;#N=!1;#B=!1;#k=null;#O=null;#F=null;#P=null;#$=null;#T=jt.NONE;#w=new Set;#L=null;#I=null;#U=null;#X=null;#q=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#V=[0,0];#j=null;#G=null;#Z=null;#J=null;#z=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Ci.prototype,e=l=>l.#G.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:c})=>{if(c instanceof HTMLInputElement){const{type:d}=c;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Ut(this,"_keyboardManager",new Oc([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#G.contains(c)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}constructor(t,e,n,a,o,l,c,d,h,p,m,y,x,S,w,E){const C=this._signal=this.#t.signal;this.#G=t,this.#Z=e,this.#J=n,this.#i=a,this.#l=o,this.#I=l,this.#q=d,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:C}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:C}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:C}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:C}),c._on("setpreference",this.onSetPreference.bind(this),{signal:C}),c._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:C}),window.addEventListener("pointerdown",()=>{this.#N=!0},{capture:!0,signal:C}),window.addEventListener("pointerup",()=>{this.#N=!1},{capture:!0,signal:C}),this.#lt(),this.#ht(),this.#et(),this.#a=d.annotationStorage,this.#C=d.filterFactory,this.#U=h,this.#_=p||null,this.#y=m,this.#b=y,this.#v=x,this.#$=S||null,this.viewParameters={realScale:tr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=E!==!1,o?.setSidebarUiManager(this)}destroy(){this.#z?.resolve(),this.#z=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#m.clear(),this.#P?.clear(),this.#e=null,this.#w.clear(),this.#c.destroy(),this.#i?.destroy(),this.#l?.destroy(),this.#I?.destroy(),this.#E?.hide(),this.#E=null,this.#F?.destroy(),this.#F=null,this.#s=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#j&&(clearTimeout(this.#j),this.#j=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#$}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return Ut(this,"hcmFilter",this.#U?this.#C.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return Ut(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return Ut(this,"_highlightColors",this.#_?new Map(this.#_.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Ut(this,"highlightColors",null);const e=new Map,n=!!this.#U;for(const[a,o]of t){const l=a.endsWith("_HCM");if(n&&l){e.set(a.replace("_HCM",""),o);continue}!n&&!l&&e.set(a,o)}return Ut(this,"highlightColors",e)}get highlightColorNames(){return Ut(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,e=!1){this.#i?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,n,a){this.#l?.showDialog(this,t,e,n,a)}selectComment(t,e){this.#r.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,n=void 0){this.#l?.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),a=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",a),e())};this._eventBus.on("editorsrendered",a),await n}getSignature(t){this.#I?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#I}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#v=e)}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#G.focus()}findParent(t,e){for(const n of this.#r.values()){const{x:a,y:o,width:l,height:c}=n.div.getBoundingClientRect();if(t>=a&&t<=a+l&&e>=o&&e<=o+c)return n}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#m.add(t)}removeShouldRescale(t){this.#m.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*tr.PDF_TO_CSS_UNITS;for(const e of this.#m)e.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of this.#r.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:c}=n,d=n.toString(),p=this.#Q(n).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;n.empty();const y=this.#tt(p),x=this.#T===jt.NONE,S=()=>{const w=y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:c,text:d});x&&this.showAllEditors("highlight",!0,!0),e&&w?.editComment()};if(x){this.switchToMode(jt.HIGHLIGHT,S);return}S()}commentSelection(t=""){this.highlightSelection(t,!0)}#rt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=this.#Q(t).closest(".textLayer"),a=this.getSelectionBoxes(n);a&&(this.#E||=new oV(this),this.#E.show(n,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#a)return null;const e=`${mc}${t}`,n=this.#a.getRawValue(e);return n&&this.#a.remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,e=null){const n=this.#J;n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#L&&(this.#E?.hide(),this.#L=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#L)return;const a=this.#Q(t).closest(".textLayer");if(!a){this.#L&&(this.#E?.hide(),this.#L=null,this.#D({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#L=e,this.#D({hasSelectedText:!0}),!(this.#T!==jt.HIGHLIGHT&&this.#T!==jt.NONE)&&(this.#T===jt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#T===jt.HIGHLIGHT?this.#tt(a):null;if(o?.toggleDrawing(),this.#N){const l=new AbortController,c=this.combinedSignal(l),d=h=>{h.type==="pointerup"&&h.button!==0||(l.abort(),o?.toggleDrawing(!0),h.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",d,{signal:c}),window.addEventListener("blur",d,{signal:c})}else o?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(t=""){this.#T===jt.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#rt()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#x)return;this.#x=new AbortController;const t=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#w)if(e.div.contains(t)){this.#O=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[t,e]=this.#O;this.#O=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#k)return;this.#k=new AbortController;const t=this.combinedSignal(this.#k);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#dt(){this.#k?.abort(),this.#k=null}#nt(){if(this.#h)return;this.#h=new AbortController;const t=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#st(){this.#h?.abort(),this.#h=null}#ht(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#dt(),this.#st()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of this.#w){const a=n.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Bt(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of n){const h=await a.deserialize(d);if(!h)return;o.push(h)}const l=()=>{for(const d of o)this.#it(d);this.#at(o)},c=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:c,mustExec:!0})}catch(o){Bt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==jt.NONE&&!this.isEditorHandlingKeyboard&&Ci._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#D(t){Object.entries(t).some(([n,a])=>this.#Y[n]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,t)}),this.#T===jt.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#H([[Xt.HIGHLIGHT_FREE,!0]]))}#H(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#D({isEditing:this.#T!==jt.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#st(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#H(e.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#R?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,n=!1,a=!1,o=!1){if(this.#T!==t&&!(this.#z&&(await this.#z.promise,!this.#z))){if(this.#z=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#T===jt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=t,t===jt.NONE){this.setEditingState(!1),this.#pt();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#z.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();t===jt.SIGNATURE&&await this.#I?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const l of this.#r.values())l.updateMode(t);if(t===jt.POPUP){this.#s||=await this.#q.getAnnotationsByType(new Set(this.#u.map(d=>d._editorType)));const l=new Set,c=[];for(const d of this.#n.values()){const{annotationElementId:h,hasComment:p,deleted:m}=d;h&&l.add(h),p&&!m&&c.push(d.getData())}for(const d of this.#s){const{id:h,popupRef:p,contentsObj:m}=d;p&&m?.str&&!l.has(h)&&!this.#g.has(h)&&c.push(d)}this.#l?.showSidebar(c)}if(!e){n&&this.addNewEditorFromKeyboard(),this.#z.resolve();return}for(const l of this.#n.values())l.uid===e?(this.setSelected(l),o?l.editComment():a?l.enterInEditMode():l.focus()):l.unselect();this.#z.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case Xt.CREATE:this.currentLayer.addNewEditor(e);return;case Xt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#X||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of this.#w)n.updateParams(t,e);else for(const n of this.#u)n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){for(const o of this.#n.values())o.editorType===t&&o.show(e);(this.#X?.get(Xt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#H([[Xt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#B!==t){this.#B=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#R){this.#R=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#R){this.#R=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#P?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#it(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#H(t.propertiesToUpdate))}get#mt(){let t=null;for(t of this.#w);return t}updateUI(t){this.#mt===t&&this.#H(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#H(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#w.has(t)){this.#w.delete(t),t.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#w.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#d?.commitOrRemove();for(const e of this.#w)e!==t&&e.unselect();this.#w.clear(),this.#w.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(t){return this.#w.has(t)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(t){t.unselect(),this.#w.delete(t),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#D({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(t){this.#c.add(t),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(t){this.#c.cleanType(t)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#w],n=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},a=()=>{for(const o of e)this.#it(o)};this.addCommands({cmd:n,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#at(t){for(const e of this.#w)e.unselect();this.#w.clear();for(const e of t)e.isEmpty()||(this.#w.add(e),e.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#w)t.commit();this.#at(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==jt.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const t of this.#w)t.unselect();this.#w.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#V[0]+=t,this.#V[1]+=e;const[a,o]=this.#V,l=[...this.#w],c=1e3;this.#j&&clearTimeout(this.#j),this.#j=setTimeout(()=>{this.#j=null,this.#V[0]=this.#V[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(a,o),d.translationDone())},undo:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(-a,-o),d.translationDone())},mustExec:!1})},c);for(const d of l)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#w)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let e=!1;for(const[{x:a,y:o,pageIndex:l},c]of t)c.newX=a,c.newY=o,c.newPageIndex=l,e||=a!==c.savedX||o!==c.savedY||l!==c.savedPageIndex;if(!e)return!1;const n=(a,o,l,c)=>{if(this.#n.has(a.id)){const d=this.#r.get(c);d?a._setParentAndPosition(d,o,l):(a.pageIndex=c,a.x=o,a.y=l)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:l,newPageIndex:c}]of t)n(a,o,l,c)},undo:()=>{for(const[a,{savedX:o,savedY:l,savedPageIndex:c}]of t)n(a,o,l,c)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#p)for(const n of this.#p.keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==jt.NONE}get imageManager(){return Ut(this,"imageManager",new cv)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,p=e.rangeCount;h<p;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:a,width:o,height:l}=t.getBoundingClientRect();let c;switch(t.getAttribute("data-main-rotation")){case"90":c=(h,p,m,y)=>({x:(p-a)/l,y:1-(h+m-n)/o,width:y/l,height:m/o});break;case"180":c=(h,p,m,y)=>({x:1-(h+m-n)/o,y:1-(p+y-a)/l,width:m/o,height:y/l});break;case"270":c=(h,p,m,y)=>({x:1-(p+y-a)/l,y:(h-n)/o,width:y/l,height:m/o});break;default:c=(h,p,m,y)=>({x:(h-n)/o,y:(p-a)/l,width:m/o,height:y/l});break}const d=[];for(let h=0,p=e.rangeCount;h<p;h++){const m=e.getRangeAt(h);if(!m.collapsed)for(const{x:y,y:x,width:S,height:w}of m.getClientRects())S===0||w===0||d.push(c(y,x,S,w))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const n=this.#a.getRawValue(e);n&&(this.#T===jt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){const a=this.#P?.get(t);a&&(a.setCanvas(e,n),this.#P.delete(t))}addMissingCanvas(t,e){(this.#P||=new Map).set(t,e)}}class zs{#t=null;#e=!1;#s=null;#n=null;#r=null;#i=null;#a=!1;#o=null;#c=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#d=t._uiManager.useNewAltTextFlow,zs.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){zs._l10n??=t}async render(){const t=this.#s=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#d?(t.classList.add("new"),t.setAttribute("data-l10n-id",zs.#f.missing),e.setAttribute("data-l10n-id",zs.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#c._uiManager._signal;t.addEventListener("contextmenu",Xn,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const a=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#d&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",a,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#a=!0,a(o))},{signal:n}),await this.#p(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#d?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#d?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#h=await zs._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#d||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#h),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:a,cancel:o=!1}){n&&(this.#l=n,this.#h=a),!(this.#t===t&&this.#e===e)&&(o||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#s&&(!t&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#s.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#s?.remove(),this.#s=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#s;if(!t)return;if(this.#d){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",zs.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",zs.#f[`${this.#g}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const a=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class gd{#t=null;#e=null;#s=!1;#n=null;#r=null;#i=null;#a=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#h(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const a=this.#n.commentButtonColor;a&&(n.backgroundColor=a)}return this.#h(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:n}=this.#t.getBoundingClientRect(),{x:a,y:o,width:l,height:c}=this.#n.parent.boundingClientRect;return[(t-a)/l,(e+n-o)/c]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#h(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=this.#n._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",Xn,{signal:n}),e&&(t.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,Ae(o)},{capture:!0,signal:n}),t.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,Ae(o)},{capture:!0,signal:n})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const a=o=>{o.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#s=!0,a(o))},{signal:n}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:n}),t}edit(t){const e=this.commentPopupPositionInLayer;let n,a;if(e)[n,a]=e;else{[n,a]=this.#n.commentButtonPosition;const{width:p,height:m,x:y,y:x}=this.#n;n=y+n*p,a=x+a*m}const o=this.#n.parent.boundingClientRect,{x:l,y:c,width:d,height:h}=o;this.#n._uiManager.editComment(this.#n,l+n*d,c+a*h,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#s}),this.#s=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#i,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#a&&(this.#i=null),t===null){this.#a="",this.#c=!0;return}this.#a=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#r=t,this.data=t,this.#o=null,this.#i=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#a="",this.#i=null,this.#o=null,this.#n=null,this.#s=!1,this.#c=!1}}class Pc{#t;#e=!1;#s=null;#n;#r;#i;#a;#o=null;#c;#l=null;#h;#d=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:l=null,signal:c}){this.#t=t,this.#s=n,this.#n=e,this.#r=a,this.#i=o,this.#a=l,this.#h=new AbortController,this.#c=AbortSignal.any([c,this.#h.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ts.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,o=AbortSignal.any([this.#c,a.signal]),l=this.#t,c={capture:!0,signal:o,passive:!1},d=h=>{h.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",h=>{h.pointerType==="touch"&&(Ae(h),d(h))},c),l.addEventListener("pointerup",d,c),l.addEventListener("pointercancel",d,c);return}if(!this.#d){this.#d=new AbortController;const a=AbortSignal.any([this.#c,this.#d.signal]),o=this.#t,l={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#g.bind(this),l);const c=this.#p.bind(this);o.addEventListener("touchend",c,l),o.addEventListener("touchcancel",c,l),l.capture=!0,o.addEventListener("pointerdown",Ae,l),o.addEventListener("pointermove",Ae,l),o.addEventListener("pointercancel",Ae,l),o.addEventListener("pointerup",Ae,l),this.#r?.()}if(Ae(t),t.touches.length!==2||this.#s?.()){this.#l=null;return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;Ae(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:a,screenY:o}=e,{screenX:l,screenY:c}=n,d=this.#l,{touch0X:h,touch0Y:p,touch1X:m,touch1Y:y}=d,x=m-h,S=y-p,w=l-a,E=c-o,C=Math.hypot(w,E)||1,T=Math.hypot(x,S)||1;if(!this.#e&&Math.abs(T-C)<=Pc.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=o,d.touch1X=l,d.touch1Y=c,!this.#e){this.#e=!0;return}const R=[(a+l)/2,(o+c)/2];this.#i?.(R,T,C)}#p(t){t.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#a?.()),this.#l&&(Ae(t),this.#l=null,this.#e=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class Rt{#t=null;#e=null;#s=null;#n=null;#r=null;#i=!1;#a=null;#o="";#c=null;#l=null;#h=null;#d=null;#f=null;#g="";#p=!1;#u=null;#m=!1;#y=!1;#b=!1;#v=null;#C=0;#A=0;#x=null;#_=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#E=Rt._zIndex++;static _borderLineWidth=-1;static _colorManager=new uv;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=Rt.prototype._resizeWithKeyboard,e=Ci.TRANSLATE_SMALL,n=Ci.TRANSLATE_BIG;return Ut(this,"_resizerKeyboardManager",new Oc([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Rt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:a,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,a],this.pageTranslation=[o,l];const[c,d]=this.parentDimensions;this.x=t.x/c,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ut(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new uV({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Rt._l10n??=t,Rt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Rt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Rt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){de("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(t){this.#S=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#j(),this.#d?.remove(),this.#d=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,a){const[o,l]=this.parentDimensions;[n,a]=this.screenToPageTranslation(n,a),this.x=(t+n)/o,this.y=(e+a)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,a]=this.parentDimensions;this.setAt(t*n,e*a,this.width*n,this.height*a),this._onTranslated()}#M([t,e],n,a){[n,a]=this.screenToPageTranslation(n,a),this.x+=n/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#M(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:c}=this;const[d,h]=this.getBaseTranslation();l+=d,c+=h;const{style:p}=n;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*c).toFixed(2)}%`,this._onTranslating(l,c),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Rt,a=n/t,o=n/e;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,a]}=this;let{x:o,y:l,width:c,height:d}=this;if(c*=n,d*=a,o*=n,l*=a,this._mustFixPosition)switch(t){case 0:o=on(o,0,n-c),l=on(l,0,a-d);break;case 90:o=on(o,0,n-d),l=on(l,c,a);break;case 180:o=on(o,c,n),l=on(l,d,a);break;case 270:o=on(o,d,n),l=on(l,0,a-c);break}this.x=o/=n,this.y=l/=a;const[h,p]=this.getBaseTranslation();o+=h,l+=p,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#R(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return Rt.#R(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return Rt.#R(t,e,360-this.parentRotation)}#N(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#B(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",n),a.setAttribute("data-resizer-name",n),a.addEventListener("pointerdown",this.#k.bind(this,n),{signal:e}),a.addEventListener("contextmenu",Xn,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#c)}#k(t,e){e.preventDefault();const{isMac:n}=We.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#s?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#P.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",Ae,{passive:!1,signal:l}),window.addEventListener("contextmenu",Xn,{signal:l}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const h=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=c,this.div.style.cursor=d,this.#F()};window.addEventListener("pointerup",h,{signal:l}),window.addEventListener("blur",h,{signal:l})}#O(t,e,n,a){this.width=n,this.height=a,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#h)return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:a}=this.#h;this.#h=null;const o=this.x,l=this.y,c=this.width,d=this.height;o===t&&l===e&&c===n&&d===a||this.addCommands({cmd:this.#O.bind(this,o,l,c,d),undo:this.#O.bind(this,t,e,n,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#P(t,e){const[n,a]=this.parentDimensions,o=this.x,l=this.y,c=this.width,d=this.height,h=Rt.MIN_SIZE/n,p=Rt.MIN_SIZE/a,m=this.#N(this.rotation),y=(P,z)=>[m[0]*P+m[2]*z,m[1]*P+m[3]*z],x=this.#N(360-this.rotation),S=(P,z)=>[x[0]*P+x[2]*z,x[1]*P+x[3]*z];let w,E,C=!1,T=!1;switch(t){case"topLeft":C=!0,w=(P,z)=>[0,0],E=(P,z)=>[P,z];break;case"topMiddle":w=(P,z)=>[P/2,0],E=(P,z)=>[P/2,z];break;case"topRight":C=!0,w=(P,z)=>[P,0],E=(P,z)=>[0,z];break;case"middleRight":T=!0,w=(P,z)=>[P,z/2],E=(P,z)=>[0,z/2];break;case"bottomRight":C=!0,w=(P,z)=>[P,z],E=(P,z)=>[0,0];break;case"bottomMiddle":w=(P,z)=>[P/2,z],E=(P,z)=>[P/2,0];break;case"bottomLeft":C=!0,w=(P,z)=>[0,z],E=(P,z)=>[P,0];break;case"middleLeft":T=!0,w=(P,z)=>[0,z/2],E=(P,z)=>[P,z/2];break}const R=w(c,d),N=E(c,d);let M=y(...N);const O=Rt._round(o+M[0]),k=Rt._round(l+M[1]);let L=1,j=1,U,H;if(e.fromKeyboard)({deltaX:U,deltaY:H}=e);else{const{screenX:P,screenY:z}=e,[I,K]=this.#l;[U,H]=this.screenToPageTranslation(P-I,z-K),this.#l[0]=P,this.#l[1]=z}if([U,H]=S(U/n,H/a),C){const P=Math.hypot(c,d);L=j=Math.max(Math.min(Math.hypot(N[0]-R[0]-U,N[1]-R[1]-H)/P,1/c,1/d),h/c,p/d)}else T?L=on(Math.abs(N[0]-R[0]-U),h,1)/c:j=on(Math.abs(N[1]-R[1]-H),p,1)/d;const $=Rt._round(c*L),Z=Rt._round(d*j);M=y(...E($,Z));const et=O-M[0],ct=k-M[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=$,this.height=Z,this.x=et,this.y=ct,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new ic(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#s?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||(zs.initialize(Rt._l10n),this.#s=new zs(this),this.#t&&(this.#s.data=this.#t,this.#t=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(t){this.#s&&(this.#s.data=t)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(t){await this.#s?.setGuessedText(t)}serializeAltText(t){return this.#s?.serialize(t)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new gd(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:n,deleted:a}}=this.#n;return{text:e,richText:t,date:n,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new gd(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(this.#n||=new gd(this),this.#n.setInitialText(t,n),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new gd(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,c=l+o+1,d=a-100,h=c+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[c,d,h,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#i?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#U();const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),mR(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#_||=new Pc({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#$.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#$(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(t,e,n){let o=.7*(n/e)+1-.7;if(o===1)return;const l=this.#N(this.rotation),c=(O,k)=>[l[0]*O+l[2]*k,l[1]*O+l[3]*k],[d,h]=this.parentDimensions,p=this.x,m=this.y,y=this.width,x=this.height,S=Rt.MIN_SIZE/d,w=Rt.MIN_SIZE/h;o=Math.max(Math.min(o,1/y,1/x),S/y,w/x);const E=Rt._round(y*o),C=Rt._round(x*o);if(E===y&&C===x)return;this.#u||=[p,m,y,x];const T=c(y/2,x/2),R=Rt._round(p+T[0]),N=Rt._round(m+T[1]),M=c(E/2,C/2);this.x=R-M[0],this.y=N-M[1],this.width=E,this.height=C,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:e}=We.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#I(t);return}this.#L(t)}#L(t){const{isMac:e}=We.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#I(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),l={capture:!0,passive:!1,signal:o},c=h=>{a.abort(),this.#a=null,this.#p=!1,this._uiManager.endDragSession()||this.#L(h),n&&this._onStopDragging()};e&&(this.#C=t.clientX,this.#A=t.clientY,this.#a=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",h=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:m,pointerId:y}=h;if(y!==this.#a){Ae(h);return}const[x,S]=this.screenToPageTranslation(p-this.#C,m-this.#A);this.#C=p,this.#A=m,this._uiManager.dragSelectedEditors(x,S)},l),window.addEventListener("touchmove",Ae,l),window.addEventListener("pointerdown",h=>{h.pointerType===this.#o&&(this.#_||h.isPrimary)&&c(h),Ae(h)},l));const d=h=>{if(!this.#a||this.#a===h.pointerId){c(h);return}Ae(h)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const a=this.parentScale,[o,l]=this.pageDimensions,[c,d]=this.pageTranslation,h=t/a,p=e/a,m=this.x*o,y=this.y*l,x=this.width*o,S=this.height*l;switch(n){case 0:return[m+h+c,l-y-p-S+d,m+h+x+c,l-y-p+d];case 90:return[m+p+c,l-y+h+d,m+p+S+c,l-y+h+x+d];case 180:return[m-h-x+c,l-y+p+d,m-h+c,l-y+p+S+d];case 270:return[m-p-S+c,l-y-h-x+d,m-p+c,l-y-h+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,a,o,l]=t,c=o-n,d=l-a;switch(this.rotation){case 0:return[n,e-l,c,d];case 90:return[n,e-a,d,c];case 180:return[o,e-a,c,d];case 270:return[o,e-l,d,c];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Rt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:a,deleted:o,richText:l},uid:c,pageIndex:d,creationDate:h,modificationDate:p}=this;return{id:c,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:h,modificationDate:n||p,popupRef:!o,color:e,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return e<l&&a>0&&t<o&&n>0}#U(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#U()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,n){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[o,l]=a.pageDimensions,[c,d,h,p]=a.getRectInCurrentCoords(t.rect,l);return a.x=c/o,a.y=d/l,a.width=h/o,a.height=p/l,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#j(),this.removeEditToolbar(),this.#x){for(const t of this.#x.values())clearTimeout(t);this.#x=null}this.parent=null,this.#_?.destroy(),this.#_=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#B(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,a,o,l]=this.getPDFRect();return[Rt._round(n+(o-n)*t),Rt._round(a+(l-a)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const l=this.#X.bind(this),c=this.#q.bind(this),d=this._uiManager._signal;for(const h of this.#e){const p=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",l,{signal:d}),h.addEventListener("blur",c,{signal:d}),h.addEventListener("focus",this.#Y.bind(this,p),{signal:d}),h.setAttribute("data-l10n-id",Rt._l10nResizer[p])}}const n=this.#e[0];let a=0;for(const l of e){if(l===n)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==a){if(o<a)for(let c=0;c<a-o;c++)this.#c.append(this.#c.firstChild);else if(o>a)for(let c=0;c<o-a;c++)this.#c.firstChild.before(this.#c.lastChild);let l=0;for(const c of e){const h=this.#e[l++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Rt._l10nResizer[h])}}this.#V(0),this.#b=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#X(t){Rt._resizerKeyboardManager.exec(this,t)}#q(t){this.#b&&t.relatedTarget?.parentNode!==this.#c&&this.#j()}#Y(t){this.#g=this.#b?t:""}#V(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#b&&this.#P(this.#g,{deltaX:t,deltaY:e,fromKeyboard:!0})}#j(){this.#b=!1,this.#V(-1),this.#F()}_stopResizingWithKeyboard(){this.#j(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(t){this.#m=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#x||=new Map;const{action:n}=t;let a=this.#x.get(n);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#x.delete(n),this.#x.size===0&&(this.#x=null)},Rt._telemetryTimeout),this.#x.set(n,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}updateFakeAnnotationElement(t){if(!this.#d&&!this.deleted){this.#d=t.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class uV extends Rt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const lA=3285377520,rs=4294901760,Fs=65535;class gR{constructor(t){this.h1=t?t&4294967295:lA,this.h2=t?t&4294967295:lA}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let w=0,E=t.length;w<E;w++){const C=t.charCodeAt(w);C<=255?e[n++]=C:(e[n++]=C>>>8,e[n++]=C&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=n>>2,o=n-a*4,l=new Uint32Array(e.buffer,0,a);let c=0,d=0,h=this.h1,p=this.h2;const m=3432918353,y=461845907,x=m&Fs,S=y&Fs;for(let w=0;w<a;w++)w&1?(c=l[w],c=c*m&rs|c*x&Fs,c=c<<15|c>>>17,c=c*y&rs|c*S&Fs,h^=c,h=h<<13|h>>>19,h=h*5+3864292196):(d=l[w],d=d*m&rs|d*x&Fs,d=d<<15|d>>>17,d=d*y&rs|d*S&Fs,p^=d,p=p<<13|p>>>19,p=p*5+3864292196);switch(c=0,o){case 3:c^=e[a*4+2]<<16;case 2:c^=e[a*4+1]<<8;case 1:c^=e[a*4],c=c*m&rs|c*x&Fs,c=c<<15|c>>>17,c=c*y&rs|c*S&Fs,a&1?h^=c:p^=c}this.h1=h,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&rs|t*36045&Fs,e=e*4283543511&rs|((e<<16|t>>>16)*2950163797&rs)>>>16,t^=e>>>1,t=t*444984403&rs|t*60499&Fs,e=e*3301882366&rs|((e<<16|t>>>16)*3120437893&rs)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Hg=Object.freeze({map:null,hash:"",transfer:void 0});class dv{#t=!1;#e=null;#s=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=this.#n.get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof Rt&&this.#s.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of this.#n.values())if(n instanceof Rt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=this.#n.get(t);let a=!1;if(n!==void 0)for(const[o,l]of Object.entries(e))n[o]!==l&&(a=!0,n[o]=l);else a=!0,this.#n.set(t,e);a&&this.#r(),e instanceof Rt&&((this.#s||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new yR(this)}get serializable(){if(this.#n.size===0)return Hg;const t=new Map,e=new gR,n=[],a=Object.create(null);let o=!1;for(const[l,c]of this.#n){const d=c instanceof Rt?c.serialize(!1,a):c;d&&(t.set(l,d),e.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Hg}get editorStats(){let t=null;const e=new Map;let n=0,a=0;for(const o of this.#n.values()){if(!(o instanceof Rt)){o.popup&&(o.popup.deleted?a+=1:n+=1);continue}o.isCommentDeleted?a+=1:o.hasEditedComment&&(n+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:c}=l;e.has(c)||e.set(c,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[c]||=new Map;for(const[h,p]of Object.entries(l)){if(h==="type")continue;let m=d.get(h);m||(m=new Map,d.set(h,m));const y=m.get(p)??0;m.set(p,y+1)}}if((a>0||n>0)&&(t||=Object.create(null),t.comments={deleted:a,edited:n}),!t)return null;for(const[o,l]of e)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const n=this.#s?.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#s?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#s)for(const e of this.#s.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class yR extends dv{#t;constructor(t){super();const{map:e,hash:n,transfer:a}=t.serializable,o=structuredClone(e,a?{transfer:a}:null);this.#t={map:o,hash:n,transfer:a}}get print(){de("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Ut(this,"modifiedIds",{ids:new Set,hash:""})}}class dV{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||this.#t.has(t.loadedName))){if(Wt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:l}=t,c=new FontFace(a,o,l);this.addNativeFontFace(c);try{await c.load(),this.#t.add(a),n?.(t)}catch{Bt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}de("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(a){throw Bt(`Failed to load font '${n.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const a=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Ut(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Ut(this,"isSyncFontLoadingSupported",fn||We.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Wt(!a.done,"completeRequest() cannot be called twice."),a.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,a={done:!1,complete:e,callback:t};return n.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ut(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(N,M){return N.charCodeAt(M)<<24|N.charCodeAt(M+1)<<16|N.charCodeAt(M+2)<<8|N.charCodeAt(M+3)&255}function a(N,M,O,k){const L=N.substring(0,M),j=N.substring(M+O);return L+k+j}let o,l;const c=this._document.createElement("canvas");c.width=1,c.height=1;const d=c.getContext("2d");let h=0;function p(N,M){if(++h>30){Bt("Load test font never loaded."),M();return}if(d.font="30px "+N,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){M();return}setTimeout(p.bind(null,N,M))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=a(y,976,m.length,m);const S=16,w=1482184792;let E=n(y,S);for(o=0,l=m.length-3;o<l;o+=4)E=E-w+n(m,o)|0;o<m.length&&(E=E-w+n(m+"XXX",o)|0),y=a(y,S,4,ZU(E));const C=`url(data:font/opentype;base64,${btoa(y)});`,T=`@font-face {font-family:"${m}";src:${C}}`;this.insertRule(T);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const N of[t.loadedName,m]){const M=this._document.createElement("span");M.textContent="Hi",M.style.fontFamily=N,R.append(M)}this._document.body.append(R),p(m,()=>{R.remove(),e.complete()})}}class hV{#t;constructor(t,e=null,n,a){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,n&&Object.assign(this,n),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${lR(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let a;try{a=t.get(n)}catch(l){Bt(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(a||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function fV(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(fn)return s;const t=URL.parse(s,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function pV(s){if(fn&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return Dc(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s?.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function yd(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const $g=s=>typeof s=="object"&&Number.isInteger(s?.num)&&s.num>=0&&Number.isInteger(s?.gen)&&s.gen>=0,mV=s=>typeof s=="object"&&typeof s?.name=="string",vR=nV.bind(null,$g,mV);class gV{#t=new Map;#e=Promise.resolve();postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,n)})}addEventListener(t,e,n=null){let a=null;if(n?.signal instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Bt("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);a=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const vd={DATA:1,ERROR:2},ze={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function cA(){}function _n(s){if(s instanceof Ei||s instanceof rh||s instanceof eA||s instanceof gc||s instanceof Hm)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||de('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Ei(s.message);case"InvalidPDFException":return new rh(s.message);case"PasswordException":return new eA(s.message,s.code);case"ResponseException":return new gc(s.message,s.status,s.missing);case"UnknownErrorException":return new Hm(s.message,s.details)}return new Hm(s.message,s.toString())}class Yl{#t=new AbortController;constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const n=t.callbackId,a=this.callbackCapabilities[n];if(!a)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===vd.DATA)a.resolve(t.data);else if(t.callback===vd.ERROR)a.reject(_n(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(l){o.postMessage({sourceName:n,targetName:a,callback:vd.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:n,targetName:a,callback:vd.ERROR,callbackId:t.callbackId,reason:_n(l)})});return}if(t.streamId){this.#s(t);return}e(t.data)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},n)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,e,n,a){const o=this.streamId++,l=this.sourceName,c=this.targetName,d=this.comObj;return new ReadableStream({start:h=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:h,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:c,action:t,streamId:o,data:e,desiredSize:h.desiredSize},a),p.promise},pull:h=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,d.postMessage({sourceName:l,targetName:c,stream:ze.PULL,streamId:o,desiredSize:h.desiredSize}),p.promise},cancel:h=>{Wt(h instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:c,stream:ze.CANCEL,streamId:o,reason:_n(h)}),p.promise}},n)}#s(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,o=this.comObj,l=this,c=this.actionHandler[t.action],d={enqueue(h,p=1,m){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=p,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:a,stream:ze.ENQUEUE,streamId:e,chunk:h},m)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:a,stream:ze.CLOSE,streamId:e}),delete l.streamSinks[e])},error(h){Wt(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:a,stream:ze.ERROR,streamId:e,reason:_n(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(c,t.data,d).then(function(){o.postMessage({sourceName:n,targetName:a,stream:ze.START_COMPLETE,streamId:e,success:!0})},function(h){o.postMessage({sourceName:n,targetName:a,stream:ze.START_COMPLETE,streamId:e,reason:_n(h)})})}#n(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,o=this.comObj,l=this.streamControllers[e],c=this.streamSinks[e];switch(t.stream){case ze.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(_n(t.reason));break;case ze.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(_n(t.reason));break;case ze.PULL:if(!c){o.postMessage({sourceName:n,targetName:a,stream:ze.PULL_COMPLETE,streamId:e,success:!0});break}c.desiredSize<=0&&t.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=t.desiredSize,Promise.try(c.onPull||cA).then(function(){o.postMessage({sourceName:n,targetName:a,stream:ze.PULL_COMPLETE,streamId:e,success:!0})},function(h){o.postMessage({sourceName:n,targetName:a,stream:ze.PULL_COMPLETE,streamId:e,reason:_n(h)})});break;case ze.ENQUEUE:if(Wt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case ze.CLOSE:if(Wt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,e);break;case ze.ERROR:Wt(l,"error should have stream controller"),l.controller.error(_n(t.reason)),this.#r(l,e);break;case ze.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(_n(t.reason)),this.#r(l,e);break;case ze.CANCEL:if(!c)break;const d=_n(t.reason);Promise.try(c.onCancel||cA,d).then(function(){o.postMessage({sourceName:n,targetName:a,stream:ze.CANCEL_COMPLETE,streamId:e,success:!0})},function(h){o.postMessage({sourceName:n,targetName:a,stream:ze.CANCEL_COMPLETE,streamId:e,reason:_n(h)})}),c.sinkCapability.reject(d),c.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class bR{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){de("Abstract method `_createCanvas` called.")}}class yV extends bR{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class xR{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){de("Abstract method `_fetch` called.")}}class uA extends xR{async _fetch(t){const e=await Io(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Dc(e)}}class wR{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,a,o){return"none"}destroy(t=!1){}}class vV extends wR{#t;#e;#s;#n;#r;#i;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#r=e}get#o(){return this.#e||=new Map}get#c(){return this.#i||=new Map}get#l(){if(!this.#s){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const n=this.#r.createElementNS(gi,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#s=this.#r.createElementNS(gi,"defs"),t.append(n),n.append(this.#s),this.#r.body.append(t)}return this.#s}#h(t){if(t.length===1){const d=t[0],h=new Array(256);for(let m=0;m<256;m++)h[m]=d[m]/255;const p=h.join(",");return[p,p,p]}const[e,n,a]=t,o=new Array(256),l=new Array(256),c=new Array(256);for(let d=0;d<256;d++)o[d]=e[d]/255,l[d]=n[d]/255,c[d]=a[d]/255;return[o.join(","),l.join(","),c.join(",")]}#d(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(Lc(e)?Bt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=iv(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[n,a,o]=this.#h(t),l=t.length===1?n:`${n}${a}${o}`;if(e=this.#o.get(l),e)return this.#o.set(t,e),e;const c=`g_${this.#n}_transfer_map_${this.#a++}`,d=this.#d(c);this.#o.set(t,d),this.#o.set(l,d);const h=this.#p(c);return this.#m(n,a,o,h),d}addHCMFilter(t,e){const n=`${t}-${e}`,a="base";let o=this.#c.get(a);if(o?.key===n||(o?(o.filter?.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},this.#c.set(a,o)),!t||!e))return o.url;const l=this.#b(t);t=vt.makeHexColor(...l);const c=this.#b(e);if(e=vt.makeHexColor(...c),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return o.url;const d=new Array(256);for(let x=0;x<=255;x++){const S=x/255;d[x]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const h=d.join(","),p=`g_${this.#n}_hcm_filter`,m=o.filter=this.#p(p);this.#m(h,h,h,m),this.#g(m);const y=(x,S)=>{const w=l[x]/255,E=c[x]/255,C=new Array(S+1);for(let T=0;T<=S;T++)C[T]=w+T/S*(E-w);return C.join(",")};return this.#m(y(0,5),y(1,5),y(2,5),m),o.url=this.#d(p),o.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[n]=this.#h([t]),a=`alpha_${n}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_alpha_map_${this.#a++}`,l=this.#d(o);this.#o.set(t,l),this.#o.set(a,l);const c=this.#p(o);return this.#y(n,c),l}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let n,a;if(t?([n]=this.#h([t]),a=`luminosity_${n}`):a="luminosity",e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_luminosity_map_${this.#a++}`,l=this.#d(o);this.#o.set(t,l),this.#o.set(a,l);const c=this.#p(o);return this.#f(c),t&&this.#y(n,c),l}addHighlightHCMFilter(t,e,n,a,o){const l=`${e}-${n}-${a}-${o}`;let c=this.#c.get(t);if(c?.key===l||(c?(c.filter?.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},this.#c.set(t,c)),!e||!n))return c.url;const[d,h]=[e,n].map(this.#b.bind(this));let p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),m=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[y,x]=[a,o].map(this.#b.bind(this));m<p&&([p,m,y,x]=[m,p,x,y]),this.#l.style.color="";const S=(C,T,R)=>{const N=new Array(256),M=(m-p)/R,O=C/255,k=(T-C)/(255*R);let L=0;for(let j=0;j<=R;j++){const U=Math.round(p+j*M),H=O+j*k;for(let $=L;$<=U;$++)N[$]=H;L=U+1}for(let j=L;j<256;j++)N[j]=N[L-1];return N.join(",")},w=`g_${this.#n}_hcm_${t}_filter`,E=c.filter=this.#p(w);return this.#g(E),this.#m(S(y[0],x[0],5),S(y[1],x[1],5),S(y[2],x[2],5),E),c.url=this.#d(w),c.url}destroy(t=!1){t&&this.#i?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#e?.clear(),this.#e=null,this.#i?.clear(),this.#i=null,this.#a=0)}#f(t){const e=this.#r.createElementNS(gi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(gi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){const e=this.#r.createElementNS(gi,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,n){const a=this.#r.createElementNS(gi,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",n),t.append(a)}#m(t,e,n,a){const o=this.#r.createElementNS(gi,"feComponentTransfer");a.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",e),this.#u(o,"feFuncB",n)}#y(t,e){const n=this.#r.createElementNS(gi,"feComponentTransfer");e.append(n),this.#u(n,"feFuncA",t)}#b(t){return this.#l.style.color=t,zo(getComputedStyle(this.#l).getPropertyValue("color"))}}class SR{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){de("Abstract method `_fetch` called.")}}class dA extends SR{async _fetch(t){const e=await Io(t,"arraybuffer");return new Uint8Array(e)}}class AR{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){de("Abstract method `_fetch` called.")}}class hA extends AR{async _fetch(t){const e=await Io(t,"arraybuffer");return new Uint8Array(e)}}fn&&Bt("Please use the `legacy` build in Node.js environments.");async function hv(s){const e=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(e)}class bV extends wR{}class xV extends bR{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class wV extends xR{async _fetch(t){return hv(t)}}class SV extends SR{async _fetch(t){return hv(t)}}class AV extends AR{async _fetch(t){return hv(t)}}const Qr="__forcedDependency",{floor:fA,ceil:pA}=Math;function bd(s,t,e,n,a,o){s[t*4+0]=Math.min(s[t*4+0],e),s[t*4+1]=Math.min(s[t*4+1],n),s[t*4+2]=Math.max(s[t*4+2],a),s[t*4+3]=Math.max(s[t*4+3],o)}const Gg=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class EV{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Gg}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const xd=(s,t)=>{if(!s)return;let e=s.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},s.set(t,e)),e};class CV{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Qr]:[]};#s=new Map;#n=[];#r=[];#i=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#d=new Map;#f;#g;#p;#u;#m;constructor(t,e,n=!1){this.#f=t.width,this.#g=t.height,this.#y(e),n&&(this.#m=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,e){const n=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(n),this.#u=new Uint32Array(n),e&&e.length>0?(this.#u.set(e),this.#u.fill(Gg,e.length)):this.#u.fill(Gg)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Qr]:{__proto__:this.#e[Qr]}},this.#a={__proto__:this.#a},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);const n=this.#n.pop();return n!==void 0&&(xd(this.#m,t)?.dependencies.add(n),this.#u[t]=this.#u[n]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(xd(this.#m,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const e=this.#r.pop();return e!==void 0&&(xd(this.#m,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#i.push(vt.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform())),this}popBaseTransform(){return this.#i.length>1&&this.#i.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#s.set(t,e),this}recordSimpleDataFromNamed(t,e,n){this.#t[t]=this.#s.get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Qr,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(Qr,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,n,a,o,l){const c=vt.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];vt.axialAlignedBoundingBox([n,o,a,l],c,d);const h=vt.intersect(this.#a,d);return h?(this.#a[0]=h[0],this.#a[1]=h[1],this.#a[2]=h[2],this.#a[3]=h[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,e,n,a,o,l){const c=this.#a;if(c[0]===1/0)return this;const d=vt.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform());if(c[0]===-1/0)return vt.axialAlignedBoundingBox([n,o,a,l],d,this.#o),this;const h=[1/0,1/0,-1/0,-1/0];return vt.axialAlignedBoundingBox([n,o,a,l],d,h),this.#o[0]=Math.min(this.#o[0],Math.max(h[0],c[0])),this.#o[1]=Math.min(this.#o[1],Math.max(h[1],c[1])),this.#o[2]=Math.max(this.#o[2],Math.min(h[2],c[2])),this.#o[3]=Math.max(this.#o[3],Math.min(h[3],c[3])),this}recordCharacterBBox(t,e,n,a=1,o=0,l=0,c){const d=n.bbox;let h,p;if(d&&(h=d[2]!==d[0]&&d[3]!==d[1]&&this.#d.get(n),h!==!1&&(p=[0,0,0,0],vt.axialAlignedBoundingBox(d,n.fontMatrix,p),(a!==1||o!==0||l!==0)&&vt.scaleMinMax([a,0,0,-a,o,l],p),h)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!c)return this.recordFullPageBBox(t);const m=c();return d&&p&&h===void 0&&(h=p[0]<=o-m.actualBoundingBoxLeft&&p[2]>=o+m.actualBoundingBoxRight&&p[1]<=l-m.actualBoundingBoxAscent&&p[3]>=l+m.actualBoundingBoxDescent,this.#d.set(n,h),h)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,o-m.actualBoundingBoxLeft,o+m.actualBoundingBoxRight,l-m.actualBoundingBoxAscent,l+m.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#g,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const n=this.#l,a=this.#t,o=this.#e;for(const l of e)l in this.#t?n.add(a[l]):l in o&&o[l].forEach(n.add,n);return this}recordNamedDependency(t,e){return this.#s.has(e)&&this.#l.add(this.#s.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Qr]),this.#m){const n=xd(this.#m,t),{dependencies:a}=n;this.#l.forEach(a.add,a),this.#n.forEach(a.add,a),this.#r.forEach(a.add,a),a.delete(t),n.isRenderingOperation=!0}if(this.#c===t){const n=fA(this.#o[0]*256/this.#f),a=fA(this.#o[1]*256/this.#g),o=pA(this.#o[2]*256/this.#f),l=pA(this.#o[3]*256/this.#g);bd(this.#p,t,n,a,o,l);for(const c of this.#l)c!==t&&bd(this.#p,c,n,a,o,l);for(const c of this.#n)c!==t&&bd(this.#p,c,n,a,o,l);for(const c of this.#r)c!==t&&bd(this.#p,c,n,a,o,l);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const n=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const a of n)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#h.get(t);return this.#h.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#d.clear(),new EV(this.#u,this.#p)}takeDebugMetadata(){return this.#m}}class ch{#t;#e;#s;#n=0;#r=0;constructor(t,e,n){if(t instanceof ch&&t.#s===!!n)return t;this.#t=t,this.#e=e,this.#s=!!n}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#s||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,n,a,o,l){return this.#s||this.#t.recordClipBox(this.#e,e,n,a,o,l),this}recordBBox(t,e,n,a,o,l){return this.#s||this.#t.recordBBox(this.#e,e,n,a,o,l),this}recordCharacterBBox(t,e,n,a,o,l,c){return this.#s||this.#t.recordCharacterBBox(this.#e,e,n,a,o,l,c),this}recordFullPageBBox(t){return this.#s||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#s||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const os={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},an={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function qg(s,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,n),s.clip(a)}class fv{isModifyingCurrentTransform(){return!1}getPattern(){de("Abstract method `getPattern` called.")}}class TV extends fv{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,a){let o;if(a===an.STROKE||a===an.FILL){const l=e.current.getClippedPathBoundingBox(a,Se(t))||[0,0,0,0],c=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,h=e.cachedCanvases.getCanvas("pattern",c,d),p=h.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),n=vt.transform(n,[1,0,0,1,l[0],l[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),qg(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=t.createPattern(h.canvas,"no-repeat");const m=new DOMMatrix(n);o.setTransform(m)}else qg(t,this._bbox),o=this._createGradient(t);return o}}function qm(s,t,e,n,a,o,l,c){const d=t.coords,h=t.colors,p=s.data,m=s.width*4;let y;d[e+1]>d[n+1]&&(y=e,e=n,n=y,y=o,o=l,l=y),d[n+1]>d[a+1]&&(y=n,n=a,a=y,y=l,l=c,c=y),d[e+1]>d[n+1]&&(y=e,e=n,n=y,y=o,o=l,l=y);const x=(d[e]+t.offsetX)*t.scaleX,S=(d[e+1]+t.offsetY)*t.scaleY,w=(d[n]+t.offsetX)*t.scaleX,E=(d[n+1]+t.offsetY)*t.scaleY,C=(d[a]+t.offsetX)*t.scaleX,T=(d[a+1]+t.offsetY)*t.scaleY;if(S>=T)return;const R=h[o],N=h[o+1],M=h[o+2],O=h[l],k=h[l+1],L=h[l+2],j=h[c],U=h[c+1],H=h[c+2],$=Math.round(S),Z=Math.round(T);let et,ct,P,z,I,K,ht,B;for(let X=$;X<=Z;X++){if(X<E){const nt=X<S?0:(S-X)/(S-E);et=x-(x-w)*nt,ct=R-(R-O)*nt,P=N-(N-k)*nt,z=M-(M-L)*nt}else{let nt;X>T?nt=1:E===T?nt=0:nt=(E-X)/(E-T),et=w-(w-C)*nt,ct=O-(O-j)*nt,P=k-(k-U)*nt,z=L-(L-H)*nt}let tt;X<S?tt=0:X>T?tt=1:tt=(S-X)/(S-T),I=x-(x-C)*tt,K=R-(R-j)*tt,ht=N-(N-U)*tt,B=M-(M-H)*tt;const ot=Math.round(Math.min(et,I)),pt=Math.round(Math.max(et,I));let st=m*X+ot*4;for(let nt=ot;nt<=pt;nt++)tt=(et-nt)/(et-I),tt<0?tt=0:tt>1&&(tt=1),p[st++]=ct-(ct-K)*tt|0,p[st++]=P-(P-ht)*tt|0,p[st++]=z-(z-B)*tt|0,p[st++]=255}}function _V(s,t,e){const n=t.coords,a=t.colors;let o,l;switch(t.type){case"lattice":const c=t.verticesPerRow,d=Math.floor(n.length/c)-1,h=c-1;for(o=0;o<d;o++){let p=o*c;for(let m=0;m<h;m++,p++)qm(s,e,n[p],n[p+1],n[p+c],a[p],a[p+1],a[p+c]),qm(s,e,n[p+c+1],n[p+1],n[p+c],a[p+c+1],a[p+1],a[p+c])}break;case"triangles":for(o=0,l=n.length;o<l;o+=3)qm(s,e,n[o],n[o+1],n[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class RV extends fv{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const c=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-c,p=Math.ceil(this._bounds[3])-d,m=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),x=h/m,S=p/y,w={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-d,scaleX:1/x,scaleY:1/S},E=m+4,C=y+4,T=n.getCanvas("mesh",E,C),R=T.context,N=R.createImageData(m,y);if(e){const O=N.data;for(let k=0,L=O.length;k<L;k+=4)O[k]=e[0],O[k+1]=e[1],O[k+2]=e[2],O[k+3]=255}for(const O of this._figures)_V(N,O,w);return R.putImageData(N,2,2),{canvas:T.canvas,offsetX:c-2*x,offsetY:d-2*S,scaleX:x,scaleY:S}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,a){qg(t,this._bbox);const o=new Float32Array(2);if(a===an.SHADING)vt.singularValueDecompose2dScale(Se(t),o);else if(this.matrix){vt.singularValueDecompose2dScale(this.matrix,o);const[c,d]=o;vt.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=c,o[1]*=d}else vt.singularValueDecompose2dScale(e.baseTransform,o);const l=this._createMeshCanvas(o,a===an.SHADING?null:this._background,e.cachedCanvases);return a!==an.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class NV extends fv{getPattern(){return"hotpink"}}function MV(s){switch(s[0]){case"RadialAxial":return new TV(s);case"Mesh":return new RV(s);case"Dummy":return new NV}throw new Error(`Unknown IR type: ${s[0]}`)}const mA={COLORED:1,UNCOLORED:2};class pv{static MAX_PATTERN_SIZE=3e3;constructor(t,e,n,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=a}createPatternCanvas(t,e){const{bbox:n,operatorList:a,paintType:o,tilingType:l,color:c,canvasGraphicsFactory:d}=this;let{xstep:h,ystep:p}=this;h=Math.abs(h),p=Math.abs(p),Lh("TilingType: "+l);const m=n[0],y=n[1],x=n[2],S=n[3],w=x-m,E=S-y,C=new Float32Array(2);vt.singularValueDecompose2dScale(this.matrix,C);const[T,R]=C;vt.singularValueDecompose2dScale(this.baseTransform,C);const N=T*C[0],M=R*C[1];let O=w,k=E,L=!1,j=!1;const U=Math.ceil(h*N),H=Math.ceil(p*M),$=Math.ceil(w*N),Z=Math.ceil(E*M);U>=$?O=h:L=!0,H>=Z?k=p:j=!0;const et=this.getSizeAndScale(O,this.ctx.canvas.width,N),ct=this.getSizeAndScale(k,this.ctx.canvas.height,M),P=t.cachedCanvases.getCanvas("pattern",et.size,ct.size),z=P.context,I=d.createCanvasGraphics(z,e);if(I.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(I,o,c),z.translate(-et.scale*m,-ct.scale*y),I.transform(0,et.scale,0,0,ct.scale,0,0),z.save(),I.dependencyTracker?.save(),this.clipBbox(I,m,y,x,S),I.baseTransform=Se(I.ctx),I.executeOperatorList(a),I.endDrawing(),I.dependencyTracker?.restore(),z.restore(),L||j){const K=P.canvas;L&&(O=h),j&&(k=p);const ht=this.getSizeAndScale(O,this.ctx.canvas.width,N),B=this.getSizeAndScale(k,this.ctx.canvas.height,M),X=ht.size,tt=B.size,ot=t.cachedCanvases.getCanvas("pattern-workaround",X,tt),pt=ot.context,st=L?Math.floor(w/h):0,nt=j?Math.floor(E/p):0;for(let Et=0;Et<=st;Et++)for(let bt=0;bt<=nt;bt++)pt.drawImage(K,X*Et,tt*bt,X,tt,0,0,X,tt);return{canvas:ot.canvas,scaleX:ht.scale,scaleY:B.scale,offsetX:m,offsetY:y}}return{canvas:P.canvas,scaleX:et.scale,scaleY:ct.scale,offsetX:m,offsetY:y}}getSizeAndScale(t,e,n){const a=Math.max(pv.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=a?o=a:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,a,o){const l=a-e,c=o-n;t.ctx.rect(e,n,l,c),vt.axialAlignedBoundingBox([e,n,a,o],Se(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const a=t.ctx,o=t.current;switch(e){case mA.COLORED:const{fillStyle:l,strokeStyle:c}=this.ctx;a.fillStyle=o.fillColor=l,a.strokeStyle=o.strokeColor=c;break;case mA.UNCOLORED:a.fillStyle=a.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new QU(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,a,o){let l=n;a!==an.SHADING&&(l=vt.transform(l,e.baseTransform),this.matrix&&(l=vt.transform(l,this.matrix)));const c=this.createPatternCanvas(e,o);let d=new DOMMatrix(l);d=d.translate(c.offsetX,c.offsetY),d=d.scale(1/c.scaleX,1/c.scaleY);const h=t.createPattern(c.canvas,"repeat");return h.setTransform(d),h}}function DV({src:s,srcPos:t=0,dest:e,width:n,height:a,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const c=We.isLittleEndian?4278190080:255,[d,h]=l?[o,c]:[c,o],p=n>>3,m=n&7,y=s.length;e=new Uint32Array(e.buffer);let x=0;for(let S=0;S<a;S++){for(const E=t+p;t<E;t++){const C=t<y?s[t]:255;e[x++]=C&128?h:d,e[x++]=C&64?h:d,e[x++]=C&32?h:d,e[x++]=C&16?h:d,e[x++]=C&8?h:d,e[x++]=C&4?h:d,e[x++]=C&2?h:d,e[x++]=C&1?h:d}if(m===0)continue;const w=t<y?s[t++]:255;for(let E=0;E<m;E++)e[x++]=w&1<<7-E?h:d}return{srcPos:t,destPos:x}}const gA=16,yA=100,kV=15,vA=10,Rn=16,Xm=new DOMMatrix,Un=new Float32Array(2),io=new Float32Array([1/0,1/0,-1/0,-1/0]);function LV(s,t){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){t.save(),this.__originalSave()},s.restore=function(){t.restore(),this.__originalRestore()},s.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},s.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},s.transform=function(e,n,a,o,l,c){t.transform(e,n,a,o,l,c),this.__originalTransform(e,n,a,o,l,c)},s.setTransform=function(e,n,a,o,l,c){t.setTransform(e,n,a,o,l,c),this.__originalSetTransform(e,n,a,o,l,c)},s.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},s.rotate=function(e){t.rotate(e),this.__originalRotate(e)},s.clip=function(e){t.clip(e),this.__originalClip(e)},s.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},s.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},s.bezierCurveTo=function(e,n,a,o,l,c){t.bezierCurveTo(e,n,a,o,l,c),this.__originalBezierCurveTo(e,n,a,o,l,c)},s.rect=function(e,n,a,o){t.rect(e,n,a,o),this.__originalRect(e,n,a,o)},s.closePath=function(){t.closePath(),this.__originalClosePath()},s.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class OV{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,n)):(a=this.canvasFactory.create(e,n),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function wd(s,t,e,n,a,o,l,c,d,h){const[p,m,y,x,S,w]=Se(s);if(m===0&&y===0){const T=l*p+S,R=Math.round(T),N=c*x+w,M=Math.round(N),O=(l+d)*p+S,k=Math.abs(Math.round(O)-R)||1,L=(c+h)*x+w,j=Math.abs(Math.round(L)-M)||1;return s.setTransform(Math.sign(p),0,0,Math.sign(x),R,M),s.drawImage(t,e,n,a,o,0,0,k,j),s.setTransform(p,m,y,x,S,w),[k,j]}if(p===0&&x===0){const T=c*y+S,R=Math.round(T),N=l*m+w,M=Math.round(N),O=(c+h)*y+S,k=Math.abs(Math.round(O)-R)||1,L=(l+d)*m+w,j=Math.abs(Math.round(L)-M)||1;return s.setTransform(0,Math.sign(m),Math.sign(y),0,R,M),s.drawImage(t,e,n,a,o,0,0,j,k),s.setTransform(p,m,y,x,S,w),[j,k]}s.drawImage(t,e,n,a,o,l,c,d,h);const E=Math.hypot(p,m),C=Math.hypot(y,x);return[E*d,C*h]}class bA{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Ug;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=nn.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,n){n?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=io.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=an.FILL,e=null){const n=this.minMax.slice();if(t===an.STROKE){e||de("Stroke bounding box must include transform."),vt.singularValueDecompose2dScale(e,Un);const a=Un[0]*this.lineWidth/2,o=Un[1]*this.lineWidth/2;n[0]-=a,n[1]-=o,n[2]+=a,n[3]+=o}return n}updateClipFromPath(){const t=vt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(io,0)}getClippedPathBoundingBox(t=an.FILL,e=null){return vt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function xA(s,t){if(t instanceof ImageData){s.putImageData(t,0,0);return}const e=t.height,n=t.width,a=e%Rn,o=(e-a)/Rn,l=a===0?o:o+1,c=s.createImageData(n,Rn);let d=0,h;const p=t.data,m=c.data;let y,x,S,w;if(t.kind===sc.GRAYSCALE_1BPP){const E=p.byteLength,C=new Uint32Array(m.buffer,0,m.byteLength>>2),T=C.length,R=n+7>>3,N=4294967295,M=We.isLittleEndian?4278190080:255;for(y=0;y<l;y++){for(S=y<o?Rn:a,h=0,x=0;x<S;x++){const O=E-d;let k=0;const L=O>R?n:O*8-7,j=L&-8;let U=0,H=0;for(;k<j;k+=8)H=p[d++],C[h++]=H&128?N:M,C[h++]=H&64?N:M,C[h++]=H&32?N:M,C[h++]=H&16?N:M,C[h++]=H&8?N:M,C[h++]=H&4?N:M,C[h++]=H&2?N:M,C[h++]=H&1?N:M;for(;k<L;k++)U===0&&(H=p[d++],U=128),C[h++]=H&U?N:M,U>>=1}for(;h<T;)C[h++]=0;s.putImageData(c,0,y*Rn)}}else if(t.kind===sc.RGBA_32BPP){for(x=0,w=n*Rn*4,y=0;y<o;y++)m.set(p.subarray(d,d+w)),d+=w,s.putImageData(c,0,x),x+=Rn;y<l&&(w=n*a*4,m.set(p.subarray(d,d+w)),s.putImageData(c,0,x))}else if(t.kind===sc.RGB_24BPP)for(S=Rn,w=n*S,y=0;y<l;y++){for(y>=o&&(S=a,w=n*S),h=0,x=w;x--;)m[h++]=p[d++],m[h++]=p[d++],m[h++]=p[d++],m[h++]=255;s.putImageData(c,0,y*Rn)}else throw new Error(`bad image kind: ${t.kind}`)}function wA(s,t){if(t.bitmap){s.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,a=e%Rn,o=(e-a)/Rn,l=a===0?o:o+1,c=s.createImageData(n,Rn);let d=0;const h=t.data,p=c.data;for(let m=0;m<l;m++){const y=m<o?Rn:a;({srcPos:d}=DV({src:h,srcPos:d,dest:p,width:n,height:y,nonBlackColor:0})),s.putImageData(c,0,m*Rn)}}function zl(s,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)s[n]!==void 0&&(t[n]=s[n]);s.setLineDash!==void 0&&(t.setLineDash(s.getLineDash()),t.lineDashOffset=s.lineDashOffset)}function Sd(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:t}=s;t!=="none"&&t!==""&&(s.filter="none")}function SA(s,t){if(t)return!0;vt.singularValueDecompose2dScale(s,Un);const e=Math.fround(Ts.pixelRatio*tr.PDF_TO_CSS_UNITS);return Un[0]<=e&&Un[1]<=e}const PV=["butt","round","square"],jV=["miter","round","bevel"],BV={},AA={};class vo{constructor(t,e,n,a,o,{optionalContentConfig:l,markedContentStack:c=null},d,h,p){this.ctx=t,this.current=new bA(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new OV(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,n=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:a=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=c,n){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Se(this.compositeCtx))}this.ctx.save(),Sd(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Se(this.ctx)}executeOperatorList(t,e,n,a,o){const l=t.argsArray,c=t.fnArray;let d=e||0;const h=l.length;if(h===d)return d;const p=h-d>vA&&typeof n=="function",m=p?Date.now()+kV:0;let y=0;const x=this.commonObjs,S=this.objs;let w,E;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,n),d;if(!o||o(d))if(w=c[d],E=l[d]??null,w!==To.dependency)E===null?this[w](d):this[w](d,...E);else for(const C of E){this.dependencyTracker?.recordNamedData(C,d);const T=C.startsWith("g_")?x:S;if(!T.has(C))return T.get(C,n),d}if(d++,d===h)return d;if(p&&++y>vA){if(Date.now()>m)return n(),d;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const n=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),c=n,d=a,h="prescale1",p,m;for(;o>2&&c>1||l>2&&d>1;){let y=c,x=d;o>2&&c>1&&(y=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),o/=c/y),l>2&&d>1&&(x=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/x),p=this.cachedCanvases.getCanvas(h,y,x),m=p.context,m.clearRect(0,0,y,x),m.drawImage(t,0,0,c,d,0,0,y,x),t=p.canvas,c=y,d=x,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:c,paintHeight:d}}_createMaskCanvas(t,e){const n=this.ctx,{width:a,height:o}=e,l=this.current.fillColor,c=this.current.patternFill,d=Se(n);let h,p,m,y;if((e.bitmap||e.data)&&e.count>1){const U=e.bitmap||e.data.buffer;p=JSON.stringify(c?d:[d.slice(0,4),l]),h=this._cachedBitmapsMap.get(U),h||(h=new Map,this._cachedBitmapsMap.set(U,h));const H=h.get(p);if(H&&!c){const $=Math.round(Math.min(d[0],d[2])+d[4]),Z=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,os.transformAndFill),{canvas:H,offsetX:$,offsetY:Z}}m=H}m||(y=this.cachedCanvases.getCanvas("maskCanvas",a,o),wA(y.context,e));let x=vt.transform(d,[1/a,0,0,-1/o,0,0]);x=vt.transform(x,[1,0,0,1,0,-o]);const S=io.slice();vt.axialAlignedBoundingBox([0,0,a,o],x,S);const[w,E,C,T]=S,R=Math.round(C-w)||1,N=Math.round(T-E)||1,M=this.cachedCanvases.getCanvas("fillCanvas",R,N),O=M.context,k=w,L=E;O.translate(-k,-L),O.transform(...x),m||(m=this._scaleImage(y.canvas,Bs(O)),m=m.img,h&&c&&h.set(p,m)),O.imageSmoothingEnabled=SA(Se(O),e.interpolate),wd(O,m,0,0,m.width,m.height,0,0,a,o),O.globalCompositeOperation="source-in";const j=vt.transform(Bs(O),[1,0,0,1,-k,-L]);return O.fillStyle=c?l.getPattern(n,this,j,an.FILL,t):l,O.fillRect(0,0,a,o),h&&!c&&(this.cachedCanvases.delete("fillCanvas"),h.set(p,M.canvas)),this.dependencyTracker?.recordDependencies(t,os.transformAndFill),{canvas:M.canvas,offsetX:Math.round(k),offsetY:Math.round(L)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=PV[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=jV[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[n,a]of e)switch(n){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,e,n);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),zl(this.suspendedCtx,l),LV(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),zl(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,a){const o=a[0],l=a[1],c=a[2]-o,d=a[3]-l;c===0||d===0||(this.genericComposeSMask(e.context,n,c,d,e.subtype,e.backdrop,e.transferMap,o,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,a,o,l,c,d,h,p,m){let y=t.canvas,x=d-p,S=h-m;if(l)if(x<0||S<0||x+n>y.width||S+a>y.height){const E=this.cachedCanvases.getCanvas("maskExtension",n,a),C=E.context;C.drawImage(y,-x,-S),C.globalCompositeOperation="destination-atop",C.fillStyle=l,C.fillRect(0,0,n,a),C.globalCompositeOperation="source-over",y=E.canvas,x=S=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(x,S,n,a),t.clip(E),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(x,S,n,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&c?e.filter=this.filterFactory.addAlphaFilter(c):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(c));const w=new Path2D;w.rect(d,h,n,a),e.clip(w),e.globalCompositeOperation="destination-in",e.drawImage(y,x,S,n,a,d,h,n,a),e.restore()}save(t){this.inSMaskMode&&zl(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&zl(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,a,o,l,c){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,n,a,o,l,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,a){let[o]=n;if(!a){o||=n[0]=new Path2D,this[e](t,o);return}if(this.dependencyTracker!==null){const l=e===To.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-l,a[2]+l,a[1]-l,a[3]+l).recordDependencies(t,["transform"])}if(!(o instanceof Path2D)){const l=n[0]=new Path2D;for(let c=0,d=o.length;c<d;)switch(o[c++]){case md.moveTo:l.moveTo(o[c++],o[c++]);break;case md.lineTo:l.lineTo(o[c++],o[c++]);break;case md.curveTo:l.bezierCurveTo(o[c++],o[c++],o[c++],o[c++],o[c++],o[c++]);break;case md.closePath:l.closePath();break;default:Bt(`Unrecognized drawing path operator: ${o[c-1]}`);break}o=l}vt.axialAlignedBoundingBox(a,Se(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){const a=this.ctx,o=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=o.getPattern(a,this,Bs(a),an.STROKE,t),l){const c=new Path2D;c.addPath(e,a.getTransform().invertSelf().multiplySelf(l)),e=c}this.rescaleAndStroke(e,!1),a.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,os.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(an.STROKE,Se(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){const a=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let c=!1;if(l){const h=o.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=o.getPattern(a,this,Bs(a),an.FILL,t),h){const p=new Path2D;p.addPath(e,a.getTransform().invertSelf().multiplySelf(h)),e=p}c=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(e,"evenodd"),this.pendingEOFill=!1):a.fill(e)),this.dependencyTracker?.recordDependencies(t,os.fill),c&&(a.restore(),this.dependencyTracker?.restore(t)),n&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,os.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=BV}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=AA}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;e!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(e!==void 0){const a=new Path2D,o=n.getTransform().invertSelf();for(const{transform:l,x:c,y:d,fontSize:h,path:p}of e)p&&a.addPath(p,new DOMMatrix(l).preMultiplySelf(o).translate(c,d).scale(h,-h));n.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const a=this.commonObjs.get(e),o=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=a.fontMatrix||Ug,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&Bt("Invalid font matrix for font "+e),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=n,a.isType3Font)return;const l=a.loadedName||"sans-serif",c=a.systemFontInfo?.css||`"${l}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const h=a.italic?"italic":"normal";let p=n;n<gA?p=gA:n>yA&&(p=yA),this.current.fontSizeScale=n/p,this.ctx.font=`${h} ${d} ${p}px ${c}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#s(t,e,n){const a=new Path2D;return a.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),a}paintChar(t,e,n,a,o,l){const c=this.ctx,d=this.current,h=d.font,p=d.textRenderingMode,m=d.fontSize/d.fontSizeScale,y=p&nn.FILL_STROKE_MASK,x=!!(p&nn.ADD_TO_PATH_FLAG),S=d.patternFill&&!h.missingFile,w=d.patternStroke&&!h.missingFile;let E;if((h.disableFontFace||x||S||w)&&!h.missingFile&&(E=h.getPathGenerator(this.commonObjs,e)),E&&(h.disableFontFace||S||w)){c.save(),c.translate(n,a),c.scale(m,-m),this.dependencyTracker?.recordCharacterBBox(t,c,h);let C;if(y===nn.FILL||y===nn.FILL_STROKE)if(o){C=c.getTransform(),c.setTransform(...o);const T=this.#s(E,C,o);c.fill(T)}else c.fill(E);if(y===nn.STROKE||y===nn.FILL_STROKE)if(l){C||=c.getTransform(),c.setTransform(...l);const{a:T,b:R,c:N,d:M}=C,O=vt.inverseTransform(l),k=vt.transform([T,R,N,M,0,0],O);vt.singularValueDecompose2dScale(k,Un),c.lineWidth*=Math.max(Un[0],Un[1])/m,c.stroke(this.#s(E,C,l))}else c.lineWidth/=m,c.stroke(E);c.restore()}else(y===nn.FILL||y===nn.FILL_STROKE)&&(c.fillText(e,n,a),this.dependencyTracker?.recordCharacterBBox(t,c,h,m,n,a,()=>c.measureText(e))),(y===nn.STROKE||y===nn.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,c,h,m,n,a,()=>c.measureText(e)).recordDependencies(t,os.stroke),c.strokeText(e,n,a));x&&((this.pendingTextPaths||=[]).push({transform:Se(c),x:n,y:a,fontSize:m,path:E}),this.dependencyTracker?.recordCharacterBBox(t,c,h,m,n,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){n=!0;break}return Ut(this,"isFontSubpixelAAEnabled",n)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,os.showText).resetBBox(t),this.current.textRenderingMode&nn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,a=n.font;if(a.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const o=n.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,c=n.fontSizeScale,d=n.charSpacing,h=n.wordSpacing,p=n.fontDirection,m=n.textHScale*p,y=e.length,x=a.vertical,S=x?1:-1,w=a.defaultVMetrics,E=o*n.fontMatrix[0],C=n.textRenderingMode===nn.FILL&&!a.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),p>0?l.scale(m,-1):l.scale(m,1);let T,R;if(n.patternFill){l.save();const L=n.fillColor.getPattern(l,this,Bs(l),an.FILL,t);T=Se(l),l.restore(),l.fillStyle=L}if(n.patternStroke){l.save();const L=n.strokeColor.getPattern(l,this,Bs(l),an.STROKE,t);R=Se(l),l.restore(),l.strokeStyle=L}let N=n.lineWidth;const M=n.textMatrixScale;if(M===0||N===0){const L=n.textRenderingMode&nn.FILL_STROKE_MASK;(L===nn.STROKE||L===nn.FILL_STROKE)&&(N=this.getSinglePixelWidth())}else N/=M;if(c!==1&&(l.scale(c,c),N/=c),l.lineWidth=N,a.isInvalidPDFjsFont){const L=[];let j=0;for(const H of e)L.push(H.unicode),j+=H.width;const U=L.join("");if(l.fillText(U,0,0),this.dependencyTracker!==null){const H=l.measureText(U);this.dependencyTracker.recordBBox(t,this.ctx,-H.actualBoundingBoxLeft,H.actualBoundingBoxRight,-H.actualBoundingBoxAscent,H.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=j*E*m,l.restore(),this.compose();return}let O=0,k;for(k=0;k<y;++k){const L=e[k];if(typeof L=="number"){O+=S*L*o/1e3;continue}let j=!1;const U=(L.isSpace?h:0)+d,H=L.fontChar,$=L.accent;let Z,et,ct=L.width;if(x){const I=L.vmetric||w,K=-(L.vmetric?I[1]:ct*.5)*E,ht=I[2]*E;ct=I?-I[0]:ct,Z=K/c,et=(O+ht)/c}else Z=O/c,et=0;let P;if(a.remeasure&&ct>0){P=l.measureText(H);const I=P.width*1e3/o*c;if(ct<I&&this.isFontSubpixelAAEnabled){const K=ct/I;j=!0,l.save(),l.scale(K,1),Z/=K}else ct!==I&&(Z+=(ct-I)/2e3*o/c)}if(this.contentVisible&&(L.isInFont||a.missingFile)){if(C&&!$)l.fillText(H,Z,et),this.dependencyTracker?.recordCharacterBBox(t,l,P?{bbox:null}:a,o/c,Z,et,()=>P??l.measureText(H));else if(this.paintChar(t,H,Z,et,T,R),$){const I=Z+o*$.offset.x/c,K=et-o*$.offset.y/c;this.paintChar(t,$.fontChar,I,K,T,R)}}const z=x?ct*E-U*p:ct*E+U*p;O+=z,j&&l.restore()}x?n.y-=O:n.x+=O*m,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,a=this.current,o=a.font,l=a.fontSize,c=a.fontDirection,d=o.vertical?1:-1,h=a.charSpacing,p=a.wordSpacing,m=a.textHScale*c,y=a.fontMatrix||Ug,x=e.length,S=a.textRenderingMode===nn.INVISIBLE;let w,E,C,T;if(S||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),a.textMatrix&&n.transform(...a.textMatrix),n.translate(a.x,a.y+a.textRise),n.scale(m,c);const R=this.dependencyTracker;for(this.dependencyTracker=R?new ch(R,t):null,w=0;w<x;++w){if(E=e[w],typeof E=="number"){T=d*E*l/1e3,this.ctx.translate(T,0),a.x+=T*m;continue}const N=(E.isSpace?p:0)+h,M=o.charProcOperatorList[E.operatorListId];M?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...y),this.executeOperatorList(M),this.restore()):Bt(`Type3 character "${E.operatorListId}" is not available.`);const O=[E.width,0];vt.applyTransform(O,y),C=O[0]*l+N,n.translate(C,0),a.x+=C*m}n.restore(),R&&(this.dependencyTracker=R)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,a,o,l,c){const d=new Path2D;d.rect(a,o,l-a,c-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,a,l,o,c).recordClipBox(t,this.ctx,a,l,o,c),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const a=this.baseTransform||Se(this.ctx),o={createCanvasGraphics:(l,c)=>new vo(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new ch(this.dependencyTracker,c,!0):null)};n=new pv(e,this.ctx,o,a)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=MV(this.getObject(t,e)),this.cachedPatterns.set(e,a)),n&&(a.matrix=n),a}shadingFill(t,e){if(!this.contentVisible)return;const n=this.ctx;this.save(t);const a=this._getPattern(t,e);n.fillStyle=a.getPattern(n,this,Bs(n),an.SHADING,t);const o=Bs(n);if(o){const{width:l,height:c}=n.canvas,d=io.slice();vt.axialAlignedBoundingBox([0,0,l,c],o,d);const[h,p,m,y]=d;this.ctx.fillRect(h,p,m-h,y-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,os.transform).recordDependencies(t,os.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){de("Should not call beginInlineImage")}beginImageData(){de("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Se(this.ctx),n)){vt.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[a,o,l,c]=n,d=new Path2D;d.rect(a,o,l-a,c-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,a,l,o,c),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||Lh("TODO: Support non-isolated groups."),e.knockout&&Bt("Knockout groups not supported.");const a=Se(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=io.slice();vt.axialAlignedBoundingBox(e.bbox,Se(n),o);const l=[0,0,n.canvas.width,n.canvas.height];o=vt.intersect(o,l)||[0,0,0,0];const c=Math.floor(o[0]),d=Math.floor(o[1]),h=Math.max(Math.ceil(o[2])-c,1),p=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,h,p]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(m,h,p),x=y.context;x.translate(-c,-d),x.transform(...a);let S=new Path2D;const[w,E,C,T]=e.bbox;if(S.rect(w,E,C-w,T-E),e.matrix){const R=new Path2D;R.addPath(S,new DOMMatrix(e.matrix)),S=R}x.clip(S),e.smask&&this.smaskStack.push({canvas:y.canvas,context:x,offsetX:c,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(c,d),n.save()),zl(n,x),this.ctx=x,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Se(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=io.slice();vt.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,n,a,o,l){if(this.#t(),Sd(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const c=n[2]-n[0],d=n[3]-n[1];if(l&&this.annotationCanvasMap){a=a.slice(),a[4]-=n[0],a[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=c,n[3]=d,vt.singularValueDecompose2dScale(Se(this.ctx),Un);const{viewportScale:h}=this,p=Math.ceil(c*this.outputScaleX*h),m=Math.ceil(d*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(p,m);const{canvas:y,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(e,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(Un[0],0,0,-Un[1],0,d*Un[1]),Sd(this.ctx)}else{Sd(this.ctx),this.endPath(t);const h=new Path2D;h.rect(n[0],n[1],c,d),this.ctx.clip(h)}}this.current=new bA(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const a=this.ctx,o=this._createMaskCanvas(t,e),l=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,a=0,o=0,l,c){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const h=Se(d);d.transform(n,a,o,l,0,0);const p=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,p.offsetX-h[4],p.offsetY-h[5]),this.dependencyTracker?.resetBBox(t);for(let m=0,y=c.length;m<y;m+=2){const x=vt.transform(h,[n,a,o,l,c[m],c[m+1]]);d.drawImage(p.canvas,x[4],x[5]),this.dependencyTracker?.recordBBox(t,this.ctx,x[4],x[4]+p.canvas.width,x[5],x[5]+p.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx,a=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,os.transformAndFill);for(const l of e){const{data:c,width:d,height:h,transform:p}=l,m=this.cachedCanvases.getCanvas("maskCanvas",d,h),y=m.context;y.save();const x=this.getObject(t,c,l);wA(y,x),y.globalCompositeOperation="source-in",y.fillStyle=o?a.getPattern(y,this,Bs(n),an.FILL,t):a,y.fillRect(0,0,d,h),y.restore(),n.save(),n.transform(...p),n.scale(1,-1),wd(n,m.canvas,0,0,d,h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,n,0,d,0,h),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){Bt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,a,o){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){Bt("Dependent image isn't ready yet");return}const c=l.width,d=l.height,h=[];for(let p=0,m=o.length;p<m;p+=2)h.push({transform:[n,0,0,a,o[p],o[p+1]],x:0,y:0,w:c,h:d});this.paintInlineImageXObjectGroup(t,l,h)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,a),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const n=e.width,a=e.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/n,-1/a);let c;if(e.bitmap)c=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)c=e;else{const p=this.cachedCanvases.getCanvas("inlineImage",n,a).context;xA(p,e),c=this.applyTransferMapsToCanvas(p)}const d=this._scaleImage(c,Bs(o));o.imageSmoothingEnabled=SA(Se(o),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,n,-a,0).recordDependencies(t,os.imageXObject).recordOperation(t),wd(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,n,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){if(!this.contentVisible)return;const a=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const l=e.width,c=e.height,h=this.cachedCanvases.getCanvas("inlineImage",l,c).context;xA(h,e),o=this.applyTransferMapsToCanvas(h)}this.dependencyTracker?.resetBBox(t);for(const l of n)a.save(),a.transform(...l.transform),a.scale(1,-1),wd(a,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,os.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const o=this.ctx;this.pendingClip?(a||(this.pendingClip===AA?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Se(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:a,d:o}=this.ctx.getTransform();let l,c;if(n===0&&a===0){const d=Math.abs(e),h=Math.abs(o);if(d===h)if(t===0)l=c=1/d;else{const p=d*t;l=c=p<1?1/p:1}else if(t===0)l=1/d,c=1/h;else{const p=d*t,m=h*t;l=p<1?1/p:1,c=m<1?1/m:1}}else{const d=Math.abs(e*o-n*a),h=Math.hypot(e,n),p=Math.hypot(a,o);if(t===0)l=p/d,c=h/d;else{const m=t*d;l=p>m?p/m:1,c=h>m?h/m:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:a}}=this,[o,l]=this.getScaleForStroking();if(o===l){n.lineWidth=(a||1)*o,n.stroke(t);return}const c=n.getLineDash();e&&n.save(),n.scale(o,l),Xm.a=1/o,Xm.d=1/l;const d=new Path2D;if(d.addPath(t,Xm),c.length>0){const h=Math.max(o,l);n.setLineDash(c.map(p=>p/h)),n.lineDashOffset/=h}n.lineWidth=a||1,n.stroke(d),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const s in To)vo.prototype[s]!==void 0&&(vo.prototype[To[s]]=vo.prototype[s]);class bo{#t;#e;#s;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,n={};let a=0;for(const h of bo.strings){const p=e.encode(t[h]);n[h]=p,a+=4+p.length}const o=new ArrayBuffer(a),l=new Uint8Array(o),c=new DataView(o);let d=0;for(const h of bo.strings){const p=n[h],m=p.length;c.setUint32(d,m),l.set(p,d+4),d+=4+m}return Wt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#s=new TextDecoder}#n(t){Wt(t<bo.strings.length,"Invalid string index");let e=0;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#s.decode(new Uint8Array(this.#t,e+4,n))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class xo{#t;#e;#s;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,n={};let a=0;for(const y of xo.strings){const x=e.encode(t[y]);n[y]=x,a+=4+x.length}a+=4;let o,l,c=1+a;t.style&&(o=e.encode(t.style.style),l=e.encode(t.style.weight),c+=4+o.length+4+l.length);const d=new ArrayBuffer(c),h=new Uint8Array(d),p=new DataView(d);let m=0;p.setUint8(m++,t.guessFallback?1:0),p.setUint32(m,0),m+=4,a=0;for(const y of xo.strings){const x=n[y],S=x.length;a+=4+S,p.setUint32(m,S),h.set(x,m+4),m+=4+S}return p.setUint32(m-a-4,a),t.style&&(p.setUint32(m,o.length),h.set(o,m+4),m+=4+o.length,p.setUint32(m,l.length),h.set(l,m+4),m+=4+l.length),Wt(m<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(m)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#s=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){Wt(t<xo.strings.length,"Invalid string index");let e=5;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#s.decode(new Uint8Array(this.#t,e+4,n))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),n=this.#s.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const a=this.#e.getUint32(t),o=this.#s.decode(new Uint8Array(this.#t,t+4,a));return{style:n,weight:o}}}class le{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#s=this.#e+1+8;static#n=this.#s+1+48;static#r=this.#n+1+6;#i;#a;#o;constructor({data:t,extra:e}){this.#i=t,this.#a=new TextDecoder,this.#o=new DataView(this.#i),e&&Object.assign(this,e)}#c(t){Wt(t<le.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,a=this.#o.getUint8(e)>>n&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Wt(t<le.numbers.length,"Invalid number index"),this.#o.getFloat64(le.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=le.#e;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let a=0;a<4;a++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=le.#s;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let a=0;a<6;a++)n.push(this.#o.getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=le.#n;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let a=0;a<3;a++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}#h(t){Wt(t<le.strings.length,"Invalid string index");let e=le.#r+4;for(let o=0;o<t;o++)e+=this.#o.getUint32(e)+4;const n=this.#o.getUint32(e),a=new Uint8Array(n);return a.set(new Uint8Array(this.#i,e+4,n)),this.#a.decode(a)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let t=le.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#i,t+4,o)}clearData(){let t=le.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);new Uint8Array(this.#i,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=le.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const a=this.#o.getUint32(t);if(a===0)return null;const o=new Uint8Array(a);return o.set(new Uint8Array(this.#i,t+4,a)),new bo(o.buffer)}get systemFontInfo(){let t=le.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);if(n===0)return null;const a=new Uint8Array(n);return a.set(new Uint8Array(this.#i,t+4,n)),new xo(a.buffer)}static write(t){const e=t.systemFontInfo?xo.write(t.systemFontInfo):null,n=t.cssFontInfo?bo.write(t.cssFontInfo):null,a=new TextEncoder,o={};let l=0;for(const w of le.strings)o[w]=a.encode(t[w]),l+=4+o[w].length;const c=le.#r+4+l+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(c),h=new Uint8Array(d),p=new DataView(d);let m=0;const y=le.bools.length;let x=0,S=0;for(let w=0;w<y;w++){const E=t[le.bools[w]];x|=(E===void 0?0:E?2:1)<<S,S+=2,(S===8||w===y-1)&&(p.setUint8(m++,x),x=0,S=0)}Wt(m===le.#t,"FontInfo.write: Boolean properties offset mismatch");for(const w of le.numbers)p.setFloat64(m,t[w]),m+=8;if(Wt(m===le.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(m++,4);for(const w of t.bbox)p.setInt16(m,w,!0),m+=2}else p.setUint8(m++,0),m+=8;if(Wt(m===le.#s,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(m++,6);for(const w of t.fontMatrix)p.setFloat64(m,w,!0),m+=8}else p.setUint8(m++,0),m+=48;if(Wt(m===le.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(m++,1);for(const w of t.defaultVMetrics)p.setInt16(m,w,!0),m+=2}else p.setUint8(m++,0),m+=6;Wt(m===le.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(le.#r,0),m+=4;for(const w of le.strings){const E=o[w],C=E.length;p.setUint32(m,C),h.set(E,m+4),m+=4+C}if(p.setUint32(le.#r,m-le.#r-4),!e)p.setUint32(m,0),m+=4;else{const w=e.byteLength;p.setUint32(m,w),Wt(m+4+w<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),h.set(new Uint8Array(e),m+4),m+=4+w}if(!n)p.setUint32(m,0),m+=4;else{const w=n.byteLength;p.setUint32(m,w),Wt(m+4+w<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),h.set(new Uint8Array(n),m+4),m+=4+w}return t.data===void 0?(p.setUint32(m,0),m+=4):(p.setUint32(m,t.data.length),h.set(t.data,m+4),m+=4+t.data.length),Wt(m<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(m)}}class ia{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class FV{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Jr=Symbol("INTERNAL");class IV{#t=!1;#e=!1;#s=!1;#n=!0;constructor(t,{name:e,intent:n,usage:a,rbGroups:o}){this.#t=!!(t&In.DISPLAY),this.#e=!!(t&In.PRINT),this.name=e,this.intent=n,this.usage=a,this.rbGroups=o}get visible(){if(this.#s)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==Jr&&de("Internal method `_setVisible` called."),this.#s=n,this.#n=e}}class zV{#t=null;#e=new Map;#s=null;#n=null;constructor(t,e=In.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const n of t.groups)this.#e.set(n.id,new IV(e,n));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(Jr,!1);for(const n of t.on)this.#e.get(n)._setVisible(Jr,!0);for(const n of t.off)this.#e.get(n)._setVisible(Jr,!1);this.#s=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let a=1;a<e;a++){const o=t[a];let l;if(Array.isArray(o))l=this.#r(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return Bt(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Lh("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(Bt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return Bt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return Bt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return Bt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return Bt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return Bt(`Unknown optional content policy ${t.policy}.`),!0}return Bt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){const a=this.#e.get(t);if(!a){Bt(`Optional content group not found: ${t}`);return}if(n&&e&&a.rbGroups.length)for(const o of a.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(Jr,!1,!0);a._setVisible(Jr,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let n;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":n=a;continue}const o=this.#e.get(a);if(o)switch(n){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!o.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new gR;for(const[e,n]of this.#e)t.update(`${e}:${n.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class UV{constructor(t,{disableRange:e=!1,disableStream:n=!1}){Wt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:l,contentDispositionFilename:c}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=c,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,h)=>{this._onReceiveData({begin:d,chunk:h})}),t.addProgressListener((d,h)=>{this._onProgress({loaded:d,total:h})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(n),!0)});Wt(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Wt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new VV(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new HV(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class VV{constructor(t,e,n=!1,a=null){this._stream=t,this._done=n||!1,this._filename=Ph(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class HV{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function $V(s){let t=!0,e=n("filename\\*","i").exec(s);if(e){e=e[1];let p=c(e);return p=unescape(p),p=d(p),p=h(p),o(p)}if(e=l(s),e){const p=h(e);return o(p)}if(e=n("filename","i").exec(s),e){e=e[1];let p=c(e);return p=h(p),o(p)}function n(p,m){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function a(p,m){if(p){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const y=new TextDecoder(p,{fatal:!0}),x=Dc(m);m=y.decode(x),t=!1}catch{}}return m}function o(p){return t&&/[\x80-\xff]/.test(p)&&(p=a("utf-8",p),t&&(p=a("iso-8859-1",p))),p}function l(p){const m=[];let y;const x=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=x.exec(p))!==null;){let[,w,E,C]=y;if(w=parseInt(w,10),w in m){if(w===0)break;continue}m[w]=[E,C]}const S=[];for(let w=0;w<m.length&&w in m;++w){let[E,C]=m[w];C=c(C),E&&(C=unescape(C),w===0&&(C=d(C))),S.push(C)}return S.join("")}function c(p){if(p.startsWith('"')){const m=p.slice(1).split('\\"');for(let y=0;y<m.length;++y){const x=m[y].indexOf('"');x!==-1&&(m[y]=m[y].slice(0,x),m.length=y+1),m[y]=m[y].replaceAll(/\\(.)/g,"$1")}p=m.join('"')}return p}function d(p){const m=p.indexOf("'");if(m===-1)return p;const y=p.slice(0,m),S=p.slice(m+1).replace(/^[^']*'/,"");return a(y,S)}function h(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,y,x,S){if(x==="q"||x==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,E){return String.fromCharCode(parseInt(E,16))}),a(y,S);try{S=atob(S)}catch{}return a(y,S)})}return""}function ER(s,t){const e=new Headers;if(!s||!t||typeof t!="object")return e;for(const n in t){const a=t[n];a!==void 0&&e.append(n,a)}return e}function jh(s){return URL.parse(s)?.origin??null}function CR({responseHeaders:s,isHttp:t,rangeChunkSize:e,disableRange:n}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(s.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*e)||n||!t||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function TR(s){const t=s.get("Content-Disposition");if(t){let e=$V(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Ph(e))return e}return null}function jc(s,t){return new gc(`Unexpected server response (${s}) while retrieving PDF "${t}".`,s,s===404||s===0&&t.startsWith("file:"))}function _R(s){return s===200||s===206}function RR(s,t,e){return{method:"GET",headers:s,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function NR(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Bt(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class GV{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=ER(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Wt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new qV(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new XV(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class qV{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),a=e.url;fetch(a,RR(n,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=jh(o.url),!_R(o.status))throw jc(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:c,suggestedLength:d}=CR({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=d||this._contentLength,this._filename=TR(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ei("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:NR(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class XV{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${n-1}`);const l=a.url;fetch(l,RR(o,this._withCredentials,this._abortController)).then(c=>{const d=jh(c.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!_R(c.status))throw jc(c.status,l);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:NR(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Ym=200,Wm=206;function YV(s){const t=s.response;return typeof t!="string"?t:Dc(t).buffer}class WV{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=ER(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,a=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,l]of this.headers)e.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=Wm):a.expectedStatus=Ym,e.responseType="arraybuffer",Wt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){const n=this.pendingRequests[t];n&&n.onProgress?.(e)}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const a=n.xhr;if(a.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){n.onError(a.status);return}const o=a.status||Ym;if(!(o===Ym&&n.expectedStatus===Wm)&&o!==n.expectedStatus){n.onError(a.status);return}const c=YV(a);if(o===Wm){const d=a.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);h?n.onDone({begin:parseInt(h[1],10),chunk:c}):(Bt('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class KV{constructor(t){this._source=t,this._manager=new WV(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Wt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new QV(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new ZV(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class QV{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=jh(e.responseURL);const n=e.getAllResponseHeaders(),a=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[d,...h]=c.split(": ");return[d,h.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=CR({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=TR(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=jc(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class ZV{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=jh(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=jc(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const JV=/^[a-z][a-z0-9\-+.]+:/i;function tH(s){if(JV.test(s))return new URL(s);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(s))}class eH{constructor(t){this.source=t,this.url=tH(t.url),Wt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Wt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new nH(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new sH(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class nH{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=jc(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ei("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class sH{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ul=Symbol("INITIAL_DATA");class MR{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Ul}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const n=this.#t[t];if(!n||n.data===Ul)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=this.#t[t];return!!e&&e.data!==Ul}delete(t){const e=this.#t[t];return!e||e.data===Ul?!1:(delete this.#t[t],!0)}resolve(t,e=null){const n=this.#e(t);n.data=e,n.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Ul&&(yield[t,e])}}}const iH=1e5,EA=30;let vc=class ls{#t=Promise.withResolvers();#e=null;#s=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#i=null;#a=0;#o=0;#c=null;#l=null;#h=0;#d=0;#f=Object.create(null);#g=[];#p=null;#u=[];#m=new WeakMap;#y=null;static#b=new Map;static#v=new Map;static#C=new WeakMap;static#A=null;static#x=new Set;constructor({textContentSource:t,container:e,viewport:n}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#d=n.scale*Ts.pixelRatio,this.#h=n.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:l,pageY:c}=n.rawDims;this.#y=[1,0,0,-1,-l,c+o],this.#o=a,this.#a=o,ls.#N(),ca(e,n),this.#t.promise.finally(()=>{ls.#x.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=We.platform;return Ut(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:n})=>{if(n){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#_(e.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),ls.#x.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const n=t.scale*Ts.pixelRatio,a=t.rotation;if(a!==this.#h&&(e?.(),this.#h=a,ca(this.#l,{rotation:a})),n!==this.#d){e?.(),this.#d=n;const o={div:null,properties:null,ctx:ls.#M(this.#r)};for(const l of this.#u)o.properties=this.#m.get(l),o.div=l,this.#E(o)}}cancel(){const t=new Ei("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#_(t){if(this.#s)return;this.#i.ctx??=ls.#M(this.#r);const e=this.#u,n=this.#g;for(const a of t){if(e.length>iH){Bt("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),o.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(a.str),this.#S(a)}}#S(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const a=vt.transform(this.#y,t.transform);let o=Math.atan2(a[1],a[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let c=this.#n&&l.fontSubstitution||l.fontFamily;c=ls.fontFamilyMap.get(c)||c;const d=Math.hypot(a[2],a[3]),h=d*ls.#B(c,l,this.#r);let p,m;o===0?(p=a[4],m=a[5]-h):(p=a[4]+h*Math.sin(o),m=a[5]-h*Math.cos(o));const y="calc(var(--total-scale-factor) *",x=e.style;this.#e===this.#l?(x.left=`${(100*p/this.#o).toFixed(2)}%`,x.top=`${(100*m/this.#a).toFixed(2)}%`):(x.left=`${y}${p.toFixed(2)}px)`,x.top=`${y}${m.toFixed(2)}px)`),x.fontSize=`${y}${(ls.#A*d).toFixed(2)}px)`,x.fontFamily=c,n.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let S=!1;if(t.str.length>1)S=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const w=Math.abs(t.transform[0]),E=Math.abs(t.transform[3]);w!==E&&Math.max(w,E)/Math.min(w,E)>1.5&&(S=!0)}if(S&&(n.canvasWidth=l.vertical?t.height:t.width),this.#m.set(e,n),this.#i.div=e,this.#i.properties=n,this.#E(this.#i),n.hasText&&this.#e.append(e),n.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#e.append(w)}}#E(t){const{div:e,properties:n,ctx:a}=t,{style:o}=e;let l="";if(ls.#A>1&&(l=`scale(${1/ls.#A})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=o,{canvasWidth:d,fontSize:h}=n;ls.#R(a,h*this.#d,c);const{width:p}=a.measureText(e.textContent);p>0&&(l=`scaleX(${d*this.#d/p}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#x.size>0)){this.#b.clear();for(const{canvas:t}of this.#v.values())t.remove();this.#v.clear()}}static#M(t=null){let e=this.#v.get(t||="");if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(t,e),this.#C.set(e,{size:0,family:""})}return e}static#R(t,e,n){const a=this.#C.get(t);e===a.size&&n===a.family||(t.font=`${e}px ${n}`,a.size=e,a.family=n)}static#N(){if(this.#A!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#A=t.getBoundingClientRect().height,t.remove()}static#B(t,e,n){const a=this.#b.get(t);if(a)return a;const o=this.#M(n);o.canvas.width=o.canvas.height=EA,this.#R(o,EA,t);const l=o.measureText(""),c=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let h=.8;return c?h=c/(c+d):(We.platform.isFirefox&&Bt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?h=e.ascent:e.descent&&(h=1+e.descent)),this.#b.set(t,h),h}};const aH=100;function mv(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const t=new gv,{docId:e}=t,n=s.url?fV(s.url):null,a=s.data?pV(s.data):null,o=s.httpHeaders||null,l=s.withCredentials===!0,c=s.password??null,d=s.range instanceof yv?s.range:null,h=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let p=s.worker instanceof _o?s.worker:null;const m=s.verbosity,y=typeof s.docBaseUrl=="string"&&!Lc(s.docBaseUrl)?s.docBaseUrl:null,x=yd(s.cMapUrl),S=s.cMapPacked!==!1,w=s.CMapReaderFactory||(fn?wV:uA),E=yd(s.iccUrl),C=yd(s.standardFontDataUrl),T=s.StandardFontDataFactory||(fn?SV:dA),R=yd(s.wasmUrl),N=s.WasmFactory||(fn?AV:hA),M=s.stopAtErrors!==!0,O=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,k=s.isEvalSupported!==!1,L=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!fn,j=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!fn&&(We.platform.isFirefox||!globalThis.chrome),U=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,H=typeof s.disableFontFace=="boolean"?s.disableFontFace:fn,$=s.fontExtraProperties===!0,Z=s.enableXfa===!0,et=s.ownerDocument||globalThis.document,ct=s.disableRange===!0,P=s.disableStream===!0,z=s.disableAutoFetch===!0,I=s.pdfBug===!0,K=s.CanvasFactory||(fn?xV:yV),ht=s.FilterFactory||(fn?bV:vV),B=s.enableHWA===!0,X=s.useWasm!==!1,tt=d?d.length:s.length??NaN,ot=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!fn&&!H,pt=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(w===uA&&T===dA&&N===hA&&x&&C&&R&&Xl(x,document.baseURI)&&Xl(C,document.baseURI)&&Xl(R,document.baseURI)),st=null;YU(m);const nt={canvasFactory:new K({ownerDocument:et,enableHWA:B}),filterFactory:new ht({docId:e,ownerDocument:et}),cMapReaderFactory:pt?null:new w({baseUrl:x,isCompressed:S}),standardFontDataFactory:pt?null:new T({baseUrl:C}),wasmFactory:pt?null:new N({baseUrl:R})};p||(p=_o.create({verbosity:m,port:ia.workerPort}),t._worker=p);const Et={docId:e,apiVersion:"5.4.296",data:a,password:c,disableAutoFetch:z,rangeChunkSize:h,length:tt,docBaseUrl:y,enableXfa:Z,evaluatorOptions:{maxImageSize:O,disableFontFace:H,ignoreErrors:M,isEvalSupported:k,isOffscreenCanvasSupported:L,isImageDecoderSupported:j,canvasMaxAreaInBytes:U,fontExtraProperties:$,useSystemFonts:ot,useWasm:X,useWorkerFetch:pt,cMapUrl:x,iccUrl:E,standardFontDataUrl:C,wasmUrl:R}},bt={ownerDocument:et,pdfBug:I,styleElement:st,loadingParams:{disableAutoFetch:z,enableXfa:Z}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Nt=p.messageHandler.sendWithPromise("GetDocRequest",Et,a?[a.buffer]:null);let q;if(d)q=new UV(d,{disableRange:ct,disableStream:P});else if(!a){if(!n)throw new Error("getDocument - no `url` parameter provided.");const lt=Xl(n)?GV:fn?eH:KV;q=new lt({url:n,length:tt,httpHeaders:o,withCredentials:l,rangeChunkSize:h,disableRange:ct,disableStream:P})}return Nt.then(lt=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const ut=new Yl(e,lt,p.port),ft=new lH(ut,t,q,bt,nt,B);t._transport=ft,ut.send("Ready",null)})}).catch(t._capability.reject),t}class gv{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${gv.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let yv=class{#t=Promise.withResolvers();#e=[];#s=[];#n=[];#r=[];constructor(t,e,n=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=a}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#s.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const n of this.#r)n(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const n of this.#n)n(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#s)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){de("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class rH{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ut(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class oH{#t=!1;constructor(t,e,n,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=a?new sA:null,this._pdfBug=a,this.commonObjs=n.commonObjs,this.objs=new MR,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:a=0,dontFlip:o=!1}={}){return new kc({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ut(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:a="display",annotationMode:o=Hs.ENABLE,transform:l=null,background:c=null,optionalContentConfigPromise:d=null,annotationCanvasMap:h=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:y=!1,recordOperations:x=!1,operationsFilter:S=null}){this._stats?.time("Overall");const w=this._transport.getRenderingIntent(a,o,m,y),{renderingIntent:E,cacheKey:C}=w;this.#t=!1,d||=this._transport.getOptionalContentConfig(E);let T=this._intentStates.get(C);T||(T=Object.create(null),this._intentStates.set(C,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const R=!!(E&In.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(w));const N=!!(this._pdfBug&&globalThis.StepperManager?.enabled),M=!this.recordedBBoxes&&(x||N),O=j=>{if(T.renderTasks.delete(k),M){const U=k.gfx?.dependencyTracker.take();U&&(k.stepper&&k.stepper.setOperatorBBoxes(U,k.gfx.dependencyTracker.takeDebugMetadata()),x&&(this.recordedBBoxes=U))}R&&(this.#t=!0),this.#e(),j?(k.capability.reject(j),this._abortOperatorList({intentState:T,reason:j instanceof Error?j:new Error(j)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new ao({callback:O,params:{canvas:e,canvasContext:t,dependencyTracker:M?new CV(e,T.operatorList.length,N):null,viewport:n,transform:l,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:S});(T.renderTasks||=new Set).add(k);const L=k.task;return Promise.all([T.displayReadyCapability.promise,d]).then(([j,U])=>{if(this.destroyed){O();return}if(this._stats?.time("Rendering"),!(U.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:j,optionalContentConfig:U}),k.operatorListChanged()}).catch(O),L}getOperatorList({intent:t="display",annotationMode:e=Hs.ENABLE,printAnnotationStorage:n=null,isEditing:a=!1}={}){function o(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,e,n,a,!0);let c=this._intentStates.get(l.cacheKey);c||(c=Object.create(null),this._intentStates.set(l.cacheKey,c));let d;return c.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(d),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>yc.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,a){function o(){l.read().then(function({value:d,done:h}){if(h){n(c);return}c.lang??=d.lang,Object.assign(c.styles,d.styles),c.items.push(...d.items),o()},a)}const l=e.getReader(),c={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new sA),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,a=t.length;n<a;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:a}){const{map:o,transfer:l}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:a},l).getReader(),h=this._intentStates.get(e);h.streamReader=d;const p=()=>{d.read().then(({value:m,done:y})=>{if(y){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,h),p())},m=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const y of h.renderTasks)y.operatorListChanged();this.#e()}if(h.displayReadyCapability)h.displayReadyCapability.reject(m);else if(h.opListReadCapability)h.opListReadCapability.reject(m);else throw m}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Oh){let a=aH;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new Ei(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var ea,As,yi,Ua,uh,Va,Ha,yn,Bd,DR,kR,Wl,Ao,Fd;const we=class we{constructor({name:t=null,port:e=null,verbosity:n=WU()}={}){Ps(this,yn);Ps(this,ea,Promise.withResolvers());Ps(this,As,null);Ps(this,yi,null);Ps(this,Ua,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(xe(we,Ha).has(e))throw new Error("Cannot use more than one PDFWorker per port.");xe(we,Ha).set(e,this),js(this,yn,DR).call(this,e)}else js(this,yn,kR).call(this)}get promise(){return xe(this,ea).promise}get port(){return xe(this,yi)}get messageHandler(){return xe(this,As)}destroy(){this.destroyed=!0,xe(this,Ua)?.terminate(),Tn(this,Ua,null),xe(we,Ha).delete(xe(this,yi)),Tn(this,yi,null),xe(this,As)?.destroy(),Tn(this,As,null)}static create(t){const e=xe(this,Ha).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new we(t)}static get workerSrc(){if(ia.workerSrc)return ia.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ut(this,"_setupFakeWorkerGlobal",(async()=>xe(this,Ao,Fd)?xe(this,Ao,Fd):(await import(this.workerSrc)).WorkerMessageHandler)())}};ea=new WeakMap,As=new WeakMap,yi=new WeakMap,Ua=new WeakMap,uh=new WeakMap,Va=new WeakMap,Ha=new WeakMap,yn=new WeakSet,Bd=function(){xe(this,ea).resolve(),xe(this,As).send("configure",{verbosity:this.verbosity})},DR=function(t){Tn(this,yi,t),Tn(this,As,new Yl("main","worker",t)),xe(this,As).on("ready",()=>{}),js(this,yn,Bd).call(this)},kR=function(){if(xe(we,Va)||xe(we,Ao,Fd)){js(this,yn,Wl).call(this);return}let{workerSrc:t}=we;try{we._isSameOrigin(window.location,t)||(t=we._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Yl("main","worker",e),a=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?xe(this,ea).reject(new Error("Worker was destroyed")):js(this,yn,Wl).call(this)},o=new AbortController;e.addEventListener("error",()=>{xe(this,Ua)||a()},{signal:o.signal}),n.on("test",c=>{if(o.abort(),this.destroyed||!c){a();return}Tn(this,As,n),Tn(this,yi,e),Tn(this,Ua,e),js(this,yn,Bd).call(this)}),n.on("ready",c=>{if(o.abort(),this.destroyed){a();return}try{l()}catch{js(this,yn,Wl).call(this)}});const l=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};l();return}catch{Lh("The worker has been disabled.")}js(this,yn,Wl).call(this)},Wl=function(){xe(we,Va)||(Bt("Setting up fake worker."),Tn(we,Va,!0)),we._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){xe(this,ea).reject(new Error("Worker was destroyed"));return}const e=new gV;Tn(this,yi,e);const n=`fake${Sw(we,uh)._++}`,a=new Yl(n+"_worker",n,e);t.setup(a,e),Tn(this,As,new Yl(n,n+"_worker",e)),js(this,yn,Bd).call(this)}).catch(t=>{xe(this,ea).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Ao=new WeakSet,Fd=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Ps(we,Ao),Ps(we,uh,0),Ps(we,Va,!1),Ps(we,Ha,new WeakMap),fn&&(Tn(we,Va,!0),ia.workerSrc||="./pdf.worker.mjs"),we._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!n?.origin||n.origin==="null")return!1;const a=new URL(e,n);return n.origin===a.origin},we._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},we.fromPort=t=>{if(iV("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return we.create(t)};let _o=we;class lH{#t=new Map;#e=new Map;#s=new Map;#n=new Map;#r=null;constructor(t,e,n,a,o,l){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new MR,this.fontLoader=new dV({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#i(t,e=null){const n=this.#t.get(t);if(n)return n;const a=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,a),a}get annotationStorage(){return Ut(this,"annotationStorage",new dv)}getRenderingIntent(t,e=Hs.ENABLE,n=null,a=!1,o=!1){let l=In.DISPLAY,c=Hg;switch(t){case"any":l=In.ANY;break;case"display":break;case"print":l=In.PRINT;break;default:Bt(`getRenderingIntent - invalid intent: ${t}`)}const d=l&In.PRINT&&n instanceof yR?n:this.annotationStorage;switch(e){case Hs.DISABLE:l+=In.ANNOTATIONS_DISABLE;break;case Hs.ENABLE:break;case Hs.ENABLE_FORMS:l+=In.ANNOTATIONS_FORMS;break;case Hs.ENABLE_STORAGE:l+=In.ANNOTATIONS_STORAGE,c=d.serializable;break;default:Bt(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(l+=In.IS_EDITING),o&&(l+=In.OPLIST);const{ids:h,hash:p}=d.modifiedIds,m=[l,c.hash,p];return{renderingIntent:l,cacheKey:m.join("_"),annotationStorageSerializable:c,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of this.#e.values())t.push(n._destroy());this.#e.clear(),this.#s.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),vc.cleanup(),this._networkStream?.cancelAllRequests(new Ei("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,a)=>{Wt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){a.close();return}Wt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:l}=this._fullReader;return(!a||!o)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{e.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(n,a)=>{Wt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:l,done:c}){if(c){a.close();return}Wt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{o.cancel(l),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new rH(n,this))}),t.on("DocException",n=>{e._capability.reject(_n(n))}),t.on("PasswordRequest",n=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw _n(n);const a=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};e.onPassword(a,n.code)}catch(a){this.#r.reject(a)}return this.#r.promise}),t.on("DataLoaded",n=>{e.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#e.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,a,o])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(a){case"Font":if("error"in o){const p=o.error;Bt(`Error during font loading: ${p}`),this.commonObjs.resolve(n,p);break}const l=new le(o),c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,d=new hV(l,c,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:h}=o;Wt(h,"The imageRef must be defined.");for(const p of this.#e.values())for(const[,m]of p.objs)if(m?.ref===h)return m.dataLen?(this.commonObjs.resolve(n,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([n,a,o,l])=>{if(this.destroyed)return;const c=this.#e.get(a);if(!c.objs.has(n)){if(c._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":c.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{this.destroyed||e.onProgress?.({loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[n.type];if(!a)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Bt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=this.#s.get(e);if(n)return n;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#n.set(o.refStr,t);const l=new oH(e,o,this,this._params.pdfBug);return this.#e.set(e,l),l});return this.#s.set(e,a),a}getPageIndex(t){return $g(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#i("GetOptionalContentConfig").then(e=>new zV(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new FV(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),vc.cleanup()}}cachedPageNumber(t){if(!$g(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class cH{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class ao{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:a,annotationCanvasMap:o,operatorList:l,pageIndex:c,canvasFactory:d,filterFactory:h,useRequestAnimationFrame:p=!1,pdfBug:m=!1,pageColors:y=null,enableHWA:x=!1,operationsFilter:S=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=c,this.canvasFactory=d,this.filterFactory=h,this._pdfBug=m,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new cH(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=x,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=S}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(ao.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ao.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:a,background:o,dependencyTracker:l}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new vo(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:a,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ao.#e.delete(this._canvas),t||=new Oh(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ao.#e.delete(this._canvas),this.callback())))}}const vv="5.4.296",LR="f56dc8601";class zn{#t=null;#e=null;#s;#n=null;#r=!1;#i=!1;#a=null;#o;#c=null;#l=null;static#h=null;static get _keyboardManager(){return Ut(this,"_keyboardManager",new Oc([[["Escape","mac+Escape"],zn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],zn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],zn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],zn.prototype._moveToPrevious],[["Home","mac+Home"],zn.prototype._moveToBeginning],[["End","mac+End"],zn.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#i=!1,this.#a=t):this.#i=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#s=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",zn.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const n=this.#e=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#s,t.append(n),t}renderMainDropdown(){const t=this.#n=this.#d();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#d(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",Xn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[n,a]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=n,o.setAttribute("data-l10n-id",zn.#h[n]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=a,o.ariaSelected=a===this.#s,o.addEventListener("click",this.#f.bind(this,a),{signal:e}),t.append(o)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Xt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#m){this.#p(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#p(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#m){this.#p(t);return}this.#n.lastChild?.focus()}#g(t){zn._keyboardManager.exec(this,t)}#p(t){if(this.#m){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#d();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#m(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#m){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const n of this.#n.children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class bc{#t=null;#e=null;#s=null;static#n=null;constructor(t){this.#e=t,this.#s=t._uiManager,bc.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:n}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=n||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",bc.#n[t]),a.addEventListener("input",()=>{this.#s.updateParams(e,a.value)},{signal:this.#s._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function CA(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function Vl(s){return Math.max(0,Math.min(255,255*s))}class TA{static CMYK_G([t,e,n,a]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Vl(t),[t,t,t]}static G_HTML([t]){const e=CA(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Vl)}static RGB_HTML(t){return`#${t.map(CA).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,n+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,n,a]){return[Vl(1-Math.min(1,t+a)),Vl(1-Math.min(1,n+a)),Vl(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const a=1-t,o=1-e,l=1-n,c=Math.min(a,o,l);return["CMYK",a,o,l,c]}}class uH{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),n||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){de("Abstract method `_createSVG` called.")}}class xc extends uH{_createSVG(t){return document.createElementNS(gi,t)}}const dH=9,er=new WeakSet,hH=new Date().getTimezoneOffset()*60*1e3;class _A{static create(t){switch(t.data.annotationType){case Le.LINK:return new bv(t);case Le.TEXT:return new pH(t);case Le.WIDGET:switch(t.data.fieldType){case"Tx":return new mH(t);case"Btn":return t.data.radioButton?new OR(t):t.data.checkBox?new yH(t):new vH(t);case"Ch":return new bH(t);case"Sig":return new gH(t)}return new ar(t);case Le.POPUP:return new Xg(t);case Le.FREETEXT:return new PR(t);case Le.LINE:return new wH(t);case Le.SQUARE:return new SH(t);case Le.CIRCLE:return new AH(t);case Le.POLYLINE:return new jR(t);case Le.CARET:return new CH(t);case Le.INK:return new xv(t);case Le.POLYGON:return new EH(t);case Le.HIGHLIGHT:return new BR(t);case Le.UNDERLINE:return new TH(t);case Le.SQUIGGLY:return new _H(t);case Le.STRIKEOUT:return new RH(t);case Le.STAMP:return new FR(t);case Le.FILEATTACHMENT:return new NH(t);default:return new Te(t)}}}class Te{#t=null;#e=!1;#s=null;constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Te._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:a}=this.data;let o=-1/0,l=-1/0;if(e?.length>=8){for(let c=0;c<e.length;c+=8)e[c+1]>l?(l=e[c+1],o=e[c+2]):e[c+1]===l&&(o=Math.max(o,e[c+2]));return[o,l]}if(n?.length>=1){for(const c of n)for(let d=0,h=c.length;d<h;d+=2)c[d+1]>l?(l=c[d+1],o=c[d]):c[d+1]===l&&(o=Math.max(o,c[d]));if(o!==1/0)return[o,l]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:a,pageX:o,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/n,t[1]=100*(t[1]-l)/a,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${mc}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${mc}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#s?.popup||this.popup)?.remove(),this.#s=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:n}=t;e&&this.#n(e);let a=this.#s?.popup||this.popup;!a&&n?.text&&(this._createPopup(n),a=this.#s.popup),a&&(a.updateEdited(t),n?.deleted&&(a.remove(),this.#s=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#s?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:n,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:c,pageY:d}}}}=this;n?.splice(0,4,...t),e.left=`${100*(t[0]-c)/o}%`,e.top=`${100*(l-t[3]+d)/l}%`,a===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:n,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof ar)&&!(this instanceof bv)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof Xg){const{rotation:w}=e;return!e.hasOwnCanvas&&w!==0&&this.setRotation(w,o),o}const{width:c,height:d}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const w=e.borderStyle.horizontalCornerRadius,E=e.borderStyle.verticalCornerRadius;if(w>0||E>0){const T=`calc(${w}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;l.borderRadius=T}else if(this instanceof OR){const T=`calc(${c}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=T}switch(e.borderStyle.style){case Zr.SOLID:l.borderStyle="solid";break;case Zr.DASHED:l.borderStyle="dashed";break;case Zr.BEVELED:Bt("Unimplemented border style: beveled");break;case Zr.INSET:Bt("Unimplemented border style: inset");break;case Zr.UNDERLINE:l.borderBottomStyle="solid";break}const C=e.borderColor||null;C?(this.#e=!0,l.borderColor=vt.makeHexColor(C[0]|0,C[1]|0,C[2]|0)):l.borderWidth=0}const h=vt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:m,pageX:y,pageY:x}=a.rawDims;l.left=`${100*(h[0]-y)/p}%`,l.top=`${100*(h[1]-x)/m}%`;const{rotation:S}=e;return e.hasOwnCanvas||S===0?(l.width=`${100*c/p}%`,l.height=`${100*d/m}%`):this.setRotation(S,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),e.style.width=`${100*o/n}%`,e.style.height=`${100*l/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,a)=>{const o=a.detail[e],l=o[0],c=o.slice(1);a.target.style[n]=TA[`${l}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:TA[`${l}_rgb`](c)})};return Ut(this,"_commonActions",{display:e=>{const{display:n}=e.detail,a=n%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||n[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[a,o]of Object.entries(e)){const l=n[a];if(l){const c={detail:{[a]:o},target:t};l(c),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,a,o]=this.data.rect.map(w=>Math.fround(w));if(t.length===8){const[w,E,C,T]=t.subarray(2,6);if(a===w&&o===E&&e===C&&n===T)return}const{style:l}=this.container;let c;if(this.#e){const{borderColor:w,borderWidth:E}=l;l.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const d=a-e,h=o-n,{svgFactory:p}=this,m=p.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const y=p.createElement("defs");m.append(y);const x=p.createElement("clipPath"),S=`clippath_${this.data.id}`;x.setAttribute("id",S),x.setAttribute("clipPathUnits","objectBoundingBox"),y.append(x);for(let w=2,E=t.length;w<E;w+=8){const C=t[w],T=t[w+1],R=t[w+2],N=t[w+3],M=p.createElement("rect"),O=(R-e)/d,k=(o-T)/h,L=(C-R)/d,j=(T-N)/h;M.setAttribute("x",O),M.setAttribute("y",k),M.setAttribute("width",L),M.setAttribute("height",j),x.append(M),c?.push(`<rect vector-effect="non-scaling-stroke" x="${O}" y="${k}" width="${L}" height="${j}"/>`)}this.#e&&(c.push("</g></svg>')"),l.backgroundImage=c.join("")),this.container.append(m),this.container.style.clipPath=`url(#${S})`}_createPopup(t=null){const{data:e}=this;let n,a;t?(n={str:t.text},a=t.date):(n=e.contentsObj,a=e.modificationDate);const o=this.#s=new Xg({data:{color:e.color,titleObj:e.titleObj,modificationDate:a,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#s||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#s}render(){de("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:l,exportValues:c}of a){if(o===-1||l===e)continue;const d=typeof c=="string"?c:null,h=document.querySelector(`[data-element-id="${l}"]`);if(h&&!er.has(h)){Bt(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:d,domElement:h})}return n}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,l=a.getAttribute("data-element-id");l!==e&&er.has(a)&&n.push({id:l,exportValue:o,domElement:a})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class fH extends Te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class bv extends Te{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(n,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(n,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#s(n,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(n,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),a=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(n,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(n),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,n=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),n&&(t.title=n)}_bindNamedAction(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),n&&(t.title=n),this.#t()}#e(t,e,n="",a=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:n&&(t.title=n),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,a),!1),this.#t()}#s(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),n&&(t.title=n),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const o=n.get(a);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Bt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();const{fields:a,refs:o,include:l}=e,c=[];if(a.length!==0||o.length!==0){const p=new Set(o);for(const m of a){const y=this._fieldObjects[m]||[];for(const{id:x}of y)p.add(x)}for(const m of Object.values(this._fieldObjects))for(const y of m)p.has(y.id)===l&&c.push(y)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const d=this.annotationStorage,h=[];for(const p of c){const{id:m}=p;switch(h.push(m),p.type){case"text":{const x=p.defaultValue||"";d.setValue(m,{value:x});break}case"checkbox":case"radiobutton":{const x=p.defaultValue===p.exportValues;d.setValue(m,{value:x});break}case"combobox":case"listbox":{const x=p.defaultValue||"";d.setValue(m,{value:x});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!er.has(y)){Bt(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class pH extends Te{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class ar extends Te{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return We.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,a,o){n.includes("mouse")?t.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l)}})})}_setEventListeners(t,e,n,a){for(const[o,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,o,l,a),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":vt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||dH,o=t.style;let l;const c=2,d=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c),p=Math.round(h/(Vm*a))||1,m=h/p;l=Math.min(a,d(m/Vm))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c);l=Math.min(a,d(h/Vm))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=vt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class mH extends ar{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,a){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),o.setValue(l.id,{[a]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let o=a.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let c=a.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=c??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",c??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),er.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:h,datetimeType:p,timeStep:m}=this.data,y=!!p&&this.enableScripting;h&&(n.title=h),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",S=>{t.setValue(e,{value:S.target.value}),this.setPropertyOnSiblings(n,"value",S.target.value,"value"),d.formattedValue=null}),n.addEventListener("resetform",S=>{const w=this.data.defaultFieldValue??"";n.value=d.userValue=w,d.formattedValue=null});let x=S=>{const{formattedValue:w}=d;w!=null&&(S.target.value=w),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",w=>{if(d.focused)return;const{target:E}=w;if(y&&(E.type=p,m&&(E.step=m)),d.userValue){const C=d.userValue;if(y)if(p==="time"){const T=new Date(C),R=[T.getHours(),T.getMinutes(),T.getSeconds()];E.value=R.map(N=>N.toString().padStart(2,"0")).join(":")}else E.value=new Date(C-hH).toISOString().split(p==="date"?"T":".",1)[0];else E.value=C}d.lastCommittedValue=E.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),n.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const E={value(C){d.userValue=C.detail.value??"",y||t.setValue(e,{value:d.userValue.toString()}),C.target.value=d.userValue},formattedValue(C){const{formattedValue:T}=C.detail;d.formattedValue=T,T!=null&&C.target!==document.activeElement&&(C.target.value=T);const R={formattedValue:T};y&&(R.value=T),t.setValue(e,R)},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{const{charLimit:T}=C.detail,{target:R}=C;if(T===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",T);let N=d.userValue;!N||N.length<=T||(N=N.slice(0,T),R.value=d.userValue=N,t.setValue(e,{value:N}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(E,w)}),n.addEventListener("keydown",w=>{d.commitKey=1;let E=-1;if(w.key==="Escape"?E=0:w.key==="Enter"&&!this.data.multiLine?E=2:w.key==="Tab"&&(d.commitKey=3),E===-1)return;const{value:C}=w.target;d.lastCommittedValue!==C&&(d.lastCommittedValue=C,d.userValue=C,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:E,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const S=x;x=null,n.addEventListener("blur",w=>{if(!d.focused||!w.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:E}=w;let{value:C}=E;if(y){if(C&&p==="time"){const T=C.split(":").map(R=>parseInt(R,10));C=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),E.step=""}else C.includes("T")||(C=`${C}T00:00`),C=new Date(C).valueOf();E.type="text"}d.userValue=C,d.lastCommittedValue!==C&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:d.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}),S(w)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",w=>{d.lastCommittedValue=null;const{data:E,target:C}=w,{value:T,selectionStart:R,selectionEnd:N}=C;let M=R,O=N;switch(w.inputType){case"deleteWordBackward":{const k=T.substring(0,R).match(/\w*[^\w]*$/);k&&(M-=k[0].length);break}case"deleteWordForward":{const k=T.substring(R).match(/^[^\w]*\w*/);k&&(O+=k[0].length);break}case"deleteContentBackward":R===N&&(M-=1);break;case"deleteContentForward":R===N&&(O+=1);break}w.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,change:E||"",willCommit:!1,selStart:M,selEnd:O}})}),this._setEventListeners(n,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(x&&n.addEventListener("blur",x),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class gH extends ar{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class yH extends ar{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(n,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return er.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:c,checked:d}=l.target;for(const h of this._getElementsByName(c,n)){const p=d&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=p),t.setValue(h.id,{value:p})}t.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const c=e.defaultFieldValue||"Off";l.target.checked=c===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const c={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class OR extends ar{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(n,{value:a})),a)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(er.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:c,checked:d}=l.target;for(const h of this._getElementsByName(c,n))t.setValue(h.id,{value:!1});t.setValue(n,{value:d})}),o.addEventListener("resetform",l=>{const c=e.defaultFieldValue;l.target.checked=c!=null&&c===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;o.addEventListener("updatefromsandbox",c=>{const d={value:h=>{const p=l===h.detail.value;for(const m of this._getElementsByName(h.target.name)){const y=p&&m.id===n;m.domElement&&(m.domElement.checked=y),t.setValue(m.id,{value:y})}}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class vH extends bv{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class bH extends ar{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");er.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue;for(const y of a.options)y.selected=y.value===m});for(const p of this.data.options){const m=document.createElement("option");m.textContent=p.displayValue,m.value=p.exportValue,n.value.includes(p.exportValue)&&(m.setAttribute("selected",!0),o=!1),a.append(m)}let l=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),a.prepend(p),l=()=>{p.remove(),a.removeEventListener("input",l),l=null},a.addEventListener("input",l)}const c=p=>{const m=p?"value":"textContent",{options:y,multiple:x}=a;return x?Array.prototype.filter.call(y,S=>S.selected).map(S=>S[m]):y.selectedIndex===-1?null:y[y.selectedIndex][m]};let d=c(!1);const h=p=>{const m=p.target.options;return Array.prototype.map.call(m,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",p=>{const m={value(y){l?.();const x=y.detail.value,S=new Set(Array.isArray(x)?x:[x]);for(const w of a.options)w.selected=S.has(w.value);t.setValue(e,{value:c(!0)}),d=c(!1)},multipleSelection(y){a.multiple=!0},remove(y){const x=a.options,S=y.detail.remove;x[S].selected=!1,a.remove(S),x.length>0&&Array.prototype.findIndex.call(x,E=>E.selected)===-1&&(x[0].selected=!0),t.setValue(e,{value:c(!0),items:h(y)}),d=c(!1)},clear(y){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=c(!1)},insert(y){const{index:x,displayValue:S,exportValue:w}=y.detail.insert,E=a.children[x],C=document.createElement("option");C.textContent=S,C.value=w,E?E.before(C):a.append(C),t.setValue(e,{value:c(!0),items:h(y)}),d=c(!1)},items(y){const{items:x}=y.detail;for(;a.length!==0;)a.remove(0);for(const S of x){const{displayValue:w,exportValue:E}=S,C=document.createElement("option");C.textContent=w,C.value=E,a.append(C)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:c(!0),items:h(y)}),d=c(!1)},indices(y){const x=new Set(y.detail.indices);for(const S of y.target.options)S.selected=x.has(S.index);t.setValue(e,{value:c(!0)}),d=c(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(m,p)}),a.addEventListener("input",p=>{const m=c(!0),y=c(!1);t.setValue(e,{value:m}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:y,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):a.addEventListener("input",function(p){t.setValue(e,{value:c(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Xg extends Te{constructor(t){const{data:e,elements:n,parent:a}=t,o=!!a._commentManager;if(super(t,{isRenderable:!o&&Te._hasPopupData(e)}),this.elements=n,o&&Te._hasPopupData(e)){const l=this.popup=this.#t();for(const c of n)c.popup=l}else this.popup=null}#t(){return new xH({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),n=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",n.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(a=>`${rv}${a}`).join(",")),this.container}}class xH{#t=null;#e=this.#$.bind(this);#s=this.#I.bind(this);#n=this.#L.bind(this);#r=this.#w.bind(this);#i=null;#a=null;#o=null;#c=null;#l=null;#h=null;#d=null;#f=!1;#g=null;#p=null;#u=null;#m=null;#y=null;#b=null;#v=null;#C=null;#A=null;#x=null;#_=!1;#S=null;#E=null;constructor({container:t,color:e,elements:n,titleObj:a,modificationDate:o,contentsObj:l,richText:c,parent:d,rect:h,parentRect:p,open:m,commentManager:y=null}){this.#a=t,this.#A=a,this.#o=l,this.#C=c,this.#h=d,this.#i=e,this.#v=h,this.#d=p,this.#l=n,this.#t=y,this.#S=n[0],this.#c=oh.toDateObject(o),this.trigger=n.flatMap(x=>x.getElementsToTriggerPopup()),y?this.renderCommentButton():(this.#M(),this.#a.hidden=!0,m&&this.#w())}#M(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const e of this.trigger)e.addEventListener("click",this.#r,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#s,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#R(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#m||(this.#y||this.#R(),!this.#y))return;const{signal:t}=this.#p=new AbortController,e=!!this.#S.extraPopupElement,n=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#m=this.#S.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#m=document.createElement("button");l.className="annotationCommentButton";const c=this.#S.container;l.style.zIndex=c.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#B(),this.#N(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),c.after(l)}}#N(){if(this.#S.extraPopupElement&&!this.#S.editor)return;this.renderCommentButton();const[t,e]=this.#y,{style:n}=this.#m;n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`}#B(){this.#S.extraPopupElement||(this.renderCommentButton(),this.#m.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#S.commentData;return t?this.#h._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#m?.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:a,modificationDate:o}=this.#S.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:a,modificationDate:o}}get elementBeforePopup(){return this.#m}get comment(){return this.#E||=this.#S.commentText,this.#E}set comment(t){t!==this.comment&&(this.#S.commentText=this.#E=t)}get parentBoundingClientRect(){return this.#S.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#m&&(this.#m.classList.toggle("selected",t),this.#m.ariaExpanded=e)}setSelectedCommentButton(t){this.#m.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:t,y:e,height:n}=this.#m.getBoundingClientRect(),{x:a,y:o,width:l,height:c}=this.#S.layer.getBoundingClientRect();return[(t-a)/l,(e+n-o)/c]}set commentPopupPosition(t){this.#b=t}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#m.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=this.#b||this.commentButtonPosition.map(h=>h/100),a=this.parentBoundingClientRect,{x:o,y:l,width:c,height:d}=a;this.#t.showDialog(null,this,o+e*c,l+n*d,{...t,parentDimensions:a})}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#i){const n=t.style.outlineColor=vt.makeHexColor(...this.#i);t.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#A?.str){const n=document.createElement("span");n.className="title",e.append(n),{dir:n.dir,str:n.textContent}=this.#A}if(t.append(e),this.#c){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),n.dateTime=this.#c.toISOString(),e.append(n)}lv({html:this.#k||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#a.append(t)}get#k(){const t=this.#C,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#C.html||null}get#O(){return this.#k?.attributes?.style?.fontSize||0}get#F(){return this.#k?.attributes?.style?.color||null}#P(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#F,fontSize:this.#O?`calc(${this.#O}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:a});return n}#$(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:t,popup:e,deleted:n}){if(this.#t){n?(this.remove(),this.#E=null):e&&(e.deleted?this.remove():(this.#B(),this.#E=e.text)),t&&(this.#y=null,this.#R(),this.#N());return}if(n||e?.deleted){this.remove();return}this.#M(),this.#x||={contentsObj:this.#o,richText:this.#C},t&&(this.#u=null),e&&e.text&&(this.#C=this.#P(e.text),this.#c=oh.toDateObject(e.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#x&&({contentsObj:this.#o,richText:this.#C}=this.#x,this.#x=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#g?.remove(),this.#g=null,this.#_=!1,this.#f=!1,this.#m?.remove(),this.#m=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:a,pageY:o}}}=this.#h;let l=!!this.#d,c=l?this.#d:this.#v;for(const S of this.#l)if(!c||vt.intersect(S.data.rect,c)!==null){c=S.data.rect,l=!0;break}const d=vt.normalizeRect([c[0],t[3]-c[1]+t[1],c[2],t[3]-c[3]+t[1]]),p=l?c[2]-c[0]+5:0,m=d[0]+p,y=d[1];this.#u=[100*(m-a)/e,100*(y-o)/n];const{style:x}=this.#a;x.left=`${this.#u[0]}%`,x.top=`${this.#u[1]}%`}#w(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#L(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#e)):(this.#I(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#e))}#L(){this.#g||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#T(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#I(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#_=this.isVisible,this.#_&&(this.#a.hidden=!0)}maybeShow(){this.#t||(this.#M(),this.#_&&(this.#g||this.#L(),this.#_=!1,this.#a.hidden=!1))}get isVisible(){return this.#t?!1:this.#a.hidden===!1}}class PR extends Te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=jt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class wH extends Te{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:n}=this,a=this.svgFactory.create(e,n,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class SH extends Te{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:n}=this,a=this.svgFactory.create(e,n,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",e-o),l.setAttribute("height",n-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class AH extends Te{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:n}=this,a=this.svgFactory.create(e,n,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",n/2),l.setAttribute("rx",e/2-o/2),l.setAttribute("ry",n/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class jR extends Te{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:a},width:o,height:l}=this;if(!e)return this.container;const c=this.svgFactory.create(o,l,!0);let d=[];for(let p=0,m=e.length;p<m;p+=2){const y=e[p]-t[0],x=t[3]-e[p+1];d.push(`${y},${x}`)}d=d.join(" ");const h=this.#t=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",d),h.setAttribute("stroke-width",n.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class EH extends jR{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CH extends Te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class xv extends Te{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?jt.HIGHLIGHT:jt.INK}#s(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:a,popupRef:o}}=this,{transform:l,width:c,height:d}=this.#s(e,t),h=this.svgFactory.create(c,d,!0),p=this.#t=this.svgFactory.createElement("svg:g");h.append(p),p.setAttribute("stroke-width",a.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",l);for(let m=0,y=n.length;m<y;m++){const x=this.svgFactory.createElement(this.svgElementName);this.#e.push(x),x.setAttribute("points",n[m].join(",")),p.append(x)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:a}=t,o=this.#t;if(e>=0&&o.setAttribute("stroke-width",e||1),n)for(let l=0,c=this.#e.length;l<c;l++)this.#e[l].setAttribute("points",n[l].join(","));if(a){const{transform:l,width:c,height:d}=this.#s(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class BR extends Te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=jt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class TH extends Te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class _H extends Te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class RH extends Te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class FR extends Te{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=jt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class NH extends Te{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;const{isMac:a}=We.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let wv=class IR{#t=null;#e=null;#s=null;#n=new Map;#r=null;#i=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:a,page:o,viewport:l,structTreeLayer:c,commentManager:d,linkService:h,annotationStorage:p}){this.div=t,this.#t=e,this.#e=n,this.#r=c||null,this.#i=h||null,this.#s=p||new dv,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async#a(t,e,n){const a=t.firstChild||t,o=a.id=`${rv}${e}`,l=await this.#r?.getAriaAttributes(o);if(l)for(const[c,d]of l)a.setAttribute(c,d);n?n.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,a,!1))}async render(t){const{annotations:e}=t,n=this.div;ca(n,this.viewport);const a=new Map,o={data:null,layer:n,linkService:this.#i,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new xc,annotationStorage:this.#s,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const c=l.annotationType===Le.POPUP;if(c){const p=a.get(l.id);if(!p)continue;o.elements=p}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const d=_A.create(o);if(!d.isRenderable)continue;if(!c&&l.popupRef){const p=a.get(l.popupRef);p?p.push(d):a.set(l.popupRef,[d])}const h=d.render();l.hidden&&(h.style.visibility="hidden"),await this.#a(h,l.id,o.elements),d.extraPopupElement?.popup?.renderCommentButton(),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#o()}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#i,svgFactory:new xc,parent:this};for(const n of t){n.borderStyle||=IR._defaultBorderStyle,e.data=n;const a=_A.create(e);if(!a.isRenderable)continue;const o=a.render();await this.#a(o,n.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,ca(e,{rotation:t.rotation}),this.#o(),e.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[e,n]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;n.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):a.append(n);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,n),l._hasNoCanvas=!1):l.canvas=n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:a}=t,o=new fH({data:{id:n,rect:t.getPDFRect(),rotation:a},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#i,annotationStorage:this.#s}),l=o.render();return e.append(l),this.#t?.moveElementInDOM(e,l,l,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return Ut(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Zr.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const Ad=/\r\n?|\n/g;class Xe extends Rt{#t="";#e=`${this.id}-editor`;#s=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Xe.prototype,e=o=>o.isEmpty(),n=Ci.TRANSLATE_SMALL,a=Ci.TRANSLATE_BIG;return Ut(this,"_keyboardManager",new Oc([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=jt.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||Xe._defaultColor||Rt._defaultLineColor,this.#n=t.fontSize||Xe._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){Rt.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Xt.FREETEXT_SIZE:Xe._defaultFontSize=e;break;case Xt.FREETEXT_COLOR:Xe._defaultColor=e;break}}updateParams(t,e){switch(t){case Xt.FREETEXT_SIZE:this.#r(e);break;case Xt.FREETEXT_COLOR:this.#i(e);break}}static get defaultPropertiesToUpdate(){return[[Xt.FREETEXT_SIZE,Xe._defaultFontSize],[Xt.FREETEXT_COLOR,Xe._defaultColor||Rt._defaultLineColor]]}get propertiesToUpdate(){return[[Xt.FREETEXT_SIZE,this.#n],[Xt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new bc(this),[["colorPicker",this._colorPicker]]}get colorType(){return Xt.FREETEXT_COLOR}#r(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#n)*this.parentScale),this.#n=a,this.#o()},n=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#i(t){const e=a=>{this.color=a,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Xe._internalPadding*t,-(Xe._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const t=this._uiManager.combinedSignal(this.#s);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let e=null;for(const n of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(Xe.#c(n)),e=n);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#a().trimEnd();if(t===e)return;const n=a=>{if(this.#t=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Xe._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[h,p]=this.pageDimensions,[m,y]=this.pageTranslation;let x,S;switch(this.rotation){case 0:x=t+(l[0]-m)/h,S=e+this.height-(l[1]-y)/p;break;case 90:x=t+(l[0]-m)/h,S=e-(l[1]-y)/p,[c,d]=[d,-c];break;case 180:x=t-this.width+(l[0]-m)/h,S=e-(l[1]-y)/p,[c,d]=[-c,-d];break;case 270:x=t+(l[0]-m-this.height*p)/h,S=e+(l[1]-y-this.width*h)/p,[c,d]=[-d,c];break}this.setAt(x*a,S*o,c,d)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Ad,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const a=Xe.#d(e.getData("text")||"").replaceAll(Ad,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!a.includes(`
`)){l.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:d}=l,h=[],p=[];if(c.nodeType===Node.TEXT_NODE){const x=c.parentElement;if(p.push(c.nodeValue.slice(d).replaceAll(Ad,"")),x!==this.editorDiv){let S=h;for(const w of this.editorDiv.childNodes){if(w===x){S=p;continue}S.push(Xe.#c(w))}}h.push(c.nodeValue.slice(0,d).replaceAll(Ad,""))}else if(c===this.editorDiv){let x=h,S=0;for(const w of this.editorDiv.childNodes)S++===d&&(x=p),x.push(Xe.#c(w))}this.#t=`${h.join(`
`)}${a}${p.join(`
`)}`,this.#l();const m=new Range;let y=Math.sumPrecise(h.map(x=>x.length));for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const S=x.nodeValue.length;if(y<=S){m.setStart(x,y),m.setEnd(x,y);break}y-=S}o.removeAllRanges(),o.addRange(m)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#h(){return this.#t.replaceAll(""," ")}static#d(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Xe._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,n){let a=null;if(t instanceof PR){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:d,rotation:h,id:p,popupRef:m,richText:y,contentsObj:x,creationDate:S,modificationDate:w},textContent:E,textPosition:C,parent:{page:{pageNumber:T}}}=t;if(!E||E.length===0)return null;a=t={annotationType:jt.FREETEXT,color:Array.from(c),fontSize:l,value:E.join(`
`),position:C,pageIndex:T-1,rect:d.slice(0),rotation:h,annotationElementId:p,id:p,deleted:!1,popupRef:m,comment:x?.str||null,richText:y,creationDate:S,modificationDate:w}}const o=await super.deserialize(t,e,n);return o.#n=t.fontSize,o.color=vt.makeHexColor(...t.color),o.#t=Xe.#d(t.value),o._initialData=a,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=Rt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#h()});return this.addComment(n),t?(n.isCopy=!0,n):this.annotationElementId&&!this.#f(n)?null:(n.id=this.annotationElementId,n)}#f(t){const{value:e,fontSize:n,color:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((l,c)=>l!==a[c])||t.pageIndex!==o}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:n}=e;n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,e.replaceChildren();for(const a of this.#t.split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),e.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class yt{static PRECISION=1e-4;toSVGPath(){de("Abstract method `toSVGPath` must be implemented.")}get box(){de("Abstract getter `box` must be implemented.")}serialize(t,e){de("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,a,o,l){l||=new Float32Array(t.length);for(let c=0,d=t.length;c<d;c+=2)l[c]=e+t[c]*a,l[c+1]=n+t[c+1]*o;return l}static _rescaleAndSwap(t,e,n,a,o,l){l||=new Float32Array(t.length);for(let c=0,d=t.length;c<d;c+=2)l[c]=e+t[c+1]*a,l[c+1]=n+t[c]*o;return l}static _translate(t,e,n,a){a||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o],a[o+1]=n+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,a,o){switch(o){case 90:return[1-e/n,t/a];case 180:return[1-t/n,1-e/a];case 270:return[e/n,1-t/a];default:return[t/n,e/a]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,a,o,l){return[(t+5*n)/6,(e+5*a)/6,(5*n+o)/6,(5*a+l)/6,(n+o)/2,(a+l)/2]}}class za{#t;#e=[];#s;#n;#r=[];#i=new Float32Array(18);#a;#o;#c;#l;#h;#d;#f=[];static#g=8;static#p=2;static#u=za.#g+za.#p;constructor({x:t,y:e},n,a,o,l,c=0){this.#t=n,this.#d=o*a,this.#n=l,this.#i.set([NaN,NaN,NaN,NaN,t,e],6),this.#s=c,this.#l=za.#g*a,this.#c=za.#u*a,this.#h=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#i[8])}#m(){const t=this.#i.subarray(4,6),e=this.#i.subarray(16,18),[n,a,o,l]=this.#t;return[(this.#a+(t[0]-e[0])/2-n)/o,(this.#o+(t[1]-e[1])/2-a)/l,(this.#a+(e[0]-t[0])/2-n)/o,(this.#o+(e[1]-t[1])/2-a)/l]}add({x:t,y:e}){this.#a=t,this.#o=e;const[n,a,o,l]=this.#t;let[c,d,h,p]=this.#i.subarray(8,12);const m=t-h,y=e-p,x=Math.hypot(m,y);if(x<this.#c)return!1;const S=x-this.#l,w=S/x,E=w*m,C=w*y;let T=c,R=d;c=h,d=p,h+=E,p+=C,this.#f?.push(t,e);const N=-C/S,M=E/S,O=N*this.#d,k=M*this.#d;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([h+O,p+k],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([h-O,p-k],16),isNaN(this.#i[6])?(this.#r.length===0&&(this.#i.set([c+O,d+k],2),this.#r.push(NaN,NaN,NaN,NaN,(c+O-n)/o,(d+k-a)/l),this.#i.set([c-O,d-k],14),this.#e.push(NaN,NaN,NaN,NaN,(c-O-n)/o,(d-k-a)/l)),this.#i.set([T,R,c,d,h,p],6),!this.isEmpty()):(this.#i.set([T,R,c,d,h,p],6),Math.abs(Math.atan2(R-d,T-c)-Math.atan2(C,E))<Math.PI/2?([c,d,h,p]=this.#i.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((c+h)/2-n)/o,((d+p)/2-a)/l),[c,d,T,R]=this.#i.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((T+c)/2-n)/o,((R+d)/2-a)/l),!0):([T,R,c,d,h,p]=this.#i.subarray(0,6),this.#r.push(((T+5*c)/6-n)/o,((R+5*d)/6-a)/l,((5*c+h)/6-n)/o,((5*d+p)/6-a)/l,((c+h)/2-n)/o,((d+p)/2-a)/l),[h,p,c,d,T,R]=this.#i.subarray(12,18),this.#e.push(((T+5*c)/6-n)/o,((R+5*d)/6-a)/l,((5*c+h)/6-n)/o,((5*d+p)/6-a)/l,((c+h)/2-n)/o,((d+p)/2-a)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#y();const n=[];n.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?n.push(`L${t[a+4]} ${t[a+5]}`):n.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#v(n);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?n.push(`L${e[a+4]} ${e[a+5]}`):n.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#b(n),n.join(" ")}#y(){const[t,e,n,a]=this.#t,[o,l,c,d]=this.#m();return`M${(this.#i[2]-t)/n} ${(this.#i[3]-e)/a} L${(this.#i[4]-t)/n} ${(this.#i[5]-e)/a} L${o} ${l} L${c} ${d} L${(this.#i[16]-t)/n} ${(this.#i[17]-e)/a} L${(this.#i[14]-t)/n} ${(this.#i[15]-e)/a} Z`}#b(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#v(t){const[e,n,a,o]=this.#t,l=this.#i.subarray(4,6),c=this.#i.subarray(16,18),[d,h,p,m]=this.#m();t.push(`L${(l[0]-e)/a} ${(l[1]-n)/o} L${d} ${h} L${p} ${m} L${(c[0]-e)/a} ${(c[1]-n)/o}`)}newFreeDrawOutline(t,e,n,a,o,l){return new zR(t,e,n,a,o,l)}getOutlines(){const t=this.#r,e=this.#e,n=this.#i,[a,o,l,c]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let m=0,y=d.length-2;m<y;m+=2)d[m]=(this.#f[m]-a)/l,d[m+1]=(this.#f[m+1]-o)/c;if(d[d.length-2]=(this.#a-a)/l,d[d.length-1]=(this.#o-o)/c,isNaN(n[6])&&!this.isEmpty())return this.#C(d);const h=new Float32Array(this.#r.length+24+this.#e.length);let p=t.length;for(let m=0;m<p;m+=2){if(isNaN(t[m])){h[m]=h[m+1]=NaN;continue}h[m]=t[m],h[m+1]=t[m+1]}p=this.#x(h,p);for(let m=e.length-6;m>=6;m-=6)for(let y=0;y<6;y+=2){if(isNaN(e[m+y])){h[p]=h[p+1]=NaN,p+=2;continue}h[p]=e[m+y],h[p+1]=e[m+y+1],p+=2}return this.#A(h,p),this.newFreeDrawOutline(h,d,this.#t,this.#h,this.#s,this.#n)}#C(t){const e=this.#i,[n,a,o,l]=this.#t,[c,d,h,p]=this.#m(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(e[2]-n)/o,(e[3]-a)/l,NaN,NaN,NaN,NaN,(e[4]-n)/o,(e[5]-a)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,h,p,NaN,NaN,NaN,NaN,(e[16]-n)/o,(e[17]-a)/l,NaN,NaN,NaN,NaN,(e[14]-n)/o,(e[15]-a)/l],0),this.newFreeDrawOutline(m,t,this.#t,this.#h,this.#s,this.#n)}#A(t,e){const n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6}#x(t,e){const n=this.#i.subarray(4,6),a=this.#i.subarray(16,18),[o,l,c,d]=this.#t,[h,p,m,y]=this.#m();return t.set([NaN,NaN,NaN,NaN,(n[0]-o)/c,(n[1]-l)/d,NaN,NaN,NaN,NaN,h,p,NaN,NaN,NaN,NaN,m,y,NaN,NaN,NaN,NaN,(a[0]-o)/c,(a[1]-l)/d],e),e+=24}}class zR extends yt{#t;#e=new Float32Array(4);#s;#n;#r;#i;#a;constructor(t,e,n,a,o,l){super(),this.#a=t,this.#r=e,this.#t=n,this.#i=a,this.#s=o,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[c,d,h,p]=this.#e;for(let m=0,y=t.length;m<y;m+=2)t[m]=(t[m]-c)/h,t[m+1]=(t[m+1]-d)/p;for(let m=0,y=e.length;m<y;m+=2)e[m]=(e[m]-c)/h,e[m+1]=(e[m+1]-d)/p}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,n=this.#a.length;e<n;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,a],o){const l=n-t,c=a-e;let d,h;switch(o){case 0:d=yt._rescale(this.#a,t,a,l,-c),h=yt._rescale(this.#r,t,a,l,-c);break;case 90:d=yt._rescaleAndSwap(this.#a,t,e,l,c),h=yt._rescaleAndSwap(this.#r,t,e,l,c);break;case 180:d=yt._rescale(this.#a,n,e,-l,c),h=yt._rescale(this.#r,n,e,-l,c);break;case 270:d=yt._rescaleAndSwap(this.#a,n,a,-l,-c),h=yt._rescaleAndSwap(this.#r,n,a,-l,-c);break}return{outline:Array.from(d),points:[Array.from(h)]}}#o(t){const e=this.#a;let n=e[4],a=e[5];const o=[n,a,n,a];let l=n,c=a,d=n,h=a;const p=t?Math.max:Math.min,m=new Float32Array(4);for(let x=6,S=e.length;x<S;x+=6){const w=e[x+4],E=e[x+5];isNaN(e[x])?(vt.pointBoundingBox(w,E,o),c>E?(l=w,c=E):c===E&&(l=p(l,w)),h<E?(d=w,h=E):h===E&&(d=p(d,w))):(m[0]=m[1]=1/0,m[2]=m[3]=-1/0,vt.bezierBoundingBox(n,a,...e.slice(x,x+6),m),vt.rectBoundingBox(m[0],m[1],m[2],m[3],o),c>m[1]?(l=m[0],c=m[1]):c===m[1]&&(l=p(l,m[0])),h<m[3]?(d=m[2],h=m[3]):h===m[3]&&(d=p(d,m[2]))),n=w,a=E}const y=this.#e;y[0]=o[0]-this.#s,y[1]=o[1]-this.#s,y[2]=o[2]-o[0]+2*this.#s,y[3]=o[3]-o[1]+2*this.#s,this.firstPoint=[l,c],this.lastPoint=[d,h]}get box(){return this.#e}newOutliner(t,e,n,a,o,l=0){return new za(t,e,n,a,o,l)}getNewOutline(t,e){const[n,a,o,l]=this.#e,[c,d,h,p]=this.#t,m=o*h,y=l*p,x=n*h+c,S=a*p+d,w=this.newOutliner({x:this.#r[0]*m+x,y:this.#r[1]*y+S},this.#t,this.#i,t,this.#n,e??this.#s);for(let E=2;E<this.#r.length;E+=2)w.add({x:this.#r[E]*m+x,y:this.#r[E+1]*y+S});return w.getOutlines()}}class Yg{#t;#e;#s;#n=[];#r=[];constructor(t,e=0,n=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:w,y:E,width:C,height:T}of t){const R=Math.floor((w-e)/l)*l,N=Math.ceil((w+C+e)/l)*l,M=Math.floor((E-e)/l)*l,O=Math.ceil((E+T+e)/l)*l,k=[R,M,O,!0],L=[N,M,O,!1];this.#n.push(k,L),vt.rectBoundingBox(R,M,N,O,o)}const c=o[2]-o[0]+2*n,d=o[3]-o[1]+2*n,h=o[0]-n,p=o[1]-n;let m=a?-1/0:1/0,y=1/0;const x=this.#n.at(a?-1:-2),S=[x[0],x[2]];for(const w of this.#n){const[E,C,T,R]=w;!R&&a?C<y?(y=C,m=E):C===y&&(m=Math.max(m,E)):R&&!a&&(C<y?(y=C,m=E):C===y&&(m=Math.min(m,E))),w[0]=(E-h)/c,w[1]=(C-p)/d,w[2]=(T-p)/d}this.#t=new Float32Array([h,p,c,d]),this.#e=[m,y],this.#s=S}getOutlines(){this.#n.sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#i(t)}#i(t){const e=[],n=new Set;for(const l of t){const[c,d,h]=l;e.push([c,d,l],[c,h,l])}e.sort((l,c)=>l[1]-c[1]||l[0]-c[0]);for(let l=0,c=e.length;l<c;l+=2){const d=e[l][2],h=e[l+1][2];d.push(h),h.push(d),n.add(d),n.add(h)}const a=[];let o;for(;n.size>0;){const l=n.values().next().value;let[c,d,h,p,m]=l;n.delete(l);let y=c,x=d;for(o=[c,h],a.push(o);;){let S;if(n.has(p))S=p;else if(n.has(m))S=m;else break;n.delete(S),[c,d,h,p,m]=S,y!==c&&(o.push(y,x,c,x===d?d:h),y=c),x=x===d?h:d}o.push(y,x)}return new MH(a,this.#t,this.#e,this.#s)}#a(t){const e=this.#r;let n=0,a=e.length-1;for(;n<=a;){const o=n+a>>1,l=e[o][0];if(l===t)return o;l<t?n=o+1:a=o-1}return a+1}#o([,t,e]){const n=this.#a(t);this.#r.splice(n,0,[t,e])}#c([,t,e]){const n=this.#a(t);for(let a=n;a<this.#r.length;a++){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===e){this.#r.splice(a,1);return}}for(let a=n-1;a>=0;a--){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===e){this.#r.splice(a,1);return}}}#l(t){const[e,n,a]=t,o=[[e,n,a]],l=this.#a(a);for(let c=0;c<l;c++){const[d,h]=this.#r[c];for(let p=0,m=o.length;p<m;p++){const[,y,x]=o[p];if(!(h<=y||x<=d)){if(y>=d){if(x>h)o[p][1]=h;else{if(m===1)return[];o.splice(p,1),p--,m--}continue}o[p][2]=d,x>h&&o.push([e,h,x])}}}return o}}class MH extends yt{#t;#e;constructor(t,e,n,a){super(),this.#e=t,this.#t=e,this.firstPoint=n,this.lastPoint=a}toSVGPath(){const t=[];for(const e of this.#e){let[n,a]=e;t.push(`M${n} ${a}`);for(let o=2;o<e.length;o+=2){const l=e[o],c=e[o+1];l===n?(t.push(`V${c}`),a=c):c===a&&(t.push(`H${l}`),n=l)}t.push("Z")}return t.join(" ")}serialize([t,e,n,a],o){const l=[],c=n-t,d=a-e;for(const h of this.#e){const p=new Array(h.length);for(let m=0;m<h.length;m+=2)p[m]=t+h[m]*c,p[m+1]=a-h[m+1]*d;l.push(p)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Wg extends za{newFreeDrawOutline(t,e,n,a,o,l){return new DH(t,e,n,a,o,l)}}class DH extends zR{newOutliner(t,e,n,a,o,l=0){return new Wg(t,e,n,a,o,l)}}class Oe extends Rt{#t=null;#e=0;#s;#n=null;#r=null;#i=null;#a=null;#o=0;#c=null;#l=null;#h=null;#d=!1;#f=null;#g=null;#p=null;#u="";#m;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=jt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=Oe.prototype;return Ut(this,"_keyboardManager",new Oc([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||Oe._defaultColor,this.#m=t.thickness||Oe._defaultThickness,this.opacity=t.opacity||Oe._defaultOpacity,this.#s=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#d=!0,this.#v(t),this.#S()):this.#s&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#b(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#b(){const t=new Yg(this.#s,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new Yg(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#i=e.getOutlines();const{firstPoint:n}=this.#l;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height];const{lastPoint:a}=this.#i;this.#g=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#v({highlightOutlines:t,highlightId:e,clipPathId:n}){this.#l=t;const a=1.5;if(this.#i=t.getNewOutline(this.#m/2+a,.0025),e>=0)this.#h=e,this.#n=n,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:Oe.#E(this.#l.box,(m-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:Oe.#E(this.#i.box,m),path:{d:this.#i.toSVGPath()}})}const[o,l,c,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=d;break;case 90:{const[m,y]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*y/m,this.height=d*m/y;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=d;break;case 270:{const[m,y]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*y/m,this.height=d*m/y;break}}const{firstPoint:h}=t;this.#f=[(h[0]-o)/c,(h[1]-l)/d];const{lastPoint:p}=this.#i;this.#g=[(p[0]-o)/c,(p[1]-l)/d]}static initialize(t,e){Rt.initialize(t,e),Oe._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Xt.HIGHLIGHT_COLOR:Oe._defaultColor=e;break;case Xt.HIGHLIGHT_THICKNESS:Oe._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Xt.HIGHLIGHT_COLOR:this.#C(e);break;case Xt.HIGHLIGHT_THICKNESS:this.#A(e);break}}static get defaultPropertiesToUpdate(){return[[Xt.HIGHLIGHT_COLOR,Oe._defaultColor],[Xt.HIGHLIGHT_THICKNESS,Oe._defaultThickness]]}get propertiesToUpdate(){return[[Xt.HIGHLIGHT_COLOR,this.color||Oe._defaultColor],[Xt.HIGHLIGHT_THICKNESS,this.#m||Oe._defaultThickness],[Xt.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#C(t){const e=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},n=this.color,a=this.opacity;this.addCommands({cmd:e.bind(this,t,Oe._defaultOpacity),undo:e.bind(this,n,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#A(t){const e=this.#m,n=a=>{this.#m=a,this.#x(a)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Xt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new zn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#N())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#N())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#_(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#_():t&&(this.#S(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#x(t){this.#d&&(this.#v({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#_(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#S(t=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#n))}static#E([t,e,n,a],o){switch(o){case 90:return[1-e-a,t,a,n];case 180:return[1-t-n,1-e-a,n,a];case 270:return[e,1-t-n,a,n]}return[t,e,n,a]}rotate(t){const{drawLayer:e}=this.parent;let n;this.#d?(t=(t-this.rotation+360)%360,n=Oe.#E(this.#l.box,t)):n=Oe.#E([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#h,{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:Oe.#E(this.#i.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#d?t.classList.add("free"):this.div.addEventListener("keydown",this.#M.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(this.width,this.height),mR(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#M(t){Oe._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#d||this.#R(!1))}get _mustFixPosition(){return!this.#d}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#N(){return this.#d?this.rotation:0}#B(){if(this.#d)return null;const[t,e]=this.pageDimensions,[n,a]=this.pageTranslation,o=this.#s,l=new Float32Array(o.length*8);let c=0;for(const{x:d,y:h,width:p,height:m}of o){const y=d*t+n,x=(1-h)*e+a;l[c]=l[c+4]=y,l[c+1]=l[c+3]=x,l[c+2]=l[c+6]=y+p*t,l[c+5]=l[c+7]=x-m*e,c+=8}return l}#k(t){return this.#l.serialize(t,this.#N())}static startHighlighting(t,e,{target:n,x:a,y:o}){const{x:l,y:c,width:d,height:h}=n.getBoundingClientRect(),p=new AbortController,m=t.combinedSignal(p),y=x=>{p.abort(),this.#F(t,x)};window.addEventListener("blur",y,{signal:m}),window.addEventListener("pointerup",y,{signal:m}),window.addEventListener("pointerdown",Ae,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Xn,{signal:m}),n.addEventListener("pointermove",this.#O.bind(this,t),{signal:m}),this._freeHighlight=new Wg({x:a,y:o},[l,c,d,h],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#O(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,n){let a=null;if(t instanceof BR){const{data:{quadPoints:S,rect:w,rotation:E,id:C,color:T,opacity:R,popupRef:N,richText:M,contentsObj:O,creationDate:k,modificationDate:L},parent:{page:{pageNumber:j}}}=t;a=t={annotationType:jt.HIGHLIGHT,color:Array.from(T),opacity:R,quadPoints:S,boxes:null,pageIndex:j-1,rect:w.slice(0),rotation:E,annotationElementId:C,id:C,deleted:!1,popupRef:N,richText:M,comment:O?.str||null,creationDate:k,modificationDate:L}}else if(t instanceof xv){const{data:{inkLists:S,rect:w,rotation:E,id:C,color:T,borderStyle:{rawWidth:R},popupRef:N,richText:M,contentsObj:O,creationDate:k,modificationDate:L},parent:{page:{pageNumber:j}}}=t;a=t={annotationType:jt.HIGHLIGHT,color:Array.from(T),thickness:R,inkLists:S,boxes:null,pageIndex:j-1,rect:w.slice(0),rotation:E,annotationElementId:C,id:C,deleted:!1,popupRef:N,richText:M,comment:O?.str||null,creationDate:k,modificationDate:L}}const{color:o,quadPoints:l,inkLists:c,opacity:d}=t,h=await super.deserialize(t,e,n);h.color=vt.makeHexColor(...o),h.opacity=d||1,c&&(h.#m=t.thickness),h._initialData=a,t.comment&&h.setCommentData(t);const[p,m]=h.pageDimensions,[y,x]=h.pageTranslation;if(l){const S=h.#s=[];for(let w=0;w<l.length;w+=8)S.push({x:(l[w]-y)/p,y:1-(l[w+1]-x)/m,width:(l[w+2]-l[w])/p,height:(l[w+1]-l[w+5])/m});h.#b(),h.#S(),h.rotate(h.rotation)}else if(c){h.#d=!0;const S=c[0],w={x:S[0]-y,y:m-(S[1]-x)},E=new Wg(w,[0,0,p,m],1,h.#m/2,!0,.001);for(let R=0,N=S.length;R<N;R+=2)w.x=S[R]-y,w.y=m-(S[R+1]-x),E.add(w);const{id:C,clipPathId:T}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);h.#v({highlightOutlines:E.getOutlines(),highlightId:C,clipPathId:T}),h.#S(),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=Rt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(t);return Object.assign(n,{color:e,opacity:this.opacity,thickness:this.#m,quadPoints:this.#B(),outlines:this.#k(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#P(n)?null:(n.id=this.annotationElementId,n)}#P(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((n,a)=>n!==e[a])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class UR{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){de("Not implemented")}}class Dt extends Rt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#n=null;static#r=null;static#i=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#h(t,this.parent),this.#u(t.box)}#h(t,e){const{id:n}=e.drawLayer.draw(Dt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[a,o]of Object.entries(e))n.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){de("Not implemented")}static get typesMap(){de("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(Dt.#s.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,a]of this.typesMap)t.push([n,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,a]of this.constructor.typesMap)t.push([n,e[a]]);return t}_updateProperty(t,e,n){const a=this._drawingOptions,o=a[e],l=c=>{a.updateProperty(e,c);const d=this.#t.updateProperty(e,c);d&&this.#u(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Dt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Dt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Dt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#d()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#t,t)}}#g([t,e,n,a]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[e,1-t,n*(l/o),a*(o/l)];case 180:return[1-t,1-e,n,a];case 270:return[1-e,t,n*(l/o),a*(o/l)];default:return[t,e,n,a]}}#p(){const{x:t,y:e,width:n,height:a,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-e,t,n*(o/l),a*(l/o)];case 180:return[1-t,1-e,n,a];case 270:return[e,1-t,n*(o/l),a*(l/o)];default:return[t,e,n,a]}}#u(t){[this.x,this.y,this.width,this.height]=this.#g(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#m(){const{x:t,y:e,width:n,height:a,rotation:o,parentRotation:l,parentDimensions:[c,d]}=this;switch((o*4+l)/90){case 1:return[1-e-a,t,a,n];case 2:return[1-t-n,1-e-a,n,a];case 3:return[e,1-t-n,a,n];case 4:return[t,e-n*(c/d),a*(d/c),n*(c/d)];case 5:return[1-e,t,n*(c/d),a*(d/c)];case 6:return[1-t-a*(d/c),1-e,a*(d/c),n*(c/d)];case 7:return[e-n*(c/d),1-t-a*(d/c),n*(c/d),a*(d/c)];case 8:return[t-n,e-a,n,a];case 9:return[1-e,t-n,a,n];case 10:return[1-t,1-e,n,a];case 11:return[e-a,1-t,a,n];case 12:return[t-a*(d/c),e,a*(d/c),n*(c/d)];case 13:return[1-e-n*(c/d),t-a*(d/c),n*(c/d),a*(d/c)];case 14:return[1-t,1-e-n*(c/d),a*(d/c),n*(c/d)];case 15:return[e,1-t,n*(c/d),a*(d/c)];default:return[t,e,n,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Dt._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const n=super.render();n.classList.add("draw");const a=document.createElement("div");return n.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),n}static createDrawerInstance(t,e,n,a,o){de("Not implemented")}static startDrawing(t,e,n,a){const{target:o,offsetX:l,offsetY:c,pointerId:d,pointerType:h}=a;if(Dt.#a&&Dt.#a!==h)return;const{viewport:{rotation:p}}=t,{width:m,height:y}=o.getBoundingClientRect(),x=Dt.#n=new AbortController,S=t.combinedSignal(x);if(Dt.#i||=d,Dt.#a??=h,window.addEventListener("pointerup",w=>{Dt.#i===w.pointerId?this._endDraw(w):Dt.#o?.delete(w.pointerId)},{signal:S}),window.addEventListener("pointercancel",w=>{Dt.#i===w.pointerId?this._currentParent.endDrawingSession():Dt.#o?.delete(w.pointerId)},{signal:S}),window.addEventListener("pointerdown",w=>{Dt.#a===w.pointerType&&((Dt.#o||=new Set).add(w.pointerId),Dt.#s.isCancellable()&&(Dt.#s.removeLastElement(),Dt.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",Xn,{signal:S}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),o.addEventListener("touchmove",w=>{w.timeStamp===Dt.#c&&Ae(w)},{signal:S}),t.toggleDrawing(),e._editorUndoBar?.hide(),Dt.#s){t.drawLayer.updateProperties(this._currentDrawId,Dt.#s.startNew(l,c,m,y,p));return}e.updateUIForDefaultProperties(this),Dt.#s=this.createDrawerInstance(l,c,m,y,p),Dt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Dt.#r.toSVGProperties(),Dt.#s.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Dt.#c=-1,!Dt.#s)return;const{offsetX:e,offsetY:n,pointerId:a}=t;if(Dt.#i===a){if(Dt.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Dt.#s.add(e,n)),Dt.#c=t.timeStamp,Ae(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Dt.#s=null,Dt.#r=null,Dt.#a=null,Dt.#c=NaN),Dt.#n&&(Dt.#n.abort(),Dt.#n=null,Dt.#i=NaN,Dt.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,Dt.#s.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=Dt.#s,a=this._currentDrawId,o=n.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,n.setLastElement(o))},undo:()=>{e.drawLayer.updateProperties(a,n.removeLastElement())},mustExec:!1,type:Xt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Xt.DRAW_STEP),!Dt.#s.isEmpty()){const{pageDimensions:[n,a],scale:o}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Dt.#s.getOutlines(n*o,a*o,o,this._INNER_MARGIN),drawingOptions:Dt.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,a,o,l){de("Not implemented")}static async deserialize(t,e,n){const{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:c}}=e.viewport,d=this.deserializeDraw(l,c,a,o,this._INNER_MARGIN,t),h=await super.deserialize(t,e,n);return h.createDrawingOptions(t),h.#l({drawOutlines:d}),h.#f(),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[e,n]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#t.serialize([e,n,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class kH{#t=new Float64Array(6);#e;#s;#n;#r;#i;#a="";#o=0;#c=new Bc;#l;#h;constructor(t,e,n,a,o,l){this.#l=n,this.#h=a,this.#n=o,this.#r=l,[t,e]=this.#d(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#i=[t,e],this.#s=[{line:c,points:this.#i}],this.#t.set(c,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#d(t,e){return yt._normalizePoint(t,e,this.#l,this.#h,this.#n)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#i.length<=10}add(t,e){[t,e]=this.#d(t,e);const[n,a,o,l]=this.#t.subarray(2,6),c=t-o,d=e-l;return Math.hypot(this.#l*c,this.#h*d)<=2?null:(this.#i.push(t,e),isNaN(n)?(this.#t.set([o,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,a,o,l,t,e],0),this.#e.push(...yt.createBezierPoints(n,a,o,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,a,o){this.#l=n,this.#h=a,this.#n=o,[t,e]=this.#d(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#i=[t,e];const c=this.#s.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#s.push({line:l,points:this.#i}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(t){return this.#s?(this.#s.push(t),this.#e=t.line,this.#i=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#s)return this.#c.removeLastElement();this.#s.pop(),this.#a="";for(let t=0,e=this.#s.length;t<e;t++){const{line:n,points:a}=this.#s[t];this.#e=n,this.#i=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=yt.svgRound(this.#e[4]),e=yt.svgRound(this.#e[5]);if(this.#i.length===2)return this.#a=`${this.#a} M ${t} ${e} Z`,this.#a;if(this.#i.length<=6){const a=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,a)} M ${t} ${e}`,this.#o=6}if(this.#i.length===4){const a=yt.svgRound(this.#e[10]),o=yt.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${a} ${o}`,this.#o=12,this.#a}const n=[];this.#o===0&&(n.push(`M ${t} ${e}`),this.#o=6);for(let a=this.#o,o=this.#e.length;a<o;a+=6){const[l,c,d,h,p,m]=this.#e.slice(a,a+6).map(yt.svgRound);n.push(`C${l} ${c} ${d} ${h} ${p} ${m}`)}return this.#a+=n.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,e,n,a){const o=this.#s.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#s,t,e,n,this.#n,this.#r,a),this.#t=null,this.#e=null,this.#s=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Bc extends yt{#t;#e=0;#s;#n;#r;#i;#a;#o;#c;build(t,e,n,a,o,l,c){this.#r=e,this.#i=n,this.#a=a,this.#o=o,this.#c=l,this.#s=c??0,this.#n=t,this.#d()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${yt.svgRound(e[4])} ${yt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${yt.svgRound(e[10])} ${yt.svgRound(e[11])}`);continue}for(let n=6,a=e.length;n<a;n+=6){const[o,l,c,d,h,p]=e.subarray(n,n+6).map(yt.svgRound);t.push(`C${o} ${l} ${c} ${d} ${h} ${p}`)}}return t.join("")}serialize([t,e,n,a],o){const l=[],c=[],[d,h,p,m]=this.#h();let y,x,S,w,E,C,T,R,N;switch(this.#o){case 0:N=yt._rescale,y=t,x=e+a,S=n,w=-a,E=t+d*n,C=e+(1-h-m)*a,T=t+(d+p)*n,R=e+(1-h)*a;break;case 90:N=yt._rescaleAndSwap,y=t,x=e,S=n,w=a,E=t+h*n,C=e+d*a,T=t+(h+m)*n,R=e+(d+p)*a;break;case 180:N=yt._rescale,y=t+n,x=e,S=-n,w=a,E=t+(1-d-p)*n,C=e+h*a,T=t+(1-d)*n,R=e+(h+m)*a;break;case 270:N=yt._rescaleAndSwap,y=t+n,x=e+a,S=-n,w=-a,E=t+(1-h-m)*n,C=e+(1-d-p)*a,T=t+(1-h)*n,R=e+(1-d)*a;break}for(const{line:M,points:O}of this.#n)l.push(N(M,y,x,S,w,o?new Array(M.length):null)),c.push(N(O,y,x,S,w,o?new Array(O.length):null));return{lines:l,points:c,rect:[E,C,T,R]}}static deserialize(t,e,n,a,o,{paths:{lines:l,points:c},rotation:d,thickness:h}){const p=[];let m,y,x,S,w;switch(d){case 0:w=yt._rescale,m=-t/n,y=e/a+1,x=1/n,S=-1/a;break;case 90:w=yt._rescaleAndSwap,m=-e/a,y=-t/n,x=1/a,S=1/n;break;case 180:w=yt._rescale,m=t/n+1,y=-e/a,x=-1/n,S=1/a;break;case 270:w=yt._rescaleAndSwap,m=e/a+1,y=t/n+1,x=-1/a,S=-1/n;break}if(!l){l=[];for(const C of c){const T=C.length;if(T===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1]]));continue}if(T===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1],NaN,NaN,NaN,NaN,C[2],C[3]]));continue}const R=new Float32Array(3*(T-2));l.push(R);let[N,M,O,k]=C.subarray(0,4);R.set([NaN,NaN,NaN,NaN,N,M],0);for(let L=4;L<T;L+=2){const j=C[L],U=C[L+1];R.set(yt.createBezierPoints(N,M,O,k,j,U),(L-2)*3),[N,M,O,k]=[O,k,j,U]}}}for(let C=0,T=l.length;C<T;C++)p.push({line:w(l[C].map(R=>R??NaN),m,y,x,S),points:w(c[C].map(R=>R??NaN),m,y,x,S)});const E=new this.prototype.constructor;return E.build(p,n,a,1,d,h,o),E}#l(t=this.#c){const e=this.#s+t/2*this.#a;return this.#o%180===0?[e/this.#r,e/this.#i]:[e/this.#i,e/this.#r]}#h(){const[t,e,n,a]=this.#t,[o,l]=this.#l(0);return[t+o,e+l,n-2*o,a-2*l]}#d(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#n){if(a.length<=12){for(let c=4,d=a.length;c<d;c+=6)vt.pointBoundingBox(a[c],a[c+1],t);continue}let o=a[4],l=a[5];for(let c=6,d=a.length;c<d;c+=6){const[h,p,m,y,x,S]=a.subarray(c,c+6);vt.bezierBoundingBox(o,l,h,p,m,y,x,S,t),o=x,l=S}}const[e,n]=this.#l();t[0]=on(t[0]-e,0,1),t[1]=on(t[1]-n,0,1),t[2]=on(t[2]+e,0,1),t[3]=on(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,n]=this.#l();this.#c=t;const[a,o]=this.#l(),[l,c]=[a-e,o-n],d=this.#t;return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d}updateParentDimensions([t,e],n){const[a,o]=this.#l();this.#r=t,this.#i=e,this.#a=n;const[l,c]=this.#l(),d=l-a,h=c-o,p=this.#t;return p[0]-=d,p[1]-=h,p[2]+=2*d,p[3]+=2*h,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(yt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${yt.svgRound(t)} ${yt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let n=0,a=0,o=0,l=0,c=0,d=0;switch(this.#e){case 90:a=e/t,o=-t/e,c=t;break;case 180:n=-1,l=-1,c=t,d=e;break;case 270:a=-e/t,o=t/e,d=e;break;default:return""}return`matrix(${n} ${a} ${o} ${l} ${yt.svgRound(c)} ${yt.svgRound(d)})`}getPathResizingSVGProperties([t,e,n,a]){const[o,l]=this.#l(),[c,d,h,p]=this.#t;if(Math.abs(h-o)<=yt.PRECISION||Math.abs(p-l)<=yt.PRECISION){const w=t+n/2-(c+h/2),E=e+a/2-(d+p/2);return{path:{"transform-origin":`${yt.svgRound(t)} ${yt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${w} ${E})`}}}const m=(n-2*o)/(h-2*o),y=(a-2*l)/(p-2*l),x=h/n,S=p/a;return{path:{"transform-origin":`${yt.svgRound(c)} ${yt.svgRound(d)}`,transform:`${this.rotationTransform} scale(${x} ${S}) translate(${yt.svgRound(o)} ${yt.svgRound(l)}) scale(${m} ${y}) translate(${yt.svgRound(-o)} ${yt.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,n,a]){const[o,l]=this.#l(),c=this.#t,[d,h,p,m]=c;if(c[0]=t,c[1]=e,c[2]=n,c[3]=a,Math.abs(p-o)<=yt.PRECISION||Math.abs(m-l)<=yt.PRECISION){const E=t+n/2-(d+p/2),C=e+a/2-(h+m/2);for(const{line:T,points:R}of this.#n)yt._translate(T,E,C,T),yt._translate(R,E,C,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${yt.svgRound(t)} ${yt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(n-2*o)/(p-2*o),x=(a-2*l)/(m-2*l),S=-y*(d+o)+t+o,w=-x*(h+l)+e+l;if(y!==1||x!==1||S!==0||w!==0)for(const{line:E,points:C}of this.#n)yt._rescale(E,S,w,y,x,E),yt._rescale(C,S,w,y,x,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${yt.svgRound(t)} ${yt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],n){const[a,o]=n,l=this.#t,c=t-l[0],d=e-l[1];if(this.#r===a&&this.#i===o)for(const{line:h,points:p}of this.#n)yt._translate(h,c,d,h),yt._translate(p,c,d,p);else{const h=this.#r/a,p=this.#i/o;this.#r=a,this.#i=o;for(const{line:m,points:y}of this.#n)yt._rescale(m,c,d,h,p,m),yt._rescale(y,c,d,h,p,y);l[2]*=h,l[3]*=p}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${yt.svgRound(t)} ${yt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${yt.svgRound(t[0])} ${yt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Bh extends UR{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Rt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Bh(this._viewParameters);return t.updateAll(this),t}}class Sv extends Dt{static _type="ink";static _editorType=jt.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){Rt.initialize(t,e),this._defaultDrawingOptions=new Bh(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ut(this,"typesMap",new Map([[Xt.INK_THICKNESS,"stroke-width"],[Xt.INK_COLOR,"stroke"],[Xt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,a,o){return new kH(t,e,n,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,a,o,l){return Bc.deserialize(t,e,n,a,o,l)}static async deserialize(t,e,n){let a=null;if(t instanceof xv){const{data:{inkLists:l,rect:c,rotation:d,id:h,color:p,opacity:m,borderStyle:{rawWidth:y},popupRef:x,richText:S,contentsObj:w,creationDate:E,modificationDate:C},parent:{page:{pageNumber:T}}}=t;a=t={annotationType:jt.INK,color:Array.from(p),thickness:y,opacity:m,paths:{points:l},boxes:null,pageIndex:T-1,rect:c.slice(0),rotation:d,annotationElementId:h,id:h,deleted:!1,popupRef:x,richText:S,comment:w?.str||null,creationDate:E,modificationDate:C}}const o=await super.deserialize(t,e,n);return o._initialData=a,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new bc(this),[["colorPicker",this._colorPicker]]}get colorType(){return Xt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:n}){this._drawingOptions=Sv.getDefaultDrawingOptions({stroke:vt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,c=Object.assign(super.serialize(t),{color:Rt._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:e,points:n}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!this.#t(c)?null:(c.id=this.annotationElementId,c)}#t(t){const{color:e,thickness:n,opacity:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==e[c])||t.thickness!==n||t.opacity!==a||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class Kg extends Bc{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Ed=8,Hl=3;class Ba{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,n,a){return n-=t,a-=e,n===0?a>0?0:4:n===1?a+6:2-a}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,n,a,o,l,c){const d=this.#e(n,a,o,l);for(let h=0;h<8;h++){const p=(-h+d-c+16)%8,m=this.#s[2*p],y=this.#s[2*p+1];if(t[(n+m)*e+(a+y)]!==0)return p}return-1}static#r(t,e,n,a,o,l,c){const d=this.#e(n,a,o,l);for(let h=0;h<8;h++){const p=(h+d+c+16)%8,m=this.#s[2*p],y=this.#s[2*p+1];if(t[(n+m)*e+(a+y)]!==0)return p}return-1}static#i(t,e,n,a){const o=t.length,l=new Int32Array(o);for(let p=0;p<o;p++)l[p]=t[p]<=a?1:0;for(let p=1;p<n-1;p++)l[p*e]=l[p*e+e-1]=0;for(let p=0;p<e;p++)l[p]=l[e*n-1-p]=0;let c=1,d;const h=[];for(let p=1;p<n-1;p++){d=1;for(let m=1;m<e-1;m++){const y=p*e+m,x=l[y];if(x===0)continue;let S=p,w=m;if(x===1&&l[y-1]===0)c+=1,w-=1;else if(x>=1&&l[y+1]===0)c+=1,w+=1,x>1&&(d=x);else{x!==1&&(d=Math.abs(x));continue}const E=[m,p],C=w===m+1,T={isHole:C,points:E,id:c,parent:0};h.push(T);let R;for(const H of h)if(H.id===d){R=H;break}R?R.isHole?T.parent=C?R.parent:d:T.parent=C?d:R.parent:T.parent=C?d:0;const N=this.#n(l,e,p,m,S,w,0);if(N===-1){l[y]=-c,l[y]!==1&&(d=Math.abs(l[y]));continue}let M=this.#s[2*N],O=this.#s[2*N+1];const k=p+M,L=m+O;S=k,w=L;let j=p,U=m;for(;;){const H=this.#r(l,e,j,U,S,w,1);M=this.#s[2*H],O=this.#s[2*H+1];const $=j+M,Z=U+O;E.push(Z,$);const et=j*e+U;if(l[et+1]===0?l[et]=-c:l[et]===1&&(l[et]=c),$===p&&Z===m&&j===k&&U===L){l[y]!==1&&(d=Math.abs(l[y]));break}else S=j,w=U,j=$,U=Z}}}return h}static#a(t,e,n,a){if(n-e<=4){for(let k=e;k<n-2;k+=2)a.push(t[k],t[k+1]);return}const o=t[e],l=t[e+1],c=t[n-4]-o,d=t[n-3]-l,h=Math.hypot(c,d),p=c/h,m=d/h,y=p*l-m*o,x=d/c,S=1/h,w=Math.atan(x),E=Math.cos(w),C=Math.sin(w),T=S*(Math.abs(E)+Math.abs(C)),R=S*(1-T+T**2),N=Math.max(Math.atan(Math.abs(C+E)*R),Math.atan(Math.abs(C-E)*R));let M=0,O=e;for(let k=e+2;k<n-2;k+=2){const L=Math.abs(y-p*t[k+1]+m*t[k]);L>M&&(O=k,M=L)}M>(h*N)**2?(this.#a(t,e,O+2,a),this.#a(t,O,n,a)):a.push(o,l)}static#o(t){const e=[],n=t.length;return this.#a(t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}static#c(t,e,n,a,o,l){const c=new Float32Array(l**2),d=-2*a**2,h=l>>1;for(let w=0;w<l;w++){const E=(w-h)**2;for(let C=0;C<l;C++)c[w*l+C]=Math.exp((E+(C-h)**2)/d)}const p=new Float32Array(256),m=-2*o**2;for(let w=0;w<256;w++)p[w]=Math.exp(w**2/m);const y=t.length,x=new Uint8Array(y),S=new Uint32Array(256);for(let w=0;w<n;w++)for(let E=0;E<e;E++){const C=w*e+E,T=t[C];let R=0,N=0;for(let O=0;O<l;O++){const k=w+O-h;if(!(k<0||k>=n))for(let L=0;L<l;L++){const j=E+L-h;if(j<0||j>=e)continue;const U=t[k*e+j],H=c[O*l+L]*p[Math.abs(U-T)];R+=U*H,N+=H}}const M=x[C]=Math.round(R/N);S[M]++}return[x,S]}static#l(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e}static#h(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let a=-1/0,o=1/0;for(let c=0,d=n.length;c<d;c++){const h=n[c]=t[c<<2];a=Math.max(a,h),o=Math.min(o,h)}const l=255/(a-o);for(let c=0,d=n.length;c<d;c++)n[c]=(n[c]-o)*l;return n}static#d(t){let e,n=-1/0,a=-1/0;const o=t.findIndex(d=>d!==0);let l=o,c=o;for(e=o;e<256;e++){const d=t[e];d>n&&(e-l>a&&(a=e-l,c=e-1),n=d,l=e)}for(e=c-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:n,height:a}=t,{maxDim:o}=this.#t;let l=n,c=a;if(n>o||a>o){let y=n,x=a,S=Math.log2(Math.max(n,a)/o);const w=Math.floor(S);S=S===w?w-1:w;for(let C=0;C<S;C++){l=Math.ceil(y/2),c=Math.ceil(x/2);const T=new OffscreenCanvas(l,c);T.getContext("2d").drawImage(t,0,0,y,x,0,0,l,c),y=l,x=c,t!==e&&t.close(),t=T.transferToImageBitmap()}const E=Math.min(o/l,o/c);l=Math.round(l*E),c=Math.round(c*E)}const h=new OffscreenCanvas(l,c).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,l,c),h.filter="grayscale(1)",h.drawImage(t,0,0,t.width,t.height,0,0,l,c);const p=h.getImageData(0,0,l,c).data;return[this.#h(p),l,c]}static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:a},o,l,c,d){let h=new OffscreenCanvas(1,1),p=h.getContext("2d",{alpha:!1});const m=200,y=p.font=`${n} ${a} ${m}px ${e}`,{actualBoundingBoxLeft:x,actualBoundingBoxRight:S,actualBoundingBoxAscent:w,actualBoundingBoxDescent:E,fontBoundingBoxAscent:C,fontBoundingBoxDescent:T,width:R}=p.measureText(t),N=1.5,M=Math.ceil(Math.max(Math.abs(x)+Math.abs(S)||0,R)*N),O=Math.ceil(Math.max(Math.abs(w)+Math.abs(E)||m,Math.abs(C)+Math.abs(T)||m)*N);h=new OffscreenCanvas(M,O),p=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=y,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,M,O),p.fillStyle="black",p.fillText(t,M*(N-1)/2,O*(3-N)/2);const k=this.#h(p.getImageData(0,0,M,O).data),L=this.#l(k),j=this.#d(L),U=this.#i(k,M,O,j);return this.processDrawnLines({lines:{curves:U,width:M,height:O},pageWidth:o,pageHeight:l,rotation:c,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,n,a,o){const[l,c,d]=this.#f(t),[h,p]=this.#c(l,c,d,Math.hypot(c,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),m=this.#d(p),y=this.#i(h,c,d,m);return this.processDrawnLines({lines:{curves:y,width:c,height:d},pageWidth:e,pageHeight:n,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:a,innerMargin:o,mustSmooth:l,areContours:c}){a%180!==0&&([e,n]=[n,e]);const{curves:d,width:h,height:p}=t,m=t.thickness??0,y=[],x=Math.min(e/h,n/p),S=x/e,w=x/n,E=[];for(const{points:T}of d){const R=l?this.#o(T):T;if(!R)continue;E.push(R);const N=R.length,M=new Float32Array(N),O=new Float32Array(3*(N===2?2:N-2));if(y.push({line:O,points:M}),N===2){M[0]=R[0]*S,M[1]=R[1]*w,O.set([NaN,NaN,NaN,NaN,M[0],M[1]],0);continue}let[k,L,j,U]=R;k*=S,L*=w,j*=S,U*=w,M.set([k,L,j,U],0),O.set([NaN,NaN,NaN,NaN,k,L],0);for(let H=4;H<N;H+=2){const $=M[H]=R[H]*S,Z=M[H+1]=R[H+1]*w;O.set(yt.createBezierPoints(k,L,j,U,$,Z),(H-2)*3),[k,L,j,U]=[j,U,$,Z]}}if(y.length===0)return null;const C=c?new Kg:new Bc;return C.build(y,e,n,1,a,c?0:m,o),{outline:C,newCurves:E,areContours:c,thickness:m,width:h,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:a,height:o}){let l=1/0,c=-1/0,d=0;for(const R of t){d+=R.length;for(let N=2,M=R.length;N<M;N++){const O=R[N]-R[N-2];l=Math.min(l,O),c=Math.max(c,O)}}let h;l>=-128&&c<=127?h=Int8Array:l>=-32768&&c<=32767?h=Int16Array:h=Int32Array;const p=t.length,m=Ed+Hl*p,y=new Uint32Array(m);let x=0;y[x++]=m*Uint32Array.BYTES_PER_ELEMENT+(d-2*p)*h.BYTES_PER_ELEMENT,y[x++]=0,y[x++]=a,y[x++]=o,y[x++]=e?0:1,y[x++]=Math.max(0,Math.floor(n??0)),y[x++]=p,y[x++]=h.BYTES_PER_ELEMENT;for(const R of t)y[x++]=R.length-2,y[x++]=R[0],y[x++]=R[1];const S=new CompressionStream("deflate-raw"),w=S.writable.getWriter();await w.ready,w.write(y);const E=h.prototype.constructor;for(const R of t){const N=new E(R.length-2);for(let M=2,O=R.length;M<O;M++)N[M-2]=R[M]-R[M-2];w.write(N)}w.close();const C=await new Response(S.readable).arrayBuffer(),T=new Uint8Array(C);return lR(T)}static async decompressSignature(t){try{const e=sV(t),{readable:n,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,c=0;for await(const R of n)l||=new Uint8Array(new Uint32Array(R.buffer,0,4)[0]),l.set(R,c),c+=R.length;const d=new Uint32Array(l.buffer,0,l.length>>2),h=d[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const p=d[2],m=d[3],y=d[4]===0,x=d[5],S=d[6],w=d[7],E=[],C=(Ed+Hl*S)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(w){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(l.buffer,C);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(l.buffer,C);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(l.buffer,C);break}c=0;for(let R=0;R<S;R++){const N=d[Hl*R+Ed],M=new Float32Array(N+2);E.push(M);for(let O=0;O<Hl-1;O++)M[O]=d[Hl*R+Ed+O+1];for(let O=0;O<N;O++)M[O+2]=M[O]+T[c++]}return{areContours:y,thickness:x,outlines:E,width:p,height:m}}catch(e){return Bt(`decompressSignature: ${e}`),null}}}class Av extends UR{constructor(){super(),super.updateProperties({fill:Rt._defaultLineColor,"stroke-width":0})}clone(){const t=new Av;return t.updateAll(this),t}}class Ev extends Bh{constructor(t){super(t),super.updateProperties({stroke:Rt._defaultLineColor,"stroke-width":1})}clone(){const t=new Ev(this._viewParameters);return t.updateAll(this),t}}class Is extends Dt{#t=!1;#e=null;#s=null;#n=null;static _type="signature";static _editorType=jt.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){Rt.initialize(t,e),this._defaultDrawingOptions=new Av,this._defaultDrawnSignatureOptions=new Ev(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ut(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:a,mustSmooth:o,areContours:l,description:c,uuid:d,heightInPage:h}=this.#s,{rawDims:{pageWidth:p,pageHeight:m},rotation:y}=this.parent.viewport,x=Ba.processDrawnLines({lines:a,pageWidth:p,pageHeight:m,rotation:y,innerMargin:Is._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(x,h,c,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:n,width:a,height:o}=this.#s,l=Math.max(a,o),c=Ba.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:n,width:a,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,n,a){const{x:o,y:l}=this,{outline:c}=this.#s=t;this.#t=c instanceof Kg,this.description=n;let d;this.#t?d=Is.getDefaultDrawingOptions():(d=Is._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:d});const[,h]=this.pageDimensions;let p=e/h;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:a}=this.parent.viewport;return Ba.process(t,e,n,a,Is._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:n,pageHeight:a},rotation:o}=this.parent.viewport;return Ba.extractContoursFromText(t,e,n,a,o,Is._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:a}=this.parent.viewport;return Ba.processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:a,innerMargin:Is._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=Is.getDefaultDrawingOptions():(this._drawingOptions=Is._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a});return this.addComment(o),t?(o.paths={lines:e,points:n},o.uuid=this.#n,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,n,a,o,l){return l.areContours?Kg.deserialize(t,e,n,a,o,l):Bc.deserialize(t,e,n,a,o,l)}static async deserialize(t,e,n){const a=await super.deserialize(t,e,n);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#n=t.uuid,a}}class LH extends Rt{#t=null;#e=null;#s=null;#n=null;#r=null;#i="";#a=null;#o=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=jt.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){Rt.initialize(t,e)}static isHandlingMimeForPasting(t){return lh.includes(t)}static paste(t,e){e.pasteEditor({mode:jt.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#d(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#i=t.file.name),this.#p()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await n.guess({name:"altText",request:{data:a,width:o,height:l,channels:a.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#d(n,!0)).finally(()=>this.#f());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(n).then(a=>this.#d(a)).finally(()=>this.#f());return}if(this.#r){const n=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(n).then(a=>this.#d(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=lh.join(",");const e=this._uiManager._signal;this.#s=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(a)}n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#s||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:n,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#e=n,a&&(this.#t=a),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#m()},t)}#p(){const{div:t}=this;let{width:e,height:n}=this.#t;const[a,o]=this.pageDimensions,l=.75;if(this.width)e=this.width*a,n=this.height*o;else if(e>l*a||n>l*o){const d=Math.min(l*a/e,l*o/n);e*=d,n*=d}this._uiManager.enableWaiting(!1);const c=this.#a=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=e/a,this.height=n/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,n=!1){t||(t=224);const{width:a,height:o}=this.#t,l=new Ts;let c=this.#t,d=a,h=o,p=null;if(e){if(a>e||o>e){const O=Math.min(e/a,e/o);d=Math.floor(a*O),h=Math.floor(o*O)}p=document.createElement("canvas");const y=p.width=Math.ceil(d*l.sx),x=p.height=Math.ceil(h*l.sy);this.#l||(c=this.#u(y,x));const S=p.getContext("2d");S.filter=this._uiManager.hcmFilter;let w="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":rV.isDarkMode&&(w="#8f8f9d",E="#42414d");const C=15,T=C*l.sx,R=C*l.sy,N=new OffscreenCanvas(T*2,R*2),M=N.getContext("2d");M.fillStyle=w,M.fillRect(0,0,T*2,R*2),M.fillStyle=E,M.fillRect(0,0,T,R),M.fillRect(T,R,T,R),S.fillStyle=S.createPattern(N,"repeat"),S.fillRect(0,0,y,x),S.drawImage(c,0,0,c.width,c.height,0,0,y,x)}let m=null;if(n){let y,x;if(l.symmetric&&c.width<t&&c.height<t)y=c.width,x=c.height;else if(c=this.#t,a>t||o>t){const E=Math.min(t/a,t/o);y=Math.floor(a*E),x=Math.floor(o*E),this.#l||(c=this.#u(y,x))}const w=new OffscreenCanvas(y,x).getContext("2d",{willReadFrequently:!0});w.drawImage(c,0,0,c.width,c.height,0,0,y,x),m={width:y,height:x,data:w.getImageData(0,0,y,x).data}}return{canvas:p,width:d,height:h,imageData:m}}#u(t,e){const{width:n,height:a}=this.#t;let o=n,l=a,c=this.#t;for(;o>2*t||l>2*e;){const d=o,h=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const p=new OffscreenCanvas(o,l);p.getContext("2d").drawImage(c,0,0,d,h,0,0,o,l),c=p.transferToImageBitmap()}return c}#m(){const[t,e]=this.parentDimensions,{width:n,height:a}=this,o=new Ts,l=Math.ceil(n*t*o.sx),c=Math.ceil(a*e*o.sy),d=this.#a;if(!d||d.width===l&&d.height===c)return;d.width=l,d.height=c;const h=this.#l?this.#t:this.#u(l,c),p=d.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(h,0,0,h.width,h.height,0,0,l,c)}#y(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,n]=this.pageDimensions,a=Math.round(this.width*e*tr.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*tr.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(a,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,n){let a=null,o=!1;if(t instanceof FR){const{data:{rect:w,rotation:E,id:C,structParent:T,popupRef:R,richText:N,contentsObj:M,creationDate:O,modificationDate:k},container:L,parent:{page:{pageNumber:j}},canvas:U}=t;let H,$;U?(delete t.canvas,{id:H,bitmap:$}=n.imageManager.getFromCanvas(L.id,U),U.remove()):(o=!0,t._hasNoCanvas=!0);const Z=(await e._structTree.getAriaAttributes(`${rv}${C}`))?.get("aria-label")||"";a=t={annotationType:jt.STAMP,bitmapId:H,bitmap:$,pageIndex:j-1,rect:w.slice(0),rotation:E,annotationElementId:C,id:C,deleted:!1,accessibilityData:{decorative:!1,altText:Z},isSvg:!1,structParent:T,popupRef:R,richText:N,comment:M?.str||null,creationDate:O,modificationDate:k}}const l=await super.deserialize(t,e,n),{rect:c,bitmap:d,bitmapUrl:h,bitmapId:p,isSvg:m,accessibilityData:y}=t;o?(n.addMissingCanvas(t.id,l),l.#o=!0):p&&n.imageManager.isValidId(p)?(l.#e=p,d&&(l.#t=d)):l.#n=h,l.#l=m;const[x,S]=l.pageDimensions;return l.width=(c[2]-c[0])/x,l.height=(c[3]-c[1])/S,y&&(l.altTextData=y),l._initialData=a,t.comment&&l.setCommentData(t),l.#h=!!a,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(n),t)return n.bitmapUrl=this.#y(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(n.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=this.#b(n);return c.isSame?null:(c.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(e===null)return n;e.stamps||=new Map;const l=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:n}),n.bitmap=this.#y(!1);else if(this.#l){const c=e.stamps.get(this.#e);l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=this.#y(!1))}return n}#b(t){const{pageIndex:e,accessibilityData:{altText:n}}=this._initialData,a=t.pageIndex===e,o=(t.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Us{#t;#e=!1;#s=null;#n=null;#r=null;#i=new Map;#a=!1;#o=!1;#c=!1;#l=null;#h=null;#d=null;#f=null;#g=null;#p=-1;#u;static _initialized=!1;static#m=new Map([Xe,Sv,LH,Oe,Is].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:a,accessibilityManager:o,annotationLayer:l,drawLayer:c,textLayer:d,viewport:h,l10n:p}){const m=[...Us.#m.values()];if(!Us._initialized){Us._initialized=!0;for(const y of m)y.initialize(p,t)}t.registerEditorTypes(m),this.#u=t,this.pageIndex=e,this.div=n,this.#t=o,this.#s=l,this.viewport=h,this.#d=d,this.drawLayer=c,this._structTree=a,this.#u.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===jt.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#x(),t){case jt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case jt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case jt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===jt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of Us.#m.values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#d?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#s?.div.classList.toggle("disabled",!t)}get#y(){return this.#i.size!==0?this.#i.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const t=new Set;for(const n of this.#y)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#u.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));const e=this.#s;if(e)for(const n of e.getEditableAnnotations()){if(n.hide(),this.#u.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const a=await this.deserialize(n);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#g){this.#g=new AbortController;const n=this.#u.combinedSignal(this.#g);this.#d.div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:c,timeStamp:d}=a,h=this.#p;if(d-h>500){this.#p=d;return}this.#p=-1;const{classList:p}=this.div;p.toggle("getElements",!0);const m=document.elementsFromPoint(l,c);if(p.toggle("getElements",!1),!this.div.contains(m[0]))return;let y;const x=new RegExp(`^${mc}[0-9]+$`);for(const w of m)if(x.test(w.id)){y=w.id;break}if(!y)return;const S=this.#i.get(y);S?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),S.dblclick(a))},{signal:n,capture:!0})}const t=this.#s;if(t){const n=new Map,a=new Map;for(const l of this.#y){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(t);continue}if(l.serialize()!==null){n.set(l.annotationElementId,l);continue}else a.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const o=t.getEditableAnnotations();for(const l of o){const{id:c}=l.data;if(this.#u.isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let d=a.get(c);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=n.get(c),d&&(this.#u.addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}this.#x(),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const n of Us.#m.values())e.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#s?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#b.bind(this),{signal:t}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#b(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#d.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#d.div.contains(e)){const{isMac:n}=We.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#u.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),Oe.startHighlighting(this,this.#u.direction==="ltr",{target:this.#d.div,x:t.x,y:t.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#i.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#i.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),Rt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of this.#i.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#v(){return Us.#m.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#C(t){const e=this.#v;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:n,offsetY:a}=this.#A(),o=this.getNextId(),l=this.#C({parent:this,id:o,x:n,y:a,uiManager:this.#u,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await Us.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,n={}){const a=this.getNextId(),o=this.#C({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#A(){const{x:t,y:e,width:n,height:a}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,e),c=Math.min(window.innerWidth,t+n),d=Math.min(window.innerHeight,e+a),h=(o+c)/2-t,p=(l+d)/2-e,[m,y]=this.viewport.rotation%180===0?[h,p]:[p,h];return{offsetX:m,offsetY:y}}addNewEditor(t={}){this.createAndAddNewEditor(this.#A(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=We.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#a||(this.#a=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const n=this.#u.getMode();if(n===jt.STAMP||n===jt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===jt.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:e}=We.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#a=!0,this.#v?.isDrawer){this.startDrawingSession(t);return}const n=this.#u.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#h=null,this.commitOrRemove())},{signal:e}),this.#v.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#h=e);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#v.endDrawing(t)):null}findNewParent(t,e,n){const a=this.#u.findParent(e,n);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#i.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#i.clear(),this.#u.removeLayer(this)}#x(){for(const t of this.#i.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,ca(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#x();const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,ca(this.div,{rotation:n}),e!==n)for(const a of this.#i.values())a.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class Ye{#t=null;#e=new Map;#s=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return Ut(this,"_svgFactory",new xc)}static#r(t,[e,n,a,o]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*a}%`,l.height=`${100*o}%`}#i(){const t=Ye._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,e){const n=Ye._svgFactory.createElement("clipPath");t.append(n);const a=`clip_${e}`;n.setAttribute("id",a),n.setAttribute("clipPathUnits","objectBoundingBox");const o=Ye._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),a}#o(t,e){for(const[n,a]of Object.entries(e))a===null?t.removeAttribute(n):t.setAttribute(n,a)}draw(t,e=!1,n=!1){const a=Ye.#n++,o=this.#i(),l=Ye._svgFactory.createElement("defs");o.append(l);const c=Ye._svgFactory.createElement("path");l.append(c);const d=`path_p${this.pageIndex}_${a}`;c.setAttribute("id",d),c.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#s.set(a,c);const h=n?this.#a(l,d):null,p=Ye._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(a,o),{id:a,clipPathId:`url(#${h})`}}drawOutline(t,e){const n=Ye.#n++,a=this.#i(),o=Ye._svgFactory.createElement("defs");a.append(o);const l=Ye._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const m=Ye._svgFactory.createElement("mask");o.append(m),d=`mask_p${this.pageIndex}_${n}`,m.setAttribute("id",d),m.setAttribute("maskUnits","objectBoundingBox");const y=Ye._svgFactory.createElement("rect");m.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const x=Ye._svgFactory.createElement("use");m.append(x),x.setAttribute("href",`#${c}`),x.setAttribute("stroke","none"),x.setAttribute("fill","black"),x.setAttribute("fill-rule","nonzero"),x.classList.add("mask")}const h=Ye._svgFactory.createElement("use");a.append(h),h.setAttribute("href",`#${c}`),d&&h.setAttribute("mask",`url(#${d})`);const p=h.cloneNode();return a.append(p),h.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(n,a),n}finalizeDraw(t,e){this.#s.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:n,bbox:a,rootClass:o,path:l}=e,c=typeof t=="number"?this.#e.get(t):t;if(c){if(n&&this.#o(c,n),a&&Ye.#r(c,a),o){const{classList:d}=c;for(const[h,p]of Object.entries(o))d.toggle(h,p)}if(l){const h=c.firstChild.firstChild;this.#o(h,l)}}}updateParent(t,e){if(e===this)return;const n=this.#e.get(t);n&&(e.#t.append(n),this.#e.delete(t),e.#e.set(t,n))}remove(t){this.#s.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#s.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Yg};globalThis.pdfjsLib={AbortException:Ei,AnnotationEditorLayer:Us,AnnotationEditorParamsType:Xt,AnnotationEditorType:jt,AnnotationEditorUIManager:Ci,AnnotationLayer:wv,AnnotationMode:Hs,AnnotationType:Le,applyOpacity:fR,build:LR,ColorPicker:zn,createValidAbsoluteUrl:sv,CSSConstants:hR,DOMSVGFactory:xc,DrawLayer:Ye,FeatureTest:We,fetchData:Io,findContrastColor:pR,getDocument:mv,getFilenameFromUrl:cR,getPdfFilenameFromUrl:uR,getRGB:zo,getUuid:av,getXfaPageViewport:dR,GlobalWorkerOptions:ia,ImageKind:sc,InvalidPDFException:rh,isDataScheme:Lc,isPdfFile:Ph,isValidExplicitDest:vR,MathClamp:on,noContextMenu:Xn,normalizeUnicode:oR,OPS:To,OutputScale:Ts,PasswordResponses:aR,PDFDataRangeTransport:yv,PDFDateString:oh,PDFWorker:_o,PermissionFlag:iR,PixelsPerInch:tr,RenderingCancelledException:Oh,renderRichText:lv,ResponseException:gc,setLayerDimensions:ca,shadow:Ut,SignatureExtractor:Ba,stopEvent:Ae,SupportedImageMimeTypes:lh,TextLayer:vc,TouchManager:Pc,updateUrlHash:iv,Util:vt,VerbosityLevel:Mc,version:vv,XfaLayer:ov};const OH=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Ei,AnnotationEditorLayer:Us,AnnotationEditorParamsType:Xt,AnnotationEditorType:jt,AnnotationEditorUIManager:Ci,AnnotationLayer:wv,AnnotationMode:Hs,AnnotationType:Le,CSSConstants:hR,ColorPicker:zn,DOMSVGFactory:xc,DrawLayer:Ye,FeatureTest:We,GlobalWorkerOptions:ia,ImageKind:sc,InvalidPDFException:rh,MathClamp:on,OPS:To,OutputScale:Ts,PDFDataRangeTransport:yv,PDFDateString:oh,PDFWorker:_o,PasswordResponses:aR,PermissionFlag:iR,PixelsPerInch:tr,RenderingCancelledException:Oh,ResponseException:gc,SignatureExtractor:Ba,SupportedImageMimeTypes:lh,TextLayer:vc,TouchManager:Pc,Util:vt,VerbosityLevel:Mc,XfaLayer:ov,applyOpacity:fR,build:LR,createValidAbsoluteUrl:sv,fetchData:Io,findContrastColor:pR,getDocument:mv,getFilenameFromUrl:cR,getPdfFilenameFromUrl:uR,getRGB:zo,getUuid:av,getXfaPageViewport:dR,isDataScheme:Lc,isPdfFile:Ph,isValidExplicitDest:vR,noContextMenu:Xn,normalizeUnicode:oR,renderRichText:lv,setLayerDimensions:ca,shadow:Ut,stopEvent:Ae,updateUrlHash:iv,version:vv},Symbol.toStringTag,{value:"Module"}));var RA=Object.prototype.hasOwnProperty;function NA(s,t,e){for(e of s.keys())if(wo(e,t))return e}function wo(s,t){var e,n,a;if(s===t)return!0;if(s&&t&&(e=s.constructor)===t.constructor){if(e===Date)return s.getTime()===t.getTime();if(e===RegExp)return s.toString()===t.toString();if(e===Array){if((n=s.length)===t.length)for(;n--&&wo(s[n],t[n]););return n===-1}if(e===Set){if(s.size!==t.size)return!1;for(n of s)if(a=n,a&&typeof a=="object"&&(a=NA(t,a),!a)||!t.has(a))return!1;return!0}if(e===Map){if(s.size!==t.size)return!1;for(n of s)if(a=n[0],a&&typeof a=="object"&&(a=NA(t,a),!a)||!wo(n[1],t.get(a)))return!1;return!0}if(e===ArrayBuffer)s=new Uint8Array(s),t=new Uint8Array(t);else if(e===DataView){if((n=s.byteLength)===t.byteLength)for(;n--&&s.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(s)){if((n=s.byteLength)===t.byteLength)for(;n--&&s[n]===t[n];);return n===-1}if(!e||typeof s=="object"){n=0;for(e in s)if(RA.call(s,e)&&++n&&!RA.call(t,e)||!(e in t)||!wo(s[e],t[e]))return!1;return Object.keys(t).length===n}}return s!==s&&t!==t}function Fc(s){let t=!1;return{promise:new Promise((n,a)=>{s.then(o=>!t&&n(o)).catch(o=>!t&&a(o))}),cancel(){t=!0}}}const PH=["onCopy","onCut","onPaste"],jH=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],BH=["onFocus","onBlur"],FH=["onInput","onInvalid","onReset","onSubmit"],IH=["onLoad","onError"],zH=["onKeyDown","onKeyPress","onKeyUp"],UH=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],VH=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],HH=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],$H=["onSelect"],GH=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],qH=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],XH=["onScroll"],YH=["onWheel"],WH=["onAnimationStart","onAnimationEnd","onAnimationIteration"],KH=["onTransitionEnd"],QH=["onToggle"],ZH=["onChange"],JH=[...PH,...jH,...BH,...FH,...IH,...zH,...UH,...VH,...HH,...$H,...GH,...qH,...XH,...YH,...WH,...KH,...ZH,...QH];function VR(s,t){const e={};for(const n of JH){const a=s[n];a&&(t?e[n]=(o=>a(o,t(n))):e[n]=a)}return e}var t6="Invariant failed";function ue(s,t){if(!s)throw new Error(t6)}var Km,MA;function e6(){if(MA)return Km;MA=1;var s=function(){};return Km=s,Km}var n6=e6();const ln=Jg(n6),HR=A.createContext(null),s6="noopener noreferrer nofollow";class i6{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return ue(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){ue(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||s6,t.target=n?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{ue(this.pdfDocument),ue(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{ue(Array.isArray(e));const n=e[0];new Promise(a=>{ue(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(o=>{a(o)}).catch(()=>{ue(!1)}):typeof n=="number"?a(n):ue(!1)}).then(a=>{const o=a+1;ue(this.pdfViewer),ue(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:a,pageNumber:o})})})}goToPage(t){const e=t-1;ue(this.pdfViewer),ue(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function So({children:s,type:t}){return v.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:s})}const DA={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function a6(s,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return s}}function Ro(){return A.useReducer(a6,{value:void 0,error:void 0})}const Fh=typeof window<"u",$R=Fh&&window.location.protocol==="file:";function r6(s){return typeof s<"u"}function Pa(s){return r6(s)&&s!==null}function o6(s){return typeof s=="string"}function l6(s){return s instanceof ArrayBuffer}function c6(s){return ue(Fh),s instanceof Blob}function Qg(s){return o6(s)&&/^data:/.test(s)}function kA(s){ue(Qg(s));const[t="",e=""]=s.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function u6(){return Fh&&window.devicePixelRatio||1}const GR="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function LA(){ln(!$R,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${GR}`)}function d6(){ln(!$R,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${GR}`)}function nr(s){s?.cancel&&s.cancel()}function Zg(s,t){return Object.defineProperty(s,"width",{get(){return this.getViewport({scale:t}).width},configurable:!0}),Object.defineProperty(s,"height",{get(){return this.getViewport({scale:t}).height},configurable:!0}),Object.defineProperty(s,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(s,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),s}function qR(s){return s.name==="AbortException"||s.name==="RenderingCancelledException"}function h6(s){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=a=>{if(!a.target)return e(new Error("Error while reading a file."));const{error:o}=a.target;if(!o)return e(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(s)})}const{PDFDataRangeTransport:f6}=OH,p6=(s,t)=>{switch(t){case DA.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");s(e);break}case DA.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");s(e);break}}};function OA(s){return typeof s=="object"&&s!==null&&("data"in s||"range"in s||"url"in s)}const m6=A.forwardRef(function({children:t,className:e,error:n="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:c,imageResourcesPath:d,loading:h="Loading PDF",noData:p="No PDF file specified.",onItemClick:m,onLoadError:y,onLoadProgress:x,onLoadSuccess:S,onPassword:w=p6,onSourceError:E,onSourceSuccess:C,options:T,renderMode:R,rotate:N,scale:M,...O},k){const[L,j]=Ro(),{value:U,error:H}=L,[$,Z]=Ro(),{value:et,error:ct}=$,P=A.useRef(new i6),z=A.useRef([]),I=A.useRef(void 0),K=A.useRef(void 0);l&&l!==I.current&&OA(l)&&(ln(!wo(l,I.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),I.current=l),T&&T!==K.current&&(ln(!wo(T,K.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),K.current=T);const ht=A.useRef({scrollPageIntoView:ut=>{const{dest:ft,pageNumber:gt,pageIndex:dt=gt-1}=ut;if(m){m({dest:ft,pageIndex:dt,pageNumber:gt});return}const Tt=z.current[dt];if(Tt){Tt.scrollIntoView();return}ln(!1,`An internal link leading to page ${gt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});A.useImperativeHandle(k,()=>({linkService:P,pages:z,viewer:ht}),[]);function B(){C&&C()}function X(){H&&(ln(!1,H.toString()),E&&E(H))}function tt(){j({type:"RESET"})}A.useEffect(tt,[l,j]);const ot=A.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return Qg(l)?{data:kA(l)}:(LA(),{url:l});if(l instanceof f6)return{range:l};if(l6(l))return{data:l};if(Fh&&c6(l))return{data:await h6(l)};if(ue(typeof l=="object"),ue(OA(l)),"url"in l&&typeof l.url=="string"){if(Qg(l.url)){const{url:ut,...ft}=l;return{data:kA(ut),...ft}}LA()}return l},[l]);A.useEffect(()=>{const ut=Fc(ot());return ut.promise.then(ft=>{j({type:"RESOLVE",value:ft})}).catch(ft=>{j({type:"REJECT",error:ft})}),()=>{nr(ut)}},[ot,j]),A.useEffect(()=>{if(!(typeof U>"u")){if(U===!1){X();return}B()}},[U]);function pt(){et&&(S&&S(et),z.current=new Array(et.numPages),P.current.setDocument(et))}function st(){ct&&(ln(!1,ct.toString()),y&&y(ct))}A.useEffect(function(){Z({type:"RESET"})},[Z,U]),A.useEffect(function(){if(!U)return;const ft=T?{...U,...T}:U,gt=mv(ft);x&&(gt.onProgress=x),w&&(gt.onPassword=w);const dt=gt;return dt.promise.then(Tt=>{dt.destroyed||Z({type:"RESOLVE",value:Tt})}).catch(Tt=>{dt.destroyed||Z({type:"REJECT",error:Tt})}),()=>{dt.destroy()}},[T,Z,U]),A.useEffect(()=>{if(!(typeof et>"u")){if(et===!1){st();return}pt()}},[et]),A.useEffect(function(){P.current.setViewer(ht.current),P.current.setExternalLinkRel(a),P.current.setExternalLinkTarget(o)},[a,o]);const nt=A.useCallback((ut,ft)=>{z.current[ut]=ft},[]),Et=A.useCallback(ut=>{delete z.current[ut]},[]),bt=A.useMemo(()=>({imageResourcesPath:d,linkService:P.current,onItemClick:m,pdf:et,registerPage:nt,renderMode:R,rotate:N,scale:M,unregisterPage:Et}),[d,m,et,nt,R,N,M,Et]),Nt=A.useMemo(()=>VR(O,()=>et),[O,et]);function q(){function ut(gt){return!!gt?.pdf}if(!ut(bt))throw new Error("pdf is undefined");const ft=typeof t=="function"?t(bt):t;return v.jsx(HR.Provider,{value:bt,children:ft})}function lt(){return l?et==null?v.jsx(So,{type:"loading",children:typeof h=="function"?h():h}):et===!1?v.jsx(So,{type:"error",children:typeof n=="function"?n():n}):q():v.jsx(So,{type:"no-data",children:typeof p=="function"?p():p})}return v.jsx("div",{className:Lo("react-pdf__Document",e),ref:c,...Nt,children:lt()})});function XR(){return A.useContext(HR)}function YR(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];var e=s.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(o){for(var l=0,c=e;l<c.length;l++){var d=c[l];typeof d=="function"?d(o):d&&(d.current=o)}}}const WR=A.createContext(null);function Ih(){return A.useContext(WR)}function g6(){const s=XR(),t=Ih();ue(t);const e={...s,...t},{filterAnnotations:n,imageResourcesPath:a,linkService:o,onGetAnnotationsError:l,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:d,onRenderAnnotationLayerSuccess:h,page:p,pdf:m,renderForms:y,rotate:x,scale:S=1}=e;ue(m),ue(p),ue(o);const[w,E]=Ro(),{value:C,error:T}=w,R=A.useRef(null);ln(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function N(){C&&c&&c(C)}function M(){T&&(ln(!1,T.toString()),l&&l(T))}A.useEffect(function(){E({type:"RESET"})},[E,p]),A.useEffect(function(){if(!p)return;const U=Fc(p.getAnnotations()),H=U;return U.promise.then($=>{E({type:"RESOLVE",value:$})}).catch($=>{E({type:"REJECT",error:$})}),()=>{nr(H)}},[E,p]),A.useEffect(()=>{if(C!==void 0){if(C===!1){M();return}N()}},[C]);function O(){h&&h()}function k(j){ln(!1,`${j}`),d&&d(j)}const L=A.useMemo(()=>p.getViewport({scale:S,rotation:x}),[p,x,S]);return A.useEffect(function(){if(!m||!p||!o||!C)return;const{current:U}=R;if(!U)return;const H=L.clone({dontFlip:!0}),$={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:m.annotationStorage,commentManager:null,div:U,l10n:null,linkService:o,page:p,structTreeLayer:null,viewport:H},Z={annotations:n?n({annotations:C}):C,annotationStorage:m.annotationStorage,div:U,imageResourcesPath:a,linkService:o,page:p,renderForms:y,viewport:H};U.innerHTML="";try{new wv($).render(Z),O()}catch(et){k(et)}return()=>{}},[C,n,a,o,p,m,y,L]),v.jsx("div",{className:Lo("react-pdf__Page__annotations","annotationLayer"),ref:R})}const KR={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},y6=/^H(\d+)$/;function v6(s){return s in KR}function zh(s){return"children"in s}function QR(s){return zh(s)?s.children.length===1&&0 in s.children&&"id"in s.children[0]:!1}function b6(s){const t={};if(zh(s)){const{role:e}=s,n=e.match(y6);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(v6(e)){const a=KR[e];a&&(t.role=a)}}return t}function ZR(s){const t={};if(zh(s)){if(s.alt!==void 0&&(t["aria-label"]=s.alt),s.lang!==void 0&&(t.lang=s.lang),QR(s)){const[e]=s.children;if(e){const n=ZR(e);return{...t,...n}}}}else"id"in s&&(t["aria-owns"]=s.id);return t}function x6(s){return s?{...b6(s),...ZR(s)}:null}function JR({className:s,node:t}){const e=A.useMemo(()=>x6(t),[t]),n=A.useMemo(()=>!zh(t)||QR(t)?null:t.children.map((a,o)=>v.jsx(JR,{node:a},o)),[t]);return v.jsx("span",{className:s,...e,children:n})}function w6(){const s=Ih();ue(s);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=s,[n,a]=Ro(),{value:o,error:l}=n,{customTextRenderer:c,page:d}=s;function h(){o&&e&&e(o)}function p(){l&&(ln(!1,l.toString()),t&&t(l))}return A.useEffect(function(){a({type:"RESET"})},[a,d]),A.useEffect(function(){if(c||!d)return;const y=Fc(d.getStructTree()),x=y;return y.promise.then(S=>{a({type:"RESOLVE",value:S})}).catch(S=>{a({type:"REJECT",error:S})}),()=>nr(x)},[c,d,a]),A.useEffect(()=>{if(o!==void 0){if(o===!1){p();return}h()}},[o]),o?v.jsx(JR,{className:"react-pdf__Page__structTree structTree",node:o}):null}const PA=Hs;function S6(s){const t=Ih();ue(t);const e={...t,...s},{_className:n,canvasBackground:a,devicePixelRatio:o=u6(),onRenderError:l,onRenderSuccess:c,page:d,renderForms:h,renderTextLayer:p,rotate:m,scale:y}=e,{canvasRef:x}=s;ue(d);const S=A.useRef(null);function w(){d&&c&&c(Zg(d,y))}function E(N){qR(N)||(ln(!1,N.toString()),l&&l(N))}const C=A.useMemo(()=>d.getViewport({scale:y*o,rotation:m}),[o,d,m,y]),T=A.useMemo(()=>d.getViewport({scale:y,rotation:m}),[d,m,y]);A.useEffect(function(){if(!d)return;d.cleanup();const{current:M}=S;if(!M)return;M.width=C.width,M.height=C.height,M.style.width=`${Math.floor(T.width)}px`,M.style.height=`${Math.floor(T.height)}px`,M.style.visibility="hidden";const O={annotationMode:h?PA.ENABLE_FORMS:PA.ENABLE,canvas:M,canvasContext:M.getContext("2d",{alpha:!1}),viewport:C};a&&(O.background=a);const k=d.render(O),L=k;return k.promise.then(()=>{M.style.visibility="",w()}).catch(E),()=>nr(L)},[a,d,h,C,T]);const R=A.useCallback(()=>{const{current:N}=S;N&&(N.width=0,N.height=0)},[]);return A.useEffect(()=>R,[R]),v.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:YR(x,S),style:{display:"block",userSelect:"none"},children:p?v.jsx(w6,{}):null})}function A6(s){return"str"in s}function E6(){const s=Ih();ue(s);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:a,onRenderTextLayerSuccess:o,page:l,pageIndex:c,pageNumber:d,rotate:h,scale:p}=s;ue(l);const[m,y]=Ro(),{value:x,error:S}=m,w=A.useRef(null);ln(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function E(){x&&n&&n(x)}function C(){S&&(ln(!1,S.toString()),e&&e(S))}A.useEffect(function(){y({type:"RESET"})},[l,y]),A.useEffect(function(){if(!l)return;const L=Fc(l.getTextContent()),j=L;return L.promise.then(U=>{y({type:"RESOLVE",value:U})}).catch(U=>{y({type:"REJECT",error:U})}),()=>nr(j)},[l,y]),A.useEffect(()=>{if(x!==void 0){if(x===!1){C();return}E()}},[x]);const T=A.useCallback(()=>{o&&o()},[o]),R=A.useCallback(k=>{qR(k)||(ln(!1,k.toString()),a&&a(k))},[a]);function N(){const k=w.current;k&&k.classList.add("selecting")}function M(){const k=w.current;k&&k.classList.remove("selecting")}const O=A.useMemo(()=>l.getViewport({scale:p,rotation:h}),[l,h,p]);return A.useLayoutEffect(function(){if(!l||!x)return;const{current:L}=w;if(!L)return;L.innerHTML="";const j=l.streamTextContent({includeMarkedContent:!0}),U={container:L,textContentSource:j,viewport:O},H=new vc(U),$=H;return H.render().then(()=>{const Z=document.createElement("div");Z.className="endOfContent",L.append(Z);const et=L.querySelectorAll('[role="presentation"]');if(t){let ct=0;x.items.forEach((P,z)=>{if(!A6(P))return;const I=et[ct];if(!I)return;const K=t({pageIndex:c,pageNumber:d,itemIndex:z,...P});I.innerHTML=K,ct+=P.str&&P.hasEOL?2:1})}T()}).catch(R),()=>nr($)},[t,R,T,l,c,d,x,O]),v.jsx("div",{className:Lo("react-pdf__Page__textContent","textLayer"),onMouseUp:M,onMouseDown:N,ref:w})}const jA=1;function C6(s){const e={...XR(),...s},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:a=!0,canvasBackground:o,canvasRef:l,children:c,className:d,customRenderer:h,customTextRenderer:p,devicePixelRatio:m,error:y="Failed to load the page.",filterAnnotations:x,height:S,inputRef:w,loading:E="Loading page",noData:C="No page specified.",onGetAnnotationsError:T,onGetAnnotationsSuccess:R,onGetStructTreeError:N,onGetStructTreeSuccess:M,onGetTextError:O,onGetTextSuccess:k,onLoadError:L,onLoadSuccess:j,onRenderAnnotationLayerError:U,onRenderAnnotationLayerSuccess:H,onRenderError:$,onRenderSuccess:Z,onRenderTextLayerError:et,onRenderTextLayerSuccess:ct,pageIndex:P,pageNumber:z,pdf:I,registerPage:K,renderAnnotationLayer:ht=!0,renderForms:B=!1,renderMode:X="canvas",renderTextLayer:tt=!0,rotate:ot,scale:pt=jA,unregisterPage:st,width:nt,...Et}=e,[bt,Nt]=Ro(),{value:q,error:lt}=bt,ut=A.useRef(null);ue(I);const ft=Pa(z)?z-1:P??null,gt=z??(Pa(P)?P+1:null),dt=ot??(q?q.rotate:null),Tt=A.useMemo(()=>{if(!q)return null;let dn=1;const gs=pt??jA;if(nt||S){const mt=q.getViewport({scale:1,rotation:dt});nt?dn=nt/mt.width:S&&(dn=S/mt.height)}return gs*dn},[S,q,dt,pt,nt]);A.useEffect(function(){return()=>{Pa(ft)&&a&&st&&st(ft)}},[a,I,ft,st]);function kt(){if(j){if(!q||!Tt)return;j(Zg(q,Tt))}if(a&&K){if(!Pa(ft)||!ut.current)return;K(ft,ut.current)}}function Kt(){lt&&(ln(!1,lt.toString()),L&&L(lt))}A.useEffect(function(){Nt({type:"RESET"})},[Nt,I,ft]),A.useEffect(function(){if(!I||!gt)return;const gs=Fc(I.getPage(gt)),mt=gs;return gs.promise.then(fe=>{Nt({type:"RESOLVE",value:fe})}).catch(fe=>{Nt({type:"REJECT",error:fe})}),()=>nr(mt)},[Nt,I,gt]),A.useEffect(()=>{if(q!==void 0){if(q===!1){Kt();return}kt()}},[q,Tt]);const Zt=A.useMemo(()=>Pa(ft)&&gt&&Pa(dt)&&Pa(Tt)?{_className:n,canvasBackground:o,customTextRenderer:p,devicePixelRatio:m,filterAnnotations:x,onGetAnnotationsError:T,onGetAnnotationsSuccess:R,onGetStructTreeError:N,onGetStructTreeSuccess:M,onGetTextError:O,onGetTextSuccess:k,onRenderAnnotationLayerError:U,onRenderAnnotationLayerSuccess:H,onRenderError:$,onRenderSuccess:Z,onRenderTextLayerError:et,onRenderTextLayerSuccess:ct,page:q,pageIndex:ft,pageNumber:gt,renderForms:B,renderTextLayer:tt,rotate:dt,scale:Tt}:null,[n,o,p,m,x,T,R,N,M,O,k,U,H,$,Z,et,ct,q,ft,gt,B,tt,dt,Tt]),Mn=A.useMemo(()=>VR(Et,()=>q&&(Tt?Zg(q,Tt):void 0)),[Et,q,Tt]),Yn=`${ft}@${Tt}/${dt}`;function pa(){switch(X){case"custom":return ue(h),v.jsx(h,{},`${Yn}_custom`);case"none":return null;default:return v.jsx(S6,{canvasRef:l},`${Yn}_canvas`)}}function Ke(){return tt?v.jsx(E6,{},`${Yn}_text`):null}function Uo(){return ht?v.jsx(g6,{},`${Yn}_annotations`):null}function rr(){function dn(mt){return!!mt?.page}if(!dn(Zt))throw new Error("page is undefined");const gs=typeof c=="function"?c(Zt):c;return v.jsxs(WR.Provider,{value:Zt,children:[pa(),Ke(),Uo(),gs]})}function or(){return gt?I===null||q===void 0||q===null?v.jsx(So,{type:"loading",children:typeof E=="function"?E():E}):I===!1||q===!1?v.jsx(So,{type:"error",children:typeof y=="function"?y():y}):rr():v.jsx(So,{type:"no-data",children:typeof C=="function"?C():C})}return v.jsx("div",{className:Lo(n,d),"data-page-number":gt,ref:YR(w,ut),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Tt}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Mn,children:or()})}d6();ia.workerSrc="pdf.worker.mjs";ia.workerSrc=`//unpkg.com/pdfjs-dist@${vv}/build/pdf.worker.min.mjs`;const BA=[{value:"top-left",label:"-"},{value:"top-center",label:"-"},{value:"top-right",label:"-"},{value:"center",label:""},{value:"bottom-left",label:"-"},{value:"bottom-center",label:"-"},{value:"bottom-right",label:"-"},{value:"custom",label:""}];function T6({documentName:s,pdfUrl:t,onClose:e,onStampApplied:n}){const[a,o]=A.useState([]),[l,c]=A.useState(null),[d,h]=A.useState(1),[p,m]=A.useState(""),[y,x]=A.useState("bottom-right"),S=.15,[w,E]=A.useState([]),[C,T]=A.useState(!0),[R,N]=A.useState(!1),[M,O]=A.useState({x:50,y:50}),[k,L]=A.useState(!1),[j,U]=A.useState({x:0,y:0}),[H,$]=A.useState(null),[Z,et]=A.useState({}),[ct,P]=A.useState({}),z=A.useRef(null),I=A.useRef(null),[K,ht]=A.useState({width:0,height:0}),B=q=>{if(!q)return console.warn("getFullImageUrl: empty imageUrl"),"";if(q.startsWith("http://")||q.startsWith("https://"))return console.log("getFullImageUrl: already full URL:",q),q;if(q.includes(window.location.origin))return console.log("getFullImageUrl: URL contains origin:",q),q;if(q.startsWith("/api/")){const ut=`${window.location.origin}${q}`;return console.log("getFullImageUrl: API endpoint:",ut),ut}const lt=`${window.location.origin}${q.startsWith("/")?"":"/"}${q}`;return console.log("getFullImageUrl: constructed URL:",lt,"from:",q),lt};A.useEffect(()=>{async function q(){try{const[lt,ut]=await Promise.all([zt.getStamps(),zt.getPdfInfo(s)]);console.log("Loaded stamps:",lt),lt.forEach((dt,Tt)=>{const kt=dt.stamp_image?B(dt.stamp_image):"NO URL";console.log(`Stamp ${Tt+1} (${dt.name}):`,{title:dt.title,stamp_image:dt.stamp_image,fullUrl:kt})}),o(lt),c(ut);const ft={},gt={};if(await Promise.all(lt.map(async dt=>{if(dt.stamp_image){try{const kt=await zt.getStampPreview(dt.name,s);gt[dt.name]=kt}catch(kt){console.warn(`Failed to load preview for stamp ${dt.name}:`,kt),gt[dt.name]=B(dt.stamp_image)}const Tt=gt[dt.name]||B(dt.stamp_image);try{const kt=new Image;await new Promise((Kt,Zt)=>{kt.onload=()=>{ft[dt.stamp_image]={width:kt.width,height:kt.height},Kt(null)},kt.onerror=Zt,kt.src=Tt})}catch(kt){console.warn(`Failed to load image dimensions for stamp ${dt.name}:`,kt),ft[dt.stamp_image]={width:150,height:50}}}})),et(ft),P(gt),lt.length>0){m(lt[0].name);const dt=lt[0];if(console.log("Selected first stamp:",dt),dt.stamp_image){const Tt=B(dt.stamp_image);console.log("First stamp image URL:",{original:dt.stamp_image,full:Tt})}else console.warn("First stamp has no stamp_image!")}}catch(lt){console.error("Failed to load data:",lt)}finally{T(!1)}}q()},[s]);const X=A.useCallback(({width:q,height:lt})=>{ht({width:q,height:lt})},[]),tt=()=>{if(!p)return;const q=a.find(gt=>gt.name===p);if(!q)return;let lt,ut;if(y==="custom")if(H&&l?.pages[d-1]){const gt=l.pages[d-1],dt=K.width/gt.width,Tt=K.height/gt.height;lt=H.x/dt,ut=(K.height-H.y)/Tt}else M.x&&M.y&&(lt=M.x,ut=M.y);const ft={id:`stamp-${Date.now()}`,stamp_name:p,stamp_title:q.title,stamp_image:q.stamp_image,page_number:d-1,position:y,scale:S,x:lt,y:ut};if(E([...w,ft]),y==="custom"&&K.width&&K.height){const gt=l?.pages[d-1];if(gt){const dt=K.width/2,Tt=K.height/2;$({x:dt,y:Tt}),O({x:gt.width/2,y:gt.height/2})}}else $(null)},ot=q=>{E(w.filter(lt=>lt.id!==q))},pt=async()=>{if(w.length!==0){N(!0);try{const q=w.map(ut=>({stamp_name:ut.stamp_name,page_number:ut.page_number,position:ut.position,x:ut.x,y:ut.y,scale:ut.scale}));console.log("Applying stamps:",q);const lt=await zt.applyStamps(s,q);if(console.log("Apply stamps result:",lt),lt&&lt.success)n();else{const ut=lt?.message||"   ";alert(ut),console.error("Failed to apply stamps:",lt)}}catch(q){const lt=q?.message||"    ";alert(lt),console.error("Failed to apply stamps:",q)}finally{N(!1)}}},st=q=>{if(y!=="custom"||!z.current||!p||q.target.closest(".stamp-preview-draggable"))return;const lt=z.current.getBoundingClientRect(),ut=q.clientX-lt.left,ft=q.clientY-lt.top;$({x:ut,y:ft});const gt=l?.pages[d-1];if(gt){const dt=K.width/gt.width,Tt=K.height/gt.height,kt=ut/dt,Kt=(K.height-ft)/Tt;O({x:kt,y:Kt})}else{const dt=ut/lt.width*595,Tt=(lt.height-ft)/lt.height*842;O({x:dt,y:Tt})}},nt=q=>{if(y!=="custom"||!p||!I.current)return;q.preventDefault(),L(!0);const lt=I.current.getBoundingClientRect();U({x:q.clientX-lt.left-lt.width/2,y:q.clientY-lt.top-lt.height/2})};A.useEffect(()=>{if(y==="custom"&&p&&z.current&&K.width&&K.height){const q=l?.pages[d-1];if(q&&M.x&&M.y){const lt=K.width/q.width,ut=K.height/q.height,ft=M.x*lt,gt=K.height-M.y*ut;$({x:ft,y:gt})}else H||$({x:K.width/2,y:K.height/2})}else y!=="custom"&&$(null)},[y,p,M,d,K,l]),A.useEffect(()=>{if(y==="custom"&&p&&K.width&&K.height){H||$({x:K.width/2,y:K.height/2});const q=l?.pages[d-1];q&&(!M.x||!M.y)&&O({x:q.width/2,y:q.height/2})}},[y,p,K,l,d]),A.useEffect(()=>{if(k){const q=ut=>{if(!z.current)return;const ft=z.current.getBoundingClientRect(),gt=ut.clientX-ft.left-j.x,dt=ut.clientY-ft.top-j.y,Tt=Math.max(0,Math.min(gt,ft.width)),kt=Math.max(0,Math.min(dt,ft.height));$({x:Tt,y:kt});const Kt=l?.pages[d-1];if(Kt){const Zt=K.width/Kt.width,Mn=K.height/Kt.height,Yn=Tt/Zt,pa=(K.height-kt)/Mn;O({x:Yn,y:pa})}},lt=()=>{L(!1)};return window.addEventListener("mousemove",q),window.addEventListener("mouseup",lt),()=>{window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",lt)}}},[k,j,K,l,d]);const Et=w.filter(q=>q.page_number===d-1),bt=q=>{if(!K.width||!K.height)return{};const lt=l?.pages[q.page_number];if(!lt)return{};const ut=K.width/lt.width,ft=K.height/lt.height,gt=Z[q.stamp_image]||{width:150,height:50},dt=gt.width*q.scale*ut,Tt=gt.height*q.scale*ft,kt=20*ut;let Kt=0,Zt=0;switch(q.position){case"top-left":Kt=kt,Zt=kt;break;case"top-center":Kt=(K.width-dt)/2,Zt=kt;break;case"top-right":Kt=K.width-dt-kt,Zt=kt;break;case"center":Kt=(K.width-dt)/2,Zt=(K.height-Tt)/2;break;case"bottom-left":Kt=kt,Zt=K.height-Tt-kt;break;case"bottom-center":Kt=(K.width-dt)/2,Zt=K.height-Tt-kt;break;case"bottom-right":Kt=K.width-dt-kt,Zt=K.height-Tt-kt;break;case"custom":if(q.x!==void 0&&q.y!==void 0){const Mn=q.x*ut,Yn=K.height-q.y*ft;Kt=Mn-dt/2,Zt=Yn-Tt/2}break}return{left:`${Kt}px`,top:`${Zt}px`,width:`${dt}px`,height:`${Tt}px`}},Nt=()=>{if(!p||!K.width||!K.height)return null;const q=l?.pages[d-1];if(!q)return null;const lt=K.width/q.width,ut=K.height/q.height,ft=a.find(Mn=>Mn.name===p),gt=ft?.stamp_image?Z[ft.stamp_image]||{width:150,height:50}:{width:150,height:50},dt=gt.width*S*lt,Tt=gt.height*S*ut,kt=20*lt;let Kt=0,Zt=0;switch(y){case"top-left":Kt=kt,Zt=kt;break;case"top-center":Kt=(K.width-dt)/2,Zt=kt;break;case"top-right":Kt=K.width-dt-kt,Zt=kt;break;case"center":Kt=(K.width-dt)/2,Zt=(K.height-Tt)/2;break;case"bottom-left":Kt=kt,Zt=K.height-Tt-kt;break;case"bottom-center":Kt=(K.width-dt)/2,Zt=K.height-Tt-kt;break;case"bottom-right":Kt=K.width-dt-kt,Zt=K.height-Tt-kt;break;case"custom":return H?{left:`${H.x}px`,top:`${H.y}px`,width:`${dt}px`,height:`${Tt}px`,transform:"translate(-50%, -50%)"}:null}return{left:`${Kt}px`,top:`${Zt}px`,width:`${dt}px`,height:`${Tt}px`}};return C?v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-white rounded-lg p-8",children:[v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),v.jsx("p",{className:"mt-4 text-gray-600",children:"..."})]})}):v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] flex flex-col",children:[v.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[v.jsx("h2",{className:"text-xl font-semibold",children:"   PDF"}),v.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full",children:v.jsx(sa,{className:"w-5 h-5"})})]}),v.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[v.jsxs("div",{className:"flex-1 p-4 overflow-auto bg-gray-100",children:[v.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[v.jsx(Jt,{variant:"outline",size:"sm",onClick:()=>h(q=>Math.max(1,q-1)),disabled:d<=1,children:v.jsx(PF,{className:"w-4 h-4"})}),v.jsxs("span",{className:"text-sm",children:[" ",d,"  ",l?.page_count||1]}),v.jsx(Jt,{variant:"outline",size:"sm",onClick:()=>h(q=>Math.min(l?.page_count||1,q+1)),disabled:d>=(l?.page_count||1),children:v.jsx(BF,{className:"w-4 h-4"})})]}),v.jsxs("div",{ref:z,className:"relative inline-block mx-auto cursor-crosshair",onClick:st,style:{userSelect:"none"},children:[v.jsx(m6,{file:t,loading:v.jsx("div",{className:"p-8 text-center",children:" PDF..."}),children:v.jsx(C6,{pageNumber:d,width:500,onLoadSuccess:X,renderTextLayer:!1,renderAnnotationLayer:!1})}),Et.map(q=>v.jsx("div",{className:"absolute pointer-events-none border-2 border-dashed border-blue-500 bg-blue-100/30 z-10",style:bt(q),children:v.jsx("img",{src:ct[q.stamp_name]||B(q.stamp_image),alt:q.stamp_title,className:"w-full h-full object-contain opacity-70"})},q.id)),p&&Nt()&&v.jsxs("div",{className:`absolute pointer-events-none border-2 border-dashed border-green-500 bg-green-100/30 z-20 ${y==="custom"?"stamp-preview-draggable cursor-move bg-yellow-50/90 rounded shadow-lg pointer-events-auto":""}`,style:Nt(),ref:y==="custom"?I:void 0,onMouseDown:y==="custom"?nt:void 0,children:[y==="custom"&&v.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap pointer-events-none z-20",children:"   "}),(()=>{const q=a.find(ut=>ut.name===p);if(!q||!q.stamp_image)return v.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"  "});const lt=ct[q.name]||B(q.stamp_image);return v.jsx("img",{src:lt,alt:"Preview",className:`w-full h-full object-contain ${y==="custom"?"":"opacity-70"}`,onError:ut=>{console.error("Failed to load preview stamp image:",lt);const ft=ut.target;ft.style.display="none";const gt=ft.parentElement;if(gt&&!gt.querySelector(".error-placeholder")){const dt=document.createElement("div");dt.className="error-placeholder text-center text-gray-400 text-sm py-4",dt.textContent="  ",gt.appendChild(dt)}},onLoad:ut=>{const ft=ut.target;ft.style.display="block";const dt=ft.parentElement?.querySelector(".error-placeholder");dt&&dt.remove()}})})()]})]})]}),v.jsxs("div",{className:"w-80 p-4 border-l flex flex-col",children:[v.jsx("h3",{className:"font-medium mb-4",children:" "}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),v.jsxs(us,{value:p,onValueChange:m,children:[v.jsx(Hn,{children:v.jsx(ds,{placeholder:" "})}),v.jsx($n,{children:a.map(q=>v.jsx(pn,{value:q.name,children:q.title},q.name))})]}),p&&v.jsx("div",{className:"mt-2 p-2 border rounded bg-gray-50 min-h-[80px] flex items-center justify-center relative",children:(()=>{const q=a.find(ut=>ut.name===p);if(!q)return v.jsx("div",{className:"text-center text-gray-400 text-sm py-4",children:"  "});const lt=q.stamp_image?ct[q.name]||B(q.stamp_image):"";return lt?v.jsxs(v.Fragment,{children:[v.jsx("img",{src:lt,alt:"Preview",className:"max-w-full max-h-20 mx-auto",onError:ut=>{console.error("Failed to load stamp image:",lt);const ft=ut.target;ft.style.display="none";const gt=ft.parentElement;if(gt&&!gt.querySelector(".preview-placeholder")){const dt=document.createElement("div");dt.className="preview-placeholder text-center text-gray-400 text-sm py-4",dt.textContent="  ",gt.appendChild(dt)}},onLoad:ut=>{const ft=ut.target,dt=ft.parentElement?.querySelector(".preview-placeholder");dt&&dt.remove(),ft.style.display="block"}},lt),!lt&&v.jsx("div",{className:"text-center text-gray-400 text-sm py-4",children:"URL  "})]}):v.jsx("div",{className:"text-center text-gray-400 text-sm py-4",children:"  "})})()})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),v.jsxs(us,{value:y,onValueChange:x,children:[v.jsx(Hn,{children:v.jsx(ds,{})}),v.jsx($n,{children:BA.map(q=>v.jsx(pn,{value:q.value,children:q.label},q.value))})]}),y==="custom"&&v.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[v.jsx(x3,{className:"w-3 h-3 inline mr-1"}),"  PDF      "]})]}),v.jsx("div",{className:"mb-4",children:v.jsxs("label",{className:"block text-sm font-medium mb-1",children:[": ",S.toFixed(1),"x (",Math.round(S*100),"%   )"]})}),v.jsxs("div",{className:"mb-4",children:[v.jsxs(Jt,{onClick:tt,disabled:!p||y==="custom"&&!H,className:"w-full",children:[v.jsx(ZC,{className:"w-4 h-4 mr-2"})," "]}),y==="custom"&&!H&&v.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"     PDF"})]}),v.jsxs("div",{className:"flex-1 overflow-auto",children:[v.jsxs("h4",{className:"font-medium mb-2 text-sm",children:["  (",w.length,")"]}),w.length===0?v.jsx("p",{className:"text-sm text-gray-500",children:"  "}):v.jsx("div",{className:"space-y-2",children:w.map(q=>v.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm",children:[v.jsxs("div",{children:[v.jsx("div",{className:"font-medium",children:q.stamp_title}),v.jsxs("div",{className:"text-xs text-gray-500",children:[". ",q.page_number+1," | ",BA.find(lt=>lt.value===q.position)?.label]})]}),v.jsx("button",{onClick:()=>ot(q.id),className:"p-1 hover:bg-red-100 rounded text-red-600",children:v.jsx(JC,{className:"w-4 h-4"})})]},q.id))})]})]})]}),v.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t",children:[v.jsx(Jt,{variant:"outline",onClick:e,children:""}),v.jsx(Jt,{onClick:pt,disabled:w.length===0||R,children:R?"...":" "})]})]})})}function _6({document:s,loading:t}){const{t:e}=_s(),[n,a]=A.useState("document"),[o,l]=A.useState(null),[c,d]=A.useState(!1),[h,p]=A.useState(0);A.useEffect(()=>{(async()=>{if(!s){l(null);return}try{const R=await zt.getDocument(s.name);l(R)}catch(R){console.error("Failed to load full document:",R),l(s)}})()},[s?.name,s?.modified,s?.status,s?.director_approved,s?.director_rejected,s?.signatures?.length]);const m=()=>{if(!o)return[];const T=[];return o.executor&&T.push(o.executor),o.co_executors&&o.co_executors.forEach(R=>{R.user&&!T.includes(R.user)&&T.push(R.user)}),T},y=()=>!o||!o.signatures?[]:o.signatures.map(T=>T.user),x=()=>{const T=m(),R=y();if(T.length===0)return{signed:0,total:0,percentage:0};const N=R.length,M=T.length,O=N/M*100;return{signed:N,total:M,percentage:O}},S=()=>{if(!o)return[];const T=[{label:" ",status:"completed",date:o.creation,icon:Gn}];if(o.status===""||o.status_name==="")T.push({label:"   ",status:"pending",date:void 0,icon:D3});else if(o.director_approved)T.push({label:" ",status:"completed",date:o.director_decision_date,icon:oo});else if(o.director_rejected)return T.push({label:" ",status:"rejected",date:o.director_decision_date,icon:_g}),T;if(o.status===" "||o.status_name===" "||o.status===""||o.status_name===""){const R=x();T.push({label:`  (${R.signed}/${R.total})`,status:o.status===""||o.status_name===""?"completed":"pending",date:o.status===""||o.status_name===""?o.modified:void 0,icon:Dd})}return(o.status===""||o.status_name==="")&&T.push({label:"",status:"completed",date:o.modified,icon:b1}),T};if(t)return v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsx("div",{className:"text-muted-foreground",children:e("documentContent.loading")})});if(!s)return v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[v.jsx(Gn,{className:"w-16 h-16 text-muted-foreground mb-4"}),v.jsx("h2",{className:"text-xl font-semibold mb-2",children:e("documentContent.noDocumentSelected")}),v.jsx("p",{className:"text-muted-foreground",children:e("documentContent.selectDocumentMessage")})]});const w=o||s,E=S(),C=x();return v.jsxs("div",{className:"h-full flex flex-col",children:[v.jsx("div",{className:"border-b px-6 pt-2",children:v.jsxs("div",{className:"flex gap-6",children:[v.jsx("button",{onClick:()=>a("document"),className:`relative pb-3 px-1 text-sm font-medium transition-colors ${n==="document"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"}`,children:e("documentContent.tabs.document")}),v.jsxs("button",{onClick:()=>a("signatures"),className:`relative pb-3 px-1 text-sm font-medium transition-colors ${n==="signatures"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"}`,children:[e("documentContent.tabs.signatures")," (",C.signed,"/",C.total,")"]}),v.jsx("button",{onClick:()=>a("history"),className:`relative pb-3 px-1 text-sm font-medium transition-colors ${n==="history"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"}`,children:e("documentContent.tabs.history")})]})}),v.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar-blue",children:[n==="document"&&v.jsxs(v.Fragment,{children:[w.main_document?v.jsxs("div",{className:"bg-white border rounded-lg shadow-sm mb-6",children:[v.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[v.jsx("h3",{className:"text-sm font-medium",children:" "}),w.main_document.toLowerCase().endsWith(".pdf")&&v.jsxs(Jt,{variant:"outline",size:"sm",onClick:()=>d(!0),children:[v.jsx(j3,{className:"w-4 h-4 mr-2"})," "]})]}),v.jsx("div",{className:"w-full",style:{height:"800px"},children:v.jsx("iframe",{src:`${w.main_document}?t=${Date.now()}#toolbar=0`,className:"w-full h-full border-0",title:"Document Preview"},`pdf-${h}-${w.main_document}`)})]}):v.jsxs("div",{className:"bg-white border rounded-lg shadow-sm mb-6 p-12 text-center text-muted-foreground",children:[v.jsx(Gn,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),v.jsx("p",{children:"  "})]}),w.attachments&&w.attachments.length>0&&v.jsxs("div",{className:"bg-white border rounded-lg shadow-sm mb-6",children:[v.jsx("div",{className:"p-4 border-b",children:v.jsx("h3",{className:"text-sm font-medium",children:""})}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full",children:[v.jsx("thead",{className:"bg-muted/50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"text-left p-3 text-xs font-medium text-muted-foreground",children:""}),v.jsx("th",{className:"text-left p-3 text-xs font-medium text-muted-foreground",children:""}),v.jsx("th",{className:"text-right p-3 text-xs font-medium text-muted-foreground",children:""})]})}),v.jsx("tbody",{children:w.attachments.map((T,R)=>{const N=T.file_size?`${(T.file_size/1024).toFixed(2)} KB`:"-";return v.jsxs("tr",{className:"border-t hover:bg-muted/30",children:[v.jsx("td",{className:"p-3",children:v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(Gn,{className:"w-4 h-4 text-muted-foreground"}),v.jsx("span",{className:"text-sm",children:T.file_name||` ${R+1}`})]})}),v.jsx("td",{className:"p-3 text-sm text-muted-foreground",children:N}),v.jsx("td",{className:"p-3 text-right",children:v.jsx("a",{href:T.attachment,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline text-sm",children:""})})]},R)})})]})})]}),v.jsx("div",{className:"mt-8 border-t pt-6",children:v.jsx(XU,{doctype:"EDO Document",docname:w.name})})]}),n==="signatures"&&v.jsxs("div",{className:"space-y-6",children:[w.status!==""&&w.status_name!==""&&v.jsxs(qa,{className:"border-2 shadow-md",children:[v.jsx(lo,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 border-b py-3",children:v.jsxs(co,{className:"text-sm flex items-center gap-2",children:[v.jsx(b1,{className:"w-4 h-4 text-blue-600"})," "]})}),v.jsx(Xa,{className:"pt-4 pb-4",children:v.jsx("div",{className:"space-y-4",children:E.map((T,R)=>{const N=T.icon;return v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("div",{className:`relative p-1.5 rounded-full transition-all ${T.status==="completed"?"bg-green-100 dark:bg-green-900/30 ring-2 ring-green-500":T.status==="rejected"?"bg-red-100 dark:bg-red-900/30 ring-2 ring-red-500":"bg-gray-100 dark:bg-gray-800 ring-2 ring-gray-300 dark:ring-gray-700"}`,children:v.jsx(N,{className:`w-4 h-4 ${T.status==="completed"?"text-green-600 dark:text-green-400":T.status==="rejected"?"text-red-600 dark:text-red-400":"text-gray-400"}`})}),R<E.length-1&&v.jsx("div",{className:`w-0.5 h-8 mt-1 transition-all ${T.status==="completed"?"bg-gradient-to-b from-green-500 to-green-300":T.status==="rejected"?"bg-gradient-to-b from-red-500 to-red-300":"bg-gray-300 dark:bg-gray-700"}`})]}),v.jsxs("div",{className:"flex-1 pt-0.5",children:[v.jsx("p",{className:`font-medium text-sm transition-colors ${T.status==="completed"?"text-green-700 dark:text-green-400":T.status==="rejected"?"text-red-700 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:T.label}),T.date&&v.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5 flex items-center gap-1",children:[v.jsx(Qd,{className:"w-3 h-3"}),new Date(T.date).toLocaleString("ru-RU")]})]})]},R)})})})]}),v.jsxs(qa,{className:"border-2 shadow-lg",children:[v.jsx(lo,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 border-b",children:v.jsxs(co,{className:"text-base flex items-center gap-2",children:[v.jsx(Dd,{className:"w-5 h-5 text-blue-600"})," "]})}),v.jsxs(Xa,{className:"pt-6",children:[C.total>0?v.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 rounded-lg border-2 border-blue-200 dark:border-blue-800",children:[v.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[v.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:" "}),v.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:[C.signed,"  ",C.total]})]}),v.jsx(sR,{value:C.percentage,className:"h-2"})]}):v.jsx("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-800",children:v.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"     "})}),v.jsx("div",{className:"space-y-3",children:m().length>0?m().map(T=>{const R=w.signatures?.find(M=>M.user===T),N=w.executor===T?{name:w.executor_full_name||T,image:w.executor_image}:w.co_executors?.find(M=>M.user===T)?{name:w.co_executors.find(M=>M.user===T)?.user_full_name||T,image:w.co_executors.find(M=>M.user===T)?.user_image}:{name:T,image:void 0};return v.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-lg border-2 transition-all ${R?"bg-green-50 dark:bg-green-950/30 border-green-200 dark:border-green-800 shadow-sm":"bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-800"}`,children:[N.image?v.jsx("img",{src:N.image,alt:N.name,className:"w-12 h-12 rounded-full ring-2 ring-offset-2 ring-blue-500"}):v.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-white font-bold text-base ring-2 ring-offset-2 ring-blue-500",children:N.name.charAt(0).toUpperCase()}),v.jsxs("div",{className:"flex-1",children:[v.jsx("p",{className:"font-semibold text-sm text-gray-800 dark:text-gray-200",children:N.name}),R?v.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[v.jsxs("p",{className:"flex items-center gap-1",children:[v.jsx(oo,{className:"w-3 h-3 text-green-600"}),": ",R.signed_at?new Date(R.signed_at).toLocaleString("ru-RU"):""]}),R.comment&&v.jsx("p",{className:"mt-1 p-2 bg-white dark:bg-gray-800 rounded text-gray-700 dark:text-gray-300 text-xs",children:R.comment})]}):v.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:" "})]}),R?v.jsx("div",{className:"p-1.5 bg-green-100 dark:bg-green-900/50 rounded-full",children:v.jsx(oo,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}):v.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center",children:v.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-300 dark:bg-gray-600"})})]},T)}):v.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[v.jsx(Dd,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),v.jsx("p",{className:"text-sm",children:"  "})]})})]})]})]}),n==="history"&&v.jsxs(qa,{className:"border-2 shadow-lg",children:[v.jsx(lo,{className:"bg-gradient-to-r from-slate-50 to-gray-50 dark:from-slate-900 dark:to-gray-900 border-b",children:v.jsxs(co,{className:"text-base flex items-center gap-2",children:[v.jsx(i3,{className:"w-5 h-5 text-gray-600"})," "]})}),v.jsx(Xa,{className:"pt-6",children:v.jsx("div",{className:"space-y-4",children:E.map((T,R)=>{const N=T.icon;return v.jsxs("div",{className:"flex items-start gap-3 pb-4 border-b last:border-0 last:pb-0",children:[v.jsx("div",{className:`p-1.5 rounded-full ${T.status==="completed"?"bg-green-100 dark:bg-green-900/30":T.status==="rejected"?"bg-red-100 dark:bg-red-900/30":"bg-gray-100 dark:bg-gray-800"}`,children:v.jsx(N,{className:`w-4 h-4 ${T.status==="completed"?"text-green-600 dark:text-green-400":T.status==="rejected"?"text-red-600 dark:text-red-400":"text-gray-400"}`})}),v.jsxs("div",{className:"flex-1",children:[v.jsx("p",{className:`font-medium text-sm ${T.status==="completed"?"text-green-700 dark:text-green-400":T.status==="rejected"?"text-red-700 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:T.label}),T.date&&v.jsxs("p",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-1",children:[v.jsx(Qd,{className:"w-3 h-3"}),new Date(T.date).toLocaleString("ru-RU")]})]})]},R)})})})]})]}),c&&w.main_document&&v.jsx(T6,{documentName:w.name,pdfUrl:w.main_document,onClose:()=>d(!1),onStampApplied:async()=>{if(d(!1),s)try{await new Promise(R=>setTimeout(R,500));const T=await zt.getDocument(s.name);l(T),p(R=>R+1),console.log("Document reloaded after stamp application:",T),console.log("New main_document:",T.main_document)}catch(T){console.error("Failed to reload document after stamp application:",T),alert(" ,     .  .")}}})]})}function R6({document:s,canEdit:t=!1,onEdit:e,onDocumentUpdate:n}){const{t:a,i18n:o}=_s(),[l,c]=A.useState(!1),[d,h]=A.useState(!1),[p,m]=A.useState(!1),[y,x]=A.useState(!1),[S,w]=A.useState(!1),[E,C]=A.useState(""),[T,R]=A.useState(!1);A.useEffect(()=>{s&&N()},[s?.name,s?.status,s?.director_approved,s?.director_rejected]);const N=async()=>{if(s)try{const[$,Z]=await Promise.all([zt.canDirectorApprove(),zt.canExecutorSign(s.name)]);c($),h(Z),console.log("=== PERMISSIONS DEBUG ==="),console.log("canApprove:",$),console.log("canSign:",Z),console.log("document.status:",s.status),console.log("document.status_name:",s.status_name),console.log("=======================")}catch($){console.error("Failed to check permissions:",$)}},M=async()=>{if(s)try{if(R(!0),await zt.directorApproveDocument(s.name,E),m(!1),C(""),n){const $=await zt.getDocument(s.name);n($)}await N()}catch($){alert($ instanceof Error?$.message:"  ")}finally{R(!1)}},O=async()=>{if(s)try{if(R(!0),await zt.directorRejectDocument(s.name,E),x(!1),C(""),n){const $=await zt.getDocument(s.name);n($)}await N()}catch($){alert($ instanceof Error?$.message:"  ")}finally{R(!1)}},k=async()=>{if(s)try{if(R(!0),await zt.executorSignDocument(s.name,E),w(!1),C(""),n){const $=await zt.getDocument(s.name);n($)}await N()}catch($){alert($ instanceof Error?$.message:"  ")}finally{R(!1)}};if(!s)return null;const L=$=>$===a("documents.status.signed")||$===""||$===""||$===""?"text-green-600":$===a("documents.status.pending")||$===" "||$===" "?"text-orange-500":$===a("documents.status.archived")||$===""?"text-gray-500":$===""?"text-red-600":"text-gray-500",j=$=>{const Z=o.language==="uz"?"uz-UZ":o.language==="en"?"en-US":"ru-RU";return new Date($).toLocaleDateString(Z)},U=s.status===""||s.status_name==="",H=s.status===" "||s.status_name===" ";return v.jsxs("div",{className:"h-full overflow-y-auto custom-scrollbar",children:[v.jsxs("div",{className:"p-4 space-y-6",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:a("documentMetadata.documentInfo")}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-muted-foreground",children:a("documentMetadata.documentNumber")}),v.jsx("p",{className:"font-medium",children:s.name})]}),s.title&&v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-muted-foreground",children:""}),v.jsx("p",{className:"font-medium",children:s.title})]}),s.incoming_number&&v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-muted-foreground",children:" "}),v.jsx("p",{className:"font-medium",children:s.incoming_number})]}),s.incoming_date&&v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-muted-foreground",children:" "}),v.jsx("p",{className:"font-medium",children:j(s.incoming_date)})]}),s.outgoing_number&&v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-muted-foreground",children:" "}),v.jsx("p",{className:"font-medium",children:s.outgoing_number})]}),s.outgoing_date&&v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-muted-foreground",children:" "}),v.jsx("p",{className:"font-medium",children:j(s.outgoing_date)})]}),s.document_type&&v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-muted-foreground",children:a("documentMetadata.documentType")}),v.jsx("p",{className:"font-medium",children:s.document_type_name||s.document_type})]}),s.correspondent&&v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-muted-foreground",children:""}),v.jsx("p",{className:"font-medium",children:s.correspondent_name||s.correspondent})]}),s.priority&&v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-muted-foreground",children:""}),v.jsx("p",{className:"font-medium",children:s.priority_name||s.priority})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-muted-foreground",children:a("documentMetadata.status")}),v.jsx("p",{className:`font-medium ${L(s.status)}`,children:s.status_name||s.status})]}),s.classification&&v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-muted-foreground",children:""}),v.jsx("p",{className:"font-medium",children:s.classification_name||s.classification})]}),s.delivery_method&&v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-muted-foreground",children:" "}),v.jsx("p",{className:"font-medium",children:s.delivery_method_name||s.delivery_method})]}),s.creation&&v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-muted-foreground",children:" "}),v.jsx("p",{className:"font-medium",children:j(s.creation)})]})]})]}),(s.executor||s.co_executors&&s.co_executors.length>0)&&v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:""}),v.jsxs("div",{className:"space-y-3",children:[s.executor&&v.jsxs("div",{className:"flex items-center gap-3 p-2 bg-blue-50 rounded-lg",children:[s.executor_image?v.jsx("img",{src:s.executor_image,alt:"",className:"w-8 h-8 rounded-full object-cover"}):v.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center",children:v.jsx(Rg,{className:"w-4 h-4 text-white"})}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-sm",children:s.executor_full_name||s.executor}),v.jsx("p",{className:"text-xs text-blue-600",children:""})]})]}),s.co_executors&&s.co_executors.length>0&&v.jsxs("div",{className:"space-y-2",children:[v.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[v.jsx(Dd,{className:"w-3 h-3"})," (",s.co_executors.length,")"]}),s.co_executors.map(($,Z)=>v.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[$.user_image?v.jsx("img",{src:$.user_image,alt:"",className:"w-7 h-7 rounded-full object-cover"}):v.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-400 flex items-center justify-center",children:v.jsx(Rg,{className:"w-3 h-3 text-white"})}),v.jsx("p",{className:"text-sm",children:$.user_full_name||$.user})]},Z))]})]})]}),s.brief_content&&v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:" "}),v.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.brief_content})]}),s.director_comment&&v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:" "}),v.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/30 rounded-lg border border-blue-200 dark:border-blue-800",children:v.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.director_comment})})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:a("documentMetadata.actions")}),v.jsxs("div",{className:"space-y-2",children:[l&&U&&v.jsxs(v.Fragment,{children:[v.jsxs(Jt,{className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white shadow-md",size:"sm",onClick:()=>m(!0),children:[v.jsx(oo,{className:"w-4 h-4 mr-2"}),""]}),v.jsxs(Jt,{variant:"destructive",className:"w-full bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 shadow-md",size:"sm",onClick:()=>x(!0),children:[v.jsx(_g,{className:"w-4 h-4 mr-2"}),""]})]}),d&&H&&v.jsxs(Jt,{className:"w-full bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white shadow-md",size:"sm",onClick:()=>w(!0),children:[v.jsx(v1,{className:"w-4 h-4 mr-2"})," "]}),t&&v.jsxs(Jt,{className:"w-full bg-blue-600 hover:bg-blue-700",size:"sm",onClick:e,children:[v.jsx(O3,{className:"w-4 h-4"}),""]}),v.jsxs(Jt,{variant:"outline",className:"w-full",size:"sm",children:[v.jsx(WF,{className:"w-4 h-4"}),a("documentMetadata.download")]}),v.jsxs(Jt,{variant:"outline",className:"w-full",size:"sm",children:[v.jsx(E3,{className:"w-4 h-4"}),a("documentMetadata.print")]})]})]})]}),v.jsx(nc,{open:p,onOpenChange:m,children:v.jsxs(mo,{className:"sm:max-w-[500px]",children:[v.jsxs(go,{children:[v.jsxs(yo,{className:"flex items-center gap-2 text-xl",children:[v.jsx(oo,{className:"w-6 h-6 text-green-600"})," "]}),v.jsx(jd,{className:"text-base pt-2",children:" ,     ?      ."})]}),v.jsx("div",{className:"space-y-4 py-4",children:v.jsxs("div",{children:[v.jsx("label",{className:"text-sm font-medium mb-2 block",children:" ()"}),v.jsx(po,{value:E,onChange:$=>C($.target.value),placeholder:" ...",rows:4,className:"resize-none"})]})}),v.jsxs(Pd,{children:[v.jsx(Jt,{variant:"outline",onClick:()=>m(!1),children:""}),v.jsx(Jt,{onClick:M,disabled:T,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700",children:T?"...":""})]})]})}),v.jsx(nc,{open:y,onOpenChange:x,children:v.jsxs(mo,{className:"sm:max-w-[500px]",children:[v.jsxs(go,{children:[v.jsxs(yo,{className:"flex items-center gap-2 text-xl",children:[v.jsx(_g,{className:"w-6 h-6 text-red-600"}),"  "]}),v.jsx(jd,{className:"text-base pt-2",children:" ,       ?       ."})]}),v.jsx("div",{className:"space-y-4 py-4",children:v.jsxs("div",{children:[v.jsx("label",{className:"text-sm font-medium mb-2 block",children:" "}),v.jsx(po,{value:E,onChange:$=>C($.target.value),placeholder:"  ...",rows:4,className:"resize-none"})]})}),v.jsxs(Pd,{children:[v.jsx(Jt,{variant:"outline",onClick:()=>x(!1),children:""}),v.jsx(Jt,{variant:"destructive",onClick:O,disabled:T,className:"bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700",children:T?"...":""})]})]})}),v.jsx(nc,{open:S,onOpenChange:w,children:v.jsxs(mo,{className:"sm:max-w-[500px]",children:[v.jsxs(go,{children:[v.jsxs(yo,{className:"flex items-center gap-2 text-xl",children:[v.jsx(v1,{className:"w-6 h-6 text-blue-600"})," "]}),v.jsx(jd,{className:"text-base pt-2",children:" ,  ,          ."})]}),v.jsx("div",{className:"space-y-4 py-4",children:v.jsxs("div",{children:[v.jsx("label",{className:"text-sm font-medium mb-2 block",children:" ()"}),v.jsx(po,{value:E,onChange:$=>C($.target.value),placeholder:" ...",rows:4,className:"resize-none"})]})}),v.jsxs(Pd,{children:[v.jsx(Jt,{variant:"outline",onClick:()=>w(!1),children:""}),v.jsx(Jt,{onClick:k,disabled:T,className:"bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700",children:T?"...":""})]})]})})]})}function N6({documents:s,onNavigateToDocuments:t}){const{t:e}=_s();return v.jsxs(v.Fragment,{children:[v.jsx(fT,{title:e("dashboard.title"),subtitle:e("dashboard.subtitle")}),v.jsx(Ga.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex-1",children:v.jsx(zI,{documents:s,onNavigateToDocuments:t})},"dashboard")]})}function M6({documents:s,selectedDocument:t,onSelectDocument:e,loadingList:n,loadingDocument:a,error:o,onDocumentsRefresh:l,onFiltersChange:c,canEdit:d,onEditDocument:h}){const{t:p}=_s();return A.useEffect(()=>{s.length>0&&!t&&!n&&e(s[0])},[s,t,n,e]),v.jsxs(v.Fragment,{children:[v.jsx(fT,{title:p("documents.title"),subtitle:p("documents.subtitle")}),v.jsxs(Ga.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex-1 flex overflow-hidden",children:[v.jsx("aside",{className:"w-80 border-r bg-background shrink-0 overflow-hidden",children:v.jsx(UU,{documents:s,selectedDocument:t,onSelectDocument:e,loading:n,error:o,onDocumentsRefresh:l,onFiltersChange:c})}),v.jsx("main",{className:"flex-1 overflow-hidden relative",children:v.jsx(Wd,{mode:"wait",children:v.jsx(Ga.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,ease:"easeInOut"},className:"h-full",children:v.jsx(_6,{document:t,loading:a})},t?.name||"empty")})}),v.jsx("aside",{className:"w-72 border-l bg-background shrink-0 overflow-hidden relative",children:v.jsx(Wd,{mode:"wait",children:v.jsx(Ga.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"h-full",children:v.jsx(R6,{document:t,canEdit:d,onEdit:h})},t?.name||"empty")})})]},"documents")]})}function D6(){const s=iE(),t=ua(),{t:e}=_s(),[n,a]=A.useState([]),[o,l]=A.useState(null),[c,d]=A.useState(!0),[h,p]=A.useState(!1),[m,y]=A.useState(null),[x,S]=A.useState(!1),[w,E]=A.useState(!1),C=t.pathname.startsWith("/documents")?"documents":"dashboard";A.useEffect(()=>{R(),T()},[]);const T=async()=>{try{const L=await zt.canEditDocument();S(L)}catch(L){console.error("Failed to check edit permission:",L)}},R=A.useCallback(async L=>{try{d(!0),y(null);const j=await zt.getDocuments(L);a(j)}catch(j){y(j instanceof Error?j.message:e("documents.loadError"))}finally{d(!1)}},[e]),N=async L=>{l(L),p(!0);try{const j=await zt.getDocument(L.name);l(j)}catch(j){console.error("Failed to load document details:",j)}finally{p(!1)}},M=L=>{L==="dashboard"?(s("/"),l(null)):(s("/documents"),l(null))},O=()=>{o&&E(!0)},k=async L=>{const j=await zt.getDocument(L.name);l(j),R()};return v.jsxs("div",{className:"h-screen flex bg-background",children:[v.jsx(PI,{currentPage:C,onNavigate:M}),v.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:v.jsx(Wd,{mode:"wait",children:v.jsxs(eL,{location:t,children:[v.jsx(ng,{path:"/",element:v.jsx(N6,{documents:n,onNavigateToDocuments:()=>M("documents")})}),v.jsx(ng,{path:"/documents/*",element:v.jsx(M6,{documents:n,selectedDocument:o,onSelectDocument:N,loadingList:c,loadingDocument:h,error:m,onDocumentsRefresh:()=>R(),onFiltersChange:R,canEdit:x,onEditDocument:O})})]},t.pathname)})}),v.jsx(nR,{open:w,onOpenChange:E,editDocument:o,onDocumentUpdated:k})]})}function k6(){return v.jsx(CL,{children:v.jsx(D6,{})})}CM.createRoot(document.getElementById("root")).render(v.jsx(A.StrictMode,{children:v.jsx(k6,{})}));
