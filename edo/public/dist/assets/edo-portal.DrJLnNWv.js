var rS=s=>{throw TypeError(s)};var Em=(s,e,t)=>e.has(s)||rS("Cannot "+t);var wt=(s,e,t)=>(Em(s,e,"read from private field"),t?t.call(s):e.get(s)),Fs=(s,e,t)=>e.has(s)?rS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),On=(s,e,t,n)=>(Em(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),Bs=(s,e,t)=>(Em(s,e,"access private method"),t);var aS=(s,e,t,n)=>({set _(i){On(s,e,i,t)},get _(){return wt(s,e,n)}});function ak(s,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in s)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(s,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}function My(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var _m={exports:{}},Wl={};var oS;function ok(){if(oS)return Wl;oS=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,a){var l=null;if(a!==void 0&&(l=""+a),i.key!==void 0&&(l=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:s,type:n,key:l,ref:i!==void 0?i:null,props:a}}return Wl.Fragment=e,Wl.jsx=t,Wl.jsxs=t,Wl}var lS;function lk(){return lS||(lS=1,_m.exports=ok()),_m.exports}var g=lk(),Tm={exports:{}},Ie={};var cS;function ck(){if(cS)return Ie;cS=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator;function x(L){return L===null||typeof L!="object"?null:(L=y&&L[y]||L["@@iterator"],typeof L=="function"?L:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function E(L,q,te){this.props=L,this.context=q,this.refs=C,this.updater=te||A}E.prototype.isReactComponent={},E.prototype.setState=function(L,q){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,q,"setState")},E.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function _(){}_.prototype=E.prototype;function R(L,q,te){this.props=L,this.context=q,this.refs=C,this.updater=te||A}var N=R.prototype=new _;N.constructor=R,S(N,E.prototype),N.isPureReactComponent=!0;var M=Array.isArray;function j(){}var D={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function I(L,q,te){var oe=te.ref;return{$$typeof:s,type:L,key:q,ref:oe!==void 0?oe:null,props:te}}function U(L,q){return I(L.type,q,L.props)}function $(L){return typeof L=="object"&&L!==null&&L.$$typeof===s}function J(L){var q={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(te){return q[te]})}var ie=/\/+/g;function X(L,q){return typeof L=="object"&&L!==null&&L.key!=null?J(""+L.key):q.toString(36)}function ae(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(j,j):(L.status="pending",L.then(function(q){L.status==="pending"&&(L.status="fulfilled",L.value=q)},function(q){L.status==="pending"&&(L.status="rejected",L.reason=q)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function P(L,q,te,oe,pe){var se=typeof L;(se==="undefined"||se==="boolean")&&(L=null);var Q=!1;if(L===null)Q=!0;else switch(se){case"bigint":case"string":case"number":Q=!0;break;case"object":switch(L.$$typeof){case s:case e:Q=!0;break;case f:return Q=L._init,P(Q(L._payload),q,te,oe,pe)}}if(Q)return pe=pe(L),Q=oe===""?"."+X(L,0):oe,M(pe)?(te="",Q!=null&&(te=Q.replace(ie,"$&/")+"/"),P(pe,q,te,"",function(Re){return Re})):pe!=null&&($(pe)&&(pe=U(pe,te+(pe.key==null||L&&L.key===pe.key?"":(""+pe.key).replace(ie,"$&/")+"/")+Q)),q.push(pe)),1;Q=0;var ye=oe===""?".":oe+":";if(M(L))for(var ve=0;ve<L.length;ve++)oe=L[ve],se=ye+X(oe,ve),Q+=P(oe,q,te,se,pe);else if(ve=x(L),typeof ve=="function")for(L=ve.call(L),ve=0;!(oe=L.next()).done;)oe=oe.value,se=ye+X(oe,ve++),Q+=P(oe,q,te,se,pe);else if(se==="object"){if(typeof L.then=="function")return P(ae(L),q,te,oe,pe);throw q=String(L),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Q}function F(L,q,te){if(L==null)return L;var oe=[],pe=0;return P(L,oe,"","",function(se){return q.call(te,se,pe++)}),oe}function B(L){if(L._status===-1){var q=L._result;q=q(),q.then(function(te){(L._status===0||L._status===-1)&&(L._status=1,L._result=te)},function(te){(L._status===0||L._status===-1)&&(L._status=2,L._result=te)}),L._status===-1&&(L._status=0,L._result=q)}if(L._status===1)return L._result.default;throw L._result}var V=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},de={map:F,forEach:function(L,q,te){F(L,function(){q.apply(this,arguments)},te)},count:function(L){var q=0;return F(L,function(){q++}),q},toArray:function(L){return F(L,function(q){return q})||[]},only:function(L){if(!$(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Ie.Activity=m,Ie.Children=de,Ie.Component=E,Ie.Fragment=t,Ie.Profiler=i,Ie.PureComponent=R,Ie.StrictMode=n,Ie.Suspense=d,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(L){return D.H.useMemoCache(L)}},Ie.cache=function(L){return function(){return L.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(L,q,te){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var oe=S({},L.props),pe=L.key;if(q!=null)for(se in q.key!==void 0&&(pe=""+q.key),q)!O.call(q,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&q.ref===void 0||(oe[se]=q[se]);var se=arguments.length-2;if(se===1)oe.children=te;else if(1<se){for(var Q=Array(se),ye=0;ye<se;ye++)Q[ye]=arguments[ye+2];oe.children=Q}return I(L.type,pe,oe)},Ie.createContext=function(L){return L={$$typeof:l,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:a,_context:L},L},Ie.createElement=function(L,q,te){var oe,pe={},se=null;if(q!=null)for(oe in q.key!==void 0&&(se=""+q.key),q)O.call(q,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(pe[oe]=q[oe]);var Q=arguments.length-2;if(Q===1)pe.children=te;else if(1<Q){for(var ye=Array(Q),ve=0;ve<Q;ve++)ye[ve]=arguments[ve+2];pe.children=ye}if(L&&L.defaultProps)for(oe in Q=L.defaultProps,Q)pe[oe]===void 0&&(pe[oe]=Q[oe]);return I(L,se,pe)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(L){return{$$typeof:c,render:L}},Ie.isValidElement=$,Ie.lazy=function(L){return{$$typeof:f,_payload:{_status:-1,_result:L},_init:B}},Ie.memo=function(L,q){return{$$typeof:h,type:L,compare:q===void 0?null:q}},Ie.startTransition=function(L){var q=D.T,te={};D.T=te;try{var oe=L(),pe=D.S;pe!==null&&pe(te,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(j,V)}catch(se){V(se)}finally{q!==null&&te.types!==null&&(q.types=te.types),D.T=q}},Ie.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ie.use=function(L){return D.H.use(L)},Ie.useActionState=function(L,q,te){return D.H.useActionState(L,q,te)},Ie.useCallback=function(L,q){return D.H.useCallback(L,q)},Ie.useContext=function(L){return D.H.useContext(L)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(L,q){return D.H.useDeferredValue(L,q)},Ie.useEffect=function(L,q){return D.H.useEffect(L,q)},Ie.useEffectEvent=function(L){return D.H.useEffectEvent(L)},Ie.useId=function(){return D.H.useId()},Ie.useImperativeHandle=function(L,q,te){return D.H.useImperativeHandle(L,q,te)},Ie.useInsertionEffect=function(L,q){return D.H.useInsertionEffect(L,q)},Ie.useLayoutEffect=function(L,q){return D.H.useLayoutEffect(L,q)},Ie.useMemo=function(L,q){return D.H.useMemo(L,q)},Ie.useOptimistic=function(L,q){return D.H.useOptimistic(L,q)},Ie.useReducer=function(L,q,te){return D.H.useReducer(L,q,te)},Ie.useRef=function(L){return D.H.useRef(L)},Ie.useState=function(L){return D.H.useState(L)},Ie.useSyncExternalStore=function(L,q,te){return D.H.useSyncExternalStore(L,q,te)},Ie.useTransition=function(){return D.H.useTransition()},Ie.version="19.2.3",Ie}var uS;function Rh(){return uS||(uS=1,Tm.exports=ck()),Tm.exports}var w=Rh();const lr=My(w),Dy=ak({__proto__:null,default:lr},[w]);var Rm={exports:{}},Kl={},Nm={exports:{}},Mm={};var dS;function uk(){return dS||(dS=1,(function(s){function e(P,F){var B=P.length;P.push(F);e:for(;0<B;){var V=B-1>>>1,de=P[V];if(0<i(de,F))P[V]=F,P[B]=de,B=V;else break e}}function t(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var F=P[0],B=P.pop();if(B!==F){P[0]=B;e:for(var V=0,de=P.length,L=de>>>1;V<L;){var q=2*(V+1)-1,te=P[q],oe=q+1,pe=P[oe];if(0>i(te,B))oe<de&&0>i(pe,te)?(P[V]=pe,P[oe]=B,V=oe):(P[V]=te,P[q]=B,V=q);else if(oe<de&&0>i(pe,B))P[V]=pe,P[oe]=B,V=oe;else break e}}return F}function i(P,F){var B=P.sortIndex-F.sortIndex;return B!==0?B:P.id-F.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;s.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();s.unstable_now=function(){return l.now()-c}}var d=[],h=[],f=1,m=null,y=3,x=!1,A=!1,S=!1,C=!1,E=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function N(P){for(var F=t(h);F!==null;){if(F.callback===null)n(h);else if(F.startTime<=P)n(h),F.sortIndex=F.expirationTime,e(d,F);else break;F=t(h)}}function M(P){if(S=!1,N(P),!A)if(t(d)!==null)A=!0,j||(j=!0,J());else{var F=t(h);F!==null&&ae(M,F.startTime-P)}}var j=!1,D=-1,O=5,I=-1;function U(){return C?!0:!(s.unstable_now()-I<O)}function $(){if(C=!1,j){var P=s.unstable_now();I=P;var F=!0;try{e:{A=!1,S&&(S=!1,_(D),D=-1),x=!0;var B=y;try{t:{for(N(P),m=t(d);m!==null&&!(m.expirationTime>P&&U());){var V=m.callback;if(typeof V=="function"){m.callback=null,y=m.priorityLevel;var de=V(m.expirationTime<=P);if(P=s.unstable_now(),typeof de=="function"){m.callback=de,N(P),F=!0;break t}m===t(d)&&n(d),N(P)}else n(d);m=t(d)}if(m!==null)F=!0;else{var L=t(h);L!==null&&ae(M,L.startTime-P),F=!1}}break e}finally{m=null,y=B,x=!1}F=void 0}}finally{F?J():j=!1}}}var J;if(typeof R=="function")J=function(){R($)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,X=ie.port2;ie.port1.onmessage=$,J=function(){X.postMessage(null)}}else J=function(){E($,0)};function ae(P,F){D=E(function(){P(s.unstable_now())},F)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(P){P.callback=null},s.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<P?Math.floor(1e3/P):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_next=function(P){switch(y){case 1:case 2:case 3:var F=3;break;default:F=y}var B=y;y=F;try{return P()}finally{y=B}},s.unstable_requestPaint=function(){C=!0},s.unstable_runWithPriority=function(P,F){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var B=y;y=P;try{return F()}finally{y=B}},s.unstable_scheduleCallback=function(P,F,B){var V=s.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?V+B:V):B=V,P){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=B+de,P={id:f++,callback:F,priorityLevel:P,startTime:B,expirationTime:de,sortIndex:-1},B>V?(P.sortIndex=B,e(h,P),t(d)===null&&P===t(h)&&(S?(_(D),D=-1):S=!0,ae(M,B-V))):(P.sortIndex=de,e(d,P),A||x||(A=!0,j||(j=!0,J()))),P},s.unstable_shouldYield=U,s.unstable_wrapCallback=function(P){var F=y;return function(){var B=y;y=F;try{return P.apply(this,arguments)}finally{y=B}}}})(Mm)),Mm}var hS;function dk(){return hS||(hS=1,Nm.exports=uk()),Nm.exports}var Dm={exports:{}},ln={};var fS;function hk(){if(fS)return ln;fS=1;var s=Rh();function e(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(d,h,f){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:d,containerInfo:h,implementation:f}}var l=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ln.createPortal=function(d,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(d,h,null,f)},ln.flushSync=function(d){var h=l.T,f=n.p;try{if(l.T=null,n.p=2,d)return d()}finally{l.T=h,n.p=f,n.d.f()}},ln.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(d,h))},ln.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},ln.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var f=h.as,m=c(f,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?n.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:m,integrity:y,fetchPriority:x}):f==="script"&&n.d.X(d,{crossOrigin:m,integrity:y,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},ln.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=c(h.as,h.crossOrigin);n.d.M(d,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(d)},ln.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,m=c(f,h.crossOrigin);n.d.L(d,f,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},ln.preloadModule=function(d,h){if(typeof d=="string")if(h){var f=c(h.as,h.crossOrigin);n.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(d)},ln.requestFormReset=function(d){n.d.r(d)},ln.unstable_batchedUpdates=function(d,h){return d(h)},ln.useFormState=function(d,h,f){return l.H.useFormState(d,h,f)},ln.useFormStatus=function(){return l.H.useHostTransitionStatus()},ln.version="19.2.3",ln}var pS;function EC(){if(pS)return Dm.exports;pS=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Dm.exports=hk(),Dm.exports}var mS;function fk(){if(mS)return Kl;mS=1;var s=dk(),e=Rh(),t=EC();function n(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function c(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(a(r)!==r)throw Error(n(188))}function h(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(n(188));return o!==r?null:r}for(var u=r,p=o;;){var v=u.return;if(v===null)break;var b=v.alternate;if(b===null){if(p=v.return,p!==null){u=p;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===u)return d(v),r;if(b===p)return d(v),o;b=b.sibling}throw Error(n(188))}if(u.return!==p.return)u=v,p=b;else{for(var T=!1,k=v.child;k;){if(k===u){T=!0,u=v,p=b;break}if(k===p){T=!0,p=v,u=b;break}k=k.sibling}if(!T){for(k=b.child;k;){if(k===u){T=!0,u=b,p=v;break}if(k===p){T=!0,p=b,u=v;break}k=k.sibling}if(!T)throw Error(n(189))}}if(u.alternate!==p)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?r:o}function f(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=f(r),o!==null)return o;r=r.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),R=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function J(r){return r===null||typeof r!="object"?null:(r=$&&r[$]||r["@@iterator"],typeof r=="function"?r:null)}var ie=Symbol.for("react.client.reference");function X(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ie?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case E:return"Profiler";case C:return"StrictMode";case M:return"Suspense";case j:return"SuspenseList";case I:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case A:return"Portal";case R:return r.displayName||"Context";case _:return(r._context.displayName||"Context")+".Consumer";case N:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case D:return o=r.displayName||null,o!==null?o:X(r.type)||"Memo";case O:o=r._payload,r=r._init;try{return X(r(o))}catch{}}return null}var ae=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},V=[],de=-1;function L(r){return{current:r}}function q(r){0>de||(r.current=V[de],V[de]=null,de--)}function te(r,o){de++,V[de]=r.current,r.current=o}var oe=L(null),pe=L(null),se=L(null),Q=L(null);function ye(r,o){switch(te(se,o),te(pe,r),te(oe,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?Rw(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=Rw(o),r=Nw(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}q(oe),te(oe,r)}function ve(){q(oe),q(pe),q(se)}function Re(r){r.memoizedState!==null&&te(Q,r);var o=oe.current,u=Nw(o,r.type);o!==u&&(te(pe,r),te(oe,u))}function Y(r){pe.current===r&&(q(oe),q(pe)),Q.current===r&&(q(Q),Gl._currentValue=B)}var ue,fe;function me(r){if(ue===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);ue=o&&o[1]||"",fe=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ue+r+fe}var ee=!1;function he(r,o){if(!r||ee)return"";ee=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(o){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ne){var Z=ne}Reflect.construct(r,[],ce)}else{try{ce.call()}catch(ne){Z=ne}r.call(ce.prototype)}}else{try{throw Error()}catch(ne){Z=ne}(ce=r())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ne){if(ne&&Z&&typeof ne.stack=="string")return[ne.stack,Z.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=p.DetermineComponentFrameRoot(),T=b[0],k=b[1];if(T&&k){var z=T.split(`
`),K=k.split(`
`);for(v=p=0;p<z.length&&!z[p].includes("DetermineComponentFrameRoot");)p++;for(;v<K.length&&!K[v].includes("DetermineComponentFrameRoot");)v++;if(p===z.length||v===K.length)for(p=z.length-1,v=K.length-1;1<=p&&0<=v&&z[p]!==K[v];)v--;for(;1<=p&&0<=v;p--,v--)if(z[p]!==K[v]){if(p!==1||v!==1)do if(p--,v--,0>v||z[p]!==K[v]){var re=`
`+z[p].replace(" at new "," at ");return r.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",r.displayName)),re}while(1<=p&&0<=v);break}}}finally{ee=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?me(u):""}function _e(r,o){switch(r.tag){case 26:case 27:case 5:return me(r.type);case 16:return me("Lazy");case 13:return r.child!==o&&o!==null?me("Suspense Fallback"):me("Suspense");case 19:return me("SuspenseList");case 0:case 15:return he(r.type,!1);case 11:return he(r.type.render,!1);case 1:return he(r.type,!0);case 31:return me("Activity");default:return""}}function Oe(r){try{var o="",u=null;do o+=_e(r,u),u=r,r=r.return;while(r);return o}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var Ye=Object.prototype.hasOwnProperty,nt=s.unstable_scheduleCallback,Fn=s.unstable_cancelCallback,Jn=s.unstable_shouldYield,Mr=s.unstable_requestPaint,Gt=s.unstable_now,il=s.unstable_getCurrentPriorityLevel,ni=s.unstable_ImmediatePriority,_a=s.unstable_UserBlockingPriority,mn=s.unstable_NormalPriority,ks=s.unstable_LowPriority,on=s.unstable_IdlePriority,Pi=s.log,df=s.unstable_setDisableYieldValue,Dr=null,gn=null;function js(r){if(typeof Pi=="function"&&df(r),gn&&typeof gn.setStrictMode=="function")try{gn.setStrictMode(Dr,r)}catch{}}var yn=Math.clz32?Math.clz32:ge,hf=Math.log,lu=Math.LN2;function ge(r){return r>>>=0,r===0?32:31-(hf(r)/lu|0)|0}var bt=256,Bn=262144,es=4194304;function Ut(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Li(r,o,u){var p=r.pendingLanes;if(p===0)return 0;var v=0,b=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var k=p&134217727;return k!==0?(p=k&~b,p!==0?v=Ut(p):(T&=k,T!==0?v=Ut(T):u||(u=k&~r,u!==0&&(v=Ut(u))))):(k=p&~b,k!==0?v=Ut(k):T!==0?v=Ut(T):u||(u=p&~r,u!==0&&(v=Ut(u)))),v===0?0:o!==0&&o!==v&&(o&b)===0&&(b=v&-v,u=o&-o,b>=u||b===32&&(u&4194048)!==0)?o:v}function kr(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function XM(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cb(){var r=es;return es<<=1,(es&62914560)===0&&(es=4194304),r}function ff(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function rl(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function YM(r,o,u,p,v,b){var T=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var k=r.entanglements,z=r.expirationTimes,K=r.hiddenUpdates;for(u=T&~u;0<u;){var re=31-yn(u),ce=1<<re;k[re]=0,z[re]=-1;var Z=K[re];if(Z!==null)for(K[re]=null,re=0;re<Z.length;re++){var ne=Z[re];ne!==null&&(ne.lane&=-536870913)}u&=~ce}p!==0&&ub(r,p,0),b!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=b&~(T&~o))}function ub(r,o,u){r.pendingLanes|=o,r.suspendedLanes&=~o;var p=31-yn(o);r.entangledLanes|=o,r.entanglements[p]=r.entanglements[p]|1073741824|u&261930}function db(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var p=31-yn(u),v=1<<p;v&o|r[p]&o&&(r[p]|=o),u&=~v}}function hb(r,o){var u=o&-o;return u=(u&42)!==0?1:pf(u),(u&(r.suspendedLanes|o))!==0?0:u}function pf(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function mf(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function fb(){var r=F.p;return r!==0?r:(r=window.event,r===void 0?32:Zw(r.type))}function pb(r,o){var u=F.p;try{return F.p=r,o()}finally{F.p=u}}var Ii=Math.random().toString(36).slice(2),Zt="__reactFiber$"+Ii,Tn="__reactProps$"+Ii,Ta="__reactContainer$"+Ii,gf="__reactEvents$"+Ii,WM="__reactListeners$"+Ii,KM="__reactHandles$"+Ii,mb="__reactResources$"+Ii,al="__reactMarker$"+Ii;function yf(r){delete r[Zt],delete r[Tn],delete r[gf],delete r[WM],delete r[KM]}function Ra(r){var o=r[Zt];if(o)return o;for(var u=r.parentNode;u;){if(o=u[Ta]||u[Zt]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=Lw(r);r!==null;){if(u=r[Zt])return u;r=Lw(r)}return o}r=u,u=r.parentNode}return null}function Na(r){if(r=r[Zt]||r[Ta]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function ol(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(n(33))}function Ma(r){var o=r[mb];return o||(o=r[mb]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function qt(r){r[al]=!0}var gb=new Set,yb={};function jr(r,o){Da(r,o),Da(r+"Capture",o)}function Da(r,o){for(yb[r]=o,r=0;r<o.length;r++)gb.add(o[r])}var QM=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vb={},bb={};function ZM(r){return Ye.call(bb,r)?!0:Ye.call(vb,r)?!1:QM.test(r)?bb[r]=!0:(vb[r]=!0,!1)}function cu(r,o,u){if(ZM(o))if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var p=o.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+u)}}function uu(r,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+u)}}function si(r,o,u,p){if(p===null)r.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(o,u,""+p)}}function ts(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function xb(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function JM(r,o,u){var p=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var v=p.get,b=p.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return v.call(this)},set:function(T){u=""+T,b.call(this,T)}}),Object.defineProperty(r,o,{enumerable:p.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function vf(r){if(!r._valueTracker){var o=xb(r)?"checked":"value";r._valueTracker=JM(r,o,""+r[o])}}function wb(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return r&&(p=xb(r)?r.checked?"true":"false":r.value),r=p,r!==u?(o.setValue(r),!0):!1}function du(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var eD=/[\n"\\]/g;function ns(r){return r.replace(eD,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function bf(r,o,u,p,v,b,T,k){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),o!=null?T==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+ts(o)):r.value!==""+ts(o)&&(r.value=""+ts(o)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),o!=null?xf(r,T,ts(o)):u!=null?xf(r,T,ts(u)):p!=null&&r.removeAttribute("value"),v==null&&b!=null&&(r.defaultChecked=!!b),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?r.name=""+ts(k):r.removeAttribute("name")}function Sb(r,o,u,p,v,b,T,k){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(r.type=b),o!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){vf(r);return}u=u!=null?""+ts(u):"",o=o!=null?""+ts(o):u,k||o===r.value||(r.value=o),r.defaultValue=o}p=p??v,p=typeof p!="function"&&typeof p!="symbol"&&!!p,r.checked=k?r.checked:!!p,r.defaultChecked=!!p,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T),vf(r)}function xf(r,o,u){o==="number"&&du(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function ka(r,o,u,p){if(r=r.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<r.length;u++)v=o.hasOwnProperty("$"+r[u].value),r[u].selected!==v&&(r[u].selected=v),v&&p&&(r[u].defaultSelected=!0)}else{for(u=""+ts(u),o=null,v=0;v<r.length;v++){if(r[v].value===u){r[v].selected=!0,p&&(r[v].defaultSelected=!0);return}o!==null||r[v].disabled||(o=r[v])}o!==null&&(o.selected=!0)}}function Ab(r,o,u){if(o!=null&&(o=""+ts(o),o!==r.value&&(r.value=o),u==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=u!=null?""+ts(u):""}function Cb(r,o,u,p){if(o==null){if(p!=null){if(u!=null)throw Error(n(92));if(ae(p)){if(1<p.length)throw Error(n(93));p=p[0]}u=p}u==null&&(u=""),o=u}u=ts(o),r.defaultValue=u,p=r.textContent,p===u&&p!==""&&p!==null&&(r.value=p),vf(r)}function ja(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var tD=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Eb(r,o,u){var p=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?p?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":p?r.setProperty(o,u):typeof u!="number"||u===0||tD.has(o)?o==="float"?r.cssFloat=u:r[o]=(""+u).trim():r[o]=u+"px"}function _b(r,o,u){if(o!=null&&typeof o!="object")throw Error(n(62));if(r=r.style,u!=null){for(var p in u)!u.hasOwnProperty(p)||o!=null&&o.hasOwnProperty(p)||(p.indexOf("--")===0?r.setProperty(p,""):p==="float"?r.cssFloat="":r[p]="");for(var v in o)p=o[v],o.hasOwnProperty(v)&&u[v]!==p&&Eb(r,v,p)}else for(var b in o)o.hasOwnProperty(b)&&Eb(r,b,o[b])}function wf(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nD=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sD=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hu(r){return sD.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ii(){}var Sf=null;function Af(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Oa=null,Pa=null;function Tb(r){var o=Na(r);if(o&&(r=o.stateNode)){var u=r[Tn]||null;e:switch(r=o.stateNode,o.type){case"input":if(bf(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+ns(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==r&&p.form===r.form){var v=p[Tn]||null;if(!v)throw Error(n(90));bf(p,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<u.length;o++)p=u[o],p.form===r.form&&wb(p)}break e;case"textarea":Ab(r,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&ka(r,!!u.multiple,o,!1)}}}var Cf=!1;function Rb(r,o,u){if(Cf)return r(o,u);Cf=!0;try{var p=r(o);return p}finally{if(Cf=!1,(Oa!==null||Pa!==null)&&(Ju(),Oa&&(o=Oa,r=Pa,Pa=Oa=null,Tb(o),r)))for(o=0;o<r.length;o++)Tb(r[o])}}function ll(r,o){var u=r.stateNode;if(u===null)return null;var p=u[Tn]||null;if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(r=r.type,p=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!p;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ef=!1;if(ri)try{var cl={};Object.defineProperty(cl,"passive",{get:function(){Ef=!0}}),window.addEventListener("test",cl,cl),window.removeEventListener("test",cl,cl)}catch{Ef=!1}var Fi=null,_f=null,fu=null;function Nb(){if(fu)return fu;var r,o=_f,u=o.length,p,v="value"in Fi?Fi.value:Fi.textContent,b=v.length;for(r=0;r<u&&o[r]===v[r];r++);var T=u-r;for(p=1;p<=T&&o[u-p]===v[b-p];p++);return fu=v.slice(r,1<p?1-p:void 0)}function pu(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function mu(){return!0}function Mb(){return!1}function Rn(r){function o(u,p,v,b,T){this._reactName=u,this._targetInst=v,this.type=p,this.nativeEvent=b,this.target=T,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(u=r[k],this[k]=u?u(b):b[k]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?mu:Mb,this.isPropagationStopped=Mb,this}return m(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=mu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=mu)},persist:function(){},isPersistent:mu}),o}var Or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gu=Rn(Or),ul=m({},Or,{view:0,detail:0}),iD=Rn(ul),Tf,Rf,dl,yu=m({},ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mf,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==dl&&(dl&&r.type==="mousemove"?(Tf=r.screenX-dl.screenX,Rf=r.screenY-dl.screenY):Rf=Tf=0,dl=r),Tf)},movementY:function(r){return"movementY"in r?r.movementY:Rf}}),Db=Rn(yu),rD=m({},yu,{dataTransfer:0}),aD=Rn(rD),oD=m({},ul,{relatedTarget:0}),Nf=Rn(oD),lD=m({},Or,{animationName:0,elapsedTime:0,pseudoElement:0}),cD=Rn(lD),uD=m({},Or,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),dD=Rn(uD),hD=m({},Or,{data:0}),kb=Rn(hD),fD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gD(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=mD[r])?!!o[r]:!1}function Mf(){return gD}var yD=m({},ul,{key:function(r){if(r.key){var o=fD[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=pu(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?pD[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mf,charCode:function(r){return r.type==="keypress"?pu(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?pu(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),vD=Rn(yD),bD=m({},yu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jb=Rn(bD),xD=m({},ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mf}),wD=Rn(xD),SD=m({},Or,{propertyName:0,elapsedTime:0,pseudoElement:0}),AD=Rn(SD),CD=m({},yu,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ED=Rn(CD),_D=m({},Or,{newState:0,oldState:0}),TD=Rn(_D),RD=[9,13,27,32],Df=ri&&"CompositionEvent"in window,hl=null;ri&&"documentMode"in document&&(hl=document.documentMode);var ND=ri&&"TextEvent"in window&&!hl,Ob=ri&&(!Df||hl&&8<hl&&11>=hl),Pb=" ",Lb=!1;function Ib(r,o){switch(r){case"keyup":return RD.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fb(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var La=!1;function MD(r,o){switch(r){case"compositionend":return Fb(o);case"keypress":return o.which!==32?null:(Lb=!0,Pb);case"textInput":return r=o.data,r===Pb&&Lb?null:r;default:return null}}function DD(r,o){if(La)return r==="compositionend"||!Df&&Ib(r,o)?(r=Nb(),fu=_f=Fi=null,La=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ob&&o.locale!=="ko"?null:o.data;default:return null}}var kD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bb(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!kD[r.type]:o==="textarea"}function zb(r,o,u,p){Oa?Pa?Pa.push(p):Pa=[p]:Oa=p,o=ad(o,"onChange"),0<o.length&&(u=new gu("onChange","change",null,u,p),r.push({event:u,listeners:o}))}var fl=null,pl=null;function jD(r){Sw(r,0)}function vu(r){var o=ol(r);if(wb(o))return r}function Ub(r,o){if(r==="change")return o}var Vb=!1;if(ri){var kf;if(ri){var jf="oninput"in document;if(!jf){var Hb=document.createElement("div");Hb.setAttribute("oninput","return;"),jf=typeof Hb.oninput=="function"}kf=jf}else kf=!1;Vb=kf&&(!document.documentMode||9<document.documentMode)}function $b(){fl&&(fl.detachEvent("onpropertychange",Gb),pl=fl=null)}function Gb(r){if(r.propertyName==="value"&&vu(pl)){var o=[];zb(o,pl,r,Af(r)),Rb(jD,o)}}function OD(r,o,u){r==="focusin"?($b(),fl=o,pl=u,fl.attachEvent("onpropertychange",Gb)):r==="focusout"&&$b()}function PD(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return vu(pl)}function LD(r,o){if(r==="click")return vu(o)}function ID(r,o){if(r==="input"||r==="change")return vu(o)}function FD(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var zn=typeof Object.is=="function"?Object.is:FD;function ml(r,o){if(zn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var v=u[p];if(!Ye.call(o,v)||!zn(r[v],o[v]))return!1}return!0}function qb(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Xb(r,o){var u=qb(r);r=0;for(var p;u;){if(u.nodeType===3){if(p=r+u.textContent.length,r<=o&&p>=o)return{node:u,offset:o-r};r=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=qb(u)}}function Yb(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?Yb(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function Wb(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=du(r.document);o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=du(r.document)}return o}function Of(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var BD=ri&&"documentMode"in document&&11>=document.documentMode,Ia=null,Pf=null,gl=null,Lf=!1;function Kb(r,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Lf||Ia==null||Ia!==du(p)||(p=Ia,"selectionStart"in p&&Of(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),gl&&ml(gl,p)||(gl=p,p=ad(Pf,"onSelect"),0<p.length&&(o=new gu("onSelect","select",null,o,u),r.push({event:o,listeners:p}),o.target=Ia)))}function Pr(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var Fa={animationend:Pr("Animation","AnimationEnd"),animationiteration:Pr("Animation","AnimationIteration"),animationstart:Pr("Animation","AnimationStart"),transitionrun:Pr("Transition","TransitionRun"),transitionstart:Pr("Transition","TransitionStart"),transitioncancel:Pr("Transition","TransitionCancel"),transitionend:Pr("Transition","TransitionEnd")},If={},Qb={};ri&&(Qb=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function Lr(r){if(If[r])return If[r];if(!Fa[r])return r;var o=Fa[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in Qb)return If[r]=o[u];return r}var Zb=Lr("animationend"),Jb=Lr("animationiteration"),e0=Lr("animationstart"),zD=Lr("transitionrun"),UD=Lr("transitionstart"),VD=Lr("transitioncancel"),t0=Lr("transitionend"),n0=new Map,Ff="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ff.push("scrollEnd");function ws(r,o){n0.set(r,o),jr(o,[r])}var bu=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},ss=[],Ba=0,Bf=0;function xu(){for(var r=Ba,o=Bf=Ba=0;o<r;){var u=ss[o];ss[o++]=null;var p=ss[o];ss[o++]=null;var v=ss[o];ss[o++]=null;var b=ss[o];if(ss[o++]=null,p!==null&&v!==null){var T=p.pending;T===null?v.next=v:(v.next=T.next,T.next=v),p.pending=v}b!==0&&s0(u,v,b)}}function wu(r,o,u,p){ss[Ba++]=r,ss[Ba++]=o,ss[Ba++]=u,ss[Ba++]=p,Bf|=p,r.lanes|=p,r=r.alternate,r!==null&&(r.lanes|=p)}function zf(r,o,u,p){return wu(r,o,u,p),Su(r)}function Ir(r,o){return wu(r,null,null,o),Su(r)}function s0(r,o,u){r.lanes|=u;var p=r.alternate;p!==null&&(p.lanes|=u);for(var v=!1,b=r.return;b!==null;)b.childLanes|=u,p=b.alternate,p!==null&&(p.childLanes|=u),b.tag===22&&(r=b.stateNode,r===null||r._visibility&1||(v=!0)),r=b,b=b.return;return r.tag===3?(b=r.stateNode,v&&o!==null&&(v=31-yn(u),r=b.hiddenUpdates,p=r[v],p===null?r[v]=[o]:p.push(o),o.lane=u|536870912),b):null}function Su(r){if(50<Fl)throw Fl=0,Wp=null,Error(n(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var za={};function HD(r,o,u,p){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(r,o,u,p){return new HD(r,o,u,p)}function Uf(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ai(r,o){var u=r.alternate;return u===null?(u=Un(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function i0(r,o){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,o=u.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Au(r,o,u,p,v,b){var T=0;if(p=r,typeof r=="function")Uf(r)&&(T=1);else if(typeof r=="string")T=Y2(r,u,oe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case I:return r=Un(31,u,o,v),r.elementType=I,r.lanes=b,r;case S:return Fr(u.children,v,b,o);case C:T=8,v|=24;break;case E:return r=Un(12,u,o,v|2),r.elementType=E,r.lanes=b,r;case M:return r=Un(13,u,o,v),r.elementType=M,r.lanes=b,r;case j:return r=Un(19,u,o,v),r.elementType=j,r.lanes=b,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case R:T=10;break e;case _:T=9;break e;case N:T=11;break e;case D:T=14;break e;case O:T=16,p=null;break e}T=29,u=Error(n(130,r===null?"null":typeof r,"")),p=null}return o=Un(T,u,o,v),o.elementType=r,o.type=p,o.lanes=b,o}function Fr(r,o,u,p){return r=Un(7,r,p,o),r.lanes=u,r}function Vf(r,o,u){return r=Un(6,r,null,o),r.lanes=u,r}function r0(r){var o=Un(18,null,null,0);return o.stateNode=r,o}function Hf(r,o,u){return o=Un(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var a0=new WeakMap;function is(r,o){if(typeof r=="object"&&r!==null){var u=a0.get(r);return u!==void 0?u:(o={value:r,source:o,stack:Oe(o)},a0.set(r,o),o)}return{value:r,source:o,stack:Oe(o)}}var Ua=[],Va=0,Cu=null,yl=0,rs=[],as=0,Bi=null,Os=1,Ps="";function oi(r,o){Ua[Va++]=yl,Ua[Va++]=Cu,Cu=r,yl=o}function o0(r,o,u){rs[as++]=Os,rs[as++]=Ps,rs[as++]=Bi,Bi=r;var p=Os;r=Ps;var v=32-yn(p)-1;p&=~(1<<v),u+=1;var b=32-yn(o)+v;if(30<b){var T=v-v%5;b=(p&(1<<T)-1).toString(32),p>>=T,v-=T,Os=1<<32-yn(o)+v|u<<v|p,Ps=b+r}else Os=1<<b|u<<v|p,Ps=r}function $f(r){r.return!==null&&(oi(r,1),o0(r,1,0))}function Gf(r){for(;r===Cu;)Cu=Ua[--Va],Ua[Va]=null,yl=Ua[--Va],Ua[Va]=null;for(;r===Bi;)Bi=rs[--as],rs[as]=null,Ps=rs[--as],rs[as]=null,Os=rs[--as],rs[as]=null}function l0(r,o){rs[as++]=Os,rs[as++]=Ps,rs[as++]=Bi,Os=o.id,Ps=o.overflow,Bi=r}var Jt=null,gt=null,Ze=!1,zi=null,os=!1,qf=Error(n(519));function Ui(r){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vl(is(o,r)),qf}function c0(r){var o=r.stateNode,u=r.type,p=r.memoizedProps;switch(o[Zt]=r,o[Tn]=p,u){case"dialog":Xe("cancel",o),Xe("close",o);break;case"iframe":case"object":case"embed":Xe("load",o);break;case"video":case"audio":for(u=0;u<zl.length;u++)Xe(zl[u],o);break;case"source":Xe("error",o);break;case"img":case"image":case"link":Xe("error",o),Xe("load",o);break;case"details":Xe("toggle",o);break;case"input":Xe("invalid",o),Sb(o,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":Xe("invalid",o);break;case"textarea":Xe("invalid",o),Cb(o,p.value,p.defaultValue,p.children)}u=p.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||p.suppressHydrationWarning===!0||_w(o.textContent,u)?(p.popover!=null&&(Xe("beforetoggle",o),Xe("toggle",o)),p.onScroll!=null&&Xe("scroll",o),p.onScrollEnd!=null&&Xe("scrollend",o),p.onClick!=null&&(o.onclick=ii),o=!0):o=!1,o||Ui(r,!0)}function u0(r){for(Jt=r.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:os=!1;return;case 27:case 3:os=!0;return;default:Jt=Jt.return}}function Ha(r){if(r!==Jt)return!1;if(!Ze)return u0(r),Ze=!0,!1;var o=r.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||um(r.type,r.memoizedProps)),u=!u),u&&gt&&Ui(r),u0(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));gt=Pw(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));gt=Pw(r)}else o===27?(o=gt,tr(r.type)?(r=mm,mm=null,gt=r):gt=o):gt=Jt?cs(r.stateNode.nextSibling):null;return!0}function Br(){gt=Jt=null,Ze=!1}function Xf(){var r=zi;return r!==null&&(kn===null?kn=r:kn.push.apply(kn,r),zi=null),r}function vl(r){zi===null?zi=[r]:zi.push(r)}var Yf=L(null),zr=null,li=null;function Vi(r,o,u){te(Yf,o._currentValue),o._currentValue=u}function ci(r){r._currentValue=Yf.current,q(Yf)}function Wf(r,o,u){for(;r!==null;){var p=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),r===u)break;r=r.return}}function Kf(r,o,u,p){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var b=v.dependencies;if(b!==null){var T=v.child;b=b.firstContext;e:for(;b!==null;){var k=b;b=v;for(var z=0;z<o.length;z++)if(k.context===o[z]){b.lanes|=u,k=b.alternate,k!==null&&(k.lanes|=u),Wf(b.return,u,r),p||(T=null);break e}b=k.next}}else if(v.tag===18){if(T=v.return,T===null)throw Error(n(341));T.lanes|=u,b=T.alternate,b!==null&&(b.lanes|=u),Wf(T,u,r),T=null}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===r){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}}function $a(r,o,u,p){r=null;for(var v=o,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var T=v.alternate;if(T===null)throw Error(n(387));if(T=T.memoizedProps,T!==null){var k=v.type;zn(v.pendingProps.value,T.value)||(r!==null?r.push(k):r=[k])}}else if(v===Q.current){if(T=v.alternate,T===null)throw Error(n(387));T.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(Gl):r=[Gl])}v=v.return}r!==null&&Kf(o,r,u,p),o.flags|=262144}function Eu(r){for(r=r.firstContext;r!==null;){if(!zn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ur(r){zr=r,li=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function en(r){return d0(zr,r)}function _u(r,o){return zr===null&&Ur(r),d0(r,o)}function d0(r,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},li===null){if(r===null)throw Error(n(308));li=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else li=li.next=o;return u}var $D=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(u,p){r.push(p)}};this.abort=function(){o.aborted=!0,r.forEach(function(u){return u()})}},GD=s.unstable_scheduleCallback,qD=s.unstable_NormalPriority,Pt={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qf(){return{controller:new $D,data:new Map,refCount:0}}function bl(r){r.refCount--,r.refCount===0&&GD(qD,function(){r.controller.abort()})}var xl=null,Zf=0,Ga=0,qa=null;function XD(r,o){if(xl===null){var u=xl=[];Zf=0,Ga=tm(),qa={status:"pending",value:void 0,then:function(p){u.push(p)}}}return Zf++,o.then(h0,h0),o}function h0(){if(--Zf===0&&xl!==null){qa!==null&&(qa.status="fulfilled");var r=xl;xl=null,Ga=0,qa=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function YD(r,o){var u=[],p={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return r.then(function(){p.status="fulfilled",p.value=o;for(var v=0;v<u.length;v++)(0,u[v])(o)},function(v){for(p.status="rejected",p.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),p}var f0=P.S;P.S=function(r,o){Kx=Gt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&XD(r,o),f0!==null&&f0(r,o)};var Vr=L(null);function Jf(){var r=Vr.current;return r!==null?r:ht.pooledCache}function Tu(r,o){o===null?te(Vr,Vr.current):te(Vr,o.pool)}function p0(){var r=Jf();return r===null?null:{parent:Pt._currentValue,pool:r}}var Xa=Error(n(460)),ep=Error(n(474)),Ru=Error(n(542)),Nu={then:function(){}};function m0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function g0(r,o,u){switch(u=r[u],u===void 0?r.push(o):u!==o&&(o.then(ii,ii),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,v0(r),r;default:if(typeof o.status=="string")o.then(ii,ii);else{if(r=ht,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=o,r.status="pending",r.then(function(p){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=p}},function(p){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=p}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,v0(r),r}throw $r=o,Xa}}function Hr(r){try{var o=r._init;return o(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?($r=u,Xa):u}}var $r=null;function y0(){if($r===null)throw Error(n(459));var r=$r;return $r=null,r}function v0(r){if(r===Xa||r===Ru)throw Error(n(483))}var Ya=null,wl=0;function Mu(r){var o=wl;return wl+=1,Ya===null&&(Ya=[]),g0(Ya,r,o)}function Sl(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Du(r,o){throw o.$$typeof===y?Error(n(525)):(r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function b0(r){function o(G,H){if(r){var W=G.deletions;W===null?(G.deletions=[H],G.flags|=16):W.push(H)}}function u(G,H){if(!r)return null;for(;H!==null;)o(G,H),H=H.sibling;return null}function p(G){for(var H=new Map;G!==null;)G.key!==null?H.set(G.key,G):H.set(G.index,G),G=G.sibling;return H}function v(G,H){return G=ai(G,H),G.index=0,G.sibling=null,G}function b(G,H,W){return G.index=W,r?(W=G.alternate,W!==null?(W=W.index,W<H?(G.flags|=67108866,H):W):(G.flags|=67108866,H)):(G.flags|=1048576,H)}function T(G){return r&&G.alternate===null&&(G.flags|=67108866),G}function k(G,H,W,le){return H===null||H.tag!==6?(H=Vf(W,G.mode,le),H.return=G,H):(H=v(H,W),H.return=G,H)}function z(G,H,W,le){var Ne=W.type;return Ne===S?re(G,H,W.props.children,le,W.key):H!==null&&(H.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===O&&Hr(Ne)===H.type)?(H=v(H,W.props),Sl(H,W),H.return=G,H):(H=Au(W.type,W.key,W.props,null,G.mode,le),Sl(H,W),H.return=G,H)}function K(G,H,W,le){return H===null||H.tag!==4||H.stateNode.containerInfo!==W.containerInfo||H.stateNode.implementation!==W.implementation?(H=Hf(W,G.mode,le),H.return=G,H):(H=v(H,W.children||[]),H.return=G,H)}function re(G,H,W,le,Ne){return H===null||H.tag!==7?(H=Fr(W,G.mode,le,Ne),H.return=G,H):(H=v(H,W),H.return=G,H)}function ce(G,H,W){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Vf(""+H,G.mode,W),H.return=G,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case x:return W=Au(H.type,H.key,H.props,null,G.mode,W),Sl(W,H),W.return=G,W;case A:return H=Hf(H,G.mode,W),H.return=G,H;case O:return H=Hr(H),ce(G,H,W)}if(ae(H)||J(H))return H=Fr(H,G.mode,W,null),H.return=G,H;if(typeof H.then=="function")return ce(G,Mu(H),W);if(H.$$typeof===R)return ce(G,_u(G,H),W);Du(G,H)}return null}function Z(G,H,W,le){var Ne=H!==null?H.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Ne!==null?null:k(G,H,""+W,le);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case x:return W.key===Ne?z(G,H,W,le):null;case A:return W.key===Ne?K(G,H,W,le):null;case O:return W=Hr(W),Z(G,H,W,le)}if(ae(W)||J(W))return Ne!==null?null:re(G,H,W,le,null);if(typeof W.then=="function")return Z(G,H,Mu(W),le);if(W.$$typeof===R)return Z(G,H,_u(G,W),le);Du(G,W)}return null}function ne(G,H,W,le,Ne){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return G=G.get(W)||null,k(H,G,""+le,Ne);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case x:return G=G.get(le.key===null?W:le.key)||null,z(H,G,le,Ne);case A:return G=G.get(le.key===null?W:le.key)||null,K(H,G,le,Ne);case O:return le=Hr(le),ne(G,H,W,le,Ne)}if(ae(le)||J(le))return G=G.get(W)||null,re(H,G,le,Ne,null);if(typeof le.then=="function")return ne(G,H,W,Mu(le),Ne);if(le.$$typeof===R)return ne(G,H,W,_u(H,le),Ne);Du(H,le)}return null}function we(G,H,W,le){for(var Ne=null,st=null,Ee=H,He=H=0,Ke=null;Ee!==null&&He<W.length;He++){Ee.index>He?(Ke=Ee,Ee=null):Ke=Ee.sibling;var it=Z(G,Ee,W[He],le);if(it===null){Ee===null&&(Ee=Ke);break}r&&Ee&&it.alternate===null&&o(G,Ee),H=b(it,H,He),st===null?Ne=it:st.sibling=it,st=it,Ee=Ke}if(He===W.length)return u(G,Ee),Ze&&oi(G,He),Ne;if(Ee===null){for(;He<W.length;He++)Ee=ce(G,W[He],le),Ee!==null&&(H=b(Ee,H,He),st===null?Ne=Ee:st.sibling=Ee,st=Ee);return Ze&&oi(G,He),Ne}for(Ee=p(Ee);He<W.length;He++)Ke=ne(Ee,G,He,W[He],le),Ke!==null&&(r&&Ke.alternate!==null&&Ee.delete(Ke.key===null?He:Ke.key),H=b(Ke,H,He),st===null?Ne=Ke:st.sibling=Ke,st=Ke);return r&&Ee.forEach(function(ar){return o(G,ar)}),Ze&&oi(G,He),Ne}function De(G,H,W,le){if(W==null)throw Error(n(151));for(var Ne=null,st=null,Ee=H,He=H=0,Ke=null,it=W.next();Ee!==null&&!it.done;He++,it=W.next()){Ee.index>He?(Ke=Ee,Ee=null):Ke=Ee.sibling;var ar=Z(G,Ee,it.value,le);if(ar===null){Ee===null&&(Ee=Ke);break}r&&Ee&&ar.alternate===null&&o(G,Ee),H=b(ar,H,He),st===null?Ne=ar:st.sibling=ar,st=ar,Ee=Ke}if(it.done)return u(G,Ee),Ze&&oi(G,He),Ne;if(Ee===null){for(;!it.done;He++,it=W.next())it=ce(G,it.value,le),it!==null&&(H=b(it,H,He),st===null?Ne=it:st.sibling=it,st=it);return Ze&&oi(G,He),Ne}for(Ee=p(Ee);!it.done;He++,it=W.next())it=ne(Ee,G,He,it.value,le),it!==null&&(r&&it.alternate!==null&&Ee.delete(it.key===null?He:it.key),H=b(it,H,He),st===null?Ne=it:st.sibling=it,st=it);return r&&Ee.forEach(function(rk){return o(G,rk)}),Ze&&oi(G,He),Ne}function ut(G,H,W,le){if(typeof W=="object"&&W!==null&&W.type===S&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case x:e:{for(var Ne=W.key;H!==null;){if(H.key===Ne){if(Ne=W.type,Ne===S){if(H.tag===7){u(G,H.sibling),le=v(H,W.props.children),le.return=G,G=le;break e}}else if(H.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===O&&Hr(Ne)===H.type){u(G,H.sibling),le=v(H,W.props),Sl(le,W),le.return=G,G=le;break e}u(G,H);break}else o(G,H);H=H.sibling}W.type===S?(le=Fr(W.props.children,G.mode,le,W.key),le.return=G,G=le):(le=Au(W.type,W.key,W.props,null,G.mode,le),Sl(le,W),le.return=G,G=le)}return T(G);case A:e:{for(Ne=W.key;H!==null;){if(H.key===Ne)if(H.tag===4&&H.stateNode.containerInfo===W.containerInfo&&H.stateNode.implementation===W.implementation){u(G,H.sibling),le=v(H,W.children||[]),le.return=G,G=le;break e}else{u(G,H);break}else o(G,H);H=H.sibling}le=Hf(W,G.mode,le),le.return=G,G=le}return T(G);case O:return W=Hr(W),ut(G,H,W,le)}if(ae(W))return we(G,H,W,le);if(J(W)){if(Ne=J(W),typeof Ne!="function")throw Error(n(150));return W=Ne.call(W),De(G,H,W,le)}if(typeof W.then=="function")return ut(G,H,Mu(W),le);if(W.$$typeof===R)return ut(G,H,_u(G,W),le);Du(G,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,H!==null&&H.tag===6?(u(G,H.sibling),le=v(H,W),le.return=G,G=le):(u(G,H),le=Vf(W,G.mode,le),le.return=G,G=le),T(G)):u(G,H)}return function(G,H,W,le){try{wl=0;var Ne=ut(G,H,W,le);return Ya=null,Ne}catch(Ee){if(Ee===Xa||Ee===Ru)throw Ee;var st=Un(29,Ee,null,G.mode);return st.lanes=le,st.return=G,st}}}var Gr=b0(!0),x0=b0(!1),Hi=!1;function tp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function np(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function $i(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Gi(r,o,u){var p=r.updateQueue;if(p===null)return null;if(p=p.shared,(rt&2)!==0){var v=p.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),p.pending=o,o=Su(r),s0(r,null,u),o}return wu(r,p,o,u),Su(r)}function Al(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var p=o.lanes;p&=r.pendingLanes,u|=p,o.lanes=u,db(r,u)}}function sp(r,o){var u=r.updateQueue,p=r.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var v=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var T={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?v=b=T:b=b.next=T,u=u.next}while(u!==null);b===null?v=b=o:b=b.next=o}else v=b=o;u={baseState:p.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:p.shared,callbacks:p.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}var ip=!1;function Cl(){if(ip){var r=qa;if(r!==null)throw r}}function El(r,o,u,p){ip=!1;var v=r.updateQueue;Hi=!1;var b=v.firstBaseUpdate,T=v.lastBaseUpdate,k=v.shared.pending;if(k!==null){v.shared.pending=null;var z=k,K=z.next;z.next=null,T===null?b=K:T.next=K,T=z;var re=r.alternate;re!==null&&(re=re.updateQueue,k=re.lastBaseUpdate,k!==T&&(k===null?re.firstBaseUpdate=K:k.next=K,re.lastBaseUpdate=z))}if(b!==null){var ce=v.baseState;T=0,re=K=z=null,k=b;do{var Z=k.lane&-536870913,ne=Z!==k.lane;if(ne?(We&Z)===Z:(p&Z)===Z){Z!==0&&Z===Ga&&(ip=!0),re!==null&&(re=re.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var we=r,De=k;Z=o;var ut=u;switch(De.tag){case 1:if(we=De.payload,typeof we=="function"){ce=we.call(ut,ce,Z);break e}ce=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=De.payload,Z=typeof we=="function"?we.call(ut,ce,Z):we,Z==null)break e;ce=m({},ce,Z);break e;case 2:Hi=!0}}Z=k.callback,Z!==null&&(r.flags|=64,ne&&(r.flags|=8192),ne=v.callbacks,ne===null?v.callbacks=[Z]:ne.push(Z))}else ne={lane:Z,tag:k.tag,payload:k.payload,callback:k.callback,next:null},re===null?(K=re=ne,z=ce):re=re.next=ne,T|=Z;if(k=k.next,k===null){if(k=v.shared.pending,k===null)break;ne=k,k=ne.next,ne.next=null,v.lastBaseUpdate=ne,v.shared.pending=null}}while(!0);re===null&&(z=ce),v.baseState=z,v.firstBaseUpdate=K,v.lastBaseUpdate=re,b===null&&(v.shared.lanes=0),Ki|=T,r.lanes=T,r.memoizedState=ce}}function w0(r,o){if(typeof r!="function")throw Error(n(191,r));r.call(o)}function S0(r,o){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)w0(u[r],o)}var Wa=L(null),ku=L(0);function A0(r,o){r=vi,te(ku,r),te(Wa,o),vi=r|o.baseLanes}function rp(){te(ku,vi),te(Wa,Wa.current)}function ap(){vi=ku.current,q(Wa),q(ku)}var Vn=L(null),ls=null;function qi(r){var o=r.alternate;te(Dt,Dt.current&1),te(Vn,r),ls===null&&(o===null||Wa.current!==null||o.memoizedState!==null)&&(ls=r)}function op(r){te(Dt,Dt.current),te(Vn,r),ls===null&&(ls=r)}function C0(r){r.tag===22?(te(Dt,Dt.current),te(Vn,r),ls===null&&(ls=r)):Xi()}function Xi(){te(Dt,Dt.current),te(Vn,Vn.current)}function Hn(r){q(Vn),ls===r&&(ls=null),q(Dt)}var Dt=L(0);function ju(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||fm(u)||pm(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ui=0,ze=null,lt=null,Lt=null,Ou=!1,Ka=!1,qr=!1,Pu=0,_l=0,Qa=null,WD=0;function Rt(){throw Error(n(321))}function lp(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!zn(r[u],o[u]))return!1;return!0}function cp(r,o,u,p,v,b){return ui=b,ze=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,P.H=r===null||r.memoizedState===null?ox:Cp,qr=!1,b=u(p,v),qr=!1,Ka&&(b=_0(o,u,p,v)),E0(r),b}function E0(r){P.H=Nl;var o=lt!==null&&lt.next!==null;if(ui=0,Lt=lt=ze=null,Ou=!1,_l=0,Qa=null,o)throw Error(n(300));r===null||It||(r=r.dependencies,r!==null&&Eu(r)&&(It=!0))}function _0(r,o,u,p){ze=r;var v=0;do{if(Ka&&(Qa=null),_l=0,Ka=!1,25<=v)throw Error(n(301));if(v+=1,Lt=lt=null,r.updateQueue!=null){var b=r.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}P.H=lx,b=o(u,p)}while(Ka);return b}function KD(){var r=P.H,o=r.useState()[0];return o=typeof o.then=="function"?Tl(o):o,r=r.useState()[0],(lt!==null?lt.memoizedState:null)!==r&&(ze.flags|=1024),o}function up(){var r=Pu!==0;return Pu=0,r}function dp(r,o,u){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~u}function hp(r){if(Ou){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ou=!1}ui=0,Lt=lt=ze=null,Ka=!1,_l=Pu=0,Qa=null}function vn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?ze.memoizedState=Lt=r:Lt=Lt.next=r,Lt}function kt(){if(lt===null){var r=ze.alternate;r=r!==null?r.memoizedState:null}else r=lt.next;var o=Lt===null?ze.memoizedState:Lt.next;if(o!==null)Lt=o,lt=r;else{if(r===null)throw ze.alternate===null?Error(n(467)):Error(n(310));lt=r,r={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Lt===null?ze.memoizedState=Lt=r:Lt=Lt.next=r}return Lt}function Lu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(r){var o=_l;return _l+=1,Qa===null&&(Qa=[]),r=g0(Qa,r,o),o=ze,(Lt===null?o.memoizedState:Lt.next)===null&&(o=o.alternate,P.H=o===null||o.memoizedState===null?ox:Cp),r}function Iu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Tl(r);if(r.$$typeof===R)return en(r)}throw Error(n(438,String(r)))}function fp(r){var o=null,u=ze.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var p=ze.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(o={data:p.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Lu(),ze.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(r),p=0;p<r;p++)u[p]=U;return o.index++,u}function di(r,o){return typeof o=="function"?o(r):o}function Fu(r){var o=kt();return pp(o,lt,r)}function pp(r,o,u){var p=r.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=u;var v=r.baseQueue,b=p.pending;if(b!==null){if(v!==null){var T=v.next;v.next=b.next,b.next=T}o.baseQueue=v=b,p.pending=null}if(b=r.baseState,v===null)r.memoizedState=b;else{o=v.next;var k=T=null,z=null,K=o,re=!1;do{var ce=K.lane&-536870913;if(ce!==K.lane?(We&ce)===ce:(ui&ce)===ce){var Z=K.revertLane;if(Z===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ce===Ga&&(re=!0);else if((ui&Z)===Z){K=K.next,Z===Ga&&(re=!0);continue}else ce={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},z===null?(k=z=ce,T=b):z=z.next=ce,ze.lanes|=Z,Ki|=Z;ce=K.action,qr&&u(b,ce),b=K.hasEagerState?K.eagerState:u(b,ce)}else Z={lane:ce,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},z===null?(k=z=Z,T=b):z=z.next=Z,ze.lanes|=ce,Ki|=ce;K=K.next}while(K!==null&&K!==o);if(z===null?T=b:z.next=k,!zn(b,r.memoizedState)&&(It=!0,re&&(u=qa,u!==null)))throw u;r.memoizedState=b,r.baseState=T,r.baseQueue=z,p.lastRenderedState=b}return v===null&&(p.lanes=0),[r.memoizedState,p.dispatch]}function mp(r){var o=kt(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=r;var p=u.dispatch,v=u.pending,b=o.memoizedState;if(v!==null){u.pending=null;var T=v=v.next;do b=r(b,T.action),T=T.next;while(T!==v);zn(b,o.memoizedState)||(It=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),u.lastRenderedState=b}return[b,p]}function T0(r,o,u){var p=ze,v=kt(),b=Ze;if(b){if(u===void 0)throw Error(n(407));u=u()}else u=o();var T=!zn((lt||v).memoizedState,u);if(T&&(v.memoizedState=u,It=!0),v=v.queue,vp(M0.bind(null,p,v,r),[r]),v.getSnapshot!==o||T||Lt!==null&&Lt.memoizedState.tag&1){if(p.flags|=2048,Za(9,{destroy:void 0},N0.bind(null,p,v,u,o),null),ht===null)throw Error(n(349));b||(ui&127)!==0||R0(p,o,u)}return u}function R0(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=ze.updateQueue,o===null?(o=Lu(),ze.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function N0(r,o,u,p){o.value=u,o.getSnapshot=p,D0(o)&&k0(r)}function M0(r,o,u){return u(function(){D0(o)&&k0(r)})}function D0(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!zn(r,u)}catch{return!0}}function k0(r){var o=Ir(r,2);o!==null&&jn(o,r,2)}function gp(r){var o=vn();if(typeof r=="function"){var u=r;if(r=u(),qr){js(!0);try{u()}finally{js(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:r},o}function j0(r,o,u,p){return r.baseState=u,pp(r,lt,typeof p=="function"?p:di)}function QD(r,o,u,p,v){if(Uu(r))throw Error(n(485));if(r=o.action,r!==null){var b={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){b.listeners.push(T)}};P.T!==null?u(!0):b.isTransition=!1,p(b),u=o.pending,u===null?(b.next=o.pending=b,O0(o,b)):(b.next=u.next,o.pending=u.next=b)}}function O0(r,o){var u=o.action,p=o.payload,v=r.state;if(o.isTransition){var b=P.T,T={};P.T=T;try{var k=u(v,p),z=P.S;z!==null&&z(T,k),P0(r,o,k)}catch(K){yp(r,o,K)}finally{b!==null&&T.types!==null&&(b.types=T.types),P.T=b}}else try{b=u(v,p),P0(r,o,b)}catch(K){yp(r,o,K)}}function P0(r,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(p){L0(r,o,p)},function(p){return yp(r,o,p)}):L0(r,o,u)}function L0(r,o,u){o.status="fulfilled",o.value=u,I0(o),r.state=u,o=r.pending,o!==null&&(u=o.next,u===o?r.pending=null:(u=u.next,o.next=u,O0(r,u)))}function yp(r,o,u){var p=r.pending;if(r.pending=null,p!==null){p=p.next;do o.status="rejected",o.reason=u,I0(o),o=o.next;while(o!==p)}r.action=null}function I0(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function F0(r,o){return o}function B0(r,o){if(Ze){var u=ht.formState;if(u!==null){e:{var p=ze;if(Ze){if(gt){t:{for(var v=gt,b=os;v.nodeType!==8;){if(!b){v=null;break t}if(v=cs(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){gt=cs(v.nextSibling),p=v.data==="F!";break e}}Ui(p)}p=!1}p&&(o=u[0])}}return u=vn(),u.memoizedState=u.baseState=o,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:F0,lastRenderedState:o},u.queue=p,u=ix.bind(null,ze,p),p.dispatch=u,p=gp(!1),b=Ap.bind(null,ze,!1,p.queue),p=vn(),v={state:o,dispatch:null,action:r,pending:null},p.queue=v,u=QD.bind(null,ze,v,b,u),v.dispatch=u,p.memoizedState=r,[o,u,!1]}function z0(r){var o=kt();return U0(o,lt,r)}function U0(r,o,u){if(o=pp(r,o,F0)[0],r=Fu(di)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var p=Tl(o)}catch(T){throw T===Xa?Ru:T}else p=o;o=kt();var v=o.queue,b=v.dispatch;return u!==o.memoizedState&&(ze.flags|=2048,Za(9,{destroy:void 0},ZD.bind(null,v,u),null)),[p,b,r]}function ZD(r,o){r.action=o}function V0(r){var o=kt(),u=lt;if(u!==null)return U0(o,u,r);kt(),o=o.memoizedState,u=kt();var p=u.queue.dispatch;return u.memoizedState=r,[o,p,!1]}function Za(r,o,u,p){return r={tag:r,create:u,deps:p,inst:o,next:null},o=ze.updateQueue,o===null&&(o=Lu(),ze.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=r.next=r:(p=u.next,u.next=r,r.next=p,o.lastEffect=r),r}function H0(){return kt().memoizedState}function Bu(r,o,u,p){var v=vn();ze.flags|=r,v.memoizedState=Za(1|o,{destroy:void 0},u,p===void 0?null:p)}function zu(r,o,u,p){var v=kt();p=p===void 0?null:p;var b=v.memoizedState.inst;lt!==null&&p!==null&&lp(p,lt.memoizedState.deps)?v.memoizedState=Za(o,b,u,p):(ze.flags|=r,v.memoizedState=Za(1|o,b,u,p))}function $0(r,o){Bu(8390656,8,r,o)}function vp(r,o){zu(2048,8,r,o)}function JD(r){ze.flags|=4;var o=ze.updateQueue;if(o===null)o=Lu(),ze.updateQueue=o,o.events=[r];else{var u=o.events;u===null?o.events=[r]:u.push(r)}}function G0(r){var o=kt().memoizedState;return JD({ref:o,nextImpl:r}),function(){if((rt&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function q0(r,o){return zu(4,2,r,o)}function X0(r,o){return zu(4,4,r,o)}function Y0(r,o){if(typeof o=="function"){r=r();var u=o(r);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function W0(r,o,u){u=u!=null?u.concat([r]):null,zu(4,4,Y0.bind(null,o,r),u)}function bp(){}function K0(r,o){var u=kt();o=o===void 0?null:o;var p=u.memoizedState;return o!==null&&lp(o,p[1])?p[0]:(u.memoizedState=[r,o],r)}function Q0(r,o){var u=kt();o=o===void 0?null:o;var p=u.memoizedState;if(o!==null&&lp(o,p[1]))return p[0];if(p=r(),qr){js(!0);try{r()}finally{js(!1)}}return u.memoizedState=[p,o],p}function xp(r,o,u){return u===void 0||(ui&1073741824)!==0&&(We&261930)===0?r.memoizedState=o:(r.memoizedState=u,r=Zx(),ze.lanes|=r,Ki|=r,u)}function Z0(r,o,u,p){return zn(u,o)?u:Wa.current!==null?(r=xp(r,u,p),zn(r,o)||(It=!0),r):(ui&42)===0||(ui&1073741824)!==0&&(We&261930)===0?(It=!0,r.memoizedState=u):(r=Zx(),ze.lanes|=r,Ki|=r,o)}function J0(r,o,u,p,v){var b=F.p;F.p=b!==0&&8>b?b:8;var T=P.T,k={};P.T=k,Ap(r,!1,o,u);try{var z=v(),K=P.S;if(K!==null&&K(k,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var re=YD(z,p);Rl(r,o,re,qn(r))}else Rl(r,o,p,qn(r))}catch(ce){Rl(r,o,{then:function(){},status:"rejected",reason:ce},qn())}finally{F.p=b,T!==null&&k.types!==null&&(T.types=k.types),P.T=T}}function e2(){}function wp(r,o,u,p){if(r.tag!==5)throw Error(n(476));var v=ex(r).queue;J0(r,v,o,B,u===null?e2:function(){return tx(r),u(p)})}function ex(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:B},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:di,lastRenderedState:u},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function tx(r){var o=ex(r);o.next===null&&(o=r.alternate.memoizedState),Rl(r,o.next.queue,{},qn())}function Sp(){return en(Gl)}function nx(){return kt().memoizedState}function sx(){return kt().memoizedState}function t2(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var u=qn();r=$i(u);var p=Gi(o,r,u);p!==null&&(jn(p,o,u),Al(p,o,u)),o={cache:Qf()},r.payload=o;return}o=o.return}}function n2(r,o,u){var p=qn();u={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Uu(r)?rx(o,u):(u=zf(r,o,u,p),u!==null&&(jn(u,r,p),ax(u,o,p)))}function ix(r,o,u){var p=qn();Rl(r,o,u,p)}function Rl(r,o,u,p){var v={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Uu(r))rx(o,v);else{var b=r.alternate;if(r.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var T=o.lastRenderedState,k=b(T,u);if(v.hasEagerState=!0,v.eagerState=k,zn(k,T))return wu(r,o,v,0),ht===null&&xu(),!1}catch{}if(u=zf(r,o,v,p),u!==null)return jn(u,r,p),ax(u,o,p),!0}return!1}function Ap(r,o,u,p){if(p={lane:2,revertLane:tm(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Uu(r)){if(o)throw Error(n(479))}else o=zf(r,u,p,2),o!==null&&jn(o,r,2)}function Uu(r){var o=r.alternate;return r===ze||o!==null&&o===ze}function rx(r,o){Ka=Ou=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function ax(r,o,u){if((u&4194048)!==0){var p=o.lanes;p&=r.pendingLanes,u|=p,o.lanes=u,db(r,u)}}var Nl={readContext:en,use:Iu,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt};Nl.useEffectEvent=Rt;var ox={readContext:en,use:Iu,useCallback:function(r,o){return vn().memoizedState=[r,o===void 0?null:o],r},useContext:en,useEffect:$0,useImperativeHandle:function(r,o,u){u=u!=null?u.concat([r]):null,Bu(4194308,4,Y0.bind(null,o,r),u)},useLayoutEffect:function(r,o){return Bu(4194308,4,r,o)},useInsertionEffect:function(r,o){Bu(4,2,r,o)},useMemo:function(r,o){var u=vn();o=o===void 0?null:o;var p=r();if(qr){js(!0);try{r()}finally{js(!1)}}return u.memoizedState=[p,o],p},useReducer:function(r,o,u){var p=vn();if(u!==void 0){var v=u(o);if(qr){js(!0);try{u(o)}finally{js(!1)}}}else v=o;return p.memoizedState=p.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},p.queue=r,r=r.dispatch=n2.bind(null,ze,r),[p.memoizedState,r]},useRef:function(r){var o=vn();return r={current:r},o.memoizedState=r},useState:function(r){r=gp(r);var o=r.queue,u=ix.bind(null,ze,o);return o.dispatch=u,[r.memoizedState,u]},useDebugValue:bp,useDeferredValue:function(r,o){var u=vn();return xp(u,r,o)},useTransition:function(){var r=gp(!1);return r=J0.bind(null,ze,r.queue,!0,!1),vn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,u){var p=ze,v=vn();if(Ze){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),ht===null)throw Error(n(349));(We&127)!==0||R0(p,o,u)}v.memoizedState=u;var b={value:u,getSnapshot:o};return v.queue=b,$0(M0.bind(null,p,b,r),[r]),p.flags|=2048,Za(9,{destroy:void 0},N0.bind(null,p,b,u,o),null),u},useId:function(){var r=vn(),o=ht.identifierPrefix;if(Ze){var u=Ps,p=Os;u=(p&~(1<<32-yn(p)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Pu++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=WD++,o="_"+o+"r_"+u.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Sp,useFormState:B0,useActionState:B0,useOptimistic:function(r){var o=vn();o.memoizedState=o.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Ap.bind(null,ze,!0,u),u.dispatch=o,[r,o]},useMemoCache:fp,useCacheRefresh:function(){return vn().memoizedState=t2.bind(null,ze)},useEffectEvent:function(r){var o=vn(),u={impl:r};return o.memoizedState=u,function(){if((rt&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}},Cp={readContext:en,use:Iu,useCallback:K0,useContext:en,useEffect:vp,useImperativeHandle:W0,useInsertionEffect:q0,useLayoutEffect:X0,useMemo:Q0,useReducer:Fu,useRef:H0,useState:function(){return Fu(di)},useDebugValue:bp,useDeferredValue:function(r,o){var u=kt();return Z0(u,lt.memoizedState,r,o)},useTransition:function(){var r=Fu(di)[0],o=kt().memoizedState;return[typeof r=="boolean"?r:Tl(r),o]},useSyncExternalStore:T0,useId:nx,useHostTransitionStatus:Sp,useFormState:z0,useActionState:z0,useOptimistic:function(r,o){var u=kt();return j0(u,lt,r,o)},useMemoCache:fp,useCacheRefresh:sx};Cp.useEffectEvent=G0;var lx={readContext:en,use:Iu,useCallback:K0,useContext:en,useEffect:vp,useImperativeHandle:W0,useInsertionEffect:q0,useLayoutEffect:X0,useMemo:Q0,useReducer:mp,useRef:H0,useState:function(){return mp(di)},useDebugValue:bp,useDeferredValue:function(r,o){var u=kt();return lt===null?xp(u,r,o):Z0(u,lt.memoizedState,r,o)},useTransition:function(){var r=mp(di)[0],o=kt().memoizedState;return[typeof r=="boolean"?r:Tl(r),o]},useSyncExternalStore:T0,useId:nx,useHostTransitionStatus:Sp,useFormState:V0,useActionState:V0,useOptimistic:function(r,o){var u=kt();return lt!==null?j0(u,lt,r,o):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:fp,useCacheRefresh:sx};lx.useEffectEvent=G0;function Ep(r,o,u,p){o=r.memoizedState,u=u(p,o),u=u==null?o:m({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var _p={enqueueSetState:function(r,o,u){r=r._reactInternals;var p=qn(),v=$i(p);v.payload=o,u!=null&&(v.callback=u),o=Gi(r,v,p),o!==null&&(jn(o,r,p),Al(o,r,p))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var p=qn(),v=$i(p);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=Gi(r,v,p),o!==null&&(jn(o,r,p),Al(o,r,p))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=qn(),p=$i(u);p.tag=2,o!=null&&(p.callback=o),o=Gi(r,p,u),o!==null&&(jn(o,r,u),Al(o,r,u))}};function cx(r,o,u,p,v,b,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(p,b,T):o.prototype&&o.prototype.isPureReactComponent?!ml(u,p)||!ml(v,b):!0}function ux(r,o,u,p){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==r&&_p.enqueueReplaceState(o,o.state,null)}function Xr(r,o){var u=o;if("ref"in o){u={};for(var p in o)p!=="ref"&&(u[p]=o[p])}if(r=r.defaultProps){u===o&&(u=m({},u));for(var v in r)u[v]===void 0&&(u[v]=r[v])}return u}function dx(r){bu(r)}function hx(r){console.error(r)}function fx(r){bu(r)}function Vu(r,o){try{var u=r.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(p){setTimeout(function(){throw p})}}function px(r,o,u){try{var p=r.onCaughtError;p(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Tp(r,o,u){return u=$i(u),u.tag=3,u.payload={element:null},u.callback=function(){Vu(r,o)},u}function mx(r){return r=$i(r),r.tag=3,r}function gx(r,o,u,p){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var b=p.value;r.payload=function(){return v(b)},r.callback=function(){px(o,u,p)}}var T=u.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){px(o,u,p),typeof v!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var k=p.stack;this.componentDidCatch(p.value,{componentStack:k!==null?k:""})})}function s2(r,o,u,p,v){if(u.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(o=u.alternate,o!==null&&$a(o,u,v,!0),u=Vn.current,u!==null){switch(u.tag){case 31:case 13:return ls===null?ed():u.alternate===null&&Nt===0&&(Nt=3),u.flags&=-257,u.flags|=65536,u.lanes=v,p===Nu?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([p]):o.add(p),Zp(r,p,v)),!1;case 22:return u.flags|=65536,p===Nu?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([p])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([p]):u.add(p)),Zp(r,p,v)),!1}throw Error(n(435,u.tag))}return Zp(r,p,v),ed(),!1}if(Ze)return o=Vn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,p!==qf&&(r=Error(n(422),{cause:p}),vl(is(r,u)))):(p!==qf&&(o=Error(n(423),{cause:p}),vl(is(o,u))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,p=is(p,u),v=Tp(r.stateNode,p,v),sp(r,v),Nt!==4&&(Nt=2)),!1;var b=Error(n(520),{cause:p});if(b=is(b,u),Il===null?Il=[b]:Il.push(b),Nt!==4&&(Nt=2),o===null)return!0;p=is(p,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,r=v&-v,u.lanes|=r,r=Tp(u.stateNode,p,r),sp(u,r),!1;case 1:if(o=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Qi===null||!Qi.has(b))))return u.flags|=65536,v&=-v,u.lanes|=v,v=mx(v),gx(v,r,u,p),sp(u,v),!1}u=u.return}while(u!==null);return!1}var Rp=Error(n(461)),It=!1;function tn(r,o,u,p){o.child=r===null?x0(o,null,u,p):Gr(o,r.child,u,p)}function yx(r,o,u,p,v){u=u.render;var b=o.ref;if("ref"in p){var T={};for(var k in p)k!=="ref"&&(T[k]=p[k])}else T=p;return Ur(o),p=cp(r,o,u,T,b,v),k=up(),r!==null&&!It?(dp(r,o,v),hi(r,o,v)):(Ze&&k&&$f(o),o.flags|=1,tn(r,o,p,v),o.child)}function vx(r,o,u,p,v){if(r===null){var b=u.type;return typeof b=="function"&&!Uf(b)&&b.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=b,bx(r,o,b,p,v)):(r=Au(u.type,null,p,o,o.mode,v),r.ref=o.ref,r.return=o,o.child=r)}if(b=r.child,!Lp(r,v)){var T=b.memoizedProps;if(u=u.compare,u=u!==null?u:ml,u(T,p)&&r.ref===o.ref)return hi(r,o,v)}return o.flags|=1,r=ai(b,p),r.ref=o.ref,r.return=o,o.child=r}function bx(r,o,u,p,v){if(r!==null){var b=r.memoizedProps;if(ml(b,p)&&r.ref===o.ref)if(It=!1,o.pendingProps=p=b,Lp(r,v))(r.flags&131072)!==0&&(It=!0);else return o.lanes=r.lanes,hi(r,o,v)}return Np(r,o,u,p,v)}function xx(r,o,u,p){var v=p.children,b=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|u:u,r!==null){for(p=o.child=r.child,v=0;p!==null;)v=v|p.lanes|p.childLanes,p=p.sibling;p=v&~b}else p=0,o.child=null;return wx(r,o,b,u,p)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Tu(o,b!==null?b.cachePool:null),b!==null?A0(o,b):rp(),C0(o);else return p=o.lanes=536870912,wx(r,o,b!==null?b.baseLanes|u:u,u,p)}else b!==null?(Tu(o,b.cachePool),A0(o,b),Xi(),o.memoizedState=null):(r!==null&&Tu(o,null),rp(),Xi());return tn(r,o,v,u),o.child}function Ml(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function wx(r,o,u,p,v){var b=Jf();return b=b===null?null:{parent:Pt._currentValue,pool:b},o.memoizedState={baseLanes:u,cachePool:b},r!==null&&Tu(o,null),rp(),C0(o),r!==null&&$a(r,o,p,!0),o.childLanes=v,null}function Hu(r,o){return o=Gu({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function Sx(r,o,u){return Gr(o,r.child,null,u),r=Hu(o,o.pendingProps),r.flags|=2,Hn(o),o.memoizedState=null,r}function i2(r,o,u){var p=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(Ze){if(p.mode==="hidden")return r=Hu(o,p),o.lanes=536870912,Ml(null,r);if(op(o),(r=gt)?(r=Ow(r,os),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Bi!==null?{id:Os,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},u=r0(r),u.return=o,o.child=u,Jt=o,gt=null)):r=null,r===null)throw Ui(o);return o.lanes=536870912,null}return Hu(o,p)}var b=r.memoizedState;if(b!==null){var T=b.dehydrated;if(op(o),v)if(o.flags&256)o.flags&=-257,o=Sx(r,o,u);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(n(558));else if(It||$a(r,o,u,!1),v=(u&r.childLanes)!==0,It||v){if(p=ht,p!==null&&(T=hb(p,u),T!==0&&T!==b.retryLane))throw b.retryLane=T,Ir(r,T),jn(p,r,T),Rp;ed(),o=Sx(r,o,u)}else r=b.treeContext,gt=cs(T.nextSibling),Jt=o,Ze=!0,zi=null,os=!1,r!==null&&l0(o,r),o=Hu(o,p),o.flags|=4096;return o}return r=ai(r.child,{mode:p.mode,children:p.children}),r.ref=o.ref,o.child=r,r.return=o,r}function $u(r,o){var u=o.ref;if(u===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(r===null||r.ref!==u)&&(o.flags|=4194816)}}function Np(r,o,u,p,v){return Ur(o),u=cp(r,o,u,p,void 0,v),p=up(),r!==null&&!It?(dp(r,o,v),hi(r,o,v)):(Ze&&p&&$f(o),o.flags|=1,tn(r,o,u,v),o.child)}function Ax(r,o,u,p,v,b){return Ur(o),o.updateQueue=null,u=_0(o,p,u,v),E0(r),p=up(),r!==null&&!It?(dp(r,o,b),hi(r,o,b)):(Ze&&p&&$f(o),o.flags|=1,tn(r,o,u,b),o.child)}function Cx(r,o,u,p,v){if(Ur(o),o.stateNode===null){var b=za,T=u.contextType;typeof T=="object"&&T!==null&&(b=en(T)),b=new u(p,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=_p,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=p,b.state=o.memoizedState,b.refs={},tp(o),T=u.contextType,b.context=typeof T=="object"&&T!==null?en(T):za,b.state=o.memoizedState,T=u.getDerivedStateFromProps,typeof T=="function"&&(Ep(o,u,T,p),b.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(T=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),T!==b.state&&_p.enqueueReplaceState(b,b.state,null),El(o,p,b,v),Cl(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),p=!0}else if(r===null){b=o.stateNode;var k=o.memoizedProps,z=Xr(u,k);b.props=z;var K=b.context,re=u.contextType;T=za,typeof re=="object"&&re!==null&&(T=en(re));var ce=u.getDerivedStateFromProps;re=typeof ce=="function"||typeof b.getSnapshotBeforeUpdate=="function",k=o.pendingProps!==k,re||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k||K!==T)&&ux(o,b,p,T),Hi=!1;var Z=o.memoizedState;b.state=Z,El(o,p,b,v),Cl(),K=o.memoizedState,k||Z!==K||Hi?(typeof ce=="function"&&(Ep(o,u,ce,p),K=o.memoizedState),(z=Hi||cx(o,u,z,p,Z,K,T))?(re||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=K),b.props=p,b.state=K,b.context=T,p=z):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{b=o.stateNode,np(r,o),T=o.memoizedProps,re=Xr(u,T),b.props=re,ce=o.pendingProps,Z=b.context,K=u.contextType,z=za,typeof K=="object"&&K!==null&&(z=en(K)),k=u.getDerivedStateFromProps,(K=typeof k=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T!==ce||Z!==z)&&ux(o,b,p,z),Hi=!1,Z=o.memoizedState,b.state=Z,El(o,p,b,v),Cl();var ne=o.memoizedState;T!==ce||Z!==ne||Hi||r!==null&&r.dependencies!==null&&Eu(r.dependencies)?(typeof k=="function"&&(Ep(o,u,k,p),ne=o.memoizedState),(re=Hi||cx(o,u,re,p,Z,ne,z)||r!==null&&r.dependencies!==null&&Eu(r.dependencies))?(K||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(p,ne,z),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(p,ne,z)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||T===r.memoizedProps&&Z===r.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&Z===r.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=ne),b.props=p,b.state=ne,b.context=z,p=re):(typeof b.componentDidUpdate!="function"||T===r.memoizedProps&&Z===r.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&Z===r.memoizedState||(o.flags|=1024),p=!1)}return b=p,$u(r,o),p=(o.flags&128)!==0,b||p?(b=o.stateNode,u=p&&typeof u.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,r!==null&&p?(o.child=Gr(o,r.child,null,v),o.child=Gr(o,null,u,v)):tn(r,o,u,v),o.memoizedState=b.state,r=o.child):r=hi(r,o,v),r}function Ex(r,o,u,p){return Br(),o.flags|=256,tn(r,o,u,p),o.child}var Mp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dp(r){return{baseLanes:r,cachePool:p0()}}function kp(r,o,u){return r=r!==null?r.childLanes&~u:0,o&&(r|=Gn),r}function _x(r,o,u){var p=o.pendingProps,v=!1,b=(o.flags&128)!==0,T;if((T=b)||(T=r!==null&&r.memoizedState===null?!1:(Dt.current&2)!==0),T&&(v=!0,o.flags&=-129),T=(o.flags&32)!==0,o.flags&=-33,r===null){if(Ze){if(v?qi(o):Xi(),(r=gt)?(r=Ow(r,os),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Bi!==null?{id:Os,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},u=r0(r),u.return=o,o.child=u,Jt=o,gt=null)):r=null,r===null)throw Ui(o);return pm(r)?o.lanes=32:o.lanes=536870912,null}var k=p.children;return p=p.fallback,v?(Xi(),v=o.mode,k=Gu({mode:"hidden",children:k},v),p=Fr(p,v,u,null),k.return=o,p.return=o,k.sibling=p,o.child=k,p=o.child,p.memoizedState=Dp(u),p.childLanes=kp(r,T,u),o.memoizedState=Mp,Ml(null,p)):(qi(o),jp(o,k))}var z=r.memoizedState;if(z!==null&&(k=z.dehydrated,k!==null)){if(b)o.flags&256?(qi(o),o.flags&=-257,o=Op(r,o,u)):o.memoizedState!==null?(Xi(),o.child=r.child,o.flags|=128,o=null):(Xi(),k=p.fallback,v=o.mode,p=Gu({mode:"visible",children:p.children},v),k=Fr(k,v,u,null),k.flags|=2,p.return=o,k.return=o,p.sibling=k,o.child=p,Gr(o,r.child,null,u),p=o.child,p.memoizedState=Dp(u),p.childLanes=kp(r,T,u),o.memoizedState=Mp,o=Ml(null,p));else if(qi(o),pm(k)){if(T=k.nextSibling&&k.nextSibling.dataset,T)var K=T.dgst;T=K,p=Error(n(419)),p.stack="",p.digest=T,vl({value:p,source:null,stack:null}),o=Op(r,o,u)}else if(It||$a(r,o,u,!1),T=(u&r.childLanes)!==0,It||T){if(T=ht,T!==null&&(p=hb(T,u),p!==0&&p!==z.retryLane))throw z.retryLane=p,Ir(r,p),jn(T,r,p),Rp;fm(k)||ed(),o=Op(r,o,u)}else fm(k)?(o.flags|=192,o.child=r.child,o=null):(r=z.treeContext,gt=cs(k.nextSibling),Jt=o,Ze=!0,zi=null,os=!1,r!==null&&l0(o,r),o=jp(o,p.children),o.flags|=4096);return o}return v?(Xi(),k=p.fallback,v=o.mode,z=r.child,K=z.sibling,p=ai(z,{mode:"hidden",children:p.children}),p.subtreeFlags=z.subtreeFlags&65011712,K!==null?k=ai(K,k):(k=Fr(k,v,u,null),k.flags|=2),k.return=o,p.return=o,p.sibling=k,o.child=p,Ml(null,p),p=o.child,k=r.child.memoizedState,k===null?k=Dp(u):(v=k.cachePool,v!==null?(z=Pt._currentValue,v=v.parent!==z?{parent:z,pool:z}:v):v=p0(),k={baseLanes:k.baseLanes|u,cachePool:v}),p.memoizedState=k,p.childLanes=kp(r,T,u),o.memoizedState=Mp,Ml(r.child,p)):(qi(o),u=r.child,r=u.sibling,u=ai(u,{mode:"visible",children:p.children}),u.return=o,u.sibling=null,r!==null&&(T=o.deletions,T===null?(o.deletions=[r],o.flags|=16):T.push(r)),o.child=u,o.memoizedState=null,u)}function jp(r,o){return o=Gu({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Gu(r,o){return r=Un(22,r,null,o),r.lanes=0,r}function Op(r,o,u){return Gr(o,r.child,null,u),r=jp(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function Tx(r,o,u){r.lanes|=o;var p=r.alternate;p!==null&&(p.lanes|=o),Wf(r.return,o,u)}function Pp(r,o,u,p,v,b){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:v,treeForkCount:b}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=p,T.tail=u,T.tailMode=v,T.treeForkCount=b)}function Rx(r,o,u){var p=o.pendingProps,v=p.revealOrder,b=p.tail;p=p.children;var T=Dt.current,k=(T&2)!==0;if(k?(T=T&1|2,o.flags|=128):T&=1,te(Dt,T),tn(r,o,p,u),p=Ze?yl:0,!k&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Tx(r,u,o);else if(r.tag===19)Tx(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(u=o.child,v=null;u!==null;)r=u.alternate,r!==null&&ju(r)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),Pp(o,!1,v,u,b,p);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(r=v.alternate,r!==null&&ju(r)===null){o.child=v;break}r=v.sibling,v.sibling=u,u=v,v=r}Pp(o,!0,u,null,b,p);break;case"together":Pp(o,!1,null,null,void 0,p);break;default:o.memoizedState=null}return o.child}function hi(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),Ki|=o.lanes,(u&o.childLanes)===0)if(r!==null){if($a(r,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,u=ai(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=ai(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function Lp(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Eu(r)))}function r2(r,o,u){switch(o.tag){case 3:ye(o,o.stateNode.containerInfo),Vi(o,Pt,r.memoizedState.cache),Br();break;case 27:case 5:Re(o);break;case 4:ye(o,o.stateNode.containerInfo);break;case 10:Vi(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,op(o),null;break;case 13:var p=o.memoizedState;if(p!==null)return p.dehydrated!==null?(qi(o),o.flags|=128,null):(u&o.child.childLanes)!==0?_x(r,o,u):(qi(o),r=hi(r,o,u),r!==null?r.sibling:null);qi(o);break;case 19:var v=(r.flags&128)!==0;if(p=(u&o.childLanes)!==0,p||($a(r,o,u,!1),p=(u&o.childLanes)!==0),v){if(p)return Rx(r,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),te(Dt,Dt.current),p)break;return null;case 22:return o.lanes=0,xx(r,o,u,o.pendingProps);case 24:Vi(o,Pt,r.memoizedState.cache)}return hi(r,o,u)}function Nx(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps)It=!0;else{if(!Lp(r,u)&&(o.flags&128)===0)return It=!1,r2(r,o,u);It=(r.flags&131072)!==0}else It=!1,Ze&&(o.flags&1048576)!==0&&o0(o,yl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var p=o.pendingProps;if(r=Hr(o.elementType),o.type=r,typeof r=="function")Uf(r)?(p=Xr(r,p),o.tag=1,o=Cx(null,o,r,p,u)):(o.tag=0,o=Np(null,o,r,p,u));else{if(r!=null){var v=r.$$typeof;if(v===N){o.tag=11,o=yx(null,o,r,p,u);break e}else if(v===D){o.tag=14,o=vx(null,o,r,p,u);break e}}throw o=X(r)||r,Error(n(306,o,""))}}return o;case 0:return Np(r,o,o.type,o.pendingProps,u);case 1:return p=o.type,v=Xr(p,o.pendingProps),Cx(r,o,p,v,u);case 3:e:{if(ye(o,o.stateNode.containerInfo),r===null)throw Error(n(387));p=o.pendingProps;var b=o.memoizedState;v=b.element,np(r,o),El(o,p,null,u);var T=o.memoizedState;if(p=T.cache,Vi(o,Pt,p),p!==b.cache&&Kf(o,[Pt],u,!0),Cl(),p=T.element,b.isDehydrated)if(b={element:p,isDehydrated:!1,cache:T.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=Ex(r,o,p,u);break e}else if(p!==v){v=is(Error(n(424)),o),vl(v),o=Ex(r,o,p,u);break e}else for(r=o.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,gt=cs(r.firstChild),Jt=o,Ze=!0,zi=null,os=!0,u=x0(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Br(),p===v){o=hi(r,o,u);break e}tn(r,o,p,u)}o=o.child}return o;case 26:return $u(r,o),r===null?(u=zw(o.type,null,o.pendingProps,null))?o.memoizedState=u:Ze||(u=o.type,r=o.pendingProps,p=od(se.current).createElement(u),p[Zt]=o,p[Tn]=r,nn(p,u,r),qt(p),o.stateNode=p):o.memoizedState=zw(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return Re(o),r===null&&Ze&&(p=o.stateNode=Iw(o.type,o.pendingProps,se.current),Jt=o,os=!0,v=gt,tr(o.type)?(mm=v,gt=cs(p.firstChild)):gt=v),tn(r,o,o.pendingProps.children,u),$u(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&Ze&&((v=p=gt)&&(p=P2(p,o.type,o.pendingProps,os),p!==null?(o.stateNode=p,Jt=o,gt=cs(p.firstChild),os=!1,v=!0):v=!1),v||Ui(o)),Re(o),v=o.type,b=o.pendingProps,T=r!==null?r.memoizedProps:null,p=b.children,um(v,b)?p=null:T!==null&&um(v,T)&&(o.flags|=32),o.memoizedState!==null&&(v=cp(r,o,KD,null,null,u),Gl._currentValue=v),$u(r,o),tn(r,o,p,u),o.child;case 6:return r===null&&Ze&&((r=u=gt)&&(u=L2(u,o.pendingProps,os),u!==null?(o.stateNode=u,Jt=o,gt=null,r=!0):r=!1),r||Ui(o)),null;case 13:return _x(r,o,u);case 4:return ye(o,o.stateNode.containerInfo),p=o.pendingProps,r===null?o.child=Gr(o,null,p,u):tn(r,o,p,u),o.child;case 11:return yx(r,o,o.type,o.pendingProps,u);case 7:return tn(r,o,o.pendingProps,u),o.child;case 8:return tn(r,o,o.pendingProps.children,u),o.child;case 12:return tn(r,o,o.pendingProps.children,u),o.child;case 10:return p=o.pendingProps,Vi(o,o.type,p.value),tn(r,o,p.children,u),o.child;case 9:return v=o.type._context,p=o.pendingProps.children,Ur(o),v=en(v),p=p(v),o.flags|=1,tn(r,o,p,u),o.child;case 14:return vx(r,o,o.type,o.pendingProps,u);case 15:return bx(r,o,o.type,o.pendingProps,u);case 19:return Rx(r,o,u);case 31:return i2(r,o,u);case 22:return xx(r,o,u,o.pendingProps);case 24:return Ur(o),p=en(Pt),r===null?(v=Jf(),v===null&&(v=ht,b=Qf(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=u),v=b),o.memoizedState={parent:p,cache:v},tp(o),Vi(o,Pt,v)):((r.lanes&u)!==0&&(np(r,o),El(o,null,null,u),Cl()),v=r.memoizedState,b=o.memoizedState,v.parent!==p?(v={parent:p,cache:p},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),Vi(o,Pt,p)):(p=b.cache,Vi(o,Pt,p),p!==v.cache&&Kf(o,[Pt],u,!0))),tn(r,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function fi(r){r.flags|=4}function Ip(r,o,u,p,v){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(nw())r.flags|=8192;else throw $r=Nu,ep}else r.flags&=-16777217}function Mx(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Gw(o))if(nw())r.flags|=8192;else throw $r=Nu,ep}function qu(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?cb():536870912,r.lanes|=o,no|=o)}function Dl(r,o){if(!Ze)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:p.sibling=null}}function yt(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,p=0;if(o)for(var v=r.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags&65011712,p|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)u|=v.lanes|v.childLanes,p|=v.subtreeFlags,p|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=p,r.childLanes=u,o}function a2(r,o,u){var p=o.pendingProps;switch(Gf(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(o),null;case 1:return yt(o),null;case 3:return u=o.stateNode,p=null,r!==null&&(p=r.memoizedState.cache),o.memoizedState.cache!==p&&(o.flags|=2048),ci(Pt),ve(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Ha(o)?fi(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Xf())),yt(o),null;case 26:var v=o.type,b=o.memoizedState;return r===null?(fi(o),b!==null?(yt(o),Mx(o,b)):(yt(o),Ip(o,v,null,p,u))):b?b!==r.memoizedState?(fi(o),yt(o),Mx(o,b)):(yt(o),o.flags&=-16777217):(r=r.memoizedProps,r!==p&&fi(o),yt(o),Ip(o,v,r,p,u)),null;case 27:if(Y(o),u=se.current,v=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==p&&fi(o);else{if(!p){if(o.stateNode===null)throw Error(n(166));return yt(o),null}r=oe.current,Ha(o)?c0(o):(r=Iw(v,p,u),o.stateNode=r,fi(o))}return yt(o),null;case 5:if(Y(o),v=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==p&&fi(o);else{if(!p){if(o.stateNode===null)throw Error(n(166));return yt(o),null}if(b=oe.current,Ha(o))c0(o);else{var T=od(se.current);switch(b){case 1:b=T.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:b=T.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":b=T.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":b=T.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":b=T.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof p.is=="string"?T.createElement("select",{is:p.is}):T.createElement("select"),p.multiple?b.multiple=!0:p.size&&(b.size=p.size);break;default:b=typeof p.is=="string"?T.createElement(v,{is:p.is}):T.createElement(v)}}b[Zt]=o,b[Tn]=p;e:for(T=o.child;T!==null;){if(T.tag===5||T.tag===6)b.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===o)break e;for(;T.sibling===null;){if(T.return===null||T.return===o)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}o.stateNode=b;e:switch(nn(b,v,p),v){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&fi(o)}}return yt(o),Ip(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,u),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==p&&fi(o);else{if(typeof p!="string"&&o.stateNode===null)throw Error(n(166));if(r=se.current,Ha(o)){if(r=o.stateNode,u=o.memoizedProps,p=null,v=Jt,v!==null)switch(v.tag){case 27:case 5:p=v.memoizedProps}r[Zt]=o,r=!!(r.nodeValue===u||p!==null&&p.suppressHydrationWarning===!0||_w(r.nodeValue,u)),r||Ui(o,!0)}else r=od(r).createTextNode(p),r[Zt]=o,o.stateNode=r}return yt(o),null;case 31:if(u=o.memoizedState,r===null||r.memoizedState!==null){if(p=Ha(o),u!==null){if(r===null){if(!p)throw Error(n(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(557));r[Zt]=o}else Br(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;yt(o),r=!1}else u=Xf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return o.flags&256?(Hn(o),o):(Hn(o),null);if((o.flags&128)!==0)throw Error(n(558))}return yt(o),null;case 13:if(p=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=Ha(o),p!==null&&p.dehydrated!==null){if(r===null){if(!v)throw Error(n(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[Zt]=o}else Br(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;yt(o),v=!1}else v=Xf(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(Hn(o),o):(Hn(o),null)}return Hn(o),(o.flags&128)!==0?(o.lanes=u,o):(u=p!==null,r=r!==null&&r.memoizedState!==null,u&&(p=o.child,v=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(v=p.alternate.memoizedState.cachePool.pool),b=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(b=p.memoizedState.cachePool.pool),b!==v&&(p.flags|=2048)),u!==r&&u&&(o.child.flags|=8192),qu(o,o.updateQueue),yt(o),null);case 4:return ve(),r===null&&rm(o.stateNode.containerInfo),yt(o),null;case 10:return ci(o.type),yt(o),null;case 19:if(q(Dt),p=o.memoizedState,p===null)return yt(o),null;if(v=(o.flags&128)!==0,b=p.rendering,b===null)if(v)Dl(p,!1);else{if(Nt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(b=ju(r),b!==null){for(o.flags|=128,Dl(p,!1),r=b.updateQueue,o.updateQueue=r,qu(o,r),o.subtreeFlags=0,r=u,u=o.child;u!==null;)i0(u,r),u=u.sibling;return te(Dt,Dt.current&1|2),Ze&&oi(o,p.treeForkCount),o.child}r=r.sibling}p.tail!==null&&Gt()>Qu&&(o.flags|=128,v=!0,Dl(p,!1),o.lanes=4194304)}else{if(!v)if(r=ju(b),r!==null){if(o.flags|=128,v=!0,r=r.updateQueue,o.updateQueue=r,qu(o,r),Dl(p,!0),p.tail===null&&p.tailMode==="hidden"&&!b.alternate&&!Ze)return yt(o),null}else 2*Gt()-p.renderingStartTime>Qu&&u!==536870912&&(o.flags|=128,v=!0,Dl(p,!1),o.lanes=4194304);p.isBackwards?(b.sibling=o.child,o.child=b):(r=p.last,r!==null?r.sibling=b:o.child=b,p.last=b)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=Gt(),r.sibling=null,u=Dt.current,te(Dt,v?u&1|2:u&1),Ze&&oi(o,p.treeForkCount),r):(yt(o),null);case 22:case 23:return Hn(o),ap(),p=o.memoizedState!==null,r!==null?r.memoizedState!==null!==p&&(o.flags|=8192):p&&(o.flags|=8192),p?(u&536870912)!==0&&(o.flags&128)===0&&(yt(o),o.subtreeFlags&6&&(o.flags|=8192)):yt(o),u=o.updateQueue,u!==null&&qu(o,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==u&&(o.flags|=2048),r!==null&&q(Vr),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),ci(Pt),yt(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function o2(r,o){switch(Gf(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return ci(Pt),ve(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Y(o),null;case 31:if(o.memoizedState!==null){if(Hn(o),o.alternate===null)throw Error(n(340));Br()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(Hn(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Br()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return q(Dt),null;case 4:return ve(),null;case 10:return ci(o.type),null;case 22:case 23:return Hn(o),ap(),r!==null&&q(Vr),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return ci(Pt),null;case 25:return null;default:return null}}function Dx(r,o){switch(Gf(o),o.tag){case 3:ci(Pt),ve();break;case 26:case 27:case 5:Y(o);break;case 4:ve();break;case 31:o.memoizedState!==null&&Hn(o);break;case 13:Hn(o);break;case 19:q(Dt);break;case 10:ci(o.type);break;case 22:case 23:Hn(o),ap(),r!==null&&q(Vr);break;case 24:ci(Pt)}}function kl(r,o){try{var u=o.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var v=p.next;u=v;do{if((u.tag&r)===r){p=void 0;var b=u.create,T=u.inst;p=b(),T.destroy=p}u=u.next}while(u!==v)}}catch(k){ot(o,o.return,k)}}function Yi(r,o,u){try{var p=o.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var b=v.next;p=b;do{if((p.tag&r)===r){var T=p.inst,k=T.destroy;if(k!==void 0){T.destroy=void 0,v=o;var z=u,K=k;try{K()}catch(re){ot(v,z,re)}}}p=p.next}while(p!==b)}}catch(re){ot(o,o.return,re)}}function kx(r){var o=r.updateQueue;if(o!==null){var u=r.stateNode;try{S0(o,u)}catch(p){ot(r,r.return,p)}}}function jx(r,o,u){u.props=Xr(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(p){ot(r,o,p)}}function jl(r,o){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var p=r.stateNode;break;case 30:p=r.stateNode;break;default:p=r.stateNode}typeof u=="function"?r.refCleanup=u(p):u.current=p}}catch(v){ot(r,o,v)}}function Ls(r,o){var u=r.ref,p=r.refCleanup;if(u!==null)if(typeof p=="function")try{p()}catch(v){ot(r,o,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){ot(r,o,v)}else u.current=null}function Ox(r){var o=r.type,u=r.memoizedProps,p=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&p.focus();break e;case"img":u.src?p.src=u.src:u.srcSet&&(p.srcset=u.srcSet)}}catch(v){ot(r,r.return,v)}}function Fp(r,o,u){try{var p=r.stateNode;N2(p,r.type,u,o),p[Tn]=o}catch(v){ot(r,r.return,v)}}function Px(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&tr(r.type)||r.tag===4}function Bp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Px(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&tr(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function zp(r,o,u){var p=r.tag;if(p===5||p===6)r=r.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(r),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=ii));else if(p!==4&&(p===27&&tr(r.type)&&(u=r.stateNode,o=null),r=r.child,r!==null))for(zp(r,o,u),r=r.sibling;r!==null;)zp(r,o,u),r=r.sibling}function Xu(r,o,u){var p=r.tag;if(p===5||p===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(p!==4&&(p===27&&tr(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(Xu(r,o,u),r=r.sibling;r!==null;)Xu(r,o,u),r=r.sibling}function Lx(r){var o=r.stateNode,u=r.memoizedProps;try{for(var p=r.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);nn(o,p,u),o[Zt]=r,o[Tn]=u}catch(b){ot(r,r.return,b)}}var pi=!1,Ft=!1,Up=!1,Ix=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function l2(r,o){if(r=r.containerInfo,lm=pd,r=Wb(r),Of(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var v=p.anchorOffset,b=p.focusNode;p=p.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var T=0,k=-1,z=-1,K=0,re=0,ce=r,Z=null;t:for(;;){for(var ne;ce!==u||v!==0&&ce.nodeType!==3||(k=T+v),ce!==b||p!==0&&ce.nodeType!==3||(z=T+p),ce.nodeType===3&&(T+=ce.nodeValue.length),(ne=ce.firstChild)!==null;)Z=ce,ce=ne;for(;;){if(ce===r)break t;if(Z===u&&++K===v&&(k=T),Z===b&&++re===p&&(z=T),(ne=ce.nextSibling)!==null)break;ce=Z,Z=ce.parentNode}ce=ne}u=k===-1||z===-1?null:{start:k,end:z}}else u=null}u=u||{start:0,end:0}}else u=null;for(cm={focusedElem:r,selectionRange:u},pd=!1,Xt=o;Xt!==null;)if(o=Xt,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,Xt=r;else for(;Xt!==null;){switch(o=Xt,b=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)v=r[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&b!==null){r=void 0,u=o,v=b.memoizedProps,b=b.memoizedState,p=u.stateNode;try{var we=Xr(u.type,v);r=p.getSnapshotBeforeUpdate(we,b),p.__reactInternalSnapshotBeforeUpdate=r}catch(De){ot(u,u.return,De)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,u=r.nodeType,u===9)hm(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":hm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=o.sibling,r!==null){r.return=o.return,Xt=r;break}Xt=o.return}}function Fx(r,o,u){var p=u.flags;switch(u.tag){case 0:case 11:case 15:gi(r,u),p&4&&kl(5,u);break;case 1:if(gi(r,u),p&4)if(r=u.stateNode,o===null)try{r.componentDidMount()}catch(T){ot(u,u.return,T)}else{var v=Xr(u.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(v,o,r.__reactInternalSnapshotBeforeUpdate)}catch(T){ot(u,u.return,T)}}p&64&&kx(u),p&512&&jl(u,u.return);break;case 3:if(gi(r,u),p&64&&(r=u.updateQueue,r!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{S0(r,o)}catch(T){ot(u,u.return,T)}}break;case 27:o===null&&p&4&&Lx(u);case 26:case 5:gi(r,u),o===null&&p&4&&Ox(u),p&512&&jl(u,u.return);break;case 12:gi(r,u);break;case 31:gi(r,u),p&4&&Ux(r,u);break;case 13:gi(r,u),p&4&&Vx(r,u),p&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=y2.bind(null,u),I2(r,u))));break;case 22:if(p=u.memoizedState!==null||pi,!p){o=o!==null&&o.memoizedState!==null||Ft,v=pi;var b=Ft;pi=p,(Ft=o)&&!b?yi(r,u,(u.subtreeFlags&8772)!==0):gi(r,u),pi=v,Ft=b}break;case 30:break;default:gi(r,u)}}function Bx(r){var o=r.alternate;o!==null&&(r.alternate=null,Bx(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&yf(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var xt=null,Nn=!1;function mi(r,o,u){for(u=u.child;u!==null;)zx(r,o,u),u=u.sibling}function zx(r,o,u){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Dr,u)}catch{}switch(u.tag){case 26:Ft||Ls(u,o),mi(r,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Ft||Ls(u,o);var p=xt,v=Nn;tr(u.type)&&(xt=u.stateNode,Nn=!1),mi(r,o,u),Vl(u.stateNode),xt=p,Nn=v;break;case 5:Ft||Ls(u,o);case 6:if(p=xt,v=Nn,xt=null,mi(r,o,u),xt=p,Nn=v,xt!==null)if(Nn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(u.stateNode)}catch(b){ot(u,o,b)}else try{xt.removeChild(u.stateNode)}catch(b){ot(u,o,b)}break;case 18:xt!==null&&(Nn?(r=xt,kw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),uo(r)):kw(xt,u.stateNode));break;case 4:p=xt,v=Nn,xt=u.stateNode.containerInfo,Nn=!0,mi(r,o,u),xt=p,Nn=v;break;case 0:case 11:case 14:case 15:Yi(2,u,o),Ft||Yi(4,u,o),mi(r,o,u);break;case 1:Ft||(Ls(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"&&jx(u,o,p)),mi(r,o,u);break;case 21:mi(r,o,u);break;case 22:Ft=(p=Ft)||u.memoizedState!==null,mi(r,o,u),Ft=p;break;default:mi(r,o,u)}}function Ux(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{uo(r)}catch(u){ot(o,o.return,u)}}}function Vx(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{uo(r)}catch(u){ot(o,o.return,u)}}function c2(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new Ix),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new Ix),o;default:throw Error(n(435,r.tag))}}function Yu(r,o){var u=c2(r);o.forEach(function(p){if(!u.has(p)){u.add(p);var v=v2.bind(null,r,p);p.then(v,v)}})}function Mn(r,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var v=u[p],b=r,T=o,k=T;e:for(;k!==null;){switch(k.tag){case 27:if(tr(k.type)){xt=k.stateNode,Nn=!1;break e}break;case 5:xt=k.stateNode,Nn=!1;break e;case 3:case 4:xt=k.stateNode.containerInfo,Nn=!0;break e}k=k.return}if(xt===null)throw Error(n(160));zx(b,T,v),xt=null,Nn=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Hx(o,r),o=o.sibling}var Ss=null;function Hx(r,o){var u=r.alternate,p=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Mn(o,r),Dn(r),p&4&&(Yi(3,r,r.return),kl(3,r),Yi(5,r,r.return));break;case 1:Mn(o,r),Dn(r),p&512&&(Ft||u===null||Ls(u,u.return)),p&64&&pi&&(r=r.updateQueue,r!==null&&(p=r.callbacks,p!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?p:u.concat(p))));break;case 26:var v=Ss;if(Mn(o,r),Dn(r),p&512&&(Ft||u===null||Ls(u,u.return)),p&4){var b=u!==null?u.memoizedState:null;if(p=r.memoizedState,u===null)if(p===null)if(r.stateNode===null){e:{p=r.type,u=r.memoizedProps,v=v.ownerDocument||v;t:switch(p){case"title":b=v.getElementsByTagName("title")[0],(!b||b[al]||b[Zt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(p),v.head.insertBefore(b,v.querySelector("head > title"))),nn(b,p,u),b[Zt]=r,qt(b),p=b;break e;case"link":var T=Hw("link","href",v).get(p+(u.href||""));if(T){for(var k=0;k<T.length;k++)if(b=T[k],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){T.splice(k,1);break t}}b=v.createElement(p),nn(b,p,u),v.head.appendChild(b);break;case"meta":if(T=Hw("meta","content",v).get(p+(u.content||""))){for(k=0;k<T.length;k++)if(b=T[k],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){T.splice(k,1);break t}}b=v.createElement(p),nn(b,p,u),v.head.appendChild(b);break;default:throw Error(n(468,p))}b[Zt]=r,qt(b),p=b}r.stateNode=p}else $w(v,r.type,r.stateNode);else r.stateNode=Vw(v,p,r.memoizedProps);else b!==p?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,p===null?$w(v,r.type,r.stateNode):Vw(v,p,r.memoizedProps)):p===null&&r.stateNode!==null&&Fp(r,r.memoizedProps,u.memoizedProps)}break;case 27:Mn(o,r),Dn(r),p&512&&(Ft||u===null||Ls(u,u.return)),u!==null&&p&4&&Fp(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Mn(o,r),Dn(r),p&512&&(Ft||u===null||Ls(u,u.return)),r.flags&32){v=r.stateNode;try{ja(v,"")}catch(we){ot(r,r.return,we)}}p&4&&r.stateNode!=null&&(v=r.memoizedProps,Fp(r,v,u!==null?u.memoizedProps:v)),p&1024&&(Up=!0);break;case 6:if(Mn(o,r),Dn(r),p&4){if(r.stateNode===null)throw Error(n(162));p=r.memoizedProps,u=r.stateNode;try{u.nodeValue=p}catch(we){ot(r,r.return,we)}}break;case 3:if(ud=null,v=Ss,Ss=ld(o.containerInfo),Mn(o,r),Ss=v,Dn(r),p&4&&u!==null&&u.memoizedState.isDehydrated)try{uo(o.containerInfo)}catch(we){ot(r,r.return,we)}Up&&(Up=!1,$x(r));break;case 4:p=Ss,Ss=ld(r.stateNode.containerInfo),Mn(o,r),Dn(r),Ss=p;break;case 12:Mn(o,r),Dn(r);break;case 31:Mn(o,r),Dn(r),p&4&&(p=r.updateQueue,p!==null&&(r.updateQueue=null,Yu(r,p)));break;case 13:Mn(o,r),Dn(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Ku=Gt()),p&4&&(p=r.updateQueue,p!==null&&(r.updateQueue=null,Yu(r,p)));break;case 22:v=r.memoizedState!==null;var z=u!==null&&u.memoizedState!==null,K=pi,re=Ft;if(pi=K||v,Ft=re||z,Mn(o,r),Ft=re,pi=K,Dn(r),p&8192)e:for(o=r.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(u===null||z||pi||Ft||Yr(r)),u=null,o=r;;){if(o.tag===5||o.tag===26){if(u===null){z=u=o;try{if(b=z.stateNode,v)T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{k=z.stateNode;var ce=z.memoizedProps.style,Z=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;k.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(we){ot(z,z.return,we)}}}else if(o.tag===6){if(u===null){z=o;try{z.stateNode.nodeValue=v?"":z.memoizedProps}catch(we){ot(z,z.return,we)}}}else if(o.tag===18){if(u===null){z=o;try{var ne=z.stateNode;v?jw(ne,!0):jw(z.stateNode,!1)}catch(we){ot(z,z.return,we)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}p&4&&(p=r.updateQueue,p!==null&&(u=p.retryQueue,u!==null&&(p.retryQueue=null,Yu(r,u))));break;case 19:Mn(o,r),Dn(r),p&4&&(p=r.updateQueue,p!==null&&(r.updateQueue=null,Yu(r,p)));break;case 30:break;case 21:break;default:Mn(o,r),Dn(r)}}function Dn(r){var o=r.flags;if(o&2){try{for(var u,p=r.return;p!==null;){if(Px(p)){u=p;break}p=p.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var v=u.stateNode,b=Bp(r);Xu(r,b,v);break;case 5:var T=u.stateNode;u.flags&32&&(ja(T,""),u.flags&=-33);var k=Bp(r);Xu(r,k,T);break;case 3:case 4:var z=u.stateNode.containerInfo,K=Bp(r);zp(r,K,z);break;default:throw Error(n(161))}}catch(re){ot(r,r.return,re)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function $x(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;$x(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function gi(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Fx(r,o.alternate,o),o=o.sibling}function Yr(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Yi(4,o,o.return),Yr(o);break;case 1:Ls(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&jx(o,o.return,u),Yr(o);break;case 27:Vl(o.stateNode);case 26:case 5:Ls(o,o.return),Yr(o);break;case 22:o.memoizedState===null&&Yr(o);break;case 30:Yr(o);break;default:Yr(o)}r=r.sibling}}function yi(r,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var p=o.alternate,v=r,b=o,T=b.flags;switch(b.tag){case 0:case 11:case 15:yi(v,b,u),kl(4,b);break;case 1:if(yi(v,b,u),p=b,v=p.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(K){ot(p,p.return,K)}if(p=b,v=p.updateQueue,v!==null){var k=p.stateNode;try{var z=v.shared.hiddenCallbacks;if(z!==null)for(v.shared.hiddenCallbacks=null,v=0;v<z.length;v++)w0(z[v],k)}catch(K){ot(p,p.return,K)}}u&&T&64&&kx(b),jl(b,b.return);break;case 27:Lx(b);case 26:case 5:yi(v,b,u),u&&p===null&&T&4&&Ox(b),jl(b,b.return);break;case 12:yi(v,b,u);break;case 31:yi(v,b,u),u&&T&4&&Ux(v,b);break;case 13:yi(v,b,u),u&&T&4&&Vx(v,b);break;case 22:b.memoizedState===null&&yi(v,b,u),jl(b,b.return);break;case 30:break;default:yi(v,b,u)}o=o.sibling}}function Vp(r,o){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&bl(u))}function Hp(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&bl(r))}function As(r,o,u,p){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Gx(r,o,u,p),o=o.sibling}function Gx(r,o,u,p){var v=o.flags;switch(o.tag){case 0:case 11:case 15:As(r,o,u,p),v&2048&&kl(9,o);break;case 1:As(r,o,u,p);break;case 3:As(r,o,u,p),v&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&bl(r)));break;case 12:if(v&2048){As(r,o,u,p),r=o.stateNode;try{var b=o.memoizedProps,T=b.id,k=b.onPostCommit;typeof k=="function"&&k(T,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(z){ot(o,o.return,z)}}else As(r,o,u,p);break;case 31:As(r,o,u,p);break;case 13:As(r,o,u,p);break;case 23:break;case 22:b=o.stateNode,T=o.alternate,o.memoizedState!==null?b._visibility&2?As(r,o,u,p):Ol(r,o):b._visibility&2?As(r,o,u,p):(b._visibility|=2,Ja(r,o,u,p,(o.subtreeFlags&10256)!==0||!1)),v&2048&&Vp(T,o);break;case 24:As(r,o,u,p),v&2048&&Hp(o.alternate,o);break;default:As(r,o,u,p)}}function Ja(r,o,u,p,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=r,T=o,k=u,z=p,K=T.flags;switch(T.tag){case 0:case 11:case 15:Ja(b,T,k,z,v),kl(8,T);break;case 23:break;case 22:var re=T.stateNode;T.memoizedState!==null?re._visibility&2?Ja(b,T,k,z,v):Ol(b,T):(re._visibility|=2,Ja(b,T,k,z,v)),v&&K&2048&&Vp(T.alternate,T);break;case 24:Ja(b,T,k,z,v),v&&K&2048&&Hp(T.alternate,T);break;default:Ja(b,T,k,z,v)}o=o.sibling}}function Ol(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=r,p=o,v=p.flags;switch(p.tag){case 22:Ol(u,p),v&2048&&Vp(p.alternate,p);break;case 24:Ol(u,p),v&2048&&Hp(p.alternate,p);break;default:Ol(u,p)}o=o.sibling}}var Pl=8192;function eo(r,o,u){if(r.subtreeFlags&Pl)for(r=r.child;r!==null;)qx(r,o,u),r=r.sibling}function qx(r,o,u){switch(r.tag){case 26:eo(r,o,u),r.flags&Pl&&r.memoizedState!==null&&W2(u,Ss,r.memoizedState,r.memoizedProps);break;case 5:eo(r,o,u);break;case 3:case 4:var p=Ss;Ss=ld(r.stateNode.containerInfo),eo(r,o,u),Ss=p;break;case 22:r.memoizedState===null&&(p=r.alternate,p!==null&&p.memoizedState!==null?(p=Pl,Pl=16777216,eo(r,o,u),Pl=p):eo(r,o,u));break;default:eo(r,o,u)}}function Xx(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Ll(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var p=o[u];Xt=p,Wx(p,r)}Xx(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Yx(r),r=r.sibling}function Yx(r){switch(r.tag){case 0:case 11:case 15:Ll(r),r.flags&2048&&Yi(9,r,r.return);break;case 3:Ll(r);break;case 12:Ll(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,Wu(r)):Ll(r);break;default:Ll(r)}}function Wu(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var p=o[u];Xt=p,Wx(p,r)}Xx(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Yi(8,o,o.return),Wu(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Wu(o));break;default:Wu(o)}r=r.sibling}}function Wx(r,o){for(;Xt!==null;){var u=Xt;switch(u.tag){case 0:case 11:case 15:Yi(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var p=u.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:bl(u.memoizedState.cache)}if(p=u.child,p!==null)p.return=u,Xt=p;else e:for(u=r;Xt!==null;){p=Xt;var v=p.sibling,b=p.return;if(Bx(p),p===u){Xt=null;break e}if(v!==null){v.return=b,Xt=v;break e}Xt=b}}}var u2={getCacheForType:function(r){var o=en(Pt),u=o.data.get(r);return u===void 0&&(u=r(),o.data.set(r,u)),u},cacheSignal:function(){return en(Pt).controller.signal}},d2=typeof WeakMap=="function"?WeakMap:Map,rt=0,ht=null,qe=null,We=0,at=0,$n=null,Wi=!1,to=!1,$p=!1,vi=0,Nt=0,Ki=0,Wr=0,Gp=0,Gn=0,no=0,Il=null,kn=null,qp=!1,Ku=0,Kx=0,Qu=1/0,Zu=null,Qi=null,Vt=0,Zi=null,so=null,bi=0,Xp=0,Yp=null,Qx=null,Fl=0,Wp=null;function qn(){return(rt&2)!==0&&We!==0?We&-We:P.T!==null?tm():fb()}function Zx(){if(Gn===0)if((We&536870912)===0||Ze){var r=Bn;Bn<<=1,(Bn&3932160)===0&&(Bn=262144),Gn=r}else Gn=536870912;return r=Vn.current,r!==null&&(r.flags|=32),Gn}function jn(r,o,u){(r===ht&&(at===2||at===9)||r.cancelPendingCommit!==null)&&(io(r,0),Ji(r,We,Gn,!1)),rl(r,u),((rt&2)===0||r!==ht)&&(r===ht&&((rt&2)===0&&(Wr|=u),Nt===4&&Ji(r,We,Gn,!1)),Is(r))}function Jx(r,o,u){if((rt&6)!==0)throw Error(n(327));var p=!u&&(o&127)===0&&(o&r.expiredLanes)===0||kr(r,o),v=p?p2(r,o):Qp(r,o,!0),b=p;do{if(v===0){to&&!p&&Ji(r,o,0,!1);break}else{if(u=r.current.alternate,b&&!h2(u)){v=Qp(r,o,!1),b=!1;continue}if(v===2){if(b=o,r.errorRecoveryDisabledLanes&b)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){o=T;e:{var k=r;v=Il;var z=k.current.memoizedState.isDehydrated;if(z&&(io(k,T).flags|=256),T=Qp(k,T,!1),T!==2){if($p&&!z){k.errorRecoveryDisabledLanes|=b,Wr|=b,v=4;break e}b=kn,kn=v,b!==null&&(kn===null?kn=b:kn.push.apply(kn,b))}v=T}if(b=!1,v!==2)continue}}if(v===1){io(r,0),Ji(r,o,0,!0);break}e:{switch(p=r,b=v,b){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:Ji(p,o,Gn,!Wi);break e;case 2:kn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(v=Ku+300-Gt(),10<v)){if(Ji(p,o,Gn,!Wi),Li(p,0,!0)!==0)break e;bi=o,p.timeoutHandle=Mw(ew.bind(null,p,u,kn,Zu,qp,o,Gn,Wr,no,Wi,b,"Throttled",-0,0),v);break e}ew(p,u,kn,Zu,qp,o,Gn,Wr,no,Wi,b,null,-0,0)}}break}while(!0);Is(r)}function ew(r,o,u,p,v,b,T,k,z,K,re,ce,Z,ne){if(r.timeoutHandle=-1,ce=o.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ii},qx(o,b,ce);var we=(b&62914560)===b?Ku-Gt():(b&4194048)===b?Kx-Gt():0;if(we=K2(ce,we),we!==null){bi=b,r.cancelPendingCommit=we(lw.bind(null,r,o,b,u,p,v,T,k,z,re,ce,null,Z,ne)),Ji(r,b,T,!K);return}}lw(r,o,b,u,p,v,T,k,z)}function h2(r){for(var o=r;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var p=0;p<u.length;p++){var v=u[p],b=v.getSnapshot;v=v.value;try{if(!zn(b(),v))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ji(r,o,u,p){o&=~Gp,o&=~Wr,r.suspendedLanes|=o,r.pingedLanes&=~o,p&&(r.warmLanes|=o),p=r.expirationTimes;for(var v=o;0<v;){var b=31-yn(v),T=1<<b;p[b]=-1,v&=~T}u!==0&&ub(r,u,o)}function Ju(){return(rt&6)===0?(Bl(0),!1):!0}function Kp(){if(qe!==null){if(at===0)var r=qe.return;else r=qe,li=zr=null,hp(r),Ya=null,wl=0,r=qe;for(;r!==null;)Dx(r.alternate,r),r=r.return;qe=null}}function io(r,o){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,k2(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),bi=0,Kp(),ht=r,qe=u=ai(r.current,null),We=o,at=0,$n=null,Wi=!1,to=kr(r,o),$p=!1,no=Gn=Gp=Wr=Ki=Nt=0,kn=Il=null,qp=!1,(o&8)!==0&&(o|=o&32);var p=r.entangledLanes;if(p!==0)for(r=r.entanglements,p&=o;0<p;){var v=31-yn(p),b=1<<v;o|=r[v],p&=~b}return vi=o,xu(),u}function tw(r,o){ze=null,P.H=Nl,o===Xa||o===Ru?(o=y0(),at=3):o===ep?(o=y0(),at=4):at=o===Rp?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,$n=o,qe===null&&(Nt=1,Vu(r,is(o,r.current)))}function nw(){var r=Vn.current;return r===null?!0:(We&4194048)===We?ls===null:(We&62914560)===We||(We&536870912)!==0?r===ls:!1}function sw(){var r=P.H;return P.H=Nl,r===null?Nl:r}function iw(){var r=P.A;return P.A=u2,r}function ed(){Nt=4,Wi||(We&4194048)!==We&&Vn.current!==null||(to=!0),(Ki&134217727)===0&&(Wr&134217727)===0||ht===null||Ji(ht,We,Gn,!1)}function Qp(r,o,u){var p=rt;rt|=2;var v=sw(),b=iw();(ht!==r||We!==o)&&(Zu=null,io(r,o)),o=!1;var T=Nt;e:do try{if(at!==0&&qe!==null){var k=qe,z=$n;switch(at){case 8:Kp(),T=6;break e;case 3:case 2:case 9:case 6:Vn.current===null&&(o=!0);var K=at;if(at=0,$n=null,ro(r,k,z,K),u&&to){T=0;break e}break;default:K=at,at=0,$n=null,ro(r,k,z,K)}}f2(),T=Nt;break}catch(re){tw(r,re)}while(!0);return o&&r.shellSuspendCounter++,li=zr=null,rt=p,P.H=v,P.A=b,qe===null&&(ht=null,We=0,xu()),T}function f2(){for(;qe!==null;)rw(qe)}function p2(r,o){var u=rt;rt|=2;var p=sw(),v=iw();ht!==r||We!==o?(Zu=null,Qu=Gt()+500,io(r,o)):to=kr(r,o);e:do try{if(at!==0&&qe!==null){o=qe;var b=$n;t:switch(at){case 1:at=0,$n=null,ro(r,o,b,1);break;case 2:case 9:if(m0(b)){at=0,$n=null,aw(o);break}o=function(){at!==2&&at!==9||ht!==r||(at=7),Is(r)},b.then(o,o);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:m0(b)?(at=0,$n=null,aw(o)):(at=0,$n=null,ro(r,o,b,7));break;case 5:var T=null;switch(qe.tag){case 26:T=qe.memoizedState;case 5:case 27:var k=qe;if(T?Gw(T):k.stateNode.complete){at=0,$n=null;var z=k.sibling;if(z!==null)qe=z;else{var K=k.return;K!==null?(qe=K,td(K)):qe=null}break t}}at=0,$n=null,ro(r,o,b,5);break;case 6:at=0,$n=null,ro(r,o,b,6);break;case 8:Kp(),Nt=6;break e;default:throw Error(n(462))}}m2();break}catch(re){tw(r,re)}while(!0);return li=zr=null,P.H=p,P.A=v,rt=u,qe!==null?0:(ht=null,We=0,xu(),Nt)}function m2(){for(;qe!==null&&!Jn();)rw(qe)}function rw(r){var o=Nx(r.alternate,r,vi);r.memoizedProps=r.pendingProps,o===null?td(r):qe=o}function aw(r){var o=r,u=o.alternate;switch(o.tag){case 15:case 0:o=Ax(u,o,o.pendingProps,o.type,void 0,We);break;case 11:o=Ax(u,o,o.pendingProps,o.type.render,o.ref,We);break;case 5:hp(o);default:Dx(u,o),o=qe=i0(o,vi),o=Nx(u,o,vi)}r.memoizedProps=r.pendingProps,o===null?td(r):qe=o}function ro(r,o,u,p){li=zr=null,hp(o),Ya=null,wl=0;var v=o.return;try{if(s2(r,v,o,u,We)){Nt=1,Vu(r,is(u,r.current)),qe=null;return}}catch(b){if(v!==null)throw qe=v,b;Nt=1,Vu(r,is(u,r.current)),qe=null;return}o.flags&32768?(Ze||p===1?r=!0:to||(We&536870912)!==0?r=!1:(Wi=r=!0,(p===2||p===9||p===3||p===6)&&(p=Vn.current,p!==null&&p.tag===13&&(p.flags|=16384))),ow(o,r)):td(o)}function td(r){var o=r;do{if((o.flags&32768)!==0){ow(o,Wi);return}r=o.return;var u=a2(o.alternate,o,vi);if(u!==null){qe=u;return}if(o=o.sibling,o!==null){qe=o;return}qe=o=r}while(o!==null);Nt===0&&(Nt=5)}function ow(r,o){do{var u=o2(r.alternate,r);if(u!==null){u.flags&=32767,qe=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(r=r.sibling,r!==null)){qe=r;return}qe=r=u}while(r!==null);Nt=6,qe=null}function lw(r,o,u,p,v,b,T,k,z){r.cancelPendingCommit=null;do nd();while(Vt!==0);if((rt&6)!==0)throw Error(n(327));if(o!==null){if(o===r.current)throw Error(n(177));if(b=o.lanes|o.childLanes,b|=Bf,YM(r,u,b,T,k,z),r===ht&&(qe=ht=null,We=0),so=o,Zi=r,bi=u,Xp=b,Yp=v,Qx=p,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,b2(mn,function(){return fw(),null})):(r.callbackNode=null,r.callbackPriority=0),p=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||p){p=P.T,P.T=null,v=F.p,F.p=2,T=rt,rt|=4;try{l2(r,o,u)}finally{rt=T,F.p=v,P.T=p}}Vt=1,cw(),uw(),dw()}}function cw(){if(Vt===1){Vt=0;var r=Zi,o=so,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=P.T,P.T=null;var p=F.p;F.p=2;var v=rt;rt|=4;try{Hx(o,r);var b=cm,T=Wb(r.containerInfo),k=b.focusedElem,z=b.selectionRange;if(T!==k&&k&&k.ownerDocument&&Yb(k.ownerDocument.documentElement,k)){if(z!==null&&Of(k)){var K=z.start,re=z.end;if(re===void 0&&(re=K),"selectionStart"in k)k.selectionStart=K,k.selectionEnd=Math.min(re,k.value.length);else{var ce=k.ownerDocument||document,Z=ce&&ce.defaultView||window;if(Z.getSelection){var ne=Z.getSelection(),we=k.textContent.length,De=Math.min(z.start,we),ut=z.end===void 0?De:Math.min(z.end,we);!ne.extend&&De>ut&&(T=ut,ut=De,De=T);var G=Xb(k,De),H=Xb(k,ut);if(G&&H&&(ne.rangeCount!==1||ne.anchorNode!==G.node||ne.anchorOffset!==G.offset||ne.focusNode!==H.node||ne.focusOffset!==H.offset)){var W=ce.createRange();W.setStart(G.node,G.offset),ne.removeAllRanges(),De>ut?(ne.addRange(W),ne.extend(H.node,H.offset)):(W.setEnd(H.node,H.offset),ne.addRange(W))}}}}for(ce=[],ne=k;ne=ne.parentNode;)ne.nodeType===1&&ce.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<ce.length;k++){var le=ce[k];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}pd=!!lm,cm=lm=null}finally{rt=v,F.p=p,P.T=u}}r.current=o,Vt=2}}function uw(){if(Vt===2){Vt=0;var r=Zi,o=so,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=P.T,P.T=null;var p=F.p;F.p=2;var v=rt;rt|=4;try{Fx(r,o.alternate,o)}finally{rt=v,F.p=p,P.T=u}}Vt=3}}function dw(){if(Vt===4||Vt===3){Vt=0,Mr();var r=Zi,o=so,u=bi,p=Qx;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Vt=5:(Vt=0,so=Zi=null,hw(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(Qi=null),mf(u),o=o.stateNode,gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Dr,o,void 0,(o.current.flags&128)===128)}catch{}if(p!==null){o=P.T,v=F.p,F.p=2,P.T=null;try{for(var b=r.onRecoverableError,T=0;T<p.length;T++){var k=p[T];b(k.value,{componentStack:k.stack})}}finally{P.T=o,F.p=v}}(bi&3)!==0&&nd(),Is(r),v=r.pendingLanes,(u&261930)!==0&&(v&42)!==0?r===Wp?Fl++:(Fl=0,Wp=r):Fl=0,Bl(0)}}function hw(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,bl(o)))}function nd(){return cw(),uw(),dw(),fw()}function fw(){if(Vt!==5)return!1;var r=Zi,o=Xp;Xp=0;var u=mf(bi),p=P.T,v=F.p;try{F.p=32>u?32:u,P.T=null,u=Yp,Yp=null;var b=Zi,T=bi;if(Vt=0,so=Zi=null,bi=0,(rt&6)!==0)throw Error(n(331));var k=rt;if(rt|=4,Yx(b.current),Gx(b,b.current,T,u),rt=k,Bl(0,!1),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Dr,b)}catch{}return!0}finally{F.p=v,P.T=p,hw(r,o)}}function pw(r,o,u){o=is(u,o),o=Tp(r.stateNode,o,2),r=Gi(r,o,2),r!==null&&(rl(r,2),Is(r))}function ot(r,o,u){if(r.tag===3)pw(r,r,u);else for(;o!==null;){if(o.tag===3){pw(o,r,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Qi===null||!Qi.has(p))){r=is(u,r),u=mx(2),p=Gi(o,u,2),p!==null&&(gx(u,p,o,r),rl(p,2),Is(p));break}}o=o.return}}function Zp(r,o,u){var p=r.pingCache;if(p===null){p=r.pingCache=new d2;var v=new Set;p.set(o,v)}else v=p.get(o),v===void 0&&(v=new Set,p.set(o,v));v.has(u)||($p=!0,v.add(u),r=g2.bind(null,r,o,u),o.then(r,r))}function g2(r,o,u){var p=r.pingCache;p!==null&&p.delete(o),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,ht===r&&(We&u)===u&&(Nt===4||Nt===3&&(We&62914560)===We&&300>Gt()-Ku?(rt&2)===0&&io(r,0):Gp|=u,no===We&&(no=0)),Is(r)}function mw(r,o){o===0&&(o=cb()),r=Ir(r,o),r!==null&&(rl(r,o),Is(r))}function y2(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),mw(r,u)}function v2(r,o){var u=0;switch(r.tag){case 31:case 13:var p=r.stateNode,v=r.memoizedState;v!==null&&(u=v.retryLane);break;case 19:p=r.stateNode;break;case 22:p=r.stateNode._retryCache;break;default:throw Error(n(314))}p!==null&&p.delete(o),mw(r,u)}function b2(r,o){return nt(r,o)}var sd=null,ao=null,Jp=!1,id=!1,em=!1,er=0;function Is(r){r!==ao&&r.next===null&&(ao===null?sd=ao=r:ao=ao.next=r),id=!0,Jp||(Jp=!0,w2())}function Bl(r,o){if(!em&&id){em=!0;do for(var u=!1,p=sd;p!==null;){if(r!==0){var v=p.pendingLanes;if(v===0)var b=0;else{var T=p.suspendedLanes,k=p.pingedLanes;b=(1<<31-yn(42|r)+1)-1,b&=v&~(T&~k),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,bw(p,b))}else b=We,b=Li(p,p===ht?b:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(b&3)===0||kr(p,b)||(u=!0,bw(p,b));p=p.next}while(u);em=!1}}function x2(){gw()}function gw(){id=Jp=!1;var r=0;er!==0&&D2()&&(r=er);for(var o=Gt(),u=null,p=sd;p!==null;){var v=p.next,b=yw(p,o);b===0?(p.next=null,u===null?sd=v:u.next=v,v===null&&(ao=u)):(u=p,(r!==0||(b&3)!==0)&&(id=!0)),p=v}Vt!==0&&Vt!==5||Bl(r),er!==0&&(er=0)}function yw(r,o){for(var u=r.suspendedLanes,p=r.pingedLanes,v=r.expirationTimes,b=r.pendingLanes&-62914561;0<b;){var T=31-yn(b),k=1<<T,z=v[T];z===-1?((k&u)===0||(k&p)!==0)&&(v[T]=XM(k,o)):z<=o&&(r.expiredLanes|=k),b&=~k}if(o=ht,u=We,u=Li(r,r===o?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),p=r.callbackNode,u===0||r===o&&(at===2||at===9)||r.cancelPendingCommit!==null)return p!==null&&p!==null&&Fn(p),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||kr(r,u)){if(o=u&-u,o===r.callbackPriority)return o;switch(p!==null&&Fn(p),mf(u)){case 2:case 8:u=_a;break;case 32:u=mn;break;case 268435456:u=on;break;default:u=mn}return p=vw.bind(null,r),u=nt(u,p),r.callbackPriority=o,r.callbackNode=u,o}return p!==null&&p!==null&&Fn(p),r.callbackPriority=2,r.callbackNode=null,2}function vw(r,o){if(Vt!==0&&Vt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(nd()&&r.callbackNode!==u)return null;var p=We;return p=Li(r,r===ht?p:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),p===0?null:(Jx(r,p,o),yw(r,Gt()),r.callbackNode!=null&&r.callbackNode===u?vw.bind(null,r):null)}function bw(r,o){if(nd())return null;Jx(r,o,!0)}function w2(){j2(function(){(rt&6)!==0?nt(ni,x2):gw()})}function tm(){if(er===0){var r=Ga;r===0&&(r=bt,bt<<=1,(bt&261888)===0&&(bt=256)),er=r}return er}function xw(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:hu(""+r)}function ww(r,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,r.id&&u.setAttribute("form",r.id),o.parentNode.insertBefore(u,o),r=new FormData(r),u.parentNode.removeChild(u),r}function S2(r,o,u,p,v){if(o==="submit"&&u&&u.stateNode===v){var b=xw((v[Tn]||null).action),T=p.submitter;T&&(o=(o=T[Tn]||null)?xw(o.formAction):T.getAttribute("formAction"),o!==null&&(b=o,T=null));var k=new gu("action","action",null,p,v);r.push({event:k,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(er!==0){var z=T?ww(v,T):new FormData(v);wp(u,{pending:!0,data:z,method:v.method,action:b},null,z)}}else typeof b=="function"&&(k.preventDefault(),z=T?ww(v,T):new FormData(v),wp(u,{pending:!0,data:z,method:v.method,action:b},b,z))},currentTarget:v}]})}}for(var nm=0;nm<Ff.length;nm++){var sm=Ff[nm],A2=sm.toLowerCase(),C2=sm[0].toUpperCase()+sm.slice(1);ws(A2,"on"+C2)}ws(Zb,"onAnimationEnd"),ws(Jb,"onAnimationIteration"),ws(e0,"onAnimationStart"),ws("dblclick","onDoubleClick"),ws("focusin","onFocus"),ws("focusout","onBlur"),ws(zD,"onTransitionRun"),ws(UD,"onTransitionStart"),ws(VD,"onTransitionCancel"),ws(t0,"onTransitionEnd"),Da("onMouseEnter",["mouseout","mouseover"]),Da("onMouseLeave",["mouseout","mouseover"]),Da("onPointerEnter",["pointerout","pointerover"]),Da("onPointerLeave",["pointerout","pointerover"]),jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jr("onBeforeInput",["compositionend","keypress","textInput","paste"]),jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function Sw(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var p=r[u],v=p.event;p=p.listeners;e:{var b=void 0;if(o)for(var T=p.length-1;0<=T;T--){var k=p[T],z=k.instance,K=k.currentTarget;if(k=k.listener,z!==b&&v.isPropagationStopped())break e;b=k,v.currentTarget=K;try{b(v)}catch(re){bu(re)}v.currentTarget=null,b=z}else for(T=0;T<p.length;T++){if(k=p[T],z=k.instance,K=k.currentTarget,k=k.listener,z!==b&&v.isPropagationStopped())break e;b=k,v.currentTarget=K;try{b(v)}catch(re){bu(re)}v.currentTarget=null,b=z}}}}function Xe(r,o){var u=o[gf];u===void 0&&(u=o[gf]=new Set);var p=r+"__bubble";u.has(p)||(Aw(o,r,2,!1),u.add(p))}function im(r,o,u){var p=0;o&&(p|=4),Aw(u,r,p,o)}var rd="_reactListening"+Math.random().toString(36).slice(2);function rm(r){if(!r[rd]){r[rd]=!0,gb.forEach(function(u){u!=="selectionchange"&&(E2.has(u)||im(u,!1,r),im(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[rd]||(o[rd]=!0,im("selectionchange",!1,o))}}function Aw(r,o,u,p){switch(Zw(o)){case 2:var v=J2;break;case 8:v=ek;break;default:v=xm}u=v.bind(null,o,u,r),v=void 0,!Ef||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),p?v!==void 0?r.addEventListener(o,u,{capture:!0,passive:v}):r.addEventListener(o,u,!0):v!==void 0?r.addEventListener(o,u,{passive:v}):r.addEventListener(o,u,!1)}function am(r,o,u,p,v){var b=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var T=p.tag;if(T===3||T===4){var k=p.stateNode.containerInfo;if(k===v)break;if(T===4)for(T=p.return;T!==null;){var z=T.tag;if((z===3||z===4)&&T.stateNode.containerInfo===v)return;T=T.return}for(;k!==null;){if(T=Ra(k),T===null)return;if(z=T.tag,z===5||z===6||z===26||z===27){p=b=T;continue e}k=k.parentNode}}p=p.return}Rb(function(){var K=b,re=Af(u),ce=[];e:{var Z=n0.get(r);if(Z!==void 0){var ne=gu,we=r;switch(r){case"keypress":if(pu(u)===0)break e;case"keydown":case"keyup":ne=vD;break;case"focusin":we="focus",ne=Nf;break;case"focusout":we="blur",ne=Nf;break;case"beforeblur":case"afterblur":ne=Nf;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Db;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=aD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=wD;break;case Zb:case Jb:case e0:ne=cD;break;case t0:ne=AD;break;case"scroll":case"scrollend":ne=iD;break;case"wheel":ne=ED;break;case"copy":case"cut":case"paste":ne=dD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=jb;break;case"toggle":case"beforetoggle":ne=TD}var De=(o&4)!==0,ut=!De&&(r==="scroll"||r==="scrollend"),G=De?Z!==null?Z+"Capture":null:Z;De=[];for(var H=K,W;H!==null;){var le=H;if(W=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||W===null||G===null||(le=ll(H,G),le!=null&&De.push(Ul(H,le,W))),ut)break;H=H.return}0<De.length&&(Z=new ne(Z,we,null,u,re),ce.push({event:Z,listeners:De}))}}if((o&7)===0){e:{if(Z=r==="mouseover"||r==="pointerover",ne=r==="mouseout"||r==="pointerout",Z&&u!==Sf&&(we=u.relatedTarget||u.fromElement)&&(Ra(we)||we[Ta]))break e;if((ne||Z)&&(Z=re.window===re?re:(Z=re.ownerDocument)?Z.defaultView||Z.parentWindow:window,ne?(we=u.relatedTarget||u.toElement,ne=K,we=we?Ra(we):null,we!==null&&(ut=a(we),De=we.tag,we!==ut||De!==5&&De!==27&&De!==6)&&(we=null)):(ne=null,we=K),ne!==we)){if(De=Db,le="onMouseLeave",G="onMouseEnter",H="mouse",(r==="pointerout"||r==="pointerover")&&(De=jb,le="onPointerLeave",G="onPointerEnter",H="pointer"),ut=ne==null?Z:ol(ne),W=we==null?Z:ol(we),Z=new De(le,H+"leave",ne,u,re),Z.target=ut,Z.relatedTarget=W,le=null,Ra(re)===K&&(De=new De(G,H+"enter",we,u,re),De.target=W,De.relatedTarget=ut,le=De),ut=le,ne&&we)t:{for(De=_2,G=ne,H=we,W=0,le=G;le;le=De(le))W++;le=0;for(var Ne=H;Ne;Ne=De(Ne))le++;for(;0<W-le;)G=De(G),W--;for(;0<le-W;)H=De(H),le--;for(;W--;){if(G===H||H!==null&&G===H.alternate){De=G;break t}G=De(G),H=De(H)}De=null}else De=null;ne!==null&&Cw(ce,Z,ne,De,!1),we!==null&&ut!==null&&Cw(ce,ut,we,De,!0)}}e:{if(Z=K?ol(K):window,ne=Z.nodeName&&Z.nodeName.toLowerCase(),ne==="select"||ne==="input"&&Z.type==="file")var st=Ub;else if(Bb(Z))if(Vb)st=ID;else{st=PD;var Ee=OD}else ne=Z.nodeName,!ne||ne.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?K&&wf(K.elementType)&&(st=Ub):st=LD;if(st&&(st=st(r,K))){zb(ce,st,u,re);break e}Ee&&Ee(r,Z,K),r==="focusout"&&K&&Z.type==="number"&&K.memoizedProps.value!=null&&xf(Z,"number",Z.value)}switch(Ee=K?ol(K):window,r){case"focusin":(Bb(Ee)||Ee.contentEditable==="true")&&(Ia=Ee,Pf=K,gl=null);break;case"focusout":gl=Pf=Ia=null;break;case"mousedown":Lf=!0;break;case"contextmenu":case"mouseup":case"dragend":Lf=!1,Kb(ce,u,re);break;case"selectionchange":if(BD)break;case"keydown":case"keyup":Kb(ce,u,re)}var He;if(Df)e:{switch(r){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else La?Ib(r,u)&&(Ke="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(Ke="onCompositionStart");Ke&&(Ob&&u.locale!=="ko"&&(La||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&La&&(He=Nb()):(Fi=re,_f="value"in Fi?Fi.value:Fi.textContent,La=!0)),Ee=ad(K,Ke),0<Ee.length&&(Ke=new kb(Ke,r,null,u,re),ce.push({event:Ke,listeners:Ee}),He?Ke.data=He:(He=Fb(u),He!==null&&(Ke.data=He)))),(He=ND?MD(r,u):DD(r,u))&&(Ke=ad(K,"onBeforeInput"),0<Ke.length&&(Ee=new kb("onBeforeInput","beforeinput",null,u,re),ce.push({event:Ee,listeners:Ke}),Ee.data=He)),S2(ce,r,K,u,re)}Sw(ce,o)})}function Ul(r,o,u){return{instance:r,listener:o,currentTarget:u}}function ad(r,o){for(var u=o+"Capture",p=[];r!==null;){var v=r,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=ll(r,u),v!=null&&p.unshift(Ul(r,v,b)),v=ll(r,o),v!=null&&p.push(Ul(r,v,b))),r.tag===3)return p;r=r.return}return[]}function _2(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Cw(r,o,u,p,v){for(var b=o._reactName,T=[];u!==null&&u!==p;){var k=u,z=k.alternate,K=k.stateNode;if(k=k.tag,z!==null&&z===p)break;k!==5&&k!==26&&k!==27||K===null||(z=K,v?(K=ll(u,b),K!=null&&T.unshift(Ul(u,K,z))):v||(K=ll(u,b),K!=null&&T.push(Ul(u,K,z)))),u=u.return}T.length!==0&&r.push({event:o,listeners:T})}var T2=/\r\n?/g,R2=/\u0000|\uFFFD/g;function Ew(r){return(typeof r=="string"?r:""+r).replace(T2,`
`).replace(R2,"")}function _w(r,o){return o=Ew(o),Ew(r)===o}function ct(r,o,u,p,v,b){switch(u){case"children":typeof p=="string"?o==="body"||o==="textarea"&&p===""||ja(r,p):(typeof p=="number"||typeof p=="bigint")&&o!=="body"&&ja(r,""+p);break;case"className":uu(r,"class",p);break;case"tabIndex":uu(r,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":uu(r,u,p);break;case"style":_b(r,p,b);break;case"data":if(o!=="object"){uu(r,"data",p);break}case"src":case"href":if(p===""&&(o!=="a"||u!=="href")){r.removeAttribute(u);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){r.removeAttribute(u);break}p=hu(""+p),r.setAttribute(u,p);break;case"action":case"formAction":if(typeof p=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(o!=="input"&&ct(r,o,"name",v.name,v,null),ct(r,o,"formEncType",v.formEncType,v,null),ct(r,o,"formMethod",v.formMethod,v,null),ct(r,o,"formTarget",v.formTarget,v,null)):(ct(r,o,"encType",v.encType,v,null),ct(r,o,"method",v.method,v,null),ct(r,o,"target",v.target,v,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){r.removeAttribute(u);break}p=hu(""+p),r.setAttribute(u,p);break;case"onClick":p!=null&&(r.onclick=ii);break;case"onScroll":p!=null&&Xe("scroll",r);break;case"onScrollEnd":p!=null&&Xe("scrollend",r);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(u=p.__html,u!=null){if(v.children!=null)throw Error(n(60));r.innerHTML=u}}break;case"multiple":r.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":r.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){r.removeAttribute("xlink:href");break}u=hu(""+p),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?r.setAttribute(u,""+p):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":p===!0?r.setAttribute(u,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?r.setAttribute(u,p):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?r.setAttribute(u,p):r.removeAttribute(u);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?r.removeAttribute(u):r.setAttribute(u,p);break;case"popover":Xe("beforetoggle",r),Xe("toggle",r),cu(r,"popover",p);break;case"xlinkActuate":si(r,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":si(r,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":si(r,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":si(r,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":si(r,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":si(r,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":si(r,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":si(r,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":si(r,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":cu(r,"is",p);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=nD.get(u)||u,cu(r,u,p))}}function om(r,o,u,p,v,b){switch(u){case"style":_b(r,p,b);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(u=p.__html,u!=null){if(v.children!=null)throw Error(n(60));r.innerHTML=u}}break;case"children":typeof p=="string"?ja(r,p):(typeof p=="number"||typeof p=="bigint")&&ja(r,""+p);break;case"onScroll":p!=null&&Xe("scroll",r);break;case"onScrollEnd":p!=null&&Xe("scrollend",r);break;case"onClick":p!=null&&(r.onclick=ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yb.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),o=u.slice(2,v?u.length-7:void 0),b=r[Tn]||null,b=b!=null?b[u]:null,typeof b=="function"&&r.removeEventListener(o,b,v),typeof p=="function")){typeof b!="function"&&b!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(o,p,v);break e}u in r?r[u]=p:p===!0?r.setAttribute(u,""):cu(r,u,p)}}}function nn(r,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",r),Xe("load",r);var p=!1,v=!1,b;for(b in u)if(u.hasOwnProperty(b)){var T=u[b];if(T!=null)switch(b){case"src":p=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ct(r,o,b,T,u,null)}}v&&ct(r,o,"srcSet",u.srcSet,u,null),p&&ct(r,o,"src",u.src,u,null);return;case"input":Xe("invalid",r);var k=b=T=v=null,z=null,K=null;for(p in u)if(u.hasOwnProperty(p)){var re=u[p];if(re!=null)switch(p){case"name":v=re;break;case"type":T=re;break;case"checked":z=re;break;case"defaultChecked":K=re;break;case"value":b=re;break;case"defaultValue":k=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(n(137,o));break;default:ct(r,o,p,re,u,null)}}Sb(r,b,k,z,K,T,v,!1);return;case"select":Xe("invalid",r),p=T=b=null;for(v in u)if(u.hasOwnProperty(v)&&(k=u[v],k!=null))switch(v){case"value":b=k;break;case"defaultValue":T=k;break;case"multiple":p=k;default:ct(r,o,v,k,u,null)}o=b,u=T,r.multiple=!!p,o!=null?ka(r,!!p,o,!1):u!=null&&ka(r,!!p,u,!0);return;case"textarea":Xe("invalid",r),b=v=p=null;for(T in u)if(u.hasOwnProperty(T)&&(k=u[T],k!=null))switch(T){case"value":p=k;break;case"defaultValue":v=k;break;case"children":b=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(n(91));break;default:ct(r,o,T,k,u,null)}Cb(r,p,v,b);return;case"option":for(z in u)u.hasOwnProperty(z)&&(p=u[z],p!=null)&&(z==="selected"?r.selected=p&&typeof p!="function"&&typeof p!="symbol":ct(r,o,z,p,u,null));return;case"dialog":Xe("beforetoggle",r),Xe("toggle",r),Xe("cancel",r),Xe("close",r);break;case"iframe":case"object":Xe("load",r);break;case"video":case"audio":for(p=0;p<zl.length;p++)Xe(zl[p],r);break;case"image":Xe("error",r),Xe("load",r);break;case"details":Xe("toggle",r);break;case"embed":case"source":case"link":Xe("error",r),Xe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in u)if(u.hasOwnProperty(K)&&(p=u[K],p!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ct(r,o,K,p,u,null)}return;default:if(wf(o)){for(re in u)u.hasOwnProperty(re)&&(p=u[re],p!==void 0&&om(r,o,re,p,u,void 0));return}}for(k in u)u.hasOwnProperty(k)&&(p=u[k],p!=null&&ct(r,o,k,p,u,null))}function N2(r,o,u,p){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,T=null,k=null,z=null,K=null,re=null;for(ne in u){var ce=u[ne];if(u.hasOwnProperty(ne)&&ce!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":z=ce;default:p.hasOwnProperty(ne)||ct(r,o,ne,null,p,ce)}}for(var Z in p){var ne=p[Z];if(ce=u[Z],p.hasOwnProperty(Z)&&(ne!=null||ce!=null))switch(Z){case"type":b=ne;break;case"name":v=ne;break;case"checked":K=ne;break;case"defaultChecked":re=ne;break;case"value":T=ne;break;case"defaultValue":k=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(n(137,o));break;default:ne!==ce&&ct(r,o,Z,ne,p,ce)}}bf(r,T,k,z,K,re,b,v);return;case"select":ne=T=k=Z=null;for(b in u)if(z=u[b],u.hasOwnProperty(b)&&z!=null)switch(b){case"value":break;case"multiple":ne=z;default:p.hasOwnProperty(b)||ct(r,o,b,null,p,z)}for(v in p)if(b=p[v],z=u[v],p.hasOwnProperty(v)&&(b!=null||z!=null))switch(v){case"value":Z=b;break;case"defaultValue":k=b;break;case"multiple":T=b;default:b!==z&&ct(r,o,v,b,p,z)}o=k,u=T,p=ne,Z!=null?ka(r,!!u,Z,!1):!!p!=!!u&&(o!=null?ka(r,!!u,o,!0):ka(r,!!u,u?[]:"",!1));return;case"textarea":ne=Z=null;for(k in u)if(v=u[k],u.hasOwnProperty(k)&&v!=null&&!p.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:ct(r,o,k,null,p,v)}for(T in p)if(v=p[T],b=u[T],p.hasOwnProperty(T)&&(v!=null||b!=null))switch(T){case"value":Z=v;break;case"defaultValue":ne=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(n(91));break;default:v!==b&&ct(r,o,T,v,p,b)}Ab(r,Z,ne);return;case"option":for(var we in u)Z=u[we],u.hasOwnProperty(we)&&Z!=null&&!p.hasOwnProperty(we)&&(we==="selected"?r.selected=!1:ct(r,o,we,null,p,Z));for(z in p)Z=p[z],ne=u[z],p.hasOwnProperty(z)&&Z!==ne&&(Z!=null||ne!=null)&&(z==="selected"?r.selected=Z&&typeof Z!="function"&&typeof Z!="symbol":ct(r,o,z,Z,p,ne));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in u)Z=u[De],u.hasOwnProperty(De)&&Z!=null&&!p.hasOwnProperty(De)&&ct(r,o,De,null,p,Z);for(K in p)if(Z=p[K],ne=u[K],p.hasOwnProperty(K)&&Z!==ne&&(Z!=null||ne!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(137,o));break;default:ct(r,o,K,Z,p,ne)}return;default:if(wf(o)){for(var ut in u)Z=u[ut],u.hasOwnProperty(ut)&&Z!==void 0&&!p.hasOwnProperty(ut)&&om(r,o,ut,void 0,p,Z);for(re in p)Z=p[re],ne=u[re],!p.hasOwnProperty(re)||Z===ne||Z===void 0&&ne===void 0||om(r,o,re,Z,p,ne);return}}for(var G in u)Z=u[G],u.hasOwnProperty(G)&&Z!=null&&!p.hasOwnProperty(G)&&ct(r,o,G,null,p,Z);for(ce in p)Z=p[ce],ne=u[ce],!p.hasOwnProperty(ce)||Z===ne||Z==null&&ne==null||ct(r,o,ce,Z,p,ne)}function Tw(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function M2(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,u=performance.getEntriesByType("resource"),p=0;p<u.length;p++){var v=u[p],b=v.transferSize,T=v.initiatorType,k=v.duration;if(b&&k&&Tw(T)){for(T=0,k=v.responseEnd,p+=1;p<u.length;p++){var z=u[p],K=z.startTime;if(K>k)break;var re=z.transferSize,ce=z.initiatorType;re&&Tw(ce)&&(z=z.responseEnd,T+=re*(z<k?1:(k-K)/(z-K)))}if(--p,o+=8*(b+T)/(v.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var lm=null,cm=null;function od(r){return r.nodeType===9?r:r.ownerDocument}function Rw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Nw(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function um(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var dm=null;function D2(){var r=window.event;return r&&r.type==="popstate"?r===dm?!1:(dm=r,!0):(dm=null,!1)}var Mw=typeof setTimeout=="function"?setTimeout:void 0,k2=typeof clearTimeout=="function"?clearTimeout:void 0,Dw=typeof Promise=="function"?Promise:void 0,j2=typeof queueMicrotask=="function"?queueMicrotask:typeof Dw<"u"?function(r){return Dw.resolve(null).then(r).catch(O2)}:Mw;function O2(r){setTimeout(function(){throw r})}function tr(r){return r==="head"}function kw(r,o){var u=o,p=0;do{var v=u.nextSibling;if(r.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(p===0){r.removeChild(v),uo(o);return}p--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")p++;else if(u==="html")Vl(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,Vl(u);for(var b=u.firstChild;b;){var T=b.nextSibling,k=b.nodeName;b[al]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&b.rel.toLowerCase()==="stylesheet"||u.removeChild(b),b=T}}else u==="body"&&Vl(r.ownerDocument.body);u=v}while(u);uo(o)}function jw(r,o){var u=r;r=0;do{var p=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),p&&p.nodeType===8)if(u=p.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=p}while(u)}function hm(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":hm(u),yf(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function P2(r,o,u,p){for(;r.nodeType===1;){var v=u;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!p&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(p){if(!r[al])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(b=r.getAttribute("rel"),b==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(b!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(b=r.getAttribute("src"),(b!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===b)return r}else return r;if(r=cs(r.nextSibling),r===null)break}return null}function L2(r,o,u){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=cs(r.nextSibling),r===null))return null;return r}function Ow(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=cs(r.nextSibling),r===null))return null;return r}function fm(r){return r.data==="$?"||r.data==="$~"}function pm(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function I2(r,o){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||u.readyState!=="loading")o();else{var p=function(){o(),u.removeEventListener("DOMContentLoaded",p)};u.addEventListener("DOMContentLoaded",p),r._reactRetry=p}}function cs(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var mm=null;function Pw(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(o===0)return cs(r.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}r=r.nextSibling}return null}function Lw(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return r;o--}else u!=="/$"&&u!=="/&"||o++}r=r.previousSibling}return null}function Iw(r,o,u){switch(o=od(u),r){case"html":if(r=o.documentElement,!r)throw Error(n(452));return r;case"head":if(r=o.head,!r)throw Error(n(453));return r;case"body":if(r=o.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function Vl(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);yf(r)}var us=new Map,Fw=new Set;function ld(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var xi=F.d;F.d={f:F2,r:B2,D:z2,C:U2,L:V2,m:H2,X:G2,S:$2,M:q2};function F2(){var r=xi.f(),o=Ju();return r||o}function B2(r){var o=Na(r);o!==null&&o.tag===5&&o.type==="form"?tx(o):xi.r(r)}var oo=typeof document>"u"?null:document;function Bw(r,o,u){var p=oo;if(p&&typeof o=="string"&&o){var v=ns(o);v='link[rel="'+r+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),Fw.has(v)||(Fw.add(v),r={rel:r,crossOrigin:u,href:o},p.querySelector(v)===null&&(o=p.createElement("link"),nn(o,"link",r),qt(o),p.head.appendChild(o)))}}function z2(r){xi.D(r),Bw("dns-prefetch",r,null)}function U2(r,o){xi.C(r,o),Bw("preconnect",r,o)}function V2(r,o,u){xi.L(r,o,u);var p=oo;if(p&&r&&o){var v='link[rel="preload"][as="'+ns(o)+'"]';o==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+ns(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+ns(u.imageSizes)+'"]')):v+='[href="'+ns(r)+'"]';var b=v;switch(o){case"style":b=lo(r);break;case"script":b=co(r)}us.has(b)||(r=m({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:r,as:o},u),us.set(b,r),p.querySelector(v)!==null||o==="style"&&p.querySelector(Hl(b))||o==="script"&&p.querySelector($l(b))||(o=p.createElement("link"),nn(o,"link",r),qt(o),p.head.appendChild(o)))}}function H2(r,o){xi.m(r,o);var u=oo;if(u&&r){var p=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+ns(p)+'"][href="'+ns(r)+'"]',b=v;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=co(r)}if(!us.has(b)&&(r=m({rel:"modulepreload",href:r},o),us.set(b,r),u.querySelector(v)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector($l(b)))return}p=u.createElement("link"),nn(p,"link",r),qt(p),u.head.appendChild(p)}}}function $2(r,o,u){xi.S(r,o,u);var p=oo;if(p&&r){var v=Ma(p).hoistableStyles,b=lo(r);o=o||"default";var T=v.get(b);if(!T){var k={loading:0,preload:null};if(T=p.querySelector(Hl(b)))k.loading=5;else{r=m({rel:"stylesheet",href:r,"data-precedence":o},u),(u=us.get(b))&&gm(r,u);var z=T=p.createElement("link");qt(z),nn(z,"link",r),z._p=new Promise(function(K,re){z.onload=K,z.onerror=re}),z.addEventListener("load",function(){k.loading|=1}),z.addEventListener("error",function(){k.loading|=2}),k.loading|=4,cd(T,o,p)}T={type:"stylesheet",instance:T,count:1,state:k},v.set(b,T)}}}function G2(r,o){xi.X(r,o);var u=oo;if(u&&r){var p=Ma(u).hoistableScripts,v=co(r),b=p.get(v);b||(b=u.querySelector($l(v)),b||(r=m({src:r,async:!0},o),(o=us.get(v))&&ym(r,o),b=u.createElement("script"),qt(b),nn(b,"link",r),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},p.set(v,b))}}function q2(r,o){xi.M(r,o);var u=oo;if(u&&r){var p=Ma(u).hoistableScripts,v=co(r),b=p.get(v);b||(b=u.querySelector($l(v)),b||(r=m({src:r,async:!0,type:"module"},o),(o=us.get(v))&&ym(r,o),b=u.createElement("script"),qt(b),nn(b,"link",r),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},p.set(v,b))}}function zw(r,o,u,p){var v=(v=se.current)?ld(v):null;if(!v)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=lo(u.href),u=Ma(v).hoistableStyles,p=u.get(o),p||(p={type:"style",instance:null,count:0,state:null},u.set(o,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=lo(u.href);var b=Ma(v).hoistableStyles,T=b.get(r);if(T||(v=v.ownerDocument||v,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(r,T),(b=v.querySelector(Hl(r)))&&!b._p&&(T.instance=b,T.state.loading=5),us.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},us.set(r,u),b||X2(v,r,u,T.state))),o&&p===null)throw Error(n(528,""));return T}if(o&&p!==null)throw Error(n(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=co(u),u=Ma(v).hoistableScripts,p=u.get(o),p||(p={type:"script",instance:null,count:0,state:null},u.set(o,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function lo(r){return'href="'+ns(r)+'"'}function Hl(r){return'link[rel="stylesheet"]['+r+"]"}function Uw(r){return m({},r,{"data-precedence":r.precedence,precedence:null})}function X2(r,o,u,p){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?p.loading=1:(o=r.createElement("link"),p.preload=o,o.addEventListener("load",function(){return p.loading|=1}),o.addEventListener("error",function(){return p.loading|=2}),nn(o,"link",u),qt(o),r.head.appendChild(o))}function co(r){return'[src="'+ns(r)+'"]'}function $l(r){return"script[async]"+r}function Vw(r,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var p=r.querySelector('style[data-href~="'+ns(u.href)+'"]');if(p)return o.instance=p,qt(p),p;var v=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return p=(r.ownerDocument||r).createElement("style"),qt(p),nn(p,"style",v),cd(p,u.precedence,r),o.instance=p;case"stylesheet":v=lo(u.href);var b=r.querySelector(Hl(v));if(b)return o.state.loading|=4,o.instance=b,qt(b),b;p=Uw(u),(v=us.get(v))&&gm(p,v),b=(r.ownerDocument||r).createElement("link"),qt(b);var T=b;return T._p=new Promise(function(k,z){T.onload=k,T.onerror=z}),nn(b,"link",p),o.state.loading|=4,cd(b,u.precedence,r),o.instance=b;case"script":return b=co(u.src),(v=r.querySelector($l(b)))?(o.instance=v,qt(v),v):(p=u,(v=us.get(b))&&(p=m({},u),ym(p,v)),r=r.ownerDocument||r,v=r.createElement("script"),qt(v),nn(v,"link",p),r.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(p=o.instance,o.state.loading|=4,cd(p,u.precedence,r));return o.instance}function cd(r,o,u){for(var p=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=p.length?p[p.length-1]:null,b=v,T=0;T<p.length;T++){var k=p[T];if(k.dataset.precedence===o)b=k;else if(b!==v)break}b?b.parentNode.insertBefore(r,b.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(r,o.firstChild))}function gm(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function ym(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var ud=null;function Hw(r,o,u){if(ud===null){var p=new Map,v=ud=new Map;v.set(u,p)}else v=ud,p=v.get(u),p||(p=new Map,v.set(u,p));if(p.has(r))return p;for(p.set(r,null),u=u.getElementsByTagName(r),v=0;v<u.length;v++){var b=u[v];if(!(b[al]||b[Zt]||r==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var T=b.getAttribute(o)||"";T=r+T;var k=p.get(T);k?k.push(b):p.set(T,[b])}}return p}function $w(r,o,u){r=r.ownerDocument||r,r.head.insertBefore(u,o==="title"?r.querySelector("head > title"):null)}function Y2(r,o,u){if(u===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(r=o.disabled,typeof o.precedence=="string"&&r==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Gw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function W2(r,o,u,p){if(u.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=lo(p.href),b=o.querySelector(Hl(v));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=dd.bind(r),o.then(r,r)),u.state.loading|=4,u.instance=b,qt(b);return}b=o.ownerDocument||o,p=Uw(p),(v=us.get(v))&&gm(p,v),b=b.createElement("link"),qt(b);var T=b;T._p=new Promise(function(k,z){T.onload=k,T.onerror=z}),nn(b,"link",p),u.instance=b}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=dd.bind(r),o.addEventListener("load",u),o.addEventListener("error",u))}}var vm=0;function K2(r,o){return r.stylesheets&&r.count===0&&fd(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var p=setTimeout(function(){if(r.stylesheets&&fd(r,r.stylesheets),r.unsuspend){var b=r.unsuspend;r.unsuspend=null,b()}},6e4+o);0<r.imgBytes&&vm===0&&(vm=62500*M2());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&fd(r,r.stylesheets),r.unsuspend)){var b=r.unsuspend;r.unsuspend=null,b()}},(r.imgBytes>vm?50:800)+o);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(p),clearTimeout(v)}}:null}function dd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)fd(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var hd=null;function fd(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,hd=new Map,o.forEach(Q2,r),hd=null,dd.call(r))}function Q2(r,o){if(!(o.state.loading&4)){var u=hd.get(r);if(u)var p=u.get(null);else{u=new Map,hd.set(r,u);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var T=v[b];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(u.set(T.dataset.precedence,T),p=T)}p&&u.set(null,p)}v=o.instance,T=v.getAttribute("data-precedence"),b=u.get(T)||p,b===p&&u.set(null,v),u.set(T,v),this.count++,p=dd.bind(this),v.addEventListener("load",p),v.addEventListener("error",p),b?b.parentNode.insertBefore(v,b.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),o.state.loading|=4}}var Gl={$$typeof:R,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function Z2(r,o,u,p,v,b,T,k,z){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ff(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ff(0),this.hiddenUpdates=ff(null),this.identifierPrefix=p,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function qw(r,o,u,p,v,b,T,k,z,K,re,ce){return r=new Z2(r,o,u,T,z,K,re,ce,k),o=1,b===!0&&(o|=24),b=Un(3,null,null,o),r.current=b,b.stateNode=r,o=Qf(),o.refCount++,r.pooledCache=o,o.refCount++,b.memoizedState={element:p,isDehydrated:u,cache:o},tp(b),r}function Xw(r){return r?(r=za,r):za}function Yw(r,o,u,p,v,b){v=Xw(v),p.context===null?p.context=v:p.pendingContext=v,p=$i(o),p.payload={element:u},b=b===void 0?null:b,b!==null&&(p.callback=b),u=Gi(r,p,o),u!==null&&(jn(u,r,o),Al(u,r,o))}function Ww(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function bm(r,o){Ww(r,o),(r=r.alternate)&&Ww(r,o)}function Kw(r){if(r.tag===13||r.tag===31){var o=Ir(r,67108864);o!==null&&jn(o,r,67108864),bm(r,67108864)}}function Qw(r){if(r.tag===13||r.tag===31){var o=qn();o=pf(o);var u=Ir(r,o);u!==null&&jn(u,r,o),bm(r,o)}}var pd=!0;function J2(r,o,u,p){var v=P.T;P.T=null;var b=F.p;try{F.p=2,xm(r,o,u,p)}finally{F.p=b,P.T=v}}function ek(r,o,u,p){var v=P.T;P.T=null;var b=F.p;try{F.p=8,xm(r,o,u,p)}finally{F.p=b,P.T=v}}function xm(r,o,u,p){if(pd){var v=wm(p);if(v===null)am(r,o,p,md,u),Jw(r,p);else if(nk(v,r,o,u,p))p.stopPropagation();else if(Jw(r,p),o&4&&-1<tk.indexOf(r)){for(;v!==null;){var b=Na(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var T=Ut(b.pendingLanes);if(T!==0){var k=b;for(k.pendingLanes|=2,k.entangledLanes|=2;T;){var z=1<<31-yn(T);k.entanglements[1]|=z,T&=~z}Is(b),(rt&6)===0&&(Qu=Gt()+500,Bl(0))}}break;case 31:case 13:k=Ir(b,2),k!==null&&jn(k,b,2),Ju(),bm(b,2)}if(b=wm(p),b===null&&am(r,o,p,md,u),b===v)break;v=b}v!==null&&p.stopPropagation()}else am(r,o,p,null,u)}}function wm(r){return r=Af(r),Sm(r)}var md=null;function Sm(r){if(md=null,r=Ra(r),r!==null){var o=a(r);if(o===null)r=null;else{var u=o.tag;if(u===13){if(r=l(o),r!==null)return r;r=null}else if(u===31){if(r=c(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return md=r,null}function Zw(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(il()){case ni:return 2;case _a:return 8;case mn:case ks:return 32;case on:return 268435456;default:return 32}default:return 32}}var Am=!1,nr=null,sr=null,ir=null,ql=new Map,Xl=new Map,rr=[],tk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jw(r,o){switch(r){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":ql.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(o.pointerId)}}function Yl(r,o,u,p,v,b){return r===null||r.nativeEvent!==b?(r={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:b,targetContainers:[v]},o!==null&&(o=Na(o),o!==null&&Kw(o)),r):(r.eventSystemFlags|=p,o=r.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),r)}function nk(r,o,u,p,v){switch(o){case"focusin":return nr=Yl(nr,r,o,u,p,v),!0;case"dragenter":return sr=Yl(sr,r,o,u,p,v),!0;case"mouseover":return ir=Yl(ir,r,o,u,p,v),!0;case"pointerover":var b=v.pointerId;return ql.set(b,Yl(ql.get(b)||null,r,o,u,p,v)),!0;case"gotpointercapture":return b=v.pointerId,Xl.set(b,Yl(Xl.get(b)||null,r,o,u,p,v)),!0}return!1}function eS(r){var o=Ra(r.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){r.blockedOn=o,pb(r.priority,function(){Qw(u)});return}}else if(o===31){if(o=c(u),o!==null){r.blockedOn=o,pb(r.priority,function(){Qw(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function gd(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=wm(r.nativeEvent);if(u===null){u=r.nativeEvent;var p=new u.constructor(u.type,u);Sf=p,u.target.dispatchEvent(p),Sf=null}else return o=Na(u),o!==null&&Kw(o),r.blockedOn=u,!1;o.shift()}return!0}function tS(r,o,u){gd(r)&&u.delete(o)}function sk(){Am=!1,nr!==null&&gd(nr)&&(nr=null),sr!==null&&gd(sr)&&(sr=null),ir!==null&&gd(ir)&&(ir=null),ql.forEach(tS),Xl.forEach(tS)}function yd(r,o){r.blockedOn===o&&(r.blockedOn=null,Am||(Am=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,sk)))}var vd=null;function nS(r){vd!==r&&(vd=r,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){vd===r&&(vd=null);for(var o=0;o<r.length;o+=3){var u=r[o],p=r[o+1],v=r[o+2];if(typeof p!="function"){if(Sm(p||u)===null)continue;break}var b=Na(u);b!==null&&(r.splice(o,3),o-=3,wp(b,{pending:!0,data:v,method:u.method,action:p},p,v))}}))}function uo(r){function o(z){return yd(z,r)}nr!==null&&yd(nr,r),sr!==null&&yd(sr,r),ir!==null&&yd(ir,r),ql.forEach(o),Xl.forEach(o);for(var u=0;u<rr.length;u++){var p=rr[u];p.blockedOn===r&&(p.blockedOn=null)}for(;0<rr.length&&(u=rr[0],u.blockedOn===null);)eS(u),u.blockedOn===null&&rr.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(p=0;p<u.length;p+=3){var v=u[p],b=u[p+1],T=v[Tn]||null;if(typeof b=="function")T||nS(u);else if(T){var k=null;if(b&&b.hasAttribute("formAction")){if(v=b,T=b[Tn]||null)k=T.formAction;else if(Sm(v)!==null)continue}else k=T.action;typeof k=="function"?u[p+1]=k:(u.splice(p,3),p-=3),nS(u)}}}function sS(){function r(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(T){return v=T})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),p||setTimeout(u,20)}function u(){if(!p&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){p=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function Cm(r){this._internalRoot=r}bd.prototype.render=Cm.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));var u=o.current,p=qn();Yw(u,p,r,o,null,null)},bd.prototype.unmount=Cm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;Yw(r.current,2,null,r,null,null),Ju(),o[Ta]=null}};function bd(r){this._internalRoot=r}bd.prototype.unstable_scheduleHydration=function(r){if(r){var o=fb();r={blockedOn:null,target:r,priority:o};for(var u=0;u<rr.length&&o!==0&&o<rr[u].priority;u++);rr.splice(u,0,r),u===0&&eS(r)}};var iS=e.version;if(iS!=="19.2.3")throw Error(n(527,iS,"19.2.3"));F.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=h(o),r=r!==null?f(r):null,r=r===null?null:r.stateNode,r};var ik={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xd.isDisabled&&xd.supportsFiber)try{Dr=xd.inject(ik),gn=xd}catch{}}return Kl.createRoot=function(r,o){if(!i(r))throw Error(n(299));var u=!1,p="",v=dx,b=hx,T=fx;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError)),o=qw(r,1,!1,null,null,u,p,null,v,b,T,sS),r[Ta]=o.current,rm(r),new Cm(o)},Kl.hydrateRoot=function(r,o,u){if(!i(r))throw Error(n(299));var p=!1,v="",b=dx,T=hx,k=fx,z=null;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(T=u.onCaughtError),u.onRecoverableError!==void 0&&(k=u.onRecoverableError),u.formState!==void 0&&(z=u.formState)),o=qw(r,1,!0,o,u??null,p,v,z,b,T,k,sS),o.context=Xw(null),u=o.current,p=qn(),p=pf(p),v=$i(p),v.callback=null,Gi(u,v,p),u=p,o.current.lanes=u,rl(o,u),Is(o),r[Ta]=o.current,rm(r),new bd(o)},Kl.version="19.2.3",Kl}var gS;function pk(){if(gS)return Rm.exports;gS=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Rm.exports=fk(),Rm.exports}var mk=pk();const Pe=s=>typeof s=="string",Ql=()=>{let s,e;const t=new Promise((n,i)=>{s=n,e=i});return t.resolve=s,t.reject=e,t},yS=s=>s==null?"":""+s,gk=(s,e,t)=>{s.forEach(n=>{e[n]&&(t[n]=e[n])})},yk=/###/g,vS=s=>s&&s.indexOf("###")>-1?s.replace(yk,"."):s,bS=s=>!s||Pe(s),pc=(s,e,t)=>{const n=Pe(e)?e.split("."):e;let i=0;for(;i<n.length-1;){if(bS(s))return{};const a=vS(n[i]);!s[a]&&t&&(s[a]=new t),Object.prototype.hasOwnProperty.call(s,a)?s=s[a]:s={},++i}return bS(s)?{}:{obj:s,k:vS(n[i])}},xS=(s,e,t)=>{const{obj:n,k:i}=pc(s,e,Object);if(n!==void 0||e.length===1){n[i]=t;return}let a=e[e.length-1],l=e.slice(0,e.length-1),c=pc(s,l,Object);for(;c.obj===void 0&&l.length;)a=`${l[l.length-1]}.${a}`,l=l.slice(0,l.length-1),c=pc(s,l,Object),c?.obj&&typeof c.obj[`${c.k}.${a}`]<"u"&&(c.obj=void 0);c.obj[`${c.k}.${a}`]=t},vk=(s,e,t,n)=>{const{obj:i,k:a}=pc(s,e,Object);i[a]=i[a]||[],i[a].push(t)},nh=(s,e)=>{const{obj:t,k:n}=pc(s,e);if(t&&Object.prototype.hasOwnProperty.call(t,n))return t[n]},bk=(s,e,t)=>{const n=nh(s,t);return n!==void 0?n:nh(e,t)},_C=(s,e,t)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in s?Pe(s[n])||s[n]instanceof String||Pe(e[n])||e[n]instanceof String?t&&(s[n]=e[n]):_C(s[n],e[n],t):s[n]=e[n]);return s},ho=s=>s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var xk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const wk=s=>Pe(s)?s.replace(/[&<>"'\/]/g,e=>xk[e]):s;class Sk{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const Ak=[" ",",","?","!",";"],Ck=new Sk(20),Ek=(s,e,t)=>{e=e||"",t=t||"";const n=Ak.filter(l=>e.indexOf(l)<0&&t.indexOf(l)<0);if(n.length===0)return!0;const i=Ck.getRegExp(`(${n.map(l=>l==="?"?"\\?":l).join("|")})`);let a=!i.test(s);if(!a){const l=s.indexOf(t);l>0&&!i.test(s.substring(0,l))&&(a=!0)}return a},Eg=(s,e,t=".")=>{if(!s)return;if(s[e])return Object.prototype.hasOwnProperty.call(s,e)?s[e]:void 0;const n=e.split(t);let i=s;for(let a=0;a<n.length;){if(!i||typeof i!="object")return;let l,c="";for(let d=a;d<n.length;++d)if(d!==a&&(c+=t),c+=n[d],l=i[c],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&d<n.length-1)continue;a+=d-a+1;break}i=l}return i},Sc=s=>s?.replace("_","-"),_k={type:"logger",log(s){this.output("log",s)},warn(s){this.output("warn",s)},error(s){this.output("error",s)},output(s,e){console?.[s]?.apply?.(console,e)}};class sh{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||_k,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,i){return i&&!this.debug?null:(Pe(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new sh(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new sh(this.logger,e)}}var Xs=new sh;class Nh{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const i=this.observers[n].get(t)||0;this.observers[n].set(t,i+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,a])=>{for(let l=0;l<a;l++)i(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,a])=>{for(let l=0;l<a;l++)i.apply(i,[e,...t])})}}class wS extends Nh{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n,i={}){const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,l=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;e.indexOf(".")>-1?c=e.split("."):(c=[e,t],n&&(Array.isArray(n)?c.push(...n):Pe(n)&&a?c.push(...n.split(a)):c.push(n)));const d=nh(this.data,c);return!d&&!t&&!n&&e.indexOf(".")>-1&&(e=c[0],t=c[1],n=c.slice(2).join(".")),d||!l||!Pe(n)?d:Eg(this.data?.[e]?.[t],n,a)}addResource(e,t,n,i,a={silent:!1}){const l=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let c=[e,t];n&&(c=c.concat(l?n.split(l):n)),e.indexOf(".")>-1&&(c=e.split("."),i=t,t=c[1]),this.addNamespaces(t),xS(this.data,c,i),a.silent||this.emit("added",e,t,n,i)}addResources(e,t,n,i={silent:!1}){for(const a in n)(Pe(n[a])||Array.isArray(n[a]))&&this.addResource(e,t,a,n[a],{silent:!0});i.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,i,a,l={silent:!1,skipCopy:!1}){let c=[e,t];e.indexOf(".")>-1&&(c=e.split("."),i=n,n=t,t=c[1]),this.addNamespaces(t);let d=nh(this.data,c)||{};l.skipCopy||(n=JSON.parse(JSON.stringify(n))),i?_C(d,n,a):d={...d,...n},xS(this.data,c,d),l.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(i=>t[i]&&Object.keys(t[i]).length>0)}toJSON(){return this.data}}var TC={processors:{},addPostProcessor(s){this.processors[s.name]=s},handle(s,e,t,n,i){return s.forEach(a=>{e=this.processors[a]?.process(e,t,n,i)??e}),e}};const RC=Symbol("i18next/PATH_KEY");function Tk(){const s=[],e=Object.create(null);let t;return e.get=(n,i)=>(t?.revoke?.(),i===RC?s:(s.push(i),t=Proxy.revocable(n,e),t.proxy)),Proxy.revocable(Object.create(null),e).proxy}function _g(s,e){const{[RC]:t}=s(Tk());return t.join(e?.keySeparator??".")}const SS={},km=s=>!Pe(s)&&typeof s!="boolean"&&typeof s!="number";class ih extends Nh{constructor(e,t={}){super(),gk(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Xs.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const n={...t};if(e==null)return!1;const i=this.resolve(e,n);if(i?.res===void 0)return!1;const a=km(i.res);return!(n.returnObjects===!1&&a)}extractFromKey(e,t){let n=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let a=t.ns||this.options.defaultNS||[];const l=n&&e.indexOf(n)>-1,c=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Ek(e,n,i);if(l&&!c){const d=e.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:e,namespaces:Pe(a)?[a]:a};const h=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(h[0])>-1)&&(a=h.shift()),e=h.join(i)}return{key:e,namespaces:Pe(a)?[a]:a}}translate(e,t,n){let i=typeof t=="object"?{...t}:t;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=_g(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const a=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:c,namespaces:d}=this.extractFromKey(e[e.length-1],i),h=d[d.length-1];let f=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;f===void 0&&(f=":");const m=i.lng||this.language,y=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(m?.toLowerCase()==="cimode")return y?a?{res:`${h}${f}${c}`,usedKey:c,exactUsedKey:c,usedLng:m,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:`${h}${f}${c}`:a?{res:c,usedKey:c,exactUsedKey:c,usedLng:m,usedNS:h,usedParams:this.getUsedParamsDetails(i)}:c;const x=this.resolve(e,i);let A=x?.res;const S=x?.usedKey||c,C=x?.exactUsedKey||c,E=["[object Number]","[object Function]","[object RegExp]"],_=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,R=!this.i18nFormat||this.i18nFormat.handleAsObject,N=i.count!==void 0&&!Pe(i.count),M=ih.hasDefaultValue(i),j=N?this.pluralResolver.getSuffix(m,i.count,i):"",D=i.ordinal&&N?this.pluralResolver.getSuffix(m,i.count,{ordinal:!1}):"",O=N&&!i.ordinal&&i.count===0,I=O&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${j}`]||i[`defaultValue${D}`]||i.defaultValue;let U=A;R&&!A&&M&&(U=I);const $=km(U),J=Object.prototype.toString.apply(U);if(R&&U&&$&&E.indexOf(J)<0&&!(Pe(_)&&Array.isArray(U))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const ie=this.options.returnedObjectHandler?this.options.returnedObjectHandler(S,U,{...i,ns:d}):`key '${c} (${this.language})' returned an object instead of string.`;return a?(x.res=ie,x.usedParams=this.getUsedParamsDetails(i),x):ie}if(l){const ie=Array.isArray(U),X=ie?[]:{},ae=ie?C:S;for(const P in U)if(Object.prototype.hasOwnProperty.call(U,P)){const F=`${ae}${l}${P}`;M&&!A?X[P]=this.translate(F,{...i,defaultValue:km(I)?I[P]:void 0,joinArrays:!1,ns:d}):X[P]=this.translate(F,{...i,joinArrays:!1,ns:d}),X[P]===F&&(X[P]=U[P])}A=X}}else if(R&&Pe(_)&&Array.isArray(A))A=A.join(_),A&&(A=this.extendTranslation(A,e,i,n));else{let ie=!1,X=!1;!this.isValidLookup(A)&&M&&(ie=!0,A=I),this.isValidLookup(A)||(X=!0,A=c);const P=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&X?void 0:A,F=M&&I!==A&&this.options.updateMissing;if(X||ie||F){if(this.logger.log(F?"updateKey":"missingKey",m,h,c,F?I:A),l){const L=this.resolve(c,{...i,keySeparator:!1});L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let B=[];const V=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&V&&V[0])for(let L=0;L<V.length;L++)B.push(V[L]);else this.options.saveMissingTo==="all"?B=this.languageUtils.toResolveHierarchy(i.lng||this.language):B.push(i.lng||this.language);const de=(L,q,te)=>{const oe=M&&te!==A?te:P;this.options.missingKeyHandler?this.options.missingKeyHandler(L,h,q,oe,F,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(L,h,q,oe,F,i),this.emit("missingKey",L,h,q,A)};this.options.saveMissing&&(this.options.saveMissingPlurals&&N?B.forEach(L=>{const q=this.pluralResolver.getSuffixes(L,i);O&&i[`defaultValue${this.options.pluralSeparator}zero`]&&q.indexOf(`${this.options.pluralSeparator}zero`)<0&&q.push(`${this.options.pluralSeparator}zero`),q.forEach(te=>{de([L],c+te,i[`defaultValue${te}`]||I)})}):de(B,c,I))}A=this.extendTranslation(A,e,i,x,n),X&&A===c&&this.options.appendNamespaceToMissingKey&&(A=`${h}${f}${c}`),(X||ie)&&this.options.parseMissingKeyHandler&&(A=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}${f}${c}`:c,ie?A:void 0,i))}return a?(x.res=A,x.usedParams=this.getUsedParamsDetails(i),x):A}extendTranslation(e,t,n,i,a){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const d=Pe(e)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(d){const m=e.match(this.interpolator.nestingRegexp);h=m&&m.length}let f=n.replace&&!Pe(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,n.lng||this.language||i.usedLng,n),d){const m=e.match(this.interpolator.nestingRegexp),y=m&&m.length;h<y&&(n.nest=!1)}!n.lng&&i&&i.res&&(n.lng=this.language||i.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,(...m)=>a?.[0]===m[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${m[0]} in key: ${t[0]}`),null):this.translate(...m,t),n)),n.interpolation&&this.interpolator.reset()}const l=n.postProcess||this.options.postProcess,c=Pe(l)?[l]:l;return e!=null&&c?.length&&n.applyPostProcessor!==!1&&(e=TC.handle(c,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,t={}){let n,i,a,l,c;return Pe(e)&&(e=[e]),e.forEach(d=>{if(this.isValidLookup(n))return;const h=this.extractFromKey(d,t),f=h.key;i=f;let m=h.namespaces;this.options.fallbackNS&&(m=m.concat(this.options.fallbackNS));const y=t.count!==void 0&&!Pe(t.count),x=y&&!t.ordinal&&t.count===0,A=t.context!==void 0&&(Pe(t.context)||typeof t.context=="number")&&t.context!=="",S=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);m.forEach(C=>{this.isValidLookup(n)||(c=C,!SS[`${S[0]}-${C}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(c)&&(SS[`${S[0]}-${C}`]=!0,this.logger.warn(`key "${i}" for languages "${S.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),S.forEach(E=>{if(this.isValidLookup(n))return;l=E;const _=[f];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(_,f,E,C,t);else{let N;y&&(N=this.pluralResolver.getSuffix(E,t.count,t));const M=`${this.options.pluralSeparator}zero`,j=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(y&&(t.ordinal&&N.indexOf(j)===0&&_.push(f+N.replace(j,this.options.pluralSeparator)),_.push(f+N),x&&_.push(f+M)),A){const D=`${f}${this.options.contextSeparator||"_"}${t.context}`;_.push(D),y&&(t.ordinal&&N.indexOf(j)===0&&_.push(D+N.replace(j,this.options.pluralSeparator)),_.push(D+N),x&&_.push(D+M))}}let R;for(;R=_.pop();)this.isValidLookup(n)||(a=R,n=this.getResource(E,C,R,t))}))})}),{res:n,usedKey:i,exactUsedKey:a,usedLng:l,usedNS:c}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,n,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,n,i):this.resourceStore.getResource(e,t,n,i)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Pe(e.replace);let i=n?e.replace:e;if(n&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(const a of t)delete i[a]}return i}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,t.length)&&e[n]!==void 0)return!0;return!1}}class AS{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Xs.create("languageUtils")}getScriptPartFromCode(e){if(e=Sc(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Sc(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Pe(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(n=>{if(t)return;const i=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(i))&&(t=i)}),!t&&this.options.supportedLngs&&e.forEach(n=>{if(t)return;const i=this.getScriptPartFromCode(n);if(this.isSupportedCode(i))return t=i;const a=this.getLanguagePartFromCode(n);if(this.isSupportedCode(a))return t=a;t=this.options.supportedLngs.find(l=>{if(l===a)return l;if(!(l.indexOf("-")<0&&a.indexOf("-")<0)&&(l.indexOf("-")>0&&a.indexOf("-")<0&&l.substring(0,l.indexOf("-"))===a||l.indexOf(a)===0&&a.length>1))return l})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Pe(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes((t===!1?[]:t)||this.options.fallbackLng||[],e),i=[],a=l=>{l&&(this.isSupportedCode(l)?i.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return Pe(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):Pe(e)&&a(this.formatLanguageCode(e)),n.forEach(l=>{i.indexOf(l)<0&&a(this.formatLanguageCode(l))}),i}}const CS={zero:0,one:1,two:2,few:3,many:4,other:5},ES={select:s=>s===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Rk{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=Xs.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const n=Sc(e==="dev"?"en":e),i=t.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:n,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let l;try{l=new Intl.PluralRules(n,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),ES;if(!e.match(/-|_/))return ES;const d=this.languageUtils.getLanguagePartFromCode(e);l=this.getRule(d,t)}return this.pluralRulesCache[a]=l,l}needsPlural(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,n={}){return this.getSuffixes(e,n).map(i=>`${t}${i}`)}getSuffixes(e,t={}){let n=this.getRule(e,t);return n||(n=this.getRule("dev",t)),n?n.resolvedOptions().pluralCategories.sort((i,a)=>CS[i]-CS[a]).map(i=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,t,n={}){const i=this.getRule(e,n);return i?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,n))}}const _S=(s,e,t,n=".",i=!0)=>{let a=bk(s,e,t);return!a&&i&&Pe(t)&&(a=Eg(s,t,n),a===void 0&&(a=Eg(e,t,n))),a},jm=s=>s.replace(/\$/g,"$$$$");class TS{constructor(e={}){this.logger=Xs.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(t=>t),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:i,prefix:a,prefixEscaped:l,suffix:c,suffixEscaped:d,formatSeparator:h,unescapeSuffix:f,unescapePrefix:m,nestingPrefix:y,nestingPrefixEscaped:x,nestingSuffix:A,nestingSuffixEscaped:S,nestingOptionsSeparator:C,maxReplaces:E,alwaysFormat:_}=e.interpolation;this.escape=t!==void 0?t:wk,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=a?ho(a):l||"{{",this.suffix=c?ho(c):d||"}}",this.formatSeparator=h||",",this.unescapePrefix=f?"":m||"-",this.unescapeSuffix=this.unescapePrefix?"":f||"",this.nestingPrefix=y?ho(y):x||ho("$t("),this.nestingSuffix=A?ho(A):S||ho(")"),this.nestingOptionsSeparator=C||",",this.maxReplaces=E||1e3,this.alwaysFormat=_!==void 0?_:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,n)=>t?.source===n?(t.lastIndex=0,t):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,n,i){let a,l,c;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=x=>{if(x.indexOf(this.formatSeparator)<0){const E=_S(t,d,x,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(E,void 0,n,{...i,...t,interpolationkey:x}):E}const A=x.split(this.formatSeparator),S=A.shift().trim(),C=A.join(this.formatSeparator).trim();return this.format(_S(t,d,S,this.options.keySeparator,this.options.ignoreJSONStructure),C,n,{...i,...t,interpolationkey:S})};this.resetRegExp();const f=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,m=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:x=>jm(x)},{regex:this.regexp,safeValue:x=>this.escapeValue?jm(this.escape(x)):jm(x)}].forEach(x=>{for(c=0;a=x.regex.exec(e);){const A=a[1].trim();if(l=h(A),l===void 0)if(typeof f=="function"){const C=f(e,a,i);l=Pe(C)?C:""}else if(i&&Object.prototype.hasOwnProperty.call(i,A))l="";else if(m){l=a[0];continue}else this.logger.warn(`missed to pass in variable ${A} for interpolating ${e}`),l="";else!Pe(l)&&!this.useRawValueToEscape&&(l=yS(l));const S=x.safeValue(l);if(e=e.replace(a[0],S),m?(x.regex.lastIndex+=l.length,x.regex.lastIndex-=a[0].length):x.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),e}nest(e,t,n={}){let i,a,l;const c=(d,h)=>{const f=this.nestingOptionsSeparator;if(d.indexOf(f)<0)return d;const m=d.split(new RegExp(`${f}[ ]*{`));let y=`{${m[1]}`;d=m[0],y=this.interpolate(y,l);const x=y.match(/'/g),A=y.match(/"/g);((x?.length??0)%2===0&&!A||A.length%2!==0)&&(y=y.replace(/'/g,'"'));try{l=JSON.parse(y),h&&(l={...h,...l})}catch(S){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,S),`${d}${f}${y}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,d};for(;i=this.nestingRegexp.exec(e);){let d=[];l={...n},l=l.replace&&!Pe(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;const h=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(h!==-1&&(d=i[1].slice(h).split(this.formatSeparator).map(f=>f.trim()).filter(Boolean),i[1]=i[1].slice(0,h)),a=t(c.call(this,i[1].trim(),l),l),a&&i[0]===e&&!Pe(a))return a;Pe(a)||(a=yS(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),a=""),d.length&&(a=d.reduce((f,m)=>this.format(f,m,n.lng,{...n,interpolationkey:i[1].trim()}),a.trim())),e=e.replace(i[0],a),this.regexp.lastIndex=0}return e}}const Nk=s=>{let e=s.toLowerCase().trim();const t={};if(s.indexOf("(")>-1){const n=s.split("(");e=n[0].toLowerCase().trim();const i=n[1].substring(0,n[1].length-1);e==="currency"&&i.indexOf(":")<0?t.currency||(t.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?t.range||(t.range=i.trim()):i.split(";").forEach(l=>{if(l){const[c,...d]=l.split(":"),h=d.join(":").trim().replace(/^'+|'+$/g,""),f=c.trim();t[f]||(t[f]=h),h==="false"&&(t[f]=!1),h==="true"&&(t[f]=!0),isNaN(h)||(t[f]=parseInt(h,10))}})}return{formatName:e,formatOptions:t}},RS=s=>{const e={};return(t,n,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});const l=n+JSON.stringify(a);let c=e[l];return c||(c=s(Sc(n),i),e[l]=c),c(t)}},Mk=s=>(e,t,n)=>s(Sc(t),n)(e);class Dk{constructor(e={}){this.logger=Xs.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const n=t.cacheInBuiltFormats?RS:Mk;this.formats={number:n((i,a)=>{const l=new Intl.NumberFormat(i,{...a});return c=>l.format(c)}),currency:n((i,a)=>{const l=new Intl.NumberFormat(i,{...a,style:"currency"});return c=>l.format(c)}),datetime:n((i,a)=>{const l=new Intl.DateTimeFormat(i,{...a});return c=>l.format(c)}),relativetime:n((i,a)=>{const l=new Intl.RelativeTimeFormat(i,{...a});return c=>l.format(c,a.range||"day")}),list:n((i,a)=>{const l=new Intl.ListFormat(i,{...a});return c=>l.format(c)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=RS(t)}format(e,t,n,i={}){const a=t.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(c=>c.indexOf(")")>-1)){const c=a.findIndex(d=>d.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,c)].join(this.formatSeparator)}return a.reduce((c,d)=>{const{formatName:h,formatOptions:f}=Nk(d);if(this.formats[h]){let m=c;try{const y=i?.formatParams?.[i.interpolationkey]||{},x=y.locale||y.lng||i.locale||i.lng||n;m=this.formats[h](c,x,{...f,...i,...y})}catch(y){this.logger.warn(y)}return m}else this.logger.warn(`there was no format function for ${h}`);return c},e)}}const kk=(s,e)=>{s.pending[e]!==void 0&&(delete s.pending[e],s.pendingCount--)};class jk extends Nh{constructor(e,t,n,i={}){super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=Xs.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,i.backend,i)}queueLoad(e,t,n,i){const a={},l={},c={},d={};return e.forEach(h=>{let f=!0;t.forEach(m=>{const y=`${h}|${m}`;!n.reload&&this.store.hasResourceBundle(h,m)?this.state[y]=2:this.state[y]<0||(this.state[y]===1?l[y]===void 0&&(l[y]=!0):(this.state[y]=1,f=!1,l[y]===void 0&&(l[y]=!0),a[y]===void 0&&(a[y]=!0),d[m]===void 0&&(d[m]=!0)))}),f||(c[h]=!0)}),(Object.keys(a).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(l),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(d)}}loaded(e,t,n){const i=e.split("|"),a=i[0],l=i[1];t&&this.emit("failedLoading",a,l,t),!t&&n&&this.store.addResourceBundle(a,l,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const c={};this.queue.forEach(d=>{vk(d.loaded,[a],l),kk(d,e),t&&d.errors.push(t),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(h=>{c[h]||(c[h]={});const f=d.loaded[h];f.length&&f.forEach(m=>{c[h][m]===void 0&&(c[h][m]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(d=>!d.done)}read(e,t,n,i=0,a=this.retryTimeout,l){if(!e.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:n,tried:i,wait:a,callback:l});return}this.readingCalls++;const c=(h,f)=>{if(this.readingCalls--,this.waitingReads.length>0){const m=this.waitingReads.shift();this.read(m.lng,m.ns,m.fcName,m.tried,m.wait,m.callback)}if(h&&f&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,n,i+1,a*2,l)},a);return}l(h,f)},d=this.backend[n].bind(this.backend);if(d.length===2){try{const h=d(e,t);h&&typeof h.then=="function"?h.then(f=>c(null,f)).catch(c):c(null,h)}catch(h){c(h)}return}return d(e,t,c)}prepareLoading(e,t,n={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Pe(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Pe(t)&&(t=[t]);const a=this.queueLoad(e,t,n,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach(l=>{this.loadOne(l)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e,t=""){const n=e.split("|"),i=n[0],a=n[1];this.read(i,a,"read",void 0,void 0,(l,c)=>{l&&this.logger.warn(`${t}loading namespace ${a} for language ${i} failed`,l),!l&&c&&this.logger.log(`${t}loaded namespace ${a} for language ${i}`,c),this.loaded(e,l,c)})}saveMissing(e,t,n,i,a,l={},c=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const d={...l,isUpdate:a},h=this.backend.create.bind(this.backend);if(h.length<6)try{let f;h.length===5?f=h(e,t,n,i,d):f=h(e,t,n,i),f&&typeof f.then=="function"?f.then(m=>c(null,m)).catch(c):c(null,f)}catch(f){c(f)}else h(e,t,n,i,c,d)}!e||!e[0]||this.store.addResource(e[0],t,n,i)}}}const Om=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:s=>{let e={};if(typeof s[1]=="object"&&(e=s[1]),Pe(s[1])&&(e.defaultValue=s[1]),Pe(s[2])&&(e.tDescription=s[2]),typeof s[2]=="object"||typeof s[3]=="object"){const t=s[3]||s[2];Object.keys(t).forEach(n=>{e[n]=t[n]})}return e},interpolation:{escapeValue:!0,format:s=>s,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),NS=s=>(Pe(s.ns)&&(s.ns=[s.ns]),Pe(s.fallbackLng)&&(s.fallbackLng=[s.fallbackLng]),Pe(s.fallbackNS)&&(s.fallbackNS=[s.fallbackNS]),s.supportedLngs?.indexOf?.("cimode")<0&&(s.supportedLngs=s.supportedLngs.concat(["cimode"])),typeof s.initImmediate=="boolean"&&(s.initAsync=s.initImmediate),s),wd=()=>{},Ok=s=>{Object.getOwnPropertyNames(Object.getPrototypeOf(s)).forEach(t=>{typeof s[t]=="function"&&(s[t]=s[t].bind(s))})};class mc extends Nh{constructor(e={},t){if(super(),this.options=NS(e),this.services={},this.logger=Xs,this.modules={external:[]},Ok(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,typeof e=="function"&&(t=e,e={}),e.defaultNS==null&&e.ns&&(Pe(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=Om();this.options={...n,...this.options,...NS(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=n.overloadTranslationOptionHandler),this.options.debug===!0&&typeof console<"u"&&console.warn("i18next is maintained with support from locize.com  consider powering your project with managed localization (AI, CDN, integrations): https://locize.com");const i=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?Xs.init(i(this.modules.logger),this.options):Xs.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:h=Dk;const f=new AS(this.options);this.store=new wS(this.options.resources,this.options);const m=this.services;m.logger=Xs,m.resourceStore=this.store,m.languageUtils=f,m.pluralResolver=new Rk(f,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),h&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(m.formatter=i(h),m.formatter.init&&m.formatter.init(m,this.options),this.options.interpolation.format=m.formatter.format.bind(m.formatter)),m.interpolator=new TS(this.options),m.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},m.backendConnector=new jk(i(this.modules.backend),m.resourceStore,m,this.options),m.backendConnector.on("*",(x,...A)=>{this.emit(x,...A)}),this.modules.languageDetector&&(m.languageDetector=i(this.modules.languageDetector),m.languageDetector.init&&m.languageDetector.init(m,this.options.detection,this.options)),this.modules.i18nFormat&&(m.i18nFormat=i(this.modules.i18nFormat),m.i18nFormat.init&&m.i18nFormat.init(this)),this.translator=new ih(this.services,this.options),this.translator.on("*",(x,...A)=>{this.emit(x,...A)}),this.modules.external.forEach(x=>{x.init&&x.init(this)})}if(this.format=this.options.interpolation.format,t||(t=wd),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=(...f)=>this.store[h](...f)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=(...f)=>(this.store[h](...f),this)});const c=Ql(),d=()=>{const h=(f,m)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(m),t(f,m)};if(this.languages&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),c}loadResources(e,t=wd){let n=t;const i=Pe(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const a=[],l=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(h=>{h!=="cimode"&&a.indexOf(h)<0&&a.push(h)})};i?l(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>l(d)),this.options.preload?.forEach?.(c=>l(c)),this.services.backendConnector.load(a,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(c)})}else n(null)}reloadResources(e,t,n){const i=Ql();return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=wd),this.services.backendConnector.reload(e,t,a=>{i.resolve(),n(a)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&TC.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let t=0;t<this.languages.length;t++){const n=this.languages[t];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const n=Ql();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},a=(c,d)=>{d?this.isLanguageChangingTo===e&&(i(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,n.resolve((...h)=>this.t(...h)),t&&t(c,(...h)=>this.t(...h))},l=c=>{!e&&!c&&this.services.languageDetector&&(c=[]);const d=Pe(c)?c:c&&c[0],h=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(Pe(c)?[c]:c);h&&(this.language||i(h),this.translator.language||this.translator.changeLanguage(h),this.services.languageDetector?.cacheUserLanguage?.(h)),this.loadResources(h,f=>{a(f,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),n}getFixedT(e,t,n){const i=(a,l,...c)=>{let d;typeof l!="object"?d=this.options.overloadTranslationOptionHandler([a,l].concat(c)):d={...l},d.lng=d.lng||i.lng,d.lngs=d.lngs||i.lngs,d.ns=d.ns||i.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||n||i.keyPrefix);const h=this.options.keySeparator||".";let f;return d.keyPrefix&&Array.isArray(a)?f=a.map(m=>(typeof m=="function"&&(m=_g(m,{...this.options,...l})),`${d.keyPrefix}${h}${m}`)):(typeof a=="function"&&(a=_g(a,{...this.options,...l})),f=d.keyPrefix?`${d.keyPrefix}${h}${a}`:a),this.t(f,d)};return Pe(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=n,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const l=(c,d)=>{const h=this.services.backendConnector.state[`${c}|${d}`];return h===-1||h===0||h===2};if(t.precheck){const c=t.precheck(this,l);if(c!==void 0)return c}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(n,e)&&(!i||l(a,e)))}loadNamespaces(e,t){const n=Ql();return this.options.ns?(Pe(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{n.resolve(),t&&t(i)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=Ql();Pe(e)&&(e=[e]);const i=this.options.preload||[],a=e.filter(l=>i.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return a.length?(this.options.preload=i.concat(a),this.loadResources(l=>{n.resolve(),t&&t(l)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const a=i.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new AS(Om());return e.toLowerCase().indexOf("-latn")>1?"ltr":t.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const n=new mc(e,t);return n.createInstance=mc.createInstance,n}cloneInstance(e={},t=wd){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},a=new mc(i);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(c=>{a[c]=this[c]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},n){const c=Object.keys(this.store.data).reduce((d,h)=>(d[h]={...this.store.data[h]},d[h]=Object.keys(d[h]).reduce((f,m)=>(f[m]={...d[h][m]},f),d[h]),d),{});a.store=new wS(c,i),a.services.resourceStore=a.store}if(e.interpolation){const d={...Om().interpolation,...this.options.interpolation,...e.interpolation},h={...i,interpolation:d};a.services.interpolator=new TS(h)}return a.translator=new ih(a.services,i),a.translator.on("*",(c,...d)=>{a.emit(c,...d)}),a.init(i,t),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const En=mc.createInstance();En.createInstance;En.dir;En.init;En.loadResources;En.reloadResources;En.use;En.changeLanguage;En.getFixedT;En.t;En.exists;En.setDefaultNamespace;En.hasLoadedNamespace;En.loadNamespaces;En.loadLanguages;const Pk=(s,e,t,n)=>{const i=[t,{code:e,...n||{}}];if(s?.services?.logger?.forward)return s.services.logger.forward(i,"warn","react-i18next::",!0);ha(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),s?.services?.logger?.warn?s.services.logger.warn(...i):console?.warn&&console.warn(...i)},MS={},NC=(s,e,t,n)=>{ha(t)&&MS[t]||(ha(t)&&(MS[t]=new Date),Pk(s,e,t,n))},MC=(s,e)=>()=>{if(s.isInitialized)e();else{const t=()=>{setTimeout(()=>{s.off("initialized",t)},0),e()};s.on("initialized",t)}},Tg=(s,e,t)=>{s.loadNamespaces(e,MC(s,t))},DS=(s,e,t,n)=>{if(ha(t)&&(t=[t]),s.options.preload&&s.options.preload.indexOf(e)>-1)return Tg(s,t,n);t.forEach(i=>{s.options.ns.indexOf(i)<0&&s.options.ns.push(i)}),s.loadLanguages(e,MC(s,n))},Lk=(s,e,t={})=>!e.languages||!e.languages.length?(NC(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(s,{lng:t.lng,precheck:(n,i)=>{if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!i(n.isLanguageChangingTo,s))return!1}}),ha=s=>typeof s=="string",Ik=s=>typeof s=="object"&&s!==null,Fk=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Bk={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},zk=s=>Bk[s],Uk=s=>s.replace(Fk,zk);let Rg={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Uk,transDefaultProps:void 0};const Vk=(s={})=>{Rg={...Rg,...s}},Hk=()=>Rg;let DC;const $k=s=>{DC=s},Gk=()=>DC,qk={type:"3rdParty",init(s){Vk(s.options.react),$k(s)}},Xk=w.createContext();class Yk{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(t=>{this.usedNamespaces[t]||(this.usedNamespaces[t]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Pm={exports:{}},Lm={};var kS;function Wk(){if(kS)return Lm;kS=1;var s=Rh();function e(m,y){return m===y&&(m!==0||1/m===1/y)||m!==m&&y!==y}var t=typeof Object.is=="function"?Object.is:e,n=s.useState,i=s.useEffect,a=s.useLayoutEffect,l=s.useDebugValue;function c(m,y){var x=y(),A=n({inst:{value:x,getSnapshot:y}}),S=A[0].inst,C=A[1];return a(function(){S.value=x,S.getSnapshot=y,d(S)&&C({inst:S})},[m,x,y]),i(function(){return d(S)&&C({inst:S}),m(function(){d(S)&&C({inst:S})})},[m]),l(x),x}function d(m){var y=m.getSnapshot;m=m.value;try{var x=y();return!t(m,x)}catch{return!0}}function h(m,y){return y()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return Lm.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:f,Lm}var jS;function Kk(){return jS||(jS=1,Pm.exports=Wk()),Pm.exports}var Qk=Kk();const Zk=(s,e)=>ha(e)?e:Ik(e)&&ha(e.defaultValue)?e.defaultValue:Array.isArray(s)?s[s.length-1]:s,Jk={t:Zk,ready:!1},ej=()=>()=>{},ei=(s,e={})=>{const{i18n:t}=e,{i18n:n,defaultNS:i}=w.useContext(Xk)||{},a=t||n||Gk();a&&!a.reportNamespaces&&(a.reportNamespaces=new Yk),a||NC(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const l=w.useMemo(()=>({...Hk(),...a?.options?.react,...e}),[a,e]),{useSuspense:c,keyPrefix:d}=l,h=i||a?.options?.defaultNS,f=ha(h)?[h]:h||["translation"],m=w.useMemo(()=>f,f);a?.reportNamespaces?.addUsedNamespaces?.(m);const y=w.useRef(0),x=w.useCallback(I=>{if(!a)return ej;const{bindI18n:U,bindI18nStore:$}=l,J=()=>{y.current+=1,I()};return U&&a.on(U,J),$&&a.store.on($,J),()=>{U&&U.split(" ").forEach(ie=>a.off(ie,J)),$&&$.split(" ").forEach(ie=>a.store.off(ie,J))}},[a,l]),A=w.useRef(),S=w.useCallback(()=>{if(!a)return Jk;const I=!!(a.isInitialized||a.initializedStoreOnce)&&m.every(ae=>Lk(ae,a,l)),U=e.lng||a.language,$=y.current,J=A.current;if(J&&J.ready===I&&J.lng===U&&J.keyPrefix===d&&J.revision===$)return J;const X={t:a.getFixedT(U,l.nsMode==="fallback"?m:m[0],d),ready:I,lng:U,keyPrefix:d,revision:$};return A.current=X,X},[a,m,d,l,e.lng]),[C,E]=w.useState(0),{t:_,ready:R}=Qk.useSyncExternalStore(x,S,S);w.useEffect(()=>{if(a&&!R&&!c){const I=()=>E(U=>U+1);e.lng?DS(a,e.lng,m,I):Tg(a,m,I)}},[a,e.lng,m,R,c,C]);const N=a||{},M=w.useRef(null),j=w.useRef(),D=I=>{const U=Object.getOwnPropertyDescriptors(I);U.__original&&delete U.__original;const $=Object.create(Object.getPrototypeOf(I),U);if(!Object.prototype.hasOwnProperty.call($,"__original"))try{Object.defineProperty($,"__original",{value:I,writable:!1,enumerable:!1,configurable:!1})}catch{}return $},O=w.useMemo(()=>{const I=N,U=I?.language;let $=I;I&&(M.current&&M.current.__original===I?j.current!==U?($=D(I),M.current=$,j.current=U):$=M.current:($=D(I),M.current=$,j.current=U));const J=[_,$,R];return J.t=_,J.i18n=$,J.ready=R,J},[_,N,R,N.resolvedLanguage,N.language,N.languages]);if(a&&c&&!R)throw new Promise(I=>{const U=()=>I();e.lng?DS(a,e.lng,m,U):Tg(a,m,U)});return O},tj={loading:"...",error:"",save:"",cancel:"",delete:"",edit:"",search:"",settings:"",help:"",logout:"",of:""},nj="",sj=" ...",ij="",rj="...",aj=" ,     ?",oj="   ",lj={name:"EDO",subtitle:""},cj={dashboard:" ",documents:""},uj={title:"Dashboard",subtitle:"   ",stats:{total:" ",pending:" ",signed:"",archived:" "},pendingSignatures:" ",recentDocuments:" ",noPending:"   ",noDocuments:" ",waiting:""},dj={title:"",subtitle:" ",loadError:"   ",noDocumentSelected:"   ",loading:" ...",fields:{title:"",documentType:" ",status:"",documentDate:" ",registrationDate:" ",description:"",author:""},status:{inProgress:" ",pending:" ",signed:"",archived:""}},hj={userMenu:{profile:""}},fj={searchPlaceholder:" ...",noDocuments:" ",addDocument:" "},pj={loading:" ...",noDocumentSelected:" ",selectDocumentMessage:"      ",tabs:{document:"",signatures:"",history:""},viewMode:" ",signatureRequired:" ",signatureWaiting:"     ",noContent:"   ",supplier:":",buyer:":",signature:" / ",notSpecified:" "},mj={documentInfo:"  ",documentNumber:" ",documentType:" ",creationDate:" ",from:" ",organization:"",status:"",signingProgress:" ",signaturesRequired:" ",signedAt:"",waitingSignature:" ",actions:"",sign:"",download:" ",print:"",history:" "},gj={common:tj,comments:nj,addComment:sj,send:ij,sending:rj,deleteCommentConfirm:aj,deleteCommentError:oj,app:lj,navigation:cj,dashboard:uj,documents:dj,header:hj,documentSidebar:fj,documentContent:pj,documentMetadata:mj},yj={loading:"Loading...",error:"Error",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",search:"Search",settings:"Settings",help:"Help",logout:"Logout",of:"of"},vj={name:"EDO",subtitle:"Document Management"},bj={dashboard:"Dashboard",documents:"Documents"},xj={title:"Dashboard",subtitle:"Electronic document management system overview",stats:{total:"Total Documents",pending:"Pending Signature",signed:"Signed",archived:"Archived"},pendingSignatures:"Require Signature",recentDocuments:"Recent Documents",noPending:"No documents pending signature",noDocuments:"No documents",waiting:"Waiting"},wj={title:"Documents",subtitle:"Document Management",loadError:"Failed to load documents",noDocumentSelected:"Select a document to view",loading:"Loading document...",fields:{title:"Title",documentType:"Document Type",status:"Status",documentDate:"Document Date",registrationDate:"Registration Date",description:"Description",author:"Author"},status:{inProgress:"In Progress",pending:"Pending",signed:"Signed",archived:"Archived"}},Sj="Comments",Aj="Add a comment...",Cj="Send",Ej="Sending...",_j="Are you sure you want to delete this comment?",Tj="Failed to delete comment",Rj={userMenu:{profile:"Profile"}},Nj={searchPlaceholder:"Search documents...",noDocuments:"No documents",addDocument:"Add Document"},Mj={loading:"Loading document...",noDocumentSelected:"Select a document",selectDocumentMessage:"Select a document from the list on the left to view",tabs:{document:"Document",signatures:"Signatures",history:"History"},viewMode:"View mode",signatureRequired:"Signature required",signatureWaiting:"Document is waiting for signatures from authorized persons",noContent:"Document content not specified",supplier:"SUPPLIER:",buyer:"BUYER:",signature:"Signature / EDS",notSpecified:"Not specified"},Dj={documentInfo:"Document Information",documentNumber:"Document Number",documentType:"Document Type",creationDate:"Creation Date",from:"From",organization:"Organization",status:"Status",signingProgress:"Signing Progress",signaturesRequired:"Signatures Required",signedAt:"Signed at",waitingSignature:"Waiting for signature",actions:"Actions",sign:"Sign",download:"Download document",print:"Print",history:"Change history"},kj={common:yj,app:vj,navigation:bj,dashboard:xj,documents:wj,comments:Sj,addComment:Aj,send:Cj,sending:Ej,deleteCommentConfirm:_j,deleteCommentError:Tj,header:Rj,documentSidebar:Nj,documentContent:Mj,documentMetadata:Dj},jj={loading:"Yuklanmoqda...",error:"Xatolik",save:"Saqlash",cancel:"Bekor qilish",delete:"O'chirish",edit:"Tahrirlash",search:"Qidirish",settings:"Sozlamalar",help:"Yordam",logout:"Chiqish",of:"dan"},Oj={name:"EDO",subtitle:"Hujjatlar boshqaruvi"},Pj={dashboard:"Boshqaruv paneli",documents:"Hujjatlar"},Lj={title:"Boshqaruv paneli",subtitle:"Elektron hujjatlar boshqaruvi tizimi ko'rinishi",stats:{total:"Jami hujjatlar",pending:"Imzolanishi kerak",signed:"Imzolangan",archived:"Arxivda"},pendingSignatures:"Imzo talab qilinadi",recentDocuments:"So'nggi hujjatlar",noPending:"Imzolanishi kerak bo'lgan hujjatlar yo'q",noDocuments:"Hujjatlar yo'q",waiting:"Kutilmoqda"},Ij={title:"Hujjatlar",subtitle:"Hujjatlar boshqaruvi",loadError:"Hujjatlarni yuklab bo'lmadi",noDocumentSelected:"Ko'rish uchun hujjatni tanlang",loading:"Hujjat yuklanmoqda...",fields:{title:"Nomi",documentType:"Hujjat turi",status:"Holati",documentDate:"Hujjat sanasi",registrationDate:"Ro'yxatga olish sanasi",description:"Tavsif",author:"Muallif"},status:{inProgress:"Jarayonda",pending:"Imzolanishi kerak",signed:"Imzolangan",archived:"Arxivda"}},Fj="Izohlar",Bj="Izoh qo'shish...",zj="Yuborish",Uj="Yuborilmoqda...",Vj="Bu izohni o'chirishni xohlaysizmi?",Hj="Izohni o'chirib bo'lmadi",$j={userMenu:{profile:"Profil"}},Gj={searchPlaceholder:"Hujjatlarni qidirish...",noDocuments:"Hujjatlar yo'q",addDocument:"Hujjat qo'shish"},qj={loading:"Hujjat yuklanmoqda...",noDocumentSelected:"Hujjatni tanlang",selectDocumentMessage:"Ko'rish uchun chapdagi ro'yxatdan hujjatni tanlang",tabs:{document:"Hujjat",signatures:"Imzolar",history:"Tarix"},viewMode:"Ko'rish rejimi",signatureRequired:"Imzo talab qilinadi",signatureWaiting:"Hujjat vakolatli shaxslardan imzo kutmoqda",noContent:"Hujjat mazmuni ko'rsatilmagan",supplier:"TA'MINOTCHI:",buyer:"XARIDOR:",signature:"Imzo / EDS",notSpecified:"Ko'rsatilmagan"},Xj={documentInfo:"Hujjat ma'lumotlari",documentNumber:"Hujjat raqami",documentType:"Hujjat turi",creationDate:"Yaratilgan sana",from:"Kimdan",organization:"Tashkilot",status:"Holati",signingProgress:"Imzolash jarayoni",signaturesRequired:"Imzolar talab qilinadi",signedAt:"Imzolangan",waitingSignature:"Imzo kutmoqda",actions:"Harakatlar",sign:"Imzolash",download:"Hujjatni yuklab olish",print:"Chop etish",history:"O'zgarishlar tarixi"},Yj={common:jj,app:Oj,navigation:Pj,dashboard:Lj,documents:Ij,comments:Fj,addComment:Bj,send:zj,sending:Uj,deleteCommentConfirm:Vj,deleteCommentError:Hj,header:$j,documentSidebar:Gj,documentContent:qj,documentMetadata:Xj};En.use(qk).init({resources:{ru:{translation:gj},en:{translation:kj},uz:{translation:Yj}},lng:localStorage.getItem("i18nextLng")||"ru",fallbackLng:"ru",interpolation:{escapeValue:!1}});var OS="popstate";function Wj(s={}){function e(i,a){let{pathname:l="/",search:c="",hash:d=""}=xa(i.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Ng("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){let l=i.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let d=i.location.href,h=d.indexOf("#");c=h===-1?d:d.slice(0,h)}return c+"#"+(typeof a=="string"?a:Ac(a))}function n(i,a){bs(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return Qj(e,t,n,s)}function _t(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function bs(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Kj(){return Math.random().toString(36).substring(2,10)}function PS(s,e){return{usr:s.state,key:s.key,idx:e}}function Ng(s,e,t=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?xa(e):e,state:t,key:e&&e.key||n||Kj()}}function Ac({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function xa(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let n=s.indexOf("?");n>=0&&(e.search=s.substring(n),s=s.substring(0,n)),s&&(e.pathname=s)}return e}function Qj(s,e,t,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,l=i.history,c="POP",d=null,h=f();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function f(){return(l.state||{idx:null}).idx}function m(){c="POP";let C=f(),E=C==null?null:C-h;h=C,d&&d({action:c,location:S.location,delta:E})}function y(C,E){c="PUSH";let _=Ng(S.location,C,E);t&&t(_,C),h=f()+1;let R=PS(_,h),N=S.createHref(_);try{l.pushState(R,"",N)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(N)}a&&d&&d({action:c,location:S.location,delta:1})}function x(C,E){c="REPLACE";let _=Ng(S.location,C,E);t&&t(_,C),h=f();let R=PS(_,h),N=S.createHref(_);l.replaceState(R,"",N),a&&d&&d({action:c,location:S.location,delta:0})}function A(C){return Zj(C)}let S={get action(){return c},get location(){return s(i,l)},listen(C){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(OS,m),d=C,()=>{i.removeEventListener(OS,m),d=null}},createHref(C){return e(i,C)},createURL:A,encodeLocation(C){let E=A(C);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:y,replace:x,go(C){return l.go(C)}};return S}function Zj(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),_t(t,"No window.location.(origin|href) available to create URL");let n=typeof s=="string"?s:Ac(s);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function kC(s,e,t="/"){return Jj(s,e,t,!1)}function Jj(s,e,t,n){let i=typeof e=="string"?xa(e):e,a=Ti(i.pathname||"/",t);if(a==null)return null;let l=jC(s);eO(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let h=dO(a);c=cO(l[d],h,n)}return c}function jC(s,e=[],t=[],n="",i=!1){let a=(l,c,d=i,h)=>{let f={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;_t(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let m=Ci([n,f.relativePath]),y=t.concat(f);l.children&&l.children.length>0&&(_t(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),jC(l.children,e,y,m,d)),!(l.path==null&&!l.index)&&e.push({path:m,score:oO(m,l.index),routesMeta:y})};return s.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))a(l,c);else for(let d of OC(l.path))a(l,c,!0,d)}),e}function OC(s){let e=s.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let l=OC(n.join("/")),c=[];return c.push(...l.map(d=>d===""?a:[a,d].join("/"))),i&&c.push(...l),c.map(d=>s.startsWith("/")&&d===""?"/":d)}function eO(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:lO(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var tO=/^:[\w-]+$/,nO=3,sO=2,iO=1,rO=10,aO=-2,LS=s=>s==="*";function oO(s,e){let t=s.split("/"),n=t.length;return t.some(LS)&&(n+=aO),e&&(n+=sO),t.filter(i=>!LS(i)).reduce((i,a)=>i+(tO.test(a)?nO:a===""?iO:rO),n)}function lO(s,e){return s.length===e.length&&s.slice(0,-1).every((n,i)=>n===e[i])?s[s.length-1]-e[e.length-1]:0}function cO(s,e,t=!1){let{routesMeta:n}=s,i={},a="/",l=[];for(let c=0;c<n.length;++c){let d=n[c],h=c===n.length-1,f=a==="/"?e:e.slice(a.length)||"/",m=rh({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},f),y=d.route;if(!m&&h&&t&&!n[n.length-1].route.index&&(m=rh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!m)return null;Object.assign(i,m.params),l.push({params:i,pathname:Ci([a,m.pathname]),pathnameBase:mO(Ci([a,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(a=Ci([a,m.pathnameBase]))}return l}function rh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,n]=uO(s.path,s.caseSensitive,s.end),i=e.match(t);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:n.reduce((h,{paramName:f,isOptional:m},y)=>{if(f==="*"){let A=c[y]||"";l=a.slice(0,a.length-A.length).replace(/(.)\/+$/,"$1")}const x=c[y];return m&&!x?h[f]=void 0:h[f]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:l,pattern:s}}function uO(s,e=!1,t=!0){bs(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],i="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(n.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(n.push({paramName:"*"}),i+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":s!==""&&s!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function dO(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bs(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Ti(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=s.charAt(t);return n&&n!=="/"?null:s.slice(t)||"/"}var PC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hO=s=>PC.test(s);function fO(s,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof s=="string"?xa(s):s,a;if(t)if(hO(t))a=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),bs(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?a=IS(t.substring(1),"/"):a=IS(t,e)}else a=e;return{pathname:a,search:gO(n),hash:yO(i)}}function IS(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Im(s,e,t,n){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pO(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function LC(s){let e=pO(s);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function IC(s,e,t,n=!1){let i;typeof s=="string"?i=xa(s):(i={...s},_t(!i.pathname||!i.pathname.includes("?"),Im("?","pathname","search",i)),_t(!i.pathname||!i.pathname.includes("#"),Im("#","pathname","hash",i)),_t(!i.search||!i.search.includes("#"),Im("#","search","hash",i)));let a=s===""||i.pathname==="",l=a?"/":i.pathname,c;if(l==null)c=t;else{let m=e.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),m-=1;i.pathname=y.join("/")}c=m>=0?e[m]:"/"}let d=fO(i,c),h=l&&l!=="/"&&l.endsWith("/"),f=(a||l===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(h||f)&&(d.pathname+="/"),d}var Ci=s=>s.join("/").replace(/\/\/+/g,"/"),mO=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),gO=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,yO=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,vO=class{constructor(s,e,t,n=!1){this.status=s,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function bO(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function xO(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var FC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function BC(s,e){let t=s;if(typeof t!="string"||!PC.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let n=t,i=!1;if(FC)try{let a=new URL(window.location.href),l=t.startsWith("//")?new URL(a.protocol+t):new URL(t),c=Ti(l.pathname,e);l.origin===a.origin&&c!=null?t=c+l.search+l.hash:i=!0}catch{bs(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var zC=["POST","PUT","PATCH","DELETE"];new Set(zC);var wO=["GET",...zC];new Set(wO);var qo=w.createContext(null);qo.displayName="DataRouter";var Mh=w.createContext(null);Mh.displayName="DataRouterState";var SO=w.createContext(!1),UC=w.createContext({isTransitioning:!1});UC.displayName="ViewTransition";var AO=w.createContext(new Map);AO.displayName="Fetchers";var CO=w.createContext(null);CO.displayName="Await";var xs=w.createContext(null);xs.displayName="Navigation";var Uc=w.createContext(null);Uc.displayName="Location";var ji=w.createContext({outlet:null,matches:[],isDataRoute:!1});ji.displayName="Route";var ky=w.createContext(null);ky.displayName="RouteError";var VC="REACT_ROUTER_ERROR",EO="REDIRECT",_O="ROUTE_ERROR_RESPONSE";function TO(s){if(s.startsWith(`${VC}:${EO}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function RO(s){if(s.startsWith(`${VC}:${_O}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new vO(e.status,e.statusText,e.data)}catch{}}function NO(s,{relative:e}={}){_t(Vc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=w.useContext(xs),{hash:i,pathname:a,search:l}=Hc(s,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:Ci([t,a])),n.createHref({pathname:c,search:l,hash:i})}function Vc(){return w.useContext(Uc)!=null}function Er(){return _t(Vc(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Uc).location}var HC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $C(s){w.useContext(xs).static||w.useLayoutEffect(s)}function GC(){let{isDataRoute:s}=w.useContext(ji);return s?VO():MO()}function MO(){_t(Vc(),"useNavigate() may be used only in the context of a <Router> component.");let s=w.useContext(qo),{basename:e,navigator:t}=w.useContext(xs),{matches:n}=w.useContext(ji),{pathname:i}=Er(),a=JSON.stringify(LC(n)),l=w.useRef(!1);return $C(()=>{l.current=!0}),w.useCallback((d,h={})=>{if(bs(l.current,HC),!l.current)return;if(typeof d=="number"){t.go(d);return}let f=IC(d,JSON.parse(a),i,h.relative==="path");s==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ci([e,f.pathname])),(h.replace?t.replace:t.push)(f,h.state,h)},[e,t,a,i,s])}w.createContext(null);function Hc(s,{relative:e}={}){let{matches:t}=w.useContext(ji),{pathname:n}=Er(),i=JSON.stringify(LC(t));return w.useMemo(()=>IC(s,JSON.parse(i),n,e==="path"),[s,i,n,e])}function DO(s,e){return qC(s,e)}function qC(s,e,t,n,i){_t(Vc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=w.useContext(xs),{matches:l}=w.useContext(ji),c=l[l.length-1],d=c?c.params:{},h=c?c.pathname:"/",f=c?c.pathnameBase:"/",m=c&&c.route;{let _=m&&m.path||"";YC(h,!m||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let y=Er(),x;if(e){let _=typeof e=="string"?xa(e):e;_t(f==="/"||_.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${_.pathname}" was given in the \`location\` prop.`),x=_}else x=y;let A=x.pathname||"/",S=A;if(f!=="/"){let _=f.replace(/^\//,"").split("/");S="/"+A.replace(/^\//,"").split("/").slice(_.length).join("/")}let C=kC(s,{pathname:S});bs(m||C!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),bs(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=LO(C&&C.map(_=>Object.assign({},_,{params:Object.assign({},d,_.params),pathname:Ci([f,a.encodeLocation?a.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?f:Ci([f,a.encodeLocation?a.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),l,t,n,i);return e&&E?w.createElement(Uc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},E):E}function kO(){let s=UO(),e=bO(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",s),l=w.createElement(w.Fragment,null,w.createElement("p",null," Hey developer "),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:a},"ErrorBoundary")," or"," ",w.createElement("code",{style:a},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),t?w.createElement("pre",{style:i},t):null,l)}var jO=w.createElement(kO,null),XC=class extends w.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=RO(s.digest);t&&(s=t)}let e=s!==void 0?w.createElement(ji.Provider,{value:this.props.routeContext},w.createElement(ky.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?w.createElement(OO,{error:s},e):e}};XC.contextType=SO;var Fm=new WeakMap;function OO({children:s,error:e}){let{basename:t}=w.useContext(xs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=TO(e.digest);if(n){let i=Fm.get(e);if(i)throw i;let a=BC(n.location,t);if(FC&&!Fm.get(e))if(a.isExternal||n.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:n.replace}));throw Fm.set(e,l),l}return w.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return s}function PO({routeContext:s,match:e,children:t}){let n=w.useContext(qo);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(ji.Provider,{value:s},t)}function LO(s,e=[],t=null,n=null,i=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let a=s,l=t?.errors;if(l!=null){let f=a.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);_t(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let c=!1,d=-1;if(t)for(let f=0;f<a.length;f++){let m=a[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:y,errors:x}=t,A=m.route.loader&&!y.hasOwnProperty(m.route.id)&&(!x||x[m.route.id]===void 0);if(m.route.lazy||A){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}let h=t&&n?(f,m)=>{n(f,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:xO(t.matches),errorInfo:m})}:void 0;return a.reduceRight((f,m,y)=>{let x,A=!1,S=null,C=null;t&&(x=l&&m.route.id?l[m.route.id]:void 0,S=m.route.errorElement||jO,c&&(d<0&&y===0?(YC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,C=null):d===y&&(A=!0,C=m.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,y+1)),_=()=>{let R;return x?R=S:A?R=C:m.route.Component?R=w.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=f,w.createElement(PO,{match:m,routeContext:{outlet:f,matches:E,isDataRoute:t!=null},children:R})};return t&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?w.createElement(XC,{location:t.location,revalidation:t.revalidation,component:S,error:x,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:h}):_()},null)}function jy(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function IO(s){let e=w.useContext(qo);return _t(e,jy(s)),e}function FO(s){let e=w.useContext(Mh);return _t(e,jy(s)),e}function BO(s){let e=w.useContext(ji);return _t(e,jy(s)),e}function Oy(s){let e=BO(s),t=e.matches[e.matches.length-1];return _t(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function zO(){return Oy("useRouteId")}function UO(){let s=w.useContext(ky),e=FO("useRouteError"),t=Oy("useRouteError");return s!==void 0?s:e.errors?.[t]}function VO(){let{router:s}=IO("useNavigate"),e=Oy("useNavigate"),t=w.useRef(!1);return $C(()=>{t.current=!0}),w.useCallback(async(i,a={})=>{bs(t.current,HC),t.current&&(typeof i=="number"?await s.navigate(i):await s.navigate(i,{fromRouteId:e,...a}))},[s,e])}var FS={};function YC(s,e,t){!e&&!FS[s]&&(FS[s]=!0,bs(!1,t))}w.memo(HO);function HO({routes:s,future:e,state:t,onError:n}){return qC(s,void 0,t,n,e)}function Mg(s){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $O({basename:s="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:a=!1,unstable_useTransitions:l}){_t(!Vc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=s.replace(/^\/*/,"/"),d=w.useMemo(()=>({basename:c,navigator:i,static:a,unstable_useTransitions:l,future:{}}),[c,i,a,l]);typeof t=="string"&&(t=xa(t));let{pathname:h="/",search:f="",hash:m="",state:y=null,key:x="default"}=t,A=w.useMemo(()=>{let S=Ti(h,c);return S==null?null:{location:{pathname:S,search:f,hash:m,state:y,key:x},navigationType:n}},[c,h,f,m,y,x,n]);return bs(A!=null,`<Router basename="${c}"> is not able to match the URL "${h}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:w.createElement(xs.Provider,{value:d},w.createElement(Uc.Provider,{children:e,value:A}))}function GO({children:s,location:e}){return DO(Dg(s),e)}function Dg(s,e=[]){let t=[];return w.Children.forEach(s,(n,i)=>{if(!w.isValidElement(n))return;let a=[...e,i];if(n.type===w.Fragment){t.push.apply(t,Dg(n.props.children,a));return}_t(n.type===Mg,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Dg(n.props.children,a)),t.push(l)}),t}var Gd="get",qd="application/x-www-form-urlencoded";function Dh(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function qO(s){return Dh(s)&&s.tagName.toLowerCase()==="button"}function XO(s){return Dh(s)&&s.tagName.toLowerCase()==="form"}function YO(s){return Dh(s)&&s.tagName.toLowerCase()==="input"}function WO(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function KO(s,e){return s.button===0&&(!e||e==="_self")&&!WO(s)}var Sd=null;function QO(){if(Sd===null)try{new FormData(document.createElement("form"),0),Sd=!1}catch{Sd=!0}return Sd}var ZO=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Bm(s){return s!=null&&!ZO.has(s)?(bs(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qd}"`),null):s}function JO(s,e){let t,n,i,a,l;if(XO(s)){let c=s.getAttribute("action");n=c?Ti(c,e):null,t=s.getAttribute("method")||Gd,i=Bm(s.getAttribute("enctype"))||qd,a=new FormData(s)}else if(qO(s)||YO(s)&&(s.type==="submit"||s.type==="image")){let c=s.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=s.getAttribute("formaction")||c.getAttribute("action");if(n=d?Ti(d,e):null,t=s.getAttribute("formmethod")||c.getAttribute("method")||Gd,i=Bm(s.getAttribute("formenctype"))||Bm(c.getAttribute("enctype"))||qd,a=new FormData(c,s),!QO()){let{name:h,type:f,value:m}=s;if(f==="image"){let y=h?`${h}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else h&&a.append(h,m)}}else{if(Dh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Gd,n=null,i=qd,l=s}return a&&i==="text/plain"&&(l=a,a=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Py(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function eP(s,e,t,n){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${n}`:i.pathname=`${i.pathname}.${n}`:i.pathname==="/"?i.pathname=`_root.${n}`:e&&Ti(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function tP(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function nP(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function sP(s,e,t){let n=await Promise.all(s.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await tP(a,t);return l.links?l.links():[]}return[]}));return oP(n.flat(1).filter(nP).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function BS(s,e,t,n,i,a){let l=(d,h)=>t[h]?d.route.id!==t[h].route.id:!0,c=(d,h)=>t[h].pathname!==d.pathname||t[h].route.path?.endsWith("*")&&t[h].params["*"]!==d.params["*"];return a==="assets"?e.filter((d,h)=>l(d,h)||c(d,h)):a==="data"?e.filter((d,h)=>{let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(l(d,h)||c(d,h))return!0;if(d.route.shouldRevalidate){let m=d.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function iP(s,e,{includeHydrateFallback:t}={}){return rP(s.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function rP(s){return[...new Set(s)]}function aP(s){let e={},t=Object.keys(s).sort();for(let n of t)e[n]=s[n];return e}function oP(s,e){let t=new Set;return new Set(e),s.reduce((n,i)=>{let a=JSON.stringify(aP(i));return t.has(a)||(t.add(a),n.push({key:a,link:i})),n},[])}function WC(){let s=w.useContext(qo);return Py(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function lP(){let s=w.useContext(Mh);return Py(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Ly=w.createContext(void 0);Ly.displayName="FrameworkContext";function KC(){let s=w.useContext(Ly);return Py(s,"You must render this element inside a <HydratedRouter> element"),s}function cP(s,e){let t=w.useContext(Ly),[n,i]=w.useState(!1),[a,l]=w.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:h,onMouseLeave:f,onTouchStart:m}=e,y=w.useRef(null);w.useEffect(()=>{if(s==="render"&&l(!0),s==="viewport"){let S=E=>{E.forEach(_=>{l(_.isIntersecting)})},C=new IntersectionObserver(S,{threshold:.5});return y.current&&C.observe(y.current),()=>{C.disconnect()}}},[s]),w.useEffect(()=>{if(n){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[n]);let x=()=>{i(!0)},A=()=>{i(!1),l(!1)};return t?s!=="intent"?[a,y,{}]:[a,y,{onFocus:Zl(c,x),onBlur:Zl(d,A),onMouseEnter:Zl(h,x),onMouseLeave:Zl(f,A),onTouchStart:Zl(m,x)}]:[!1,y,{}]}function Zl(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function uP({page:s,...e}){let{router:t}=WC(),n=w.useMemo(()=>kC(t.routes,s,t.basename),[t.routes,s,t.basename]);return n?w.createElement(hP,{page:s,matches:n,...e}):null}function dP(s){let{manifest:e,routeModules:t}=KC(),[n,i]=w.useState([]);return w.useEffect(()=>{let a=!1;return sP(s,e,t).then(l=>{a||i(l)}),()=>{a=!0}},[s,e,t]),n}function hP({page:s,matches:e,...t}){let n=Er(),{future:i,manifest:a,routeModules:l}=KC(),{basename:c}=WC(),{loaderData:d,matches:h}=lP(),f=w.useMemo(()=>BS(s,e,h,a,n,"data"),[s,e,h,a,n]),m=w.useMemo(()=>BS(s,e,h,a,n,"assets"),[s,e,h,a,n]),y=w.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let S=new Set,C=!1;if(e.forEach(_=>{let R=a.routes[_.route.id];!R||!R.hasLoader||(!f.some(N=>N.route.id===_.route.id)&&_.route.id in d&&l[_.route.id]?.shouldRevalidate||R.hasClientLoader?C=!0:S.add(_.route.id))}),S.size===0)return[];let E=eP(s,c,i.unstable_trailingSlashAwareDataRequests,"data");return C&&S.size>0&&E.searchParams.set("_routes",e.filter(_=>S.has(_.route.id)).map(_=>_.route.id).join(",")),[E.pathname+E.search]},[c,i.unstable_trailingSlashAwareDataRequests,d,n,a,f,e,s,l]),x=w.useMemo(()=>iP(m,a),[m,a]),A=dP(m);return w.createElement(w.Fragment,null,y.map(S=>w.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),x.map(S=>w.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),A.map(({key:S,link:C})=>w.createElement("link",{key:S,nonce:t.nonce,...C})))}function fP(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var pP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{pP&&(window.__reactRouterVersion="7.12.0")}catch{}function mP({basename:s,children:e,unstable_useTransitions:t,window:n}){let i=w.useRef();i.current==null&&(i.current=Wj({window:n,v5Compat:!0}));let a=i.current,[l,c]=w.useState({action:a.action,location:a.location}),d=w.useCallback(h=>{t===!1?c(h):w.startTransition(()=>c(h))},[t]);return w.useLayoutEffect(()=>a.listen(d),[a,d]),w.createElement($O,{basename:s,children:e,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:t})}var QC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ZC=w.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:a,replace:l,state:c,target:d,to:h,preventScrollReset:f,viewTransition:m,unstable_defaultShouldRevalidate:y,...x},A){let{basename:S,unstable_useTransitions:C}=w.useContext(xs),E=typeof h=="string"&&QC.test(h),_=BC(h,S);h=_.to;let R=NO(h,{relative:i}),[N,M,j]=cP(n,x),D=bP(h,{replace:l,state:c,target:d,preventScrollReset:f,relative:i,viewTransition:m,unstable_defaultShouldRevalidate:y,unstable_useTransitions:C});function O(U){e&&e(U),U.defaultPrevented||D(U)}let I=w.createElement("a",{...x,...j,href:_.absoluteURL||R,onClick:_.isExternal||a?e:O,ref:fP(A,M),target:d,"data-discover":!E&&t==="render"?"true":void 0});return N&&!E?w.createElement(w.Fragment,null,I,w.createElement(uP,{page:R})):I});ZC.displayName="Link";var gP=w.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:a,to:l,viewTransition:c,children:d,...h},f){let m=Hc(l,{relative:h.relative}),y=Er(),x=w.useContext(Mh),{navigator:A,basename:S}=w.useContext(xs),C=x!=null&&CP(m)&&c===!0,E=A.encodeLocation?A.encodeLocation(m).pathname:m.pathname,_=y.pathname,R=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(_=_.toLowerCase(),R=R?R.toLowerCase():null,E=E.toLowerCase()),R&&S&&(R=Ti(R,S)||R);const N=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let M=_===E||!i&&_.startsWith(E)&&_.charAt(N)==="/",j=R!=null&&(R===E||!i&&R.startsWith(E)&&R.charAt(E.length)==="/"),D={isActive:M,isPending:j,isTransitioning:C},O=M?e:void 0,I;typeof n=="function"?I=n(D):I=[n,M?"active":null,j?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let U=typeof a=="function"?a(D):a;return w.createElement(ZC,{...h,"aria-current":O,className:I,ref:f,style:U,to:l,viewTransition:c},typeof d=="function"?d(D):d)});gP.displayName="NavLink";var yP=w.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:a,method:l=Gd,action:c,onSubmit:d,relative:h,preventScrollReset:f,viewTransition:m,unstable_defaultShouldRevalidate:y,...x},A)=>{let{unstable_useTransitions:S}=w.useContext(xs),C=SP(),E=AP(c,{relative:h}),_=l.toLowerCase()==="get"?"get":"post",R=typeof c=="string"&&QC.test(c),N=M=>{if(d&&d(M),M.defaultPrevented)return;M.preventDefault();let j=M.nativeEvent.submitter,D=j?.getAttribute("formmethod")||l,O=()=>C(j||M.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:i,state:a,relative:h,preventScrollReset:f,viewTransition:m,unstable_defaultShouldRevalidate:y});S&&t!==!1?w.startTransition(()=>O()):O()};return w.createElement("form",{ref:A,method:_,action:E,onSubmit:n?d:N,...x,"data-discover":!R&&s==="render"?"true":void 0})});yP.displayName="Form";function vP(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JC(s){let e=w.useContext(qo);return _t(e,vP(s)),e}function bP(s,{target:e,replace:t,state:n,preventScrollReset:i,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:c,unstable_useTransitions:d}={}){let h=GC(),f=Er(),m=Hc(s,{relative:a});return w.useCallback(y=>{if(KO(y,e)){y.preventDefault();let x=t!==void 0?t:Ac(f)===Ac(m),A=()=>h(s,{replace:x,state:n,preventScrollReset:i,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:c});d?w.startTransition(()=>A()):A()}},[f,h,m,t,n,e,s,i,a,l,c,d])}var xP=0,wP=()=>`__${String(++xP)}__`;function SP(){let{router:s}=JC("useSubmit"),{basename:e}=w.useContext(xs),t=zO(),n=s.fetch,i=s.navigate;return w.useCallback(async(a,l={})=>{let{action:c,method:d,encType:h,formData:f,body:m}=JO(a,e);if(l.navigate===!1){let y=l.fetcherKey||wP();await n(y,t,l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:f,body:m,formMethod:l.method||d,formEncType:l.encType||h,flushSync:l.flushSync})}else await i(l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:f,body:m,formMethod:l.method||d,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[n,i,e,t])}function AP(s,{relative:e}={}){let{basename:t}=w.useContext(xs),n=w.useContext(ji);_t(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...Hc(s||".",{relative:e})},l=Er();if(s==null){a.search=l.search;let c=new URLSearchParams(a.search),d=c.getAll("index");if(d.some(f=>f==="")){c.delete("index"),d.filter(m=>m).forEach(m=>c.append("index",m));let f=c.toString();a.search=f?`?${f}`:""}}return(!s||s===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Ci([t,a.pathname])),Ac(a)}function CP(s,{relative:e}={}){let t=w.useContext(UC);_t(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=JC("useViewTransitionState"),i=Hc(s,{relative:e});if(!t.isTransitioning)return!1;let a=Ti(t.currentLocation.pathname,n)||t.currentLocation.pathname,l=Ti(t.nextLocation.pathname,n)||t.nextLocation.pathname;return rh(i.pathname,l)!=null||rh(i.pathname,a)!=null}var $c=EC();const EP=My($c),Iy=w.createContext({});function Fy(s){const e=w.useRef(null);return e.current===null&&(e.current=s()),e.current}const eE=typeof window<"u",tE=eE?w.useLayoutEffect:w.useEffect,kh=w.createContext(null);function By(s,e){s.indexOf(e)===-1&&s.push(e)}function zy(s,e){const t=s.indexOf(e);t>-1&&s.splice(t,1)}const Qs=(s,e,t)=>t>e?e:t<s?s:t;let Uy=()=>{};const Ri={},nE=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function sE(s){return typeof s=="object"&&s!==null}const iE=s=>/^0[^.\s]+$/u.test(s);function Vy(s){let e;return()=>(e===void 0&&(e=s()),e)}const ys=s=>s,_P=(s,e)=>t=>e(s(t)),Gc=(...s)=>s.reduce(_P),Cc=(s,e,t)=>{const n=e-s;return n===0?1:(t-s)/n};class Hy{constructor(){this.subscriptions=[]}add(e){return By(this.subscriptions,e),()=>zy(this.subscriptions,e)}notify(e,t,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,n);else for(let a=0;a<i;a++){const l=this.subscriptions[a];l&&l(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ei=s=>s*1e3,ms=s=>s/1e3;function rE(s,e){return e?s*(1e3/e):0}const aE=(s,e,t)=>(((1-3*t+3*e)*s+(3*t-6*e))*s+3*e)*s,TP=1e-7,RP=12;function NP(s,e,t,n,i){let a,l,c=0;do l=e+(t-e)/2,a=aE(l,n,i)-s,a>0?t=l:e=l;while(Math.abs(a)>TP&&++c<RP);return l}function qc(s,e,t,n){if(s===e&&t===n)return ys;const i=a=>NP(a,0,1,s,t);return a=>a===0||a===1?a:aE(i(a),e,n)}const oE=s=>e=>e<=.5?s(2*e)/2:(2-s(2*(1-e)))/2,lE=s=>e=>1-s(1-e),cE=qc(.33,1.53,.69,.99),$y=lE(cE),uE=oE($y),dE=s=>(s*=2)<1?.5*$y(s):.5*(2-Math.pow(2,-10*(s-1))),Gy=s=>1-Math.sin(Math.acos(s)),hE=lE(Gy),fE=oE(Gy),MP=qc(.42,0,1,1),DP=qc(0,0,.58,1),pE=qc(.42,0,.58,1),kP=s=>Array.isArray(s)&&typeof s[0]!="number",mE=s=>Array.isArray(s)&&typeof s[0]=="number",jP={linear:ys,easeIn:MP,easeInOut:pE,easeOut:DP,circIn:Gy,circInOut:fE,circOut:hE,backIn:$y,backInOut:uE,backOut:cE,anticipate:dE},OP=s=>typeof s=="string",zS=s=>{if(mE(s)){Uy(s.length===4);const[e,t,n,i]=s;return qc(e,t,n,i)}else if(OP(s))return jP[s];return s},Ad=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function PP(s,e){let t=new Set,n=new Set,i=!1,a=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function d(f){l.has(f)&&(h.schedule(f),s()),f(c)}const h={schedule:(f,m=!1,y=!1)=>{const A=y&&i?t:n;return m&&l.add(f),A.has(f)||A.add(f),f},cancel:f=>{n.delete(f),l.delete(f)},process:f=>{if(c=f,i){a=!0;return}i=!0,[t,n]=[n,t],t.forEach(d),t.clear(),i=!1,a&&(a=!1,h.process(f))}};return h}const LP=40;function gE(s,e){let t=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,l=Ad.reduce((R,N)=>(R[N]=PP(a),R),{}),{setup:c,read:d,resolveKeyframes:h,preUpdate:f,update:m,preRender:y,render:x,postRender:A}=l,S=()=>{const R=Ri.useManualTiming?i.timestamp:performance.now();t=!1,Ri.useManualTiming||(i.delta=n?1e3/60:Math.max(Math.min(R-i.timestamp,LP),1)),i.timestamp=R,i.isProcessing=!0,c.process(i),d.process(i),h.process(i),f.process(i),m.process(i),y.process(i),x.process(i),A.process(i),i.isProcessing=!1,t&&e&&(n=!1,s(S))},C=()=>{t=!0,n=!0,i.isProcessing||s(S)};return{schedule:Ad.reduce((R,N)=>{const M=l[N];return R[N]=(j,D=!1,O=!1)=>(t||C(),M.schedule(j,D,O)),R},{}),cancel:R=>{for(let N=0;N<Ad.length;N++)l[Ad[N]].cancel(R)},state:i,steps:l}}const{schedule:vt,cancel:xr,state:rn,steps:zm}=gE(typeof requestAnimationFrame<"u"?requestAnimationFrame:ys,!0);let Xd;function IP(){Xd=void 0}const Sn={now:()=>(Xd===void 0&&Sn.set(rn.isProcessing||Ri.useManualTiming?rn.timestamp:performance.now()),Xd),set:s=>{Xd=s,queueMicrotask(IP)}},yE=s=>e=>typeof e=="string"&&e.startsWith(s),vE=yE("--"),FP=yE("var(--"),qy=s=>FP(s)?BP.test(s.split("/*")[0].trim()):!1,BP=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function US(s){return typeof s!="string"?!1:s.split("/*")[0].includes("var(--")}const Xo={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},Ec={...Xo,transform:s=>Qs(0,1,s)},Cd={...Xo,default:1},gc=s=>Math.round(s*1e5)/1e5,Xy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function zP(s){return s==null}const UP=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Yy=(s,e)=>t=>!!(typeof t=="string"&&UP.test(t)&&t.startsWith(s)||e&&!zP(t)&&Object.prototype.hasOwnProperty.call(t,e)),bE=(s,e,t)=>n=>{if(typeof n!="string")return n;const[i,a,l,c]=n.match(Xy);return{[s]:parseFloat(i),[e]:parseFloat(a),[t]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},VP=s=>Qs(0,255,s),Um={...Xo,transform:s=>Math.round(VP(s))},sa={test:Yy("rgb","red"),parse:bE("red","green","blue"),transform:({red:s,green:e,blue:t,alpha:n=1})=>"rgba("+Um.transform(s)+", "+Um.transform(e)+", "+Um.transform(t)+", "+gc(Ec.transform(n))+")"};function HP(s){let e="",t="",n="",i="";return s.length>5?(e=s.substring(1,3),t=s.substring(3,5),n=s.substring(5,7),i=s.substring(7,9)):(e=s.substring(1,2),t=s.substring(2,3),n=s.substring(3,4),i=s.substring(4,5),e+=e,t+=t,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const kg={test:Yy("#"),parse:HP,transform:sa.transform},Xc=s=>({test:e=>typeof e=="string"&&e.endsWith(s)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${s}`}),cr=Xc("deg"),Ws=Xc("%"),Ce=Xc("px"),$P=Xc("vh"),GP=Xc("vw"),VS={...Ws,parse:s=>Ws.parse(s)/100,transform:s=>Ws.transform(s*100)},So={test:Yy("hsl","hue"),parse:bE("hue","saturation","lightness"),transform:({hue:s,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(s)+", "+Ws.transform(gc(e))+", "+Ws.transform(gc(t))+", "+gc(Ec.transform(n))+")"},zt={test:s=>sa.test(s)||kg.test(s)||So.test(s),parse:s=>sa.test(s)?sa.parse(s):So.test(s)?So.parse(s):kg.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?sa.transform(s):So.transform(s),getAnimatableNone:s=>{const e=zt.parse(s);return e.alpha=0,zt.transform(e)}},qP=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function XP(s){return isNaN(s)&&typeof s=="string"&&(s.match(Xy)?.length||0)+(s.match(qP)?.length||0)>0}const xE="number",wE="color",YP="var",WP="var(",HS="${}",KP=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function _c(s){const e=s.toString(),t=[],n={color:[],number:[],var:[]},i=[];let a=0;const c=e.replace(KP,d=>(zt.test(d)?(n.color.push(a),i.push(wE),t.push(zt.parse(d))):d.startsWith(WP)?(n.var.push(a),i.push(YP),t.push(d)):(n.number.push(a),i.push(xE),t.push(parseFloat(d))),++a,HS)).split(HS);return{values:t,split:c,indexes:n,types:i}}function SE(s){return _c(s).values}function AE(s){const{split:e,types:t}=_c(s),n=e.length;return i=>{let a="";for(let l=0;l<n;l++)if(a+=e[l],i[l]!==void 0){const c=t[l];c===xE?a+=gc(i[l]):c===wE?a+=zt.transform(i[l]):a+=i[l]}return a}}const QP=s=>typeof s=="number"?0:zt.test(s)?zt.getAnimatableNone(s):s;function ZP(s){const e=SE(s);return AE(s)(e.map(QP))}const wr={test:XP,parse:SE,createTransformer:AE,getAnimatableNone:ZP};function Vm(s,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?s+(e-s)*6*t:t<1/2?e:t<2/3?s+(e-s)*(2/3-t)*6:s}function JP({hue:s,saturation:e,lightness:t,alpha:n}){s/=360,e/=100,t/=100;let i=0,a=0,l=0;if(!e)i=a=l=t;else{const c=t<.5?t*(1+e):t+e-t*e,d=2*t-c;i=Vm(d,c,s+1/3),a=Vm(d,c,s),l=Vm(d,c,s-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:n}}function ah(s,e){return t=>t>0?e:s}const Et=(s,e,t)=>s+(e-s)*t,Hm=(s,e,t)=>{const n=s*s,i=t*(e*e-n)+n;return i<0?0:Math.sqrt(i)},eL=[kg,sa,So],tL=s=>eL.find(e=>e.test(s));function $S(s){const e=tL(s);if(!e)return!1;let t=e.parse(s);return e===So&&(t=JP(t)),t}const GS=(s,e)=>{const t=$S(s),n=$S(e);if(!t||!n)return ah(s,e);const i={...t};return a=>(i.red=Hm(t.red,n.red,a),i.green=Hm(t.green,n.green,a),i.blue=Hm(t.blue,n.blue,a),i.alpha=Et(t.alpha,n.alpha,a),sa.transform(i))},jg=new Set(["none","hidden"]);function nL(s,e){return jg.has(s)?t=>t<=0?s:e:t=>t>=1?e:s}function sL(s,e){return t=>Et(s,e,t)}function Wy(s){return typeof s=="number"?sL:typeof s=="string"?qy(s)?ah:zt.test(s)?GS:aL:Array.isArray(s)?CE:typeof s=="object"?zt.test(s)?GS:iL:ah}function CE(s,e){const t=[...s],n=t.length,i=s.map((a,l)=>Wy(a)(a,e[l]));return a=>{for(let l=0;l<n;l++)t[l]=i[l](a);return t}}function iL(s,e){const t={...s,...e},n={};for(const i in t)s[i]!==void 0&&e[i]!==void 0&&(n[i]=Wy(s[i])(s[i],e[i]));return i=>{for(const a in n)t[a]=n[a](i);return t}}function rL(s,e){const t=[],n={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],l=s.indexes[a][n[a]],c=s.values[l]??0;t[i]=c,n[a]++}return t}const aL=(s,e)=>{const t=wr.createTransformer(e),n=_c(s),i=_c(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?jg.has(s)&&!i.values.length||jg.has(e)&&!n.values.length?nL(s,e):Gc(CE(rL(n,i),i.values),t):ah(s,e)};function EE(s,e,t){return typeof s=="number"&&typeof e=="number"&&typeof t=="number"?Et(s,e,t):Wy(s)(s,e)}const oL=s=>{const e=({timestamp:t})=>s(t);return{start:(t=!0)=>vt.update(e,t),stop:()=>xr(e),now:()=>rn.isProcessing?rn.timestamp:Sn.now()}},_E=(s,e,t=10)=>{let n="";const i=Math.max(Math.round(e/t),2);for(let a=0;a<i;a++)n+=Math.round(s(a/(i-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},oh=2e4;function Ky(s){let e=0;const t=50;let n=s.next(e);for(;!n.done&&e<oh;)e+=t,n=s.next(e);return e>=oh?1/0:e}function lL(s,e=100,t){const n=t({...s,keyframes:[0,e]}),i=Math.min(Ky(n),oh);return{type:"keyframes",ease:a=>n.next(i*a).value/e,duration:ms(i)}}const cL=5;function TE(s,e,t){const n=Math.max(e-cL,0);return rE(t-s(n),e-n)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$m=.001;function uL({duration:s=Mt.duration,bounce:e=Mt.bounce,velocity:t=Mt.velocity,mass:n=Mt.mass}){let i,a,l=1-e;l=Qs(Mt.minDamping,Mt.maxDamping,l),s=Qs(Mt.minDuration,Mt.maxDuration,ms(s)),l<1?(i=h=>{const f=h*l,m=f*s,y=f-t,x=Og(h,l),A=Math.exp(-m);return $m-y/x*A},a=h=>{const m=h*l*s,y=m*t+t,x=Math.pow(l,2)*Math.pow(h,2)*s,A=Math.exp(-m),S=Og(Math.pow(h,2),l);return(-i(h)+$m>0?-1:1)*((y-x)*A)/S}):(i=h=>{const f=Math.exp(-h*s),m=(h-t)*s+1;return-$m+f*m},a=h=>{const f=Math.exp(-h*s),m=(t-h)*(s*s);return f*m});const c=5/s,d=hL(i,a,c);if(s=Ei(s),isNaN(d))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:s};{const h=Math.pow(d,2)*n;return{stiffness:h,damping:l*2*Math.sqrt(n*h),duration:s}}}const dL=12;function hL(s,e,t){let n=t;for(let i=1;i<dL;i++)n=n-s(n)/e(n);return n}function Og(s,e){return s*Math.sqrt(1-e*e)}const fL=["duration","bounce"],pL=["stiffness","damping","mass"];function qS(s,e){return e.some(t=>s[t]!==void 0)}function mL(s){let e={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...s};if(!qS(s,pL)&&qS(s,fL))if(s.visualDuration){const t=s.visualDuration,n=2*Math.PI/(t*1.2),i=n*n,a=2*Qs(.05,1,1-(s.bounce||0))*Math.sqrt(i);e={...e,mass:Mt.mass,stiffness:i,damping:a}}else{const t=uL(s);e={...e,...t,mass:Mt.mass},e.isResolvedFromDuration=!0}return e}function lh(s=Mt.visualDuration,e=Mt.bounce){const t=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:e}:s;let{restSpeed:n,restDelta:i}=t;const a=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],c={done:!1,value:a},{stiffness:d,damping:h,mass:f,duration:m,velocity:y,isResolvedFromDuration:x}=mL({...t,velocity:-ms(t.velocity||0)}),A=y||0,S=h/(2*Math.sqrt(d*f)),C=l-a,E=ms(Math.sqrt(d/f)),_=Math.abs(C)<5;n||(n=_?Mt.restSpeed.granular:Mt.restSpeed.default),i||(i=_?Mt.restDelta.granular:Mt.restDelta.default);let R;if(S<1){const M=Og(E,S);R=j=>{const D=Math.exp(-S*E*j);return l-D*((A+S*E*C)/M*Math.sin(M*j)+C*Math.cos(M*j))}}else if(S===1)R=M=>l-Math.exp(-E*M)*(C+(A+E*C)*M);else{const M=E*Math.sqrt(S*S-1);R=j=>{const D=Math.exp(-S*E*j),O=Math.min(M*j,300);return l-D*((A+S*E*C)*Math.sinh(O)+M*C*Math.cosh(O))/M}}const N={calculatedDuration:x&&m||null,next:M=>{const j=R(M);if(x)c.done=M>=m;else{let D=M===0?A:0;S<1&&(D=M===0?Ei(A):TE(R,M,j));const O=Math.abs(D)<=n,I=Math.abs(l-j)<=i;c.done=O&&I}return c.value=c.done?l:j,c},toString:()=>{const M=Math.min(Ky(N),oh),j=_E(D=>N.next(M*D).value,M,30);return M+"ms "+j},toTransition:()=>{}};return N}lh.applyToOptions=s=>{const e=lL(s,100,lh);return s.ease=e.ease,s.duration=Ei(e.duration),s.type="keyframes",s};function Pg({keyframes:s,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:l,min:c,max:d,restDelta:h=.5,restSpeed:f}){const m=s[0],y={done:!1,value:m},x=O=>c!==void 0&&O<c||d!==void 0&&O>d,A=O=>c===void 0?d:d===void 0||Math.abs(c-O)<Math.abs(d-O)?c:d;let S=t*e;const C=m+S,E=l===void 0?C:l(C);E!==C&&(S=E-m);const _=O=>-S*Math.exp(-O/n),R=O=>E+_(O),N=O=>{const I=_(O),U=R(O);y.done=Math.abs(I)<=h,y.value=y.done?E:U};let M,j;const D=O=>{x(y.value)&&(M=O,j=lh({keyframes:[y.value,A(y.value)],velocity:TE(R,O,y.value),damping:i,stiffness:a,restDelta:h,restSpeed:f}))};return D(0),{calculatedDuration:null,next:O=>{let I=!1;return!j&&M===void 0&&(I=!0,N(O),D(O)),M!==void 0&&O>=M?j.next(O-M):(!I&&N(O),y)}}}function gL(s,e,t){const n=[],i=t||Ri.mix||EE,a=s.length-1;for(let l=0;l<a;l++){let c=i(s[l],s[l+1]);if(e){const d=Array.isArray(e)?e[l]||ys:e;c=Gc(d,c)}n.push(c)}return n}function yL(s,e,{clamp:t=!0,ease:n,mixer:i}={}){const a=s.length;if(Uy(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=s[0]===s[1];s[0]>s[a-1]&&(s=[...s].reverse(),e=[...e].reverse());const c=gL(e,n,i),d=c.length,h=f=>{if(l&&f<s[0])return e[0];let m=0;if(d>1)for(;m<s.length-2&&!(f<s[m+1]);m++);const y=Cc(s[m],s[m+1],f);return c[m](y)};return t?f=>h(Qs(s[0],s[a-1],f)):h}function vL(s,e){const t=s[s.length-1];for(let n=1;n<=e;n++){const i=Cc(0,e,n);s.push(Et(t,1,i))}}function bL(s){const e=[0];return vL(e,s.length-1),e}function xL(s,e){return s.map(t=>t*e)}function wL(s,e){return s.map(()=>e||pE).splice(0,s.length-1)}function yc({duration:s=300,keyframes:e,times:t,ease:n="easeInOut"}){const i=kP(n)?n.map(zS):zS(n),a={done:!1,value:e[0]},l=xL(t&&t.length===e.length?t:bL(e),s),c=yL(l,e,{ease:Array.isArray(i)?i:wL(e,i)});return{calculatedDuration:s,next:d=>(a.value=c(d),a.done=d>=s,a)}}const SL=s=>s!==null;function Qy(s,{repeat:e,repeatType:t="loop"},n,i=1){const a=s.filter(SL),c=i<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!c||n===void 0?a[c]:n}const AL={decay:Pg,inertia:Pg,tween:yc,keyframes:yc,spring:lh};function RE(s){typeof s.type=="string"&&(s.type=AL[s.type])}class Zy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const CL=s=>s/100;class Jy extends Zy{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Sn.now()&&this.tick(Sn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;RE(e);const{type:t=yc,repeat:n=0,repeatDelay:i=0,repeatType:a,velocity:l=0}=e;let{keyframes:c}=e;const d=t||yc;d!==yc&&typeof c[0]!="number"&&(this.mixKeyframes=Gc(CL,EE(c[0],c[1])),c=[0,100]);const h=d({...e,keyframes:c});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...c].reverse(),velocity:-l})),h.calculatedDuration===null&&(h.calculatedDuration=Ky(h));const{calculatedDuration:f}=h;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(n+1)-i,this.generator=h}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:i,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return n.next(0);const{delay:h=0,keyframes:f,repeat:m,repeatType:y,repeatDelay:x,type:A,onUpdate:S,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const E=this.currentTime-h*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?E<0:E>i;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let R=this.currentTime,N=n;if(m){const O=Math.min(this.currentTime,i)/c;let I=Math.floor(O),U=O%1;!U&&O>=1&&(U=1),U===1&&I--,I=Math.min(I,m+1),I%2&&(y==="reverse"?(U=1-U,x&&(U-=x/c)):y==="mirror"&&(N=l)),R=Qs(0,1,U)*c}const M=_?{done:!1,value:f[0]}:N.next(R);a&&(M.value=a(M.value));let{done:j}=M;!_&&d!==null&&(j=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return D&&A!==Pg&&(M.value=Qy(f,this.options,C,this.speed)),S&&S(M.value),D&&this.finish(),M}then(e,t){return this.finished.then(e,t)}get duration(){return ms(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ms(e)}get time(){return ms(this.currentTime)}set time(e){e=Ei(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Sn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ms(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=oL,startTime:t}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Sn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function EL(s){for(let e=1;e<s.length;e++)s[e]??(s[e]=s[e-1])}const ia=s=>s*180/Math.PI,Lg=s=>{const e=ia(Math.atan2(s[1],s[0]));return Ig(e)},_L={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate:Lg,rotateZ:Lg,skewX:s=>ia(Math.atan(s[1])),skewY:s=>ia(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},Ig=s=>(s=s%360,s<0&&(s+=360),s),XS=Lg,YS=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),WS=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),TL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:YS,scaleY:WS,scale:s=>(YS(s)+WS(s))/2,rotateX:s=>Ig(ia(Math.atan2(s[6],s[5]))),rotateY:s=>Ig(ia(Math.atan2(-s[2],s[0]))),rotateZ:XS,rotate:XS,skewX:s=>ia(Math.atan(s[4])),skewY:s=>ia(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function Fg(s){return s.includes("scale")?1:0}function Bg(s,e){if(!s||s==="none")return Fg(e);const t=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,i;if(t)n=TL,i=t;else{const c=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=_L,i=c}if(!i)return Fg(e);const a=n[e],l=i[1].split(",").map(NL);return typeof a=="function"?a(l):l[a]}const RL=(s,e)=>{const{transform:t="none"}=getComputedStyle(s);return Bg(t,e)};function NL(s){return parseFloat(s.trim())}const Yo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wo=new Set(Yo),KS=s=>s===Xo||s===Ce,ML=new Set(["x","y","z"]),DL=Yo.filter(s=>!ML.has(s));function kL(s){const e=[];return DL.forEach(t=>{const n=s.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const gr={width:({x:s},{paddingLeft:e="0",paddingRight:t="0"})=>s.max-s.min-parseFloat(e)-parseFloat(t),height:({y:s},{paddingTop:e="0",paddingBottom:t="0"})=>s.max-s.min-parseFloat(e)-parseFloat(t),top:(s,{top:e})=>parseFloat(e),left:(s,{left:e})=>parseFloat(e),bottom:({y:s},{top:e})=>parseFloat(e)+(s.max-s.min),right:({x:s},{left:e})=>parseFloat(e)+(s.max-s.min),x:(s,{transform:e})=>Bg(e,"x"),y:(s,{transform:e})=>Bg(e,"y")};gr.translateX=gr.x;gr.translateY=gr.y;const ca=new Set;let zg=!1,Ug=!1,Vg=!1;function NE(){if(Ug){const s=Array.from(ca).filter(n=>n.needsMeasurement),e=new Set(s.map(n=>n.element)),t=new Map;e.forEach(n=>{const i=kL(n);i.length&&(t.set(n,i),n.render())}),s.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=t.get(n);i&&i.forEach(([a,l])=>{n.getValue(a)?.set(l)})}),s.forEach(n=>n.measureEndState()),s.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Ug=!1,zg=!1,ca.forEach(s=>s.complete(Vg)),ca.clear()}function ME(){ca.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(Ug=!0)})}function jL(){Vg=!0,ME(),NE(),Vg=!1}class ev{constructor(e,t,n,i,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=i,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(ca.add(this),zg||(zg=!0,vt.read(ME),vt.resolveKeyframes(NE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:i}=this;if(e[0]===null){const a=i?.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(n&&t){const c=n.readValue(t,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),i&&a===void 0&&i.set(e[0])}EL(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ca.delete(this)}cancel(){this.state==="scheduled"&&(ca.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const OL=s=>s.startsWith("--");function PL(s,e,t){OL(e)?s.style.setProperty(e,t):s.style[e]=t}const LL=Vy(()=>window.ScrollTimeline!==void 0),IL={};function FL(s,e){const t=Vy(s);return()=>IL[e]??t()}const DE=FL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ac=([s,e,t,n])=>`cubic-bezier(${s}, ${e}, ${t}, ${n})`,QS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ac([0,.65,.55,1]),circOut:ac([.55,0,1,.45]),backIn:ac([.31,.01,.66,-.59]),backOut:ac([.33,1.53,.69,.99])};function kE(s,e){if(s)return typeof s=="function"?DE()?_E(s,e):"ease-out":mE(s)?ac(s):Array.isArray(s)?s.map(t=>kE(t,e)||QS.easeOut):QS[s]}function BL(s,e,t,{delay:n=0,duration:i=300,repeat:a=0,repeatType:l="loop",ease:c="easeOut",times:d}={},h=void 0){const f={[e]:t};d&&(f.offset=d);const m=kE(c,i);Array.isArray(m)&&(f.easing=m);const y={delay:n,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return h&&(y.pseudoElement=h),s.animate(f,y)}function jE(s){return typeof s=="function"&&"applyToOptions"in s}function zL({type:s,...e}){return jE(s)&&DE()?s.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class UL extends Zy{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:n,keyframes:i,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:c,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,Uy(typeof e.type!="string");const h=zL(e);this.animation=BL(t,n,i,h,a),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=Qy(i,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(f):PL(t,n,f),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return ms(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ms(e)}get time(){return ms(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Ei(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&LL()?(this.animation.timeline=e,ys):t(this)}}const OE={anticipate:dE,backInOut:uE,circInOut:fE};function VL(s){return s in OE}function HL(s){typeof s.ease=="string"&&VL(s.ease)&&(s.ease=OE[s.ease])}const Gm=10;class $L extends UL{constructor(e){HL(e),RE(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:i,element:a,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new Jy({...l,autoplay:!1}),d=Math.max(Gm,Sn.now()-this.startTime),h=Qs(0,Gm,d-Gm);t.setWithVelocity(c.sample(Math.max(0,d-h)).value,c.sample(d).value,h),c.stop()}}const ZS=(s,e)=>e==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(wr.test(s)||s==="0")&&!s.startsWith("url("));function GL(s){const e=s[0];if(s.length===1)return!0;for(let t=0;t<s.length;t++)if(s[t]!==e)return!0}function qL(s,e,t,n){const i=s[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=s[s.length-1],l=ZS(i,e),c=ZS(a,e);return!l||!c?!1:GL(s)||(t==="spring"||jE(t))&&n}function Hg(s){s.duration=0,s.type="keyframes"}const XL=new Set(["opacity","clipPath","filter","transform"]),YL=Vy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function WL(s){const{motionValue:e,name:t,repeatDelay:n,repeatType:i,damping:a,type:l}=s;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=e.owner.getProps();return YL()&&t&&XL.has(t)&&(t!=="transform"||!h)&&!d&&!n&&i!=="mirror"&&a!==0&&l!=="inertia"}const KL=40;class QL extends Zy{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",keyframes:c,name:d,motionValue:h,element:f,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Sn.now();const y={autoplay:e,delay:t,type:n,repeat:i,repeatDelay:a,repeatType:l,name:d,motionValue:h,element:f,...m},x=f?.KeyframeResolver||ev;this.keyframeResolver=new x(c,(A,S,C)=>this.onKeyframesResolved(A,S,y,!C),d,h,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,i){this.keyframeResolver=void 0;const{name:a,type:l,velocity:c,delay:d,isHandoff:h,onUpdate:f}=n;this.resolvedAt=Sn.now(),qL(e,a,l,c)||((Ri.instantAnimations||!d)&&f?.(Qy(e,n,t)),e[0]=e[e.length-1],Hg(n),n.repeat=0);const y={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>KL?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},x=!h&&WL(y),A=y.motionValue?.owner?.current,S=x?new $L({...y,element:A}):new Jy(y);S.finished.then(()=>{this.notifyFinished()}).catch(ys),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),jL()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function PE(s,e,t,n=0,i=1){const a=Array.from(s).sort((h,f)=>h.sortNodePosition(f)).indexOf(e),l=s.size,c=(l-1)*n;return typeof t=="function"?t(a,l):i===1?a*n:c-a*n}const ZL=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function JL(s){const e=ZL.exec(s);if(!e)return[,];const[,t,n,i]=e;return[`--${t??n}`,i]}function LE(s,e,t=1){const[n,i]=JL(s);if(!n)return;const a=window.getComputedStyle(e).getPropertyValue(n);if(a){const l=a.trim();return nE(l)?parseFloat(l):l}return qy(i)?LE(i,e,t+1):i}const eI={type:"spring",stiffness:500,damping:25,restSpeed:10},tI=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),nI={type:"keyframes",duration:.8},sI={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},iI=(s,{keyframes:e})=>e.length>2?nI:Wo.has(s)?s.startsWith("scale")?tI(e[1]):eI:sI,rI=s=>s!==null;function aI(s,{repeat:e,repeatType:t="loop"},n){const i=s.filter(rI),a=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[a]}function tv(s,e){return s?.[e]??s?.default??s}function oI({when:s,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:i,repeat:a,repeatType:l,repeatDelay:c,from:d,elapsed:h,...f}){return!!Object.keys(f).length}const nv=(s,e,t,n={},i,a)=>l=>{const c=tv(n,s)||{},d=c.delay||n.delay||0;let{elapsed:h=0}=n;h=h-Ei(d);const f={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:y=>{e.set(y),c.onUpdate&&c.onUpdate(y)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:s,motionValue:e,element:a?void 0:i};oI(c)||Object.assign(f,iI(s,f)),f.duration&&(f.duration=Ei(f.duration)),f.repeatDelay&&(f.repeatDelay=Ei(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let m=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(Hg(f),f.delay===0&&(m=!0)),(Ri.instantAnimations||Ri.skipAnimations)&&(m=!0,Hg(f),f.delay=0),f.allowFlatten=!c.type&&!c.ease,m&&!a&&e.get()!==void 0){const y=aI(f.keyframes,c);if(y!==void 0){vt.update(()=>{f.onUpdate(y),f.onComplete()});return}}return c.isSync?new Jy(f):new QL(f)};function JS(s){const e=[{},{}];return s?.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function sv(s,e,t,n){if(typeof e=="function"){const[i,a]=JS(n);e=e(t!==void 0?t:s.custom,i,a)}if(typeof e=="string"&&(e=s.variants&&s.variants[e]),typeof e=="function"){const[i,a]=JS(n);e=e(t!==void 0?t:s.custom,i,a)}return e}function No(s,e,t){const n=s.getProps();return sv(n,e,t!==void 0?t:n.custom,s)}const IE=new Set(["width","height","top","left","right","bottom",...Yo]),eA=30,lI=s=>!isNaN(parseFloat(s));class cI{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const i=Sn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Sn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=lI(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Hy);const n=this.events[e].add(t);return e==="change"?()=>{n(),vt.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Sn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>eA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,eA);return rE(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Uo(s,e){return new cI(s,e)}const $g=s=>Array.isArray(s);function uI(s,e,t){s.hasValue(e)?s.getValue(e).set(t):s.addValue(e,Uo(t))}function dI(s){return $g(s)?s[s.length-1]||0:s}function hI(s,e){const t=No(s,e);let{transitionEnd:n={},transition:i={},...a}=t||{};a={...a,...n};for(const l in a){const c=dI(a[l]);uI(s,l,c)}}const fn=s=>!!(s&&s.getVelocity);function fI(s){return!!(fn(s)&&s.add)}function Gg(s,e){const t=s.getValue("willChange");if(fI(t))return t.add(e);if(!t&&Ri.WillChange){const n=new Ri.WillChange("auto");s.addValue("willChange",n),n.add(e)}}function iv(s){return s.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const pI="framerAppearId",FE="data-"+iv(pI);function BE(s){return s.props[FE]}function mI({protectedKeys:s,needsAnimating:e},t){const n=s.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function zE(s,e,{delay:t=0,transitionOverride:n,type:i}={}){let{transition:a=s.getDefaultTransition(),transitionEnd:l,...c}=e;n&&(a=n);const d=[],h=i&&s.animationState&&s.animationState.getState()[i];for(const f in c){const m=s.getValue(f,s.latestValues[f]??null),y=c[f];if(y===void 0||h&&mI(h,f))continue;const x={delay:t,...tv(a||{},f)},A=m.get();if(A!==void 0&&!m.isAnimating&&!Array.isArray(y)&&y===A&&!x.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const E=BE(s);if(E){const _=window.MotionHandoffAnimation(E,f,vt);_!==null&&(x.startTime=_,S=!0)}}Gg(s,f),m.start(nv(f,m,y,s.shouldReduceMotion&&IE.has(f)?{type:!1}:x,s,S));const C=m.animation;C&&d.push(C)}return l&&Promise.all(d).then(()=>{vt.update(()=>{l&&hI(s,l)})}),d}function qg(s,e,t={}){const n=No(s,e,t.type==="exit"?s.presenceContext?.custom:void 0);let{transition:i=s.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(i=t.transitionOverride);const a=n?()=>Promise.all(zE(s,n,t)):()=>Promise.resolve(),l=s.variantChildren&&s.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:m}=i;return gI(s,e,d,h,f,m,t)}:()=>Promise.resolve(),{when:c}=i;if(c){const[d,h]=c==="beforeChildren"?[a,l]:[l,a];return d().then(()=>h())}else return Promise.all([a(),l(t.delay)])}function gI(s,e,t=0,n=0,i=0,a=1,l){const c=[];for(const d of s.variantChildren)d.notify("AnimationStart",e),c.push(qg(d,e,{...l,delay:t+(typeof n=="function"?0:n)+PE(s.variantChildren,d,n,i,a)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(c)}function yI(s,e,t={}){s.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(a=>qg(s,a,t));n=Promise.all(i)}else if(typeof e=="string")n=qg(s,e,t);else{const i=typeof e=="function"?No(s,e,t.custom):e;n=Promise.all(zE(s,i,t))}return n.then(()=>{s.notify("AnimationComplete",e)})}const vI={test:s=>s==="auto",parse:s=>s},UE=s=>e=>e.test(s),VE=[Xo,Ce,Ws,cr,GP,$P,vI],tA=s=>VE.find(UE(s));function bI(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||iE(s):!0}const xI=new Set(["brightness","contrast","saturate","opacity"]);function wI(s){const[e,t]=s.slice(0,-1).split("(");if(e==="drop-shadow")return s;const[n]=t.match(Xy)||[];if(!n)return s;const i=t.replace(n,"");let a=xI.has(e)?1:0;return n!==t&&(a*=100),e+"("+a+i+")"}const SI=/\b([a-z-]*)\(.*?\)/gu,Xg={...wr,getAnimatableNone:s=>{const e=s.match(SI);return e?e.map(wI).join(" "):s}},nA={...Xo,transform:Math.round},AI={rotate:cr,rotateX:cr,rotateY:cr,rotateZ:cr,scale:Cd,scaleX:Cd,scaleY:Cd,scaleZ:Cd,skew:cr,skewX:cr,skewY:cr,distance:Ce,translateX:Ce,translateY:Ce,translateZ:Ce,x:Ce,y:Ce,z:Ce,perspective:Ce,transformPerspective:Ce,opacity:Ec,originX:VS,originY:VS,originZ:Ce},rv={borderWidth:Ce,borderTopWidth:Ce,borderRightWidth:Ce,borderBottomWidth:Ce,borderLeftWidth:Ce,borderRadius:Ce,borderTopLeftRadius:Ce,borderTopRightRadius:Ce,borderBottomRightRadius:Ce,borderBottomLeftRadius:Ce,width:Ce,maxWidth:Ce,height:Ce,maxHeight:Ce,top:Ce,right:Ce,bottom:Ce,left:Ce,inset:Ce,insetBlock:Ce,insetBlockStart:Ce,insetBlockEnd:Ce,insetInline:Ce,insetInlineStart:Ce,insetInlineEnd:Ce,padding:Ce,paddingTop:Ce,paddingRight:Ce,paddingBottom:Ce,paddingLeft:Ce,paddingBlock:Ce,paddingBlockStart:Ce,paddingBlockEnd:Ce,paddingInline:Ce,paddingInlineStart:Ce,paddingInlineEnd:Ce,margin:Ce,marginTop:Ce,marginRight:Ce,marginBottom:Ce,marginLeft:Ce,marginBlock:Ce,marginBlockStart:Ce,marginBlockEnd:Ce,marginInline:Ce,marginInlineStart:Ce,marginInlineEnd:Ce,fontSize:Ce,backgroundPositionX:Ce,backgroundPositionY:Ce,...AI,zIndex:nA,fillOpacity:Ec,strokeOpacity:Ec,numOctaves:nA},CI={...rv,color:zt,backgroundColor:zt,outlineColor:zt,fill:zt,stroke:zt,borderColor:zt,borderTopColor:zt,borderRightColor:zt,borderBottomColor:zt,borderLeftColor:zt,filter:Xg,WebkitFilter:Xg},HE=s=>CI[s];function $E(s,e){let t=HE(s);return t!==Xg&&(t=wr),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const EI=new Set(["auto","none","0"]);function _I(s,e,t){let n=0,i;for(;n<s.length&&!i;){const a=s[n];typeof a=="string"&&!EI.has(a)&&_c(a).values.length&&(i=s[n]),n++}if(i&&t)for(const a of e)s[a]=$E(t,i)}class TI extends ev{constructor(e,t,n,i,a){super(e,t,n,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let m=e[f];if(typeof m=="string"&&(m=m.trim(),qy(m))){const y=LE(m,t.current);y!==void 0&&(e[f]=y),f===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!IE.has(n)||e.length!==2)return;const[i,a]=e,l=tA(i),c=tA(a),d=US(i),h=US(a);if(d!==h&&gr[n]){this.needsMeasurement=!0;return}if(l!==c)if(KS(l)&&KS(c))for(let f=0;f<e.length;f++){const m=e[f];typeof m=="string"&&(e[f]=parseFloat(m))}else gr[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let i=0;i<e.length;i++)(e[i]===null||bI(e[i]))&&n.push(i);n.length&&_I(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=gr[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const a=n.length-1,l=n[a];n[a]=gr[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function RI(s,e,t){if(s==null)return[];if(s instanceof EventTarget)return[s];if(typeof s=="string"){let n=document;const i=t?.[s]??n.querySelectorAll(s);return i?Array.from(i):[]}return Array.from(s).filter(n=>n!=null)}const GE=(s,e)=>e&&typeof s=="number"?e.transform(s):s;function Yg(s){return sE(s)&&"offsetHeight"in s}const{schedule:av}=gE(queueMicrotask,!1),Es={x:!1,y:!1};function qE(){return Es.x||Es.y}function NI(s){return s==="x"||s==="y"?Es[s]?null:(Es[s]=!0,()=>{Es[s]=!1}):Es.x||Es.y?null:(Es.x=Es.y=!0,()=>{Es.x=Es.y=!1})}function XE(s,e){const t=RI(s),n=new AbortController,i={passive:!0,...e,signal:n.signal};return[t,i,()=>n.abort()]}function sA(s){return!(s.pointerType==="touch"||qE())}function MI(s,e,t={}){const[n,i,a]=XE(s,t),l=c=>{if(!sA(c))return;const{target:d}=c,h=e(d,c);if(typeof h!="function"||!d)return;const f=m=>{sA(m)&&(h(m),d.removeEventListener("pointerleave",f))};d.addEventListener("pointerleave",f,i)};return n.forEach(c=>{c.addEventListener("pointerenter",l,i)}),a}const YE=(s,e)=>e?s===e?!0:YE(s,e.parentElement):!1,ov=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,DI=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function WE(s){return DI.has(s.tagName)||s.isContentEditable===!0}const Yd=new WeakSet;function iA(s){return e=>{e.key==="Enter"&&s(e)}}function qm(s,e){s.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const kI=(s,e)=>{const t=s.currentTarget;if(!t)return;const n=iA(()=>{if(Yd.has(t))return;qm(t,"down");const i=iA(()=>{qm(t,"up")}),a=()=>qm(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function rA(s){return ov(s)&&!qE()}function jI(s,e,t={}){const[n,i,a]=XE(s,t),l=c=>{const d=c.currentTarget;if(!rA(c))return;Yd.add(d);const h=e(d,c),f=(x,A)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",y),Yd.has(d)&&Yd.delete(d),rA(x)&&typeof h=="function"&&h(x,{success:A})},m=x=>{f(x,d===window||d===document||t.useGlobalTarget||YE(d,x.target))},y=x=>{f(x,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",y,i)};return n.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",l,i),Yg(c)&&(c.addEventListener("focus",h=>kI(h,i)),!WE(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),a}function KE(s){return sE(s)&&"ownerSVGElement"in s}function OI(s){return KE(s)&&s.tagName==="svg"}const PI=[...VE,zt,wr],LI=s=>PI.find(UE(s)),aA=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ao=()=>({x:aA(),y:aA()}),oA=()=>({min:0,max:0}),$t=()=>({x:oA(),y:oA()}),Wg={current:null},QE={current:!1},II=typeof window<"u";function FI(){if(QE.current=!0,!!II)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),e=()=>Wg.current=s.matches;s.addEventListener("change",e),e()}else Wg.current=!1}const BI=new WeakMap;function jh(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function Tc(s){return typeof s=="string"||Array.isArray(s)}const lv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cv=["initial",...lv];function Oh(s){return jh(s.animate)||cv.some(e=>Tc(s[e]))}function ZE(s){return!!(Oh(s)||s.variants)}function zI(s,e,t){for(const n in e){const i=e[n],a=t[n];if(fn(i))s.addValue(n,i);else if(fn(a))s.addValue(n,Uo(i,{owner:s}));else if(a!==i)if(s.hasValue(n)){const l=s.getValue(n);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=s.getStaticValue(n);s.addValue(n,Uo(l!==void 0?l:i,{owner:s}))}}for(const n in t)e[n]===void 0&&s.removeValue(n);return e}const lA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let ch={};function JE(s){ch=s}function UI(){return ch}class VI{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:a,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ev,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Sn.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,vt.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=t.initial?{...d}:{},this.renderState=h,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=Oh(t),this.isVariantNode=ZE(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in m){const x=m[y];d[y]!==void 0&&fn(x)&&x.set(d[y])}}mount(e){this.current=e,BI.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(QE.current||FI(),this.shouldReduceMotion=Wg.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),xr(this.notifyUpdate),xr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Wo.has(e);n&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&vt.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ch){const t=ch[e];if(!t)continue;const{isEnabled:n,Feature:i}=t;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$t()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<lA.length;n++){const i=lA[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,l=e[a];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=zI(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=Uo(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(nE(n)||iE(n))?n=parseFloat(n):!LI(n)&&wr.test(t)&&(n=$E(e,t)),this.setBaseTarget(e,fn(n)?n.get():n)),fn(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if(typeof t=="string"||typeof t=="object"){const a=sv(this.props,t,this.presenceContext?.custom);a&&(n=a[e])}if(t&&n!==void 0)return n;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!fn(i)?i:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Hy),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){av.render(this.render)}}class e_ extends VI{constructor(){super(...arguments),this.KeyframeResolver=TI}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const n=e.style;return n?n[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class _r{constructor(e){this.isMounted=!1,this.node=e}update(){}}function t_({top:s,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:s,max:n}}}function HI({x:s,y:e}){return{top:e.min,right:s.max,bottom:e.max,left:s.min}}function $I(s,e){if(!e)return s;const t=e({x:s.left,y:s.top}),n=e({x:s.right,y:s.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}function Xm(s){return s===void 0||s===1}function Kg({scale:s,scaleX:e,scaleY:t}){return!Xm(s)||!Xm(e)||!Xm(t)}function Jr(s){return Kg(s)||n_(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function n_(s){return cA(s.x)||cA(s.y)}function cA(s){return s&&s!=="0%"}function uh(s,e,t){const n=s-t,i=e*n;return t+i}function uA(s,e,t,n,i){return i!==void 0&&(s=uh(s,i,n)),uh(s,t,n)+e}function Qg(s,e=0,t=1,n,i){s.min=uA(s.min,e,t,n,i),s.max=uA(s.max,e,t,n,i)}function s_(s,{x:e,y:t}){Qg(s.x,e.translate,e.scale,e.originPoint),Qg(s.y,t.translate,t.scale,t.originPoint)}const dA=.999999999999,hA=1.0000000000001;function GI(s,e,t,n=!1){const i=t.length;if(!i)return;e.x=e.y=1;let a,l;for(let c=0;c<i;c++){a=t[c],l=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Eo(s,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,s_(s,l)),n&&Jr(a.latestValues)&&Eo(s,a.latestValues))}e.x<hA&&e.x>dA&&(e.x=1),e.y<hA&&e.y>dA&&(e.y=1)}function Co(s,e){s.min=s.min+e,s.max=s.max+e}function fA(s,e,t,n,i=.5){const a=Et(s.min,s.max,i);Qg(s,e,t,a,n)}function Eo(s,e){fA(s.x,e.x,e.scaleX,e.scale,e.originX),fA(s.y,e.y,e.scaleY,e.scale,e.originY)}function i_(s,e){return t_($I(s.getBoundingClientRect(),e))}function qI(s,e,t){const n=i_(s,t),{scroll:i}=e;return i&&(Co(n.x,i.offset.x),Co(n.y,i.offset.y)),n}const XI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},YI=Yo.length;function WI(s,e,t){let n="",i=!0;for(let a=0;a<YI;a++){const l=Yo[a],c=s[l];if(c===void 0)continue;let d=!0;if(typeof c=="number")d=c===(l.startsWith("scale")?1:0);else{const h=parseFloat(c);d=l.startsWith("scale")?h===1:h===0}if(!d||t){const h=GE(c,rv[l]);if(!d){i=!1;const f=XI[l]||l;n+=`${f}(${h}) `}t&&(e[l]=h)}}return n=n.trim(),t?n=t(e,i?"":n):i&&(n="none"),n}function uv(s,e,t){const{style:n,vars:i,transformOrigin:a}=s;let l=!1,c=!1;for(const d in e){const h=e[d];if(Wo.has(d)){l=!0;continue}else if(vE(d)){i[d]=h;continue}else{const f=GE(h,rv[d]);d.startsWith("origin")?(c=!0,a[d]=f):n[d]=f}}if(e.transform||(l||t?n.transform=WI(e,s.transform,t):n.transform&&(n.transform="none")),c){const{originX:d="50%",originY:h="50%",originZ:f=0}=a;n.transformOrigin=`${d} ${h} ${f}`}}function r_(s,{style:e,vars:t},n,i){const a=s.style;let l;for(l in e)a[l]=e[l];i?.applyProjectionStyles(a,n);for(l in t)a.setProperty(l,t[l])}function pA(s,e){return e.max===e.min?0:s/(e.max-e.min)*100}const Jl={correct:(s,e)=>{if(!e.target)return s;if(typeof s=="string")if(Ce.test(s))s=parseFloat(s);else return s;const t=pA(s,e.target.x),n=pA(s,e.target.y);return`${t}% ${n}%`}},KI={correct:(s,{treeScale:e,projectionDelta:t})=>{const n=s,i=wr.parse(s);if(i.length>5)return n;const a=wr.createTransformer(s),l=typeof i[0]!="number"?1:0,c=t.x.scale*e.x,d=t.y.scale*e.y;i[0+l]/=c,i[1+l]/=d;const h=Et(c,d,.5);return typeof i[2+l]=="number"&&(i[2+l]/=h),typeof i[3+l]=="number"&&(i[3+l]/=h),a(i)}},Zg={borderRadius:{...Jl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Jl,borderTopRightRadius:Jl,borderBottomLeftRadius:Jl,borderBottomRightRadius:Jl,boxShadow:KI};function a_(s,{layout:e,layoutId:t}){return Wo.has(s)||s.startsWith("origin")||(e||t!==void 0)&&(!!Zg[s]||s==="opacity")}function dv(s,e,t){const n=s.style,i=e?.style,a={};if(!n)return a;for(const l in n)(fn(n[l])||i&&fn(i[l])||a_(l,s)||t?.getValue(l)?.liveStyle!==void 0)&&(a[l]=n[l]);return a}function QI(s){return window.getComputedStyle(s)}class ZI extends e_{constructor(){super(...arguments),this.type="html",this.renderInstance=r_}readValueFromInstance(e,t){if(Wo.has(t))return this.projection?.isProjecting?Fg(t):RL(e,t);{const n=QI(e),i=(vE(t)?n.getPropertyValue(t):n[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return i_(e,t)}build(e,t,n){uv(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return dv(e,t,n)}}const JI={offset:"stroke-dashoffset",array:"stroke-dasharray"},eF={offset:"strokeDashoffset",array:"strokeDasharray"};function tF(s,e,t=1,n=0,i=!0){s.pathLength=1;const a=i?JI:eF;s[a.offset]=`${-n}`,s[a.array]=`${e} ${t}`}const nF=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function o_(s,{attrX:e,attrY:t,attrScale:n,pathLength:i,pathSpacing:a=1,pathOffset:l=0,...c},d,h,f){if(uv(s,c,h),d){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:m,style:y}=s;m.transform&&(y.transform=m.transform,delete m.transform),(y.transform||m.transformOrigin)&&(y.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),y.transform&&(y.transformBox=f?.transformBox??"fill-box",delete m.transformBox);for(const x of nF)m[x]!==void 0&&(y[x]=m[x],delete m[x]);e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),n!==void 0&&(m.scale=n),i!==void 0&&tF(m,i,a,l,!1)}const l_=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),c_=s=>typeof s=="string"&&s.toLowerCase()==="svg";function sF(s,e,t,n){r_(s,e,void 0,n);for(const i in e.attrs)s.setAttribute(l_.has(i)?i:iv(i),e.attrs[i])}function u_(s,e,t){const n=dv(s,e,t);for(const i in s)if(fn(s[i])||fn(e[i])){const a=Yo.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[a]=s[i]}return n}class iF extends e_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=$t}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Wo.has(t)){const n=HE(t);return n&&n.default||0}return t=l_.has(t)?t:iv(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return u_(e,t,n)}build(e,t,n){o_(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,i){sF(e,t,n,i)}mount(e){this.isSVGTag=c_(e.tagName),super.mount(e)}}const rF=cv.length;function d_(s){if(!s)return;if(!s.isControllingVariants){const t=s.parent?d_(s.parent)||{}:{};return s.props.initial!==void 0&&(t.initial=s.props.initial),t}const e={};for(let t=0;t<rF;t++){const n=cv[t],i=s.props[n];(Tc(i)||i===!1)&&(e[n]=i)}return e}function h_(s,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==s.length)return!1;for(let n=0;n<t;n++)if(e[n]!==s[n])return!1;return!0}const aF=[...lv].reverse(),oF=lv.length;function lF(s){return e=>Promise.all(e.map(({animation:t,options:n})=>yI(s,t,n)))}function cF(s){let e=lF(s),t=mA(),n=!0;const i=d=>(h,f)=>{const m=No(s,f,d==="exit"?s.presenceContext?.custom:void 0);if(m){const{transition:y,transitionEnd:x,...A}=m;h={...h,...A,...x}}return h};function a(d){e=d(s)}function l(d){const{props:h}=s,f=d_(s.parent)||{},m=[],y=new Set;let x={},A=1/0;for(let C=0;C<oF;C++){const E=aF[C],_=t[E],R=h[E]!==void 0?h[E]:f[E],N=Tc(R),M=E===d?_.isActive:null;M===!1&&(A=C);let j=R===f[E]&&R!==h[E]&&N;if(j&&n&&s.manuallyAnimateOnMount&&(j=!1),_.protectedKeys={...x},!_.isActive&&M===null||!R&&!_.prevProp||jh(R)||typeof R=="boolean")continue;const D=uF(_.prevProp,R);let O=D||E===d&&_.isActive&&!j&&N||C>A&&N,I=!1;const U=Array.isArray(R)?R:[R];let $=U.reduce(i(E),{});M===!1&&($={});const{prevResolvedValues:J={}}=_,ie={...J,...$},X=F=>{O=!0,y.has(F)&&(I=!0,y.delete(F)),_.needsAnimating[F]=!0;const B=s.getValue(F);B&&(B.liveStyle=!1)};for(const F in ie){const B=$[F],V=J[F];if(x.hasOwnProperty(F))continue;let de=!1;$g(B)&&$g(V)?de=!h_(B,V):de=B!==V,de?B!=null?X(F):y.add(F):B!==void 0&&y.has(F)?X(F):_.protectedKeys[F]=!0}_.prevProp=R,_.prevResolvedValues=$,_.isActive&&(x={...x,...$}),n&&s.blockInitialAnimation&&(O=!1);const ae=j&&D;O&&(!ae||I)&&m.push(...U.map(F=>{const B={type:E};if(typeof F=="string"&&n&&!ae&&s.manuallyAnimateOnMount&&s.parent){const{parent:V}=s,de=No(V,F);if(V.enteringChildren&&de){const{delayChildren:L}=de.transition||{};B.delay=PE(V.enteringChildren,s,L)}}return{animation:F,options:B}}))}if(y.size){const C={};if(typeof h.initial!="boolean"){const E=No(s,Array.isArray(h.initial)?h.initial[0]:h.initial);E&&E.transition&&(C.transition=E.transition)}y.forEach(E=>{const _=s.getBaseTarget(E),R=s.getValue(E);R&&(R.liveStyle=!0),C[E]=_??null}),m.push({animation:C})}let S=!!m.length;return n&&(h.initial===!1||h.initial===h.animate)&&!s.manuallyAnimateOnMount&&(S=!1),n=!1,S?e(m):Promise.resolve()}function c(d,h){if(t[d].isActive===h)return Promise.resolve();s.variantChildren?.forEach(m=>m.animationState?.setActive(d,h)),t[d].isActive=h;const f=l(d);for(const m in t)t[m].protectedKeys={};return f}return{animateChanges:l,setActive:c,setAnimateFunction:a,getState:()=>t,reset:()=>{t=mA()}}}function uF(s,e){return typeof e=="string"?e!==s:Array.isArray(e)?!h_(e,s):!1}function Kr(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function mA(){return{animate:Kr(!0),whileInView:Kr(),whileHover:Kr(),whileTap:Kr(),whileDrag:Kr(),whileFocus:Kr(),exit:Kr()}}function gA(s,e){s.min=e.min,s.max=e.max}function Cs(s,e){gA(s.x,e.x),gA(s.y,e.y)}function yA(s,e){s.translate=e.translate,s.scale=e.scale,s.originPoint=e.originPoint,s.origin=e.origin}const f_=1e-4,dF=1-f_,hF=1+f_,p_=.01,fF=0-p_,pF=0+p_;function An(s){return s.max-s.min}function mF(s,e,t){return Math.abs(s-e)<=t}function vA(s,e,t,n=.5){s.origin=n,s.originPoint=Et(e.min,e.max,s.origin),s.scale=An(t)/An(e),s.translate=Et(t.min,t.max,s.origin)-s.originPoint,(s.scale>=dF&&s.scale<=hF||isNaN(s.scale))&&(s.scale=1),(s.translate>=fF&&s.translate<=pF||isNaN(s.translate))&&(s.translate=0)}function vc(s,e,t,n){vA(s.x,e.x,t.x,n?n.originX:void 0),vA(s.y,e.y,t.y,n?n.originY:void 0)}function bA(s,e,t){s.min=t.min+e.min,s.max=s.min+An(e)}function gF(s,e,t){bA(s.x,e.x,t.x),bA(s.y,e.y,t.y)}function xA(s,e,t){s.min=e.min-t.min,s.max=s.min+An(e)}function dh(s,e,t){xA(s.x,e.x,t.x),xA(s.y,e.y,t.y)}function wA(s,e,t,n,i){return s-=e,s=uh(s,1/t,n),i!==void 0&&(s=uh(s,1/i,n)),s}function yF(s,e=0,t=1,n=.5,i,a=s,l=s){if(Ws.test(e)&&(e=parseFloat(e),e=Et(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=Et(a.min,a.max,n);s===a&&(c-=e),s.min=wA(s.min,e,t,c,i),s.max=wA(s.max,e,t,c,i)}function SA(s,e,[t,n,i],a,l){yF(s,e[t],e[n],e[i],e.scale,a,l)}const vF=["x","scaleX","originX"],bF=["y","scaleY","originY"];function AA(s,e,t,n){SA(s.x,e,vF,t?t.x:void 0,n?n.x:void 0),SA(s.y,e,bF,t?t.y:void 0,n?n.y:void 0)}function CA(s){return s.translate===0&&s.scale===1}function m_(s){return CA(s.x)&&CA(s.y)}function EA(s,e){return s.min===e.min&&s.max===e.max}function xF(s,e){return EA(s.x,e.x)&&EA(s.y,e.y)}function _A(s,e){return Math.round(s.min)===Math.round(e.min)&&Math.round(s.max)===Math.round(e.max)}function g_(s,e){return _A(s.x,e.x)&&_A(s.y,e.y)}function TA(s){return An(s.x)/An(s.y)}function RA(s,e){return s.translate===e.translate&&s.scale===e.scale&&s.originPoint===e.originPoint}function ps(s){return[s("x"),s("y")]}function wF(s,e,t){let n="";const i=s.x.translate/e.x,a=s.y.translate/e.y,l=t?.z||0;if((i||a||l)&&(n=`translate3d(${i}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:f,rotateX:m,rotateY:y,skewX:x,skewY:A}=t;h&&(n=`perspective(${h}px) ${n}`),f&&(n+=`rotate(${f}deg) `),m&&(n+=`rotateX(${m}deg) `),y&&(n+=`rotateY(${y}deg) `),x&&(n+=`skewX(${x}deg) `),A&&(n+=`skewY(${A}deg) `)}const c=s.x.scale*e.x,d=s.y.scale*e.y;return(c!==1||d!==1)&&(n+=`scale(${c}, ${d})`),n||"none"}const y_=["TopLeft","TopRight","BottomLeft","BottomRight"],SF=y_.length,NA=s=>typeof s=="string"?parseFloat(s):s,MA=s=>typeof s=="number"||Ce.test(s);function AF(s,e,t,n,i,a){i?(s.opacity=Et(0,t.opacity??1,CF(n)),s.opacityExit=Et(e.opacity??1,0,EF(n))):a&&(s.opacity=Et(e.opacity??1,t.opacity??1,n));for(let l=0;l<SF;l++){const c=`border${y_[l]}Radius`;let d=DA(e,c),h=DA(t,c);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||MA(d)===MA(h)?(s[c]=Math.max(Et(NA(d),NA(h),n),0),(Ws.test(h)||Ws.test(d))&&(s[c]+="%")):s[c]=h}(e.rotate||t.rotate)&&(s.rotate=Et(e.rotate||0,t.rotate||0,n))}function DA(s,e){return s[e]!==void 0?s[e]:s.borderRadius}const CF=v_(0,.5,hE),EF=v_(.5,.95,ys);function v_(s,e,t){return n=>n<s?0:n>e?1:t(Cc(s,e,n))}function _F(s,e,t){const n=fn(s)?s:Uo(s);return n.start(nv("",n,e,t)),n.animation}function Rc(s,e,t,n={passive:!0}){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t)}const TF=(s,e)=>s.depth-e.depth;class RF{constructor(){this.children=[],this.isDirty=!1}add(e){By(this.children,e),this.isDirty=!0}remove(e){zy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(TF),this.isDirty=!1,this.children.forEach(e)}}function NF(s,e){const t=Sn.now(),n=({timestamp:i})=>{const a=i-t;a>=e&&(xr(n),s(a-e))};return vt.setup(n,!0),()=>xr(n)}function Wd(s){return fn(s)?s.get():s}class MF{constructor(){this.members=[]}add(e){By(this.members,e),e.scheduleRender()}remove(e){if(zy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let n;for(let i=t;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender();const i=n.options.layoutDependency,a=e.options.layoutDependency;i!==void 0&&a!==void 0&&i===a||(e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:c}=e.options;c===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Kd={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Ym=["","X","Y","Z"],DF=1e3;let kF=0;function Wm(s,e,t,n){const{latestValues:i}=e;i[s]&&(t[s]=i[s],e.setStaticValue(s,0),n&&(n[s]=0))}function b_(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:e}=s.options;if(!e)return;const t=BE(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:a}=s.options;window.MotionCancelOptimisedAnimation(t,"transform",vt,!(i||a))}const{parent:n}=s;n&&!n.hasCheckedOptimisedAppear&&b_(n)}function x_({attachResizeListener:s,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(l={},c=e?.()){this.id=kF++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(PF),this.nodes.forEach(BF),this.nodes.forEach(zF),this.nodes.forEach(LF)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new RF)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new Hy),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=KE(l)&&!OI(l),this.instance=l;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),s){let f,m=0;const y=()=>this.root.updateBlockedByResize=!1;vt.read(()=>{m=window.innerWidth}),s(l,()=>{const x=window.innerWidth;x!==m&&(m=x,this.root.updateBlockedByResize=!0,f&&f(),f=NF(y,250),Kd.hasAnimatedSinceResize&&(Kd.hasAnimatedSinceResize=!1,this.nodes.forEach(OA)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:y,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||h.getDefaultTransition()||GF,{onLayoutAnimationStart:S,onLayoutAnimationComplete:C}=h.getProps(),E=!this.targetLayout||!g_(this.targetLayout,x),_=!m&&y;if(this.options.layoutRoot||this.resumeFrom||_||m&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...tv(A,"layout"),onPlay:S,onComplete:C};(h.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(f,_)}else m||OA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),xr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(UF),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&b_(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const m=this.path[f];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(jA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(FF),this.nodes.forEach(jF),this.nodes.forEach(OF)):this.nodes.forEach(jA),this.clearAllSnapshots();const c=Sn.now();rn.delta=Qs(0,1e3/60,c-rn.timestamp),rn.timestamp=c,rn.isProcessing=!0,zm.update.process(rn),zm.preRender.process(rn),zm.render.process(rn),rn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,av.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(IF),this.sharedNodes.forEach(VF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,vt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){vt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!An(this.snapshot.measuredBox.x)&&!An(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=$t(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const d=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!m_(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;l&&this.instance&&(c||Jr(this.latestValues)||f)&&(i(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),qF(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return $t();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(XF))){const{scroll:h}=this.root;h&&(Co(c.x,h.offset.x),Co(c.y,h.offset.y))}return c}removeElementScroll(l){const c=$t();if(Cs(c,l),this.scroll?.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:f,options:m}=h;h!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&Cs(c,l),Co(c.x,f.offset.x),Co(c.y,f.offset.y))}return c}applyTransform(l,c=!1){const d=$t();Cs(d,l);for(let h=0;h<this.path.length;h++){const f=this.path[h];!c&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Eo(d,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Jr(f.latestValues)&&Eo(d,f.latestValues)}return Jr(this.latestValues)&&Eo(d,this.latestValues),d}removeTransform(l){const c=$t();Cs(c,l);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!Jr(h.latestValues))continue;Kg(h.latestValues)&&h.updateSnapshot();const f=$t(),m=h.measurePageBox();Cs(f,m),AA(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return Jr(this.latestValues)&&AA(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==rn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!this.layout||!(f||m))return;this.resolvedRelativeTargetAt=rn.timestamp;const y=this.getClosestProjectingParent();y&&this.linkedParentVersion!==y.layoutVersion&&!y.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(y&&y.layout?this.createRelativeTarget(y,this.layout.layoutBox,y.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=$t(),this.targetWithTransforms=$t()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),gF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Cs(this.target,this.layout.layoutBox),s_(this.target,this.targetDelta)):Cs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?this.createRelativeTarget(y,this.target,y.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Kg(this.parent.latestValues)||n_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,c,d){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$t(),this.relativeTargetOrigin=$t(),dh(this.relativeTargetOrigin,c,d),Cs(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===rn.timestamp&&(d=!1),d)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;Cs(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;GI(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=$t());const{target:x}=l;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(yA(this.prevProjectionDelta.x,this.projectionDelta.x),yA(this.prevProjectionDelta.y,this.projectionDelta.y)),vc(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==y||!RA(this.projectionDelta.x,this.prevProjectionDelta.x)||!RA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ao(),this.projectionDelta=Ao(),this.projectionDeltaWithTransform=Ao()}setAnimationOrigin(l,c=!1){const d=this.snapshot,h=d?d.latestValues:{},f={...this.latestValues},m=Ao();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const y=$t(),x=d?d.source:void 0,A=this.layout?this.layout.source:void 0,S=x!==A,C=this.getStack(),E=!C||C.members.length<=1,_=!!(S&&!E&&this.options.crossfade===!0&&!this.path.some($F));this.animationProgress=0;let R;this.mixTargetDelta=N=>{const M=N/1e3;PA(m.x,l.x,M),PA(m.y,l.y,M),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(dh(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),HF(this.relativeTarget,this.relativeTargetOrigin,y,M),R&&xF(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=$t()),Cs(R,this.relativeTarget)),S&&(this.animationValues=f,AF(f,h,this.latestValues,M,_,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(xr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=vt.update(()=>{Kd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Uo(0)),this.currentAnimation=_F(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(DF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:h,latestValues:f}=l;if(!(!c||!d||!h)){if(this!==l&&this.layout&&h&&w_(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||$t();const m=An(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+m;const y=An(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+y}Cs(c,d),Eo(c,f),vc(this.projectionDeltaWithTransform,this.layoutCorrected,c,f)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new MF),this.sharedNodes.get(l).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const h={};d.z&&Wm("z",l,h,this.animationValues);for(let f=0;f<Ym.length;f++)Wm(`rotate${Ym[f]}`,l,h,this.animationValues),Wm(`skew${Ym[f]}`,l,h,this.animationValues);l.render();for(const f in h)l.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Wd(c?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Wd(c?.pointerEvents)||""),this.hasProjected&&!Jr(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const f=h.animationValues||h.latestValues;this.applyTransformsToTarget();let m=wF(this.projectionDeltaWithTransform,this.treeScale,f);d&&(m=d(f,m)),l.transform=m;const{x:y,y:x}=this.projectionDelta;l.transformOrigin=`${y.origin*100}% ${x.origin*100}% 0`,h.animationValues?l.opacity=h===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:l.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const A in Zg){if(f[A]===void 0)continue;const{correct:S,applyTo:C,isCSSVariable:E}=Zg[A],_=m==="none"?f[A]:S(f[A],h);if(C){const R=C.length;for(let N=0;N<R;N++)l[C[N]]=_}else E?this.options.visualElement.renderState.vars[A]=_:l[A]=_}this.options.layoutId&&(l.pointerEvents=h===this?Wd(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(kA),this.root.sharedNodes.clear()}}}function jF(s){s.updateLayout()}function OF(s){const e=s.resumeFrom?.snapshot||s.snapshot;if(s.isLead()&&s.layout&&e&&s.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:n}=s.layout,{animationType:i}=s.options,a=e.source!==s.layout.source;i==="size"?ps(f=>{const m=a?e.measuredBox[f]:e.layoutBox[f],y=An(m);m.min=t[f].min,m.max=m.min+y}):w_(i,e.layoutBox,t)&&ps(f=>{const m=a?e.measuredBox[f]:e.layoutBox[f],y=An(t[f]);m.max=m.min+y,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[f].max=s.relativeTarget[f].min+y)});const l=Ao();vc(l,t,e.layoutBox);const c=Ao();a?vc(c,s.applyTransform(n,!0),e.measuredBox):vc(c,t,e.layoutBox);const d=!m_(l);let h=!1;if(!s.resumeFrom){const f=s.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:y}=f;if(m&&y){const x=$t();dh(x,e.layoutBox,m.layoutBox);const A=$t();dh(A,t,y.layoutBox),g_(x,A)||(h=!0),f.options.layoutRoot&&(s.relativeTarget=A,s.relativeTargetOrigin=x,s.relativeParent=f)}}}s.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(s.isLead()){const{onExitComplete:t}=s.options;t&&t()}s.options.transition=void 0}function PF(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function LF(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function IF(s){s.clearSnapshot()}function kA(s){s.clearMeasurements()}function jA(s){s.isLayoutDirty=!1}function FF(s){const{visualElement:e}=s.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),s.resetTransform()}function OA(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function BF(s){s.resolveTargetDelta()}function zF(s){s.calcProjection()}function UF(s){s.resetSkewAndRotation()}function VF(s){s.removeLeadSnapshot()}function PA(s,e,t){s.translate=Et(e.translate,0,t),s.scale=Et(e.scale,1,t),s.origin=e.origin,s.originPoint=e.originPoint}function LA(s,e,t,n){s.min=Et(e.min,t.min,n),s.max=Et(e.max,t.max,n)}function HF(s,e,t,n){LA(s.x,e.x,t.x,n),LA(s.y,e.y,t.y,n)}function $F(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const GF={duration:.45,ease:[.4,0,.1,1]},IA=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),FA=IA("applewebkit/")&&!IA("chrome/")?Math.round:ys;function BA(s){s.min=FA(s.min),s.max=FA(s.max)}function qF(s){BA(s.x),BA(s.y)}function w_(s,e,t){return s==="position"||s==="preserve-aspect"&&!mF(TA(e),TA(t),.2)}function XF(s){return s!==s.root&&s.scroll?.wasRoot}const YF=x_({attachResizeListener:(s,e)=>Rc(s,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),Km={current:void 0},S_=x_({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!Km.current){const s=new YF({});s.mount(window),s.setOptions({layoutScroll:!0}),Km.current=s}return Km.current},resetTransform:(s,e)=>{s.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),hv=w.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function zA(s,e){if(typeof s=="function")return s(e);s!=null&&(s.current=e)}function WF(...s){return e=>{let t=!1;const n=s.map(i=>{const a=zA(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():zA(s[i],null)}}}}function KF(...s){return w.useCallback(WF(...s),s)}class QF extends w.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const n=t.offsetParent,i=Yg(n)&&n.offsetWidth||0,a=Yg(n)&&n.offsetHeight||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=i-l.width-l.left,l.bottom=a-l.height-l.top}return null}componentDidUpdate(){}render(){return this.props.children}}function ZF({children:s,isPresent:e,anchorX:t,anchorY:n,root:i}){const a=w.useId(),l=w.useRef(null),c=w.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:d}=w.useContext(hv),h=s.props?.ref??s?.ref,f=KF(l,h);return w.useInsertionEffect(()=>{const{width:m,height:y,top:x,left:A,right:S,bottom:C}=c.current;if(e||!l.current||!m||!y)return;const E=t==="left"?`left: ${A}`:`right: ${S}`,_=n==="bottom"?`bottom: ${C}`:`top: ${x}`;l.current.dataset.motionPopId=a;const R=document.createElement("style");d&&(R.nonce=d);const N=i??document.head;return N.appendChild(R),R.sheet&&R.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${y}px !important;
            ${E}px !important;
            ${_}px !important;
          }
        `),()=>{N.contains(R)&&N.removeChild(R)}},[e]),g.jsx(QF,{isPresent:e,childRef:l,sizeRef:c,children:w.cloneElement(s,{ref:f})})}const JF=({children:s,initial:e,isPresent:t,onExitComplete:n,custom:i,presenceAffectsLayout:a,mode:l,anchorX:c,anchorY:d,root:h})=>{const f=Fy(eB),m=w.useId();let y=!0,x=w.useMemo(()=>(y=!1,{id:m,initial:e,isPresent:t,custom:i,onExitComplete:A=>{f.set(A,!0);for(const S of f.values())if(!S)return;n&&n()},register:A=>(f.set(A,!1),()=>f.delete(A))}),[t,f,n]);return a&&y&&(x={...x}),w.useMemo(()=>{f.forEach((A,S)=>f.set(S,!1))},[t]),w.useEffect(()=>{!t&&!f.size&&n&&n()},[t]),l==="popLayout"&&(s=g.jsx(ZF,{isPresent:t,anchorX:c,anchorY:d,root:h,children:s})),g.jsx(kh.Provider,{value:x,children:s})};function eB(){return new Map}function A_(s=!0){const e=w.useContext(kh);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,a=w.useId();w.useEffect(()=>{if(s)return i(a)},[s]);const l=w.useCallback(()=>s&&n&&n(a),[a,n,s]);return!t&&n?[!1,l]:[!0]}const Ed=s=>s.key||"";function UA(s){const e=[];return w.Children.forEach(s,t=>{w.isValidElement(t)&&e.push(t)}),e}const Nc=({children:s,custom:e,initial:t=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:a="sync",propagate:l=!1,anchorX:c="left",anchorY:d="top",root:h})=>{const[f,m]=A_(l),y=w.useMemo(()=>UA(s),[s]),x=l&&!f?[]:y.map(Ed),A=w.useRef(!0),S=w.useRef(y),C=Fy(()=>new Map),E=w.useRef(new Set),[_,R]=w.useState(y),[N,M]=w.useState(y);tE(()=>{A.current=!1,S.current=y;for(let O=0;O<N.length;O++){const I=Ed(N[O]);x.includes(I)?(C.delete(I),E.current.delete(I)):C.get(I)!==!0&&C.set(I,!1)}},[N,x.length,x.join("-")]);const j=[];if(y!==_){let O=[...y];for(let I=0;I<N.length;I++){const U=N[I],$=Ed(U);x.includes($)||(O.splice(I,0,U),j.push(U))}return a==="wait"&&j.length&&(O=j),M(UA(O)),R(y),null}const{forceRender:D}=w.useContext(Iy);return g.jsx(g.Fragment,{children:N.map(O=>{const I=Ed(O),U=l&&!f?!1:y===N||x.includes(I),$=()=>{if(E.current.has(I))return;if(E.current.add(I),C.has(I))C.set(I,!0);else return;let J=!0;C.forEach(ie=>{ie||(J=!1)}),J&&(D?.(),M(S.current),l&&m?.(),n&&n())};return g.jsx(JF,{isPresent:U,initial:!A.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:h,onExitComplete:U?void 0:$,anchorX:c,anchorY:d,children:O},I)})})},C_=w.createContext({strict:!1}),VA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let HA=!1;function tB(){if(HA)return;const s={};for(const e in VA)s[e]={isEnabled:t=>VA[e].some(n=>!!t[n])};JE(s),HA=!0}function E_(){return tB(),UI()}function nB(s){const e=E_();for(const t in s)e[t]={...e[t],...s[t]};JE(e)}const sB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function hh(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||sB.has(s)}let __=s=>!hh(s);function iB(s){typeof s=="function"&&(__=e=>e.startsWith("on")?!hh(e):s(e))}try{iB(require("@emotion/is-prop-valid").default)}catch{}function rB(s,e,t){const n={};for(const i in s)i==="values"&&typeof s.values=="object"||(__(i)||t===!0&&hh(i)||!e&&!hh(i)||s.draggable&&i.startsWith("onDrag"))&&(n[i]=s[i]);return n}const Ph=w.createContext({});function aB(s,e){if(Oh(s)){const{initial:t,animate:n}=s;return{initial:t===!1||Tc(t)?t:void 0,animate:Tc(n)?n:void 0}}return s.inherit!==!1?e:{}}function oB(s){const{initial:e,animate:t}=aB(s,w.useContext(Ph));return w.useMemo(()=>({initial:e,animate:t}),[$A(e),$A(t)])}function $A(s){return Array.isArray(s)?s.join(" "):s}const fv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function T_(s,e,t){for(const n in e)!fn(e[n])&&!a_(n,t)&&(s[n]=e[n])}function lB({transformTemplate:s},e){return w.useMemo(()=>{const t=fv();return uv(t,e,s),Object.assign({},t.vars,t.style)},[e])}function cB(s,e){const t=s.style||{},n={};return T_(n,t,s),Object.assign(n,lB(s,e)),n}function uB(s,e){const t={},n=cB(s,e);return s.drag&&s.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(t.tabIndex=0),t.style=n,t}const R_=()=>({...fv(),attrs:{}});function dB(s,e,t,n){const i=w.useMemo(()=>{const a=R_();return o_(a,e,c_(n),s.transformTemplate,s.style),{...a.attrs,style:{...a.style}}},[e]);if(s.style){const a={};T_(a,s.style,s),i.style={...a,...i.style}}return i}const hB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pv(s){return typeof s!="string"||s.includes("-")?!1:!!(hB.indexOf(s)>-1||/[A-Z]/u.test(s))}function fB(s,e,t,{latestValues:n},i,a=!1,l){const d=(l??pv(s)?dB:uB)(e,n,i,s),h=rB(e,typeof s=="string",a),f=s!==w.Fragment?{...h,...d,ref:t}:{},{children:m}=e,y=w.useMemo(()=>fn(m)?m.get():m,[m]);return w.createElement(s,{...f,children:y})}function pB({scrapeMotionValuesFromProps:s,createRenderState:e},t,n,i){return{latestValues:mB(t,n,i,s),renderState:e()}}function mB(s,e,t,n){const i={},a=n(s,{});for(const y in a)i[y]=Wd(a[y]);let{initial:l,animate:c}=s;const d=Oh(s),h=ZE(s);e&&h&&!d&&s.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let f=t?t.initial===!1:!1;f=f||l===!1;const m=f?c:l;if(m&&typeof m!="boolean"&&!jh(m)){const y=Array.isArray(m)?m:[m];for(let x=0;x<y.length;x++){const A=sv(s,y[x]);if(A){const{transitionEnd:S,transition:C,...E}=A;for(const _ in E){let R=E[_];if(Array.isArray(R)){const N=f?R.length-1:0;R=R[N]}R!==null&&(i[_]=R)}for(const _ in S)i[_]=S[_]}}}return i}const N_=s=>(e,t)=>{const n=w.useContext(Ph),i=w.useContext(kh),a=()=>pB(s,e,n,i);return t?a():Fy(a)},gB=N_({scrapeMotionValuesFromProps:dv,createRenderState:fv}),yB=N_({scrapeMotionValuesFromProps:u_,createRenderState:R_}),vB=Symbol.for("motionComponentSymbol");function bB(s,e,t){const n=w.useRef(t);w.useInsertionEffect(()=>{n.current=t});const i=w.useRef(null);return w.useCallback(a=>{a&&s.onMount?.(a),e&&(a?e.mount(a):e.unmount());const l=n.current;if(typeof l=="function")if(a){const c=l(a);typeof c=="function"&&(i.current=c)}else i.current?(i.current(),i.current=null):l(a);else l&&(l.current=a)},[e])}const M_=w.createContext({});function oc(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function xB(s,e,t,n,i,a){const{visualElement:l}=w.useContext(Ph),c=w.useContext(C_),d=w.useContext(kh),h=w.useContext(hv).reducedMotion,f=w.useRef(null),m=w.useRef(!1);n=n||c.renderer,!f.current&&n&&(f.current=n(s,{visualState:e,parent:l,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h,isSVG:a}),m.current&&f.current&&(f.current.manuallyAnimateOnMount=!0));const y=f.current,x=w.useContext(M_);y&&!y.projection&&i&&(y.type==="html"||y.type==="svg")&&wB(f.current,t,i,x);const A=w.useRef(!1);w.useInsertionEffect(()=>{y&&A.current&&y.update(t,d)});const S=t[FE],C=w.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return tE(()=>{m.current=!0,y&&(A.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),C.current&&y.animationState&&y.animationState.animateChanges())}),w.useEffect(()=>{y&&(!C.current&&y.animationState&&y.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),C.current=!1),y.enteringChildren=void 0)}),y}function wB(s,e,t,n){const{layoutId:i,layout:a,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:h,layoutCrossfade:f}=e;s.projection=new t(s.latestValues,e["data-framer-portal-id"]?void 0:D_(s.parent)),s.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!l||c&&oc(c),visualElement:s,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:f,layoutScroll:d,layoutRoot:h})}function D_(s){if(s)return s.options.allowProjection!==!1?s.projection:D_(s.parent)}function Qm(s,{forwardMotionProps:e=!1,type:t}={},n,i){n&&nB(n);const a=t?t==="svg":pv(s),l=a?yB:gB;function c(h,f){let m;const y={...w.useContext(hv),...h,layoutId:SB(h)},{isStatic:x}=y,A=oB(h),S=l(h,x);if(!x&&eE){AB();const C=CB(y);m=C.MeasureLayout,A.visualElement=xB(s,S,y,i,C.ProjectionNode,a)}return g.jsxs(Ph.Provider,{value:A,children:[m&&A.visualElement?g.jsx(m,{visualElement:A.visualElement,...y}):null,fB(s,h,bB(S,A.visualElement,f),S,x,e,a)]})}c.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const d=w.forwardRef(c);return d[vB]=s,d}function SB({layoutId:s}){const e=w.useContext(Iy).id;return e&&s!==void 0?e+"-"+s:s}function AB(s,e){w.useContext(C_).strict}function CB(s){const e=E_(),{drag:t,layout:n}=e;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:t?.isEnabled(s)||n?.isEnabled(s)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function EB(s,e){if(typeof Proxy>"u")return Qm;const t=new Map,n=(a,l)=>Qm(a,l,s,e),i=(a,l)=>n(a,l);return new Proxy(i,{get:(a,l)=>l==="create"?n:(t.has(l)||t.set(l,Qm(l,void 0,s,e)),t.get(l))})}const _B=(s,e)=>e.isSVG??pv(s)?new iF(e):new ZI(e,{allowProjection:s!==w.Fragment});class TB extends _r{constructor(e){super(e),e.animationState||(e.animationState=cF(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();jh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let RB=0;class NB extends _r{constructor(){super(...arguments),this.id=RB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const MB={animation:{Feature:TB},exit:{Feature:NB}};function Yc(s){return{point:{x:s.pageX,y:s.pageY}}}const DB=s=>e=>ov(e)&&s(e,Yc(e));function bc(s,e,t,n){return Rc(s,e,DB(t),n)}const k_=({current:s})=>s?s.ownerDocument.defaultView:null,GA=(s,e)=>Math.abs(s-e);function kB(s,e){const t=GA(s.x,e.x),n=GA(s.y,e.y);return Math.sqrt(t**2+n**2)}const qA=new Set(["auto","scroll"]);class j_{constructor(e,t,{transformPagePoint:n,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=x=>{this.handleScroll(x.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Jm(this.lastMoveEventInfo,this.history),A=this.startEvent!==null,S=kB(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!A&&!S)return;const{point:C}=x,{timestamp:E}=rn;this.history.push({...C,timestamp:E});const{onStart:_,onMove:R}=this.handlers;A||(_&&_(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),R&&R(this.lastMoveEvent,x)},this.handlePointerMove=(x,A)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=Zm(A,this.transformPagePoint),vt.update(this.updatePoint,!0)},this.handlePointerUp=(x,A)=>{this.end();const{onEnd:S,onSessionEnd:C,resumeAnimation:E}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Jm(x.type==="pointercancel"?this.lastMoveEventInfo:Zm(A,this.transformPagePoint),this.history);this.startEvent&&S&&S(x,_),C&&C(x,_)},!ov(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=l,this.contextWindow=i||window;const d=Yc(e),h=Zm(d,this.transformPagePoint),{point:f}=h,{timestamp:m}=rn;this.history=[{...f,timestamp:m}];const{onSessionStart:y}=t;y&&y(e,Jm(h,this.history)),this.removeListeners=Gc(bc(this.contextWindow,"pointermove",this.handlePointerMove),bc(this.contextWindow,"pointerup",this.handlePointerUp),bc(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(e){let t=e.parentElement;for(;t;){const n=getComputedStyle(t);(qA.has(n.overflowX)||qA.has(n.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const n=e===window,i=n?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:i.x-t.x,y:i.y-t.y};a.x===0&&a.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,i),vt.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),xr(this.updatePoint)}}function Zm(s,e){return e?{point:e(s.point)}:s}function XA(s,e){return{x:s.x-e.x,y:s.y-e.y}}function Jm({point:s},e){return{point:s,delta:XA(s,O_(e)),offset:XA(s,jB(e)),velocity:OB(e,.1)}}function jB(s){return s[0]}function O_(s){return s[s.length-1]}function OB(s,e){if(s.length<2)return{x:0,y:0};let t=s.length-1,n=null;const i=O_(s);for(;t>=0&&(n=s[t],!(i.timestamp-n.timestamp>Ei(e)));)t--;if(!n)return{x:0,y:0};const a=ms(i.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const l={x:(i.x-n.x)/a,y:(i.y-n.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function PB(s,{min:e,max:t},n){return e!==void 0&&s<e?s=n?Et(e,s,n.min):Math.max(s,e):t!==void 0&&s>t&&(s=n?Et(t,s,n.max):Math.min(s,t)),s}function YA(s,e,t){return{min:e!==void 0?s.min+e:void 0,max:t!==void 0?s.max+t-(s.max-s.min):void 0}}function LB(s,{top:e,left:t,bottom:n,right:i}){return{x:YA(s.x,t,i),y:YA(s.y,e,n)}}function WA(s,e){let t=e.min-s.min,n=e.max-s.max;return e.max-e.min<s.max-s.min&&([t,n]=[n,t]),{min:t,max:n}}function IB(s,e){return{x:WA(s.x,e.x),y:WA(s.y,e.y)}}function FB(s,e){let t=.5;const n=An(s),i=An(e);return i>n?t=Cc(e.min,e.max-n,s.min):n>i&&(t=Cc(s.min,s.max-i,e.min)),Qs(0,1,t)}function BB(s,e){const t={};return e.min!==void 0&&(t.min=e.min-s.min),e.max!==void 0&&(t.max=e.max-s.min),t}const Jg=.35;function zB(s=Jg){return s===!1?s=0:s===!0&&(s=Jg),{x:KA(s,"left","right"),y:KA(s,"top","bottom")}}function KA(s,e,t){return{min:QA(s,e),max:QA(s,t)}}function QA(s,e){return typeof s=="number"?s:s[e]||0}const UB=new WeakMap;class VB{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$t(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=m=>{t?(this.stopAnimation(),this.snapToCursor(Yc(m).point)):this.pauseAnimation()},l=(m,y)=>{this.stopAnimation();const{drag:x,dragPropagation:A,onDragStart:S}=this.getProps();if(x&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=NI(x),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ps(E=>{let _=this.getAxisMotionValue(E).get()||0;if(Ws.test(_)){const{projection:R}=this.visualElement;if(R&&R.layout){const N=R.layout.layoutBox[E];N&&(_=An(N)*(parseFloat(_)/100))}}this.originPoint[E]=_}),S&&vt.postRender(()=>S(m,y)),Gg(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},c=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y;const{dragPropagation:x,dragDirectionLock:A,onDirectionLock:S,onDrag:C}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:E}=y;if(A&&this.currentDirection===null){this.currentDirection=HB(E),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",y.point,E),this.updateAxis("y",y.point,E),this.visualElement.render(),C&&C(m,y)},d=(m,y)=>{this.latestPointerEvent=m,this.latestPanInfo=y,this.stop(m,y),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>ps(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new j_(e,{onSessionStart:a,onStart:l,onMove:c,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:n,contextWindow:k_(this.visualElement),element:this.visualElement.current})}stop(e,t){const n=e||this.latestPointerEvent,i=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!n)return;const{velocity:l}=i;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&vt.postRender(()=>c(n,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,n){const{drag:i}=this.getProps();if(!n||!_d(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(l=PB(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&oc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=LB(n.layoutBox,e):this.constraints=!1,this.elastic=zB(t),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&ps(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=BB(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!oc(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=qI(n,i.root,this.visualElement.getTransformPagePoint());let l=IB(i.layout.layoutBox,a);if(t){const c=t(HI(l));this.hasMutatedConstraints=!!c,c&&(l=t_(c))}return l}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:i,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},h=ps(f=>{if(!_d(f,t,this.currentDirection))return;let m=d&&d[f]||{};l&&(m={min:0,max:0});const y=i?200:1e6,x=i?40:1e7,A={type:"inertia",velocity:n?e[f]:0,bounceStiffness:y,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(f,A)});return Promise.all(h).then(c)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return Gg(this.visualElement,e),n.start(nv(e,n,0,t,this.visualElement,!1))}stopAnimation(){ps(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ps(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){ps(t=>{const{drag:n}=this.getProps();if(!_d(t,n,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(t);if(i&&i.layout){const{min:l,max:c}=i.layout.layoutBox[t],d=a.get()||0;a.set(e[t]-Et(l,c,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!oc(t)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ps(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();i[l]=FB({min:d,max:d},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ps(l=>{if(!_d(l,e,null))return;const c=this.getAxisMotionValue(l),{min:d,max:h}=this.constraints[l];c.set(Et(d,h,i[l]))})}addListeners(){if(!this.visualElement.current)return;UB.set(this.visualElement,this);const e=this.visualElement.current,t=bc(e,"pointerdown",d=>{const{drag:h,dragListener:f=!0}=this.getProps(),m=d.target,y=m!==e&&WE(m);h&&f&&!y&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();oc(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),vt.read(n);const l=Rc(window,"resize",()=>this.scalePositionWithinConstraints()),c=i.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(ps(f=>{const m=this.getAxisMotionValue(f);m&&(this.originPoint[f]+=d[f].translate,m.set(m.get()+d[f].translate))}),this.visualElement.render())}));return()=>{l(),t(),a(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:l=Jg,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:a,dragElastic:l,dragMomentum:c}}}function _d(s,e,t){return(e===!0||e===s)&&(t===null||t===s)}function HB(s,e=10){let t=null;return Math.abs(s.y)>e?t="y":Math.abs(s.x)>e&&(t="x"),t}class $B extends _r{constructor(e){super(e),this.removeGroupControls=ys,this.removeListeners=ys,this.controls=new VB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ys}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const ZA=s=>(e,t)=>{s&&vt.postRender(()=>s(e,t))};class GB extends _r{constructor(){super(...arguments),this.removePointerDownListener=ys}onPointerDown(e){this.session=new j_(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:k_(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:ZA(e),onStart:ZA(t),onMove:n,onEnd:(a,l)=>{delete this.session,i&&vt.postRender(()=>i(a,l))}}}mount(){this.removePointerDownListener=bc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let eg=!1;class qB extends w.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:a}=e;a&&(t.group&&t.group.add(a),n&&n.register&&i&&n.register(a),eg&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Kd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:i,isPresent:a}=this.props,{projection:l}=n;return l&&(l.isPresent=a,e.layoutDependency!==t&&l.setOptions({...l.options,layoutDependency:t}),eg=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||vt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),av.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;eg=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function P_(s){const[e,t]=A_(),n=w.useContext(Iy);return g.jsx(qB,{...s,layoutGroup:n,switchLayoutGroup:w.useContext(M_),isPresent:e,safeToRemove:t})}const XB={pan:{Feature:GB},drag:{Feature:$B,ProjectionNode:S_,MeasureLayout:P_}};function JA(s,e,t){const{props:n}=s;s.animationState&&n.whileHover&&s.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,a=n[i];a&&vt.postRender(()=>a(e,Yc(e)))}class YB extends _r{mount(){const{current:e}=this.node;e&&(this.unmount=MI(e,(t,n)=>(JA(this.node,n,"Start"),i=>JA(this.node,i,"End"))))}unmount(){}}class WB extends _r{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Gc(Rc(this.node.current,"focus",()=>this.onFocus()),Rc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function e1(s,e,t){const{props:n}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&n.whileTap&&s.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),a=n[i];a&&vt.postRender(()=>a(e,Yc(e)))}class KB extends _r{mount(){const{current:e}=this.node;e&&(this.unmount=jI(e,(t,n)=>(e1(this.node,n,"Start"),(i,{success:a})=>e1(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ey=new WeakMap,tg=new WeakMap,QB=s=>{const e=ey.get(s.target);e&&e(s)},ZB=s=>{s.forEach(QB)};function JB({root:s,...e}){const t=s||document;tg.has(t)||tg.set(t,{});const n=tg.get(t),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(ZB,{root:s,...e})),n[i]}function e3(s,e,t){const n=JB(e);return ey.set(s,t),n.observe(s),()=>{ey.delete(s),n.unobserve(s)}}const t3={some:0,all:1};class n3 extends _r{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:a}=e,l={root:t?t.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:t3[i]},c=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,a&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:m}=this.node.getProps(),y=h?f:m;y&&y(d)};return e3(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(s3(e,t))&&this.startObserver()}unmount(){}}function s3({viewport:s={}},{viewport:e={}}={}){return t=>s[t]!==e[t]}const i3={inView:{Feature:n3},tap:{Feature:KB},focus:{Feature:WB},hover:{Feature:YB}},r3={layout:{ProjectionNode:S_,MeasureLayout:P_}},a3={...MB,...i3,...XB,...r3},vr=EB(a3,_B);function L_(s){var e,t,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var i=s.length;for(e=0;e<i;e++)s[e]&&(t=L_(s[e]))&&(n&&(n+=" "),n+=t)}else for(t in s)s[t]&&(n&&(n+=" "),n+=t);return n}function Ko(){for(var s,e,t=0,n="",i=arguments.length;t<i;t++)(s=arguments[t])&&(e=L_(s))&&(n&&(n+=" "),n+=e);return n}const o3=(s,e)=>{const t=new Array(s.length+e.length);for(let n=0;n<s.length;n++)t[n]=s[n];for(let n=0;n<e.length;n++)t[s.length+n]=e[n];return t},l3=(s,e)=>({classGroupId:s,validator:e}),I_=(s=new Map,e=null,t)=>({nextPart:s,validators:e,classGroupId:t}),fh="-",t1=[],c3="arbitrary..",u3=s=>{const e=h3(s),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=s;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return d3(l);const c=l.split(fh),d=c[0]===""&&c.length>1?1:0;return F_(c,d,e)},getConflictingClassGroupIds:(l,c)=>{if(c){const d=n[l],h=t[l];return d?h?o3(h,d):d:h||t1}return t[l]||t1}}},F_=(s,e,t)=>{if(s.length-e===0)return t.classGroupId;const i=s[e],a=t.nextPart.get(i);if(a){const h=F_(s,e+1,a);if(h)return h}const l=t.validators;if(l===null)return;const c=e===0?s.join(fh):s.slice(e).join(fh),d=l.length;for(let h=0;h<d;h++){const f=l[h];if(f.validator(c))return f.classGroupId}},d3=s=>s.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=s.slice(1,-1),t=e.indexOf(":"),n=e.slice(0,t);return n?c3+n:void 0})(),h3=s=>{const{theme:e,classGroups:t}=s;return f3(t,e)},f3=(s,e)=>{const t=I_();for(const n in s){const i=s[n];mv(i,t,n,e)}return t},mv=(s,e,t,n)=>{const i=s.length;for(let a=0;a<i;a++){const l=s[a];p3(l,e,t,n)}},p3=(s,e,t,n)=>{if(typeof s=="string"){m3(s,e,t);return}if(typeof s=="function"){g3(s,e,t,n);return}y3(s,e,t,n)},m3=(s,e,t)=>{const n=s===""?e:B_(e,s);n.classGroupId=t},g3=(s,e,t,n)=>{if(v3(s)){mv(s(n),e,t,n);return}e.validators===null&&(e.validators=[]),e.validators.push(l3(t,s))},y3=(s,e,t,n)=>{const i=Object.entries(s),a=i.length;for(let l=0;l<a;l++){const[c,d]=i[l];mv(d,B_(e,c),t,n)}},B_=(s,e)=>{let t=s;const n=e.split(fh),i=n.length;for(let a=0;a<i;a++){const l=n[a];let c=t.nextPart.get(l);c||(c=I_(),t.nextPart.set(l,c)),t=c}return t},v3=s=>"isThemeGetter"in s&&s.isThemeGetter===!0,b3=s=>{if(s<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),n=Object.create(null);const i=(a,l)=>{t[a]=l,e++,e>s&&(e=0,n=t,t=Object.create(null))};return{get(a){let l=t[a];if(l!==void 0)return l;if((l=n[a])!==void 0)return i(a,l),l},set(a,l){a in t?t[a]=l:i(a,l)}}},ty="!",n1=":",x3=[],s1=(s,e,t,n,i)=>({modifiers:s,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:n,isExternal:i}),w3=s=>{const{prefix:e,experimentalParseClassName:t}=s;let n=i=>{const a=[];let l=0,c=0,d=0,h;const f=i.length;for(let S=0;S<f;S++){const C=i[S];if(l===0&&c===0){if(C===n1){a.push(i.slice(d,S)),d=S+1;continue}if(C==="/"){h=S;continue}}C==="["?l++:C==="]"?l--:C==="("?c++:C===")"&&c--}const m=a.length===0?i:i.slice(d);let y=m,x=!1;m.endsWith(ty)?(y=m.slice(0,-1),x=!0):m.startsWith(ty)&&(y=m.slice(1),x=!0);const A=h&&h>d?h-d:void 0;return s1(a,x,y,A)};if(e){const i=e+n1,a=n;n=l=>l.startsWith(i)?a(l.slice(i.length)):s1(x3,!1,l,void 0,!0)}if(t){const i=n;n=a=>t({className:a,parseClassName:i})}return n},S3=s=>{const e=new Map;return s.orderSensitiveModifiers.forEach((t,n)=>{e.set(t,1e6+n)}),t=>{const n=[];let i=[];for(let a=0;a<t.length;a++){const l=t[a],c=l[0]==="[",d=e.has(l);c||d?(i.length>0&&(i.sort(),n.push(...i),i=[]),n.push(l)):i.push(l)}return i.length>0&&(i.sort(),n.push(...i)),n}},A3=s=>({cache:b3(s.cacheSize),parseClassName:w3(s),sortModifiers:S3(s),...u3(s)}),C3=/\s+/,E3=(s,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:i,sortModifiers:a}=e,l=[],c=s.trim().split(C3);let d="";for(let h=c.length-1;h>=0;h-=1){const f=c[h],{isExternal:m,modifiers:y,hasImportantModifier:x,baseClassName:A,maybePostfixModifierPosition:S}=t(f);if(m){d=f+(d.length>0?" "+d:d);continue}let C=!!S,E=n(C?A.substring(0,S):A);if(!E){if(!C){d=f+(d.length>0?" "+d:d);continue}if(E=n(A),!E){d=f+(d.length>0?" "+d:d);continue}C=!1}const _=y.length===0?"":y.length===1?y[0]:a(y).join(":"),R=x?_+ty:_,N=R+E;if(l.indexOf(N)>-1)continue;l.push(N);const M=i(E,C);for(let j=0;j<M.length;++j){const D=M[j];l.push(R+D)}d=f+(d.length>0?" "+d:d)}return d},_3=(...s)=>{let e=0,t,n,i="";for(;e<s.length;)(t=s[e++])&&(n=z_(t))&&(i&&(i+=" "),i+=n);return i},z_=s=>{if(typeof s=="string")return s;let e,t="";for(let n=0;n<s.length;n++)s[n]&&(e=z_(s[n]))&&(t&&(t+=" "),t+=e);return t},T3=(s,...e)=>{let t,n,i,a;const l=d=>{const h=e.reduce((f,m)=>m(f),s());return t=A3(h),n=t.cache.get,i=t.cache.set,a=c,c(d)},c=d=>{const h=n(d);if(h)return h;const f=E3(d,t);return i(d,f),f};return a=l,(...d)=>a(_3(...d))},R3=[],Ht=s=>{const e=t=>t[s]||R3;return e.isThemeGetter=!0,e},U_=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,V_=/^\((?:(\w[\w-]*):)?(.+)\)$/i,N3=/^\d+\/\d+$/,M3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,D3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,k3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,j3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,O3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fo=s=>N3.test(s),Ge=s=>!!s&&!Number.isNaN(Number(s)),or=s=>!!s&&Number.isInteger(Number(s)),ng=s=>s.endsWith("%")&&Ge(s.slice(0,-1)),wi=s=>M3.test(s),P3=()=>!0,L3=s=>D3.test(s)&&!k3.test(s),H_=()=>!1,I3=s=>j3.test(s),F3=s=>O3.test(s),B3=s=>!Se(s)&&!Ae(s),z3=s=>Qo(s,q_,H_),Se=s=>U_.test(s),Qr=s=>Qo(s,X_,L3),sg=s=>Qo(s,G3,Ge),i1=s=>Qo(s,$_,H_),U3=s=>Qo(s,G_,F3),Td=s=>Qo(s,Y_,I3),Ae=s=>V_.test(s),ec=s=>Zo(s,X_),V3=s=>Zo(s,q3),r1=s=>Zo(s,$_),H3=s=>Zo(s,q_),$3=s=>Zo(s,G_),Rd=s=>Zo(s,Y_,!0),Qo=(s,e,t)=>{const n=U_.exec(s);return n?n[1]?e(n[1]):t(n[2]):!1},Zo=(s,e,t=!1)=>{const n=V_.exec(s);return n?n[1]?e(n[1]):t:!1},$_=s=>s==="position"||s==="percentage",G_=s=>s==="image"||s==="url",q_=s=>s==="length"||s==="size"||s==="bg-size",X_=s=>s==="length",G3=s=>s==="number",q3=s=>s==="family-name",Y_=s=>s==="shadow",X3=()=>{const s=Ht("color"),e=Ht("font"),t=Ht("text"),n=Ht("font-weight"),i=Ht("tracking"),a=Ht("leading"),l=Ht("breakpoint"),c=Ht("container"),d=Ht("spacing"),h=Ht("radius"),f=Ht("shadow"),m=Ht("inset-shadow"),y=Ht("text-shadow"),x=Ht("drop-shadow"),A=Ht("blur"),S=Ht("perspective"),C=Ht("aspect"),E=Ht("ease"),_=Ht("animate"),R=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],M=()=>[...N(),Ae,Se],j=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],O=()=>[Ae,Se,d],I=()=>[fo,"full","auto",...O()],U=()=>[or,"none","subgrid",Ae,Se],$=()=>["auto",{span:["full",or,Ae,Se]},or,Ae,Se],J=()=>[or,"auto",Ae,Se],ie=()=>["auto","min","max","fr",Ae,Se],X=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ae=()=>["start","end","center","stretch","center-safe","end-safe"],P=()=>["auto",...O()],F=()=>[fo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...O()],B=()=>[s,Ae,Se],V=()=>[...N(),r1,i1,{position:[Ae,Se]}],de=()=>["no-repeat",{repeat:["","x","y","space","round"]}],L=()=>["auto","cover","contain",H3,z3,{size:[Ae,Se]}],q=()=>[ng,ec,Qr],te=()=>["","none","full",h,Ae,Se],oe=()=>["",Ge,ec,Qr],pe=()=>["solid","dashed","dotted","double"],se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Q=()=>[Ge,ng,r1,i1],ye=()=>["","none",A,Ae,Se],ve=()=>["none",Ge,Ae,Se],Re=()=>["none",Ge,Ae,Se],Y=()=>[Ge,Ae,Se],ue=()=>[fo,"full",...O()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[wi],breakpoint:[wi],color:[P3],container:[wi],"drop-shadow":[wi],ease:["in","out","in-out"],font:[B3],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[wi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[wi],shadow:[wi],spacing:["px",Ge],text:[wi],"text-shadow":[wi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",fo,Se,Ae,C]}],container:["container"],columns:[{columns:[Ge,Se,Ae,c]}],"break-after":[{"break-after":R()}],"break-before":[{"break-before":R()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:M()}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[or,"auto",Ae,Se]}],basis:[{basis:[fo,"full","auto",c,...O()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ge,fo,"auto","initial","none",Se]}],grow:[{grow:["",Ge,Ae,Se]}],shrink:[{shrink:["",Ge,Ae,Se]}],order:[{order:[or,"first","last","none",Ae,Se]}],"grid-cols":[{"grid-cols":U()}],"col-start-end":[{col:$()}],"col-start":[{"col-start":J()}],"col-end":[{"col-end":J()}],"grid-rows":[{"grid-rows":U()}],"row-start-end":[{row:$()}],"row-start":[{"row-start":J()}],"row-end":[{"row-end":J()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ie()}],"auto-rows":[{"auto-rows":ie()}],gap:[{gap:O()}],"gap-x":[{"gap-x":O()}],"gap-y":[{"gap-y":O()}],"justify-content":[{justify:[...X(),"normal"]}],"justify-items":[{"justify-items":[...ae(),"normal"]}],"justify-self":[{"justify-self":["auto",...ae()]}],"align-content":[{content:["normal",...X()]}],"align-items":[{items:[...ae(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ae(),{baseline:["","last"]}]}],"place-content":[{"place-content":X()}],"place-items":[{"place-items":[...ae(),"baseline"]}],"place-self":[{"place-self":["auto",...ae()]}],p:[{p:O()}],px:[{px:O()}],py:[{py:O()}],ps:[{ps:O()}],pe:[{pe:O()}],pt:[{pt:O()}],pr:[{pr:O()}],pb:[{pb:O()}],pl:[{pl:O()}],m:[{m:P()}],mx:[{mx:P()}],my:[{my:P()}],ms:[{ms:P()}],me:[{me:P()}],mt:[{mt:P()}],mr:[{mr:P()}],mb:[{mb:P()}],ml:[{ml:P()}],"space-x":[{"space-x":O()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":O()}],"space-y-reverse":["space-y-reverse"],size:[{size:F()}],w:[{w:[c,"screen",...F()]}],"min-w":[{"min-w":[c,"screen","none",...F()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[l]},...F()]}],h:[{h:["screen","lh",...F()]}],"min-h":[{"min-h":["screen","lh","none",...F()]}],"max-h":[{"max-h":["screen","lh",...F()]}],"font-size":[{text:["base",t,ec,Qr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Ae,sg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ng,Se]}],"font-family":[{font:[V3,Se,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Ae,Se]}],"line-clamp":[{"line-clamp":[Ge,"none",Ae,sg]}],leading:[{leading:[a,...O()]}],"list-image":[{"list-image":["none",Ae,Se]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ae,Se]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:B()}],"text-color":[{text:B()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pe(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ge,"from-font","auto",Ae,Qr]}],"text-decoration-color":[{decoration:B()}],"underline-offset":[{"underline-offset":[Ge,"auto",Ae,Se]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ae,Se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ae,Se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:V()}],"bg-repeat":[{bg:de()}],"bg-size":[{bg:L()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},or,Ae,Se],radial:["",Ae,Se],conic:[or,Ae,Se]},$3,U3]}],"bg-color":[{bg:B()}],"gradient-from-pos":[{from:q()}],"gradient-via-pos":[{via:q()}],"gradient-to-pos":[{to:q()}],"gradient-from":[{from:B()}],"gradient-via":[{via:B()}],"gradient-to":[{to:B()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:oe()}],"border-w-x":[{"border-x":oe()}],"border-w-y":[{"border-y":oe()}],"border-w-s":[{"border-s":oe()}],"border-w-e":[{"border-e":oe()}],"border-w-t":[{"border-t":oe()}],"border-w-r":[{"border-r":oe()}],"border-w-b":[{"border-b":oe()}],"border-w-l":[{"border-l":oe()}],"divide-x":[{"divide-x":oe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":oe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...pe(),"hidden","none"]}],"divide-style":[{divide:[...pe(),"hidden","none"]}],"border-color":[{border:B()}],"border-color-x":[{"border-x":B()}],"border-color-y":[{"border-y":B()}],"border-color-s":[{"border-s":B()}],"border-color-e":[{"border-e":B()}],"border-color-t":[{"border-t":B()}],"border-color-r":[{"border-r":B()}],"border-color-b":[{"border-b":B()}],"border-color-l":[{"border-l":B()}],"divide-color":[{divide:B()}],"outline-style":[{outline:[...pe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ge,Ae,Se]}],"outline-w":[{outline:["",Ge,ec,Qr]}],"outline-color":[{outline:B()}],shadow:[{shadow:["","none",f,Rd,Td]}],"shadow-color":[{shadow:B()}],"inset-shadow":[{"inset-shadow":["none",m,Rd,Td]}],"inset-shadow-color":[{"inset-shadow":B()}],"ring-w":[{ring:oe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:B()}],"ring-offset-w":[{"ring-offset":[Ge,Qr]}],"ring-offset-color":[{"ring-offset":B()}],"inset-ring-w":[{"inset-ring":oe()}],"inset-ring-color":[{"inset-ring":B()}],"text-shadow":[{"text-shadow":["none",y,Rd,Td]}],"text-shadow-color":[{"text-shadow":B()}],opacity:[{opacity:[Ge,Ae,Se]}],"mix-blend":[{"mix-blend":[...se(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":se()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ge]}],"mask-image-linear-from-pos":[{"mask-linear-from":Q()}],"mask-image-linear-to-pos":[{"mask-linear-to":Q()}],"mask-image-linear-from-color":[{"mask-linear-from":B()}],"mask-image-linear-to-color":[{"mask-linear-to":B()}],"mask-image-t-from-pos":[{"mask-t-from":Q()}],"mask-image-t-to-pos":[{"mask-t-to":Q()}],"mask-image-t-from-color":[{"mask-t-from":B()}],"mask-image-t-to-color":[{"mask-t-to":B()}],"mask-image-r-from-pos":[{"mask-r-from":Q()}],"mask-image-r-to-pos":[{"mask-r-to":Q()}],"mask-image-r-from-color":[{"mask-r-from":B()}],"mask-image-r-to-color":[{"mask-r-to":B()}],"mask-image-b-from-pos":[{"mask-b-from":Q()}],"mask-image-b-to-pos":[{"mask-b-to":Q()}],"mask-image-b-from-color":[{"mask-b-from":B()}],"mask-image-b-to-color":[{"mask-b-to":B()}],"mask-image-l-from-pos":[{"mask-l-from":Q()}],"mask-image-l-to-pos":[{"mask-l-to":Q()}],"mask-image-l-from-color":[{"mask-l-from":B()}],"mask-image-l-to-color":[{"mask-l-to":B()}],"mask-image-x-from-pos":[{"mask-x-from":Q()}],"mask-image-x-to-pos":[{"mask-x-to":Q()}],"mask-image-x-from-color":[{"mask-x-from":B()}],"mask-image-x-to-color":[{"mask-x-to":B()}],"mask-image-y-from-pos":[{"mask-y-from":Q()}],"mask-image-y-to-pos":[{"mask-y-to":Q()}],"mask-image-y-from-color":[{"mask-y-from":B()}],"mask-image-y-to-color":[{"mask-y-to":B()}],"mask-image-radial":[{"mask-radial":[Ae,Se]}],"mask-image-radial-from-pos":[{"mask-radial-from":Q()}],"mask-image-radial-to-pos":[{"mask-radial-to":Q()}],"mask-image-radial-from-color":[{"mask-radial-from":B()}],"mask-image-radial-to-color":[{"mask-radial-to":B()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[Ge]}],"mask-image-conic-from-pos":[{"mask-conic-from":Q()}],"mask-image-conic-to-pos":[{"mask-conic-to":Q()}],"mask-image-conic-from-color":[{"mask-conic-from":B()}],"mask-image-conic-to-color":[{"mask-conic-to":B()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:V()}],"mask-repeat":[{mask:de()}],"mask-size":[{mask:L()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ae,Se]}],filter:[{filter:["","none",Ae,Se]}],blur:[{blur:ye()}],brightness:[{brightness:[Ge,Ae,Se]}],contrast:[{contrast:[Ge,Ae,Se]}],"drop-shadow":[{"drop-shadow":["","none",x,Rd,Td]}],"drop-shadow-color":[{"drop-shadow":B()}],grayscale:[{grayscale:["",Ge,Ae,Se]}],"hue-rotate":[{"hue-rotate":[Ge,Ae,Se]}],invert:[{invert:["",Ge,Ae,Se]}],saturate:[{saturate:[Ge,Ae,Se]}],sepia:[{sepia:["",Ge,Ae,Se]}],"backdrop-filter":[{"backdrop-filter":["","none",Ae,Se]}],"backdrop-blur":[{"backdrop-blur":ye()}],"backdrop-brightness":[{"backdrop-brightness":[Ge,Ae,Se]}],"backdrop-contrast":[{"backdrop-contrast":[Ge,Ae,Se]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ge,Ae,Se]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ge,Ae,Se]}],"backdrop-invert":[{"backdrop-invert":["",Ge,Ae,Se]}],"backdrop-opacity":[{"backdrop-opacity":[Ge,Ae,Se]}],"backdrop-saturate":[{"backdrop-saturate":[Ge,Ae,Se]}],"backdrop-sepia":[{"backdrop-sepia":["",Ge,Ae,Se]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":O()}],"border-spacing-x":[{"border-spacing-x":O()}],"border-spacing-y":[{"border-spacing-y":O()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ae,Se]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ge,"initial",Ae,Se]}],ease:[{ease:["linear","initial",E,Ae,Se]}],delay:[{delay:[Ge,Ae,Se]}],animate:[{animate:["none",_,Ae,Se]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,Ae,Se]}],"perspective-origin":[{"perspective-origin":M()}],rotate:[{rotate:ve()}],"rotate-x":[{"rotate-x":ve()}],"rotate-y":[{"rotate-y":ve()}],"rotate-z":[{"rotate-z":ve()}],scale:[{scale:Re()}],"scale-x":[{"scale-x":Re()}],"scale-y":[{"scale-y":Re()}],"scale-z":[{"scale-z":Re()}],"scale-3d":["scale-3d"],skew:[{skew:Y()}],"skew-x":[{"skew-x":Y()}],"skew-y":[{"skew-y":Y()}],transform:[{transform:[Ae,Se,"","none","gpu","cpu"]}],"transform-origin":[{origin:M()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ue()}],"translate-x":[{"translate-x":ue()}],"translate-y":[{"translate-y":ue()}],"translate-z":[{"translate-z":ue()}],"translate-none":["translate-none"],accent:[{accent:B()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:B()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ae,Se]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ae,Se]}],fill:[{fill:["none",...B()]}],"stroke-w":[{stroke:[Ge,ec,Qr,sg]}],stroke:[{stroke:["none",...B()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Y3=T3(X3);function Ve(...s){return Y3(Ko(s))}const W3={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-10 h-10"},a1="/assets/edo/dist/edo_logo.png",K3=w.memo(function({size:e="md",className:t=""}){return g.jsx("img",{src:a1,alt:"EDO Logo",className:`${W3[e]} object-contain ${t}`,onError:()=>{console.error("Failed to load logo from:",a1)}})}),Q3="/assets/dashboard.D5ndxOag.png",Z3="/assets/document.CdEqbrON.png",J3="/assets/settings.CFN7stQz.png";function e5(s,e){const t=s;return t.startsWith("/src/")?t:`/assets/edo/dist/assets/icons/${e}.png`}const t5={dashboard:Q3,document:Z3,settings:J3},o1=w.memo(function({name:e,size:t=20,className:n=""}){const i=e5(t5[e],e);return g.jsx("img",{src:i,alt:`${e} icon`,width:t,height:t,className:n,onError:()=>{console.error("Failed to load icon:",e,"from:",i)}})});function n5({currentPage:s,onNavigate:e}){const{t}=ei(),n=[{id:"dashboard",label:t("navigation.dashboard"),icon:"dashboard"},{id:"documents",label:t("navigation.documents"),icon:"document"}];return g.jsxs("aside",{className:"w-64 border-r bg-white flex flex-col shrink-0",children:[g.jsxs("div",{className:"h-14 px-4 border-b flex items-center gap-3",children:[g.jsx(K3,{size:"lg"}),g.jsxs("div",{children:[g.jsx("h1",{className:"font-bold text-lg leading-tight",children:"EDO"}),g.jsx("p",{className:"text-xs text-muted-foreground leading-tight",children:""})]})]}),g.jsxs("nav",{className:"flex-1 p-3 space-y-1",children:[n.map(i=>g.jsxs("button",{onClick:()=>e(i.id),className:Ve("w-full flex items-center gap-3 px-2 py-1.5 rounded-lg text-sm font-medium transition-colors",s===i.id?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"),children:[g.jsx(o1,{name:i.icon,size:48}),i.label]},i.id)),g.jsx("div",{className:"pt-4 mt-4 border-t",children:g.jsxs("button",{className:"w-full flex items-center gap-3 px-2 py-1.5 rounded-lg text-sm font-medium text-muted-foreground hover:text-foreground hover:bg-muted transition-colors",children:[g.jsx(o1,{name:"settings",size:48}),t("common.settings")]})})]})]})}function s5({title:s,subtitle:e}){return g.jsxs("div",{children:[g.jsx("h1",{className:"text-lg font-semibold",children:s}),e&&g.jsx("p",{className:"text-xs text-muted-foreground",children:e})]})}const i5=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r5=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),l1=s=>{const e=r5(s);return e.charAt(0).toUpperCase()+e.slice(1)},W_=(...s)=>s.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),a5=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var o5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const l5=w.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:l,...c},d)=>w.createElement("svg",{ref:d,...o5,width:e,height:e,stroke:s,strokeWidth:n?Number(t)*24/Number(e):t,className:W_("lucide",i),...!a&&!a5(c)&&{"aria-hidden":"true"},...c},[...l.map(([h,f])=>w.createElement(h,f)),...Array.isArray(a)?a:[a]]));const Le=(s,e)=>{const t=w.forwardRef(({className:n,...i},a)=>w.createElement(l5,{ref:a,iconNode:e,className:W_(`lucide-${i5(l1(s))}`,`lucide-${s}`,n),...i}));return t.displayName=l1(s),t};const c5=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],u5=Le("archive",c5);const d5=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],h5=Le("bell",d5);const f5=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],p5=Le("bold",f5);const m5=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],g5=Le("building-2",m5);const y5=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],v5=Le("calendar",y5);const b5=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],gv=Le("check",b5);const x5=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Lh=Le("chevron-down",x5);const w5=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],S5=Le("chevron-left",w5);const A5=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],K_=Le("chevron-right",A5);const C5=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Q_=Le("chevron-up",C5);const E5=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],_5=Le("chevrons-up-down",E5);const T5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],R5=Le("circle-alert",T5);const N5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Mo=Le("circle-check",N5);const M5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ny=Le("circle-x",M5);const D5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],k5=Le("circle",D5);const j5=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_o=Le("clock",j5);const O5=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],P5=Le("download",O5);const L5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],c1=Le("file-check",L5);const I5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gs=Le("file-text",I5);const F5=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M11 18h2",key:"12mj7e"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M9 13v-.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v.5",key:"qbrxap"}]],B5=Le("file-type",F5);const z5=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],U5=Le("funnel",z5);const V5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],H5=Le("globe",V5);const $5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],G5=Le("history",$5);const q5=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],X5=Le("italic",q5);const Y5=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],W5=Le("link",Y5);const K5=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],Q5=Le("list-ordered",K5);const Z5=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],J5=Le("list",Z5);const e4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],t4=Le("log-out",e4);const n4=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],s4=Le("message-square",n4);const i4=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],r4=Le("move",i4);const a4=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],u1=Le("pen-tool",a4);const o4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Z_=Le("plus",o4);const l4=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],c4=Le("printer",l4);const u4=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ih=Le("search",u4);const d4=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],h4=Le("send",d4);const f4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],p4=Le("shield",f4);const m4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ig=Le("sparkles",m4);const g4=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],rg=Le("square-pen",g4);const y4=[["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-6 0c0 2 1 2 1 3.5V13",key:"i9gjdv"}],["path",{d:"M20 15.5a2.5 2.5 0 0 0-2.5-2.5h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1z",key:"1vzg3v"}],["path",{d:"M5 22h14",key:"ehvnwv"}]],v4=Le("stamp",y4);const b4=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],x4=Le("tag",b4);const w4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],J_=Le("trash-2",w4);const S4=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],A4=Le("trending-up",S4);const C4=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],E4=Le("upload",C4);const _4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],lc=Le("user",_4);const T4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ea=Le("users",T4);const R4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yr=Le("x",R4);function d1(s,e){if(typeof s=="function")return s(e);s!=null&&(s.current=e)}function Oi(...s){return e=>{let t=!1;const n=s.map(i=>{const a=d1(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():d1(s[i],null)}}}}function mt(...s){return w.useCallback(Oi(...s),s)}var N4=Symbol.for("react.lazy"),ph=Dy[" use ".trim().toString()];function M4(s){return typeof s=="object"&&s!==null&&"then"in s}function eT(s){return s!=null&&typeof s=="object"&&"$$typeof"in s&&s.$$typeof===N4&&"_payload"in s&&M4(s._payload)}function tT(s){const e=D4(s),t=w.forwardRef((n,i)=>{let{children:a,...l}=n;eT(a)&&typeof ph=="function"&&(a=ph(a._payload));const c=w.Children.toArray(a),d=c.find(j4);if(d){const h=d.props.children,f=c.map(m=>m===d?w.Children.count(h)>1?w.Children.only(null):w.isValidElement(h)?h.props.children:null:m);return g.jsx(e,{...l,ref:i,children:w.isValidElement(h)?w.cloneElement(h,void 0,f):null})}return g.jsx(e,{...l,ref:i,children:a})});return t.displayName=`${s}.Slot`,t}var nT=tT("Slot");function D4(s){const e=w.forwardRef((t,n)=>{let{children:i,...a}=t;if(eT(i)&&typeof ph=="function"&&(i=ph(i._payload)),w.isValidElement(i)){const l=P4(i),c=O4(a,i.props);return i.type!==w.Fragment&&(c.ref=n?Oi(n,l):l),w.cloneElement(i,c)}return w.Children.count(i)>1?w.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var k4=Symbol("radix.slottable");function j4(s){return w.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===k4}function O4(s,e){const t={...e};for(const n in e){const i=s[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?t[n]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[n]=i):n==="style"?t[n]={...i,...a}:n==="className"&&(t[n]=[i,a].filter(Boolean).join(" "))}return{...s,...t}}function P4(s){let e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}const h1=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,f1=Ko,yv=(s,e)=>t=>{var n;if(e?.variants==null)return f1(s,t?.class,t?.className);const{variants:i,defaultVariants:a}=e,l=Object.keys(i).map(h=>{const f=t?.[h],m=a?.[h];if(f===null)return null;const y=h1(f)||h1(m);return i[h][y]}),c=t&&Object.entries(t).reduce((h,f)=>{let[m,y]=f;return y===void 0||(h[m]=y),h},{}),d=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((h,f)=>{let{class:m,className:y,...x}=f;return Object.entries(x).every(A=>{let[S,C]=A;return Array.isArray(C)?C.includes({...a,...c}[S]):{...a,...c}[S]===C})?[...h,m,y]:h},[]);return f1(s,l,d,t?.class,t?.className)},L4=yv("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ue=w.forwardRef(({className:s,variant:e,size:t,asChild:n=!1,...i},a)=>{const l=n?nT:"button";return g.jsx(l,{className:Ve(L4({variant:e,size:t,className:s})),ref:a,...i})});Ue.displayName="Button";const p1=[{code:"ru",label:""},{code:"en",label:"English"},{code:"uz",label:"O'zbek"}];function I4(){const{i18n:s}=ei(),[e,t]=w.useState(!1),n=w.useRef(null),i=a=>{s.changeLanguage(a),localStorage.setItem("i18nextLng",a),t(!1)};return w.useEffect(()=>{const a=l=>{n.current&&!n.current.contains(l.target)&&t(!1)};return e&&document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[e]),g.jsxs("div",{className:"relative",ref:n,children:[g.jsxs("button",{onClick:()=>t(!e),className:"flex items-center gap-2 px-3 py-2 text-sm text-muted-foreground hover:text-foreground hover:bg-muted rounded-lg transition-colors",children:[g.jsx(H5,{className:"w-4 h-4"}),g.jsx("span",{className:"hidden md:inline",children:p1.find(a=>a.code===s.language)?.label||""})]}),e&&g.jsx("div",{className:"absolute right-0 top-full mt-1 w-40 bg-white border rounded-lg shadow-lg z-20 py-1",children:p1.map(a=>g.jsx("button",{onClick:()=>i(a.code),className:Ve("w-full text-left px-4 py-2 text-sm hover:bg-muted transition-colors",s.language===a.code&&"bg-primary/10 text-primary font-medium"),children:a.label},a.code))})]})}class F4{baseURL;constructor(){this.baseURL=window.location.origin}async call(e,t){const n=await fetch(`${this.baseURL}/api/method/${e}`,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":this.getCSRFToken()},body:JSON.stringify(t||{})});if(!n.ok)throw new Error(`API call failed: ${n.statusText}`);return(await n.json()).message}async getDocuments(e){return this.call("edo.edo.doctype.edo_document.edo_document.get_portal_documents",e||{})}async getDocument(e){const t=await fetch(`${this.baseURL}/api/method/edo.edo.doctype.edo_document.edo_document.get_document`,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":this.getCSRFToken()},body:JSON.stringify({name:e})});if(!t.ok)throw new Error(`Failed to fetch document: ${t.statusText}`);return(await t.json()).message}async getCurrentUser(){const e=await fetch(`${this.baseURL}/api/method/frappe.auth.get_logged_user`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!e.ok)throw new Error(`Failed to get user: ${e.statusText}`);const n=(await e.json()).message,i=await fetch(`${this.baseURL}/api/resource/User/${n}`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!i.ok)return{name:n,full_name:n,email:n};const a=await i.json();let l=[];try{l=await this.call("edo.edo.doctype.edo_document.edo_document.get_user_roles")}catch(c){console.warn("Failed to get user roles:",c)}return{name:a.data.name,full_name:a.data.full_name||a.data.name,email:a.data.email,user_image:a.data.user_image,roles:l}}async logout(){await fetch(`${this.baseURL}/api/method/logout`,{method:"POST",headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}}),window.location.href="/login"}async getComments(e,t){return this.call("edo.edo.doctype.edo_document.edo_document.get_comments",{doctype:e,docname:t})}async addComment(e,t,n){return this.call("edo.edo.doctype.edo_document.edo_document.add_comment",{doctype:e,docname:t,content:n})}async deleteComment(e){return this.call("edo.edo.doctype.edo_document.edo_document.delete_comment",{comment_name:e})}async getCorrespondents(){const e=await fetch(`${this.baseURL}/api/resource/EDO Correspondent?fields=["name","correspondent_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!e.ok)throw new Error("Failed to fetch correspondents");return(await e.json()).data}async getDocumentTypes(){const e=await fetch(`${this.baseURL}/api/resource/EDO Document Type?fields=["name","document_type_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!e.ok)throw new Error("Failed to fetch document types");return(await e.json()).data}async getPriorities(){const e=await fetch(`${this.baseURL}/api/resource/EDO Priority?fields=["name","priority_name","weight"]&limit_page_length=999&order_by=weight desc`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!e.ok)throw new Error("Failed to fetch priorities");return(await e.json()).data}async getStatuses(){const e=await fetch(`${this.baseURL}/api/resource/EDO Status?fields=["name","status_name","color"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!e.ok)throw new Error("Failed to fetch statuses");return(await e.json()).data}async getClassifications(){const e=await fetch(`${this.baseURL}/api/resource/EDO Classification?fields=["name","classification_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!e.ok)throw new Error("Failed to fetch classifications");return(await e.json()).data}async getDeliveryMethods(){const e=await fetch(`${this.baseURL}/api/resource/EDO Delivery Method?fields=["name","delivery_method_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!e.ok)throw new Error("Failed to fetch delivery methods");return(await e.json()).data}async getUsers(){return this.call("edo.edo.doctype.edo_document.edo_document.get_users_list")}async getReceptionOffices(){const e=await fetch(`${this.baseURL}/api/resource/EDO Reception Office?fields=["name","reception_office_name"]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!e.ok)throw new Error("Failed to fetch reception offices");return(await e.json()).data}async createDocument(e){return this.call("edo.edo.doctype.edo_document.edo_document.create_document",e)}async updateDocument(e,t){return this.call("edo.edo.doctype.edo_document.edo_document.update_document",{name:e,...t})}async canEditDocument(){return this.call("edo.edo.doctype.edo_document.edo_document.can_edit_document")}async directorApproveDocument(e,t){return this.call("edo.edo.doctype.edo_document.edo_document.director_approve_document",{name:e,comment:t})}async directorRejectDocument(e,t){return this.call("edo.edo.doctype.edo_document.edo_document.director_reject_document",{name:e,comment:t})}async executorSignDocument(e,t){return this.call("edo.edo.doctype.edo_document.edo_document.executor_sign_document",{name:e,comment:t})}async canDirectorApprove(){return this.call("edo.edo.doctype.edo_document.edo_document.can_director_approve")}async canExecutorSign(e){return this.call("edo.edo.doctype.edo_document.edo_document.can_executor_sign",{name:e})}async uploadFile(e){const t=new FormData;t.append("file",e),t.append("is_private","0");const n=await fetch(`${this.baseURL}/api/method/upload_file`,{method:"POST",headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()},body:t});if(!n.ok)throw new Error("Failed to upload file");return(await n.json()).message.file_url}async getStamps(){return this.call("edo.edo.doctype.edo_document.edo_document.get_stamps")}async getStampPreview(e,t){return this.call("edo.edo.doctype.edo_stamp.edo_stamp.get_stamp_preview",{stamp_name:e,document_name:t})}async getPdfInfo(e){return this.call("edo.edo.doctype.edo_document.edo_document.get_pdf_info",{document_name:e})}async applyStamps(e,t){return this.call("edo.edo.doctype.edo_document.edo_document.apply_stamps_to_pdf",{document_name:e,stamps:JSON.stringify(t)})}async canReceptionSubmit(){return this.call("edo.edo.doctype.edo_document.edo_document.can_reception_submit")}async receptionSubmitToDirector(e,t,n,i,a){return this.call("edo.edo.doctype.edo_document.edo_document.reception_submit_to_director",{name:e,resolution:t,resolution_text:n,executor:i,co_executors:a?JSON.stringify(a):void 0})}async getResolutions(){const e=await fetch(`${this.baseURL}/api/resource/EDO Resolution?fields=["name","resolution_name","resolution_text","is_active"]&filters=[["is_active","=",1]]&limit_page_length=999`,{headers:{"X-Frappe-CSRF-Token":this.getCSRFToken()}});if(!e.ok)throw new Error("Failed to fetch resolutions");return(await e.json()).data}getCSRFToken(){return document.cookie.split("; ").find(t=>t.startsWith("csrf_token="))?.split("=")[1]||""}}const ke=new F4,B4=yv("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function sy({className:s,variant:e="default",asChild:t=!1,...n}){const i=t?nT:"span";return g.jsx(i,{"data-slot":"badge","data-variant":e,className:Ve(B4({variant:e}),s),...n})}function Te(s,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(s?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function z4(s,e){const t=w.createContext(e),n=a=>{const{children:l,...c}=a,d=w.useMemo(()=>c,Object.values(c));return g.jsx(t.Provider,{value:d,children:l})};n.displayName=s+"Provider";function i(a){const l=w.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${s}\``)}return[n,i]}function wa(s,e=[]){let t=[];function n(a,l){const c=w.createContext(l),d=t.length;t=[...t,l];const h=m=>{const{scope:y,children:x,...A}=m,S=y?.[s]?.[d]||c,C=w.useMemo(()=>A,Object.values(A));return g.jsx(S.Provider,{value:C,children:x})};h.displayName=a+"Provider";function f(m,y){const x=y?.[s]?.[d]||c,A=w.useContext(x);if(A)return A;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${a}\``)}return[h,f]}const i=()=>{const a=t.map(l=>w.createContext(l));return function(c){const d=c?.[s]||a;return w.useMemo(()=>({[`__scope${s}`]:{...c,[s]:d}}),[c,d])}};return i.scopeName=s,[n,U4(i,...e)]}function U4(...s){const e=s[0];if(s.length===1)return e;const t=()=>{const n=s.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const l=n.reduce((c,{useScope:d,scopeName:h})=>{const m=d(a)[`__scope${h}`];return{...c,...m}},{});return w.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}var pn=globalThis?.document?w.useLayoutEffect:()=>{},V4=Dy[" useInsertionEffect ".trim().toString()]||pn;function Mc({prop:s,defaultProp:e,onChange:t=()=>{},caller:n}){const[i,a,l]=H4({defaultProp:e,onChange:t}),c=s!==void 0,d=c?s:i;{const f=w.useRef(s!==void 0);w.useEffect(()=>{const m=f.current;m!==c&&console.warn(`${n} is changing from ${m?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=c},[c,n])}const h=w.useCallback(f=>{if(c){const m=$4(f)?f(s):f;m!==s&&l.current?.(m)}else a(f)},[c,s,a,l]);return[d,h]}function H4({defaultProp:s,onChange:e}){const[t,n]=w.useState(s),i=w.useRef(t),a=w.useRef(e);return V4(()=>{a.current=e},[e]),w.useEffect(()=>{i.current!==t&&(a.current?.(t),i.current=t)},[t,i]),[t,n,a]}function $4(s){return typeof s=="function"}function G4(s){const e=q4(s),t=w.forwardRef((n,i)=>{const{children:a,...l}=n,c=w.Children.toArray(a),d=c.find(Y4);if(d){const h=d.props.children,f=c.map(m=>m===d?w.Children.count(h)>1?w.Children.only(null):w.isValidElement(h)?h.props.children:null:m);return g.jsx(e,{...l,ref:i,children:w.isValidElement(h)?w.cloneElement(h,void 0,f):null})}return g.jsx(e,{...l,ref:i,children:a})});return t.displayName=`${s}.Slot`,t}function q4(s){const e=w.forwardRef((t,n)=>{const{children:i,...a}=t;if(w.isValidElement(i)){const l=K4(i),c=W4(a,i.props);return i.type!==w.Fragment&&(c.ref=n?Oi(n,l):l),w.cloneElement(i,c)}return w.Children.count(i)>1?w.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var X4=Symbol("radix.slottable");function Y4(s){return w.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===X4}function W4(s,e){const t={...e};for(const n in e){const i=s[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?t[n]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[n]=i):n==="style"?t[n]={...i,...a}:n==="className"&&(t[n]=[i,a].filter(Boolean).join(" "))}return{...s,...t}}function K4(s){let e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var Q4=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],et=Q4.reduce((s,e)=>{const t=G4(`Primitive.${e}`),n=w.forwardRef((i,a)=>{const{asChild:l,...c}=i,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(d,{...c,ref:a})});return n.displayName=`Primitive.${e}`,{...s,[e]:n}},{});function sT(s,e){s&&$c.flushSync(()=>s.dispatchEvent(e))}function m1(s){const e=Z4(s),t=w.forwardRef((n,i)=>{const{children:a,...l}=n,c=w.Children.toArray(a),d=c.find(ez);if(d){const h=d.props.children,f=c.map(m=>m===d?w.Children.count(h)>1?w.Children.only(null):w.isValidElement(h)?h.props.children:null:m);return g.jsx(e,{...l,ref:i,children:w.isValidElement(h)?w.cloneElement(h,void 0,f):null})}return g.jsx(e,{...l,ref:i,children:a})});return t.displayName=`${s}.Slot`,t}function Z4(s){const e=w.forwardRef((t,n)=>{const{children:i,...a}=t;if(w.isValidElement(i)){const l=nz(i),c=tz(a,i.props);return i.type!==w.Fragment&&(c.ref=n?Oi(n,l):l),w.cloneElement(i,c)}return w.Children.count(i)>1?w.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var J4=Symbol("radix.slottable");function ez(s){return w.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===J4}function tz(s,e){const t={...e};for(const n in e){const i=s[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?t[n]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[n]=i):n==="style"?t[n]={...i,...a}:n==="className"&&(t[n]=[i,a].filter(Boolean).join(" "))}return{...s,...t}}function nz(s){let e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}function vv(s){const e=s+"CollectionProvider",[t,n]=wa(e),[i,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),l=S=>{const{scope:C,children:E}=S,_=lr.useRef(null),R=lr.useRef(new Map).current;return g.jsx(i,{scope:C,itemMap:R,collectionRef:_,children:E})};l.displayName=e;const c=s+"CollectionSlot",d=m1(c),h=lr.forwardRef((S,C)=>{const{scope:E,children:_}=S,R=a(c,E),N=mt(C,R.collectionRef);return g.jsx(d,{ref:N,children:_})});h.displayName=c;const f=s+"CollectionItemSlot",m="data-radix-collection-item",y=m1(f),x=lr.forwardRef((S,C)=>{const{scope:E,children:_,...R}=S,N=lr.useRef(null),M=mt(C,N),j=a(f,E);return lr.useEffect(()=>(j.itemMap.set(N,{ref:N,...R}),()=>{j.itemMap.delete(N)})),g.jsx(y,{[m]:"",ref:M,children:_})});x.displayName=f;function A(S){const C=a(s+"CollectionConsumer",S);return lr.useCallback(()=>{const _=C.collectionRef.current;if(!_)return[];const R=Array.from(_.querySelectorAll(`[${m}]`));return Array.from(C.itemMap.values()).sort((j,D)=>R.indexOf(j.ref.current)-R.indexOf(D.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:l,Slot:h,ItemSlot:x},A,n]}var sz=w.createContext(void 0);function bv(s){const e=w.useContext(sz);return s||e||"ltr"}function Zs(s){const e=w.useRef(s);return w.useEffect(()=>{e.current=s}),w.useMemo(()=>(...t)=>e.current?.(...t),[])}function iz(s,e=globalThis?.document){const t=Zs(s);w.useEffect(()=>{const n=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var rz="DismissableLayer",iy="dismissableLayer.update",az="dismissableLayer.pointerDownOutside",oz="dismissableLayer.focusOutside",g1,iT=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Fh=w.forwardRef((s,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:l,onDismiss:c,...d}=s,h=w.useContext(iT),[f,m]=w.useState(null),y=f?.ownerDocument??globalThis?.document,[,x]=w.useState({}),A=mt(e,D=>m(D)),S=Array.from(h.layers),[C]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),E=S.indexOf(C),_=f?S.indexOf(f):-1,R=h.layersWithOutsidePointerEventsDisabled.size>0,N=_>=E,M=uz(D=>{const O=D.target,I=[...h.branches].some(U=>U.contains(O));!N||I||(i?.(D),l?.(D),D.defaultPrevented||c?.())},y),j=dz(D=>{const O=D.target;[...h.branches].some(U=>U.contains(O))||(a?.(D),l?.(D),D.defaultPrevented||c?.())},y);return iz(D=>{_===h.layers.size-1&&(n?.(D),!D.defaultPrevented&&c&&(D.preventDefault(),c()))},y),w.useEffect(()=>{if(f)return t&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(g1=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),y1(),()=>{t&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=g1)}},[f,y,t,h]),w.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),y1())},[f,h]),w.useEffect(()=>{const D=()=>x({});return document.addEventListener(iy,D),()=>document.removeEventListener(iy,D)},[]),g.jsx(et.div,{...d,ref:A,style:{pointerEvents:R?N?"auto":"none":void 0,...s.style},onFocusCapture:Te(s.onFocusCapture,j.onFocusCapture),onBlurCapture:Te(s.onBlurCapture,j.onBlurCapture),onPointerDownCapture:Te(s.onPointerDownCapture,M.onPointerDownCapture)})});Fh.displayName=rz;var lz="DismissableLayerBranch",cz=w.forwardRef((s,e)=>{const t=w.useContext(iT),n=w.useRef(null),i=mt(e,n);return w.useEffect(()=>{const a=n.current;if(a)return t.branches.add(a),()=>{t.branches.delete(a)}},[t.branches]),g.jsx(et.div,{...s,ref:i})});cz.displayName=lz;function uz(s,e=globalThis?.document){const t=Zs(s),n=w.useRef(!1),i=w.useRef(()=>{});return w.useEffect(()=>{const a=c=>{if(c.target&&!n.current){let d=function(){rT(az,t,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=d,e.addEventListener("click",i.current,{once:!0})):d()}else e.removeEventListener("click",i.current);n.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function dz(s,e=globalThis?.document){const t=Zs(s),n=w.useRef(!1);return w.useEffect(()=>{const i=a=>{a.target&&!n.current&&rT(oz,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function y1(){const s=new CustomEvent(iy);document.dispatchEvent(s)}function rT(s,e,t,{discrete:n}){const i=t.originalEvent.target,a=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(s,e,{once:!0}),n?sT(i,a):i.dispatchEvent(a)}var ag=0;function xv(){w.useEffect(()=>{const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",s[0]??v1()),document.body.insertAdjacentElement("beforeend",s[1]??v1()),ag++,()=>{ag===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ag--}},[])}function v1(){const s=document.createElement("span");return s.setAttribute("data-radix-focus-guard",""),s.tabIndex=0,s.style.outline="none",s.style.opacity="0",s.style.position="fixed",s.style.pointerEvents="none",s}var og="focusScope.autoFocusOnMount",lg="focusScope.autoFocusOnUnmount",b1={bubbles:!1,cancelable:!0},hz="FocusScope",Bh=w.forwardRef((s,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...l}=s,[c,d]=w.useState(null),h=Zs(i),f=Zs(a),m=w.useRef(null),y=mt(e,S=>d(S)),x=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(n){let S=function(R){if(x.paused||!c)return;const N=R.target;c.contains(N)?m.current=N:ur(m.current,{select:!0})},C=function(R){if(x.paused||!c)return;const N=R.relatedTarget;N!==null&&(c.contains(N)||ur(m.current,{select:!0}))},E=function(R){if(document.activeElement===document.body)for(const M of R)M.removedNodes.length>0&&ur(c)};document.addEventListener("focusin",S),document.addEventListener("focusout",C);const _=new MutationObserver(E);return c&&_.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",C),_.disconnect()}}},[n,c,x.paused]),w.useEffect(()=>{if(c){w1.add(x);const S=document.activeElement;if(!c.contains(S)){const E=new CustomEvent(og,b1);c.addEventListener(og,h),c.dispatchEvent(E),E.defaultPrevented||(fz(vz(aT(c)),{select:!0}),document.activeElement===S&&ur(c))}return()=>{c.removeEventListener(og,h),setTimeout(()=>{const E=new CustomEvent(lg,b1);c.addEventListener(lg,f),c.dispatchEvent(E),E.defaultPrevented||ur(S??document.body,{select:!0}),c.removeEventListener(lg,f),w1.remove(x)},0)}}},[c,h,f,x]);const A=w.useCallback(S=>{if(!t&&!n||x.paused)return;const C=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,E=document.activeElement;if(C&&E){const _=S.currentTarget,[R,N]=pz(_);R&&N?!S.shiftKey&&E===N?(S.preventDefault(),t&&ur(R,{select:!0})):S.shiftKey&&E===R&&(S.preventDefault(),t&&ur(N,{select:!0})):E===_&&S.preventDefault()}},[t,n,x.paused]);return g.jsx(et.div,{tabIndex:-1,...l,ref:y,onKeyDown:A})});Bh.displayName=hz;function fz(s,{select:e=!1}={}){const t=document.activeElement;for(const n of s)if(ur(n,{select:e}),document.activeElement!==t)return}function pz(s){const e=aT(s),t=x1(e,s),n=x1(e.reverse(),s);return[t,n]}function aT(s){const e=[],t=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function x1(s,e){for(const t of s)if(!mz(t,{upTo:e}))return t}function mz(s,{upTo:e}){if(getComputedStyle(s).visibility==="hidden")return!0;for(;s;){if(e!==void 0&&s===e)return!1;if(getComputedStyle(s).display==="none")return!0;s=s.parentElement}return!1}function gz(s){return s instanceof HTMLInputElement&&"select"in s}function ur(s,{select:e=!1}={}){if(s&&s.focus){const t=document.activeElement;s.focus({preventScroll:!0}),s!==t&&gz(s)&&e&&s.select()}}var w1=yz();function yz(){let s=[];return{add(e){const t=s[0];e!==t&&t?.pause(),s=S1(s,e),s.unshift(e)},remove(e){s=S1(s,e),s[0]?.resume()}}}function S1(s,e){const t=[...s],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function vz(s){return s.filter(e=>e.tagName!=="A")}var bz=Dy[" useId ".trim().toString()]||(()=>{}),xz=0;function _i(s){const[e,t]=w.useState(bz());return pn(()=>{t(n=>n??String(xz++))},[s]),e?`radix-${e}`:""}const wz=["top","right","bottom","left"],Sr=Math.min,Kn=Math.max,mh=Math.round,Nd=Math.floor,Ks=s=>({x:s,y:s}),Sz={left:"right",right:"left",bottom:"top",top:"bottom"},Az={start:"end",end:"start"};function ry(s,e,t){return Kn(s,Sr(e,t))}function Ni(s,e){return typeof s=="function"?s(e):s}function Mi(s){return s.split("-")[0]}function Jo(s){return s.split("-")[1]}function wv(s){return s==="x"?"y":"x"}function Sv(s){return s==="y"?"height":"width"}const Cz=new Set(["top","bottom"]);function Ys(s){return Cz.has(Mi(s))?"y":"x"}function Av(s){return wv(Ys(s))}function Ez(s,e,t){t===void 0&&(t=!1);const n=Jo(s),i=Av(s),a=Sv(i);let l=i==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(l=gh(l)),[l,gh(l)]}function _z(s){const e=gh(s);return[ay(s),e,ay(e)]}function ay(s){return s.replace(/start|end/g,e=>Az[e])}const A1=["left","right"],C1=["right","left"],Tz=["top","bottom"],Rz=["bottom","top"];function Nz(s,e,t){switch(s){case"top":case"bottom":return t?e?C1:A1:e?A1:C1;case"left":case"right":return e?Tz:Rz;default:return[]}}function Mz(s,e,t,n){const i=Jo(s);let a=Nz(Mi(s),t==="start",n);return i&&(a=a.map(l=>l+"-"+i),e&&(a=a.concat(a.map(ay)))),a}function gh(s){return s.replace(/left|right|bottom|top/g,e=>Sz[e])}function Dz(s){return{top:0,right:0,bottom:0,left:0,...s}}function oT(s){return typeof s!="number"?Dz(s):{top:s,right:s,bottom:s,left:s}}function yh(s){const{x:e,y:t,width:n,height:i}=s;return{width:n,height:i,top:t,left:e,right:e+n,bottom:t+i,x:e,y:t}}function E1(s,e,t){let{reference:n,floating:i}=s;const a=Ys(e),l=Av(e),c=Sv(l),d=Mi(e),h=a==="y",f=n.x+n.width/2-i.width/2,m=n.y+n.height/2-i.height/2,y=n[c]/2-i[c]/2;let x;switch(d){case"top":x={x:f,y:n.y-i.height};break;case"bottom":x={x:f,y:n.y+n.height};break;case"right":x={x:n.x+n.width,y:m};break;case"left":x={x:n.x-i.width,y:m};break;default:x={x:n.x,y:n.y}}switch(Jo(e)){case"start":x[l]-=y*(t&&h?-1:1);break;case"end":x[l]+=y*(t&&h?-1:1);break}return x}const kz=async(s,e,t)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:l}=t,c=a.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(e));let h=await l.getElementRects({reference:s,floating:e,strategy:i}),{x:f,y:m}=E1(h,n,d),y=n,x={},A=0;for(let S=0;S<c.length;S++){const{name:C,fn:E}=c[S],{x:_,y:R,data:N,reset:M}=await E({x:f,y:m,initialPlacement:n,placement:y,strategy:i,middlewareData:x,rects:h,platform:l,elements:{reference:s,floating:e}});f=_??f,m=R??m,x={...x,[C]:{...x[C],...N}},M&&A<=50&&(A++,typeof M=="object"&&(M.placement&&(y=M.placement),M.rects&&(h=M.rects===!0?await l.getElementRects({reference:s,floating:e,strategy:i}):M.rects),{x:f,y:m}=E1(h,y,d)),S=-1)}return{x:f,y:m,placement:y,strategy:i,middlewareData:x}};async function Dc(s,e){var t;e===void 0&&(e={});const{x:n,y:i,platform:a,rects:l,elements:c,strategy:d}=s,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:y=!1,padding:x=0}=Ni(e,s),A=oT(x),C=c[y?m==="floating"?"reference":"floating":m],E=yh(await a.getClippingRect({element:(t=await(a.isElement==null?void 0:a.isElement(C)))==null||t?C:C.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:h,rootBoundary:f,strategy:d})),_=m==="floating"?{x:n,y:i,width:l.floating.width,height:l.floating.height}:l.reference,R=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),N=await(a.isElement==null?void 0:a.isElement(R))?await(a.getScale==null?void 0:a.getScale(R))||{x:1,y:1}:{x:1,y:1},M=yh(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:_,offsetParent:R,strategy:d}):_);return{top:(E.top-M.top+A.top)/N.y,bottom:(M.bottom-E.bottom+A.bottom)/N.y,left:(E.left-M.left+A.left)/N.x,right:(M.right-E.right+A.right)/N.x}}const jz=s=>({name:"arrow",options:s,async fn(e){const{x:t,y:n,placement:i,rects:a,platform:l,elements:c,middlewareData:d}=e,{element:h,padding:f=0}=Ni(s,e)||{};if(h==null)return{};const m=oT(f),y={x:t,y:n},x=Av(i),A=Sv(x),S=await l.getDimensions(h),C=x==="y",E=C?"top":"left",_=C?"bottom":"right",R=C?"clientHeight":"clientWidth",N=a.reference[A]+a.reference[x]-y[x]-a.floating[A],M=y[x]-a.reference[x],j=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let D=j?j[R]:0;(!D||!await(l.isElement==null?void 0:l.isElement(j)))&&(D=c.floating[R]||a.floating[A]);const O=N/2-M/2,I=D/2-S[A]/2-1,U=Sr(m[E],I),$=Sr(m[_],I),J=U,ie=D-S[A]-$,X=D/2-S[A]/2+O,ae=ry(J,X,ie),P=!d.arrow&&Jo(i)!=null&&X!==ae&&a.reference[A]/2-(X<J?U:$)-S[A]/2<0,F=P?X<J?X-J:X-ie:0;return{[x]:y[x]+F,data:{[x]:ae,centerOffset:X-ae-F,...P&&{alignmentOffset:F}},reset:P}}}),Oz=function(s){return s===void 0&&(s={}),{name:"flip",options:s,async fn(e){var t,n;const{placement:i,middlewareData:a,rects:l,initialPlacement:c,platform:d,elements:h}=e,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:y,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:A="none",flipAlignment:S=!0,...C}=Ni(s,e);if((t=a.arrow)!=null&&t.alignmentOffset)return{};const E=Mi(i),_=Ys(c),R=Mi(c)===c,N=await(d.isRTL==null?void 0:d.isRTL(h.floating)),M=y||(R||!S?[gh(c)]:_z(c)),j=A!=="none";!y&&j&&M.push(...Mz(c,S,A,N));const D=[c,...M],O=await Dc(e,C),I=[];let U=((n=a.flip)==null?void 0:n.overflows)||[];if(f&&I.push(O[E]),m){const X=Ez(i,l,N);I.push(O[X[0]],O[X[1]])}if(U=[...U,{placement:i,overflows:I}],!I.every(X=>X<=0)){var $,J;const X=((($=a.flip)==null?void 0:$.index)||0)+1,ae=D[X];if(ae&&(!(m==="alignment"?_!==Ys(ae):!1)||U.every(B=>Ys(B.placement)===_?B.overflows[0]>0:!0)))return{data:{index:X,overflows:U},reset:{placement:ae}};let P=(J=U.filter(F=>F.overflows[0]<=0).sort((F,B)=>F.overflows[1]-B.overflows[1])[0])==null?void 0:J.placement;if(!P)switch(x){case"bestFit":{var ie;const F=(ie=U.filter(B=>{if(j){const V=Ys(B.placement);return V===_||V==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(V=>V>0).reduce((V,de)=>V+de,0)]).sort((B,V)=>B[1]-V[1])[0])==null?void 0:ie[0];F&&(P=F);break}case"initialPlacement":P=c;break}if(i!==P)return{reset:{placement:P}}}return{}}}};function _1(s,e){return{top:s.top-e.height,right:s.right-e.width,bottom:s.bottom-e.height,left:s.left-e.width}}function T1(s){return wz.some(e=>s[e]>=0)}const Pz=function(s){return s===void 0&&(s={}),{name:"hide",options:s,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...i}=Ni(s,e);switch(n){case"referenceHidden":{const a=await Dc(e,{...i,elementContext:"reference"}),l=_1(a,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:T1(l)}}}case"escaped":{const a=await Dc(e,{...i,altBoundary:!0}),l=_1(a,t.floating);return{data:{escapedOffsets:l,escaped:T1(l)}}}default:return{}}}}},lT=new Set(["left","top"]);async function Lz(s,e){const{placement:t,platform:n,elements:i}=s,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),l=Mi(t),c=Jo(t),d=Ys(t)==="y",h=lT.has(l)?-1:1,f=a&&d?-1:1,m=Ni(e,s);let{mainAxis:y,crossAxis:x,alignmentAxis:A}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return c&&typeof A=="number"&&(x=c==="end"?A*-1:A),d?{x:x*f,y:y*h}:{x:y*h,y:x*f}}const Iz=function(s){return s===void 0&&(s=0),{name:"offset",options:s,async fn(e){var t,n;const{x:i,y:a,placement:l,middlewareData:c}=e,d=await Lz(e,s);return l===((t=c.offset)==null?void 0:t.placement)&&(n=c.arrow)!=null&&n.alignmentOffset?{}:{x:i+d.x,y:a+d.y,data:{...d,placement:l}}}}},Fz=function(s){return s===void 0&&(s={}),{name:"shift",options:s,async fn(e){const{x:t,y:n,placement:i}=e,{mainAxis:a=!0,crossAxis:l=!1,limiter:c={fn:C=>{let{x:E,y:_}=C;return{x:E,y:_}}},...d}=Ni(s,e),h={x:t,y:n},f=await Dc(e,d),m=Ys(Mi(i)),y=wv(m);let x=h[y],A=h[m];if(a){const C=y==="y"?"top":"left",E=y==="y"?"bottom":"right",_=x+f[C],R=x-f[E];x=ry(_,x,R)}if(l){const C=m==="y"?"top":"left",E=m==="y"?"bottom":"right",_=A+f[C],R=A-f[E];A=ry(_,A,R)}const S=c.fn({...e,[y]:x,[m]:A});return{...S,data:{x:S.x-t,y:S.y-n,enabled:{[y]:a,[m]:l}}}}}},Bz=function(s){return s===void 0&&(s={}),{options:s,fn(e){const{x:t,y:n,placement:i,rects:a,middlewareData:l}=e,{offset:c=0,mainAxis:d=!0,crossAxis:h=!0}=Ni(s,e),f={x:t,y:n},m=Ys(i),y=wv(m);let x=f[y],A=f[m];const S=Ni(c,e),C=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(d){const R=y==="y"?"height":"width",N=a.reference[y]-a.floating[R]+C.mainAxis,M=a.reference[y]+a.reference[R]-C.mainAxis;x<N?x=N:x>M&&(x=M)}if(h){var E,_;const R=y==="y"?"width":"height",N=lT.has(Mi(i)),M=a.reference[m]-a.floating[R]+(N&&((E=l.offset)==null?void 0:E[m])||0)+(N?0:C.crossAxis),j=a.reference[m]+a.reference[R]+(N?0:((_=l.offset)==null?void 0:_[m])||0)-(N?C.crossAxis:0);A<M?A=M:A>j&&(A=j)}return{[y]:x,[m]:A}}}},zz=function(s){return s===void 0&&(s={}),{name:"size",options:s,async fn(e){var t,n;const{placement:i,rects:a,platform:l,elements:c}=e,{apply:d=()=>{},...h}=Ni(s,e),f=await Dc(e,h),m=Mi(i),y=Jo(i),x=Ys(i)==="y",{width:A,height:S}=a.floating;let C,E;m==="top"||m==="bottom"?(C=m,E=y===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(E=m,C=y==="end"?"top":"bottom");const _=S-f.top-f.bottom,R=A-f.left-f.right,N=Sr(S-f[C],_),M=Sr(A-f[E],R),j=!e.middlewareData.shift;let D=N,O=M;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(O=R),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(D=_),j&&!y){const U=Kn(f.left,0),$=Kn(f.right,0),J=Kn(f.top,0),ie=Kn(f.bottom,0);x?O=A-2*(U!==0||$!==0?U+$:Kn(f.left,f.right)):D=S-2*(J!==0||ie!==0?J+ie:Kn(f.top,f.bottom))}await d({...e,availableWidth:O,availableHeight:D});const I=await l.getDimensions(c.floating);return A!==I.width||S!==I.height?{reset:{rects:!0}}:{}}}};function zh(){return typeof window<"u"}function el(s){return cT(s)?(s.nodeName||"").toLowerCase():"#document"}function Qn(s){var e;return(s==null||(e=s.ownerDocument)==null?void 0:e.defaultView)||window}function ti(s){var e;return(e=(cT(s)?s.ownerDocument:s.document)||window.document)==null?void 0:e.documentElement}function cT(s){return zh()?s instanceof Node||s instanceof Qn(s).Node:!1}function Rs(s){return zh()?s instanceof Element||s instanceof Qn(s).Element:!1}function Js(s){return zh()?s instanceof HTMLElement||s instanceof Qn(s).HTMLElement:!1}function R1(s){return!zh()||typeof ShadowRoot>"u"?!1:s instanceof ShadowRoot||s instanceof Qn(s).ShadowRoot}const Uz=new Set(["inline","contents"]);function Wc(s){const{overflow:e,overflowX:t,overflowY:n,display:i}=Ns(s);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!Uz.has(i)}const Vz=new Set(["table","td","th"]);function Hz(s){return Vz.has(el(s))}const $z=[":popover-open",":modal"];function Uh(s){return $z.some(e=>{try{return s.matches(e)}catch{return!1}})}const Gz=["transform","translate","scale","rotate","perspective"],qz=["transform","translate","scale","rotate","perspective","filter"],Xz=["paint","layout","strict","content"];function Cv(s){const e=Ev(),t=Rs(s)?Ns(s):s;return Gz.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||qz.some(n=>(t.willChange||"").includes(n))||Xz.some(n=>(t.contain||"").includes(n))}function Yz(s){let e=Ar(s);for(;Js(e)&&!Vo(e);){if(Cv(e))return e;if(Uh(e))return null;e=Ar(e)}return null}function Ev(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Wz=new Set(["html","body","#document"]);function Vo(s){return Wz.has(el(s))}function Ns(s){return Qn(s).getComputedStyle(s)}function Vh(s){return Rs(s)?{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}:{scrollLeft:s.scrollX,scrollTop:s.scrollY}}function Ar(s){if(el(s)==="html")return s;const e=s.assignedSlot||s.parentNode||R1(s)&&s.host||ti(s);return R1(e)?e.host:e}function uT(s){const e=Ar(s);return Vo(e)?s.ownerDocument?s.ownerDocument.body:s.body:Js(e)&&Wc(e)?e:uT(e)}function kc(s,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=uT(s),a=i===((n=s.ownerDocument)==null?void 0:n.body),l=Qn(i);if(a){const c=oy(l);return e.concat(l,l.visualViewport||[],Wc(i)?i:[],c&&t?kc(c):[])}return e.concat(i,kc(i,[],t))}function oy(s){return s.parent&&Object.getPrototypeOf(s.parent)?s.frameElement:null}function dT(s){const e=Ns(s);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Js(s),a=i?s.offsetWidth:t,l=i?s.offsetHeight:n,c=mh(t)!==a||mh(n)!==l;return c&&(t=a,n=l),{width:t,height:n,$:c}}function _v(s){return Rs(s)?s:s.contextElement}function Do(s){const e=_v(s);if(!Js(e))return Ks(1);const t=e.getBoundingClientRect(),{width:n,height:i,$:a}=dT(e);let l=(a?mh(t.width):t.width)/n,c=(a?mh(t.height):t.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const Kz=Ks(0);function hT(s){const e=Qn(s);return!Ev()||!e.visualViewport?Kz:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Qz(s,e,t){return e===void 0&&(e=!1),!t||e&&t!==Qn(s)?!1:e}function fa(s,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=s.getBoundingClientRect(),a=_v(s);let l=Ks(1);e&&(n?Rs(n)&&(l=Do(n)):l=Do(s));const c=Qz(a,t,n)?hT(a):Ks(0);let d=(i.left+c.x)/l.x,h=(i.top+c.y)/l.y,f=i.width/l.x,m=i.height/l.y;if(a){const y=Qn(a),x=n&&Rs(n)?Qn(n):n;let A=y,S=oy(A);for(;S&&n&&x!==A;){const C=Do(S),E=S.getBoundingClientRect(),_=Ns(S),R=E.left+(S.clientLeft+parseFloat(_.paddingLeft))*C.x,N=E.top+(S.clientTop+parseFloat(_.paddingTop))*C.y;d*=C.x,h*=C.y,f*=C.x,m*=C.y,d+=R,h+=N,A=Qn(S),S=oy(A)}}return yh({width:f,height:m,x:d,y:h})}function Hh(s,e){const t=Vh(s).scrollLeft;return e?e.left+t:fa(ti(s)).left+t}function fT(s,e){const t=s.getBoundingClientRect(),n=t.left+e.scrollLeft-Hh(s,t),i=t.top+e.scrollTop;return{x:n,y:i}}function Zz(s){let{elements:e,rect:t,offsetParent:n,strategy:i}=s;const a=i==="fixed",l=ti(n),c=e?Uh(e.floating):!1;if(n===l||c&&a)return t;let d={scrollLeft:0,scrollTop:0},h=Ks(1);const f=Ks(0),m=Js(n);if((m||!m&&!a)&&((el(n)!=="body"||Wc(l))&&(d=Vh(n)),Js(n))){const x=fa(n);h=Do(n),f.x=x.x+n.clientLeft,f.y=x.y+n.clientTop}const y=l&&!m&&!a?fT(l,d):Ks(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-d.scrollLeft*h.x+f.x+y.x,y:t.y*h.y-d.scrollTop*h.y+f.y+y.y}}function Jz(s){return Array.from(s.getClientRects())}function eU(s){const e=ti(s),t=Vh(s),n=s.ownerDocument.body,i=Kn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),a=Kn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let l=-t.scrollLeft+Hh(s);const c=-t.scrollTop;return Ns(n).direction==="rtl"&&(l+=Kn(e.clientWidth,n.clientWidth)-i),{width:i,height:a,x:l,y:c}}const N1=25;function tU(s,e){const t=Qn(s),n=ti(s),i=t.visualViewport;let a=n.clientWidth,l=n.clientHeight,c=0,d=0;if(i){a=i.width,l=i.height;const f=Ev();(!f||f&&e==="fixed")&&(c=i.offsetLeft,d=i.offsetTop)}const h=Hh(n);if(h<=0){const f=n.ownerDocument,m=f.body,y=getComputedStyle(m),x=f.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,A=Math.abs(n.clientWidth-m.clientWidth-x);A<=N1&&(a-=A)}else h<=N1&&(a+=h);return{width:a,height:l,x:c,y:d}}const nU=new Set(["absolute","fixed"]);function sU(s,e){const t=fa(s,!0,e==="fixed"),n=t.top+s.clientTop,i=t.left+s.clientLeft,a=Js(s)?Do(s):Ks(1),l=s.clientWidth*a.x,c=s.clientHeight*a.y,d=i*a.x,h=n*a.y;return{width:l,height:c,x:d,y:h}}function M1(s,e,t){let n;if(e==="viewport")n=tU(s,t);else if(e==="document")n=eU(ti(s));else if(Rs(e))n=sU(e,t);else{const i=hT(s);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return yh(n)}function pT(s,e){const t=Ar(s);return t===e||!Rs(t)||Vo(t)?!1:Ns(t).position==="fixed"||pT(t,e)}function iU(s,e){const t=e.get(s);if(t)return t;let n=kc(s,[],!1).filter(c=>Rs(c)&&el(c)!=="body"),i=null;const a=Ns(s).position==="fixed";let l=a?Ar(s):s;for(;Rs(l)&&!Vo(l);){const c=Ns(l),d=Cv(l);!d&&c.position==="fixed"&&(i=null),(a?!d&&!i:!d&&c.position==="static"&&!!i&&nU.has(i.position)||Wc(l)&&!d&&pT(s,l))?n=n.filter(f=>f!==l):i=c,l=Ar(l)}return e.set(s,n),n}function rU(s){let{element:e,boundary:t,rootBoundary:n,strategy:i}=s;const l=[...t==="clippingAncestors"?Uh(e)?[]:iU(e,this._c):[].concat(t),n],c=l[0],d=l.reduce((h,f)=>{const m=M1(e,f,i);return h.top=Kn(m.top,h.top),h.right=Sr(m.right,h.right),h.bottom=Sr(m.bottom,h.bottom),h.left=Kn(m.left,h.left),h},M1(e,c,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function aU(s){const{width:e,height:t}=dT(s);return{width:e,height:t}}function oU(s,e,t){const n=Js(e),i=ti(e),a=t==="fixed",l=fa(s,!0,a,e);let c={scrollLeft:0,scrollTop:0};const d=Ks(0);function h(){d.x=Hh(i)}if(n||!n&&!a)if((el(e)!=="body"||Wc(i))&&(c=Vh(e)),n){const x=fa(e,!0,a,e);d.x=x.x+e.clientLeft,d.y=x.y+e.clientTop}else i&&h();a&&!n&&i&&h();const f=i&&!n&&!a?fT(i,c):Ks(0),m=l.left+c.scrollLeft-d.x-f.x,y=l.top+c.scrollTop-d.y-f.y;return{x:m,y,width:l.width,height:l.height}}function cg(s){return Ns(s).position==="static"}function D1(s,e){if(!Js(s)||Ns(s).position==="fixed")return null;if(e)return e(s);let t=s.offsetParent;return ti(s)===t&&(t=t.ownerDocument.body),t}function mT(s,e){const t=Qn(s);if(Uh(s))return t;if(!Js(s)){let i=Ar(s);for(;i&&!Vo(i);){if(Rs(i)&&!cg(i))return i;i=Ar(i)}return t}let n=D1(s,e);for(;n&&Hz(n)&&cg(n);)n=D1(n,e);return n&&Vo(n)&&cg(n)&&!Cv(n)?t:n||Yz(s)||t}const lU=async function(s){const e=this.getOffsetParent||mT,t=this.getDimensions,n=await t(s.floating);return{reference:oU(s.reference,await e(s.floating),s.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function cU(s){return Ns(s).direction==="rtl"}const uU={convertOffsetParentRelativeRectToViewportRelativeRect:Zz,getDocumentElement:ti,getClippingRect:rU,getOffsetParent:mT,getElementRects:lU,getClientRects:Jz,getDimensions:aU,getScale:Do,isElement:Rs,isRTL:cU};function gT(s,e){return s.x===e.x&&s.y===e.y&&s.width===e.width&&s.height===e.height}function dU(s,e){let t=null,n;const i=ti(s);function a(){var c;clearTimeout(n),(c=t)==null||c.disconnect(),t=null}function l(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),a();const h=s.getBoundingClientRect(),{left:f,top:m,width:y,height:x}=h;if(c||e(),!y||!x)return;const A=Nd(m),S=Nd(i.clientWidth-(f+y)),C=Nd(i.clientHeight-(m+x)),E=Nd(f),R={rootMargin:-A+"px "+-S+"px "+-C+"px "+-E+"px",threshold:Kn(0,Sr(1,d))||1};let N=!0;function M(j){const D=j[0].intersectionRatio;if(D!==d){if(!N)return l();D?l(!1,D):n=setTimeout(()=>{l(!1,1e-7)},1e3)}D===1&&!gT(h,s.getBoundingClientRect())&&l(),N=!1}try{t=new IntersectionObserver(M,{...R,root:i.ownerDocument})}catch{t=new IntersectionObserver(M,R)}t.observe(s)}return l(!0),a}function hU(s,e,t,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=n,h=_v(s),f=i||a?[...h?kc(h):[],...kc(e)]:[];f.forEach(E=>{i&&E.addEventListener("scroll",t,{passive:!0}),a&&E.addEventListener("resize",t)});const m=h&&c?dU(h,t):null;let y=-1,x=null;l&&(x=new ResizeObserver(E=>{let[_]=E;_&&_.target===h&&x&&(x.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var R;(R=x)==null||R.observe(e)})),t()}),h&&!d&&x.observe(h),x.observe(e));let A,S=d?fa(s):null;d&&C();function C(){const E=fa(s);S&&!gT(S,E)&&t(),S=E,A=requestAnimationFrame(C)}return t(),()=>{var E;f.forEach(_=>{i&&_.removeEventListener("scroll",t),a&&_.removeEventListener("resize",t)}),m?.(),(E=x)==null||E.disconnect(),x=null,d&&cancelAnimationFrame(A)}}const fU=Iz,pU=Fz,mU=Oz,gU=zz,yU=Pz,k1=jz,vU=Bz,bU=(s,e,t)=>{const n=new Map,i={platform:uU,...t},a={...i.platform,_c:n};return kz(s,e,{...i,platform:a})};var xU=typeof document<"u",wU=function(){},Qd=xU?w.useLayoutEffect:wU;function vh(s,e){if(s===e)return!0;if(typeof s!=typeof e)return!1;if(typeof s=="function"&&s.toString()===e.toString())return!0;let t,n,i;if(s&&e&&typeof s=="object"){if(Array.isArray(s)){if(t=s.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!vh(s[n],e[n]))return!1;return!0}if(i=Object.keys(s),t=i.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=t;n--!==0;){const a=i[n];if(!(a==="_owner"&&s.$$typeof)&&!vh(s[a],e[a]))return!1}return!0}return s!==s&&e!==e}function yT(s){return typeof window>"u"?1:(s.ownerDocument.defaultView||window).devicePixelRatio||1}function j1(s,e){const t=yT(s);return Math.round(e*t)/t}function ug(s){const e=w.useRef(s);return Qd(()=>{e.current=s}),e}function SU(s){s===void 0&&(s={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:l}={},transform:c=!0,whileElementsMounted:d,open:h}=s,[f,m]=w.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[y,x]=w.useState(n);vh(y,n)||x(n);const[A,S]=w.useState(null),[C,E]=w.useState(null),_=w.useCallback(B=>{B!==j.current&&(j.current=B,S(B))},[]),R=w.useCallback(B=>{B!==D.current&&(D.current=B,E(B))},[]),N=a||A,M=l||C,j=w.useRef(null),D=w.useRef(null),O=w.useRef(f),I=d!=null,U=ug(d),$=ug(i),J=ug(h),ie=w.useCallback(()=>{if(!j.current||!D.current)return;const B={placement:e,strategy:t,middleware:y};$.current&&(B.platform=$.current),bU(j.current,D.current,B).then(V=>{const de={...V,isPositioned:J.current!==!1};X.current&&!vh(O.current,de)&&(O.current=de,$c.flushSync(()=>{m(de)}))})},[y,e,t,$,J]);Qd(()=>{h===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,m(B=>({...B,isPositioned:!1})))},[h]);const X=w.useRef(!1);Qd(()=>(X.current=!0,()=>{X.current=!1}),[]),Qd(()=>{if(N&&(j.current=N),M&&(D.current=M),N&&M){if(U.current)return U.current(N,M,ie);ie()}},[N,M,ie,U,I]);const ae=w.useMemo(()=>({reference:j,floating:D,setReference:_,setFloating:R}),[_,R]),P=w.useMemo(()=>({reference:N,floating:M}),[N,M]),F=w.useMemo(()=>{const B={position:t,left:0,top:0};if(!P.floating)return B;const V=j1(P.floating,f.x),de=j1(P.floating,f.y);return c?{...B,transform:"translate("+V+"px, "+de+"px)",...yT(P.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:V,top:de}},[t,c,P.floating,f.x,f.y]);return w.useMemo(()=>({...f,update:ie,refs:ae,elements:P,floatingStyles:F}),[f,ie,ae,P,F])}const AU=s=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:s,fn(t){const{element:n,padding:i}=typeof s=="function"?s(t):s;return n&&e(n)?n.current!=null?k1({element:n.current,padding:i}).fn(t):{}:n?k1({element:n,padding:i}).fn(t):{}}}},CU=(s,e)=>({...fU(s),options:[s,e]}),EU=(s,e)=>({...pU(s),options:[s,e]}),_U=(s,e)=>({...vU(s),options:[s,e]}),TU=(s,e)=>({...mU(s),options:[s,e]}),RU=(s,e)=>({...gU(s),options:[s,e]}),NU=(s,e)=>({...yU(s),options:[s,e]}),MU=(s,e)=>({...AU(s),options:[s,e]});var DU="Arrow",vT=w.forwardRef((s,e)=>{const{children:t,width:n=10,height:i=5,...a}=s;return g.jsx(et.svg,{...a,ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:s.asChild?t:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});vT.displayName=DU;var kU=vT;function jU(s){const[e,t]=w.useState(void 0);return pn(()=>{if(s){t({width:s.offsetWidth,height:s.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let l,c;if("borderBoxSize"in a){const d=a.borderBoxSize,h=Array.isArray(d)?d[0]:d;l=h.inlineSize,c=h.blockSize}else l=s.offsetWidth,c=s.offsetHeight;t({width:l,height:c})});return n.observe(s,{box:"border-box"}),()=>n.unobserve(s)}else t(void 0)},[s]),e}var Tv="Popper",[bT,$h]=wa(Tv),[OU,xT]=bT(Tv),wT=s=>{const{__scopePopper:e,children:t}=s,[n,i]=w.useState(null);return g.jsx(OU,{scope:e,anchor:n,onAnchorChange:i,children:t})};wT.displayName=Tv;var ST="PopperAnchor",AT=w.forwardRef((s,e)=>{const{__scopePopper:t,virtualRef:n,...i}=s,a=xT(ST,t),l=w.useRef(null),c=mt(e,l),d=w.useRef(null);return w.useEffect(()=>{const h=d.current;d.current=n?.current||l.current,h!==d.current&&a.onAnchorChange(d.current)}),n?null:g.jsx(et.div,{...i,ref:c})});AT.displayName=ST;var Rv="PopperContent",[PU,LU]=bT(Rv),CT=w.forwardRef((s,e)=>{const{__scopePopper:t,side:n="bottom",sideOffset:i=0,align:a="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:y=!1,updatePositionStrategy:x="optimized",onPlaced:A,...S}=s,C=xT(Rv,t),[E,_]=w.useState(null),R=mt(e,Q=>_(Q)),[N,M]=w.useState(null),j=jU(N),D=j?.width??0,O=j?.height??0,I=n+(a!=="center"?"-"+a:""),U=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},$=Array.isArray(h)?h:[h],J=$.length>0,ie={padding:U,boundary:$.filter(FU),altBoundary:J},{refs:X,floatingStyles:ae,placement:P,isPositioned:F,middlewareData:B}=SU({strategy:"fixed",placement:I,whileElementsMounted:(...Q)=>hU(...Q,{animationFrame:x==="always"}),elements:{reference:C.anchor},middleware:[CU({mainAxis:i+O,alignmentAxis:l}),d&&EU({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?_U():void 0,...ie}),d&&TU({...ie}),RU({...ie,apply:({elements:Q,rects:ye,availableWidth:ve,availableHeight:Re})=>{const{width:Y,height:ue}=ye.reference,fe=Q.floating.style;fe.setProperty("--radix-popper-available-width",`${ve}px`),fe.setProperty("--radix-popper-available-height",`${Re}px`),fe.setProperty("--radix-popper-anchor-width",`${Y}px`),fe.setProperty("--radix-popper-anchor-height",`${ue}px`)}}),N&&MU({element:N,padding:c}),BU({arrowWidth:D,arrowHeight:O}),y&&NU({strategy:"referenceHidden",...ie})]}),[V,de]=TT(P),L=Zs(A);pn(()=>{F&&L?.()},[F,L]);const q=B.arrow?.x,te=B.arrow?.y,oe=B.arrow?.centerOffset!==0,[pe,se]=w.useState();return pn(()=>{E&&se(window.getComputedStyle(E).zIndex)},[E]),g.jsx("div",{ref:X.setFloating,"data-radix-popper-content-wrapper":"",style:{...ae,transform:F?ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:pe,"--radix-popper-transform-origin":[B.transformOrigin?.x,B.transformOrigin?.y].join(" "),...B.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:s.dir,children:g.jsx(PU,{scope:t,placedSide:V,onArrowChange:M,arrowX:q,arrowY:te,shouldHideArrow:oe,children:g.jsx(et.div,{"data-side":V,"data-align":de,...S,ref:R,style:{...S.style,animation:F?void 0:"none"}})})})});CT.displayName=Rv;var ET="PopperArrow",IU={top:"bottom",right:"left",bottom:"top",left:"right"},_T=w.forwardRef(function(e,t){const{__scopePopper:n,...i}=e,a=LU(ET,n),l=IU[a.placedSide];return g.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:g.jsx(kU,{...i,ref:t,style:{...i.style,display:"block"}})})});_T.displayName=ET;function FU(s){return s!==null}var BU=s=>({name:"transformOrigin",options:s,fn(e){const{placement:t,rects:n,middlewareData:i}=e,l=i.arrow?.centerOffset!==0,c=l?0:s.arrowWidth,d=l?0:s.arrowHeight,[h,f]=TT(t),m={start:"0%",center:"50%",end:"100%"}[f],y=(i.arrow?.x??0)+c/2,x=(i.arrow?.y??0)+d/2;let A="",S="";return h==="bottom"?(A=l?m:`${y}px`,S=`${-d}px`):h==="top"?(A=l?m:`${y}px`,S=`${n.floating.height+d}px`):h==="right"?(A=`${-d}px`,S=l?m:`${x}px`):h==="left"&&(A=`${n.floating.width+d}px`,S=l?m:`${x}px`),{data:{x:A,y:S}}}});function TT(s){const[e,t="center"]=s.split("-");return[e,t]}var RT=wT,NT=AT,MT=CT,DT=_T,zU="Portal",Gh=w.forwardRef((s,e)=>{const{container:t,...n}=s,[i,a]=w.useState(!1);pn(()=>a(!0),[]);const l=t||i&&globalThis?.document?.body;return l?EP.createPortal(g.jsx(et.div,{...n,ref:e}),l):null});Gh.displayName=zU;function UU(s,e){return w.useReducer((t,n)=>e[t][n]??t,s)}var Tr=s=>{const{present:e,children:t}=s,n=VU(e),i=typeof t=="function"?t({present:n.isPresent}):w.Children.only(t),a=mt(n.ref,HU(i));return typeof t=="function"||n.isPresent?w.cloneElement(i,{ref:a}):null};Tr.displayName="Presence";function VU(s){const[e,t]=w.useState(),n=w.useRef(null),i=w.useRef(s),a=w.useRef("none"),l=s?"mounted":"unmounted",[c,d]=UU(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const h=Md(n.current);a.current=c==="mounted"?h:"none"},[c]),pn(()=>{const h=n.current,f=i.current;if(f!==s){const y=a.current,x=Md(h);s?d("MOUNT"):x==="none"||h?.display==="none"?d("UNMOUNT"):d(f&&y!==x?"ANIMATION_OUT":"UNMOUNT"),i.current=s}},[s,d]),pn(()=>{if(e){let h;const f=e.ownerDocument.defaultView??window,m=x=>{const S=Md(n.current).includes(CSS.escape(x.animationName));if(x.target===e&&S&&(d("ANIMATION_END"),!i.current)){const C=e.style.animationFillMode;e.style.animationFillMode="forwards",h=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=C)})}},y=x=>{x.target===e&&(a.current=Md(n.current))};return e.addEventListener("animationstart",y),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{f.clearTimeout(h),e.removeEventListener("animationstart",y),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:w.useCallback(h=>{n.current=h?getComputedStyle(h):null,t(h)},[])}}function Md(s){return s?.animationName||"none"}function HU(s){let e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var dg="rovingFocusGroup.onEntryFocus",$U={bubbles:!1,cancelable:!0},Kc="RovingFocusGroup",[ly,kT,GU]=vv(Kc),[qU,jT]=wa(Kc,[GU]),[XU,YU]=qU(Kc),OT=w.forwardRef((s,e)=>g.jsx(ly.Provider,{scope:s.__scopeRovingFocusGroup,children:g.jsx(ly.Slot,{scope:s.__scopeRovingFocusGroup,children:g.jsx(WU,{...s,ref:e})})}));OT.displayName=Kc;var WU=w.forwardRef((s,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:i=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...m}=s,y=w.useRef(null),x=mt(e,y),A=bv(a),[S,C]=Mc({prop:l,defaultProp:c??null,onChange:d,caller:Kc}),[E,_]=w.useState(!1),R=Zs(h),N=kT(t),M=w.useRef(!1),[j,D]=w.useState(0);return w.useEffect(()=>{const O=y.current;if(O)return O.addEventListener(dg,R),()=>O.removeEventListener(dg,R)},[R]),g.jsx(XU,{scope:t,orientation:n,dir:A,loop:i,currentTabStopId:S,onItemFocus:w.useCallback(O=>C(O),[C]),onItemShiftTab:w.useCallback(()=>_(!0),[]),onFocusableItemAdd:w.useCallback(()=>D(O=>O+1),[]),onFocusableItemRemove:w.useCallback(()=>D(O=>O-1),[]),children:g.jsx(et.div,{tabIndex:E||j===0?-1:0,"data-orientation":n,...m,ref:x,style:{outline:"none",...s.style},onMouseDown:Te(s.onMouseDown,()=>{M.current=!0}),onFocus:Te(s.onFocus,O=>{const I=!M.current;if(O.target===O.currentTarget&&I&&!E){const U=new CustomEvent(dg,$U);if(O.currentTarget.dispatchEvent(U),!U.defaultPrevented){const $=N().filter(P=>P.focusable),J=$.find(P=>P.active),ie=$.find(P=>P.id===S),ae=[J,ie,...$].filter(Boolean).map(P=>P.ref.current);IT(ae,f)}}M.current=!1}),onBlur:Te(s.onBlur,()=>_(!1))})})}),PT="RovingFocusGroupItem",LT=w.forwardRef((s,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:i=!1,tabStopId:a,children:l,...c}=s,d=_i(),h=a||d,f=YU(PT,t),m=f.currentTabStopId===h,y=kT(t),{onFocusableItemAdd:x,onFocusableItemRemove:A,currentTabStopId:S}=f;return w.useEffect(()=>{if(n)return x(),()=>A()},[n,x,A]),g.jsx(ly.ItemSlot,{scope:t,id:h,focusable:n,active:i,children:g.jsx(et.span,{tabIndex:m?0:-1,"data-orientation":f.orientation,...c,ref:e,onMouseDown:Te(s.onMouseDown,C=>{n?f.onItemFocus(h):C.preventDefault()}),onFocus:Te(s.onFocus,()=>f.onItemFocus(h)),onKeyDown:Te(s.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey){f.onItemShiftTab();return}if(C.target!==C.currentTarget)return;const E=ZU(C,f.orientation,f.dir);if(E!==void 0){if(C.metaKey||C.ctrlKey||C.altKey||C.shiftKey)return;C.preventDefault();let R=y().filter(N=>N.focusable).map(N=>N.ref.current);if(E==="last")R.reverse();else if(E==="prev"||E==="next"){E==="prev"&&R.reverse();const N=R.indexOf(C.currentTarget);R=f.loop?JU(R,N+1):R.slice(N+1)}setTimeout(()=>IT(R))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:S!=null}):l})})});LT.displayName=PT;var KU={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function QU(s,e){return e!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function ZU(s,e,t){const n=QU(s.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return KU[n]}function IT(s,e=!1){const t=document.activeElement;for(const n of s)if(n===t||(n.focus({preventScroll:e}),document.activeElement!==t))return}function JU(s,e){return s.map((t,n)=>s[(e+n)%s.length])}var eV=OT,tV=LT;function nV(s){const e=sV(s),t=w.forwardRef((n,i)=>{const{children:a,...l}=n,c=w.Children.toArray(a),d=c.find(rV);if(d){const h=d.props.children,f=c.map(m=>m===d?w.Children.count(h)>1?w.Children.only(null):w.isValidElement(h)?h.props.children:null:m);return g.jsx(e,{...l,ref:i,children:w.isValidElement(h)?w.cloneElement(h,void 0,f):null})}return g.jsx(e,{...l,ref:i,children:a})});return t.displayName=`${s}.Slot`,t}function sV(s){const e=w.forwardRef((t,n)=>{const{children:i,...a}=t;if(w.isValidElement(i)){const l=oV(i),c=aV(a,i.props);return i.type!==w.Fragment&&(c.ref=n?Oi(n,l):l),w.cloneElement(i,c)}return w.Children.count(i)>1?w.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var iV=Symbol("radix.slottable");function rV(s){return w.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===iV}function aV(s,e){const t={...e};for(const n in e){const i=s[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?t[n]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[n]=i):n==="style"?t[n]={...i,...a}:n==="className"&&(t[n]=[i,a].filter(Boolean).join(" "))}return{...s,...t}}function oV(s){let e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var lV=function(s){if(typeof document>"u")return null;var e=Array.isArray(s)?s[0]:s;return e.ownerDocument.body},po=new WeakMap,Dd=new WeakMap,kd={},hg=0,FT=function(s){return s&&(s.host||FT(s.parentNode))},cV=function(s,e){return e.map(function(t){if(s.contains(t))return t;var n=FT(t);return n&&s.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",s,". Doing nothing"),null)}).filter(function(t){return!!t})},uV=function(s,e,t,n){var i=cV(e,Array.isArray(s)?s:[s]);kd[t]||(kd[t]=new WeakMap);var a=kd[t],l=[],c=new Set,d=new Set(i),h=function(m){!m||c.has(m)||(c.add(m),h(m.parentNode))};i.forEach(h);var f=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(y){if(c.has(y))f(y);else try{var x=y.getAttribute(n),A=x!==null&&x!=="false",S=(po.get(y)||0)+1,C=(a.get(y)||0)+1;po.set(y,S),a.set(y,C),l.push(y),S===1&&A&&Dd.set(y,!0),C===1&&y.setAttribute(t,"true"),A||y.setAttribute(n,"true")}catch(E){console.error("aria-hidden: cannot operate on ",y,E)}})};return f(e),c.clear(),hg++,function(){l.forEach(function(m){var y=po.get(m)-1,x=a.get(m)-1;po.set(m,y),a.set(m,x),y||(Dd.has(m)||m.removeAttribute(n),Dd.delete(m)),x||m.removeAttribute(t)}),hg--,hg||(po=new WeakMap,po=new WeakMap,Dd=new WeakMap,kd={})}},Nv=function(s,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(s)?s:[s]),i=lV(s);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),uV(n,i,t,"aria-hidden")):function(){return null}},Gs=function(){return Gs=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Gs.apply(this,arguments)};function BT(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(t[n[i]]=s[n[i]]);return t}function dV(s,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return s.concat(a||Array.prototype.slice.call(e))}var Zd="right-scroll-bar-position",Jd="width-before-scroll-bar",hV="with-scroll-bars-hidden",fV="--removed-body-scroll-bar-size";function fg(s,e){return typeof s=="function"?s(e):s&&(s.current=e),s}function pV(s,e){var t=w.useState(function(){return{value:s,callback:e,facade:{get current(){return t.value},set current(n){var i=t.value;i!==n&&(t.value=n,t.callback(n,i))}}}})[0];return t.callback=e,t.facade}var mV=typeof window<"u"?w.useLayoutEffect:w.useEffect,O1=new WeakMap;function gV(s,e){var t=pV(null,function(n){return s.forEach(function(i){return fg(i,n)})});return mV(function(){var n=O1.get(t);if(n){var i=new Set(n),a=new Set(s),l=t.current;i.forEach(function(c){a.has(c)||fg(c,null)}),a.forEach(function(c){i.has(c)||fg(c,l)})}O1.set(t,s)},[s]),t}function yV(s){return s}function vV(s,e){e===void 0&&(e=yV);var t=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:s},useMedium:function(a){var l=e(a,n);return t.push(l),function(){t=t.filter(function(c){return c!==l})}},assignSyncMedium:function(a){for(n=!0;t.length;){var l=t;t=[],l.forEach(a)}t={push:function(c){return a(c)},filter:function(){return t}}},assignMedium:function(a){n=!0;var l=[];if(t.length){var c=t;t=[],c.forEach(a),l=t}var d=function(){var f=l;l=[],f.forEach(a)},h=function(){return Promise.resolve().then(d)};h(),t={push:function(f){l.push(f),h()},filter:function(f){return l=l.filter(f),t}}}};return i}function bV(s){s===void 0&&(s={});var e=vV(null);return e.options=Gs({async:!0,ssr:!1},s),e}var zT=function(s){var e=s.sideCar,t=BT(s,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return w.createElement(n,Gs({},t))};zT.isSideCarExport=!0;function xV(s,e){return s.useMedium(e),zT}var UT=bV(),pg=function(){},qh=w.forwardRef(function(s,e){var t=w.useRef(null),n=w.useState({onScrollCapture:pg,onWheelCapture:pg,onTouchMoveCapture:pg}),i=n[0],a=n[1],l=s.forwardProps,c=s.children,d=s.className,h=s.removeScrollBar,f=s.enabled,m=s.shards,y=s.sideCar,x=s.noRelative,A=s.noIsolation,S=s.inert,C=s.allowPinchZoom,E=s.as,_=E===void 0?"div":E,R=s.gapMode,N=BT(s,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),M=y,j=gV([t,e]),D=Gs(Gs({},N),i);return w.createElement(w.Fragment,null,f&&w.createElement(M,{sideCar:UT,removeScrollBar:h,shards:m,noRelative:x,noIsolation:A,inert:S,setCallbacks:a,allowPinchZoom:!!C,lockRef:t,gapMode:R}),l?w.cloneElement(w.Children.only(c),Gs(Gs({},D),{ref:j})):w.createElement(_,Gs({},D,{className:d,ref:j}),c))});qh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};qh.classNames={fullWidth:Jd,zeroRight:Zd};var wV=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function SV(){if(!document)return null;var s=document.createElement("style");s.type="text/css";var e=wV();return e&&s.setAttribute("nonce",e),s}function AV(s,e){s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}function CV(s){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(s)}var EV=function(){var s=0,e=null;return{add:function(t){s==0&&(e=SV())&&(AV(e,t),CV(e)),s++},remove:function(){s--,!s&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},_V=function(){var s=EV();return function(e,t){w.useEffect(function(){return s.add(e),function(){s.remove()}},[e&&t])}},VT=function(){var s=_V(),e=function(t){var n=t.styles,i=t.dynamic;return s(n,i),null};return e},TV={left:0,top:0,right:0,gap:0},mg=function(s){return parseInt(s||"",10)||0},RV=function(s){var e=window.getComputedStyle(document.body),t=e[s==="padding"?"paddingLeft":"marginLeft"],n=e[s==="padding"?"paddingTop":"marginTop"],i=e[s==="padding"?"paddingRight":"marginRight"];return[mg(t),mg(n),mg(i)]},NV=function(s){if(s===void 0&&(s="margin"),typeof window>"u")return TV;var e=RV(s),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},MV=VT(),ko="data-scroll-locked",DV=function(s,e,t,n){var i=s.left,a=s.top,l=s.right,c=s.gap;return t===void 0&&(t="margin"),`
  .`.concat(hV,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body[`).concat(ko,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Zd,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Jd,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(Zd," .").concat(Zd,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Jd," .").concat(Jd,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(ko,`] {
    `).concat(fV,": ").concat(c,`px;
  }
`)},P1=function(){var s=parseInt(document.body.getAttribute(ko)||"0",10);return isFinite(s)?s:0},kV=function(){w.useEffect(function(){return document.body.setAttribute(ko,(P1()+1).toString()),function(){var s=P1()-1;s<=0?document.body.removeAttribute(ko):document.body.setAttribute(ko,s.toString())}},[])},jV=function(s){var e=s.noRelative,t=s.noImportant,n=s.gapMode,i=n===void 0?"margin":n;kV();var a=w.useMemo(function(){return NV(i)},[i]);return w.createElement(MV,{styles:DV(a,!e,i,t?"":"!important")})},cy=!1;if(typeof window<"u")try{var jd=Object.defineProperty({},"passive",{get:function(){return cy=!0,!0}});window.addEventListener("test",jd,jd),window.removeEventListener("test",jd,jd)}catch{cy=!1}var mo=cy?{passive:!1}:!1,OV=function(s){return s.tagName==="TEXTAREA"},HT=function(s,e){if(!(s instanceof Element))return!1;var t=window.getComputedStyle(s);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!OV(s)&&t[e]==="visible")},PV=function(s){return HT(s,"overflowY")},LV=function(s){return HT(s,"overflowX")},L1=function(s,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=$T(s,n);if(i){var a=GT(s,n),l=a[1],c=a[2];if(l>c)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},IV=function(s){var e=s.scrollTop,t=s.scrollHeight,n=s.clientHeight;return[e,t,n]},FV=function(s){var e=s.scrollLeft,t=s.scrollWidth,n=s.clientWidth;return[e,t,n]},$T=function(s,e){return s==="v"?PV(e):LV(e)},GT=function(s,e){return s==="v"?IV(e):FV(e)},BV=function(s,e){return s==="h"&&e==="rtl"?-1:1},zV=function(s,e,t,n,i){var a=BV(s,window.getComputedStyle(e).direction),l=a*n,c=t.target,d=e.contains(c),h=!1,f=l>0,m=0,y=0;do{if(!c)break;var x=GT(s,c),A=x[0],S=x[1],C=x[2],E=S-C-a*A;(A||E)&&$T(s,c)&&(m+=E,y+=A);var _=c.parentNode;c=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!d&&c!==document.body||d&&(e.contains(c)||e===c));return(f&&Math.abs(m)<1||!f&&Math.abs(y)<1)&&(h=!0),h},Od=function(s){return"changedTouches"in s?[s.changedTouches[0].clientX,s.changedTouches[0].clientY]:[0,0]},I1=function(s){return[s.deltaX,s.deltaY]},F1=function(s){return s&&"current"in s?s.current:s},UV=function(s,e){return s[0]===e[0]&&s[1]===e[1]},VV=function(s){return`
  .block-interactivity-`.concat(s,` {pointer-events: none;}
  .allow-interactivity-`).concat(s,` {pointer-events: all;}
`)},HV=0,go=[];function $V(s){var e=w.useRef([]),t=w.useRef([0,0]),n=w.useRef(),i=w.useState(HV++)[0],a=w.useState(VT)[0],l=w.useRef(s);w.useEffect(function(){l.current=s},[s]),w.useEffect(function(){if(s.inert){document.body.classList.add("block-interactivity-".concat(i));var S=dV([s.lockRef.current],(s.shards||[]).map(F1),!0).filter(Boolean);return S.forEach(function(C){return C.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),S.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(i))})}}},[s.inert,s.lockRef.current,s.shards]);var c=w.useCallback(function(S,C){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!l.current.allowPinchZoom;var E=Od(S),_=t.current,R="deltaX"in S?S.deltaX:_[0]-E[0],N="deltaY"in S?S.deltaY:_[1]-E[1],M,j=S.target,D=Math.abs(R)>Math.abs(N)?"h":"v";if("touches"in S&&D==="h"&&j.type==="range")return!1;var O=window.getSelection(),I=O&&O.anchorNode,U=I?I===j||I.contains(j):!1;if(U)return!1;var $=L1(D,j);if(!$)return!0;if($?M=D:(M=D==="v"?"h":"v",$=L1(D,j)),!$)return!1;if(!n.current&&"changedTouches"in S&&(R||N)&&(n.current=M),!M)return!0;var J=n.current||M;return zV(J,C,S,J==="h"?R:N)},[]),d=w.useCallback(function(S){var C=S;if(!(!go.length||go[go.length-1]!==a)){var E="deltaY"in C?I1(C):Od(C),_=e.current.filter(function(M){return M.name===C.type&&(M.target===C.target||C.target===M.shadowParent)&&UV(M.delta,E)})[0];if(_&&_.should){C.cancelable&&C.preventDefault();return}if(!_){var R=(l.current.shards||[]).map(F1).filter(Boolean).filter(function(M){return M.contains(C.target)}),N=R.length>0?c(C,R[0]):!l.current.noIsolation;N&&C.cancelable&&C.preventDefault()}}},[]),h=w.useCallback(function(S,C,E,_){var R={name:S,delta:C,target:E,should:_,shadowParent:GV(E)};e.current.push(R),setTimeout(function(){e.current=e.current.filter(function(N){return N!==R})},1)},[]),f=w.useCallback(function(S){t.current=Od(S),n.current=void 0},[]),m=w.useCallback(function(S){h(S.type,I1(S),S.target,c(S,s.lockRef.current))},[]),y=w.useCallback(function(S){h(S.type,Od(S),S.target,c(S,s.lockRef.current))},[]);w.useEffect(function(){return go.push(a),s.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:y}),document.addEventListener("wheel",d,mo),document.addEventListener("touchmove",d,mo),document.addEventListener("touchstart",f,mo),function(){go=go.filter(function(S){return S!==a}),document.removeEventListener("wheel",d,mo),document.removeEventListener("touchmove",d,mo),document.removeEventListener("touchstart",f,mo)}},[]);var x=s.removeScrollBar,A=s.inert;return w.createElement(w.Fragment,null,A?w.createElement(a,{styles:VV(i)}):null,x?w.createElement(jV,{noRelative:s.noRelative,gapMode:s.gapMode}):null)}function GV(s){for(var e=null;s!==null;)s instanceof ShadowRoot&&(e=s.host,s=s.host),s=s.parentNode;return e}const qV=xV(UT,$V);var Xh=w.forwardRef(function(s,e){return w.createElement(qh,Gs({},s,{ref:e,sideCar:qV}))});Xh.classNames=qh.classNames;var uy=["Enter"," "],XV=["ArrowDown","PageUp","Home"],qT=["ArrowUp","PageDown","End"],YV=[...XV,...qT],WV={ltr:[...uy,"ArrowRight"],rtl:[...uy,"ArrowLeft"]},KV={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Qc="Menu",[jc,QV,ZV]=vv(Qc),[Sa,XT]=wa(Qc,[ZV,$h,jT]),Yh=$h(),YT=jT(),[JV,Aa]=Sa(Qc),[eH,Zc]=Sa(Qc),WT=s=>{const{__scopeMenu:e,open:t=!1,children:n,dir:i,onOpenChange:a,modal:l=!0}=s,c=Yh(e),[d,h]=w.useState(null),f=w.useRef(!1),m=Zs(a),y=bv(i);return w.useEffect(()=>{const x=()=>{f.current=!0,document.addEventListener("pointerdown",A,{capture:!0,once:!0}),document.addEventListener("pointermove",A,{capture:!0,once:!0})},A=()=>f.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",A,{capture:!0}),document.removeEventListener("pointermove",A,{capture:!0})}},[]),g.jsx(RT,{...c,children:g.jsx(JV,{scope:e,open:t,onOpenChange:m,content:d,onContentChange:h,children:g.jsx(eH,{scope:e,onClose:w.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:f,dir:y,modal:l,children:n})})})};WT.displayName=Qc;var tH="MenuAnchor",Mv=w.forwardRef((s,e)=>{const{__scopeMenu:t,...n}=s,i=Yh(t);return g.jsx(NT,{...i,...n,ref:e})});Mv.displayName=tH;var Dv="MenuPortal",[nH,KT]=Sa(Dv,{forceMount:void 0}),QT=s=>{const{__scopeMenu:e,forceMount:t,children:n,container:i}=s,a=Aa(Dv,e);return g.jsx(nH,{scope:e,forceMount:t,children:g.jsx(Tr,{present:t||a.open,children:g.jsx(Gh,{asChild:!0,container:i,children:n})})})};QT.displayName=Dv;var vs="MenuContent",[sH,kv]=Sa(vs),ZT=w.forwardRef((s,e)=>{const t=KT(vs,s.__scopeMenu),{forceMount:n=t.forceMount,...i}=s,a=Aa(vs,s.__scopeMenu),l=Zc(vs,s.__scopeMenu);return g.jsx(jc.Provider,{scope:s.__scopeMenu,children:g.jsx(Tr,{present:n||a.open,children:g.jsx(jc.Slot,{scope:s.__scopeMenu,children:l.modal?g.jsx(iH,{...i,ref:e}):g.jsx(rH,{...i,ref:e})})})})}),iH=w.forwardRef((s,e)=>{const t=Aa(vs,s.__scopeMenu),n=w.useRef(null),i=mt(e,n);return w.useEffect(()=>{const a=n.current;if(a)return Nv(a)},[]),g.jsx(jv,{...s,ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Te(s.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),rH=w.forwardRef((s,e)=>{const t=Aa(vs,s.__scopeMenu);return g.jsx(jv,{...s,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),aH=nV("MenuContent.ScrollLock"),jv=w.forwardRef((s,e)=>{const{__scopeMenu:t,loop:n=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:c,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:y,onDismiss:x,disableOutsideScroll:A,...S}=s,C=Aa(vs,t),E=Zc(vs,t),_=Yh(t),R=YT(t),N=QV(t),[M,j]=w.useState(null),D=w.useRef(null),O=mt(e,D,C.onContentChange),I=w.useRef(0),U=w.useRef(""),$=w.useRef(0),J=w.useRef(null),ie=w.useRef("right"),X=w.useRef(0),ae=A?Xh:w.Fragment,P=A?{as:aH,allowPinchZoom:!0}:void 0,F=V=>{const de=U.current+V,L=N().filter(Q=>!Q.disabled),q=document.activeElement,te=L.find(Q=>Q.ref.current===q)?.textValue,oe=L.map(Q=>Q.textValue),pe=vH(oe,de,te),se=L.find(Q=>Q.textValue===pe)?.ref.current;(function Q(ye){U.current=ye,window.clearTimeout(I.current),ye!==""&&(I.current=window.setTimeout(()=>Q(""),1e3))})(de),se&&setTimeout(()=>se.focus())};w.useEffect(()=>()=>window.clearTimeout(I.current),[]),xv();const B=w.useCallback(V=>ie.current===J.current?.side&&xH(V,J.current?.area),[]);return g.jsx(sH,{scope:t,searchRef:U,onItemEnter:w.useCallback(V=>{B(V)&&V.preventDefault()},[B]),onItemLeave:w.useCallback(V=>{B(V)||(D.current?.focus(),j(null))},[B]),onTriggerLeave:w.useCallback(V=>{B(V)&&V.preventDefault()},[B]),pointerGraceTimerRef:$,onPointerGraceIntentChange:w.useCallback(V=>{J.current=V},[]),children:g.jsx(ae,{...P,children:g.jsx(Bh,{asChild:!0,trapped:i,onMountAutoFocus:Te(a,V=>{V.preventDefault(),D.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:g.jsx(Fh,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:h,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:y,onDismiss:x,children:g.jsx(eV,{asChild:!0,...R,dir:E.dir,orientation:"vertical",loop:n,currentTabStopId:M,onCurrentTabStopIdChange:j,onEntryFocus:Te(d,V=>{E.isUsingKeyboardRef.current||V.preventDefault()}),preventScrollOnEntryFocus:!0,children:g.jsx(MT,{role:"menu","aria-orientation":"vertical","data-state":pR(C.open),"data-radix-menu-content":"",dir:E.dir,..._,...S,ref:O,style:{outline:"none",...S.style},onKeyDown:Te(S.onKeyDown,V=>{const L=V.target.closest("[data-radix-menu-content]")===V.currentTarget,q=V.ctrlKey||V.altKey||V.metaKey,te=V.key.length===1;L&&(V.key==="Tab"&&V.preventDefault(),!q&&te&&F(V.key));const oe=D.current;if(V.target!==oe||!YV.includes(V.key))return;V.preventDefault();const se=N().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);qT.includes(V.key)&&se.reverse(),gH(se)}),onBlur:Te(s.onBlur,V=>{V.currentTarget.contains(V.target)||(window.clearTimeout(I.current),U.current="")}),onPointerMove:Te(s.onPointerMove,Oc(V=>{const de=V.target,L=X.current!==V.clientX;if(V.currentTarget.contains(de)&&L){const q=V.clientX>X.current?"right":"left";ie.current=q,X.current=V.clientX}}))})})})})})})});ZT.displayName=vs;var oH="MenuGroup",Ov=w.forwardRef((s,e)=>{const{__scopeMenu:t,...n}=s;return g.jsx(et.div,{role:"group",...n,ref:e})});Ov.displayName=oH;var lH="MenuLabel",JT=w.forwardRef((s,e)=>{const{__scopeMenu:t,...n}=s;return g.jsx(et.div,{...n,ref:e})});JT.displayName=lH;var bh="MenuItem",B1="menu.itemSelect",Wh=w.forwardRef((s,e)=>{const{disabled:t=!1,onSelect:n,...i}=s,a=w.useRef(null),l=Zc(bh,s.__scopeMenu),c=kv(bh,s.__scopeMenu),d=mt(e,a),h=w.useRef(!1),f=()=>{const m=a.current;if(!t&&m){const y=new CustomEvent(B1,{bubbles:!0,cancelable:!0});m.addEventListener(B1,x=>n?.(x),{once:!0}),sT(m,y),y.defaultPrevented?h.current=!1:l.onClose()}};return g.jsx(eR,{...i,ref:d,disabled:t,onClick:Te(s.onClick,f),onPointerDown:m=>{s.onPointerDown?.(m),h.current=!0},onPointerUp:Te(s.onPointerUp,m=>{h.current||m.currentTarget?.click()}),onKeyDown:Te(s.onKeyDown,m=>{const y=c.searchRef.current!=="";t||y&&m.key===" "||uy.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Wh.displayName=bh;var eR=w.forwardRef((s,e)=>{const{__scopeMenu:t,disabled:n=!1,textValue:i,...a}=s,l=kv(bh,t),c=YT(t),d=w.useRef(null),h=mt(e,d),[f,m]=w.useState(!1),[y,x]=w.useState("");return w.useEffect(()=>{const A=d.current;A&&x((A.textContent??"").trim())},[a.children]),g.jsx(jc.ItemSlot,{scope:t,disabled:n,textValue:i??y,children:g.jsx(tV,{asChild:!0,...c,focusable:!n,children:g.jsx(et.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:h,onPointerMove:Te(s.onPointerMove,Oc(A=>{n?l.onItemLeave(A):(l.onItemEnter(A),A.defaultPrevented||A.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Te(s.onPointerLeave,Oc(A=>l.onItemLeave(A))),onFocus:Te(s.onFocus,()=>m(!0)),onBlur:Te(s.onBlur,()=>m(!1))})})})}),cH="MenuCheckboxItem",tR=w.forwardRef((s,e)=>{const{checked:t=!1,onCheckedChange:n,...i}=s;return g.jsx(aR,{scope:s.__scopeMenu,checked:t,children:g.jsx(Wh,{role:"menuitemcheckbox","aria-checked":xh(t)?"mixed":t,...i,ref:e,"data-state":Lv(t),onSelect:Te(i.onSelect,()=>n?.(xh(t)?!0:!t),{checkForDefaultPrevented:!1})})})});tR.displayName=cH;var nR="MenuRadioGroup",[uH,dH]=Sa(nR,{value:void 0,onValueChange:()=>{}}),sR=w.forwardRef((s,e)=>{const{value:t,onValueChange:n,...i}=s,a=Zs(n);return g.jsx(uH,{scope:s.__scopeMenu,value:t,onValueChange:a,children:g.jsx(Ov,{...i,ref:e})})});sR.displayName=nR;var iR="MenuRadioItem",rR=w.forwardRef((s,e)=>{const{value:t,...n}=s,i=dH(iR,s.__scopeMenu),a=t===i.value;return g.jsx(aR,{scope:s.__scopeMenu,checked:a,children:g.jsx(Wh,{role:"menuitemradio","aria-checked":a,...n,ref:e,"data-state":Lv(a),onSelect:Te(n.onSelect,()=>i.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});rR.displayName=iR;var Pv="MenuItemIndicator",[aR,hH]=Sa(Pv,{checked:!1}),oR=w.forwardRef((s,e)=>{const{__scopeMenu:t,forceMount:n,...i}=s,a=hH(Pv,t);return g.jsx(Tr,{present:n||xh(a.checked)||a.checked===!0,children:g.jsx(et.span,{...i,ref:e,"data-state":Lv(a.checked)})})});oR.displayName=Pv;var fH="MenuSeparator",lR=w.forwardRef((s,e)=>{const{__scopeMenu:t,...n}=s;return g.jsx(et.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});lR.displayName=fH;var pH="MenuArrow",cR=w.forwardRef((s,e)=>{const{__scopeMenu:t,...n}=s,i=Yh(t);return g.jsx(DT,{...i,...n,ref:e})});cR.displayName=pH;var mH="MenuSub",[v9,uR]=Sa(mH),cc="MenuSubTrigger",dR=w.forwardRef((s,e)=>{const t=Aa(cc,s.__scopeMenu),n=Zc(cc,s.__scopeMenu),i=uR(cc,s.__scopeMenu),a=kv(cc,s.__scopeMenu),l=w.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:d}=a,h={__scopeMenu:s.__scopeMenu},f=w.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return w.useEffect(()=>f,[f]),w.useEffect(()=>{const m=c.current;return()=>{window.clearTimeout(m),d(null)}},[c,d]),g.jsx(Mv,{asChild:!0,...h,children:g.jsx(eR,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":pR(t.open),...s,ref:Oi(e,i.onTriggerChange),onClick:m=>{s.onClick?.(m),!(s.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Te(s.onPointerMove,Oc(m=>{a.onItemEnter(m),!m.defaultPrevented&&!s.disabled&&!t.open&&!l.current&&(a.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{t.onOpenChange(!0),f()},100))})),onPointerLeave:Te(s.onPointerLeave,Oc(m=>{f();const y=t.content?.getBoundingClientRect();if(y){const x=t.content?.dataset.side,A=x==="right",S=A?-5:5,C=y[A?"left":"right"],E=y[A?"right":"left"];a.onPointerGraceIntentChange({area:[{x:m.clientX+S,y:m.clientY},{x:C,y:y.top},{x:E,y:y.top},{x:E,y:y.bottom},{x:C,y:y.bottom}],side:x}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(m),m.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Te(s.onKeyDown,m=>{const y=a.searchRef.current!=="";s.disabled||y&&m.key===" "||WV[n.dir].includes(m.key)&&(t.onOpenChange(!0),t.content?.focus(),m.preventDefault())})})})});dR.displayName=cc;var hR="MenuSubContent",fR=w.forwardRef((s,e)=>{const t=KT(vs,s.__scopeMenu),{forceMount:n=t.forceMount,...i}=s,a=Aa(vs,s.__scopeMenu),l=Zc(vs,s.__scopeMenu),c=uR(hR,s.__scopeMenu),d=w.useRef(null),h=mt(e,d);return g.jsx(jc.Provider,{scope:s.__scopeMenu,children:g.jsx(Tr,{present:n||a.open,children:g.jsx(jc.Slot,{scope:s.__scopeMenu,children:g.jsx(jv,{id:c.contentId,"aria-labelledby":c.triggerId,...i,ref:h,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{l.isUsingKeyboardRef.current&&d.current?.focus(),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Te(s.onFocusOutside,f=>{f.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Te(s.onEscapeKeyDown,f=>{l.onClose(),f.preventDefault()}),onKeyDown:Te(s.onKeyDown,f=>{const m=f.currentTarget.contains(f.target),y=KV[l.dir].includes(f.key);m&&y&&(a.onOpenChange(!1),c.trigger?.focus(),f.preventDefault())})})})})})});fR.displayName=hR;function pR(s){return s?"open":"closed"}function xh(s){return s==="indeterminate"}function Lv(s){return xh(s)?"indeterminate":s?"checked":"unchecked"}function gH(s){const e=document.activeElement;for(const t of s)if(t===e||(t.focus(),document.activeElement!==e))return}function yH(s,e){return s.map((t,n)=>s[(e+n)%s.length])}function vH(s,e,t){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,a=t?s.indexOf(t):-1;let l=yH(s,Math.max(a,0));i.length===1&&(l=l.filter(h=>h!==t));const d=l.find(h=>h.toLowerCase().startsWith(i.toLowerCase()));return d!==t?d:void 0}function bH(s,e){const{x:t,y:n}=s;let i=!1;for(let a=0,l=e.length-1;a<e.length;l=a++){const c=e[a],d=e[l],h=c.x,f=c.y,m=d.x,y=d.y;f>n!=y>n&&t<(m-h)*(n-f)/(y-f)+h&&(i=!i)}return i}function xH(s,e){if(!e)return!1;const t={x:s.clientX,y:s.clientY};return bH(t,e)}function Oc(s){return e=>e.pointerType==="mouse"?s(e):void 0}var wH=WT,SH=Mv,AH=QT,CH=ZT,EH=Ov,_H=JT,TH=Wh,RH=tR,NH=sR,MH=rR,DH=oR,kH=lR,jH=cR,OH=dR,PH=fR,Kh="DropdownMenu",[LH]=wa(Kh,[XT]),_n=XT(),[IH,mR]=LH(Kh),gR=s=>{const{__scopeDropdownMenu:e,children:t,dir:n,open:i,defaultOpen:a,onOpenChange:l,modal:c=!0}=s,d=_n(e),h=w.useRef(null),[f,m]=Mc({prop:i,defaultProp:a??!1,onChange:l,caller:Kh});return g.jsx(IH,{scope:e,triggerId:_i(),triggerRef:h,contentId:_i(),open:f,onOpenChange:m,onOpenToggle:w.useCallback(()=>m(y=>!y),[m]),modal:c,children:g.jsx(wH,{...d,open:f,onOpenChange:m,dir:n,modal:c,children:t})})};gR.displayName=Kh;var yR="DropdownMenuTrigger",vR=w.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,disabled:n=!1,...i}=s,a=mR(yR,t),l=_n(t);return g.jsx(SH,{asChild:!0,...l,children:g.jsx(et.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:Oi(e,a.triggerRef),onPointerDown:Te(s.onPointerDown,c=>{!n&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:Te(s.onKeyDown,c=>{n||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});vR.displayName=yR;var FH="DropdownMenuPortal",bR=s=>{const{__scopeDropdownMenu:e,...t}=s,n=_n(e);return g.jsx(AH,{...n,...t})};bR.displayName=FH;var xR="DropdownMenuContent",wR=w.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=mR(xR,t),a=_n(t),l=w.useRef(!1);return g.jsx(CH,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...n,ref:e,onCloseAutoFocus:Te(s.onCloseAutoFocus,c=>{l.current||i.triggerRef.current?.focus(),l.current=!1,c.preventDefault()}),onInteractOutside:Te(s.onInteractOutside,c=>{const d=c.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,f=d.button===2||h;(!i.modal||f)&&(l.current=!0)}),style:{...s.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});wR.displayName=xR;var BH="DropdownMenuGroup",zH=w.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=_n(t);return g.jsx(EH,{...i,...n,ref:e})});zH.displayName=BH;var UH="DropdownMenuLabel",SR=w.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=_n(t);return g.jsx(_H,{...i,...n,ref:e})});SR.displayName=UH;var VH="DropdownMenuItem",AR=w.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=_n(t);return g.jsx(TH,{...i,...n,ref:e})});AR.displayName=VH;var HH="DropdownMenuCheckboxItem",CR=w.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=_n(t);return g.jsx(RH,{...i,...n,ref:e})});CR.displayName=HH;var $H="DropdownMenuRadioGroup",GH=w.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=_n(t);return g.jsx(NH,{...i,...n,ref:e})});GH.displayName=$H;var qH="DropdownMenuRadioItem",ER=w.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=_n(t);return g.jsx(MH,{...i,...n,ref:e})});ER.displayName=qH;var XH="DropdownMenuItemIndicator",_R=w.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=_n(t);return g.jsx(DH,{...i,...n,ref:e})});_R.displayName=XH;var YH="DropdownMenuSeparator",TR=w.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=_n(t);return g.jsx(kH,{...i,...n,ref:e})});TR.displayName=YH;var WH="DropdownMenuArrow",KH=w.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=_n(t);return g.jsx(jH,{...i,...n,ref:e})});KH.displayName=WH;var QH="DropdownMenuSubTrigger",RR=w.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=_n(t);return g.jsx(OH,{...i,...n,ref:e})});RR.displayName=QH;var ZH="DropdownMenuSubContent",NR=w.forwardRef((s,e)=>{const{__scopeDropdownMenu:t,...n}=s,i=_n(t);return g.jsx(PH,{...i,...n,ref:e,style:{...s.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});NR.displayName=ZH;var JH=gR,e6=vR,t6=bR,MR=wR,DR=SR,kR=AR,jR=CR,OR=ER,PR=_R,LR=TR,IR=RR,FR=NR;const n6=JH,s6=e6,i6=w.forwardRef(({className:s,inset:e,children:t,...n},i)=>g.jsxs(IR,{ref:i,className:Ve("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",s),...n,children:[t,g.jsx(K_,{className:"ml-auto"})]}));i6.displayName=IR.displayName;const r6=w.forwardRef(({className:s,...e},t)=>g.jsx(FR,{ref:t,className:Ve("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...e}));r6.displayName=FR.displayName;const BR=w.forwardRef(({className:s,sideOffset:e=4,...t},n)=>g.jsx(t6,{children:g.jsx(MR,{ref:n,sideOffset:e,className:Ve("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",s),...t})}));BR.displayName=MR.displayName;const zR=w.forwardRef(({className:s,inset:e,...t},n)=>g.jsx(kR,{ref:n,className:Ve("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",s),...t}));zR.displayName=kR.displayName;const a6=w.forwardRef(({className:s,children:e,checked:t,...n},i)=>g.jsxs(jR,{ref:i,className:Ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:t,...n,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(PR,{children:g.jsx(gv,{className:"h-4 w-4"})})}),e]}));a6.displayName=jR.displayName;const o6=w.forwardRef(({className:s,children:e,...t},n)=>g.jsxs(OR,{ref:n,className:Ve("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(PR,{children:g.jsx(k5,{className:"h-2 w-2 fill-current"})})}),e]}));o6.displayName=OR.displayName;const UR=w.forwardRef(({className:s,inset:e,...t},n)=>g.jsx(DR,{ref:n,className:Ve("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",s),...t}));UR.displayName=DR.displayName;const VR=w.forwardRef(({className:s,...e},t)=>g.jsx(LR,{ref:t,className:Ve("-mx-1 my-1 h-px bg-muted",s),...e}));VR.displayName=LR.displayName;function l6({user:s}){const{t:e}=ei(),t=async()=>{try{await ke.logout()}catch(a){console.error("Failed to logout:",a),window.location.href="/login"}},n=a=>a&&a.split(" ").map(l=>l[0]).join("").toUpperCase().slice(0,2)||"U",i=s?.roles?.find(a=>a.startsWith("EDO"))||null;return g.jsxs("div",{className:"flex items-center gap-2",children:[i&&g.jsx(sy,{variant:i==="EDO Admin"?"default":"secondary",className:"text-xs",children:i.replace("EDO ","")}),g.jsxs(n6,{children:[g.jsx(s6,{asChild:!0,children:g.jsxs(Ue,{variant:"ghost",className:"flex items-center gap-2 h-auto py-1.5 px-2",children:[s?.user_image?g.jsx("img",{src:s.user_image,alt:s.full_name,className:"w-8 h-8 rounded-full object-cover"}):g.jsx("div",{className:"w-8 h-8 bg-primary/10 text-primary rounded-full flex items-center justify-center text-sm font-medium",children:s?n(s.full_name):g.jsx(lc,{className:"w-4 h-4"})}),g.jsx("span",{className:"text-sm font-medium hidden md:block max-w-32 truncate",children:s?.full_name||e("common.loading")}),g.jsx(Lh,{className:"w-4 h-4 text-muted-foreground"})]})}),g.jsxs(BR,{align:"end",className:"w-56",children:[g.jsx(UR,{children:g.jsxs("div",{className:"flex flex-col space-y-1",children:[g.jsx("p",{className:"text-sm font-medium truncate",children:s?.full_name}),g.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s?.email})]})}),g.jsx(VR,{}),g.jsxs(zR,{onClick:t,className:"text-red-600 focus:text-red-600 focus:bg-red-50",children:[g.jsx(t4,{className:"w-4 h-4 mr-2"}),e("common.logout")]})]})]})]})}function c6({user:s}){return g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Ue,{variant:"ghost",size:"icon",className:"h-9 w-9",children:g.jsx(Ih,{className:"w-5 h-5"})}),g.jsxs(Ue,{variant:"ghost",size:"icon",className:"h-9 w-9 relative",children:[g.jsx(h5,{className:"w-5 h-5"}),g.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full"})]}),g.jsx(I4,{}),g.jsx("div",{className:"w-px h-8 bg-border mx-2"}),g.jsx(l6,{user:s})]})}const u6=w.memo(function({title:e,subtitle:t}){const[n,i]=w.useState(null);w.useEffect(()=>{a()},[]);const a=async()=>{try{const l=await ke.getCurrentUser();i(l)}catch(l){console.error("Failed to load user:",l)}};return g.jsxs("header",{className:"h-14 border-b bg-white flex items-center justify-between px-6 shrink-0",children:[g.jsx(s5,{title:e,subtitle:t}),g.jsx(c6,{user:n})]})}),ua=w.forwardRef(({className:s,...e},t)=>g.jsx("div",{ref:t,className:Ve("rounded-lg border bg-card text-card-foreground shadow-sm",s),...e}));ua.displayName="Card";const jo=w.forwardRef(({className:s,...e},t)=>g.jsx("div",{ref:t,className:Ve("flex flex-col space-y-1.5 p-6",s),...e}));jo.displayName="CardHeader";const Oo=w.forwardRef(({className:s,...e},t)=>g.jsx("h3",{ref:t,className:Ve("text-2xl font-semibold leading-none tracking-tight",s),...e}));Oo.displayName="CardTitle";const d6=w.forwardRef(({className:s,...e},t)=>g.jsx("p",{ref:t,className:Ve("text-sm text-muted-foreground",s),...e}));d6.displayName="CardDescription";const da=w.forwardRef(({className:s,...e},t)=>g.jsx("div",{ref:t,className:Ve("p-6 pt-0",s),...e}));da.displayName="CardContent";const h6=w.forwardRef(({className:s,...e},t)=>g.jsx("div",{ref:t,className:Ve("flex items-center p-6 pt-0",s),...e}));h6.displayName="CardFooter";function f6({documents:s,onNavigateToDocuments:e}){const{t}=ei(),n=s.length,i=s.filter(f=>f.status===t("documents.status.pending")||f.status===" ").length,a=s.filter(f=>f.status===t("documents.status.signed")||f.status==="").length,l=s.filter(f=>f.status===t("documents.status.archived")||f.status==="").length,c=[{title:t("dashboard.stats.total"),value:n,icon:gs,color:"text-blue-600",bgColor:"bg-blue-50"},{title:t("dashboard.stats.pending"),value:i,icon:_o,color:"text-orange-600",bgColor:"bg-orange-50"},{title:t("dashboard.stats.signed"),value:a,icon:Mo,color:"text-green-600",bgColor:"bg-green-50"},{title:t("dashboard.stats.archived"),value:l,icon:u5,color:"text-gray-600",bgColor:"bg-gray-50"}],d=[...s].sort((f,m)=>{const y=f.creation?new Date(f.creation).getTime():0;return(m.creation?new Date(m.creation).getTime():0)-y}).slice(0,5),h=s.filter(f=>f.status===t("documents.status.pending")||f.status===" ").slice(0,5);return g.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:g.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[g.jsxs("div",{children:[g.jsx("h1",{className:"text-2xl font-bold",children:t("dashboard.title")}),g.jsx("p",{className:"text-muted-foreground",children:t("dashboard.subtitle")})]}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:c.map(f=>g.jsx(ua,{children:g.jsx(da,{className:"p-4",children:g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:`p-3 rounded-lg ${f.bgColor}`,children:g.jsx(f.icon,{className:`w-6 h-6 ${f.color}`})}),g.jsxs("div",{children:[g.jsx("p",{className:"text-2xl font-bold",children:f.value}),g.jsx("p",{className:"text-sm text-muted-foreground",children:f.title})]})]})})},f.title))}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[g.jsxs(ua,{children:[g.jsx(jo,{className:"pb-3",children:g.jsxs(Oo,{className:"text-lg flex items-center gap-2",children:[g.jsx(_o,{className:"w-5 h-5 text-orange-500"}),t("dashboard.pendingSignatures")]})}),g.jsx(da,{children:h.length===0?g.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:t("dashboard.noPending")}):g.jsx("div",{className:"space-y-3",children:h.map(f=>g.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg cursor-pointer hover:bg-orange-100 transition-colors",onClick:e,children:[g.jsxs("div",{className:"min-w-0 flex-1",children:[g.jsx("p",{className:"font-medium text-sm truncate",children:f.title}),g.jsx("p",{className:"text-xs text-muted-foreground",children:f.document_type})]}),g.jsx("div",{className:"text-xs text-orange-600 shrink-0 ml-2",children:t("dashboard.waiting")})]},f.name))})})]}),g.jsxs(ua,{children:[g.jsx(jo,{className:"pb-3",children:g.jsxs(Oo,{className:"text-lg flex items-center gap-2",children:[g.jsx(A4,{className:"w-5 h-5 text-blue-500"}),t("dashboard.recentDocuments")]})}),g.jsx(da,{children:d.length===0?g.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:t("dashboard.noDocuments")}):g.jsx("div",{className:"space-y-3",children:d.map(f=>g.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg cursor-pointer hover:bg-muted transition-colors",onClick:e,children:[g.jsxs("div",{className:"min-w-0 flex-1",children:[g.jsx("p",{className:"font-medium text-sm truncate",children:f.title}),g.jsx("p",{className:"text-xs text-muted-foreground",children:f.creation&&new Date(f.creation).toLocaleDateString("ru-RU")})]}),g.jsx("div",{className:`text-xs shrink-0 ml-2 px-2 py-1 rounded ${f.status===t("documents.status.signed")||f.status===""?"bg-green-100 text-green-700":f.status===t("documents.status.pending")||f.status===" "?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-700"}`,children:f.status})]},f.name))})})]})]})]})})}function p6({onNavigateToDocuments:s}){const[e,t]=w.useState([]);return w.useEffect(()=>{(async()=>{try{const i=await ke.getDocuments();t(i)}catch(i){console.error("Failed to load documents for dashboard:",i)}})()},[]),g.jsx(vr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex-1",children:g.jsx(f6,{documents:e,onNavigateToDocuments:s})},"dashboard")}function tc({className:s,...e}){return g.jsx("div",{className:Ve("animate-pulse rounded-md bg-muted",s),...e})}function z1(s,[e,t]){return Math.min(t,Math.max(e,s))}function m6(s){const e=g6(s),t=w.forwardRef((n,i)=>{const{children:a,...l}=n,c=w.Children.toArray(a),d=c.find(v6);if(d){const h=d.props.children,f=c.map(m=>m===d?w.Children.count(h)>1?w.Children.only(null):w.isValidElement(h)?h.props.children:null:m);return g.jsx(e,{...l,ref:i,children:w.isValidElement(h)?w.cloneElement(h,void 0,f):null})}return g.jsx(e,{...l,ref:i,children:a})});return t.displayName=`${s}.Slot`,t}function g6(s){const e=w.forwardRef((t,n)=>{const{children:i,...a}=t;if(w.isValidElement(i)){const l=x6(i),c=b6(a,i.props);return i.type!==w.Fragment&&(c.ref=n?Oi(n,l):l),w.cloneElement(i,c)}return w.Children.count(i)>1?w.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var y6=Symbol("radix.slottable");function v6(s){return w.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===y6}function b6(s,e){const t={...e};for(const n in e){const i=s[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?t[n]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[n]=i):n==="style"?t[n]={...i,...a}:n==="className"&&(t[n]=[i,a].filter(Boolean).join(" "))}return{...s,...t}}function x6(s){let e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}function w6(s){const e=w.useRef({value:s,previous:s});return w.useMemo(()=>(e.current.value!==s&&(e.current.previous=e.current.value,e.current.value=s),e.current.previous),[s])}var HR=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),S6="VisuallyHidden",A6=w.forwardRef((s,e)=>g.jsx(et.span,{...s,ref:e,style:{...HR,...s.style}}));A6.displayName=S6;var C6=[" ","Enter","ArrowUp","ArrowDown"],E6=[" ","Enter"],pa="Select",[Qh,Zh,_6]=vv(pa),[tl]=wa(pa,[_6,$h]),Jh=$h(),[T6,Rr]=tl(pa),[R6,N6]=tl(pa),$R=s=>{const{__scopeSelect:e,children:t,open:n,defaultOpen:i,onOpenChange:a,value:l,defaultValue:c,onValueChange:d,dir:h,name:f,autoComplete:m,disabled:y,required:x,form:A}=s,S=Jh(e),[C,E]=w.useState(null),[_,R]=w.useState(null),[N,M]=w.useState(!1),j=bv(h),[D,O]=Mc({prop:n,defaultProp:i??!1,onChange:a,caller:pa}),[I,U]=Mc({prop:l,defaultProp:c,onChange:d,caller:pa}),$=w.useRef(null),J=C?A||!!C.closest("form"):!0,[ie,X]=w.useState(new Set),ae=Array.from(ie).map(P=>P.props.value).join(";");return g.jsx(RT,{...S,children:g.jsxs(T6,{required:x,scope:e,trigger:C,onTriggerChange:E,valueNode:_,onValueNodeChange:R,valueNodeHasChildren:N,onValueNodeHasChildrenChange:M,contentId:_i(),value:I,onValueChange:U,open:D,onOpenChange:O,dir:j,triggerPointerDownPosRef:$,disabled:y,children:[g.jsx(Qh.Provider,{scope:e,children:g.jsx(R6,{scope:s.__scopeSelect,onNativeOptionAdd:w.useCallback(P=>{X(F=>new Set(F).add(P))},[]),onNativeOptionRemove:w.useCallback(P=>{X(F=>{const B=new Set(F);return B.delete(P),B})},[]),children:t})}),J?g.jsxs(pN,{"aria-hidden":!0,required:x,tabIndex:-1,name:f,autoComplete:m,value:I,onChange:P=>U(P.target.value),disabled:y,form:A,children:[I===void 0?g.jsx("option",{value:""}):null,Array.from(ie)]},ae):null]})})};$R.displayName=pa;var GR="SelectTrigger",qR=w.forwardRef((s,e)=>{const{__scopeSelect:t,disabled:n=!1,...i}=s,a=Jh(t),l=Rr(GR,t),c=l.disabled||n,d=mt(e,l.onTriggerChange),h=Zh(t),f=w.useRef("touch"),[m,y,x]=gN(S=>{const C=h().filter(R=>!R.disabled),E=C.find(R=>R.value===l.value),_=yN(C,S,E);_!==void 0&&l.onValueChange(_.value)}),A=S=>{c||(l.onOpenChange(!0),x()),S&&(l.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)})};return g.jsx(NT,{asChild:!0,...a,children:g.jsx(et.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":mN(l.value)?"":void 0,...i,ref:d,onClick:Te(i.onClick,S=>{S.currentTarget.focus(),f.current!=="mouse"&&A(S)}),onPointerDown:Te(i.onPointerDown,S=>{f.current=S.pointerType;const C=S.target;C.hasPointerCapture(S.pointerId)&&C.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&S.pointerType==="mouse"&&(A(S),S.preventDefault())}),onKeyDown:Te(i.onKeyDown,S=>{const C=m.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&y(S.key),!(C&&S.key===" ")&&C6.includes(S.key)&&(A(),S.preventDefault())})})})});qR.displayName=GR;var XR="SelectValue",YR=w.forwardRef((s,e)=>{const{__scopeSelect:t,className:n,style:i,children:a,placeholder:l="",...c}=s,d=Rr(XR,t),{onValueNodeHasChildrenChange:h}=d,f=a!==void 0,m=mt(e,d.onValueNodeChange);return pn(()=>{h(f)},[h,f]),g.jsx(et.span,{...c,ref:m,style:{pointerEvents:"none"},children:mN(d.value)?g.jsx(g.Fragment,{children:l}):a})});YR.displayName=XR;var M6="SelectIcon",WR=w.forwardRef((s,e)=>{const{__scopeSelect:t,children:n,...i}=s;return g.jsx(et.span,{"aria-hidden":!0,...i,ref:e,children:n||""})});WR.displayName=M6;var D6="SelectPortal",KR=s=>g.jsx(Gh,{asChild:!0,...s});KR.displayName=D6;var ma="SelectContent",QR=w.forwardRef((s,e)=>{const t=Rr(ma,s.__scopeSelect),[n,i]=w.useState();if(pn(()=>{i(new DocumentFragment)},[]),!t.open){const a=n;return a?$c.createPortal(g.jsx(ZR,{scope:s.__scopeSelect,children:g.jsx(Qh.Slot,{scope:s.__scopeSelect,children:g.jsx("div",{children:s.children})})}),a):null}return g.jsx(JR,{...s,ref:e})});QR.displayName=ma;var _s=10,[ZR,Nr]=tl(ma),k6="SelectContentImpl",j6=m6("SelectContent.RemoveScroll"),JR=w.forwardRef((s,e)=>{const{__scopeSelect:t,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:l,side:c,sideOffset:d,align:h,alignOffset:f,arrowPadding:m,collisionBoundary:y,collisionPadding:x,sticky:A,hideWhenDetached:S,avoidCollisions:C,...E}=s,_=Rr(ma,t),[R,N]=w.useState(null),[M,j]=w.useState(null),D=mt(e,Q=>N(Q)),[O,I]=w.useState(null),[U,$]=w.useState(null),J=Zh(t),[ie,X]=w.useState(!1),ae=w.useRef(!1);w.useEffect(()=>{if(R)return Nv(R)},[R]),xv();const P=w.useCallback(Q=>{const[ye,...ve]=J().map(ue=>ue.ref.current),[Re]=ve.slice(-1),Y=document.activeElement;for(const ue of Q)if(ue===Y||(ue?.scrollIntoView({block:"nearest"}),ue===ye&&M&&(M.scrollTop=0),ue===Re&&M&&(M.scrollTop=M.scrollHeight),ue?.focus(),document.activeElement!==Y))return},[J,M]),F=w.useCallback(()=>P([O,R]),[P,O,R]);w.useEffect(()=>{ie&&F()},[ie,F]);const{onOpenChange:B,triggerPointerDownPosRef:V}=_;w.useEffect(()=>{if(R){let Q={x:0,y:0};const ye=Re=>{Q={x:Math.abs(Math.round(Re.pageX)-(V.current?.x??0)),y:Math.abs(Math.round(Re.pageY)-(V.current?.y??0))}},ve=Re=>{Q.x<=10&&Q.y<=10?Re.preventDefault():R.contains(Re.target)||B(!1),document.removeEventListener("pointermove",ye),V.current=null};return V.current!==null&&(document.addEventListener("pointermove",ye),document.addEventListener("pointerup",ve,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ye),document.removeEventListener("pointerup",ve,{capture:!0})}}},[R,B,V]),w.useEffect(()=>{const Q=()=>B(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[B]);const[de,L]=gN(Q=>{const ye=J().filter(Y=>!Y.disabled),ve=ye.find(Y=>Y.ref.current===document.activeElement),Re=yN(ye,Q,ve);Re&&setTimeout(()=>Re.ref.current.focus())}),q=w.useCallback((Q,ye,ve)=>{const Re=!ae.current&&!ve;(_.value!==void 0&&_.value===ye||Re)&&(I(Q),Re&&(ae.current=!0))},[_.value]),te=w.useCallback(()=>R?.focus(),[R]),oe=w.useCallback((Q,ye,ve)=>{const Re=!ae.current&&!ve;(_.value!==void 0&&_.value===ye||Re)&&$(Q)},[_.value]),pe=n==="popper"?dy:eN,se=pe===dy?{side:c,sideOffset:d,align:h,alignOffset:f,arrowPadding:m,collisionBoundary:y,collisionPadding:x,sticky:A,hideWhenDetached:S,avoidCollisions:C}:{};return g.jsx(ZR,{scope:t,content:R,viewport:M,onViewportChange:j,itemRefCallback:q,selectedItem:O,onItemLeave:te,itemTextRefCallback:oe,focusSelectedItem:F,selectedItemText:U,position:n,isPositioned:ie,searchRef:de,children:g.jsx(Xh,{as:j6,allowPinchZoom:!0,children:g.jsx(Bh,{asChild:!0,trapped:_.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:Te(i,Q=>{_.trigger?.focus({preventScroll:!0}),Q.preventDefault()}),children:g.jsx(Fh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:g.jsx(pe,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:Q=>Q.preventDefault(),...E,...se,onPlaced:()=>X(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:Te(E.onKeyDown,Q=>{const ye=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!ye&&Q.key.length===1&&L(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let Re=J().filter(Y=>!Y.disabled).map(Y=>Y.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(Re=Re.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const Y=Q.target,ue=Re.indexOf(Y);Re=Re.slice(ue+1)}setTimeout(()=>P(Re)),Q.preventDefault()}})})})})})})});JR.displayName=k6;var O6="SelectItemAlignedPosition",eN=w.forwardRef((s,e)=>{const{__scopeSelect:t,onPlaced:n,...i}=s,a=Rr(ma,t),l=Nr(ma,t),[c,d]=w.useState(null),[h,f]=w.useState(null),m=mt(e,D=>f(D)),y=Zh(t),x=w.useRef(!1),A=w.useRef(!0),{viewport:S,selectedItem:C,selectedItemText:E,focusSelectedItem:_}=l,R=w.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&h&&S&&C&&E){const D=a.trigger.getBoundingClientRect(),O=h.getBoundingClientRect(),I=a.valueNode.getBoundingClientRect(),U=E.getBoundingClientRect();if(a.dir!=="rtl"){const Y=U.left-O.left,ue=I.left-Y,fe=D.left-ue,me=D.width+fe,ee=Math.max(me,O.width),he=window.innerWidth-_s,_e=z1(ue,[_s,Math.max(_s,he-ee)]);c.style.minWidth=me+"px",c.style.left=_e+"px"}else{const Y=O.right-U.right,ue=window.innerWidth-I.right-Y,fe=window.innerWidth-D.right-ue,me=D.width+fe,ee=Math.max(me,O.width),he=window.innerWidth-_s,_e=z1(ue,[_s,Math.max(_s,he-ee)]);c.style.minWidth=me+"px",c.style.right=_e+"px"}const $=y(),J=window.innerHeight-_s*2,ie=S.scrollHeight,X=window.getComputedStyle(h),ae=parseInt(X.borderTopWidth,10),P=parseInt(X.paddingTop,10),F=parseInt(X.borderBottomWidth,10),B=parseInt(X.paddingBottom,10),V=ae+P+ie+B+F,de=Math.min(C.offsetHeight*5,V),L=window.getComputedStyle(S),q=parseInt(L.paddingTop,10),te=parseInt(L.paddingBottom,10),oe=D.top+D.height/2-_s,pe=J-oe,se=C.offsetHeight/2,Q=C.offsetTop+se,ye=ae+P+Q,ve=V-ye;if(ye<=oe){const Y=$.length>0&&C===$[$.length-1].ref.current;c.style.bottom="0px";const ue=h.clientHeight-S.offsetTop-S.offsetHeight,fe=Math.max(pe,se+(Y?te:0)+ue+F),me=ye+fe;c.style.height=me+"px"}else{const Y=$.length>0&&C===$[0].ref.current;c.style.top="0px";const fe=Math.max(oe,ae+S.offsetTop+(Y?q:0)+se)+ve;c.style.height=fe+"px",S.scrollTop=ye-oe+S.offsetTop}c.style.margin=`${_s}px 0`,c.style.minHeight=de+"px",c.style.maxHeight=J+"px",n?.(),requestAnimationFrame(()=>x.current=!0)}},[y,a.trigger,a.valueNode,c,h,S,C,E,a.dir,n]);pn(()=>R(),[R]);const[N,M]=w.useState();pn(()=>{h&&M(window.getComputedStyle(h).zIndex)},[h]);const j=w.useCallback(D=>{D&&A.current===!0&&(R(),_?.(),A.current=!1)},[R,_]);return g.jsx(L6,{scope:t,contentWrapper:c,shouldExpandOnScrollRef:x,onScrollButtonChange:j,children:g.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:g.jsx(et.div,{...i,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});eN.displayName=O6;var P6="SelectPopperPosition",dy=w.forwardRef((s,e)=>{const{__scopeSelect:t,align:n="start",collisionPadding:i=_s,...a}=s,l=Jh(t);return g.jsx(MT,{...l,...a,ref:e,align:n,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});dy.displayName=P6;var[L6,Iv]=tl(ma,{}),hy="SelectViewport",tN=w.forwardRef((s,e)=>{const{__scopeSelect:t,nonce:n,...i}=s,a=Nr(hy,t),l=Iv(hy,t),c=mt(e,a.onViewportChange),d=w.useRef(0);return g.jsxs(g.Fragment,{children:[g.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),g.jsx(Qh.Slot,{scope:t,children:g.jsx(et.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Te(i.onScroll,h=>{const f=h.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:y}=l;if(y?.current&&m){const x=Math.abs(d.current-f.scrollTop);if(x>0){const A=window.innerHeight-_s*2,S=parseFloat(m.style.minHeight),C=parseFloat(m.style.height),E=Math.max(S,C);if(E<A){const _=E+x,R=Math.min(A,_),N=_-R;m.style.height=R+"px",m.style.bottom==="0px"&&(f.scrollTop=N>0?N:0,m.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});tN.displayName=hy;var nN="SelectGroup",[I6,F6]=tl(nN),B6=w.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s,i=_i();return g.jsx(I6,{scope:t,id:i,children:g.jsx(et.div,{role:"group","aria-labelledby":i,...n,ref:e})})});B6.displayName=nN;var sN="SelectLabel",iN=w.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s,i=F6(sN,t);return g.jsx(et.div,{id:i.id,...n,ref:e})});iN.displayName=sN;var wh="SelectItem",[z6,rN]=tl(wh),aN=w.forwardRef((s,e)=>{const{__scopeSelect:t,value:n,disabled:i=!1,textValue:a,...l}=s,c=Rr(wh,t),d=Nr(wh,t),h=c.value===n,[f,m]=w.useState(a??""),[y,x]=w.useState(!1),A=mt(e,_=>d.itemRefCallback?.(_,n,i)),S=_i(),C=w.useRef("touch"),E=()=>{i||(c.onValueChange(n),c.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return g.jsx(z6,{scope:t,value:n,disabled:i,textId:S,isSelected:h,onItemTextChange:w.useCallback(_=>{m(R=>R||(_?.textContent??"").trim())},[]),children:g.jsx(Qh.ItemSlot,{scope:t,value:n,disabled:i,textValue:f,children:g.jsx(et.div,{role:"option","aria-labelledby":S,"data-highlighted":y?"":void 0,"aria-selected":h&&y,"data-state":h?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...l,ref:A,onFocus:Te(l.onFocus,()=>x(!0)),onBlur:Te(l.onBlur,()=>x(!1)),onClick:Te(l.onClick,()=>{C.current!=="mouse"&&E()}),onPointerUp:Te(l.onPointerUp,()=>{C.current==="mouse"&&E()}),onPointerDown:Te(l.onPointerDown,_=>{C.current=_.pointerType}),onPointerMove:Te(l.onPointerMove,_=>{C.current=_.pointerType,i?d.onItemLeave?.():C.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Te(l.onPointerLeave,_=>{_.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:Te(l.onKeyDown,_=>{d.searchRef?.current!==""&&_.key===" "||(E6.includes(_.key)&&E(),_.key===" "&&_.preventDefault())})})})})});aN.displayName=wh;var uc="SelectItemText",oN=w.forwardRef((s,e)=>{const{__scopeSelect:t,className:n,style:i,...a}=s,l=Rr(uc,t),c=Nr(uc,t),d=rN(uc,t),h=N6(uc,t),[f,m]=w.useState(null),y=mt(e,E=>m(E),d.onItemTextChange,E=>c.itemTextRefCallback?.(E,d.value,d.disabled)),x=f?.textContent,A=w.useMemo(()=>g.jsx("option",{value:d.value,disabled:d.disabled,children:x},d.value),[d.disabled,d.value,x]),{onNativeOptionAdd:S,onNativeOptionRemove:C}=h;return pn(()=>(S(A),()=>C(A)),[S,C,A]),g.jsxs(g.Fragment,{children:[g.jsx(et.span,{id:d.textId,...a,ref:y}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?$c.createPortal(a.children,l.valueNode):null]})});oN.displayName=uc;var lN="SelectItemIndicator",cN=w.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s;return rN(lN,t).isSelected?g.jsx(et.span,{"aria-hidden":!0,...n,ref:e}):null});cN.displayName=lN;var fy="SelectScrollUpButton",uN=w.forwardRef((s,e)=>{const t=Nr(fy,s.__scopeSelect),n=Iv(fy,s.__scopeSelect),[i,a]=w.useState(!1),l=mt(e,n.onScrollButtonChange);return pn(()=>{if(t.viewport&&t.isPositioned){let c=function(){const h=d.scrollTop>0;a(h)};const d=t.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),i?g.jsx(hN,{...s,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=t;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});uN.displayName=fy;var py="SelectScrollDownButton",dN=w.forwardRef((s,e)=>{const t=Nr(py,s.__scopeSelect),n=Iv(py,s.__scopeSelect),[i,a]=w.useState(!1),l=mt(e,n.onScrollButtonChange);return pn(()=>{if(t.viewport&&t.isPositioned){let c=function(){const h=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<h;a(f)};const d=t.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),i?g.jsx(hN,{...s,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=t;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});dN.displayName=py;var hN=w.forwardRef((s,e)=>{const{__scopeSelect:t,onAutoScroll:n,...i}=s,a=Nr("SelectScrollButton",t),l=w.useRef(null),c=Zh(t),d=w.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return w.useEffect(()=>()=>d(),[d]),pn(()=>{c().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),g.jsx(et.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Te(i.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(n,50))}),onPointerMove:Te(i.onPointerMove,()=>{a.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(n,50))}),onPointerLeave:Te(i.onPointerLeave,()=>{d()})})}),U6="SelectSeparator",fN=w.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s;return g.jsx(et.div,{"aria-hidden":!0,...n,ref:e})});fN.displayName=U6;var my="SelectArrow",V6=w.forwardRef((s,e)=>{const{__scopeSelect:t,...n}=s,i=Jh(t),a=Rr(my,t),l=Nr(my,t);return a.open&&l.position==="popper"?g.jsx(DT,{...i,...n,ref:e}):null});V6.displayName=my;var H6="SelectBubbleInput",pN=w.forwardRef(({__scopeSelect:s,value:e,...t},n)=>{const i=w.useRef(null),a=mt(n,i),l=w6(e);return w.useEffect(()=>{const c=i.current;if(!c)return;const d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==e&&f){const m=new Event("change",{bubbles:!0});f.call(c,e),c.dispatchEvent(m)}},[l,e]),g.jsx(et.select,{...t,style:{...HR,...t.style},ref:a,defaultValue:e})});pN.displayName=H6;function mN(s){return s===""||s===void 0}function gN(s){const e=Zs(s),t=w.useRef(""),n=w.useRef(0),i=w.useCallback(l=>{const c=t.current+l;e(c),(function d(h){t.current=h,window.clearTimeout(n.current),h!==""&&(n.current=window.setTimeout(()=>d(""),1e3))})(c)},[e]),a=w.useCallback(()=>{t.current="",window.clearTimeout(n.current)},[]);return w.useEffect(()=>()=>window.clearTimeout(n.current),[]),[t,i,a]}function yN(s,e,t){const i=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,a=t?s.indexOf(t):-1;let l=$6(s,Math.max(a,0));i.length===1&&(l=l.filter(h=>h!==t));const d=l.find(h=>h.textValue.toLowerCase().startsWith(i.toLowerCase()));return d!==t?d:void 0}function $6(s,e){return s.map((t,n)=>s[(e+n)%s.length])}var G6=$R,vN=qR,q6=YR,X6=WR,Y6=KR,bN=QR,W6=tN,xN=iN,wN=aN,K6=oN,Q6=cN,SN=uN,AN=dN,CN=fN;const xn=G6,wn=q6,un=w.forwardRef(({className:s,children:e,...t},n)=>g.jsxs(vN,{ref:n,className:Ve("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...t,children:[e,g.jsx(X6,{asChild:!0,children:g.jsx(Lh,{className:"h-4 w-4 opacity-50"})})]}));un.displayName=vN.displayName;const EN=w.forwardRef(({className:s,...e},t)=>g.jsx(SN,{ref:t,className:Ve("flex cursor-default items-center justify-center py-1",s),...e,children:g.jsx(Q_,{className:"h-4 w-4"})}));EN.displayName=SN.displayName;const _N=w.forwardRef(({className:s,...e},t)=>g.jsx(AN,{ref:t,className:Ve("flex cursor-default items-center justify-center py-1",s),...e,children:g.jsx(Lh,{className:"h-4 w-4"})}));_N.displayName=AN.displayName;const dn=w.forwardRef(({className:s,children:e,position:t="popper",...n},i)=>g.jsx(Y6,{children:g.jsxs(bN,{ref:i,className:Ve("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...n,children:[g.jsx(EN,{}),g.jsx(W6,{className:Ve("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),g.jsx(_N,{})]})}));dn.displayName=bN.displayName;const Z6=w.forwardRef(({className:s,...e},t)=>g.jsx(xN,{ref:t,className:Ve("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...e}));Z6.displayName=xN.displayName;const Kt=w.forwardRef(({className:s,children:e,...t},n)=>g.jsxs(wN,{ref:n,className:Ve("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...t,children:[g.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:g.jsx(Q6,{children:g.jsx(gv,{className:"h-4 w-4"})})}),g.jsx(K6,{children:e})]}));Kt.displayName=wN.displayName;const J6=w.forwardRef(({className:s,...e},t)=>g.jsx(CN,{ref:t,className:Ve("-mx-1 my-1 h-px bg-muted",s),...e}));J6.displayName=CN.displayName;const In=w.forwardRef(({className:s,type:e,...t},n)=>g.jsx("input",{type:e,className:Ve("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:n,...t}));In.displayName="Input";var e$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],t$=e$.reduce((s,e)=>{const t=tT(`Primitive.${e}`),n=w.forwardRef((i,a)=>{const{asChild:l,...c}=i,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),g.jsx(d,{...c,ref:a})});return n.displayName=`Primitive.${e}`,{...s,[e]:n}},{}),n$="Label",TN=w.forwardRef((s,e)=>g.jsx(t$.label,{...s,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(s.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));TN.displayName=n$;var RN=TN;const s$=yv("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),tt=w.forwardRef(({className:s,...e},t)=>g.jsx(RN,{ref:t,className:Ve(s$(),s),...e}));tt.displayName=RN.displayName;const dr=w.forwardRef(({className:s,...e},t)=>g.jsx("textarea",{className:Ve("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...e}));dr.displayName="Textarea";function i$(s){const e=r$(s),t=w.forwardRef((n,i)=>{const{children:a,...l}=n,c=w.Children.toArray(a),d=c.find(o$);if(d){const h=d.props.children,f=c.map(m=>m===d?w.Children.count(h)>1?w.Children.only(null):w.isValidElement(h)?h.props.children:null:m);return g.jsx(e,{...l,ref:i,children:w.isValidElement(h)?w.cloneElement(h,void 0,f):null})}return g.jsx(e,{...l,ref:i,children:a})});return t.displayName=`${s}.Slot`,t}function r$(s){const e=w.forwardRef((t,n)=>{const{children:i,...a}=t;if(w.isValidElement(i)){const l=c$(i),c=l$(a,i.props);return i.type!==w.Fragment&&(c.ref=n?Oi(n,l):l),w.cloneElement(i,c)}return w.Children.count(i)>1?w.Children.only(null):null});return e.displayName=`${s}.SlotClone`,e}var a$=Symbol("radix.slottable");function o$(s){return w.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===a$}function l$(s,e){const t={...e};for(const n in e){const i=s[n],a=e[n];/^on[A-Z]/.test(n)?i&&a?t[n]=(...c)=>{const d=a(...c);return i(...c),d}:i&&(t[n]=i):n==="style"?t[n]={...i,...a}:n==="className"&&(t[n]=[i,a].filter(Boolean).join(" "))}return{...s,...t}}function c$(s){let e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?s.props.ref:s.props.ref||s.ref)}var ef="Dialog",[NN]=wa(ef),[u$,Ds]=NN(ef),MN=s=>{const{__scopeDialog:e,children:t,open:n,defaultOpen:i,onOpenChange:a,modal:l=!0}=s,c=w.useRef(null),d=w.useRef(null),[h,f]=Mc({prop:n,defaultProp:i??!1,onChange:a,caller:ef});return g.jsx(u$,{scope:e,triggerRef:c,contentRef:d,contentId:_i(),titleId:_i(),descriptionId:_i(),open:h,onOpenChange:f,onOpenToggle:w.useCallback(()=>f(m=>!m),[f]),modal:l,children:t})};MN.displayName=ef;var DN="DialogTrigger",d$=w.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,i=Ds(DN,t),a=mt(e,i.triggerRef);return g.jsx(et.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":zv(i.open),...n,ref:a,onClick:Te(s.onClick,i.onOpenToggle)})});d$.displayName=DN;var Fv="DialogPortal",[h$,kN]=NN(Fv,{forceMount:void 0}),jN=s=>{const{__scopeDialog:e,forceMount:t,children:n,container:i}=s,a=Ds(Fv,e);return g.jsx(h$,{scope:e,forceMount:t,children:w.Children.map(n,l=>g.jsx(Tr,{present:t||a.open,children:g.jsx(Gh,{asChild:!0,container:i,children:l})}))})};jN.displayName=Fv;var Sh="DialogOverlay",ON=w.forwardRef((s,e)=>{const t=kN(Sh,s.__scopeDialog),{forceMount:n=t.forceMount,...i}=s,a=Ds(Sh,s.__scopeDialog);return a.modal?g.jsx(Tr,{present:n||a.open,children:g.jsx(p$,{...i,ref:e})}):null});ON.displayName=Sh;var f$=i$("DialogOverlay.RemoveScroll"),p$=w.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,i=Ds(Sh,t);return g.jsx(Xh,{as:f$,allowPinchZoom:!0,shards:[i.contentRef],children:g.jsx(et.div,{"data-state":zv(i.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),ga="DialogContent",PN=w.forwardRef((s,e)=>{const t=kN(ga,s.__scopeDialog),{forceMount:n=t.forceMount,...i}=s,a=Ds(ga,s.__scopeDialog);return g.jsx(Tr,{present:n||a.open,children:a.modal?g.jsx(m$,{...i,ref:e}):g.jsx(g$,{...i,ref:e})})});PN.displayName=ga;var m$=w.forwardRef((s,e)=>{const t=Ds(ga,s.__scopeDialog),n=w.useRef(null),i=mt(e,t.contentRef,n);return w.useEffect(()=>{const a=n.current;if(a)return Nv(a)},[]),g.jsx(LN,{...s,ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Te(s.onCloseAutoFocus,a=>{a.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Te(s.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&a.preventDefault()}),onFocusOutside:Te(s.onFocusOutside,a=>a.preventDefault())})}),g$=w.forwardRef((s,e)=>{const t=Ds(ga,s.__scopeDialog),n=w.useRef(!1),i=w.useRef(!1);return g.jsx(LN,{...s,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{s.onCloseAutoFocus?.(a),a.defaultPrevented||(n.current||t.triggerRef.current?.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{s.onInteractOutside?.(a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=a.target;t.triggerRef.current?.contains(l)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),LN=w.forwardRef((s,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,...l}=s,c=Ds(ga,t),d=w.useRef(null),h=mt(e,d);return xv(),g.jsxs(g.Fragment,{children:[g.jsx(Bh,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:g.jsx(Fh,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":zv(c.open),...l,ref:h,onDismiss:()=>c.onOpenChange(!1)})}),g.jsxs(g.Fragment,{children:[g.jsx(y$,{titleId:c.titleId}),g.jsx(b$,{contentRef:d,descriptionId:c.descriptionId})]})]})}),Bv="DialogTitle",IN=w.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,i=Ds(Bv,t);return g.jsx(et.h2,{id:i.titleId,...n,ref:e})});IN.displayName=Bv;var FN="DialogDescription",BN=w.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,i=Ds(FN,t);return g.jsx(et.p,{id:i.descriptionId,...n,ref:e})});BN.displayName=FN;var zN="DialogClose",UN=w.forwardRef((s,e)=>{const{__scopeDialog:t,...n}=s,i=Ds(zN,t);return g.jsx(et.button,{type:"button",...n,ref:e,onClick:Te(s.onClick,()=>i.onOpenChange(!1))})});UN.displayName=zN;function zv(s){return s?"open":"closed"}var VN="DialogTitleWarning",[b9,HN]=z4(VN,{contentName:ga,titleName:Bv,docsSlug:"dialog"}),y$=({titleId:s})=>{const e=HN(VN),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return w.useEffect(()=>{s&&(document.getElementById(s)||console.error(t))},[t,s]),null},v$="DialogDescriptionWarning",b$=({contentRef:s,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${HN(v$).contentName}}.`;return w.useEffect(()=>{const i=s.current?.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(n))},[n,s,e]),null},x$=MN,w$=jN,$N=ON,GN=PN,qN=IN,XN=BN,S$=UN;const ta=x$,A$=w$,YN=w.forwardRef(({className:s,...e},t)=>g.jsx($N,{ref:t,className:Ve("fixed inset-0 z-50 bg-black/80",s),...e}));YN.displayName=$N.displayName;const hr=w.forwardRef(({className:s,children:e,...t},n)=>g.jsxs(A$,{children:[g.jsx(YN,{}),g.jsxs(GN,{ref:n,className:Ve("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg sm:rounded-lg",s),...t,children:[e,g.jsxs(S$,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[g.jsx(yr,{className:"h-4 w-4"}),g.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));hr.displayName=GN.displayName;const fr=({className:s,...e})=>g.jsx("div",{className:Ve("flex flex-col space-y-1.5 text-center sm:text-left",s),...e});fr.displayName="DialogHeader";const vo=({className:s,...e})=>g.jsx("div",{className:Ve("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...e});vo.displayName="DialogFooter";const pr=w.forwardRef(({className:s,...e},t)=>g.jsx(qN,{ref:t,className:Ve("text-lg font-semibold leading-none tracking-tight",s),...e}));pr.displayName=qN.displayName;const bo=w.forwardRef(({className:s,...e},t)=>g.jsx(XN,{ref:t,className:Ve("text-sm text-muted-foreground",s),...e}));bo.displayName=XN.displayName;function C$({open:s,onOpenChange:e,onCorrespondentCreated:t}){const[n,i]=w.useState(!1),[a,l]=w.useState(""),[c,d]=w.useState(" "),[h,f]=w.useState(""),[m,y]=w.useState(""),[x,A]=w.useState(""),[S,C]=w.useState(""),[E,_]=w.useState(""),[R,N]=w.useState(""),M=async()=>{if(!a){alert("  ");return}i(!0);try{const D=await fetch(`${window.location.origin}/api/resource/EDO Correspondent`,{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":ke.getCSRFToken()},body:JSON.stringify({correspondent_name:a,correspondent_type:c,organization_name:h,inn:m,address:x,contact_person:S,phone:E,email:R})});if(!D.ok){const U=await D.json();throw new Error(U.message||"Failed to create correspondent")}const O=await D.json(),I={name:O.data.name,correspondent_name:O.data.correspondent_name};t?.(I),j(),e(!1)}catch(D){console.error("Failed to create correspondent:",D),alert("   ")}finally{i(!1)}},j=()=>{l(""),d(" "),f(""),y(""),A(""),C(""),_(""),N("")};return g.jsx(ta,{open:s,onOpenChange:e,children:g.jsxs(hr,{className:"max-w-2xl",children:[g.jsx(fr,{className:"text-left",children:g.jsx(pr,{className:"text-xl",children:" "})}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs(tt,{htmlFor:"correspondent_name",children:[" ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx(In,{id:"correspondent_name",placeholder:"  ",value:a,onChange:D=>l(D.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{htmlFor:"correspondent_type",children:" "}),g.jsxs(xn,{value:c,onValueChange:d,children:[g.jsx(un,{children:g.jsx(wn,{})}),g.jsxs(dn,{children:[g.jsx(Kt,{value:" ",children:" "}),g.jsx(Kt,{value:" ",children:" "}),g.jsx(Kt,{value:" ",children:" "})]})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{htmlFor:"organization",children:"  "}),g.jsx(In,{id:"organization",placeholder:" ",value:h,onChange:D=>f(D.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{htmlFor:"inn",children:""}),g.jsx(In,{id:"inn",placeholder:"1234567890",value:m,onChange:D=>y(D.target.value)})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{htmlFor:"address",children:""}),g.jsx(dr,{id:"address",placeholder:". , . , . 1",rows:2,value:x,onChange:D=>A(D.target.value)})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{htmlFor:"contact_person",children:" "}),g.jsx(In,{id:"contact_person",placeholder:" ..",value:S,onChange:D=>C(D.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{htmlFor:"phone",children:""}),g.jsx(In,{id:"phone",placeholder:"+998 90 123 45 67",value:E,onChange:D=>_(D.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{htmlFor:"email",children:"Email"}),g.jsx(In,{id:"email",type:"email",placeholder:"info@example.com",value:R,onChange:D=>N(D.target.value)})]})]})]}),g.jsxs("div",{className:"flex items-center justify-end gap-2 pt-4 border-t",children:[g.jsx(Ue,{type:"button",variant:"outline",onClick:()=>{j(),e(!1)},children:""}),g.jsx(Ue,{type:"button",onClick:M,disabled:n,className:"bg-blue-600 hover:bg-blue-700 text-white",children:n?"...":""})]})]})})}function gy({users:s,value:e,onChange:t,placeholder:n=" ",disabled:i=!1}){const[a,l]=w.useState(!1),[c,d]=w.useState(""),h=s.find(m=>m.name===e),f=w.useMemo(()=>{if(!c.trim())return s;const m=c.toLowerCase();return s.filter(y=>(y.full_name||"").toLowerCase().includes(m)||y.name.toLowerCase().includes(m)||(y.email||"").toLowerCase().includes(m))},[s,c]);return g.jsxs("div",{className:"relative",children:[g.jsxs(Ue,{type:"button",variant:"outline",role:"combobox","aria-expanded":a,disabled:i,className:"w-full justify-between font-normal",onClick:()=>l(!a),children:[h?g.jsxs("div",{className:"flex items-center gap-2",children:[h.user_image?g.jsx("img",{src:h.user_image,alt:"",className:"w-5 h-5 rounded-full"}):g.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-300 flex items-center justify-center text-xs",children:(h.full_name||h.name).charAt(0).toUpperCase()}),g.jsx("span",{className:"truncate",children:h.full_name||h.name})]}):g.jsx("span",{className:"text-muted-foreground",children:n}),g.jsx(_5,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]}),a&&g.jsxs("div",{className:"absolute z-50 mt-1 w-full rounded-md border bg-white shadow-lg",children:[g.jsx("div",{className:"p-2 border-b",children:g.jsxs("div",{className:"relative",children:[g.jsx(Ih,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),g.jsx(In,{placeholder:"...",value:c,onChange:m=>d(m.target.value),className:"pl-8",autoFocus:!0})]})}),g.jsx("div",{className:"max-h-60 overflow-y-auto p-1",children:f.length===0?g.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"  "}):f.map(m=>g.jsxs("div",{className:Ve("flex items-center gap-2 px-2 py-2 cursor-pointer rounded hover:bg-gray-100",e===m.name&&"bg-blue-50"),onClick:()=>{t(m.name),l(!1),d("")},children:[g.jsx(gv,{className:Ve("h-4 w-4",e===m.name?"opacity-100":"opacity-0")}),m.user_image?g.jsx("img",{src:m.user_image,alt:"",className:"w-6 h-6 rounded-full"}):g.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-xs",children:(m.full_name||m.name).charAt(0).toUpperCase()}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-sm font-medium truncate",children:m.full_name||m.name}),g.jsx("div",{className:"text-xs text-muted-foreground truncate",children:m.email})]})]},m.name))})]}),a&&g.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)})]})}function yy({users:s,value:e,onChange:t,placeholder:n=" ",disabled:i=!1,excludeUsers:a=[]}){const[l,c]=w.useState(!1),[d,h]=w.useState(""),f=w.useMemo(()=>s.filter(S=>!a.includes(S.name)),[s,a]),m=w.useMemo(()=>{if(!d.trim())return f;const S=d.toLowerCase();return f.filter(C=>(C.full_name||"").toLowerCase().includes(S)||C.name.toLowerCase().includes(S)||(C.email||"").toLowerCase().includes(S))},[f,d]),y=s.filter(S=>e.includes(S.name)),x=S=>{e.includes(S)?t(e.filter(C=>C!==S)):t([...e,S])},A=S=>{t(e.filter(C=>C!==S))};return g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:Ve("min-h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm cursor-pointer",i&&"opacity-50 cursor-not-allowed"),onClick:()=>!i&&c(!l),children:y.length>0?g.jsx("div",{className:"flex flex-wrap gap-1",children:y.map(S=>g.jsxs("span",{className:"inline-flex items-center gap-1 bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs",children:[S.full_name||S.name,g.jsx(yr,{className:"h-3 w-3 cursor-pointer hover:text-blue-600",onClick:C=>{C.stopPropagation(),A(S.name)}})]},S.name))}):g.jsx("span",{className:"text-muted-foreground",children:n})}),l&&g.jsxs("div",{className:"absolute z-50 mt-1 w-full rounded-md border bg-white shadow-lg",children:[g.jsx("div",{className:"p-2 border-b",children:g.jsxs("div",{className:"relative",children:[g.jsx(Ih,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),g.jsx(In,{placeholder:"...",value:d,onChange:S=>h(S.target.value),className:"pl-8",autoFocus:!0})]})}),g.jsx("div",{className:"max-h-60 overflow-y-auto p-1",children:m.length===0?g.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"  "}):m.map(S=>g.jsxs("div",{className:Ve("flex items-center gap-2 px-2 py-2 cursor-pointer rounded hover:bg-gray-100",e.includes(S.name)&&"bg-blue-50"),onClick:()=>x(S.name),children:[g.jsx("input",{type:"checkbox",checked:e.includes(S.name),onChange:()=>{},className:"rounded border-gray-300"}),S.user_image?g.jsx("img",{src:S.user_image,alt:"",className:"w-6 h-6 rounded-full"}):g.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-300 flex items-center justify-center text-xs",children:(S.full_name||S.name).charAt(0).toUpperCase()}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("div",{className:"text-sm font-medium truncate",children:S.full_name||S.name}),g.jsx("div",{className:"text-xs text-muted-foreground truncate",children:S.email})]})]},S.name))})]}),l&&g.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)})]})}function WN({open:s,onOpenChange:e,onDocumentCreated:t,editDocument:n,onDocumentUpdated:i}){const a=!!n,[l,c]=w.useState(!1),[d,h]=w.useState(!1),[f,m]=w.useState(!1),[y,x]=w.useState(""),[A,S]=w.useState(""),[C,E]=w.useState(""),[_,R]=w.useState(""),[N,M]=w.useState(""),[j,D]=w.useState(""),[O,I]=w.useState(""),[U,$]=w.useState(""),[J,ie]=w.useState(""),[X,ae]=w.useState(""),[P,F]=w.useState(""),[B,V]=w.useState(""),[de,L]=w.useState(null),[q,te]=w.useState([]),[oe,pe]=w.useState(null),[se,Q]=w.useState([]),[ye,ve]=w.useState(""),[Re,Y]=w.useState([]),[ue,fe]=w.useState([]),[me,ee]=w.useState([]),[he,_e]=w.useState([]),[Oe,Ye]=w.useState([]),[nt,Fn]=w.useState([]),[Jn,Mr]=w.useState([]),[Gt,il]=w.useState([]),[ni,_a]=w.useState([]);w.useEffect(()=>{s&&(mn(),ks(),n?(x(n.incoming_number||""),S(n.incoming_date||""),E(n.outgoing_number||""),R(n.outgoing_date||""),M(n.title||""),D(n.correspondent||""),I(n.document_type||""),$(n.priority||""),ie(n.brief_content||""),ae(n.classification||""),F(n.delivery_method||""),V(n.reception_office||""),ve(n.executor||""),Y(n.co_executors?.map(ge=>ge.user)||[]),pe(n.main_document||null),Q(n.attachments||[])):S(new Date().toISOString().split("T")[0]))},[s,n]);const mn=async()=>{try{const ge=await ke.getCurrentUser();_a(ge.roles||[])}catch(ge){console.error("Failed to load user roles:",ge)}},ks=async()=>{try{const[ge,bt,Bn,es,Ut,Li,kr]=await Promise.all([ke.getCorrespondents(),ke.getDocumentTypes(),ke.getPriorities(),ke.getClassifications(),ke.getDeliveryMethods(),ke.getReceptionOffices(),ke.getUsers()]);fe(ge),ee(bt),_e(Bn),Ye(es),Fn(Ut),Mr(Li),il(kr)}catch(ge){console.error("Failed to load reference data:",ge)}},on=ni.includes("EDO Manager")||ni.includes("EDO Admin"),Pi=ni.includes("EDO Reception")||ni.includes("EDO Admin"),df=ge=>{ge.target.files&&ge.target.files[0]&&L(ge.target.files[0])},Dr=ge=>{if(ge.target.files){const bt=Array.from(ge.target.files);te([...q,...bt])}},gn=ge=>{te(q.filter((bt,Bn)=>Bn!==ge))},js=ge=>{Q(se.filter((bt,Bn)=>Bn!==ge))},yn=async ge=>{const bt=await ke.getCorrespondents();fe(bt),D(ge.name)},hf=async()=>{if(!j||!O){alert("  ");return}if(on&&!B){alert(" ");return}c(!0);try{h(!0);let ge=oe||"";de&&(ge=await ke.uploadFile(de));const bt=[];for(const Ut of q){const Li=await ke.uploadFile(Ut);bt.push({attachment:Li,file_name:Ut.name,file_size:Ut.size})}const Bn=[...se,...bt];h(!1);const es={incoming_number:y||void 0,incoming_date:A||void 0,outgoing_number:C||void 0,outgoing_date:_||void 0,title:N||void 0,correspondent:j,document_type:O,priority:U||void 0,brief_content:J||void 0,classification:X||void 0,delivery_method:P||void 0,main_document:ge||void 0,attachments:Bn.length>0?Bn:void 0};if(on&&B&&(es.reception_office=B),Pi&&(ye&&(es.executor=ye),Re.length>0&&(es.co_executors=Re.map(Ut=>({user:Ut})))),a&&n){const Ut=await ke.updateDocument(n.name,es);i?.(Ut)}else{const Ut=await ke.createDocument(es);t?.(Ut)}lu(),e(!1)}catch(ge){console.error(a?"Failed to update document:":"Failed to create document:",ge);let bt=a?"   ":"   ";ge?.message&&(bt+=": "+ge.message),alert(bt)}finally{c(!1),h(!1)}},lu=()=>{x(""),S(""),E(""),R(""),M(""),D(""),I(""),$(""),ie(""),ae(""),F(""),V(""),L(null),te([]),ve(""),Y([]),pe(null),Q([])};return g.jsxs(g.Fragment,{children:[g.jsx(ta,{open:s,onOpenChange:e,children:g.jsxs(hr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto custom-scrollbar",children:[g.jsx(fr,{className:"text-left",children:g.jsx(pr,{className:"text-xl",children:a?" ":" "})}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-base font-semibold",children:" "}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs(tt,{htmlFor:"incoming_number",children:["  ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx(In,{id:"incoming_number",placeholder:" ",value:y,onChange:ge=>x(ge.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs(tt,{htmlFor:"incoming_date",children:["  ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx(In,{id:"incoming_date",type:"date",value:A,onChange:ge=>S(ge.target.value)})]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{htmlFor:"outgoing_number",children:" "}),g.jsx(In,{id:"outgoing_number",placeholder:" ",value:C,onChange:ge=>E(ge.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{htmlFor:"outgoing_date",children:" "}),g.jsx(In,{id:"outgoing_date",type:"date",placeholder:"..",value:_,onChange:ge=>R(ge.target.value)})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{htmlFor:"title",children:" "}),g.jsx(In,{id:"title",placeholder:"  ",value:N,onChange:ge=>M(ge.target.value)})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs(tt,{htmlFor:"correspondent",children:[" ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsxs(xn,{value:j,onValueChange:D,children:[g.jsx(un,{className:"flex-1",children:g.jsx(wn,{placeholder:"  "})}),g.jsx(dn,{children:ue.map(ge=>g.jsx(Kt,{value:ge.name,children:ge.correspondent_name},ge.name))})]}),g.jsx(Ue,{type:"button",variant:"outline",className:"shrink-0",onClick:()=>m(!0),children:""})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs(tt,{htmlFor:"brief_content",children:["  ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx(dr,{id:"brief_content",placeholder:"   ",rows:3,value:J,onChange:ge=>ie(ge.target.value)})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs(tt,{htmlFor:"document_type",children:["  ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsxs(xn,{value:O,onValueChange:I,children:[g.jsx(un,{children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:me.map(ge=>g.jsx(Kt,{value:ge.name,children:ge.document_type_name},ge.name))})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{htmlFor:"priority",children:""}),g.jsxs(xn,{value:U,onValueChange:$,children:[g.jsx(un,{children:g.jsx(wn,{placeholder:""})}),g.jsx(dn,{children:he.map(ge=>g.jsx(Kt,{value:ge.name,children:ge.priority_name},ge.name))})]})]})]})]}),Pi&&g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-base font-semibold",children:""}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{children:""}),g.jsx(gy,{users:Gt,value:ye,onChange:ve,placeholder:" ..."})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{children:""}),g.jsx(yy,{users:Gt,value:Re,onChange:Y,excludeUsers:ye?[ye]:[],placeholder:" ..."})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-base font-semibold",children:" "}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[on&&g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{htmlFor:"reception_office",children:" *"}),g.jsxs(xn,{value:B,onValueChange:V,children:[g.jsx(un,{children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:Jn.map(ge=>g.jsx(Kt,{value:ge.name,children:ge.reception_office_name},ge.name))})]})]}),g.jsxs("div",{className:`space-y-2 ${on?"":"col-span-2"}`,children:[g.jsx(tt,{htmlFor:"delivery_method",children:" "}),g.jsxs(xn,{value:P,onValueChange:F,children:[g.jsx(un,{children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:nt.map(ge=>g.jsx(Kt,{value:ge.name,children:ge.delivery_method_name},ge.name))})]})]})]}),g.jsx("div",{className:"grid grid-cols-2 gap-4",children:g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{htmlFor:"classification",children:""}),g.jsxs(xn,{value:X,onValueChange:ae,children:[g.jsx(un,{children:g.jsx(wn,{placeholder:""})}),g.jsx(dn,{children:Oe.map(ge=>g.jsx(Kt,{value:ge.name,children:ge.classification_name},ge.name))})]})]})})]})]}),g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-base font-semibold",children:" "}),g.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[g.jsx(E4,{className:"w-12 h-12 mx-auto text-muted-foreground mb-3"}),g.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"      "}),g.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"PDF, DOC, DOCX  10 "}),g.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:".pdf,.doc,.docx",onChange:df}),g.jsx(Ue,{type:"button",variant:"outline",size:"sm",onClick:()=>document.getElementById("file-upload")?.click(),children:" "}),oe&&!de&&g.jsxs("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[g.jsx(gs,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm font-medium text-green-900 truncate",children:oe.split("/").pop()}),g.jsx("p",{className:"text-xs text-green-600",children:" "})]}),g.jsx("button",{type:"button",onClick:()=>pe(null),className:"text-green-600 hover:text-red-600",title:" ",children:g.jsx(yr,{className:"w-4 h-4"})})]}),de&&g.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center gap-2",children:[g.jsx(gs,{className:"w-5 h-5 text-blue-600 flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm font-medium text-blue-900 truncate",children:de.name}),g.jsxs("p",{className:"text-xs text-blue-600",children:[(de.size/1024).toFixed(1),"  ()"]})]}),g.jsx("button",{type:"button",onClick:()=>L(null),className:"text-blue-600 hover:text-blue-800",children:g.jsx(yr,{className:"w-4 h-4"})})]})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-base font-semibold",children:""}),g.jsxs("div",{className:"space-y-2",children:[g.jsx("input",{type:"file",id:"attachments-upload",className:"hidden",multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png",onChange:Dr}),g.jsx(Ue,{type:"button",variant:"outline",size:"sm",className:"w-full",onClick:()=>document.getElementById("attachments-upload")?.click(),children:" "}),se.length>0&&g.jsxs("div",{className:"space-y-2 mt-2",children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:" :"}),se.map((ge,bt)=>g.jsxs("div",{className:"p-2 bg-green-50 border border-green-200 rounded flex items-center gap-2",children:[g.jsx(gs,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm text-green-900 truncate",children:ge.file_name}),ge.file_size&&g.jsxs("p",{className:"text-xs text-green-600",children:[(ge.file_size/1024).toFixed(1)," "]})]}),g.jsx("button",{type:"button",onClick:()=>js(bt),className:"text-green-600 hover:text-red-600",title:" ",children:g.jsx(yr,{className:"w-4 h-4"})})]},`existing-${bt}`))]}),q.length>0&&g.jsxs("div",{className:"space-y-2 mt-2",children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:" :"}),q.map((ge,bt)=>g.jsxs("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded flex items-center gap-2",children:[g.jsx(gs,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:"text-sm text-blue-900 truncate",children:ge.name}),g.jsxs("p",{className:"text-xs text-blue-600",children:[(ge.size/1024).toFixed(1)," "]})]}),g.jsx("button",{type:"button",onClick:()=>gn(bt),className:"text-blue-600 hover:text-red-600",children:g.jsx(yr,{className:"w-4 h-4"})})]},bt))]})]})]}),g.jsxs("div",{className:"space-y-3 text-sm",children:[g.jsx("h3",{className:"text-base font-semibold",children:""}),g.jsxs("div",{className:"space-y-2 text-muted-foreground",children:[g.jsxs("p",{children:[g.jsx("strong",{children:" :"}),"    "]}),g.jsxs("p",{children:[g.jsx("strong",{children:":"}),"    "]}),g.jsxs("p",{children:[g.jsx("strong",{children:" :"}),"    "]})]})]})]})]}),g.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[g.jsx(Ue,{type:"button",variant:"outline",onClick:()=>{lu(),e(!1)},children:""}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx(Ue,{type:"button",variant:"outline",disabled:l,children:" "}),g.jsx(Ue,{type:"button",onClick:hf,disabled:l||d,className:"bg-blue-600 hover:bg-blue-700 text-white",children:d?" ...":l?a?"...":"...":a?"":""})]})]})]})}),g.jsx(C$,{open:f,onOpenChange:m,onCorrespondentCreated:yn})]})}function E$({documents:s,selectedDocument:e,onSelectDocument:t,loading:n,error:i,onDocumentsRefresh:a,onFiltersChange:l}){const{t:c}=ei(),[d,h]=w.useState([]),[f,m]=w.useState(!1),[y,x]=w.useState(!1),[A,S]=w.useState(""),[C,E]=w.useState(""),[_,R]=w.useState(""),[N,M]=w.useState(""),[j,D]=w.useState(""),O=w.useRef(null),[I,U]=w.useState([]),[$,J]=w.useState([]),[ie,X]=w.useState([]),[ae,P]=w.useState([]);w.useEffect(()=>{L(),F()},[]);const F=async()=>{try{const[se,Q,ye,ve]=await Promise.all([ke.getStatuses().catch(()=>[]),ke.getDocumentTypes().catch(()=>[]),ke.getPriorities().catch(()=>[]),ke.getCorrespondents().catch(()=>[])]);U(se||[]),J(Q||[]),X(ye||[]),P(ve||[])}catch(se){console.error("Failed to load filter data:",se),U([]),J([]),X([]),P([])}},B=w.useCallback(()=>{l&&l({search:A.trim()||void 0,status:C||void 0,document_type:_||void 0,priority:N||void 0,correspondent:j||void 0})},[A,C,_,N,j,l]);w.useEffect(()=>{const se=setTimeout(()=>{B()},500);return()=>clearTimeout(se)},[A,C,_,N,j,B]);const V=()=>{S(""),E(""),R(""),M(""),D("")},de=[C,_,N,j].filter(Boolean).length,L=async()=>{try{const se=await ke.getCurrentUser();h(se.roles||[])}catch(se){console.error("Failed to load user roles:",se)}},q=d.includes("EDO Admin")||d.includes("EDO Manager"),te=()=>{m(!0)},oe=async se=>{a&&(await a(),se&&setTimeout(()=>{t(se)},100))},pe=se=>se===c("documents.status.signed")||se===""?"default":se===c("documents.status.pending")||se===" "?"secondary":se===c("documents.status.archived")||se===""?"outline":"secondary";return n?g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"p-3 border-b",children:g.jsx(tc,{className:"h-9 w-full"})}),g.jsx("div",{className:"flex-1 overflow-y-auto",children:Array.from({length:5}).map((se,Q)=>g.jsxs("div",{className:"p-4 border-b",children:[g.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[g.jsx(tc,{className:"h-4 w-3/4"}),g.jsx(tc,{className:"h-5 w-16 shrink-0"})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx(tc,{className:"h-3 w-24"}),g.jsx(tc,{className:"h-3 w-20"})]})]},Q))})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"p-3 border-b",children:g.jsxs("div",{className:"relative",children:[g.jsx(Ih,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),g.jsx("input",{ref:O,type:"text",placeholder:c("documentSidebar.searchPlaceholder"),value:A,onChange:se=>{const Q=se.target.value,ye=document.activeElement===se.target;S(Q),ye&&O.current&&requestAnimationFrame(()=>{if(O.current){O.current.focus();const ve=O.current.value.length;O.current.setSelectionRange(ve,ve)}})},className:"w-full pl-9 pr-3 py-2 text-sm border rounded-md bg-background focus:outline-none focus:ring-2 focus:ring-ring"})]})}),g.jsx("div",{className:"p-3 border-b bg-muted/30",children:g.jsxs(Ue,{variant:"ghost",size:"sm",onClick:()=>x(!y),className:"w-full justify-between h-9",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(U5,{className:"w-4 h-4"}),g.jsx("span",{className:"text-sm font-medium",children:""}),de>0&&g.jsx(sy,{variant:"secondary",className:"ml-1 h-5 min-w-5 px-1.5 text-xs",children:de})]}),y?g.jsx(Q_,{className:"w-4 h-4 text-muted-foreground"}):g.jsx(Lh,{className:"w-4 h-4 text-muted-foreground"})]})}),y&&g.jsxs("div",{className:"p-3 border-b bg-muted/20 space-y-3 animate-in slide-in-from-top-2 duration-200",children:[g.jsxs("div",{className:"space-y-1.5",children:[g.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[g.jsx(x4,{className:"w-3.5 h-3.5"}),""]}),g.jsxs(xn,{value:C||void 0,onValueChange:se=>E(se||""),children:[g.jsx(un,{className:"h-9 text-sm",children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:I.map(se=>g.jsx(Kt,{value:se.name,children:se.status_name},se.name))})]})]}),g.jsxs("div",{className:"space-y-1.5",children:[g.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[g.jsx(B5,{className:"w-3.5 h-3.5"})," "]}),g.jsxs(xn,{value:_||void 0,onValueChange:se=>R(se||""),children:[g.jsx(un,{className:"h-9 text-sm",children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:$.map(se=>g.jsx(Kt,{value:se.name,children:se.document_type_name},se.name))})]})]}),g.jsxs("div",{className:"space-y-1.5",children:[g.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[g.jsx(R5,{className:"w-3.5 h-3.5"}),""]}),g.jsxs(xn,{value:N||void 0,onValueChange:se=>M(se||""),children:[g.jsx(un,{className:"h-9 text-sm",children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:ie.map(se=>g.jsx(Kt,{value:se.name,children:se.priority_name},se.name))})]})]}),g.jsxs("div",{className:"space-y-1.5",children:[g.jsxs("label",{className:"text-xs font-medium text-muted-foreground flex items-center gap-1.5",children:[g.jsx(g5,{className:"w-3.5 h-3.5"}),""]}),g.jsxs(xn,{value:j||void 0,onValueChange:se=>D(se||""),children:[g.jsx(un,{className:"h-9 text-sm",children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:ae.map(se=>g.jsx(Kt,{value:se.name,children:se.correspondent_name},se.name))})]})]}),de>0&&g.jsxs(Ue,{variant:"outline",size:"sm",onClick:V,className:"w-full h-9 text-sm",children:[g.jsx(yr,{className:"w-4 h-4 mr-2"}),"  (",de,")"]})]}),q&&g.jsx("div",{className:"p-3 border-b bg-muted/30",children:g.jsxs(Ue,{onClick:te,className:"w-full",size:"sm",children:[g.jsx(Z_,{className:"w-4 h-4 mr-2"}),c("documentSidebar.addDocument")]})}),i&&g.jsx("div",{className:"p-3 border-b",children:g.jsxs("div",{className:"text-sm text-destructive bg-destructive/10 p-2 rounded",children:[c("common.error"),": ",i]})}),g.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:s.length===0&&!n?g.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[g.jsx(gs,{className:"w-12 h-12 text-muted-foreground mb-3"}),g.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:c("documentSidebar.noDocuments")}),(A||de>0)&&g.jsx("p",{className:"text-xs text-muted-foreground",children:"     "})]}):s.map(se=>g.jsxs("div",{onClick:()=>t(se),className:Ve("p-4 border-b cursor-pointer transition-colors hover:bg-muted/50",e?.name===se.name&&"bg-muted"),children:[g.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[g.jsx("h3",{className:"font-medium text-sm line-clamp-2",children:se.title}),g.jsx(sy,{variant:pe(se.status),className:"text-xs shrink-0",children:se.status})]}),g.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[se.document_type&&g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx(gs,{className:"w-3 h-3"}),se.document_type]}),se.document_date&&g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx(v5,{className:"w-3 h-3"}),new Date(se.document_date).toLocaleDateString("ru-RU")]})]})]},se.name))})]}),g.jsx(WN,{open:f,onOpenChange:m,onDocumentCreated:oe})]})}const _$="_editor_191r9_2",T$={editor:_$};function R$({value:s,onChange:e,placeholder:t}){const n=w.useRef(null),i=w.useRef(null),a=w.useRef(!0),[l,c]=w.useState(!1);w.useEffect(()=>{a.current&&n.current&&s&&(n.current.innerHTML=s,a.current=!1)},[]),w.useEffect(()=>{n.current&&s===""&&n.current.innerHTML!==""&&(n.current.innerHTML="")},[s]);const d=()=>{n.current&&e(n.current.innerHTML)},h=()=>{c(!0)},f=()=>{c(!1)},m=(x,A)=>{document.execCommand(x,!1,A),n.current?.focus()},y=()=>{const x=window.prompt(" URL:");x&&m("createLink",x)};return g.jsxs(vr.div,{ref:i,animate:{scale:l?1.005:1},transition:{type:"spring",stiffness:400,damping:30},className:`relative border border-input rounded-xl overflow-hidden focus-within:border-primary focus-within:ring-1 focus-within:ring-primary/20 transition-all bg-background ${T$.editor}`,children:[g.jsxs("div",{className:"flex items-center gap-1 px-4 py-2.5 border-b border-border/60 bg-slate-50/50",children:[g.jsx("button",{type:"button",onClick:()=>m("bold"),className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:" (Ctrl+B)",children:g.jsx(p5,{className:"h-4 w-4",strokeWidth:2.5})}),g.jsx("button",{type:"button",onClick:()=>m("italic"),className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:" (Ctrl+I)",children:g.jsx(X5,{className:"h-4 w-4",strokeWidth:2.5})}),g.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1.5"}),g.jsx("button",{type:"button",onClick:()=>m("insertUnorderedList"),className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:" ",children:g.jsx(J5,{className:"h-4 w-4",strokeWidth:2.5})}),g.jsx("button",{type:"button",onClick:()=>m("insertOrderedList"),className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:" ",children:g.jsx(Q5,{className:"h-4 w-4",strokeWidth:2.5})}),g.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1.5"}),g.jsx("button",{type:"button",onClick:y,className:"p-1.5 rounded-lg hover:bg-white hover:shadow-sm transition-all duration-200 text-slate-500 hover:text-slate-900 active:scale-95",title:"  (Ctrl+K)",children:g.jsx(W5,{className:"h-4 w-4",strokeWidth:2.5})})]}),g.jsx("div",{ref:n,contentEditable:!0,onInput:d,onFocus:h,onBlur:f,className:"min-h-[140px] max-h-[500px] overflow-y-auto px-4 py-3.5 text-[15px] leading-relaxed focus:outline-none","data-placeholder":t,style:{wordBreak:"break-word"}})]})}const N$="_customScrollbar_1a8f8_2",M$="_commentContent_1a8f8_31",U1={customScrollbar:N$,commentContent:M$};function D$({doctype:s,docname:e,refreshTrigger:t}){const{t:n}=ei(),[i,a]=w.useState([]),[l,c]=w.useState(5),[d,h]=w.useState(""),[f,m]=w.useState(!1),[y,x]=w.useState(!1),[A,S]=w.useState(null),[C,E]=w.useState(!1),_=w.useRef(null),R=w.useRef(null),N=w.useRef(null);w.useEffect(()=>{j(),M()},[s,e,t]);const M=async()=>{try{const X=await ke.getCurrentUser();E(X.roles?.includes("EDO Admin")||!1)}catch(X){console.error("Failed to check admin role:",X),E(!1)}},j=async()=>{m(!0);try{const ae=(await ke.getComments(s,e)).filter(P=>{const F=P.content||"",B=document.createElement("div");B.innerHTML=F;const V=(B.textContent||B.innerText||"").toLowerCase();return!["","resolution","   ",":",":","executor:","co-executor:"].some(q=>V.includes(q.toLowerCase()))});a(ae.reverse())}catch(X){console.error("Failed to load comments:",X)}finally{m(!1)}},D=X=>{const ae=X.currentTarget;ae.scrollHeight-ae.scrollTop<=ae.clientHeight+50&&l<i.length&&c(F=>Math.min(F+5,i.length))},O=i.slice(0,l),I=l<i.length,U=async X=>{X.preventDefault();const ae=document.createElement("div");if(ae.innerHTML=d,!!(ae.textContent||ae.innerText||"").trim()){x(!0);try{const F=await ke.addComment(s,e,d);h(""),S(F.name),await new Promise(B=>setTimeout(B,50)),await j(),setTimeout(()=>{R.current&&R.current.scrollTo({top:0,behavior:"smooth"})},100)}catch(F){console.error("Failed to add comment:",F)}finally{x(!1)}}},$=X=>{const ae=new Date(X);return new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(ae)},J=X=>X&&X.split(" ").map(ae=>ae[0]).join("").toUpperCase().slice(0,2)||"U",ie=async X=>{if(!C)return;const ae=n("deleteCommentConfirm")||" ,     ?";if(confirm(ae))try{await ke.deleteComment(X),a(P=>P.filter(F=>F.name!==X))}catch(P){console.error("Failed to delete comment:",P);const F=n("deleteCommentError")||"   ";alert(F)}};return g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[g.jsx(s4,{className:"h-4 w-4"}),n("comments"),g.jsxs("span",{className:"text-muted-foreground",children:["(",i.length,")"]})]}),f?g.jsxs("div",{className:"text-sm text-muted-foreground",children:[n("loading"),"..."]}):g.jsx("div",{ref:R,className:`pr-2 ${U1.customScrollbar}`,onScroll:D,style:{maxHeight:"300px",overflowY:"scroll"},children:g.jsxs("div",{ref:_,className:"space-y-3",children:[g.jsx(Nc,{mode:"popLayout",children:O.map(X=>{const ae=X.name===A;return g.jsxs(vr.div,{layout:!0,initial:ae?{opacity:0,x:-100}:!1,animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{type:"spring",stiffness:400,damping:30,mass:.8},className:"flex gap-3",children:[g.jsx("div",{className:"h-8 w-8 rounded-full bg-primary flex items-center justify-center shrink-0",children:g.jsx("span",{className:"text-xs font-medium text-primary-foreground",children:J(X.comment_by)})}),g.jsxs("div",{className:"flex-1 space-y-1",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"text-sm font-medium",children:X.comment_by}),g.jsx("span",{className:"text-xs text-muted-foreground",children:$(X.creation)})]}),C&&g.jsx(Ue,{variant:"ghost",size:"sm",onClick:()=>ie(X.name),className:"h-6 w-6 p-0 text-muted-foreground hover:text-destructive",children:g.jsx(J_,{className:"h-3 w-3"})})]}),g.jsx("div",{className:`text-sm text-foreground ${U1.commentContent}`,dangerouslySetInnerHTML:{__html:X.content}})]})]},X.name)})}),I&&g.jsx("div",{className:"text-center py-2 text-xs text-muted-foreground",children:"    ..."})]})}),g.jsxs(vr.form,{ref:N,onSubmit:U,className:"space-y-2",animate:y?{scale:.98}:{scale:1},transition:{type:"spring",stiffness:500,damping:30},children:[g.jsx(R$,{value:d,onChange:h,placeholder:n("addComment")}),g.jsxs(Ue,{type:"submit",size:"sm",disabled:y,children:[g.jsx(h4,{className:"h-4 w-4 mr-2"}),n(y?"sending":"send")]})]})]})}const KN=w.forwardRef(({className:s,value:e=0,...t},n)=>g.jsx("div",{ref:n,className:Ve("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...t,children:g.jsx("div",{className:"h-full bg-primary transition-all duration-300 ease-in-out",style:{width:`${Math.min(100,Math.max(0,e))}%`}})}));KN.displayName="Progress";const bn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),vy=[.001,0,0,.001,0,0],gg=1.35,Xn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},qs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Pc="pdfjs_internal_editor_",Fe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Qe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},QN={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},sn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},xc={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},jt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},xo={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Jc={ERRORS:0,WARNINGS:1,INFOS:5},Ho={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Pd={moveTo:0,lineTo:1,curveTo:2,closePath:3},ZN={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let tf=Jc.WARNINGS;function k$(s){Number.isInteger(s)&&(tf=s)}function j$(){return tf}function nf(s){tf>=Jc.INFOS&&console.info(`Info: ${s}`)}function Be(s){tf>=Jc.WARNINGS&&console.warn(`Warning: ${s}`)}function pt(s){throw new Error(s)}function Je(s,e){s||pt(e)}function O$(s){switch(s?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Uv(s,e=null,t=null){if(!s)return null;if(t&&typeof s=="string"&&(t.addDefaultProtocol&&s.startsWith("www.")&&s.match(/\./g)?.length>=2&&(s=`http://${s}`),t.tryConvertEncoding))try{s=B$(s)}catch{}const n=e?URL.parse(s,e):URL.parse(s);return O$(n)?n:null}function Vv(s,e,t=!1){const n=URL.parse(s);return n?(n.hash=e,n.href):t&&Uv(s,"http://example.com")?s.split("#",1)[0]+`${e?`#${e}`:""}`:""}function $e(s,e,t,n=!1){return Object.defineProperty(s,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Ca=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class V1 extends Ca{constructor(e,t){super(e,"PasswordException"),this.code=t}}class yg extends Ca{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Ah extends Ca{constructor(e){super(e,"InvalidPDFException")}}class Lc extends Ca{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class P$ extends Ca{constructor(e){super(e,"FormatError")}}class Di extends Ca{constructor(e){super(e,"AbortException")}}function JN(s){(typeof s!="object"||s?.length===void 0)&&pt("Invalid argument for bytesToString");const e=s.length,t=8192;if(e<t)return String.fromCharCode.apply(null,s);const n=[];for(let i=0;i<e;i+=t){const a=Math.min(i+t,e),l=s.subarray(i,a);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function eu(s){typeof s!="string"&&pt("Invalid argument for stringToBytes");const e=s.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=s.charCodeAt(n)&255;return t}function L$(s){return String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255)}function I$(){const s=new Uint8Array(4);return s[0]=1,new Uint32Array(s.buffer,0,1)[0]===1}function F$(){try{return new Function(""),!0}catch{return!1}}class Qt{static get isLittleEndian(){return $e(this,"isLittleEndian",I$())}static get isEvalSupported(){return $e(this,"isEvalSupported",F$())}static get isOffscreenCanvasSupported(){return $e(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return $e(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return $e(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return $e(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const vg=Array.from(Array(256).keys(),s=>s.toString(16).padStart(2,"0"));class xe{static makeHexColor(e,t,n){return`#${vg[e]}${vg[t]}${vg[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const i=e[n],a=e[n+1];e[n]=i*t[0]+a*t[2]+t[4],e[n+1]=i*t[1]+a*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const i=t[0],a=t[1],l=t[2],c=t[3],d=t[4],h=t[5];for(let f=0;f<6;f+=2){const m=e[n+f],y=e[n+f+1];e[n+f]=m*i+y*l+d,e[n+f+1]=m*a+y*c+h}}static applyInverseTransform(e,t){const n=e[0],i=e[1],a=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/a,e[1]=(-n*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/a}static axialAlignedBoundingBox(e,t,n){const i=t[0],a=t[1],l=t[2],c=t[3],d=t[4],h=t[5],f=e[0],m=e[1],y=e[2],x=e[3];let A=i*f+d,S=A,C=i*y+d,E=C,_=c*m+h,R=_,N=c*x+h,M=N;if(a!==0||l!==0){const j=a*f,D=a*y,O=l*m,I=l*x;A+=O,E+=O,C+=I,S+=I,_+=j,M+=j,N+=D,R+=D}n[0]=Math.min(n[0],A,C,S,E),n[1]=Math.min(n[1],_,N,R,M),n[2]=Math.max(n[2],A,C,S,E),n[3]=Math.max(n[3],_,N,R,M)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],i=e[1],a=e[2],l=e[3],c=n**2+i**2,d=n*a+i*l,h=a**2+l**2,f=(c+h)/2,m=Math.sqrt(f**2-(c*h-d**2));t[0]=Math.sqrt(f+m||1),t[1]=Math.sqrt(f-m||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),l=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>l?null:[n,a,i,l]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,i,a){a[0]=Math.min(a[0],e,n),a[1]=Math.min(a[1],t,i),a[2]=Math.max(a[2],e,n),a[3]=Math.max(a[3],t,i)}static#e(e,t,n,i,a,l,c,d,h,f){if(h<=0||h>=1)return;const m=1-h,y=h*h,x=y*h,A=m*(m*(m*e+3*h*t)+3*y*n)+x*i,S=m*(m*(m*a+3*h*l)+3*y*c)+x*d;f[0]=Math.min(f[0],A),f[1]=Math.min(f[1],S),f[2]=Math.max(f[2],A),f[3]=Math.max(f[3],S)}static#t(e,t,n,i,a,l,c,d,h,f,m,y){if(Math.abs(h)<1e-12){Math.abs(f)>=1e-12&&this.#e(e,t,n,i,a,l,c,d,-m/f,y);return}const x=f**2-4*m*h;if(x<0)return;const A=Math.sqrt(x),S=2*h;this.#e(e,t,n,i,a,l,c,d,(-f+A)/S,y),this.#e(e,t,n,i,a,l,c,d,(-f-A)/S,y)}static bezierBoundingBox(e,t,n,i,a,l,c,d,h){h[0]=Math.min(h[0],e,c),h[1]=Math.min(h[1],t,d),h[2]=Math.max(h[2],e,c),h[3]=Math.max(h[3],t,d),this.#t(e,n,a,c,t,i,l,d,3*(-e+3*(n-a)+c),6*(e-2*n+a),3*(n-e),h),this.#t(e,n,a,c,t,i,l,d,3*(-t+3*(i-l)+d),6*(t-2*i+l),3*(i-t),h)}}function B$(s){return decodeURIComponent(escape(s))}let bg=null,H1=null;function eM(s){return bg||(bg=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,H1=new Map([["","t"]])),s.replaceAll(bg,(e,t,n)=>t?t.normalize("NFKC"):H1.get(n))}function Hv(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const s=new Uint8Array(32);return crypto.getRandomValues(s),JN(s)}const $v="pdfjs_internal_id_";function z$(s,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,i,...a]=t;if(!s(n)&&!Number.isInteger(n)||!e(i))return!1;const l=a.length;let c=!0;switch(i.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;c=!1;break;default:return!1}for(const d of a)if(!(typeof d=="number"||c&&d===null))return!1;return!0}function cn(s,e,t){return Math.min(Math.max(s,e),t)}function tM(s){return Uint8Array.prototype.toBase64?s.toBase64():btoa(JN(s))}function U$(s){return Uint8Array.fromBase64?Uint8Array.fromBase64(s):eu(atob(s))}typeof Promise.try!="function"&&(Promise.try=function(s,...e){return new Promise(t=>{t(s(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(s){return s.reduce((e,t)=>e+t,0)});class Ic{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function i(a){if(!a)return;let l=null;const c=a.name;if(c==="#text")l=a.value;else if(Ic.shouldBuildText(c))a?.attributes?.textContent?l=a.attributes.textContent:a.value&&(l=a.value);else return;if(l!==null&&t.push({str:l}),!!a.children)for(const d of a.children)i(d)}return i(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class Gv{static setupStorage(e,t,n,i,a){const l=i.getValue(t,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(e.textContent=l.value),a==="print")break;e.addEventListener("input",c=>{i.setValue(t,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?e.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",c=>{i.setValue(t,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&e.setAttribute("value",l.value),a==="print")break;e.addEventListener("input",c=>{i.setValue(t,{value:c.target.value})})}break;case"select":if(l.value!==null){e.setAttribute("value",l.value);for(const c of n.children)c.attributes.value===l.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}e.addEventListener("input",c=>{const d=c.target.options,h=d.selectedIndex===-1?"":d[d.selectedIndex].value;i.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:i,linkService:a}){const{attributes:l}=t,c=e instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${i}`);for(const[d,h]of Object.entries(l))if(h!=null)switch(d){case"class":h.length&&e.setAttribute(d,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!c||d!=="href"&&d!=="newWindow")&&e.setAttribute(d,h)}c&&a.addLinkAttributes(e,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(e,l.dataId,t,n)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,a=e.intent||"display",l=document.createElement(i.name);i.attributes&&this.setAttributes({html:l,element:i,intent:a,linkService:n});const c=a!=="richText",d=e.div;if(d.append(l),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=m}c&&d.setAttribute("class","xfaLayer xfaFont");const h=[];if(i.children.length===0){if(i.value){const m=document.createTextNode(i.value);l.append(m),c&&Ic.shouldBuildText(i.name)&&h.push(m)}return{textDivs:h}}const f=[[i,-1,l]];for(;f.length>0;){const[m,y,x]=f.at(-1);if(y+1===m.children.length){f.pop();continue}const A=m.children[++f.at(-1)[1]];if(A===null)continue;const{name:S}=A;if(S==="#text"){const E=document.createTextNode(A.value);h.push(E),x.append(E);continue}const C=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,S):document.createElement(S);if(x.append(C),A.attributes&&this.setAttributes({html:C,element:A,storage:t,intent:a,linkService:n}),A.children?.length>0)f.push([A,-1,C]);else if(A.value){const E=document.createTextNode(A.value);c&&Ic.shouldBuildText(S)&&h.push(E),C.append(E)}}for(const m of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Si="http://www.w3.org/2000/svg";class ya{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function nl(s,e="text"){if(dc(s,document.baseURI)){const t=await fetch(s);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const i=new XMLHttpRequest;i.open("GET",s,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class tu{constructor({viewBox:e,userUnit:t,scale:n,rotation:i,offsetX:a=0,offsetY:l=0,dontFlip:c=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=i,this.offsetX=a,this.offsetY=l,n*=t;const d=(e[2]+e[0])/2,h=(e[3]+e[1])/2;let f,m,y,x;switch(i%=360,i<0&&(i+=360),i){case 180:f=-1,m=0,y=0,x=1;break;case 90:f=0,m=1,y=1,x=0;break;case 270:f=0,m=-1,y=-1,x=0;break;case 0:f=1,m=0,y=0,x=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(y=-y,x=-x);let A,S,C,E;f===0?(A=Math.abs(h-e[1])*n+a,S=Math.abs(d-e[0])*n+l,C=(e[3]-e[1])*n,E=(e[2]-e[0])*n):(A=Math.abs(d-e[0])*n+a,S=Math.abs(h-e[1])*n+l,C=(e[2]-e[0])*n,E=(e[3]-e[1])*n),this.transform=[f*n,m*n,y*n,x*n,A-f*n*d-y*n*h,S-m*n*d-x*n*h],this.width=C,this.height=E}get rawDims(){const e=this.viewBox;return $e(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new tu({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:a})}convertToViewportPoint(e,t){const n=[e,t];return xe.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];xe.applyTransform(t,this.transform);const n=[e[2],e[3]];return xe.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return xe.applyInverseTransform(n,this.transform),n}}class sf extends Ca{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function nu(s){const e=s.length;let t=0;for(;t<e&&s[t].trim()==="";)t++;return s.substring(t,t+5).toLowerCase()==="data:"}function rf(s){return typeof s=="string"&&/\.pdf$/i.test(s)}function nM(s){return[s]=s.split(/[#?]/,1),s.substring(s.lastIndexOf("/")+1)}function sM(s,e="document.pdf"){if(typeof s!="string")return e;if(nu(s))return Be('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(s);if(!n)return e;const i=c=>{try{let d=decodeURIComponent(c);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:c):d}catch{return c}},a=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(a.test(l))return i(l);if(n.searchParams.size>0){const c=Array.from(n.searchParams.values()).reverse();for(const h of c)if(a.test(h))return i(h);const d=Array.from(n.searchParams.keys()).reverse();for(const h of d)if(a.test(h))return i(h)}if(n.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(d)return i(d[0])}return e}class $1{started=Object.create(null);times=[];time(e){e in this.started&&Be(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Be(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:i,end:a}of this.times)e.push(`${n.padEnd(t)} ${a-i}ms
`);return e.join("")}}function dc(s,e){const t=e?URL.parse(s,e):URL.parse(s);return t?.protocol==="http:"||t?.protocol==="https:"}function Zn(s){s.preventDefault()}function Ct(s){s.preventDefault(),s.stopPropagation()}function V$(s){console.log("Deprecated API usage: "+s)}class Ch{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const n=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let l=parseInt(t[4],10);l=l>=0&&l<=23?l:0;let c=parseInt(t[5],10);c=c>=0&&c<=59?c:0;let d=parseInt(t[6],10);d=d>=0&&d<=59?d:0;const h=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let m=parseInt(t[9],10)||0;return m=m>=0&&m<=59?m:0,h==="-"?(l+=f,c+=m):h==="+"&&(l-=f,c-=m),new Date(Date.UTC(n,i,a,l,c,d))}}function iM(s,{scale:e=1,rotation:t=0}){const{width:n,height:i}=s.attributes.style,a=[0,0,parseInt(n),parseInt(i)];return new tu({viewBox:a,userUnit:1,scale:e,rotation:t})}function sl(s){if(s.startsWith("#")){const e=parseInt(s.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return s.startsWith("rgb(")?s.slice(4,-1).split(",").map(e=>parseInt(e)):s.startsWith("rgba(")?s.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Be(`Not a valid color format: "${s}"`),[0,0,0])}function H$(s){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of s.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;s.set(t,sl(n))}e.remove()}function At(s){const{a:e,b:t,c:n,d:i,e:a,f:l}=s.getTransform();return[e,t,n,i,a,l]}function zs(s){const{a:e,b:t,c:n,d:i,e:a,f:l}=s.getTransform().invertSelf();return[e,t,n,i,a,l]}function Cr(s,e,t=!1,n=!0){if(e instanceof tu){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:l}=s,c=Qt.isCSSRoundSupported,d=`var(--total-scale-factor) * ${i}px`,h=`var(--total-scale-factor) * ${a}px`,f=c?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,m=c?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!t||e.rotation%180===0?(l.width=f,l.height=m):(l.width=m,l.height=f)}n&&s.setAttribute("data-main-rotation",e.rotation)}class Ms{constructor(){const{pixelRatio:e}=Ms;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,i,a=-1){let l=1/0,c=1/0,d=1/0;n=Ms.capPixels(n,a),n>0&&(l=Math.sqrt(n/(e*t))),i!==-1&&(c=i/e,d=i/t);const h=Math.min(l,c,d);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const Eh=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class $${static get isDarkMode(){return $e(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class rM{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),$e(this,"commentForegroundColor",sl(n))}}function aM(s,e,t,n){n=Math.min(Math.max(n??1,0),1);const i=255*(1-n);return s=Math.round(s*n+i),e=Math.round(e*n+i),t=Math.round(t*n+i),[s,e,t]}function G1(s,e){const t=s[0]/255,n=s[1]/255,i=s[2]/255,a=Math.max(t,n,i),l=Math.min(t,n,i),c=(a+l)/2;if(a===l)e[0]=e[1]=0;else{const d=a-l;switch(e[1]=c<.5?d/(a+l):d/(2-a-l),a){case t:e[0]=((n-i)/d+(n<i?6:0))*60;break;case n:e[0]=((i-t)/d+2)*60;break;case i:e[0]=((t-n)/d+4)*60;break}}e[2]=c}function by(s,e){const t=s[0],n=s[1],i=s[2],a=(1-Math.abs(2*i-1))*n,l=a*(1-Math.abs(t/60%2-1)),c=i-a/2;switch(Math.floor(t/60)){case 0:e[0]=a+c,e[1]=l+c,e[2]=c;break;case 1:e[0]=l+c,e[1]=a+c,e[2]=c;break;case 2:e[0]=c,e[1]=a+c,e[2]=l+c;break;case 3:e[0]=c,e[1]=l+c,e[2]=a+c;break;case 4:e[0]=l+c,e[1]=c,e[2]=a+c;break;case 5:case 6:e[0]=a+c,e[1]=c,e[2]=l+c;break}}function q1(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function X1(s,e,t){by(s,t),t.map(q1);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];by(e,t),t.map(q1);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}const Y1=new Map;function oM(s,e){const t=s[0]+s[1]*256+s[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=Y1.get(t);if(n)return n;const i=new Float32Array(9),a=i.subarray(0,3),l=i.subarray(3,6);G1(s,l);const c=i.subarray(6,9);G1(e,c);const d=c[2]<.5,h=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),X1(l,c,a)<h){let f,m;d?(f=l[2],m=1):(f=0,m=l[2]);const y=.005;for(;m-f>y;){const x=l[2]=(f+m)/2;d===X1(l,c,a)<h?f=x:m=x}l[2]=d?m:f}return by(l,a),n=xe.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),Y1.set(t,n),n}function qv({html:s,dir:e,className:t},n){const i=document.createDocumentFragment();if(typeof s=="string"){const a=document.createElement("p");a.dir=e||"auto";const l=s.split(/(?:\r\n?|\n)/);for(let c=0,d=l.length;c<d;++c){const h=l[c];a.append(document.createTextNode(h)),c<d-1&&a.append(document.createElement("br"))}i.append(a)}else Gv.render({xfaHtml:s,div:i,intent:"richText"});i.firstChild.classList.add("richText",t),n.append(i)}class wc{#e=null;#t=null;#s;#n=null;#a=null;#i=null;#r=null;#o=null;static#c=null;constructor(e){this.#s=e,wc.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#s._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Zn,{signal:t}),e.addEventListener("pointerdown",wc.#l,{signal:t}));const n=this.#n=document.createElement("div");n.className="buttons",e.append(n);const i=this.#s.toolbarPosition;if(i){const{style:a}=e,l=this.#s._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*l}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#s._focusEventsAllowed=!1,Ct(e)}#d(e){this.#s._focusEventsAllowed=!0,Ct(e)}#f(e){const t=this.#s._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Zn,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#a?.shown(),this.#i?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#s,n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",wc.#c[e]),this.#f(n)&&n.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#n.append(n)}get#g(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#n.append(t,this.#g),this.#a=e}addComment(e,t=null){if(this.#i)return;const n=e.renderForToolbar();if(!n)return;this.#f(n);const i=this.#r=this.#g;t?(this.#n.insertBefore(n,t),this.#n.insertBefore(i,t)):this.#n.append(n,i),this.#i=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#n.append(t,this.#g)}async addEditSignatureButton(e){const t=this.#o=await e.renderEditButton(this.#s);this.#f(t),this.#n.append(t,this.#g)}removeButton(e){e==="comment"&&(this.#i?.removeToolbarCommentButton(),this.#i=null,this.#r?.remove(),this.#r=null)}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,n){const i=this.#n.querySelector(n);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class G${#e=null;#t=null;#s;constructor(e){this.#s=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#s._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Zn,{signal:t});const n=this.#e=document.createElement("div");return n.className="buttons",e.append(n),this.#s.hasCommentManager()&&this.#i("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#s.commentSelection("floating_button")}),this.#i("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#s.highlightSelection("floating_button")}),e}#a(e,t){let n=0,i=0;for(const a of e){const l=a.y+a.height;if(l<n)continue;const c=a.x+(t?a.width:0);if(l>n){i=c,n=l;continue}t?c>i&&(i=c):c<i&&(i=c)}return[t?1-i:i,n]}show(e,t,n){const[i,a]=this.#a(t,n),{style:l}=this.#t||=this.#n();e.append(this.#t),l.insetInlineEnd=`${100*i}%`,l.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#i(e,t,n,i){const a=document.createElement("button");a.classList.add("basic",e),a.tabIndex=0,a.setAttribute("data-l10n-id",t);const l=document.createElement("span");a.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",n);const c=this.#s._signal;c instanceof AbortSignal&&!c.aborted&&(a.addEventListener("contextmenu",Zn,{signal:c}),a.addEventListener("click",i,{signal:c})),this.#e.append(a)}}function lM(s,e,t){for(const n of t)e.addEventListener(n,s[n].bind(s))}class q${#e=0;get id(){return`${Pc}${this.#e++}`}}class Xv{#e=Hv();#t=0;#s=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return $e(this,"_isSVGFittingCanvas",a)}async#n(e,t){this.#s||=new Map;let n=this.#s.get(e);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(n.url=t,i=await nl(t,"blob")):t instanceof File?i=n.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const a=Xv._isSVGFittingCanvas,l=new FileReader,c=new Image,d=new Promise((h,f)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,h()},l.onload=async()=>{const m=n.svgUrl=l.result;c.src=await a?`${m}#svgView(preserveAspectRatio(none))`:m},c.onerror=l.onerror=f});l.readAsDataURL(i),await d}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){Be(i),n=null}return this.#s.set(e,n),n&&this.#s.set(n.id,n),n}async getFromFile(e){const{lastModified:t,name:n,size:i,type:a}=e;return this.#n(`${t}_${n}_${i}_${a}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const n=await t;return this.#n(e,n)}async getFromId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#s||=new Map;let n=this.#s.get(e);if(n?.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#s.set(e,n),this.#s.set(n.id,n),n}getSvgUrl(e){const t=this.#s.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#s||=new Map;const t=this.#s.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=i.convertToBlob()}n.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class X${#e=[];#t=!1;#s;#n=-1;constructor(e=128){this.#s=e}add({cmd:e,undo:t,post:n,mustExec:i,type:a=NaN,overwriteIfSameType:l=!1,keepUndo:c=!1}){if(i&&e(),this.#t)return;const d={cmd:e,undo:t,post:n,type:a};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(d);return}if(l&&this.#e[this.#n].type===a){c&&(d.undo=this.#e[this.#n].undo),this.#e[this.#n]=d;return}const h=this.#n+1;h===this.#s?this.#e.splice(0,1):(this.#n=h,h<this.#e.length&&this.#e.splice(h)),this.#e.push(d)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class su{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Qt.platform;for(const[n,i,a={}]of e)for(const l of n){const c=l.startsWith("mac+");t&&c?(this.callbacks.set(l.slice(4),{callback:i,options:a}),this.allKeys.add(l.split("+").at(-1))):!t&&!c&&(this.callbacks.set(l,{callback:i,options:a}),this.allKeys.add(l.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(this.#e(t));if(!n)return;const{callback:i,options:{bubbles:a=!1,args:l=[],checker:c=null}}=n;c&&!c(e,t)||(i.bind(e,...l,t)(),a||Ct(t))}}class Yv{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return H$(e),$e(this,"_colors",e)}convert(e){const t=sl(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,i]of this._colors)if(i.every((a,l)=>a===t[l]))return Yv._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?xe.makeHexColor(...t):e}}class ki{#e=new AbortController;#t=null;#s=null;#n=new Map;#a=new Map;#i=null;#r=null;#o=null;#c=new X$;#l=null;#h=null;#d=null;#f=0;#g=new Set;#p=null;#u=null;#m=new Set;_editorUndoBar=null;#y=!1;#b=!1;#v=!1;#E=null;#A=null;#x=null;#T=null;#S=!1;#C=null;#M=new q$;#R=!1;#N=!1;#I=!1;#k=null;#O=null;#F=null;#P=null;#$=null;#_=Fe.NONE;#w=new Set;#j=null;#B=null;#U=null;#X=null;#q=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#V=[0,0];#L=null;#G=null;#Z=null;#J=null;#z=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=ki.prototype,t=l=>l.#G.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:c})=>{if(c instanceof HTMLInputElement){const{type:d}=c;return d!=="text"&&d!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return $e(this,"_keyboardManager",new su([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#G.contains(c)&&!l.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(l,{target:c})=>!(c instanceof HTMLButtonElement)&&l.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}constructor(e,t,n,i,a,l,c,d,h,f,m,y,x,A,S,C){const E=this._signal=this.#e.signal;this.#G=e,this.#Z=t,this.#J=n,this.#i=i,this.#l=a,this.#B=l,this.#q=d,this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:E}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),c._on("setpreference",this.onSetPreference.bind(this),{signal:E}),c._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#N=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#N=!1},{capture:!0,signal:E}),this.#le(),this.#he(),this.#te(),this.#r=d.annotationStorage,this.#E=d.filterFactory,this.#U=h,this.#T=f||null,this.#y=m,this.#b=y,this.#v=x,this.#$=A||null,this.viewParameters={realScale:ya.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=C!==!1,a?.setSidebarUiManager(this)}destroy(){this.#z?.resolve(),this.#z=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#a.values())e.destroy();this.#a.clear(),this.#n.clear(),this.#m.clear(),this.#P?.clear(),this.#t=null,this.#w.clear(),this.#c.destroy(),this.#i?.destroy(),this.#l?.destroy(),this.#B?.destroy(),this.#C?.hide(),this.#C=null,this.#F?.destroy(),this.#F=null,this.#s=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#$}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#v}get hcmFilter(){return $e(this,"hcmFilter",this.#U?this.#E.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return $e(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return $e(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return $e(this,"highlightColors",null);const t=new Map,n=!!this.#U;for(const[i,a]of e){const l=i.endsWith("_HCM");if(n&&l){t.set(i.replace("_HCM",""),a);continue}!n&&!l&&t.set(i,a)}return $e(this,"highlightColors",t)}get highlightColorNames(){return $e(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=e}setMainHighlightColorPicker(e){this.#F=e}editAltText(e,t=!1){this.#i?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,n,i){this.#l?.showDialog(this,e,t,n,i)}selectComment(e,t){this.#a.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,t,n=void 0){this.#l?.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#a.has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),i=a=>{a.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await n}getSignature(e){this.#B?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#B}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){e==="enableNewAltTextWhenAddingImage"&&(this.#v=t)}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#G.focus()}findParent(e,t){for(const n of this.#a.values()){const{x:i,y:a,width:l,height:c}=n.div.getBoundingClientRect();if(e>=i&&e<=i+l&&t>=a&&t<=a+c)return n}return null}disableUserSelect(e=!1){this.#Z.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#m.add(e)}removeShouldRescale(e){this.#m.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*ya.PDF_TO_CSS_UNITS;for(const t of this.#m)t.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Q({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of this.#a.values())if(n.hasTextLayer(e))return n;return null}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:a,focusNode:l,focusOffset:c}=n,d=n.toString(),f=this.#Q(n).closest(".textLayer"),m=this.getSelectionBoxes(f);if(!m)return;n.empty();const y=this.#ee(f),x=this.#_===Fe.NONE,A=()=>{const S=y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:m,anchorNode:i,anchorOffset:a,focusNode:l,focusOffset:c,text:d});x&&this.showAllEditors("highlight",!0,!0),t&&S?.editComment()};if(x){this.switchToMode(Fe.HIGHLIGHT,A);return}A()}commentSelection(e=""){this.highlightSelection(e,!0)}#ae(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=this.#Q(e).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(this.#C||=new G$(this),this.#C.show(n,i,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#r)return null;const t=`${Pc}${e}`,n=this.#r.getRawValue(t);return n&&this.#r.remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&this.#r&&!this.#r.has(e.id)&&this.#r.setValue(e.id,e)}a11yAlert(e,t=null){const n=this.#J;n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}#oe(){const e=document.getSelection();if(!e||e.isCollapsed){this.#j&&(this.#C?.hide(),this.#j=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#j)return;const i=this.#Q(e).closest(".textLayer");if(!i){this.#j&&(this.#C?.hide(),this.#j=null,this.#D({hasSelectedText:!1}));return}if(this.#C?.hide(),this.#j=t,this.#D({hasSelectedText:!0}),!(this.#_!==Fe.HIGHLIGHT&&this.#_!==Fe.NONE)&&(this.#_===Fe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#_===Fe.HIGHLIGHT?this.#ee(i):null;if(a?.toggleDrawing(),this.#N){const l=new AbortController,c=this.combinedSignal(l),d=h=>{h.type==="pointerup"&&h.button!==0||(l.abort(),a?.toggleDrawing(!0),h.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",d,{signal:c}),window.addEventListener("blur",d,{signal:c})}else a?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(e=""){this.#_===Fe.HIGHLIGHT?this.highlightSelection(e):this.#y&&this.#ae()}#le(){document.addEventListener("selectionchange",this.#oe.bind(this),{signal:this._signal})}#ce(){if(this.#x)return;this.#x=new AbortController;const e=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ue(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#w)if(t.div.contains(e)){this.#O=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[e,t]=this.#O;this.#O=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#k)return;this.#k=new AbortController;const e=this.combinedSignal(this.#k);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#de(){this.#k?.abort(),this.#k=null}#ne(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#se(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.#ne()}removeEditListeners(){this.#de(),this.#se()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const n of this.#w){const i=n.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(a.type)){l.paste(a,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){Be(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const d of n){const h=await i.deserialize(d);if(!h)return;a.push(h)}const l=()=>{for(const d of a)this.#ie(d);this.#re(a)},c=()=>{for(const d of a)d.remove()};this.addCommands({cmd:l,undo:c,mustExec:!0})}catch(a){Be(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#_!==Fe.NONE&&!this.isEditorHandlingKeyboard&&ki._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#W("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#D(e){Object.entries(e).some(([n,i])=>this.#Y[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,e)}),this.#_===Fe.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#H([[Qe.HIGHLIGHT_FREE,!0]]))}#H(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ce(),this.#ne(),this.#D({isEditing:this.#_!==Fe.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ue(),this.#se(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#u){this.#u=e;for(const t of this.#u)this.#H(t.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(e){return this.#a.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#a.set(e.pageIndex,e),this.#R?e.enable():e.disable()}removeLayer(e){this.#a.delete(e.pageIndex)}async updateMode(e,t=null,n=!1,i=!1,a=!1){if(this.#_!==e&&!(this.#z&&(await this.#z.promise,!this.#z))){if(this.#z=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#_===Fe.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#_=e,e===Fe.NONE){this.setEditingState(!1),this.#pe();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#z.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();e===Fe.SIGNATURE&&await this.#B?.loadSignatures(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const l of this.#a.values())l.updateMode(e);if(e===Fe.POPUP){this.#s||=await this.#q.getAnnotationsByType(new Set(this.#u.map(d=>d._editorType)));const l=new Set,c=[];for(const d of this.#n.values()){const{annotationElementId:h,hasComment:f,deleted:m}=d;h&&l.add(h),f&&!m&&c.push(d.getData())}for(const d of this.#s){const{id:h,popupRef:f,contentsObj:m}=d;f&&m?.str&&!l.has(h)&&!this.#g.has(h)&&c.push(d)}this.#l?.showSidebar(c)}if(!t){n&&this.addNewEditorFromKeyboard(),this.#z.resolve();return}for(const l of this.#n.values())l.uid===t?(this.setSelected(l),a?l.editComment():i?l.enterInEditMode():l.focus()):l.unselect();this.#z.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#_&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#u){switch(e){case Qe.CREATE:this.currentLayer.addNewEditor(t);return;case Qe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#X||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of this.#w)n.updateParams(e,t);else for(const n of this.#u)n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){for(const a of this.#n.values())a.editorType===e&&a.show(t);(this.#X?.get(Qe.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#H([[Qe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#I!==e){this.#I=e;for(const t of this.#a.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#R){this.#R=!0;const e=[];for(const t of this.#a.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#pe(){if(this.unselectAll(),this.#R){this.#R=!1;for(const e of this.#a.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const t of this.#n.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#P?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#r?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ie(e){const t=this.#a.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#H(e.propertiesToUpdate))}get#me(){let e=null;for(e of this.#w);return e}updateUI(e){this.#me===e&&this.#H(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#H(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#H(e.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#d?.commitOrRemove();for(const t of this.#w)t!==e&&t.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#H(e.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#D({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(e){this.#c.add(e),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(e){this.#c.cleanType(e)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#w],n=()=>{this._editorUndoBar?.show(i,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},i=()=>{for(const a of t)this.#ie(a)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#re(e){for(const t of this.#w)t.unselect();this.#w.clear();for(const t of e)t.isEmpty()||(this.#w.add(t),t.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#re(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#_!==Fe.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#V[0]+=e,this.#V[1]+=t;const[i,a]=this.#V,l=[...this.#w],c=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#V[0]=this.#V[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(i,a),d.translationDone())},undo:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(-i,-a),d.translationDone())},mustExec:!1})},c);for(const d of l)d.translateInPage(e,t),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const e of this.#w)this.#p.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const e=this.#p;this.#p=null;let t=!1;for(const[{x:i,y:a,pageIndex:l},c]of e)c.newX=i,c.newY=a,c.newPageIndex=l,t||=i!==c.savedX||a!==c.savedY||l!==c.savedPageIndex;if(!t)return!1;const n=(i,a,l,c)=>{if(this.#n.has(i.id)){const d=this.#a.get(c);d?i._setParentAndPosition(d,a,l):(i.pageIndex=c,i.x=a,i.y=l)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:l,newPageIndex:c}]of e)n(i,a,l,c)},undo:()=>{for(const[i,{savedX:a,savedY:l,savedPageIndex:c}]of e)n(i,a,l,c)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#p)for(const n of this.#p.keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#_}isEditingMode(){return this.#_!==Fe.NONE}get imageManager(){return $e(this,"imageManager",new Xv)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,f=t.rangeCount;h<f;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:i,width:a,height:l}=e.getBoundingClientRect();let c;switch(e.getAttribute("data-main-rotation")){case"90":c=(h,f,m,y)=>({x:(f-i)/l,y:1-(h+m-n)/a,width:y/l,height:m/a});break;case"180":c=(h,f,m,y)=>({x:1-(h+m-n)/a,y:1-(f+y-i)/l,width:m/a,height:y/l});break;case"270":c=(h,f,m,y)=>({x:1-(f+y-i)/l,y:(h-n)/a,width:y/l,height:m/a});break;default:c=(h,f,m,y)=>({x:(h-n)/a,y:(f-i)/l,width:m/a,height:y/l});break}const d=[];for(let h=0,f=t.rangeCount;h<f;h++){const m=t.getRangeAt(h);if(!m.collapsed)for(const{x:y,y:x,width:A,height:S}of m.getClientRects())A===0||S===0||d.push(c(y,x,A,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#o||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const t=this.#o?.get(e.data.id);if(!t)return;const n=this.#r.getRawValue(t);n&&(this.#_===Fe.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){const i=this.#P?.get(e);i&&(i.setCanvas(t,n),this.#P.delete(e))}addMissingCanvas(e,t){(this.#P||=new Map).set(e,t)}}class Hs{#e=null;#t=!1;#s=null;#n=null;#a=null;#i=null;#r=!1;#o=null;#c=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#d=e._uiManager.useNewAltTextFlow,Hs.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){Hs._l10n??=e}async render(){const e=this.#s=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",Hs.#f.missing),t.setAttribute("data-l10n-id",Hs.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#c._uiManager._signal;e.addEventListener("contextmenu",Zn,{signal:n}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const i=a=>{a.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#d&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#r=!0,i(a))},{signal:n}),await this.#p(),e}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#s&&(this.#s.focus({focusVisible:this.#r}),this.#r=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await Hs._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:i,cancel:a=!1}){n&&(this.#l=n,this.#h=i),!(this.#e===e&&this.#t===t)&&(a||(this.#e=e,this.#t=t),this.#p())}toggle(e=!1){this.#s&&(!e&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#s.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#s?.remove(),this.#s=null,this.#n=null,this.#a=null,this.#o?.remove(),this.#o=null}async#p(){const e=this.#s;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",Hs.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",Hs.#f[`${this.#g}-label`]),!this.#e){this.#a?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#a?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#a;if(!t){this.#a=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const i=100,a=this.#c._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:a}),e.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#a?.classList.remove("show")},{signal:a})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class Ld{#e=null;#t=null;#s=!1;#n=null;#a=null;#i=null;#r=null;#o=null;#c=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#n.commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=this.#n.commentButtonColor;i&&(n.backgroundColor=i)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:n}=this.#e.getBoundingClientRect(),{x:i,y:a,width:l,height:c}=this.#n.parent.boundingClientRect;return[(e-i)/l,(t+n-a)/c]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=this.#n._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",Zn,{signal:n}),t&&(e.addEventListener("focusin",a=>{this.#n._focusEventsAllowed=!1,Ct(a)},{capture:!0,signal:n}),e.addEventListener("focusout",a=>{this.#n._focusEventsAllowed=!0,Ct(a)},{capture:!0,signal:n})),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const i=a=>{a.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:n}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#s=!0,i(a))},{signal:n}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:n}),e}edit(e){const t=this.commentPopupPositionInLayer;let n,i;if(t)[n,i]=t;else{[n,i]=this.#n.commentButtonPosition;const{width:f,height:m,x:y,y:x}=this.#n;n=y+n*f,i=x+i*m}const a=this.#n.parent.boundingClientRect,{x:l,y:c,width:d,height:h}=a;this.#n._uiManager.editComment(this.#n,l+n*d,c+i*h,{...e,parentDimensions:a})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#s}),this.#s=!1)}isDeleted(){return this.#c||this.#r===""}isEmpty(){return this.#r===null}hasBeenEdited(){return this.isDeleted()||this.#r!==this.#a}serialize(){return this.data}get data(){return{text:this.#r,richText:this.#i,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#r&&(this.#i=null),e===null){this.#r="",this.#c=!0;return}this.#r=e,this.#o=new Date,this.#c=!1}setInitialText(e,t=null){this.#a=e,this.data=e,this.#o=null,this.#i=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#r="",this.#i=null,this.#o=null,this.#n=null,this.#s=!1,this.#c=!1}}class iu{#e;#t=!1;#s=null;#n;#a;#i;#r;#o=null;#c;#l=null;#h;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:l=null,signal:c}){this.#e=e,this.#s=n,this.#n=t,this.#a=i,this.#i=a,this.#r=l,this.#h=new AbortController,this.#c=AbortSignal.any([c,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ms.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const i=this.#o=new AbortController,a=AbortSignal.any([this.#c,i.signal]),l=this.#e,c={capture:!0,signal:a,passive:!1},d=h=>{h.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",h=>{h.pointerType==="touch"&&(Ct(h),d(h))},c),l.addEventListener("pointerup",d,c),l.addEventListener("pointercancel",d,c);return}if(!this.#d){this.#d=new AbortController;const i=AbortSignal.any([this.#c,this.#d.signal]),a=this.#e,l={signal:i,capture:!1,passive:!1};a.addEventListener("touchmove",this.#g.bind(this),l);const c=this.#p.bind(this);a.addEventListener("touchend",c,l),a.addEventListener("touchcancel",c,l),l.capture=!0,a.addEventListener("pointerdown",Ct,l),a.addEventListener("pointermove",Ct,l),a.addEventListener("pointercancel",Ct,l),a.addEventListener("pointerup",Ct,l),this.#a?.()}if(Ct(e),e.touches.length!==2||this.#s?.()){this.#l=null;return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#g(e){if(!this.#l||e.touches.length!==2)return;Ct(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:i,screenY:a}=t,{screenX:l,screenY:c}=n,d=this.#l,{touch0X:h,touch0Y:f,touch1X:m,touch1Y:y}=d,x=m-h,A=y-f,S=l-i,C=c-a,E=Math.hypot(S,C)||1,_=Math.hypot(x,A)||1;if(!this.#t&&Math.abs(_-E)<=iu.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=i,d.touch0Y=a,d.touch1X=l,d.touch1Y=c,!this.#t){this.#t=!0;return}const R=[(i+l)/2,(a+c)/2];this.#i?.(R,_,E)}#p(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#r?.()),this.#l&&(Ct(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class Me{#e=null;#t=null;#s=null;#n=null;#a=null;#i=!1;#r=null;#o="";#c=null;#l=null;#h=null;#d=null;#f=null;#g="";#p=!1;#u=null;#m=!1;#y=!1;#b=!1;#v=null;#E=0;#A=0;#x=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#C=Me._zIndex++;static _borderLineWidth=-1;static _colorManager=new Yv;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=Me.prototype._resizeWithKeyboard,t=ki.TRANSLATE_SMALL,n=ki.TRANSLATE_BIG;return $e(this,"_resizerKeyboardManager",new su([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Me.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:l}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[a,l];const[c,d]=this.parentDimensions;this.x=e.x/c,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return $e(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Y$({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Me._l10n??=e,Me._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Me._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Me._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){pt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(e){this.#S=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#C}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#L(),this.#d?.remove(),this.#d=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,i){const[a,l]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(e+n)/a,this.y=(t+i)/l,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,i]=this.parentDimensions;this.setAt(e*n,t*i,this.width*n,this.height*i),this._onTranslated()}#M([e,t],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#M(this.parentDimensions,e,t)}translateInPage(e,t){this.#u||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#u||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:c}=this;const[d,h]=this.getBaseTranslation();l+=d,c+=h;const{style:f}=n;f.left=`${(100*l).toFixed(2)}%`,f.top=`${(100*c).toFixed(2)}%`,this._onTranslating(l,c),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Me,i=n/e,a=n/t;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,i]}=this;let{x:a,y:l,width:c,height:d}=this;if(c*=n,d*=i,a*=n,l*=i,this._mustFixPosition)switch(e){case 0:a=cn(a,0,n-c),l=cn(l,0,i-d);break;case 90:a=cn(a,0,n-d),l=cn(l,c,i);break;case 180:a=cn(a,c,n),l=cn(l,d,i);break;case 270:a=cn(a,d,n),l=cn(l,0,i-c);break}this.x=a/=n,this.y=l/=i;const[h,f]=this.getBaseTranslation();a+=h,l+=f,t.left=`${(100*a).toFixed(2)}%`,t.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#R(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return Me.#R(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return Me.#R(e,t,360-this.parentRotation)}#N(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#I(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const i=document.createElement("div");this.#c.append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",this.#k.bind(this,n),{signal:t}),i.addEventListener("contextmenu",Zn,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#c)}#k(e,t){t.preventDefault();const{isMac:n}=Qt.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#s?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const a=new AbortController,l=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#P.bind(this,e),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",Ct,{passive:!1,signal:l}),window.addEventListener("contextmenu",Zn,{signal:l}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const c=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const h=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#s?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=c,this.div.style.cursor=d,this.#F()};window.addEventListener("pointerup",h,{signal:l}),window.addEventListener("blur",h,{signal:l})}#O(e,t,n,i){this.width=n,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:i}=this.#h;this.#h=null;const a=this.x,l=this.y,c=this.width,d=this.height;a===e&&l===t&&c===n&&d===i||this.addCommands({cmd:this.#O.bind(this,a,l,c,d),undo:this.#O.bind(this,e,t,n,i),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#P(e,t){const[n,i]=this.parentDimensions,a=this.x,l=this.y,c=this.width,d=this.height,h=Me.MIN_SIZE/n,f=Me.MIN_SIZE/i,m=this.#N(this.rotation),y=(P,F)=>[m[0]*P+m[2]*F,m[1]*P+m[3]*F],x=this.#N(360-this.rotation),A=(P,F)=>[x[0]*P+x[2]*F,x[1]*P+x[3]*F];let S,C,E=!1,_=!1;switch(e){case"topLeft":E=!0,S=(P,F)=>[0,0],C=(P,F)=>[P,F];break;case"topMiddle":S=(P,F)=>[P/2,0],C=(P,F)=>[P/2,F];break;case"topRight":E=!0,S=(P,F)=>[P,0],C=(P,F)=>[0,F];break;case"middleRight":_=!0,S=(P,F)=>[P,F/2],C=(P,F)=>[0,F/2];break;case"bottomRight":E=!0,S=(P,F)=>[P,F],C=(P,F)=>[0,0];break;case"bottomMiddle":S=(P,F)=>[P/2,F],C=(P,F)=>[P/2,0];break;case"bottomLeft":E=!0,S=(P,F)=>[0,F],C=(P,F)=>[P,0];break;case"middleLeft":_=!0,S=(P,F)=>[0,F/2],C=(P,F)=>[P,F/2];break}const R=S(c,d),N=C(c,d);let M=y(...N);const j=Me._round(a+M[0]),D=Me._round(l+M[1]);let O=1,I=1,U,$;if(t.fromKeyboard)({deltaX:U,deltaY:$}=t);else{const{screenX:P,screenY:F}=t,[B,V]=this.#l;[U,$]=this.screenToPageTranslation(P-B,F-V),this.#l[0]=P,this.#l[1]=F}if([U,$]=A(U/n,$/i),E){const P=Math.hypot(c,d);O=I=Math.max(Math.min(Math.hypot(N[0]-R[0]-U,N[1]-R[1]-$)/P,1/c,1/d),h/c,f/d)}else _?O=cn(Math.abs(N[0]-R[0]-U),h,1)/c:I=cn(Math.abs(N[1]-R[1]-$),f,1)/d;const J=Me._round(c*O),ie=Me._round(d*I);M=y(...C(J,ie));const X=j-M[0],ae=D-M[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=J,this.height=ie,this.x=X,this.y=ae,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#s?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new wc(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#s?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#s||(Hs.initialize(Me._l10n),this.#s=new Hs(this),this.#e&&(this.#s.data=this.#e,this.#e=null)),this.#s}get altTextData(){return this.#s?.data}set altTextData(e){this.#s&&(this.#s.data=e)}get guessedAltText(){return this.#s?.guessedText}async setGuessedAltText(e){await this.#s?.setGuessedText(e)}serializeAltText(e){return this.#s?.serialize(e)}hasAltText(){return!!this.#s&&!this.#s.isEmpty()}hasAltTextData(){return this.#s?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new Ld(this)}addStandaloneCommentButton(){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#n.renderForStandalone(),this.div.append(this.#a))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:n,deleted:i}}=this.#n;return{text:t,richText:e,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new Ld(this),this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(this.#n||=new Ld(this),this.#n.setInitialText(e,n),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new Ld(this),this.#n.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[a]=this.pageDimensions,[l]=this.pageTranslation,c=l+a+1,d=i-100,h=c+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[c,d,h,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#n.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#i?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#U();const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),lM(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new iu({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#$.bind(this),onPinching:this.#_.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#$(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#s?.toggle(!1),this.parent.togglePointerEvents(!1)}#_(e,t,n){let a=.7*(n/t)+1-.7;if(a===1)return;const l=this.#N(this.rotation),c=(j,D)=>[l[0]*j+l[2]*D,l[1]*j+l[3]*D],[d,h]=this.parentDimensions,f=this.x,m=this.y,y=this.width,x=this.height,A=Me.MIN_SIZE/d,S=Me.MIN_SIZE/h;a=Math.max(Math.min(a,1/y,1/x),A/y,S/x);const C=Me._round(y*a),E=Me._round(x*a);if(C===y&&E===x)return;this.#u||=[f,m,y,x];const _=c(y/2,x/2),R=Me._round(f+_[0]),N=Me._round(m+_[1]),M=c(C/2,E/2);this.x=R-M[0],this.y=N-M[1],this.width=C,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#s?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(e){const{isMac:t}=Qt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#B(e);return}this.#j(e)}#j(e){const{isMac:t}=Qt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#B(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),l={capture:!0,passive:!1,signal:a},c=h=>{i.abort(),this.#r=null,this.#p=!1,this._uiManager.endDragSession()||this.#j(h),n&&this._onStopDragging()};t&&(this.#E=e.clientX,this.#A=e.clientY,this.#r=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",h=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:m,pointerId:y}=h;if(y!==this.#r){Ct(h);return}const[x,A]=this.screenToPageTranslation(f-this.#E,m-this.#A);this.#E=f,this.#A=m,this._uiManager.dragSelectedEditors(x,A)},l),window.addEventListener("touchmove",Ct,l),window.addEventListener("pointerdown",h=>{h.pointerType===this.#o&&(this.#T||h.isPrimary)&&c(h),Ct(h)},l));const d=h=>{if(!this.#r||this.#r===h.pointerId){c(h);return}Ct(h)};window.addEventListener("pointerup",d,{signal:a}),window.addEventListener("blur",d,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const i=this.parentScale,[a,l]=this.pageDimensions,[c,d]=this.pageTranslation,h=e/i,f=t/i,m=this.x*a,y=this.y*l,x=this.width*a,A=this.height*l;switch(n){case 0:return[m+h+c,l-y-f-A+d,m+h+x+c,l-y-f+d];case 90:return[m+f+c,l-y+h+d,m+f+A+c,l-y+h+x+d];case 180:return[m-h-x+c,l-y+f+d,m-h+c,l-y+f+A+d];case 270:return[m-f-A+c,l-y-h-x+d,m-f+c,l-y-h+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,i,a,l]=e,c=a-n,d=l-i;switch(this.rotation){case 0:return[n,t-l,c,d];case 90:return[n,t-i,d,c];case 180:return[a,t-i,c,d];case 270:return[a,t-l,d,c];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Me._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:i,deleted:a,richText:l},uid:c,pageIndex:d,creationDate:h,modificationDate:f}=this;return{id:c,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:e},creationDate:h,modificationDate:n||f,popupRef:!a,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:l}=window;return t<l&&i>0&&e<a&&n>0}#U(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#U()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,n){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,i.#e=e.accessibilityData,i._isCopy=e.isCopy||!1;const[a,l]=i.pageDimensions,[c,d,h,f]=i.getRectInCurrentCoords(e.rect,l);return i.x=c/a,i.y=d/l,i.width=h/a,i.height=f/l,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#L(),this.removeEditToolbar(),this.#x){for(const e of this.#x.values())clearTimeout(e);this.#x=null}this.parent=null,this.#T?.destroy(),this.#T=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#I(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,i,a,l]=this.getPDFRect();return[Me._round(n+(a-n)*e),Me._round(i+(l-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const l=this.#X.bind(this),c=this.#q.bind(this),d=this._uiManager._signal;for(const h of this.#t){const f=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",l,{signal:d}),h.addEventListener("blur",c,{signal:d}),h.addEventListener("focus",this.#Y.bind(this,f),{signal:d}),h.setAttribute("data-l10n-id",Me._l10nResizer[f])}}const n=this.#t[0];let i=0;for(const l of t){if(l===n)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(a!==i){if(a<i)for(let c=0;c<i-a;c++)this.#c.append(this.#c.firstChild);else if(a>i)for(let c=0;c<a-i;c++)this.#c.firstChild.before(this.#c.lastChild);let l=0;for(const c of t){const h=this.#t[l++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Me._l10nResizer[h])}}this.#V(0),this.#b=!0,this.#c.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#X(e){Me._resizerKeyboardManager.exec(this,e)}#q(e){this.#b&&e.relatedTarget?.parentNode!==this.#c&&this.#L()}#Y(e){this.#g=this.#b?e:""}#V(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#b&&this.#P(this.#g,{deltaX:e,deltaY:t,fromKeyboard:!0})}#L(){this.#b=!1,this.#V(-1),this.#F()}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#s?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#s?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(e){this.#m=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#x||=new Map;const{action:n}=e;let i=this.#x.get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#x.delete(n),this.#x.size===0&&(this.#x=null)},Me._telemetryTimeout),this.#x.set(n,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}updateFakeAnnotationElement(e){if(!this.#d&&!this.deleted){this.#d=e.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class Y$ extends Me{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const W1=3285377520,ds=4294901760,Us=65535;class cM{constructor(e){this.h1=e?e&4294967295:W1,this.h2=e?e&4294967295:W1}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let S=0,C=e.length;S<C;S++){const E=e.charCodeAt(S);E<=255?t[n++]=E:(t[n++]=E>>>8,t[n++]=E&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,a=n-i*4,l=new Uint32Array(t.buffer,0,i);let c=0,d=0,h=this.h1,f=this.h2;const m=3432918353,y=461845907,x=m&Us,A=y&Us;for(let S=0;S<i;S++)S&1?(c=l[S],c=c*m&ds|c*x&Us,c=c<<15|c>>>17,c=c*y&ds|c*A&Us,h^=c,h=h<<13|h>>>19,h=h*5+3864292196):(d=l[S],d=d*m&ds|d*x&Us,d=d<<15|d>>>17,d=d*y&ds|d*A&Us,f^=d,f=f<<13|f>>>19,f=f*5+3864292196);switch(c=0,a){case 3:c^=t[i*4+2]<<16;case 2:c^=t[i*4+1]<<8;case 1:c^=t[i*4],c=c*m&ds|c*x&Us,c=c<<15|c>>>17,c=c*y&ds|c*A&Us,i&1?h^=c:f^=c}this.h1=h,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ds|e*36045&Us,t=t*4283543511&ds|((t<<16|e>>>16)*2950163797&ds)>>>16,e^=t>>>1,e=e*444984403&ds|e*60499&Us,t=t*3301882366&ds|((t<<16|e>>>16)*3120437893&ds)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const xy=Object.freeze({map:null,hash:"",transfer:void 0});class Wv{#e=!1;#t=null;#s=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=this.#n.get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return this.#n.get(e)}remove(e){const t=this.#n.get(e);if(t!==void 0&&(t instanceof Me&&this.#s.delete(t.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of this.#n.values())if(n instanceof Me)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=this.#n.get(e);let i=!1;if(n!==void 0)for(const[a,l]of Object.entries(t))n[a]!==l&&(i=!0,n[a]=l);else i=!0,this.#n.set(e,t);i&&this.#a(),t instanceof Me&&((this.#s||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#a(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new uM(this)}get serializable(){if(this.#n.size===0)return xy;const e=new Map,t=new cM,n=[],i=Object.create(null);let a=!1;for(const[l,c]of this.#n){const d=c instanceof Me?c.serialize(!1,i):c;d&&(e.set(l,d),t.update(`${l}:${JSON.stringify(d)}`),a||=!!d.bitmap)}if(a)for(const l of e.values())l.bitmap&&n.push(l.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:xy}get editorStats(){let e=null;const t=new Map;let n=0,i=0;for(const a of this.#n.values()){if(!(a instanceof Me)){a.popup&&(a.popup.deleted?i+=1:n+=1);continue}a.isCommentDeleted?i+=1:a.hasEditedComment&&(n+=1);const l=a.telemetryFinalData;if(!l)continue;const{type:c}=l;t.has(c)||t.set(c,Object.getPrototypeOf(a).constructor),e||=Object.create(null);const d=e[c]||=new Map;for(const[h,f]of Object.entries(l)){if(h==="type")continue;let m=d.get(h);m||(m=new Map,d.set(h,m));const y=m.get(f)??0;m.set(f,y+1)}}if((i>0||n>0)&&(e||=Object.create(null),e.comments={deleted:i,edited:n}),!e)return null;for(const[a,l]of t)e[a]=l.computeTelemetryFinalData(e[a]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const n=this.#s?.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#s?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#s)for(const t of this.#s.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class uM extends Wv{#e;constructor(e){super();const{map:t,hash:n,transfer:i}=e.serializable,a=structuredClone(t,i?{transfer:i}:null);this.#e={map:a,hash:n,transfer:i}}get print(){pt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return $e(this,"modifiedIds",{ids:new Set,hash:""})}}class W${#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||this.#e.has(e.loadedName))){if(Je(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:l}=e,c=new FontFace(i,a,l);this.addNativeFontFace(c);try{await c.load(),this.#e.add(i),n?.(e)}catch{Be(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}pt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw Be(`Failed to load font '${n.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return $e(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return $e(this,"isSyncFontLoadingSupported",bn||Qt.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Je(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:t,callback:e};return n.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return $e(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(N,M){return N.charCodeAt(M)<<24|N.charCodeAt(M+1)<<16|N.charCodeAt(M+2)<<8|N.charCodeAt(M+3)&255}function i(N,M,j,D){const O=N.substring(0,M),I=N.substring(M+j);return O+D+I}let a,l;const c=this._document.createElement("canvas");c.width=1,c.height=1;const d=c.getContext("2d");let h=0;function f(N,M){if(++h>30){Be("Load test font never loaded."),M();return}if(d.font="30px "+N,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){M();return}setTimeout(f.bind(null,N,M))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=i(y,976,m.length,m);const A=16,S=1482184792;let C=n(y,A);for(a=0,l=m.length-3;a<l;a+=4)C=C-S+n(m,a)|0;a<m.length&&(C=C-S+n(m+"XXX",a)|0),y=i(y,A,4,L$(C));const E=`url(data:font/opentype;base64,${btoa(y)});`,_=`@font-face {font-family:"${m}";src:${E}}`;this.insertRule(_);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const N of[e.loadedName,m]){const M=this._document.createElement("span");M.textContent="Hi",M.style.fontFamily=N,R.append(M)}this._document.body.append(R),f(m,()=>{R.remove(),t.complete()})}}class K${#e;constructor(e,t=null,n,i){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${tM(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let i;try{i=e.get(n)}catch(l){Be(`getPathGenerator - ignoring character: "${l}".`)}const a=new Path2D(i||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=a}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}function Q$(s){if(s instanceof URL)return s.href;if(typeof s=="string"){if(bn)return s;const e=URL.parse(s,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Z$(s){if(bn&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return eu(s);if(s instanceof ArrayBuffer||ArrayBuffer.isView(s)||typeof s=="object"&&!isNaN(s?.length))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Id(s){if(typeof s!="string")return null;if(s.endsWith("/"))return s;throw new Error(`Invalid factory url: "${s}" must include trailing slash.`)}const wy=s=>typeof s=="object"&&Number.isInteger(s?.num)&&s.num>=0&&Number.isInteger(s?.gen)&&s.gen>=0,J$=s=>typeof s=="object"&&typeof s?.name=="string",dM=z$.bind(null,wy,J$);class e8{#e=new Map;#t=Promise.resolve();postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,n)})}addEventListener(e,t,n=null){let i=null;if(n?.signal instanceof AbortSignal){const{signal:a}=n;if(a.aborted){Be("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(e,t);i=()=>a.removeEventListener("abort",l),a.addEventListener("abort",l)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const Fd={DATA:1,ERROR:2},Bt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function K1(){}function Pn(s){if(s instanceof Di||s instanceof Ah||s instanceof V1||s instanceof Lc||s instanceof yg)return s;switch(s instanceof Error||typeof s=="object"&&s!==null||pt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),s.name){case"AbortException":return new Di(s.message);case"InvalidPDFException":return new Ah(s.message);case"PasswordException":return new V1(s.message,s.code);case"ResponseException":return new Lc(s.message,s.status,s.missing);case"UnknownErrorException":return new yg(s.message,s.details)}return new yg(s.message,s.toString())}class hc{#e=new AbortController;constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const n=e.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Fd.DATA)i.resolve(e.data);else if(e.callback===Fd.ERROR)i.reject(Pn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(t,e.data).then(function(l){a.postMessage({sourceName:n,targetName:i,callback:Fd.DATA,callbackId:e.callbackId,data:l})},function(l){a.postMessage({sourceName:n,targetName:i,callback:Fd.ERROR,callbackId:e.callbackId,reason:Pn(l)})});return}if(e.streamId){this.#s(e);return}t(e.data)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(l){a.reject(l)}return a.promise}sendWithStream(e,t,n,i){const a=this.streamId++,l=this.sourceName,c=this.targetName,d=this.comObj;return new ReadableStream({start:h=>{const f=Promise.withResolvers();return this.streamControllers[a]={controller:h,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:c,action:e,streamId:a,data:t,desiredSize:h.desiredSize},i),f.promise},pull:h=>{const f=Promise.withResolvers();return this.streamControllers[a].pullCall=f,d.postMessage({sourceName:l,targetName:c,stream:Bt.PULL,streamId:a,desiredSize:h.desiredSize}),f.promise},cancel:h=>{Je(h instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[a].cancelCall=f,this.streamControllers[a].isClosed=!0,d.postMessage({sourceName:l,targetName:c,stream:Bt.CANCEL,streamId:a,reason:Pn(h)}),f.promise}},n)}#s(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,l=this,c=this.actionHandler[e.action],d={enqueue(h,f=1,m){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=f,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:i,stream:Bt.ENQUEUE,streamId:t,chunk:h},m)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:Bt.CLOSE,streamId:t}),delete l.streamSinks[t])},error(h){Je(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:i,stream:Bt.ERROR,streamId:t,reason:Pn(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,Promise.try(c,e.data,d).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Bt.START_COMPLETE,streamId:t,success:!0})},function(h){a.postMessage({sourceName:n,targetName:i,stream:Bt.START_COMPLETE,streamId:t,reason:Pn(h)})})}#n(e){const t=e.streamId,n=this.sourceName,i=e.sourceName,a=this.comObj,l=this.streamControllers[t],c=this.streamSinks[t];switch(e.stream){case Bt.START_COMPLETE:e.success?l.startCall.resolve():l.startCall.reject(Pn(e.reason));break;case Bt.PULL_COMPLETE:e.success?l.pullCall.resolve():l.pullCall.reject(Pn(e.reason));break;case Bt.PULL:if(!c){a.postMessage({sourceName:n,targetName:i,stream:Bt.PULL_COMPLETE,streamId:t,success:!0});break}c.desiredSize<=0&&e.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=e.desiredSize,Promise.try(c.onPull||K1).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Bt.PULL_COMPLETE,streamId:t,success:!0})},function(h){a.postMessage({sourceName:n,targetName:i,stream:Bt.PULL_COMPLETE,streamId:t,reason:Pn(h)})});break;case Bt.ENQUEUE:if(Je(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(e.chunk);break;case Bt.CLOSE:if(Je(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#a(l,t);break;case Bt.ERROR:Je(l,"error should have stream controller"),l.controller.error(Pn(e.reason)),this.#a(l,t);break;case Bt.CANCEL_COMPLETE:e.success?l.cancelCall.resolve():l.cancelCall.reject(Pn(e.reason)),this.#a(l,t);break;case Bt.CANCEL:if(!c)break;const d=Pn(e.reason);Promise.try(c.onCancel||K1,d).then(function(){a.postMessage({sourceName:n,targetName:i,stream:Bt.CANCEL_COMPLETE,streamId:t,success:!0})},function(h){a.postMessage({sourceName:n,targetName:i,stream:Bt.CANCEL_COMPLETE,streamId:t,reason:Pn(h)})}),c.sinkCapability.reject(d),c.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#a(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class hM{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){pt("Abstract method `_createCanvas` called.")}}class t8 extends hM{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class fM{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){pt("Abstract method `_fetch` called.")}}class Q1 extends fM{async _fetch(e){const t=await nl(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):eu(t)}}class pM{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,i,a){return"none"}destroy(e=!1){}}class n8 extends pM{#e;#t;#s;#n;#a;#i;#r=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#a=t}get#o(){return this.#t||=new Map}get#c(){return this.#i||=new Map}get#l(){if(!this.#s){const e=this.#a.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const n=this.#a.createElementNS(Si,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#s=this.#a.createElementNS(Si,"defs"),e.append(n),n.append(this.#s),this.#a.body.append(e)}return this.#s}#h(e){if(e.length===1){const d=e[0],h=new Array(256);for(let m=0;m<256;m++)h[m]=d[m]/255;const f=h.join(",");return[f,f,f]}const[t,n,i]=e,a=new Array(256),l=new Array(256),c=new Array(256);for(let d=0;d<256;d++)a[d]=t[d]/255,l[d]=n[d]/255,c[d]=i[d]/255;return[a.join(","),l.join(","),c.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#a.URL;t!==this.#a.baseURI&&(nu(t)?Be('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=Vv(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[n,i,a]=this.#h(e),l=e.length===1?n:`${n}${i}${a}`;if(t=this.#o.get(l),t)return this.#o.set(e,t),t;const c=`g_${this.#n}_transfer_map_${this.#r++}`,d=this.#d(c);this.#o.set(e,d),this.#o.set(l,d);const h=this.#p(c);return this.#m(n,i,a,h),d}addHCMFilter(e,t){const n=`${e}-${t}`,i="base";let a=this.#c.get(i);if(a?.key===n||(a?(a.filter?.remove(),a.key=n,a.url="none",a.filter=null):(a={key:n,url:"none",filter:null},this.#c.set(i,a)),!e||!t))return a.url;const l=this.#b(e);e=xe.makeHexColor(...l);const c=this.#b(t);if(t=xe.makeHexColor(...c),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return a.url;const d=new Array(256);for(let x=0;x<=255;x++){const A=x/255;d[x]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const h=d.join(","),f=`g_${this.#n}_hcm_filter`,m=a.filter=this.#p(f);this.#m(h,h,h,m),this.#g(m);const y=(x,A)=>{const S=l[x]/255,C=c[x]/255,E=new Array(A+1);for(let _=0;_<=A;_++)E[_]=S+_/A*(C-S);return E.join(",")};return this.#m(y(0,5),y(1,5),y(2,5),m),a.url=this.#d(f),a.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[n]=this.#h([e]),i=`alpha_${n}`;if(t=this.#o.get(i),t)return this.#o.set(e,t),t;const a=`g_${this.#n}_alpha_map_${this.#r++}`,l=this.#d(a);this.#o.set(e,l),this.#o.set(i,l);const c=this.#p(a);return this.#y(n,c),l}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let n,i;if(e?([n]=this.#h([e]),i=`luminosity_${n}`):i="luminosity",t=this.#o.get(i),t)return this.#o.set(e,t),t;const a=`g_${this.#n}_luminosity_map_${this.#r++}`,l=this.#d(a);this.#o.set(e,l),this.#o.set(i,l);const c=this.#p(a);return this.#f(c),e&&this.#y(n,c),l}addHighlightHCMFilter(e,t,n,i,a){const l=`${t}-${n}-${i}-${a}`;let c=this.#c.get(e);if(c?.key===l||(c?(c.filter?.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},this.#c.set(e,c)),!t||!n))return c.url;const[d,h]=[t,n].map(this.#b.bind(this));let f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),m=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[y,x]=[i,a].map(this.#b.bind(this));m<f&&([f,m,y,x]=[m,f,x,y]),this.#l.style.color="";const A=(E,_,R)=>{const N=new Array(256),M=(m-f)/R,j=E/255,D=(_-E)/(255*R);let O=0;for(let I=0;I<=R;I++){const U=Math.round(f+I*M),$=j+I*D;for(let J=O;J<=U;J++)N[J]=$;O=U+1}for(let I=O;I<256;I++)N[I]=N[O-1];return N.join(",")},S=`g_${this.#n}_hcm_${e}_filter`,C=c.filter=this.#p(S);return this.#g(C),this.#m(A(y[0],x[0],5),A(y[1],x[1],5),A(y[2],x[2],5),C),c.url=this.#d(S),c.url}destroy(e=!1){e&&this.#i?.size||(this.#s?.parentNode.parentNode.remove(),this.#s=null,this.#t?.clear(),this.#t=null,this.#i?.clear(),this.#i=null,this.#r=0)}#f(e){const t=this.#a.createElementNS(Si,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#g(e){const t=this.#a.createElementNS(Si,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#p(e){const t=this.#a.createElementNS(Si,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#u(e,t,n){const i=this.#a.createElementNS(Si,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),e.append(i)}#m(e,t,n,i){const a=this.#a.createElementNS(Si,"feComponentTransfer");i.append(a),this.#u(a,"feFuncR",e),this.#u(a,"feFuncG",t),this.#u(a,"feFuncB",n)}#y(e,t){const n=this.#a.createElementNS(Si,"feComponentTransfer");t.append(n),this.#u(n,"feFuncA",e)}#b(e){return this.#l.style.color=e,sl(getComputedStyle(this.#l).getPropertyValue("color"))}}class mM{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){pt("Abstract method `_fetch` called.")}}class Z1 extends mM{async _fetch(e){const t=await nl(e,"arraybuffer");return new Uint8Array(t)}}class gM{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){pt("Abstract method `_fetch` called.")}}class J1 extends gM{async _fetch(e){const t=await nl(e,"arraybuffer");return new Uint8Array(t)}}bn&&Be("Please use the `legacy` build in Node.js environments.");async function Kv(s){const t=await process.getBuiltinModule("fs").promises.readFile(s);return new Uint8Array(t)}class s8 extends pM{}class i8 extends hM{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class r8 extends fM{async _fetch(e){return Kv(e)}}class a8 extends mM{async _fetch(e){return Kv(e)}}class o8 extends gM{async _fetch(e){return Kv(e)}}const yo="__forcedDependency",{floor:eC,ceil:tC}=Math;function Bd(s,e,t,n,i,a){s[e*4+0]=Math.min(s[e*4+0],t),s[e*4+1]=Math.min(s[e*4+1],n),s[e*4+2]=Math.max(s[e*4+2],i),s[e*4+3]=Math.max(s[e*4+3],a)}const Sy=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class l8{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===Sy}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const zd=(s,e)=>{if(!s)return;let t=s.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},s.set(e,t)),t};class c8{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[yo]:[]};#s=new Map;#n=[];#a=[];#i=[[1,0,0,1,0,0]];#r=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#d=new Map;#f;#g;#p;#u;#m;constructor(e,t,n=!1){this.#f=e.width,this.#g=e.height,this.#y(t),n&&(this.#m=new Map)}growOperationsCount(e){e>=this.#u.length&&this.#y(e,this.#u)}#y(e,t){const n=new ArrayBuffer(e*4);this.#p=new Uint8ClampedArray(n),this.#u=new Uint32Array(n),t&&t.length>0?(this.#u.set(t),this.#u.fill(Sy,t.length)):this.#u.fill(Sy)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[yo]:{__proto__:this.#t[yo]}},this.#r={__proto__:this.#r},this.#n.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#r=Object.getPrototypeOf(this.#r);const n=this.#n.pop();return n!==void 0&&(zd(this.#m,e)?.dependencies.add(n),this.#u[e]=this.#u[n]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const t=this.#n.pop();return t!==void 0&&(zd(this.#m,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}beginMarkedContent(e){return this.#a.push(e),this}endMarkedContent(e){const t=this.#a.pop();return t!==void 0&&(zd(this.#m,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}pushBaseTransform(e){return this.#i.push(xe.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform())),this}popBaseTransform(){return this.#i.length>1&&this.#i.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#s.set(e,t),this}recordSimpleDataFromNamed(e,t,n){this.#e[e]=this.#s.get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(yo,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(yo,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,t,n,i,a,l){const c=xe.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform()),d=[1/0,1/0,-1/0,-1/0];xe.axialAlignedBoundingBox([n,a,i,l],c,d);const h=xe.intersect(this.#r,d);return h?(this.#r[0]=h[0],this.#r[1]=h[1],this.#r[2]=h[2],this.#r[3]=h[3]):(this.#r[0]=this.#r[1]=1/0,this.#r[2]=this.#r[3]=-1/0),this}recordBBox(e,t,n,i,a,l){const c=this.#r;if(c[0]===1/0)return this;const d=xe.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform());if(c[0]===-1/0)return xe.axialAlignedBoundingBox([n,a,i,l],d,this.#o),this;const h=[1/0,1/0,-1/0,-1/0];return xe.axialAlignedBoundingBox([n,a,i,l],d,h),this.#o[0]=Math.min(this.#o[0],Math.max(h[0],c[0])),this.#o[1]=Math.min(this.#o[1],Math.max(h[1],c[1])),this.#o[2]=Math.max(this.#o[2],Math.min(h[2],c[2])),this.#o[3]=Math.max(this.#o[3],Math.min(h[3],c[3])),this}recordCharacterBBox(e,t,n,i=1,a=0,l=0,c){const d=n.bbox;let h,f;if(d&&(h=d[2]!==d[0]&&d[3]!==d[1]&&this.#d.get(n),h!==!1&&(f=[0,0,0,0],xe.axialAlignedBoundingBox(d,n.fontMatrix,f),(i!==1||a!==0||l!==0)&&xe.scaleMinMax([i,0,0,-i,a,l],f),h)))return this.recordBBox(e,t,f[0],f[2],f[1],f[3]);if(!c)return this.recordFullPageBBox(e);const m=c();return d&&f&&h===void 0&&(h=f[0]<=a-m.actualBoundingBoxLeft&&f[2]>=a+m.actualBoundingBoxRight&&f[1]<=l-m.actualBoundingBoxAscent&&f[3]>=l+m.actualBoundingBoxDescent,this.#d.set(n,h),h)?this.recordBBox(e,t,f[0],f[2],f[1],f[3]):this.recordBBox(e,t,a-m.actualBoundingBoxLeft,a+m.actualBoundingBoxRight,l-m.actualBoundingBoxAscent,l+m.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#r[0]),this.#o[1]=Math.max(0,this.#r[1]),this.#o[2]=Math.min(this.#f,this.#r[2]),this.#o[3]=Math.min(this.#g,this.#r[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const n=this.#l,i=this.#e,a=this.#t;for(const l of t)l in this.#e?n.add(i[l]):l in a&&a[l].forEach(n.add,n);return this}recordNamedDependency(e,t){return this.#s.has(t)&&this.#l.add(this.#s.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[yo]),this.#m){const n=zd(this.#m,e),{dependencies:i}=n;this.#l.forEach(i.add,i),this.#n.forEach(i.add,i),this.#a.forEach(i.add,i),i.delete(e),n.isRenderingOperation=!0}if(this.#c===e){const n=eC(this.#o[0]*256/this.#f),i=eC(this.#o[1]*256/this.#g),a=tC(this.#o[2]*256/this.#f),l=tC(this.#o[3]*256/this.#g);Bd(this.#p,e,n,i,a,l);for(const c of this.#l)c!==e&&Bd(this.#p,c,n,i,a,l);for(const c of this.#n)c!==e&&Bd(this.#p,c,n,i,a,l);for(const c of this.#a)c!==e&&Bd(this.#p,c,n,i,a,l);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const n=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#r[0]=Math.max(this.#r[0],this.#o[0]),this.#r[1]=Math.max(this.#r[1],this.#o[1]),this.#r[2]=Math.min(this.#r[2],this.#o[2]),this.#r[3]=Math.min(this.#r[3],this.#o[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#d.clear(),new l8(this.#u,this.#p)}takeDebugMetadata(){return this.#m}}class _h{#e;#t;#s;#n=0;#a=0;constructor(e,t,n){if(e instanceof _h&&e.#s===!!n)return e;this.#e=e,this.#t=t,this.#s=!!n}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#a++,this.#e.save(this.#t),this}restore(e){return this.#a>0&&(this.#e.restore(this.#t),this.#a--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#s||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,n,i,a,l){return this.#s||this.#e.recordClipBox(this.#t,t,n,i,a,l),this}recordBBox(e,t,n,i,a,l){return this.#s||this.#e.recordBBox(this.#t,t,n,i,a,l),this}recordCharacterBBox(e,t,n,i,a,l,c){return this.#s||this.#e.recordCharacterBBox(this.#t,t,n,i,a,l,c),this}recordFullPageBBox(e){return this.#s||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#s||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const hs={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},an={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Ay(s,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,n),s.clip(i)}class Qv{isModifyingCurrentTransform(){return!1}getPattern(){pt("Abstract method `getPattern` called.")}}class u8 extends Qv{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,i){let a;if(i===an.STROKE||i===an.FILL){const l=t.current.getClippedPathBoundingBox(i,At(e))||[0,0,0,0],c=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,h=t.cachedCanvases.getCanvas("pattern",c,d),f=h.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-l[0],-l[1]),n=xe.transform(n,[1,0,0,1,l[0],l[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),Ay(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),a=e.createPattern(h.canvas,"no-repeat");const m=new DOMMatrix(n);a.setTransform(m)}else Ay(e,this._bbox),a=this._createGradient(e);return a}}function xg(s,e,t,n,i,a,l,c){const d=e.coords,h=e.colors,f=s.data,m=s.width*4;let y;d[t+1]>d[n+1]&&(y=t,t=n,n=y,y=a,a=l,l=y),d[n+1]>d[i+1]&&(y=n,n=i,i=y,y=l,l=c,c=y),d[t+1]>d[n+1]&&(y=t,t=n,n=y,y=a,a=l,l=y);const x=(d[t]+e.offsetX)*e.scaleX,A=(d[t+1]+e.offsetY)*e.scaleY,S=(d[n]+e.offsetX)*e.scaleX,C=(d[n+1]+e.offsetY)*e.scaleY,E=(d[i]+e.offsetX)*e.scaleX,_=(d[i+1]+e.offsetY)*e.scaleY;if(A>=_)return;const R=h[a],N=h[a+1],M=h[a+2],j=h[l],D=h[l+1],O=h[l+2],I=h[c],U=h[c+1],$=h[c+2],J=Math.round(A),ie=Math.round(_);let X,ae,P,F,B,V,de,L;for(let q=J;q<=ie;q++){if(q<C){const Q=q<A?0:(A-q)/(A-C);X=x-(x-S)*Q,ae=R-(R-j)*Q,P=N-(N-D)*Q,F=M-(M-O)*Q}else{let Q;q>_?Q=1:C===_?Q=0:Q=(C-q)/(C-_),X=S-(S-E)*Q,ae=j-(j-I)*Q,P=D-(D-U)*Q,F=O-(O-$)*Q}let te;q<A?te=0:q>_?te=1:te=(A-q)/(A-_),B=x-(x-E)*te,V=R-(R-I)*te,de=N-(N-U)*te,L=M-(M-$)*te;const oe=Math.round(Math.min(X,B)),pe=Math.round(Math.max(X,B));let se=m*q+oe*4;for(let Q=oe;Q<=pe;Q++)te=(X-Q)/(X-B),te<0?te=0:te>1&&(te=1),f[se++]=ae-(ae-V)*te|0,f[se++]=P-(P-de)*te|0,f[se++]=F-(F-L)*te|0,f[se++]=255}}function d8(s,e,t){const n=e.coords,i=e.colors;let a,l;switch(e.type){case"lattice":const c=e.verticesPerRow,d=Math.floor(n.length/c)-1,h=c-1;for(a=0;a<d;a++){let f=a*c;for(let m=0;m<h;m++,f++)xg(s,t,n[f],n[f+1],n[f+c],i[f],i[f+1],i[f+c]),xg(s,t,n[f+c+1],n[f+1],n[f+c],i[f+c+1],i[f+1],i[f+c])}break;case"triangles":for(a=0,l=n.length;a<l;a+=3)xg(s,t,n[a],n[a+1],n[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class h8 extends Qv{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const c=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-c,f=Math.ceil(this._bounds[3])-d,m=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),x=h/m,A=f/y,S={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-d,scaleX:1/x,scaleY:1/A},C=m+4,E=y+4,_=n.getCanvas("mesh",C,E),R=_.context,N=R.createImageData(m,y);if(t){const j=N.data;for(let D=0,O=j.length;D<O;D+=4)j[D]=t[0],j[D+1]=t[1],j[D+2]=t[2],j[D+3]=255}for(const j of this._figures)d8(N,j,S);return R.putImageData(N,2,2),{canvas:_.canvas,offsetX:c-2*x,offsetY:d-2*A,scaleX:x,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,i){Ay(e,this._bbox);const a=new Float32Array(2);if(i===an.SHADING)xe.singularValueDecompose2dScale(At(e),a);else if(this.matrix){xe.singularValueDecompose2dScale(this.matrix,a);const[c,d]=a;xe.singularValueDecompose2dScale(t.baseTransform,a),a[0]*=c,a[1]*=d}else xe.singularValueDecompose2dScale(t.baseTransform,a);const l=this._createMeshCanvas(a,i===an.SHADING?null:this._background,t.cachedCanvases);return i!==an.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(l.offsetX,l.offsetY),e.scale(l.scaleX,l.scaleY),e.createPattern(l.canvas,"no-repeat")}}class f8 extends Qv{getPattern(){return"hotpink"}}function p8(s){switch(s[0]){case"RadialAxial":return new u8(s);case"Mesh":return new h8(s);case"Dummy":return new f8}throw new Error(`Unknown IR type: ${s[0]}`)}const nC={COLORED:1,UNCOLORED:2};class Zv{static MAX_PATTERN_SIZE=3e3;constructor(e,t,n,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e,t){const{bbox:n,operatorList:i,paintType:a,tilingType:l,color:c,canvasGraphicsFactory:d}=this;let{xstep:h,ystep:f}=this;h=Math.abs(h),f=Math.abs(f),nf("TilingType: "+l);const m=n[0],y=n[1],x=n[2],A=n[3],S=x-m,C=A-y,E=new Float32Array(2);xe.singularValueDecompose2dScale(this.matrix,E);const[_,R]=E;xe.singularValueDecompose2dScale(this.baseTransform,E);const N=_*E[0],M=R*E[1];let j=S,D=C,O=!1,I=!1;const U=Math.ceil(h*N),$=Math.ceil(f*M),J=Math.ceil(S*N),ie=Math.ceil(C*M);U>=J?j=h:O=!0,$>=ie?D=f:I=!0;const X=this.getSizeAndScale(j,this.ctx.canvas.width,N),ae=this.getSizeAndScale(D,this.ctx.canvas.height,M),P=e.cachedCanvases.getCanvas("pattern",X.size,ae.size),F=P.context,B=d.createCanvasGraphics(F,t);if(B.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(B,a,c),F.translate(-X.scale*m,-ae.scale*y),B.transform(0,X.scale,0,0,ae.scale,0,0),F.save(),B.dependencyTracker?.save(),this.clipBbox(B,m,y,x,A),B.baseTransform=At(B.ctx),B.executeOperatorList(i),B.endDrawing(),B.dependencyTracker?.restore(),F.restore(),O||I){const V=P.canvas;O&&(j=h),I&&(D=f);const de=this.getSizeAndScale(j,this.ctx.canvas.width,N),L=this.getSizeAndScale(D,this.ctx.canvas.height,M),q=de.size,te=L.size,oe=e.cachedCanvases.getCanvas("pattern-workaround",q,te),pe=oe.context,se=O?Math.floor(S/h):0,Q=I?Math.floor(C/f):0;for(let ye=0;ye<=se;ye++)for(let ve=0;ve<=Q;ve++)pe.drawImage(V,q*ye,te*ve,q,te,0,0,q,te);return{canvas:oe.canvas,scaleX:de.scale,scaleY:L.scale,offsetX:m,offsetY:y}}return{canvas:P.canvas,scaleX:X.scale,scaleY:ae.scale,offsetX:m,offsetY:y}}getSizeAndScale(e,t,n){const i=Math.max(Zv.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*n);return a>=i?a=i:n=a/e,{scale:n,size:a}}clipBbox(e,t,n,i,a){const l=i-t,c=a-n;e.ctx.rect(t,n,l,c),xe.axialAlignedBoundingBox([t,n,i,a],At(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,a=e.current;switch(t){case nC.COLORED:const{fillStyle:l,strokeStyle:c}=this.ctx;i.fillStyle=a.fillColor=l,i.strokeStyle=a.strokeColor=c;break;case nC.UNCOLORED:i.fillStyle=i.strokeStyle=n,a.fillColor=a.strokeColor=n;break;default:throw new P$(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,i,a){let l=n;i!==an.SHADING&&(l=xe.transform(l,t.baseTransform),this.matrix&&(l=xe.transform(l,this.matrix)));const c=this.createPatternCanvas(t,a);let d=new DOMMatrix(l);d=d.translate(c.offsetX,c.offsetY),d=d.scale(1/c.scaleX,1/c.scaleY);const h=e.createPattern(c.canvas,"repeat");return h.setTransform(d),h}}function m8({src:s,srcPos:e=0,dest:t,width:n,height:i,nonBlackColor:a=4294967295,inverseDecode:l=!1}){const c=Qt.isLittleEndian?4278190080:255,[d,h]=l?[a,c]:[c,a],f=n>>3,m=n&7,y=s.length;t=new Uint32Array(t.buffer);let x=0;for(let A=0;A<i;A++){for(const C=e+f;e<C;e++){const E=e<y?s[e]:255;t[x++]=E&128?h:d,t[x++]=E&64?h:d,t[x++]=E&32?h:d,t[x++]=E&16?h:d,t[x++]=E&8?h:d,t[x++]=E&4?h:d,t[x++]=E&2?h:d,t[x++]=E&1?h:d}if(m===0)continue;const S=e<y?s[e++]:255;for(let C=0;C<m;C++)t[x++]=S&1<<7-C?h:d}return{srcPos:e,destPos:x}}const sC=16,iC=100,g8=15,rC=10,Ln=16,wg=new DOMMatrix,Wn=new Float32Array(2),To=new Float32Array([1/0,1/0,-1/0,-1/0]);function y8(s,e){if(s._removeMirroring)throw new Error("Context is already forwarding operations.");s.__originalSave=s.save,s.__originalRestore=s.restore,s.__originalRotate=s.rotate,s.__originalScale=s.scale,s.__originalTranslate=s.translate,s.__originalTransform=s.transform,s.__originalSetTransform=s.setTransform,s.__originalResetTransform=s.resetTransform,s.__originalClip=s.clip,s.__originalMoveTo=s.moveTo,s.__originalLineTo=s.lineTo,s.__originalBezierCurveTo=s.bezierCurveTo,s.__originalRect=s.rect,s.__originalClosePath=s.closePath,s.__originalBeginPath=s.beginPath,s._removeMirroring=()=>{s.save=s.__originalSave,s.restore=s.__originalRestore,s.rotate=s.__originalRotate,s.scale=s.__originalScale,s.translate=s.__originalTranslate,s.transform=s.__originalTransform,s.setTransform=s.__originalSetTransform,s.resetTransform=s.__originalResetTransform,s.clip=s.__originalClip,s.moveTo=s.__originalMoveTo,s.lineTo=s.__originalLineTo,s.bezierCurveTo=s.__originalBezierCurveTo,s.rect=s.__originalRect,s.closePath=s.__originalClosePath,s.beginPath=s.__originalBeginPath,delete s._removeMirroring},s.save=function(){e.save(),this.__originalSave()},s.restore=function(){e.restore(),this.__originalRestore()},s.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},s.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},s.transform=function(t,n,i,a,l,c){e.transform(t,n,i,a,l,c),this.__originalTransform(t,n,i,a,l,c)},s.setTransform=function(t,n,i,a,l,c){e.setTransform(t,n,i,a,l,c),this.__originalSetTransform(t,n,i,a,l,c)},s.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},s.rotate=function(t){e.rotate(t),this.__originalRotate(t)},s.clip=function(t){e.clip(t),this.__originalClip(t)},s.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},s.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},s.bezierCurveTo=function(t,n,i,a,l,c){e.bezierCurveTo(t,n,i,a,l,c),this.__originalBezierCurveTo(t,n,i,a,l,c)},s.rect=function(t,n,i,a){e.rect(t,n,i,a),this.__originalRect(t,n,i,a)},s.closePath=function(){e.closePath(),this.__originalClosePath()},s.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class v8{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,n)):(i=this.canvasFactory.create(t,n),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Ud(s,e,t,n,i,a,l,c,d,h){const[f,m,y,x,A,S]=At(s);if(m===0&&y===0){const _=l*f+A,R=Math.round(_),N=c*x+S,M=Math.round(N),j=(l+d)*f+A,D=Math.abs(Math.round(j)-R)||1,O=(c+h)*x+S,I=Math.abs(Math.round(O)-M)||1;return s.setTransform(Math.sign(f),0,0,Math.sign(x),R,M),s.drawImage(e,t,n,i,a,0,0,D,I),s.setTransform(f,m,y,x,A,S),[D,I]}if(f===0&&x===0){const _=c*y+A,R=Math.round(_),N=l*m+S,M=Math.round(N),j=(c+h)*y+A,D=Math.abs(Math.round(j)-R)||1,O=(l+d)*m+S,I=Math.abs(Math.round(O)-M)||1;return s.setTransform(0,Math.sign(m),Math.sign(y),0,R,M),s.drawImage(e,t,n,i,a,0,0,I,D),s.setTransform(f,m,y,x,A,S),[I,D]}s.drawImage(e,t,n,i,a,l,c,d,h);const C=Math.hypot(f,m),E=Math.hypot(y,x);return[C*d,E*h]}class aC{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=vy;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=sn.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,n){n?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=To.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=an.FILL,t=null){const n=this.minMax.slice();if(e===an.STROKE){t||pt("Stroke bounding box must include transform."),xe.singularValueDecompose2dScale(t,Wn);const i=Wn[0]*this.lineWidth/2,a=Wn[1]*this.lineWidth/2;n[0]-=i,n[1]-=a,n[2]+=i,n[3]+=a}return n}updateClipFromPath(){const e=xe.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(To,0)}getClippedPathBoundingBox(e=an.FILL,t=null){return xe.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function oC(s,e){if(e instanceof ImageData){s.putImageData(e,0,0);return}const t=e.height,n=e.width,i=t%Ln,a=(t-i)/Ln,l=i===0?a:a+1,c=s.createImageData(n,Ln);let d=0,h;const f=e.data,m=c.data;let y,x,A,S;if(e.kind===xc.GRAYSCALE_1BPP){const C=f.byteLength,E=new Uint32Array(m.buffer,0,m.byteLength>>2),_=E.length,R=n+7>>3,N=4294967295,M=Qt.isLittleEndian?4278190080:255;for(y=0;y<l;y++){for(A=y<a?Ln:i,h=0,x=0;x<A;x++){const j=C-d;let D=0;const O=j>R?n:j*8-7,I=O&-8;let U=0,$=0;for(;D<I;D+=8)$=f[d++],E[h++]=$&128?N:M,E[h++]=$&64?N:M,E[h++]=$&32?N:M,E[h++]=$&16?N:M,E[h++]=$&8?N:M,E[h++]=$&4?N:M,E[h++]=$&2?N:M,E[h++]=$&1?N:M;for(;D<O;D++)U===0&&($=f[d++],U=128),E[h++]=$&U?N:M,U>>=1}for(;h<_;)E[h++]=0;s.putImageData(c,0,y*Ln)}}else if(e.kind===xc.RGBA_32BPP){for(x=0,S=n*Ln*4,y=0;y<a;y++)m.set(f.subarray(d,d+S)),d+=S,s.putImageData(c,0,x),x+=Ln;y<l&&(S=n*i*4,m.set(f.subarray(d,d+S)),s.putImageData(c,0,x))}else if(e.kind===xc.RGB_24BPP)for(A=Ln,S=n*A,y=0;y<l;y++){for(y>=a&&(A=i,S=n*A),h=0,x=S;x--;)m[h++]=f[d++],m[h++]=f[d++],m[h++]=f[d++],m[h++]=255;s.putImageData(c,0,y*Ln)}else throw new Error(`bad image kind: ${e.kind}`)}function lC(s,e){if(e.bitmap){s.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,i=t%Ln,a=(t-i)/Ln,l=i===0?a:a+1,c=s.createImageData(n,Ln);let d=0;const h=e.data,f=c.data;for(let m=0;m<l;m++){const y=m<a?Ln:i;({srcPos:d}=m8({src:h,srcPos:d,dest:f,width:n,height:y,nonBlackColor:0})),s.putImageData(c,0,m*Ln)}}function nc(s,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)s[n]!==void 0&&(e[n]=s[n]);s.setLineDash!==void 0&&(e.setLineDash(s.getLineDash()),e.lineDashOffset=s.lineDashOffset)}function Vd(s){s.strokeStyle=s.fillStyle="#000000",s.fillRule="nonzero",s.globalAlpha=1,s.lineWidth=1,s.lineCap="butt",s.lineJoin="miter",s.miterLimit=10,s.globalCompositeOperation="source-over",s.font="10px sans-serif",s.setLineDash!==void 0&&(s.setLineDash([]),s.lineDashOffset=0);const{filter:e}=s;e!=="none"&&e!==""&&(s.filter="none")}function cC(s,e){if(e)return!0;xe.singularValueDecompose2dScale(s,Wn);const t=Math.fround(Ms.pixelRatio*ya.PDF_TO_CSS_UNITS);return Wn[0]<=t&&Wn[1]<=t}const b8=["butt","round","square"],x8=["miter","round","bevel"],w8={},uC={};class Po{constructor(e,t,n,i,a,{optionalContentConfig:l,markedContentStack:c=null},d,h,f){this.ctx=e,this.current=new aC(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=l,this.cachedCanvases=new v8(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,t,n=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:i=null}){const a=this.ctx.canvas.width,l=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,l),this.ctx.fillStyle=c,n){const d=this.cachedCanvases.getCanvas("transparent",a,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...At(this.compositeCtx))}this.ctx.save(),Vd(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=At(this.ctx)}executeOperatorList(e,t,n,i,a){const l=e.argsArray,c=e.fnArray;let d=t||0;const h=l.length;if(h===d)return d;const f=h-d>rC&&typeof n=="function",m=f?Date.now()+g8:0;let y=0;const x=this.commonObjs,A=this.objs;let S,C;for(;;){if(i!==void 0&&d===i.nextBreakPoint)return i.breakIt(d,n),d;if(!a||a(d))if(S=c[d],C=l[d]??null,S!==Ho.dependency)C===null?this[S](d):this[S](d,...C);else for(const E of C){this.dependencyTracker?.recordNamedData(E,d);const _=E.startsWith("g_")?x:A;if(!_.has(E))return _.get(E,n),d}if(d++,d===h)return d;if(f&&++y>rC){if(Date.now()>m)return n(),d;y=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const n=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(t[0],t[1]),1),l=Math.max(Math.hypot(t[2],t[3]),1),c=n,d=i,h="prescale1",f,m;for(;a>2&&c>1||l>2&&d>1;){let y=c,x=d;a>2&&c>1&&(y=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),a/=c/y),l>2&&d>1&&(x=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/x),f=this.cachedCanvases.getCanvas(h,y,x),m=f.context,m.clearRect(0,0,y,x),m.drawImage(e,0,0,c,d,0,0,y,x),e=f.canvas,c=y,d=x,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:d}}_createMaskCanvas(e,t){const n=this.ctx,{width:i,height:a}=t,l=this.current.fillColor,c=this.current.patternFill,d=At(n);let h,f,m,y;if((t.bitmap||t.data)&&t.count>1){const U=t.bitmap||t.data.buffer;f=JSON.stringify(c?d:[d.slice(0,4),l]),h=this._cachedBitmapsMap.get(U),h||(h=new Map,this._cachedBitmapsMap.set(U,h));const $=h.get(f);if($&&!c){const J=Math.round(Math.min(d[0],d[2])+d[4]),ie=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(e,hs.transformAndFill),{canvas:$,offsetX:J,offsetY:ie}}m=$}m||(y=this.cachedCanvases.getCanvas("maskCanvas",i,a),lC(y.context,t));let x=xe.transform(d,[1/i,0,0,-1/a,0,0]);x=xe.transform(x,[1,0,0,1,0,-a]);const A=To.slice();xe.axialAlignedBoundingBox([0,0,i,a],x,A);const[S,C,E,_]=A,R=Math.round(E-S)||1,N=Math.round(_-C)||1,M=this.cachedCanvases.getCanvas("fillCanvas",R,N),j=M.context,D=S,O=C;j.translate(-D,-O),j.transform(...x),m||(m=this._scaleImage(y.canvas,zs(j)),m=m.img,h&&c&&h.set(f,m)),j.imageSmoothingEnabled=cC(At(j),t.interpolate),Ud(j,m,0,0,m.width,m.height,0,0,i,a),j.globalCompositeOperation="source-in";const I=xe.transform(zs(j),[1,0,0,1,-D,-O]);return j.fillStyle=c?l.getPattern(n,this,I,an.FILL,e):l,j.fillRect(0,0,i,a),h&&!c&&(this.cachedCanvases.delete("fillCanvas"),h.set(f,M.canvas)),this.dependencyTracker?.recordDependencies(e,hs.transformAndFill),{canvas:M.canvas,offsetX:Math.round(D),offsetY:Math.round(O)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=b8[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=x8[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){this.dependencyTracker?.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[n,i]of t)switch(n){case"LW":this.setLineWidth(e,i);break;case"LC":this.setLineCap(e,i);break;case"LJ":this.setLineJoin(e,i);break;case"ML":this.setMiterLimit(e,i);break;case"D":this.setDash(e,i[0],i[1]);break;case"RI":this.setRenderingIntent(e,i);break;case"FL":this.setFlatness(e,i);break;case"Font":this.setFont(e,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,t,n);this.suspendedCtx=this.ctx;const l=this.ctx=a.context;l.setTransform(this.suspendedCtx.getTransform()),nc(this.suspendedCtx,l),y8(l,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),nc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,i){const a=i[0],l=i[1],c=i[2]-a,d=i[3]-l;c===0||d===0||(this.genericComposeSMask(t.context,n,c,d,t.subtype,t.backdrop,t.transferMap,a,l,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,i,a,l,c,d,h,f,m){let y=e.canvas,x=d-f,A=h-m;if(l)if(x<0||A<0||x+n>y.width||A+i>y.height){const C=this.cachedCanvases.getCanvas("maskExtension",n,i),E=C.context;E.drawImage(y,-x,-A),E.globalCompositeOperation="destination-atop",E.fillStyle=l,E.fillRect(0,0,n,i),E.globalCompositeOperation="source-over",y=C.canvas,x=A=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(x,A,n,i),e.clip(C),e.globalCompositeOperation="destination-atop",e.fillStyle=l,e.fillRect(x,A,n,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&c?t.filter=this.filterFactory.addAlphaFilter(c):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(c));const S=new Path2D;S.rect(d,h,n,i),t.clip(S),t.globalCompositeOperation="destination-in",t.drawImage(y,x,A,n,i,d,h,n,i),t.restore()}save(e){this.inSMaskMode&&nc(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&nc(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,i,a,l,c){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,n,i,a,l,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,i){let[a]=n;if(!i){a||=n[0]=new Path2D,this[t](e,a);return}if(this.dependencyTracker!==null){const l=t===Ho.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-l,i[2]+l,i[1]-l,i[3]+l).recordDependencies(e,["transform"])}if(!(a instanceof Path2D)){const l=n[0]=new Path2D;for(let c=0,d=a.length;c<d;)switch(a[c++]){case Pd.moveTo:l.moveTo(a[c++],a[c++]);break;case Pd.lineTo:l.lineTo(a[c++],a[c++]);break;case Pd.curveTo:l.bezierCurveTo(a[c++],a[c++],a[c++],a[c++],a[c++],a[c++]);break;case Pd.closePath:l.closePath();break;default:Be(`Unrecognized drawing path operator: ${a[c-1]}`);break}a=l}xe.axialAlignedBoundingBox(i,At(this.ctx),this.current.minMax),this[t](e,a),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){const i=this.ctx,a=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){const l=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=a.getPattern(i,this,zs(i),an.STROKE,e),l){const c=new Path2D;c.addPath(t,i.getTransform().invertSelf().multiplySelf(l)),t=c}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,hs.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(an.STROKE,At(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){const i=this.ctx,a=this.current.fillColor,l=this.current.patternFill;let c=!1;if(l){const h=a.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(e),i.save(),i.fillStyle=a.getPattern(i,this,zs(i),an.FILL,e),h){const f=new Path2D;f.addPath(t,i.getTransform().invertSelf().multiplySelf(h)),t=f}c=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),this.dependencyTracker?.recordDependencies(e,hs.fill),c&&(i.restore(),this.dependencyTracker?.restore(e)),n&&this.consumePath(e,t,d)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,hs.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=w8}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=uC}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,a=n.getTransform().invertSelf();for(const{transform:l,x:c,y:d,fontSize:h,path:f}of t)f&&i.addPath(f,new DOMMatrix(l).preMultiplySelf(a).translate(c,d).scale(h,-h));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),a=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=i.fontMatrix||vy,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&Be("Invalid font matrix for font "+t),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const l=i.loadedName||"sans-serif",c=i.systemFontInfo?.css||`"${l}", ${i.fallbackName}`;let d="normal";i.black?d="900":i.bold&&(d="bold");const h=i.italic?"italic":"normal";let f=n;n<sC?f=sC:n>iC&&(f=iC),this.current.fontSizeScale=n/f,this.ctx.font=`${h} ${d} ${f}px ${c}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){this.dependencyTracker?.recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#s(e,t,n){const i=new Path2D;return i.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),i}paintChar(e,t,n,i,a,l){const c=this.ctx,d=this.current,h=d.font,f=d.textRenderingMode,m=d.fontSize/d.fontSizeScale,y=f&sn.FILL_STROKE_MASK,x=!!(f&sn.ADD_TO_PATH_FLAG),A=d.patternFill&&!h.missingFile,S=d.patternStroke&&!h.missingFile;let C;if((h.disableFontFace||x||A||S)&&!h.missingFile&&(C=h.getPathGenerator(this.commonObjs,t)),C&&(h.disableFontFace||A||S)){c.save(),c.translate(n,i),c.scale(m,-m),this.dependencyTracker?.recordCharacterBBox(e,c,h);let E;if(y===sn.FILL||y===sn.FILL_STROKE)if(a){E=c.getTransform(),c.setTransform(...a);const _=this.#s(C,E,a);c.fill(_)}else c.fill(C);if(y===sn.STROKE||y===sn.FILL_STROKE)if(l){E||=c.getTransform(),c.setTransform(...l);const{a:_,b:R,c:N,d:M}=E,j=xe.inverseTransform(l),D=xe.transform([_,R,N,M,0,0],j);xe.singularValueDecompose2dScale(D,Wn),c.lineWidth*=Math.max(Wn[0],Wn[1])/m,c.stroke(this.#s(C,E,l))}else c.lineWidth/=m,c.stroke(C);c.restore()}else(y===sn.FILL||y===sn.FILL_STROKE)&&(c.fillText(t,n,i),this.dependencyTracker?.recordCharacterBBox(e,c,h,m,n,i,()=>c.measureText(t))),(y===sn.STROKE||y===sn.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,c,h,m,n,i,()=>c.measureText(t)).recordDependencies(e,hs.stroke),c.strokeText(t,n,i));x&&((this.pendingTextPaths||=[]).push({transform:At(c),x:n,y:i,fontSize:m,path:C}),this.dependencyTracker?.recordCharacterBBox(e,c,h,m,n,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){n=!0;break}return $e(this,"isFontSubpixelAAEnabled",n)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,hs.showText).resetBBox(e),this.current.textRenderingMode&sn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const a=n.fontSize;if(a===0){this.dependencyTracker?.recordOperation(e);return}const l=this.ctx,c=n.fontSizeScale,d=n.charSpacing,h=n.wordSpacing,f=n.fontDirection,m=n.textHScale*f,y=t.length,x=i.vertical,A=x?1:-1,S=i.defaultVMetrics,C=a*n.fontMatrix[0],E=n.textRenderingMode===sn.FILL&&!i.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),f>0?l.scale(m,-1):l.scale(m,1);let _,R;if(n.patternFill){l.save();const O=n.fillColor.getPattern(l,this,zs(l),an.FILL,e);_=At(l),l.restore(),l.fillStyle=O}if(n.patternStroke){l.save();const O=n.strokeColor.getPattern(l,this,zs(l),an.STROKE,e);R=At(l),l.restore(),l.strokeStyle=O}let N=n.lineWidth;const M=n.textMatrixScale;if(M===0||N===0){const O=n.textRenderingMode&sn.FILL_STROKE_MASK;(O===sn.STROKE||O===sn.FILL_STROKE)&&(N=this.getSinglePixelWidth())}else N/=M;if(c!==1&&(l.scale(c,c),N/=c),l.lineWidth=N,i.isInvalidPDFjsFont){const O=[];let I=0;for(const $ of t)O.push($.unicode),I+=$.width;const U=O.join("");if(l.fillText(U,0,0),this.dependencyTracker!==null){const $=l.measureText(U);this.dependencyTracker.recordBBox(e,this.ctx,-$.actualBoundingBoxLeft,$.actualBoundingBoxRight,-$.actualBoundingBoxAscent,$.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=I*C*m,l.restore(),this.compose();return}let j=0,D;for(D=0;D<y;++D){const O=t[D];if(typeof O=="number"){j+=A*O*a/1e3;continue}let I=!1;const U=(O.isSpace?h:0)+d,$=O.fontChar,J=O.accent;let ie,X,ae=O.width;if(x){const B=O.vmetric||S,V=-(O.vmetric?B[1]:ae*.5)*C,de=B[2]*C;ae=B?-B[0]:ae,ie=V/c,X=(j+de)/c}else ie=j/c,X=0;let P;if(i.remeasure&&ae>0){P=l.measureText($);const B=P.width*1e3/a*c;if(ae<B&&this.isFontSubpixelAAEnabled){const V=ae/B;I=!0,l.save(),l.scale(V,1),ie/=V}else ae!==B&&(ie+=(ae-B)/2e3*a/c)}if(this.contentVisible&&(O.isInFont||i.missingFile)){if(E&&!J)l.fillText($,ie,X),this.dependencyTracker?.recordCharacterBBox(e,l,P?{bbox:null}:i,a/c,ie,X,()=>P??l.measureText($));else if(this.paintChar(e,$,ie,X,_,R),J){const B=ie+a*J.offset.x/c,V=X-a*J.offset.y/c;this.paintChar(e,J.fontChar,B,V,_,R)}}const F=x?ae*C-U*f:ae*C+U*f;j+=F,I&&l.restore()}x?n.y-=j:n.x+=j*m,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,i=this.current,a=i.font,l=i.fontSize,c=i.fontDirection,d=a.vertical?1:-1,h=i.charSpacing,f=i.wordSpacing,m=i.textHScale*c,y=i.fontMatrix||vy,x=t.length,A=i.textRenderingMode===sn.INVISIBLE;let S,C,E,_;if(A||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(m,c);const R=this.dependencyTracker;for(this.dependencyTracker=R?new _h(R,e):null,S=0;S<x;++S){if(C=t[S],typeof C=="number"){_=d*C*l/1e3,this.ctx.translate(_,0),i.x+=_*m;continue}const N=(C.isSpace?f:0)+h,M=a.charProcOperatorList[C.operatorListId];M?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...y),this.executeOperatorList(M),this.restore()):Be(`Type3 character "${C.operatorListId}" is not available.`);const j=[C.width,0];xe.applyTransform(j,y),E=j[0]*l+N,n.translate(E,0),i.x+=E*m}n.restore(),R&&(this.dependencyTracker=R)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,i,a,l,c){const d=new Path2D;d.rect(i,a,l-i,c-a),this.ctx.clip(d),this.dependencyTracker?.recordBBox(e,this.ctx,i,l,a,c).recordClipBox(e,this.ctx,i,l,a,c),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const i=this.baseTransform||At(this.ctx),a={createCanvasGraphics:(l,c)=>new Po(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new _h(this.dependencyTracker,c,!0):null)};n=new Zv(t,this.ctx,a,i)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=p8(this.getObject(e,t)),this.cachedPatterns.set(t,i)),n&&(i.matrix=n),i}shadingFill(e,t){if(!this.contentVisible)return;const n=this.ctx;this.save(e);const i=this._getPattern(e,t);n.fillStyle=i.getPattern(n,this,zs(n),an.SHADING,e);const a=zs(n);if(a){const{width:l,height:c}=n.canvas,d=To.slice();xe.axialAlignedBoundingBox([0,0,l,c],a,d);const[h,f,m,y]=d;this.ctx.fillRect(h,f,m-h,y-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,hs.transform).recordDependencies(e,hs.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){pt("Should not call beginInlineImage")}beginImageData(){pt("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=At(this.ctx),n)){xe.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[i,a,l,c]=n,d=new Path2D;d.rect(i,a,l-i,c-a),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(e,this.ctx,i,l,a,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||nf("TODO: Support non-isolated groups."),t.knockout&&Be("Knockout groups not supported.");const i=At(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=To.slice();xe.axialAlignedBoundingBox(t.bbox,At(n),a);const l=[0,0,n.canvas.width,n.canvas.height];a=xe.intersect(a,l)||[0,0,0,0];const c=Math.floor(a[0]),d=Math.floor(a[1]),h=Math.max(Math.ceil(a[2])-c,1),f=Math.max(Math.ceil(a[3])-d,1);this.current.startNewPathAndClipBox([0,0,h,f]);let m="groupAt"+this.groupLevel;t.smask&&(m+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(m,h,f),x=y.context;x.translate(-c,-d),x.transform(...i);let A=new Path2D;const[S,C,E,_]=t.bbox;if(A.rect(S,C,E-S,_-C),t.matrix){const R=new Path2D;R.addPath(A,new DOMMatrix(t.matrix)),A=R}x.clip(A),t.smask&&this.smaskStack.push({canvas:y.canvas,context:x,offsetX:c,offsetY:d,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(c,d),n.save()),nc(n,x),this.ctx=x,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=At(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const l=To.slice();xe.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],a,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,n,i,a,l){if(this.#e(),Vd(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const c=n[2]-n[0],d=n[3]-n[1];if(l&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=c,n[3]=d,xe.singularValueDecompose2dScale(At(this.ctx),Wn);const{viewportScale:h}=this,f=Math.ceil(c*this.outputScaleX*h),m=Math.ceil(d*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(f,m);const{canvas:y,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(t,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(Wn[0],0,0,-Wn[1],0,d*Wn[1]),Vd(this.ctx)}else{Vd(this.ctx),this.endPath(e);const h=new Path2D;h.rect(n[0],n[1],c,d),this.ctx.clip(h)}}this.current=new aC(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...a)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const i=this.ctx,a=this._createMaskCanvas(e,t),l=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(l,a.offsetX,a.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,a.offsetX,a.offsetX+l.width,a.offsetY,a.offsetY+l.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,i=0,a=0,l,c){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const d=this.ctx;d.save();const h=At(d);d.transform(n,i,a,l,0,0);const f=this._createMaskCanvas(e,t);d.setTransform(1,0,0,1,f.offsetX-h[4],f.offsetY-h[5]),this.dependencyTracker?.resetBBox(e);for(let m=0,y=c.length;m<y;m+=2){const x=xe.transform(h,[n,i,a,l,c[m],c[m+1]]);d.drawImage(f.canvas,x[4],x[5]),this.dependencyTracker?.recordBBox(e,this.ctx,x[4],x[4]+f.canvas.width,x[5],x[5]+f.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,a=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,hs.transformAndFill);for(const l of t){const{data:c,width:d,height:h,transform:f}=l,m=this.cachedCanvases.getCanvas("maskCanvas",d,h),y=m.context;y.save();const x=this.getObject(e,c,l);lC(y,x),y.globalCompositeOperation="source-in",y.fillStyle=a?i.getPattern(y,this,zs(n),an.FILL,e):i,y.fillRect(0,0,d,h),y.restore(),n.save(),n.transform(...f),n.scale(1,-1),Ud(n,m.canvas,0,0,d,h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,n,0,d,0,h),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){Be("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,i,a){if(!this.contentVisible)return;const l=this.getObject(e,t);if(!l){Be("Dependent image isn't ready yet");return}const c=l.width,d=l.height,h=[];for(let f=0,m=a.length;f<m;f+=2)h.push({transform:[n,0,0,i,a[f],a[f+1]],x:0,y:0,w:c,h:d});this.paintInlineImageXObjectGroup(e,l,h)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",n,i),l=a.context;return l.filter=this.current.transferMaps,l.drawImage(t,0,0),l.filter="none",a.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const n=t.width,i=t.height,a=this.ctx;this.save(e);const{filter:l}=a;l!=="none"&&l!==""&&(a.filter="none"),a.scale(1/n,-1/i);let c;if(t.bitmap)c=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)c=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",n,i).context;oC(f,t),c=this.applyTransferMapsToCanvas(f)}const d=this._scaleImage(c,zs(a));a.imageSmoothingEnabled=cC(At(a),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,a,0,n,-i,0).recordDependencies(e,hs.imageXObject).recordOperation(e),Ud(a,d.img,0,0,d.paintWidth,d.paintHeight,0,-i,n,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){if(!this.contentVisible)return;const i=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const l=t.width,c=t.height,h=this.cachedCanvases.getCanvas("inlineImage",l,c).context;oC(h,t),a=this.applyTransferMapsToCanvas(h)}this.dependencyTracker?.resetBBox(e);for(const l of n)i.save(),i.transform(...l.transform),i.scale(1,-1),Ud(i,a,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,hs.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const a=this.ctx;this.pendingClip?(i||(this.pendingClip===uC?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=At(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:i,d:a}=this.ctx.getTransform();let l,c;if(n===0&&i===0){const d=Math.abs(t),h=Math.abs(a);if(d===h)if(e===0)l=c=1/d;else{const f=d*e;l=c=f<1?1/f:1}else if(e===0)l=1/d,c=1/h;else{const f=d*e,m=h*e;l=f<1?1/f:1,c=m<1?1/m:1}}else{const d=Math.abs(t*a-n*i),h=Math.hypot(t,n),f=Math.hypot(i,a);if(e===0)l=f/d,c=h/d;else{const m=e*d;l=f>m?f/m:1,c=h>m?h/m:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:i}}=this,[a,l]=this.getScaleForStroking();if(a===l){n.lineWidth=(i||1)*a,n.stroke(e);return}const c=n.getLineDash();t&&n.save(),n.scale(a,l),wg.a=1/a,wg.d=1/l;const d=new Path2D;if(d.addPath(e,wg),c.length>0){const h=Math.max(a,l);n.setLineDash(c.map(f=>f/h)),n.lineDashOffset/=h}n.lineWidth=i||1,n.stroke(d),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const s in Ho)Po.prototype[s]!==void 0&&(Po.prototype[Ho[s]]=Po.prototype[s]);class Lo{#e;#t;#s;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,n={};let i=0;for(const h of Lo.strings){const f=t.encode(e[h]);n[h]=f,i+=4+f.length}const a=new ArrayBuffer(i),l=new Uint8Array(a),c=new DataView(a);let d=0;for(const h of Lo.strings){const f=n[h],m=f.length;c.setUint32(d,m),l.set(f,d+4),d+=4+m}return Je(d===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#s=new TextDecoder}#n(e){Je(e<Lo.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const n=this.#t.getUint32(t);return this.#s.decode(new Uint8Array(this.#e,t+4,n))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Io{#e;#t;#s;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,n={};let i=0;for(const y of Io.strings){const x=t.encode(e[y]);n[y]=x,i+=4+x.length}i+=4;let a,l,c=1+i;e.style&&(a=t.encode(e.style.style),l=t.encode(e.style.weight),c+=4+a.length+4+l.length);const d=new ArrayBuffer(c),h=new Uint8Array(d),f=new DataView(d);let m=0;f.setUint8(m++,e.guessFallback?1:0),f.setUint32(m,0),m+=4,i=0;for(const y of Io.strings){const x=n[y],A=x.length;i+=4+A,f.setUint32(m,A),h.set(x,m+4),m+=4+A}return f.setUint32(m-i-4,i),e.style&&(f.setUint32(m,a.length),h.set(a,m+4),m+=4+a.length,f.setUint32(m,l.length),h.set(l,m+4),m+=4+l.length),Je(m<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(m)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#s=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){Je(e<Io.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const n=this.#t.getUint32(t);return this.#s.decode(new Uint8Array(this.#e,t+4,n))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),n=this.#s.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const i=this.#t.getUint32(e),a=this.#s.decode(new Uint8Array(this.#e,e+4,i));return{style:n,weight:a}}}class dt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#s=this.#t+1+8;static#n=this.#s+1+48;static#a=this.#n+1+6;#i;#r;#o;constructor({data:e,extra:t}){this.#i=e,this.#r=new TextDecoder,this.#o=new DataView(this.#i),t&&Object.assign(this,t)}#c(e){Je(e<dt.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,i=this.#o.getUint8(t)>>n&3;return i===0?void 0:i===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return Je(e<dt.numbers.length,"Invalid number index"),this.#o.getFloat64(dt.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=dt.#t;if(this.#o.getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<4;i++)n.push(this.#o.getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=dt.#s;if(this.#o.getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<6;i++)n.push(this.#o.getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=dt.#n;if(this.#o.getUint8(e)===0)return;e+=1;const n=[];for(let i=0;i<3;i++)n.push(this.#o.getInt16(e,!0)),e+=2;return n}#h(e){Je(e<dt.strings.length,"Invalid string index");let t=dt.#a+4;for(let a=0;a<e;a++)t+=this.#o.getUint32(t)+4;const n=this.#o.getUint32(t),i=new Uint8Array(n);return i.set(new Uint8Array(this.#i,t+4,n)),this.#r.decode(i)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=dt.#a;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);if(a!==0)return new Uint8Array(this.#i,e+4,a)}clearData(){let e=dt.#a;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);new Uint8Array(this.#i,e+4,a).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=dt.#a;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(this.#i,e+4,i)),new Lo(a.buffer)}get systemFontInfo(){let e=dt.#a;const t=this.#o.getUint32(e);e+=4+t;const n=this.#o.getUint32(e);if(n===0)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(this.#i,e+4,n)),new Io(i.buffer)}static write(e){const t=e.systemFontInfo?Io.write(e.systemFontInfo):null,n=e.cssFontInfo?Lo.write(e.cssFontInfo):null,i=new TextEncoder,a={};let l=0;for(const S of dt.strings)a[S]=i.encode(e[S]),l+=4+a[S].length;const c=dt.#a+4+l+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),d=new ArrayBuffer(c),h=new Uint8Array(d),f=new DataView(d);let m=0;const y=dt.bools.length;let x=0,A=0;for(let S=0;S<y;S++){const C=e[dt.bools[S]];x|=(C===void 0?0:C?2:1)<<A,A+=2,(A===8||S===y-1)&&(f.setUint8(m++,x),x=0,A=0)}Je(m===dt.#e,"FontInfo.write: Boolean properties offset mismatch");for(const S of dt.numbers)f.setFloat64(m,e[S]),m+=8;if(Je(m===dt.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(m++,4);for(const S of e.bbox)f.setInt16(m,S,!0),m+=2}else f.setUint8(m++,0),m+=8;if(Je(m===dt.#s,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(m++,6);for(const S of e.fontMatrix)f.setFloat64(m,S,!0),m+=8}else f.setUint8(m++,0),m+=48;if(Je(m===dt.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(m++,1);for(const S of e.defaultVMetrics)f.setInt16(m,S,!0),m+=2}else f.setUint8(m++,0),m+=6;Je(m===dt.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(dt.#a,0),m+=4;for(const S of dt.strings){const C=a[S],E=C.length;f.setUint32(m,E),h.set(C,m+4),m+=4+E}if(f.setUint32(dt.#a,m-dt.#a-4),!t)f.setUint32(m,0),m+=4;else{const S=t.byteLength;f.setUint32(m,S),Je(m+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),h.set(new Uint8Array(t),m+4),m+=4+S}if(!n)f.setUint32(m,0),m+=4;else{const S=n.byteLength;f.setUint32(m,S),Je(m+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),h.set(new Uint8Array(n),m+4),m+=4+S}return e.data===void 0?(f.setUint32(m,0),m+=4):(f.setUint32(m,e.data.length),h.set(e.data,m+4),m+=4+e.data.length),Je(m<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(m)}}class br{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class S8{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const wo=Symbol("INTERNAL");class A8{#e=!1;#t=!1;#s=!1;#n=!0;constructor(e,{name:t,intent:n,usage:i,rbGroups:a}){this.#e=!!(e&Xn.DISPLAY),this.#t=!!(e&Xn.PRINT),this.name=t,this.intent=n,this.usage=i,this.rbGroups=a}get visible(){if(this.#s)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,n=!1){e!==wo&&pt("Internal method `_setVisible` called."),this.#s=n,this.#n=t}}class C8{#e=null;#t=new Map;#s=null;#n=null;constructor(e,t=Xn.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const n of e.groups)this.#t.set(n.id,new A8(t,n));if(e.baseState==="OFF")for(const n of this.#t.values())n._setVisible(wo,!1);for(const n of e.on)this.#t.get(n)._setVisible(wo,!0);for(const n of e.off)this.#t.get(n)._setVisible(wo,!1);this.#s=this.getHash()}}#a(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const a=e[i];let l;if(Array.isArray(a))l=this.#a(a);else if(this.#t.has(a))l=this.#t.get(a).visible;else return Be(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return nf("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Be(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#a(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return Be(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return Be(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return Be(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return Be(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Be(`Unknown optional content policy ${e.policy}.`),!0}return Be(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){const i=this.#t.get(e);if(!i){Be(`Optional content group not found: ${e}`);return}if(n&&t&&i.rbGroups.length)for(const a of i.rbGroups)for(const l of a)l!==e&&this.#t.get(l)?._setVisible(wo,!1,!0);i._setVisible(wo,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let n;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const a=this.#t.get(i);if(a)switch(n){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!a.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new cM;for(const[t,n]of this.#t)e.update(`${t}:${n.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class E8{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Je(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:l,contentDispositionFilename:c}=e;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=c,a?.length>0){const d=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((d,h)=>{this._onReceiveData({begin:d,chunk:h})}),e.addProgressListener((d,h)=>{this._onProgress({loaded:d,total:h})}),e.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(n),!0)});Je(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Je(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new _8(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new T8(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class _8{constructor(e,t,n=!1,i=null){this._stream=e,this._done=n||!1,this._filename=rf(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class T8{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function R8(s){let e=!0,t=n("filename\\*","i").exec(s);if(t){t=t[1];let f=c(t);return f=unescape(f),f=d(f),f=h(f),a(f)}if(t=l(s),t){const f=h(t);return a(f)}if(t=n("filename","i").exec(s),t){t=t[1];let f=c(t);return f=h(f),a(f)}function n(f,m){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function i(f,m){if(f){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const y=new TextDecoder(f,{fatal:!0}),x=eu(m);m=y.decode(x),e=!1}catch{}}return m}function a(f){return e&&/[\x80-\xff]/.test(f)&&(f=i("utf-8",f),e&&(f=i("iso-8859-1",f))),f}function l(f){const m=[];let y;const x=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=x.exec(f))!==null;){let[,S,C,E]=y;if(S=parseInt(S,10),S in m){if(S===0)break;continue}m[S]=[C,E]}const A=[];for(let S=0;S<m.length&&S in m;++S){let[C,E]=m[S];E=c(E),C&&(E=unescape(E),S===0&&(E=d(E))),A.push(E)}return A.join("")}function c(f){if(f.startsWith('"')){const m=f.slice(1).split('\\"');for(let y=0;y<m.length;++y){const x=m[y].indexOf('"');x!==-1&&(m[y]=m[y].slice(0,x),m.length=y+1),m[y]=m[y].replaceAll(/\\(.)/g,"$1")}f=m.join('"')}return f}function d(f){const m=f.indexOf("'");if(m===-1)return f;const y=f.slice(0,m),A=f.slice(m+1).replace(/^[^']*'/,"");return i(y,A)}function h(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,y,x,A){if(x==="q"||x==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,C){return String.fromCharCode(parseInt(C,16))}),i(y,A);try{A=atob(A)}catch{}return i(y,A)})}return""}function yM(s,e){const t=new Headers;if(!s||!e||typeof e!="object")return t;for(const n in e){const i=e[n];i!==void 0&&t.append(n,i)}return t}function af(s){return URL.parse(s)?.origin??null}function vM({responseHeaders:s,isHttp:e,rangeChunkSize:t,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(s.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*t)||n||!e||s.get("Accept-Ranges")!=="bytes"||(s.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function bM(s){const e=s.get("Content-Disposition");if(e){let t=R8(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(rf(t))return t}return null}function ru(s,e){return new Lc(`Unexpected server response (${s}) while retrieving PDF "${e}".`,s,s===404||s===0&&e.startsWith("file:"))}function xM(s){return s===200||s===206}function wM(s,e,t){return{method:"GET",headers:s,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function SM(s){return s instanceof Uint8Array?s.buffer:s instanceof ArrayBuffer?s:(Be(`getArrayBuffer - unexpected data format: ${s}`),new Uint8Array(s).buffer)}class N8{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=yM(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Je(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new M8(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new D8(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class M8{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),i=t.url;fetch(i,wM(n,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=af(a.url),!xM(a.status))throw ru(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const l=a.headers,{allowRangeRequests:c,suggestedLength:d}=vM({responseHeaders:l,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=d||this._contentLength,this._filename=bM(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Di("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:SM(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class D8{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${t}-${n-1}`);const l=i.url;fetch(l,wM(a,this._withCredentials,this._abortController)).then(c=>{const d=af(c.url);if(d!==e._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${e._responseOrigin}".`);if(!xM(c.status))throw ru(c.status,l);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:SM(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Sg=200,Ag=206;function k8(s){const e=s.response;return typeof e!="string"?e:eu(e).buffer}class j8{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:n}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=yM(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[a,l]of this.headers)t.setRequestHeader(a,l);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Ag):i.expectedStatus=Sg,t.responseType="arraybuffer",Je(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){const n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){n.onError(i.status);return}const a=i.status||Sg;if(!(a===Sg&&n.expectedStatus===Ag)&&a!==n.expectedStatus){n.onError(i.status);return}const c=k8(i);if(a===Ag){const d=i.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);h?n.onDone({begin:parseInt(h[1],10),chunk:c}):(Be('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class O8{constructor(e){this._source=e,this._manager=new j8(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Je(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new P8(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new L8(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class P8{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=af(t.responseURL);const n=t.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[d,...h]=c.split(": ");return[d,h.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:l}=vM({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=bM(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=ru(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class L8{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=af(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=ru(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const I8=/^[a-z][a-z0-9\-+.]+:/i;function F8(s){if(I8.test(s))return new URL(s);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(s))}class B8{constructor(e){this.source=e,this.url=F8(e.url),Je(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Je(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new z8(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new U8(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class z8{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=ru(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Di("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class U8{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const sc=Symbol("INITIAL_DATA");class AM{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:sc}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const n=this.#e[e];if(!n||n.data===sc)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=this.#e[e];return!!t&&t.data!==sc}delete(e){const t=this.#e[e];return!t||t.data===sc?!1:(delete this.#e[e],!0)}resolve(e,t=null){const n=this.#t(e);n.data=t,n.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==sc&&(yield[e,t])}}}const V8=1e5,dC=30;let Fc=class fs{#e=Promise.withResolvers();#t=null;#s=!1;#n=!!globalThis.FontInspector?.enabled;#a=null;#i=null;#r=0;#o=0;#c=null;#l=null;#h=0;#d=0;#f=Object.create(null);#g=[];#p=null;#u=[];#m=new WeakMap;#y=null;static#b=new Map;static#v=new Map;static#E=new WeakMap;static#A=null;static#x=new Set;constructor({textContentSource:e,container:t,viewport:n}){if(e instanceof ReadableStream)this.#p=e;else if(typeof e=="object")this.#p=new ReadableStream({start(d){d.enqueue(e),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#d=n.scale*Ms.pixelRatio,this.#h=n.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:a,pageX:l,pageY:c}=n.rawDims;this.#y=[1,0,0,-1,-l,c+a],this.#o=i,this.#r=a,fs.#N(),Cr(t,n),this.#e.promise.finally(()=>{fs.#x.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Qt.platform;return $e(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:n})=>{if(n){this.#e.resolve();return}this.#a??=t.lang,Object.assign(this.#f,t.styles),this.#T(t.items),e()},this.#e.reject)};return this.#c=this.#p.getReader(),fs.#x.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const n=e.scale*Ms.pixelRatio,i=e.rotation;if(i!==this.#h&&(t?.(),this.#h=i,Cr(this.#l,{rotation:i})),n!==this.#d){t?.(),this.#d=n;const a={div:null,properties:null,ctx:fs.#M(this.#a)};for(const l of this.#u)a.properties=this.#m.get(l),a.div=l,this.#C(a)}}cancel(){const e=new Di("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#T(e){if(this.#s)return;this.#i.ctx??=fs.#M(this.#a);const t=this.#u,n=this.#g;for(const i of e){if(t.length>V8){Be("Ignoring additional textDivs for performance reasons."),this.#s=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const a=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id&&this.#t.setAttribute("id",`${i.id}`),a.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}n.push(i.str),this.#S(i)}}#S(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#u.push(t);const i=xe.transform(this.#y,e.transform);let a=Math.atan2(i[1],i[0]);const l=this.#f[e.fontName];l.vertical&&(a+=Math.PI/2);let c=this.#n&&l.fontSubstitution||l.fontFamily;c=fs.fontFamilyMap.get(c)||c;const d=Math.hypot(i[2],i[3]),h=d*fs.#I(c,l,this.#a);let f,m;a===0?(f=i[4],m=i[5]-h):(f=i[4]+h*Math.sin(a),m=i[5]-h*Math.cos(a));const y="calc(var(--total-scale-factor) *",x=t.style;this.#t===this.#l?(x.left=`${(100*f/this.#o).toFixed(2)}%`,x.top=`${(100*m/this.#r).toFixed(2)}%`):(x.left=`${y}${f.toFixed(2)}px)`,x.top=`${y}${m.toFixed(2)}px)`),x.fontSize=`${y}${(fs.#A*d).toFixed(2)}px)`,x.fontFamily=c,n.fontSize=d,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=l.fontSubstitutionLoadedName||e.fontName),a!==0&&(n.angle=a*(180/Math.PI));let A=!1;if(e.str.length>1)A=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),C=Math.abs(e.transform[3]);S!==C&&Math.max(S,C)/Math.min(S,C)>1.5&&(A=!0)}if(A&&(n.canvasWidth=l.vertical?e.height:e.width),this.#m.set(t,n),this.#i.div=t,this.#i.properties=n,this.#C(this.#i),n.hasText&&this.#t.append(t),n.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#t.append(S)}}#C(e){const{div:t,properties:n,ctx:i}=e,{style:a}=t;let l="";if(fs.#A>1&&(l=`scale(${1/fs.#A})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=a,{canvasWidth:d,fontSize:h}=n;fs.#R(i,h*this.#d,c);const{width:f}=i.measureText(t.textContent);f>0&&(l=`scaleX(${d*this.#d/f}) ${l}`)}n.angle!==0&&(l=`rotate(${n.angle}deg) ${l}`),l.length>0&&(a.transform=l)}static cleanup(){if(!(this.#x.size>0)){this.#b.clear();for(const{canvas:e}of this.#v.values())e.remove();this.#v.clear()}}static#M(e=null){let t=this.#v.get(e||="");if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(e,t),this.#E.set(t,{size:0,family:""})}return t}static#R(e,t,n){const i=this.#E.get(e);t===i.size&&n===i.family||(e.font=`${t}px ${n}`,i.size=t,i.family=n)}static#N(){if(this.#A!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#A=e.getBoundingClientRect().height,e.remove()}static#I(e,t,n){const i=this.#b.get(e);if(i)return i;const a=this.#M(n);a.canvas.width=a.canvas.height=dC,this.#R(a,dC,e);const l=a.measureText(""),c=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let h=.8;return c?h=c/(c+d):(Qt.platform.isFirefox&&Be("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?h=t.ascent:t.descent&&(h=1+t.descent)),this.#b.set(e,h),h}};const H8=100;function Jv(s={}){typeof s=="string"||s instanceof URL?s={url:s}:(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s={data:s});const e=new eb,{docId:t}=e,n=s.url?Q$(s.url):null,i=s.data?Z$(s.data):null,a=s.httpHeaders||null,l=s.withCredentials===!0,c=s.password??null,d=s.range instanceof tb?s.range:null,h=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:2**16;let f=s.worker instanceof $o?s.worker:null;const m=s.verbosity,y=typeof s.docBaseUrl=="string"&&!nu(s.docBaseUrl)?s.docBaseUrl:null,x=Id(s.cMapUrl),A=s.cMapPacked!==!1,S=s.CMapReaderFactory||(bn?r8:Q1),C=Id(s.iccUrl),E=Id(s.standardFontDataUrl),_=s.StandardFontDataFactory||(bn?a8:Z1),R=Id(s.wasmUrl),N=s.WasmFactory||(bn?o8:J1),M=s.stopAtErrors!==!0,j=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,D=s.isEvalSupported!==!1,O=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!bn,I=typeof s.isImageDecoderSupported=="boolean"?s.isImageDecoderSupported:!bn&&(Qt.platform.isFirefox||!globalThis.chrome),U=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,$=typeof s.disableFontFace=="boolean"?s.disableFontFace:bn,J=s.fontExtraProperties===!0,ie=s.enableXfa===!0,X=s.ownerDocument||globalThis.document,ae=s.disableRange===!0,P=s.disableStream===!0,F=s.disableAutoFetch===!0,B=s.pdfBug===!0,V=s.CanvasFactory||(bn?i8:t8),de=s.FilterFactory||(bn?s8:n8),L=s.enableHWA===!0,q=s.useWasm!==!1,te=d?d.length:s.length??NaN,oe=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!bn&&!$,pe=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:!!(S===Q1&&_===Z1&&N===J1&&x&&E&&R&&dc(x,document.baseURI)&&dc(E,document.baseURI)&&dc(R,document.baseURI)),se=null;k$(m);const Q={canvasFactory:new V({ownerDocument:X,enableHWA:L}),filterFactory:new de({docId:t,ownerDocument:X}),cMapReaderFactory:pe?null:new S({baseUrl:x,isCompressed:A}),standardFontDataFactory:pe?null:new _({baseUrl:E}),wasmFactory:pe?null:new N({baseUrl:R})};f||(f=$o.create({verbosity:m,port:br.workerPort}),e._worker=f);const ye={docId:t,apiVersion:"5.4.296",data:i,password:c,disableAutoFetch:F,rangeChunkSize:h,length:te,docBaseUrl:y,enableXfa:ie,evaluatorOptions:{maxImageSize:j,disableFontFace:$,ignoreErrors:M,isEvalSupported:D,isOffscreenCanvasSupported:O,isImageDecoderSupported:I,canvasMaxAreaInBytes:U,fontExtraProperties:J,useSystemFonts:oe,useWasm:q,useWorkerFetch:pe,cMapUrl:x,iccUrl:C,standardFontDataUrl:E,wasmUrl:R}},ve={ownerDocument:X,pdfBug:B,styleElement:se,loadingParams:{disableAutoFetch:F,enableXfa:ie}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Re=f.messageHandler.sendWithPromise("GetDocRequest",ye,i?[i.buffer]:null);let Y;if(d)Y=new E8(d,{disableRange:ae,disableStream:P});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const ue=dc(n)?N8:bn?B8:O8;Y=new ue({url:n,length:te,httpHeaders:a,withCredentials:l,rangeChunkSize:h,disableRange:ae,disableStream:P})}return Re.then(ue=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const fe=new hc(t,ue,f.port),me=new q8(fe,e,Y,ve,Q,L);e._transport=me,fe.send("Ready",null)})}).catch(e._capability.reject),e}class eb{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${eb.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let tb=class{#e=Promise.withResolvers();#t=[];#s=[];#n=[];#a=[];constructor(e,t,n=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(e){this.#a.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#s.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const n of this.#a)n(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const n of this.#n)n(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#s)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){pt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class $8{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return $e(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class G8{#e=!1;constructor(e,t,n,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=i?new $1:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new AM,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:a=!1}={}){return new tu({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return $e(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:i="display",annotationMode:a=qs.ENABLE,transform:l=null,background:c=null,optionalContentConfigPromise:d=null,annotationCanvasMap:h=null,pageColors:f=null,printAnnotationStorage:m=null,isEditing:y=!1,recordOperations:x=!1,operationsFilter:A=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(i,a,m,y),{renderingIntent:C,cacheKey:E}=S;this.#e=!1,d||=this._transport.getOptionalContentConfig(C);let _=this._intentStates.get(E);_||(_=Object.create(null),this._intentStates.set(E,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const R=!!(C&Xn.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const N=!!(this._pdfBug&&globalThis.StepperManager?.enabled),M=!this.recordedBBoxes&&(x||N),j=I=>{if(_.renderTasks.delete(D),M){const U=D.gfx?.dependencyTracker.take();U&&(D.stepper&&D.stepper.setOperatorBBoxes(U,D.gfx.dependencyTracker.takeDebugMetadata()),x&&(this.recordedBBoxes=U))}R&&(this.#e=!0),this.#t(),I?(D.capability.reject(I),this._abortOperatorList({intentState:_,reason:I instanceof Error?I:new Error(I)})):D.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},D=new Ro({callback:j,params:{canvas:t,canvasContext:e,dependencyTracker:M?new c8(t,_.operatorList.length,N):null,viewport:n,transform:l,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:A});(_.renderTasks||=new Set).add(D);const O=D.task;return Promise.all([_.displayReadyCapability.promise,d]).then(([I,U])=>{if(this.destroyed){j();return}if(this._stats?.time("Rendering"),!(U.renderingIntent&C))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");D.initializeGraphics({transparency:I,optionalContentConfig:U}),D.operatorListChanged()}).catch(j),O}getOperatorList({intent:e="display",annotationMode:t=qs.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(e,t,n,i,!0);let c=this._intentStates.get(l.cacheKey);c||(c=Object.create(null),this._intentStates.set(l.cacheKey,c));let d;return c.opListReadCapability||(d=Object.create(null),d.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||=new Set).add(d),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Ic.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,i){function a(){l.read().then(function({value:d,done:h}){if(h){n(c);return}c.lang??=d.lang,Object.assign(c.styles,d.styles),c.items.push(...d.items),a()},i)}const l=t.getReader(),c={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new $1),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,i=e.length;n<i;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:i}){const{map:a,transfer:l}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:i},l).getReader(),h=this._intentStates.get(t);h.streamReader=d;const f=()=>{d.read().then(({value:m,done:y})=>{if(y){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,h),f())},m=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const y of h.renderTasks)y.operatorListChanged();this.#t()}if(h.displayReadyCapability)h.displayReadyCapability.reject(m);else if(h.opListReadCapability)h.opListReadCapability.reject(m);else throw m}})};f()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof sf){let i=H8;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Di(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var mr,Ts,Ai,aa,Th,oa,la,Cn,eh,CM,EM,fc,zo,th;const St=class St{constructor({name:e=null,port:t=null,verbosity:n=j$()}={}){Fs(this,Cn);Fs(this,mr,Promise.withResolvers());Fs(this,Ts,null);Fs(this,Ai,null);Fs(this,aa,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(wt(St,la).has(t))throw new Error("Cannot use more than one PDFWorker per port.");wt(St,la).set(t,this),Bs(this,Cn,CM).call(this,t)}else Bs(this,Cn,EM).call(this)}get promise(){return wt(this,mr).promise}get port(){return wt(this,Ai)}get messageHandler(){return wt(this,Ts)}destroy(){this.destroyed=!0,wt(this,aa)?.terminate(),On(this,aa,null),wt(St,la).delete(wt(this,Ai)),On(this,Ai,null),wt(this,Ts)?.destroy(),On(this,Ts,null)}static create(e){const t=wt(this,la).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new St(e)}static get workerSrc(){if(br.workerSrc)return br.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return $e(this,"_setupFakeWorkerGlobal",(async()=>wt(this,zo,th)?wt(this,zo,th):(await import(this.workerSrc)).WorkerMessageHandler)())}};mr=new WeakMap,Ts=new WeakMap,Ai=new WeakMap,aa=new WeakMap,Th=new WeakMap,oa=new WeakMap,la=new WeakMap,Cn=new WeakSet,eh=function(){wt(this,mr).resolve(),wt(this,Ts).send("configure",{verbosity:this.verbosity})},CM=function(e){On(this,Ai,e),On(this,Ts,new hc("main","worker",e)),wt(this,Ts).on("ready",()=>{}),Bs(this,Cn,eh).call(this)},EM=function(){if(wt(St,oa)||wt(St,zo,th)){Bs(this,Cn,fc).call(this);return}let{workerSrc:e}=St;try{St._isSameOrigin(window.location,e)||(e=St._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new hc("main","worker",t),i=()=>{a.abort(),n.destroy(),t.terminate(),this.destroyed?wt(this,mr).reject(new Error("Worker was destroyed")):Bs(this,Cn,fc).call(this)},a=new AbortController;t.addEventListener("error",()=>{wt(this,aa)||i()},{signal:a.signal}),n.on("test",c=>{if(a.abort(),this.destroyed||!c){i();return}On(this,Ts,n),On(this,Ai,t),On(this,aa,t),Bs(this,Cn,eh).call(this)}),n.on("ready",c=>{if(a.abort(),this.destroyed){i();return}try{l()}catch{Bs(this,Cn,fc).call(this)}});const l=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};l();return}catch{nf("The worker has been disabled.")}Bs(this,Cn,fc).call(this)},fc=function(){wt(St,oa)||(Be("Setting up fake worker."),On(St,oa,!0)),St._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){wt(this,mr).reject(new Error("Worker was destroyed"));return}const t=new e8;On(this,Ai,t);const n=`fake${aS(St,Th)._++}`,i=new hc(n+"_worker",n,t);e.setup(i,t),On(this,Ts,new hc(n,n+"_worker",t)),Bs(this,Cn,eh).call(this)}).catch(e=>{wt(this,mr).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},zo=new WeakSet,th=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Fs(St,zo),Fs(St,Th,0),Fs(St,oa,!1),Fs(St,la,new WeakMap),bn&&(On(St,oa,!0),br.workerSrc||="./pdf.worker.mjs"),St._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!n?.origin||n.origin==="null")return!1;const i=new URL(t,n);return n.origin===i.origin},St._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},St.fromPort=e=>{if(V$("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return St.create(e)};let $o=St;class q8{#e=new Map;#t=new Map;#s=new Map;#n=new Map;#a=null;constructor(e,t,n,i,a,l){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new AM,this.fontLoader=new W$({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#i(e,t=null){const n=this.#e.get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return $e(this,"annotationStorage",new Wv)}getRenderingIntent(e,t=qs.ENABLE,n=null,i=!1,a=!1){let l=Xn.DISPLAY,c=xy;switch(e){case"any":l=Xn.ANY;break;case"display":break;case"print":l=Xn.PRINT;break;default:Be(`getRenderingIntent - invalid intent: ${e}`)}const d=l&Xn.PRINT&&n instanceof uM?n:this.annotationStorage;switch(t){case qs.DISABLE:l+=Xn.ANNOTATIONS_DISABLE;break;case qs.ENABLE:break;case qs.ENABLE_FORMS:l+=Xn.ANNOTATIONS_FORMS;break;case qs.ENABLE_STORAGE:l+=Xn.ANNOTATIONS_STORAGE,c=d.serializable;break;default:Be(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(l+=Xn.IS_EDITING),a&&(l+=Xn.OPLIST);const{ids:h,hash:f}=d.modifiedIds,m=[l,c.hash,f];return{renderingIntent:l,cacheKey:m.join("_"),annotationStorageSerializable:c,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#a?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of this.#t.values())e.push(n._destroy());this.#t.clear(),this.#s.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Fc.cleanup(),this._networkStream?.cancelAllRequests(new Di("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,i)=>{Je(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:l}){if(l){i.close();return}Je(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:l}=this._fullReader;return(!i||!a)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=c=>{t.onProgress?.({loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:l}}),e.on("GetRangeReader",(n,i)=>{Je(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:l,done:c}){if(c){i.close();return}Je(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{i.error(l)})},i.onCancel=l=>{a.cancel(l),i.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new $8(n,this))}),e.on("DocException",n=>{t._capability.reject(Pn(n))}),e.on("PasswordRequest",n=>{this.#a=Promise.withResolvers();try{if(!t.onPassword)throw Pn(n);const i=a=>{a instanceof Error?this.#a.reject(a):this.#a.resolve({password:a})};t.onPassword(i,n.code)}catch(i){this.#a.reject(i)}return this.#a.promise}),e.on("DataLoaded",n=>{t.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;this.#t.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,i,a])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in a){const f=a.error;Be(`Error during font loading: ${f}`),this.commonObjs.resolve(n,f);break}const l=new dt(a),c=this._params.pdfBug&&globalThis.FontInspector?.enabled?(f,m)=>globalThis.FontInspector.fontAdded(f,m):null,d=new K$(l,c,a.extra,a.charProcOperatorList);this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:h}=a;Je(h,"The imageRef must be defined.");for(const f of this.#t.values())for(const[,m]of f.objs)if(m?.ref===h)return m.dataLen?(this.commonObjs.resolve(n,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([n,i,a,l])=>{if(this.destroyed)return;const c=this.#t.get(i);if(!c.objs.has(n)){if(c._intentStates.size===0){l?.bitmap?.close();return}switch(a){case"Image":case"Pattern":c.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",n=>{this.destroyed||t.onProgress?.({loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Be("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=this.#s.get(t);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#n.set(a.refStr,e);const l=new G8(t,a,this,this._params.pdfBug);return this.#t.set(t,l),l});return this.#s.set(t,i),i}getPageIndex(e){return wy(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#i("GetOptionalContentConfig").then(t=>new C8(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new S8(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Fc.cleanup()}}cachedPageNumber(e){if(!wy(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(t)??null}}class X8{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class Ro{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:n,commonObjs:i,annotationCanvasMap:a,operatorList:l,pageIndex:c,canvasFactory:d,filterFactory:h,useRequestAnimationFrame:f=!1,pdfBug:m=!1,pageColors:y=null,enableHWA:x=!1,operationsFilter:A=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=c,this.canvasFactory=d,this.filterFactory=h,this._pdfBug=m,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new X8(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=x,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=A}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(Ro.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Ro.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:a,dependencyTracker:l}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Po(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:i,viewport:n,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),Ro.#t.delete(this._canvas),e||=new sf(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Ro.#t.delete(this._canvas),this.callback())))}}const nb="5.4.296",_M="f56dc8601";class Yn{#e=null;#t=null;#s;#n=null;#a=!1;#i=!1;#r=null;#o;#c=null;#l=null;static#h=null;static get _keyboardManager(){return $e(this,"_keyboardManager",new su([[["Escape","mac+Escape"],Yn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Yn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Yn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Yn.prototype._moveToPrevious],[["Home","mac+Home"],Yn.prototype._moveToBeginning],[["End","mac+End"],Yn.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#i=!1,this.#r=e):this.#i=!0,this.#l=e?._uiManager||t,this.#o=this.#l._eventBus,this.#s=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Yn.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#r&&(e.ariaControls=`${this.#r.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#p.bind(this),{signal:t}),e.addEventListener("keydown",this.#g.bind(this),{signal:t});const n=this.#t=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#s,e.append(n),e}renderMainDropdown(){const e=this.#n=this.#d();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#d(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",Zn,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#r&&(e.id=`${this.#r.id}_colorpicker_dropdown`);for(const[n,i]of this.#l.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=n,a.setAttribute("data-l10n-id",Yn.#h[n]);const l=document.createElement("span");a.append(l),l.className="swatch",l.style.backgroundColor=i,a.ariaSelected=i===this.#s,a.addEventListener("click",this.#f.bind(this,i),{signal:t}),e.append(a)}return e.addEventListener("keydown",this.#g.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Qe.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#p(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#m){this.#p(e);return}if(e.target===this.#e){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#e){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#p(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#m){this.#p(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#m){this.#p(e);return}this.#n.lastChild?.focus()}#g(e){Yn._keyboardManager.exec(this,e)}#p(e){if(this.#m){this.hideDropdown();return}if(this.#a=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#d();this.#e.append(t)}#u(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#m(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#m){this.#r?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#l.highlightColors.values();for(const n of this.#n.children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class Bc{#e=null;#t=null;#s=null;static#n=null;constructor(e){this.#t=e,this.#s=e._uiManager,Bc.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,colorValue:n}=this.#t,i=this.#e=document.createElement("input");return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",Bc.#n[e]),i.addEventListener("input",()=>{this.#s.updateParams(t,i.value)},{signal:this.#s._signal}),i}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function hC(s){return Math.floor(Math.max(0,Math.min(1,s))*255).toString(16).padStart(2,"0")}function ic(s){return Math.max(0,Math.min(255,255*s))}class fC{static CMYK_G([e,t,n,i]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=ic(e),[e,e,e]}static G_HTML([e]){const t=hC(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(ic)}static RGB_HTML(e){return`#${e.map(hC).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,n+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,n,i]){return[ic(1-Math.min(1,e+i)),ic(1-Math.min(1,n+i)),ic(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const i=1-e,a=1-t,l=1-n,c=Math.min(i,a,l);return["CMYK",i,a,l,c]}}class Y8{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){pt("Abstract method `_createSVG` called.")}}class zc extends Y8{_createSVG(e){return document.createElementNS(Si,e)}}const W8=9,va=new WeakSet,K8=new Date().getTimezoneOffset()*60*1e3;class pC{static create(e){switch(e.data.annotationType){case jt.LINK:return new sb(e);case jt.TEXT:return new Z8(e);case jt.WIDGET:switch(e.data.fieldType){case"Tx":return new J8(e);case"Btn":return e.data.radioButton?new TM(e):e.data.checkBox?new tG(e):new nG(e);case"Ch":return new sG(e);case"Sig":return new eG(e)}return new Ea(e);case jt.POPUP:return new Cy(e);case jt.FREETEXT:return new RM(e);case jt.LINE:return new rG(e);case jt.SQUARE:return new aG(e);case jt.CIRCLE:return new oG(e);case jt.POLYLINE:return new NM(e);case jt.CARET:return new cG(e);case jt.INK:return new ib(e);case jt.POLYGON:return new lG(e);case jt.HIGHLIGHT:return new MM(e);case jt.UNDERLINE:return new uG(e);case jt.SQUIGGLY:return new dG(e);case jt.STRIKEOUT:return new hG(e);case jt.STAMP:return new DM(e);case jt.FILEATTACHMENT:return new fG(e);default:return new Tt(e)}}}class Tt{#e=null;#t=!1;#s=null;constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Tt._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:i}=this.data;let a=-1/0,l=-1/0;if(t?.length>=8){for(let c=0;c<t.length;c+=8)t[c+1]>l?(l=t[c+1],a=t[c+2]):t[c+1]===l&&(a=Math.max(a,t[c+2]));return[a,l]}if(n?.length>=1){for(const c of n)for(let d=0,h=c.length;d<h;d+=2)c[d+1]>l?(l=c[d+1],a=c[d]):c[d+1]===l&&(a=Math.max(a,c[d]));if(a!==1/0)return[a,l]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:a,pageY:l}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-a)/n,e[1]=100*(e[1]-l)/i,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${Pc}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${Pc}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#s?.popup||this.popup)?.remove(),this.#s=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:n}=e;t&&this.#n(t);let i=this.#s?.popup||this.popup;!i&&n?.text&&(this._createPopup(n),i=this.#s.popup),i&&(i.updateEdited(e),n?.deleted&&(i.remove(),this.#s=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#s?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:l,pageX:c,pageY:d}}}}=this;n?.splice(0,4,...e),t.left=`${100*(e[0]-c)/a}%`,t.top=`${100*(l-e[3]+d)/l}%`,i===0?(t.width=`${100*(e[2]-e[0])/a}%`,t.height=`${100*(e[3]-e[1])/l}%`):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),!(this instanceof Ea)&&!(this instanceof sb)&&(a.tabIndex=0);const{style:l}=a;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof Cy){const{rotation:S}=t;return!t.hasOwnCanvas&&S!==0&&this.setRotation(S,a),a}const{width:c,height:d}=this;if(!e&&t.borderStyle.width>0){l.borderWidth=`${t.borderStyle.width}px`;const S=t.borderStyle.horizontalCornerRadius,C=t.borderStyle.verticalCornerRadius;if(S>0||C>0){const _=`calc(${S}px * var(--total-scale-factor)) / calc(${C}px * var(--total-scale-factor))`;l.borderRadius=_}else if(this instanceof TM){const _=`calc(${c}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=_}switch(t.borderStyle.style){case xo.SOLID:l.borderStyle="solid";break;case xo.DASHED:l.borderStyle="dashed";break;case xo.BEVELED:Be("Unimplemented border style: beveled");break;case xo.INSET:Be("Unimplemented border style: inset");break;case xo.UNDERLINE:l.borderBottomStyle="solid";break}const E=t.borderColor||null;E?(this.#t=!0,l.borderColor=xe.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):l.borderWidth=0}const h=xe.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:f,pageHeight:m,pageX:y,pageY:x}=i.rawDims;l.left=`${100*(h[0]-y)/f}%`,l.top=`${100*(h[1]-x)/m}%`;const{rotation:A}=t;return t.hasOwnCanvas||A===0?(l.width=`${100*c/f}%`,l.height=`${100*d/m}%`):this.setRotation(A,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:l}=this;e%180!==0&&([a,l]=[l,a]),t.style.width=`${100*a/n}%`,t.style.height=`${100*l/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,i)=>{const a=i.detail[t],l=a[0],c=a.slice(1);i.target.style[n]=fC[`${l}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:fC[`${l}_rgb`](c)})};return $e(this,"_commonActions",{display:t=>{const{display:n}=t.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||n[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[i,a]of Object.entries(t)){const l=n[i];if(l){const c={detail:{[i]:a},target:e};l(c),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,i,a]=this.data.rect.map(S=>Math.fround(S));if(e.length===8){const[S,C,E,_]=e.subarray(2,6);if(i===S&&a===C&&t===E&&n===_)return}const{style:l}=this.container;let c;if(this.#t){const{borderColor:S,borderWidth:C}=l;l.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const d=i-t,h=a-n,{svgFactory:f}=this,m=f.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const y=f.createElement("defs");m.append(y);const x=f.createElement("clipPath"),A=`clippath_${this.data.id}`;x.setAttribute("id",A),x.setAttribute("clipPathUnits","objectBoundingBox"),y.append(x);for(let S=2,C=e.length;S<C;S+=8){const E=e[S],_=e[S+1],R=e[S+2],N=e[S+3],M=f.createElement("rect"),j=(R-t)/d,D=(a-_)/h,O=(E-R)/d,I=(_-N)/h;M.setAttribute("x",j),M.setAttribute("y",D),M.setAttribute("width",O),M.setAttribute("height",I),x.append(M),c?.push(`<rect vector-effect="non-scaling-stroke" x="${j}" y="${D}" width="${O}" height="${I}"/>`)}this.#t&&(c.push("</g></svg>')"),l.backgroundImage=c.join("")),this.container.append(m),this.container.style.clipPath=`url(#${A})`}_createPopup(e=null){const{data:t}=this;let n,i;e?(n={str:e.text},i=e.date):(n=t.contentsObj,i=t.modificationDate);const a=this.#s=new Cy({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(a.render())}get hasPopupElement(){return!!(this.#s||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#s}render(){pt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:l,exportValues:c}of i){if(a===-1||l===t)continue;const d=typeof c=="string"?c:null,h=document.querySelector(`[data-element-id="${l}"]`);if(h&&!va.has(h)){Be(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:d,domElement:h})}return n}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,l=i.getAttribute("data-element-id");l!==t&&va.has(i)&&n.push({id:l,exportValue:a,domElement:i})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class Q8 extends Tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class sb extends Tt{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(n,e.action,e.overlaidText),i=!0):e.attachment?(this.#t(n,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(this.#s(n,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(n,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),i=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,n=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),n&&(e.title=n)}_bindNamedAction(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),n&&(e.title=n),this.#e()}#t(e,t,n="",i=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:n&&(e.title=n),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#e()}#s(e,t,n=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),n&&(e.title=n),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const a=n.get(i);a&&(e[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Be('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{n?.();const{fields:i,refs:a,include:l}=t,c=[];if(i.length!==0||a.length!==0){const f=new Set(a);for(const m of i){const y=this._fieldObjects[m]||[];for(const{id:x}of y)f.add(x)}for(const m of Object.values(this._fieldObjects))for(const y of m)f.has(y.id)===l&&c.push(y)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const d=this.annotationStorage,h=[];for(const f of c){const{id:m}=f;switch(h.push(m),f.type){case"text":{const x=f.defaultValue||"";d.setValue(m,{value:x});break}case"checkbox":case"radiobutton":{const x=f.defaultValue===f.exportValues;d.setValue(m,{value:x});break}case"combobox":case"listbox":{const x=f.defaultValue||"";d.setValue(m,{value:x});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!va.has(y)){Be(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}}class Z8 extends Tt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Ea extends Tt{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Qt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,i,a){n.includes("mouse")?e.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):e.addEventListener(n,l=>{if(n==="blur"){if(!t.focused||!l.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(l)}})})}_setEventListeners(e,t,n,i){for(const[a,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,a,l,i),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":xe.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||W8,a=e.style;let l;const c=2,d=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c),f=Math.round(h/(gg*i))||1,m=h/f;l=Math.min(i,d(m/gg))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-c);l=Math.min(i,d(h/gg))}a.fontSize=`calc(${l}px * var(--total-scale-factor))`,a.color=xe.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class J8 extends Ea{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,i){const a=this.annotationStorage;for(const l of this._getElementsByName(e.name,e.id))l.domElement&&(l.domElement[t]=n),a.setValue(l.id,{[i]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let a=i.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=i.formattedValue||this.data.textContent?.join(`
`)||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=c??a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",c??a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),va.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:m}=this.data,y=!!f&&this.enableScripting;h&&(n.title=h),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",A=>{e.setValue(t,{value:A.target.value}),this.setPropertyOnSiblings(n,"value",A.target.value,"value"),d.formattedValue=null}),n.addEventListener("resetform",A=>{const S=this.data.defaultFieldValue??"";n.value=d.userValue=S,d.formattedValue=null});let x=A=>{const{formattedValue:S}=d;S!=null&&(A.target.value=S),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",S=>{if(d.focused)return;const{target:C}=S;if(y&&(C.type=f,m&&(C.step=m)),d.userValue){const E=d.userValue;if(y)if(f==="time"){const _=new Date(E),R=[_.getHours(),_.getMinutes(),_.getSeconds()];C.value=R.map(N=>N.toString().padStart(2,"0")).join(":")}else C.value=new Date(E-K8).toISOString().split(f==="date"?"T":".",1)[0];else C.value=E}d.lastCommittedValue=C.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),n.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const C={value(E){d.userValue=E.detail.value??"",y||e.setValue(t,{value:d.userValue.toString()}),E.target.value=d.userValue},formattedValue(E){const{formattedValue:_}=E.detail;d.formattedValue=_,_!=null&&E.target!==document.activeElement&&(E.target.value=_);const R={formattedValue:_};y&&(R.value=_),e.setValue(t,R)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:_}=E.detail,{target:R}=E;if(_===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",_);let N=d.userValue;!N||N.length<=_||(N=N.slice(0,_),R.value=d.userValue=N,e.setValue(t,{value:N}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(C,S)}),n.addEventListener("keydown",S=>{d.commitKey=1;let C=-1;if(S.key==="Escape"?C=0:S.key==="Enter"&&!this.data.multiLine?C=2:S.key==="Tab"&&(d.commitKey=3),C===-1)return;const{value:E}=S.target;d.lastCommittedValue!==E&&(d.lastCommittedValue=E,d.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:C,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const A=x;x=null,n.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:C}=S;let{value:E}=C;if(y){if(E&&f==="time"){const _=E.split(":").map(R=>parseInt(R,10));E=new Date(2e3,0,1,_[0],_[1],_[2]||0).valueOf(),C.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();C.type="text"}d.userValue=E,d.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),A(S)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:C,target:E}=S,{value:_,selectionStart:R,selectionEnd:N}=E;let M=R,j=N;switch(S.inputType){case"deleteWordBackward":{const D=_.substring(0,R).match(/\w*[^\w]*$/);D&&(M-=D[0].length);break}case"deleteWordForward":{const D=_.substring(R).match(/^[^\w]*\w*/);D&&(j+=D[0].length);break}case"deleteContentBackward":R===N&&(M-=1);break;case"deleteContentForward":R===N&&(j+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,change:C||"",willCommit:!1,selStart:M,selEnd:j}})}),this._setEventListeners(n,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(x&&n.addEventListener("blur",x),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class eG extends Ea{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class tG extends Ea{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return va.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=0,a.addEventListener("change",l=>{const{name:c,checked:d}=l.target;for(const h of this._getElementsByName(c,n)){const f=d&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}e.setValue(n,{value:d})}),a.addEventListener("resetform",l=>{const c=t.defaultFieldValue||"Off";l.target.checked=c===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",l=>{const c={value(d){d.target.checked=d.detail.value!=="Off",e.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class TM extends Ea{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let i=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(n,{value:i})),i)for(const l of this._getElementsByName(t.fieldName,n))e.setValue(l.id,{value:!1});const a=document.createElement("input");if(va.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",l=>{const{name:c,checked:d}=l.target;for(const h of this._getElementsByName(c,n))e.setValue(h.id,{value:!1});e.setValue(n,{value:d})}),a.addEventListener("resetform",l=>{const c=t.defaultFieldValue;l.target.checked=c!=null&&c===t.buttonValue}),this.enableScripting&&this.hasJSActions){const l=t.buttonValue;a.addEventListener("updatefromsandbox",c=>{const d={value:h=>{const f=l===h.detail.value;for(const m of this._getElementsByName(h.target.name)){const y=f&&m.id===n;m.domElement&&(m.domElement.checked=y),e.setValue(m.id,{value:y})}}};this._dispatchEventFromSandbox(d,c)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class nG extends sb{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class sG extends Ea{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");va.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",f=>{const m=this.data.defaultFieldValue;for(const y of i.options)y.selected=y.value===m});for(const f of this.data.options){const m=document.createElement("option");m.textContent=f.displayValue,m.value=f.exportValue,n.value.includes(f.exportValue)&&(m.setAttribute("selected",!0),a=!1),i.append(m)}let l=null;if(a){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),i.prepend(f),l=()=>{f.remove(),i.removeEventListener("input",l),l=null},i.addEventListener("input",l)}const c=f=>{const m=f?"value":"textContent",{options:y,multiple:x}=i;return x?Array.prototype.filter.call(y,A=>A.selected).map(A=>A[m]):y.selectedIndex===-1?null:y[y.selectedIndex][m]};let d=c(!1);const h=f=>{const m=f.target.options;return Array.prototype.map.call(m,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",f=>{const m={value(y){l?.();const x=y.detail.value,A=new Set(Array.isArray(x)?x:[x]);for(const S of i.options)S.selected=A.has(S.value);e.setValue(t,{value:c(!0)}),d=c(!1)},multipleSelection(y){i.multiple=!0},remove(y){const x=i.options,A=y.detail.remove;x[A].selected=!1,i.remove(A),x.length>0&&Array.prototype.findIndex.call(x,C=>C.selected)===-1&&(x[0].selected=!0),e.setValue(t,{value:c(!0),items:h(y)}),d=c(!1)},clear(y){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),d=c(!1)},insert(y){const{index:x,displayValue:A,exportValue:S}=y.detail.insert,C=i.children[x],E=document.createElement("option");E.textContent=A,E.value=S,C?C.before(E):i.append(E),e.setValue(t,{value:c(!0),items:h(y)}),d=c(!1)},items(y){const{items:x}=y.detail;for(;i.length!==0;)i.remove(0);for(const A of x){const{displayValue:S,exportValue:C}=A,E=document.createElement("option");E.textContent=S,E.value=C,i.append(E)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:c(!0),items:h(y)}),d=c(!1)},indices(y){const x=new Set(y.detail.indices);for(const A of y.target.options)A.selected=x.has(A.index);e.setValue(t,{value:c(!0)}),d=c(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(m,f)}),i.addEventListener("input",f=>{const m=c(!0),y=c(!1);e.setValue(t,{value:m}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:d,change:y,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):i.addEventListener("input",function(f){e.setValue(t,{value:c(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Cy extends Tt{constructor(e){const{data:t,elements:n,parent:i}=e,a=!!i._commentManager;if(super(e,{isRenderable:!a&&Tt._hasPopupData(t)}),this.elements=n,a&&Tt._hasPopupData(t)){const l=this.popup=this.#e();for(const c of n)c.popup=l}else this.popup=null}#e(){return new iG({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),n=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",n.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(i=>`${$v}${i}`).join(",")),this.container}}class iG{#e=null;#t=this.#$.bind(this);#s=this.#B.bind(this);#n=this.#j.bind(this);#a=this.#w.bind(this);#i=null;#r=null;#o=null;#c=null;#l=null;#h=null;#d=null;#f=!1;#g=null;#p=null;#u=null;#m=null;#y=null;#b=null;#v=null;#E=null;#A=null;#x=null;#T=!1;#S=null;#C=null;constructor({container:e,color:t,elements:n,titleObj:i,modificationDate:a,contentsObj:l,richText:c,parent:d,rect:h,parentRect:f,open:m,commentManager:y=null}){this.#r=e,this.#A=i,this.#o=l,this.#E=c,this.#h=d,this.#i=t,this.#v=h,this.#d=f,this.#l=n,this.#e=y,this.#S=n[0],this.#c=Ch.toDateObject(a),this.trigger=n.flatMap(x=>x.getElementsToTriggerPopup()),y?this.renderCommentButton():(this.#M(),this.#r.hidden=!0,m&&this.#w())}#M(){if(this.#p)return;this.#p=new AbortController;const{signal:e}=this.#p;for(const t of this.trigger)t.addEventListener("click",this.#a,{signal:e}),t.addEventListener("pointerenter",this.#n,{signal:e}),t.addEventListener("pointerleave",this.#s,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#R(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#y=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#m||(this.#y||this.#R(),!this.#y))return;const{signal:e}=this.#p=new AbortController,t=!!this.#S.extraPopupElement,n=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},i=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},a=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#m=this.#S.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#t,{signal:e}),l.addEventListener("click",n,{signal:e}),l.addEventListener("pointerenter",i,{signal:e}),l.addEventListener("pointerleave",a,{signal:e}),l.classList.add("popupTriggerArea")}else{const l=this.#m=document.createElement("button");l.className="annotationCommentButton";const c=this.#S.container;l.style.zIndex=c.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#I(),this.#N(),l.addEventListener("keydown",this.#t,{signal:e}),l.addEventListener("click",n,{signal:e}),l.addEventListener("pointerenter",i,{signal:e}),l.addEventListener("pointerleave",a,{signal:e}),c.after(l)}}#N(){if(this.#S.extraPopupElement&&!this.#S.editor)return;this.renderCommentButton();const[e,t]=this.#y,{style:n}=this.#m;n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`}#I(){this.#S.extraPopupElement||(this.renderCommentButton(),this.#m.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#S.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#m?.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:i,modificationDate:a}=this.#S.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:i,modificationDate:a}}get elementBeforePopup(){return this.#m}get comment(){return this.#C||=this.#S.commentText,this.#C}set comment(e){e!==this.comment&&(this.#S.commentText=this.#C=e)}get parentBoundingClientRect(){return this.#S.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#m&&(this.#m.classList.toggle("selected",e),this.#m.ariaExpanded=t)}setSelectedCommentButton(e){this.#m.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:e,y:t,height:n}=this.#m.getBoundingClientRect(),{x:i,y:a,width:l,height:c}=this.#S.layer.getBoundingClientRect();return[(e-i)/l,(t+n-a)/c]}set commentPopupPosition(e){this.#b=e}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#m.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=this.#b||this.commentButtonPosition.map(h=>h/100),i=this.parentBoundingClientRect,{x:a,y:l,width:c,height:d}=i;this.#e.showDialog(null,this,a+t*c,l+n*d,{...e,parentDimensions:i})}render(){if(this.#g)return;const e=this.#g=document.createElement("div");if(e.className="popup",this.#i){const n=e.style.outlineColor=xe.makeHexColor(...this.#i);e.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#A?.str){const n=document.createElement("span");n.className="title",t.append(n),{dir:n.dir,str:n.textContent}=this.#A}if(e.append(t),this.#c){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),n.dateTime=this.#c.toISOString(),t.append(n)}qv({html:this.#k||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#r.append(e)}get#k(){const e=this.#E,t=this.#o;return e?.str&&(!t?.str||t.str===e.str)&&this.#E.html||null}get#O(){return this.#k?.attributes?.style?.fontSize||0}get#F(){return this.#k?.attributes?.style?.color||null}#P(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#F,fontSize:this.#O?`calc(${this.#O}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))t.push({name:"span",value:a,attributes:i});return n}#$(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:e,popup:t,deleted:n}){if(this.#e){n?(this.remove(),this.#C=null):t&&(t.deleted?this.remove():(this.#I(),this.#C=t.text)),e&&(this.#y=null,this.#R(),this.#N());return}if(n||t?.deleted){this.remove();return}this.#M(),this.#x||={contentsObj:this.#o,richText:this.#E},e&&(this.#u=null),t&&t.text&&(this.#E=this.#P(t.text),this.#c=Ch.toDateObject(t.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#x&&({contentsObj:this.#o,richText:this.#E}=this.#x,this.#x=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#g?.remove(),this.#g=null,this.#T=!1,this.#f=!1,this.#m?.remove(),this.#m=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#_(){if(this.#u!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:a}}}=this.#h;let l=!!this.#d,c=l?this.#d:this.#v;for(const A of this.#l)if(!c||xe.intersect(A.data.rect,c)!==null){c=A.data.rect,l=!0;break}const d=xe.normalizeRect([c[0],e[3]-c[1]+e[1],c[2],e[3]-c[3]+e[1]]),f=l?c[2]-c[0]+5:0,m=d[0]+f,y=d[1];this.#u=[100*(m-i)/t,100*(y-a)/n];const{style:x}=this.#r;x.left=`${this.#u[0]}%`,x.top=`${this.#u[1]}%`}#w(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#j(),this.#r.addEventListener("click",this.#a),this.#r.addEventListener("keydown",this.#t)):(this.#B(),this.#r.removeEventListener("click",this.#a),this.#r.removeEventListener("keydown",this.#t))}#j(){this.#g||this.render(),this.isVisible?this.#f&&this.#r.classList.add("focused"):(this.#_(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#B(){this.#r.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#r.hidden=!0)}maybeShow(){this.#e||(this.#M(),this.#T&&(this.#g||this.#j(),this.#T=!1,this.#r.hidden=!1))}get isVisible(){return this.#e?!1:this.#r.hidden===!1}}class RM extends Tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Fe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class rG extends Tt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),a=this.#e=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class aG extends Tt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),a=e.borderStyle.width,l=this.#e=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",t-a),l.setAttribute("height",n-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class oG extends Tt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,i=this.svgFactory.create(t,n,!0),a=e.borderStyle.width,l=this.#e=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",t/2),l.setAttribute("cy",n/2),l.setAttribute("rx",t/2-a/2),l.setAttribute("ry",n/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class NM extends Tt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:i},width:a,height:l}=this;if(!t)return this.container;const c=this.svgFactory.create(a,l,!0);let d=[];for(let f=0,m=t.length;f<m;f+=2){const y=t[f]-e[0],x=e[3]-t[f+1];d.push(`${y},${x}`)}d=d.join(" ");const h=this.#e=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",d),h.setAttribute("stroke-width",n.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class lG extends NM{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class cG extends Tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ib extends Tt{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Fe.HIGHLIGHT:Fe.INK}#s(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:i,popupRef:a}}=this,{transform:l,width:c,height:d}=this.#s(t,e),h=this.svgFactory.create(c,d,!0),f=this.#e=this.svgFactory.createElement("svg:g");h.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",l);for(let m=0,y=n.length;m<y;m++){const x=this.svgFactory.createElement(this.svgElementName);this.#t.push(x),x.setAttribute("points",n[m].join(",")),f.append(x)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:i}=e,a=this.#e;if(t>=0&&a.setAttribute("stroke-width",t||1),n)for(let l=0,c=this.#t.length;l<c;l++)this.#t[l].setAttribute("points",n[l].join(","));if(i){const{transform:l,width:c,height:d}=this.#s(this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${c} ${d}`),a.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class MM extends Tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Fe.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class uG extends Tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class dG extends Tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class hG extends Tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class DM extends Tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Fe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class fG extends Tt{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||t.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#t.bind(this)),this.#e=n;const{isMac:i}=Qt.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let rb=class kM{#e=null;#t=null;#s=null;#n=new Map;#a=null;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:i,page:a,viewport:l,structTreeLayer:c,commentManager:d,linkService:h,annotationStorage:f}){this.div=e,this.#e=t,this.#t=n,this.#a=c||null,this.#i=h||null,this.#s=f||new Wv,this.page=a,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async#r(e,t,n){const i=e.firstChild||e,a=i.id=`${$v}${t}`,l=await this.#a?.getAriaAttributes(a);if(l)for(const[c,d]of l)i.setAttribute(c,d);n?n.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,i,!1))}async render(e){const{annotations:t}=e,n=this.div;Cr(n,this.viewport);const i=new Map,a={data:null,layer:n,linkService:this.#i,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new zc,annotationStorage:this.#s,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const c=l.annotationType===jt.POPUP;if(c){const f=i.get(l.id);if(!f)continue;a.elements=f}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;a.data=l;const d=pC.create(a);if(!d.isRenderable)continue;if(!c&&l.popupRef){const f=i.get(l.popupRef);f?f.push(d):i.set(l.popupRef,[d])}const h=d.render();l.hidden&&(h.style.visibility="hidden"),await this.#r(h,l.id,a.elements),d.extraPopupElement?.popup?.renderCommentButton(),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#o()}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#i,svgFactory:new zc,parent:this};for(const n of e){n.borderStyle||=kM._defaultBorderStyle,t.data=n;const i=pC.create(t);if(!i.isRenderable)continue;const a=i.render();await this.#r(a,n.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Cr(t,{rotation:e.rotation}),this.#o(),t.hidden=!1}#o(){if(!this.#t)return;const e=this.div;for(const[t,n]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):i.append(n);const l=this.#n.get(t);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,i.id,n),l._hasNoCanvas=!1):l.canvas=n)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:n,rotation:i}=e,a=new Q8({data:{id:n,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#i,annotationStorage:this.#s}),l=a.render();return t.append(l),this.#e?.moveElementInDOM(t,l,l,!1),a.createOrUpdatePopup(),a}static get _defaultBorderStyle(){return $e(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:xo.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const Hd=/\r\n?|\n/g;class Yt extends Me{#e="";#t=`${this.id}-editor`;#s=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Yt.prototype,t=a=>a.isEmpty(),n=ki.TRANSLATE_SMALL,i=ki.TRANSLATE_BIG;return $e(this,"_keyboardManager",new su([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=Fe.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||Yt._defaultColor||Me._defaultLineColor,this.#n=e.fontSize||Yt._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){Me.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Qe.FREETEXT_SIZE:Yt._defaultFontSize=t;break;case Qe.FREETEXT_COLOR:Yt._defaultColor=t;break}}updateParams(e,t){switch(e){case Qe.FREETEXT_SIZE:this.#a(t);break;case Qe.FREETEXT_COLOR:this.#i(t);break}}static get defaultPropertiesToUpdate(){return[[Qe.FREETEXT_SIZE,Yt._defaultFontSize],[Qe.FREETEXT_COLOR,Yt._defaultColor||Me._defaultLineColor]]}get propertiesToUpdate(){return[[Qe.FREETEXT_SIZE,this.#n],[Qe.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Bc(this),[["colorPicker",this._colorPicker]]}get colorType(){return Qe.FREETEXT_COLOR}#a(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#n)*this.parentScale),this.#n=i,this.#o()},n=this.#n;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Qe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#i(e){const t=i=>{this.color=i,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Qe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-Yt._internalPadding*e,-(Yt._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#s=new AbortController;const e=this._uiManager.combinedSignal(this.#s);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#s?.abort(),this.#s=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#r(){const e=[];this.editorDiv.normalize();let t=null;for(const n of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(e.push(Yt.#c(n)),t=n);return e.join(`
`)}#o(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,l=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),n=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#r().trimEnd();if(e===t)return;const n=i=>{if(this.#e=i,!i){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Yt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,d]=this.getInitialTranslation();[c,d]=this.pageTranslationToScreen(c,d);const[h,f]=this.pageDimensions,[m,y]=this.pageTranslation;let x,A;switch(this.rotation){case 0:x=e+(l[0]-m)/h,A=t+this.height-(l[1]-y)/f;break;case 90:x=e+(l[0]-m)/h,A=t-(l[1]-y)/f,[c,d]=[d,-c];break;case 180:x=e-this.width+(l[0]-m)/h,A=t-(l[1]-y)/f,[c,d]=[-c,-d];break;case 270:x=e+(l[0]-m-this.height*f)/h,A=t+(l[1]-y-this.width*h)/f,[c,d]=[-d,c];break}this.setAt(x*i,A*a,c,d)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Hd,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();const i=Yt.#d(t.getData("text")||"").replaceAll(Hd,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!i.includes(`
`)){l.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:d}=l,h=[],f=[];if(c.nodeType===Node.TEXT_NODE){const x=c.parentElement;if(f.push(c.nodeValue.slice(d).replaceAll(Hd,"")),x!==this.editorDiv){let A=h;for(const S of this.editorDiv.childNodes){if(S===x){A=f;continue}A.push(Yt.#c(S))}}h.push(c.nodeValue.slice(0,d).replaceAll(Hd,""))}else if(c===this.editorDiv){let x=h,A=0;for(const S of this.editorDiv.childNodes)A++===d&&(x=f),x.push(Yt.#c(S))}this.#e=`${h.join(`
`)}${i}${f.join(`
`)}`,this.#l();const m=new Range;let y=Math.sumPrecise(h.map(x=>x.length));for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const A=x.nodeValue.length;if(y<=A){m.setStart(x,y),m.setEnd(x,y);break}y-=A}a.removeAllRanges(),a.addRange(m)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll(""," ")}static#d(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Yt._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,n){let i=null;if(e instanceof RM){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:d,rotation:h,id:f,popupRef:m,richText:y,contentsObj:x,creationDate:A,modificationDate:S},textContent:C,textPosition:E,parent:{page:{pageNumber:_}}}=e;if(!C||C.length===0)return null;i=e={annotationType:Fe.FREETEXT,color:Array.from(c),fontSize:l,value:C.join(`
`),position:E,pageIndex:_-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:m,comment:x?.str||null,richText:y,creationDate:A,modificationDate:S}}const a=await super.deserialize(e,t,n);return a.#n=e.fontSize,a.color=xe.makeHexColor(...e.color),a.#e=Yt.#d(e.value),a._initialData=i,e.comment&&a.setCommentData(e),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=Me._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(e),{color:t,fontSize:this.#n,value:this.#h()});return this.addComment(n),e?(n.isCopy=!0,n):this.annotationElementId&&!this.#f(n)?null:(n.id=this.annotationElementId,n)}#f(e){const{value:t,fontSize:n,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((l,c)=>l!==i[c])||e.pageIndex!==a}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:n}=t;n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,t.replaceChildren();for(const i of this.#e.split(`
`)){const a=document.createElement("div");a.append(i?document.createTextNode(i):document.createElement("br")),t.append(a)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class be{static PRECISION=1e-4;toSVGPath(){pt("Abstract method `toSVGPath` must be implemented.")}get box(){pt("Abstract getter `box` must be implemented.")}serialize(e,t){pt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,i,a,l){l||=new Float32Array(e.length);for(let c=0,d=e.length;c<d;c+=2)l[c]=t+e[c]*i,l[c+1]=n+e[c+1]*a;return l}static _rescaleAndSwap(e,t,n,i,a,l){l||=new Float32Array(e.length);for(let c=0,d=e.length;c<d;c+=2)l[c]=t+e[c+1]*i,l[c+1]=n+e[c]*a;return l}static _translate(e,t,n,i){i||=new Float32Array(e.length);for(let a=0,l=e.length;a<l;a+=2)i[a]=t+e[a],i[a+1]=n+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,i,a){switch(a){case 90:return[1-t/n,e/i];case 180:return[1-e/n,1-t/i];case 270:return[t/n,1-e/i];default:return[e/n,t/i]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,i,a,l){return[(e+5*n)/6,(t+5*i)/6,(5*n+a)/6,(5*i+l)/6,(n+a)/2,(i+l)/2]}}class ra{#e;#t=[];#s;#n;#a=[];#i=new Float32Array(18);#r;#o;#c;#l;#h;#d;#f=[];static#g=8;static#p=2;static#u=ra.#g+ra.#p;constructor({x:e,y:t},n,i,a,l,c=0){this.#e=n,this.#d=a*i,this.#n=l,this.#i.set([NaN,NaN,NaN,NaN,e,t],6),this.#s=c,this.#l=ra.#g*i,this.#c=ra.#u*i,this.#h=i,this.#f.push(e,t)}isEmpty(){return isNaN(this.#i[8])}#m(){const e=this.#i.subarray(4,6),t=this.#i.subarray(16,18),[n,i,a,l]=this.#e;return[(this.#r+(e[0]-t[0])/2-n)/a,(this.#o+(e[1]-t[1])/2-i)/l,(this.#r+(t[0]-e[0])/2-n)/a,(this.#o+(t[1]-e[1])/2-i)/l]}add({x:e,y:t}){this.#r=e,this.#o=t;const[n,i,a,l]=this.#e;let[c,d,h,f]=this.#i.subarray(8,12);const m=e-h,y=t-f,x=Math.hypot(m,y);if(x<this.#c)return!1;const A=x-this.#l,S=A/x,C=S*m,E=S*y;let _=c,R=d;c=h,d=f,h+=C,f+=E,this.#f?.push(e,t);const N=-E/A,M=C/A,j=N*this.#d,D=M*this.#d;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([h+j,f+D],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([h-j,f-D],16),isNaN(this.#i[6])?(this.#a.length===0&&(this.#i.set([c+j,d+D],2),this.#a.push(NaN,NaN,NaN,NaN,(c+j-n)/a,(d+D-i)/l),this.#i.set([c-j,d-D],14),this.#t.push(NaN,NaN,NaN,NaN,(c-j-n)/a,(d-D-i)/l)),this.#i.set([_,R,c,d,h,f],6),!this.isEmpty()):(this.#i.set([_,R,c,d,h,f],6),Math.abs(Math.atan2(R-d,_-c)-Math.atan2(E,C))<Math.PI/2?([c,d,h,f]=this.#i.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((c+h)/2-n)/a,((d+f)/2-i)/l),[c,d,_,R]=this.#i.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((_+c)/2-n)/a,((R+d)/2-i)/l),!0):([_,R,c,d,h,f]=this.#i.subarray(0,6),this.#a.push(((_+5*c)/6-n)/a,((R+5*d)/6-i)/l,((5*c+h)/6-n)/a,((5*d+f)/6-i)/l,((c+h)/2-n)/a,((d+f)/2-i)/l),[h,f,c,d,_,R]=this.#i.subarray(12,18),this.#t.push(((_+5*c)/6-n)/a,((R+5*d)/6-i)/l,((5*c+h)/6-n)/a,((5*d+f)/6-i)/l,((c+h)/2-n)/a,((d+f)/2-i)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#a,t=this.#t;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#y();const n=[];n.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#v(n);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#b(n),n.join(" ")}#y(){const[e,t,n,i]=this.#e,[a,l,c,d]=this.#m();return`M${(this.#i[2]-e)/n} ${(this.#i[3]-t)/i} L${(this.#i[4]-e)/n} ${(this.#i[5]-t)/i} L${a} ${l} L${c} ${d} L${(this.#i[16]-e)/n} ${(this.#i[17]-t)/i} L${(this.#i[14]-e)/n} ${(this.#i[15]-t)/i} Z`}#b(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#v(e){const[t,n,i,a]=this.#e,l=this.#i.subarray(4,6),c=this.#i.subarray(16,18),[d,h,f,m]=this.#m();e.push(`L${(l[0]-t)/i} ${(l[1]-n)/a} L${d} ${h} L${f} ${m} L${(c[0]-t)/i} ${(c[1]-n)/a}`)}newFreeDrawOutline(e,t,n,i,a,l){return new jM(e,t,n,i,a,l)}getOutlines(){const e=this.#a,t=this.#t,n=this.#i,[i,a,l,c]=this.#e,d=new Float32Array((this.#f?.length??0)+2);for(let m=0,y=d.length-2;m<y;m+=2)d[m]=(this.#f[m]-i)/l,d[m+1]=(this.#f[m+1]-a)/c;if(d[d.length-2]=(this.#r-i)/l,d[d.length-1]=(this.#o-a)/c,isNaN(n[6])&&!this.isEmpty())return this.#E(d);const h=new Float32Array(this.#a.length+24+this.#t.length);let f=e.length;for(let m=0;m<f;m+=2){if(isNaN(e[m])){h[m]=h[m+1]=NaN;continue}h[m]=e[m],h[m+1]=e[m+1]}f=this.#x(h,f);for(let m=t.length-6;m>=6;m-=6)for(let y=0;y<6;y+=2){if(isNaN(t[m+y])){h[f]=h[f+1]=NaN,f+=2;continue}h[f]=t[m+y],h[f+1]=t[m+y+1],f+=2}return this.#A(h,f),this.newFreeDrawOutline(h,d,this.#e,this.#h,this.#s,this.#n)}#E(e){const t=this.#i,[n,i,a,l]=this.#e,[c,d,h,f]=this.#m(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(t[2]-n)/a,(t[3]-i)/l,NaN,NaN,NaN,NaN,(t[4]-n)/a,(t[5]-i)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(t[16]-n)/a,(t[17]-i)/l,NaN,NaN,NaN,NaN,(t[14]-n)/a,(t[15]-i)/l],0),this.newFreeDrawOutline(m,e,this.#e,this.#h,this.#s,this.#n)}#A(e,t){const n=this.#t;return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6}#x(e,t){const n=this.#i.subarray(4,6),i=this.#i.subarray(16,18),[a,l,c,d]=this.#e,[h,f,m,y]=this.#m();return e.set([NaN,NaN,NaN,NaN,(n[0]-a)/c,(n[1]-l)/d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,m,y,NaN,NaN,NaN,NaN,(i[0]-a)/c,(i[1]-l)/d],t),t+=24}}class jM extends be{#e;#t=new Float32Array(4);#s;#n;#a;#i;#r;constructor(e,t,n,i,a,l){super(),this.#r=e,this.#a=t,this.#e=n,this.#i=i,this.#s=a,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[c,d,h,f]=this.#t;for(let m=0,y=e.length;m<y;m+=2)e[m]=(e[m]-c)/h,e[m+1]=(e[m+1]-d)/f;for(let m=0,y=t.length;m<y;m+=2)t[m]=(t[m]-c)/h,t[m+1]=(t[m+1]-d)/f}toSVGPath(){const e=[`M${this.#r[4]} ${this.#r[5]}`];for(let t=6,n=this.#r.length;t<n;t+=6){if(isNaN(this.#r[t])){e.push(`L${this.#r[t+4]} ${this.#r[t+5]}`);continue}e.push(`C${this.#r[t]} ${this.#r[t+1]} ${this.#r[t+2]} ${this.#r[t+3]} ${this.#r[t+4]} ${this.#r[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,n,i],a){const l=n-e,c=i-t;let d,h;switch(a){case 0:d=be._rescale(this.#r,e,i,l,-c),h=be._rescale(this.#a,e,i,l,-c);break;case 90:d=be._rescaleAndSwap(this.#r,e,t,l,c),h=be._rescaleAndSwap(this.#a,e,t,l,c);break;case 180:d=be._rescale(this.#r,n,t,-l,c),h=be._rescale(this.#a,n,t,-l,c);break;case 270:d=be._rescaleAndSwap(this.#r,n,i,-l,-c),h=be._rescaleAndSwap(this.#a,n,i,-l,-c);break}return{outline:Array.from(d),points:[Array.from(h)]}}#o(e){const t=this.#r;let n=t[4],i=t[5];const a=[n,i,n,i];let l=n,c=i,d=n,h=i;const f=e?Math.max:Math.min,m=new Float32Array(4);for(let x=6,A=t.length;x<A;x+=6){const S=t[x+4],C=t[x+5];isNaN(t[x])?(xe.pointBoundingBox(S,C,a),c>C?(l=S,c=C):c===C&&(l=f(l,S)),h<C?(d=S,h=C):h===C&&(d=f(d,S))):(m[0]=m[1]=1/0,m[2]=m[3]=-1/0,xe.bezierBoundingBox(n,i,...t.slice(x,x+6),m),xe.rectBoundingBox(m[0],m[1],m[2],m[3],a),c>m[1]?(l=m[0],c=m[1]):c===m[1]&&(l=f(l,m[0])),h<m[3]?(d=m[2],h=m[3]):h===m[3]&&(d=f(d,m[2]))),n=S,i=C}const y=this.#t;y[0]=a[0]-this.#s,y[1]=a[1]-this.#s,y[2]=a[2]-a[0]+2*this.#s,y[3]=a[3]-a[1]+2*this.#s,this.firstPoint=[l,c],this.lastPoint=[d,h]}get box(){return this.#t}newOutliner(e,t,n,i,a,l=0){return new ra(e,t,n,i,a,l)}getNewOutline(e,t){const[n,i,a,l]=this.#t,[c,d,h,f]=this.#e,m=a*h,y=l*f,x=n*h+c,A=i*f+d,S=this.newOutliner({x:this.#a[0]*m+x,y:this.#a[1]*y+A},this.#e,this.#i,e,this.#n,t??this.#s);for(let C=2;C<this.#a.length;C+=2)S.add({x:this.#a[C]*m+x,y:this.#a[C+1]*y+A});return S.getOutlines()}}class Ey{#e;#t;#s;#n=[];#a=[];constructor(e,t=0,n=0,i=!0){const a=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:S,y:C,width:E,height:_}of e){const R=Math.floor((S-t)/l)*l,N=Math.ceil((S+E+t)/l)*l,M=Math.floor((C-t)/l)*l,j=Math.ceil((C+_+t)/l)*l,D=[R,M,j,!0],O=[N,M,j,!1];this.#n.push(D,O),xe.rectBoundingBox(R,M,N,j,a)}const c=a[2]-a[0]+2*n,d=a[3]-a[1]+2*n,h=a[0]-n,f=a[1]-n;let m=i?-1/0:1/0,y=1/0;const x=this.#n.at(i?-1:-2),A=[x[0],x[2]];for(const S of this.#n){const[C,E,_,R]=S;!R&&i?E<y?(y=E,m=C):E===y&&(m=Math.max(m,C)):R&&!i&&(E<y?(y=E,m=C):E===y&&(m=Math.min(m,C))),S[0]=(C-h)/c,S[1]=(E-f)/d,S[2]=(_-f)/d}this.#e=new Float32Array([h,f,c,d]),this.#t=[m,y],this.#s=A}getOutlines(){this.#n.sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#l(t)),this.#o(t)):(this.#c(t),e.push(...this.#l(t)));return this.#i(e)}#i(e){const t=[],n=new Set;for(const l of e){const[c,d,h]=l;t.push([c,d,l],[c,h,l])}t.sort((l,c)=>l[1]-c[1]||l[0]-c[0]);for(let l=0,c=t.length;l<c;l+=2){const d=t[l][2],h=t[l+1][2];d.push(h),h.push(d),n.add(d),n.add(h)}const i=[];let a;for(;n.size>0;){const l=n.values().next().value;let[c,d,h,f,m]=l;n.delete(l);let y=c,x=d;for(a=[c,h],i.push(a);;){let A;if(n.has(f))A=f;else if(n.has(m))A=m;else break;n.delete(A),[c,d,h,f,m]=A,y!==c&&(a.push(y,x,c,x===d?d:h),y=c),x=x===d?h:d}a.push(y,x)}return new pG(i,this.#e,this.#t,this.#s)}#r(e){const t=this.#a;let n=0,i=t.length-1;for(;n<=i;){const a=n+i>>1,l=t[a][0];if(l===e)return a;l<e?n=a+1:i=a-1}return i+1}#o([,e,t]){const n=this.#r(e);this.#a.splice(n,0,[e,t])}#c([,e,t]){const n=this.#r(e);for(let i=n;i<this.#a.length;i++){const[a,l]=this.#a[i];if(a!==e)break;if(a===e&&l===t){this.#a.splice(i,1);return}}for(let i=n-1;i>=0;i--){const[a,l]=this.#a[i];if(a!==e)break;if(a===e&&l===t){this.#a.splice(i,1);return}}}#l(e){const[t,n,i]=e,a=[[t,n,i]],l=this.#r(i);for(let c=0;c<l;c++){const[d,h]=this.#a[c];for(let f=0,m=a.length;f<m;f++){const[,y,x]=a[f];if(!(h<=y||x<=d)){if(y>=d){if(x>h)a[f][1]=h;else{if(m===1)return[];a.splice(f,1),f--,m--}continue}a[f][2]=d,x>h&&a.push([t,h,x])}}}return a}}class pG extends be{#e;#t;constructor(e,t,n,i){super(),this.#t=e,this.#e=t,this.firstPoint=n,this.lastPoint=i}toSVGPath(){const e=[];for(const t of this.#t){let[n,i]=t;e.push(`M${n} ${i}`);for(let a=2;a<t.length;a+=2){const l=t[a],c=t[a+1];l===n?(e.push(`V${c}`),i=c):c===i&&(e.push(`H${l}`),n=l)}e.push("Z")}return e.join(" ")}serialize([e,t,n,i],a){const l=[],c=n-e,d=i-t;for(const h of this.#t){const f=new Array(h.length);for(let m=0;m<h.length;m+=2)f[m]=e+h[m]*c,f[m+1]=i-h[m+1]*d;l.push(f)}return l}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class _y extends ra{newFreeDrawOutline(e,t,n,i,a,l){return new mG(e,t,n,i,a,l)}}class mG extends jM{newOutliner(e,t,n,i,a,l=0){return new _y(e,t,n,i,a,l)}}class Ot extends Me{#e=null;#t=0;#s;#n=null;#a=null;#i=null;#r=null;#o=0;#c=null;#l=null;#h=null;#d=!1;#f=null;#g=null;#p=null;#u="";#m;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Fe.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Ot.prototype;return $e(this,"_keyboardManager",new su([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Ot._defaultColor,this.#m=e.thickness||Ot._defaultThickness,this.opacity=e.opacity||Ot._defaultOpacity,this.#s=e.boxes||null,this.#y=e.methodOfCreation||"",this.#u=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#v(e),this.#S()):this.#s&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#r=e.focusNode,this.#o=e.focusOffset,this.#b(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#b(){const e=new Ey(this.#s,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new Ey(this.#s,.0025,.001,this._uiManager.direction==="ltr");this.#i=t.getOutlines();const{firstPoint:n}=this.#l;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height];const{lastPoint:i}=this.#i;this.#g=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#v({highlightOutlines:e,highlightId:t,clipPathId:n}){this.#l=e;const i=1.5;if(this.#i=e.getNewOutline(this.#m/2+i,.0025),t>=0)this.#h=t,this.#n=n,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:Ot.#C(this.#l.box,(m-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:Ot.#C(this.#i.box,m),path:{d:this.#i.toSVGPath()}})}const[a,l,c,d]=e.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=c,this.height=d;break;case 90:{const[m,y]=this.parentDimensions;this.x=l,this.y=1-a,this.width=c*y/m,this.height=d*m/y;break}case 180:this.x=1-a,this.y=1-l,this.width=c,this.height=d;break;case 270:{const[m,y]=this.parentDimensions;this.x=1-l,this.y=a,this.width=c*y/m,this.height=d*m/y;break}}const{firstPoint:h}=e;this.#f=[(h[0]-a)/c,(h[1]-l)/d];const{lastPoint:f}=this.#i;this.#g=[(f[0]-a)/c,(f[1]-l)/d]}static initialize(e,t){Me.initialize(e,t),Ot._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case Qe.HIGHLIGHT_COLOR:Ot._defaultColor=t;break;case Qe.HIGHLIGHT_THICKNESS:Ot._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case Qe.HIGHLIGHT_COLOR:this.#E(t);break;case Qe.HIGHLIGHT_THICKNESS:this.#A(t);break}}static get defaultPropertiesToUpdate(){return[[Qe.HIGHLIGHT_COLOR,Ot._defaultColor],[Qe.HIGHLIGHT_THICKNESS,Ot._defaultThickness]]}get propertiesToUpdate(){return[[Qe.HIGHLIGHT_COLOR,this.color||Ot._defaultColor],[Qe.HIGHLIGHT_THICKNESS,this.#m||Ot._defaultThickness],[Qe.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#E(e){const t=(a,l)=>{this.color=a,this.opacity=l,this.onUpdatedColor()},n=this.color,i=this.opacity;this.addCommands({cmd:t.bind(this,e,Ot._defaultOpacity),undo:t.bind(this,n,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Qe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#A(e){const t=this.#m,n=i=>{this.#m=i,this.#x(i)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Qe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new Yn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#N())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#N())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#T():e&&(this.#S(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#x(e){this.#d&&(this.#v({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#T(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#S(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#n))}static#C([e,t,n,i],a){switch(a){case 90:return[1-t-i,e,i,n];case 180:return[1-e-n,1-t-i,n,i];case 270:return[t,1-e-n,i,n]}return[e,t,n,i]}rotate(e){const{drawLayer:t}=this.parent;let n;this.#d?(e=(e-this.rotation+360)%360,n=Ot.#C(this.#l.box,e)):n=Ot.#C([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(this.#p,{bbox:Ot.#C(this.#i.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#u&&(e.setAttribute("aria-label",this.#u),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#M.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n,this.setDims(this.width,this.height),lM(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#M(e){Ot._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#r,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#d||this.#R(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!e}}))}#N(){return this.#d?this.rotation:0}#I(){if(this.#d)return null;const[e,t]=this.pageDimensions,[n,i]=this.pageTranslation,a=this.#s,l=new Float32Array(a.length*8);let c=0;for(const{x:d,y:h,width:f,height:m}of a){const y=d*e+n,x=(1-h)*t+i;l[c]=l[c+4]=y,l[c+1]=l[c+3]=x,l[c+2]=l[c+6]=y+f*e,l[c+5]=l[c+7]=x-m*t,c+=8}return l}#k(e){return this.#l.serialize(e,this.#N())}static startHighlighting(e,t,{target:n,x:i,y:a}){const{x:l,y:c,width:d,height:h}=n.getBoundingClientRect(),f=new AbortController,m=e.combinedSignal(f),y=x=>{f.abort(),this.#F(e,x)};window.addEventListener("blur",y,{signal:m}),window.addEventListener("pointerup",y,{signal:m}),window.addEventListener("pointerdown",Ct,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Zn,{signal:m}),n.addEventListener("pointermove",this.#O.bind(this,e),{signal:m}),this._freeHighlight=new _y({x:i,y:a},[l,c,d,h],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#O(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,n){let i=null;if(e instanceof MM){const{data:{quadPoints:A,rect:S,rotation:C,id:E,color:_,opacity:R,popupRef:N,richText:M,contentsObj:j,creationDate:D,modificationDate:O},parent:{page:{pageNumber:I}}}=e;i=e={annotationType:Fe.HIGHLIGHT,color:Array.from(_),opacity:R,quadPoints:A,boxes:null,pageIndex:I-1,rect:S.slice(0),rotation:C,annotationElementId:E,id:E,deleted:!1,popupRef:N,richText:M,comment:j?.str||null,creationDate:D,modificationDate:O}}else if(e instanceof ib){const{data:{inkLists:A,rect:S,rotation:C,id:E,color:_,borderStyle:{rawWidth:R},popupRef:N,richText:M,contentsObj:j,creationDate:D,modificationDate:O},parent:{page:{pageNumber:I}}}=e;i=e={annotationType:Fe.HIGHLIGHT,color:Array.from(_),thickness:R,inkLists:A,boxes:null,pageIndex:I-1,rect:S.slice(0),rotation:C,annotationElementId:E,id:E,deleted:!1,popupRef:N,richText:M,comment:j?.str||null,creationDate:D,modificationDate:O}}const{color:a,quadPoints:l,inkLists:c,opacity:d}=e,h=await super.deserialize(e,t,n);h.color=xe.makeHexColor(...a),h.opacity=d||1,c&&(h.#m=e.thickness),h._initialData=i,e.comment&&h.setCommentData(e);const[f,m]=h.pageDimensions,[y,x]=h.pageTranslation;if(l){const A=h.#s=[];for(let S=0;S<l.length;S+=8)A.push({x:(l[S]-y)/f,y:1-(l[S+1]-x)/m,width:(l[S+2]-l[S])/f,height:(l[S+1]-l[S+5])/m});h.#b(),h.#S(),h.rotate(h.rotation)}else if(c){h.#d=!0;const A=c[0],S={x:A[0]-y,y:m-(A[1]-x)},C=new _y(S,[0,0,f,m],1,h.#m/2,!0,.001);for(let R=0,N=A.length;R<N;R+=2)S.x=A[R]-y,S.y=m-(A[R+1]-x),C.add(S);const{id:E,clipPathId:_}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);h.#v({highlightOutlines:C.getOutlines(),highlightId:E,clipPathId:_}),h.#S(),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=Me._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(e);return Object.assign(n,{color:t,opacity:this.opacity,thickness:this.#m,quadPoints:this.#I(),outlines:this.#k(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#P(n)?null:(n.id=this.annotationElementId,n)}#P(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((n,i)=>n!==t[i])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class OM{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){pt("Not implemented")}}class je extends Me{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#s=null;static#n=null;static#a=null;static#i=NaN;static#r=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#l(e),this.#f())}#l({drawOutlines:e,drawId:t,drawingOptions:n}){this.#e=e,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#u(e.box)}#h(e,t){const{id:n}=t.drawLayer.draw(je._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[i,a]of Object.entries(t))n.has(i)?Object.assign(e[i],a):e[i]=a;return e}static getDefaultDrawingOptions(e){pt("Not implemented")}static get typesMap(){pt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(je.#s.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,i]of this.typesMap)e.push([n,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,i]of this.constructor.typesMap)e.push([n,t[i]]);return e}_updateProperty(e,t,n){const i=this._drawingOptions,a=i[t],l=c=>{i.updateProperty(t,c);const d=this.#e.updateProperty(t,c);d&&this.#u(d),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,je._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,je._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,je._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#d()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#g([e,t,n,i]){const{parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[t,1-e,n*(l/a),i*(a/l)];case 180:return[1-e,1-t,n,i];case 270:return[1-t,e,n*(l/a),i*(a/l)];default:return[e,t,n,i]}}#p(){const{x:e,y:t,width:n,height:i,parentDimensions:[a,l],rotation:c}=this;switch(c){case 90:return[1-t,e,n*(a/l),i*(l/a)];case 180:return[1-e,1-t,n,i];case 270:return[t,1-e,n*(a/l),i*(l/a)];default:return[e,t,n,i]}}#u(e){[this.x,this.y,this.width,this.height]=this.#g(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#m(){const{x:e,y:t,width:n,height:i,rotation:a,parentRotation:l,parentDimensions:[c,d]}=this;switch((a*4+l)/90){case 1:return[1-t-i,e,i,n];case 2:return[1-e-n,1-t-i,n,i];case 3:return[t,1-e-n,i,n];case 4:return[e,t-n*(c/d),i*(d/c),n*(c/d)];case 5:return[1-t,e,n*(c/d),i*(d/c)];case 6:return[1-e-i*(d/c),1-t,i*(d/c),n*(c/d)];case 7:return[t-n*(c/d),1-e-i*(d/c),n*(c/d),i*(d/c)];case 8:return[e-n,t-i,n,i];case 9:return[1-t,e-n,i,n];case 10:return[1-e,1-t,n,i];case 11:return[t-i,1-e,i,n];case 12:return[e-i*(d/c),t,i*(d/c),n*(c/d)];case 13:return[1-t-n*(c/d),e-i*(d/c),n*(c/d),i*(d/c)];case 14:return[1-e,1-t-n*(c/d),i*(d/c),n*(c/d)];case 15:return[t,1-e,n*(c/d),i*(d/c)];default:return[e,t,n,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,je._mergeSVGProperties({bbox:this.#m()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const i=document.createElement("div");return n.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,i,a){pt("Not implemented")}static startDrawing(e,t,n,i){const{target:a,offsetX:l,offsetY:c,pointerId:d,pointerType:h}=i;if(je.#r&&je.#r!==h)return;const{viewport:{rotation:f}}=e,{width:m,height:y}=a.getBoundingClientRect(),x=je.#n=new AbortController,A=e.combinedSignal(x);if(je.#i||=d,je.#r??=h,window.addEventListener("pointerup",S=>{je.#i===S.pointerId?this._endDraw(S):je.#o?.delete(S.pointerId)},{signal:A}),window.addEventListener("pointercancel",S=>{je.#i===S.pointerId?this._currentParent.endDrawingSession():je.#o?.delete(S.pointerId)},{signal:A}),window.addEventListener("pointerdown",S=>{je.#r===S.pointerType&&((je.#o||=new Set).add(S.pointerId),je.#s.isCancellable()&&(je.#s.removeLastElement(),je.#s.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",Zn,{signal:A}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),a.addEventListener("touchmove",S=>{S.timeStamp===je.#c&&Ct(S)},{signal:A}),e.toggleDrawing(),t._editorUndoBar?.hide(),je.#s){e.drawLayer.updateProperties(this._currentDrawId,je.#s.startNew(l,c,m,y,f));return}t.updateUIForDefaultProperties(this),je.#s=this.createDrawerInstance(l,c,m,y,f),je.#a=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(je.#a.toSVGProperties(),je.#s.defaultSVGProperties),!0,!1)}static _drawMove(e){if(je.#c=-1,!je.#s)return;const{offsetX:t,offsetY:n,pointerId:i}=e;if(je.#i===i){if(je.#o?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,je.#s.add(t,n)),je.#c=e.timeStamp,Ct(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,je.#s=null,je.#a=null,je.#r=null,je.#c=NaN),je.#n&&(je.#n.abort(),je.#n=null,je.#i=NaN,je.#o=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,je.#s.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const n=je.#s,i=this._currentDrawId,a=n.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(i,n.setLastElement(a))},undo:()=>{t.drawLayer.updateProperties(i,n.removeLastElement())},mustExec:!1,type:Qe.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(Qe.DRAW_STEP),!je.#s.isEmpty()){const{pageDimensions:[n,i],scale:a}=t,l=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:je.#s.getOutlines(n*a,i*a,a,this._INNER_MARGIN),drawingOptions:je.#a,mustBeCommitted:!e});return this._cleanup(!0),l}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,i,a,l){pt("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}=t.viewport,d=this.deserializeDraw(l,c,i,a,this._INNER_MARGIN,e),h=await super.deserialize(e,t,n);return h.createDrawingOptions(e),h.#l({drawOutlines:d}),h.#f(),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[t,n]=this.pageTranslation,[i,a]=this.pageDimensions;return this.#e.serialize([t,n,i,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class gG{#e=new Float64Array(6);#t;#s;#n;#a;#i;#r="";#o=0;#c=new au;#l;#h;constructor(e,t,n,i,a,l){this.#l=n,this.#h=i,this.#n=a,this.#a=l,[e,t]=this.#d(e,t);const c=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t],this.#s=[{line:c,points:this.#i}],this.#e.set(c,0)}updateProperty(e,t){e==="stroke-width"&&(this.#a=t)}#d(e,t){return be._normalizePoint(e,t,this.#l,this.#h,this.#n)}isEmpty(){return!this.#s||this.#s.length===0}isCancellable(){return this.#i.length<=10}add(e,t){[e,t]=this.#d(e,t);const[n,i,a,l]=this.#e.subarray(2,6),c=e-a,d=t-l;return Math.hypot(this.#l*c,this.#h*d)<=2?null:(this.#i.push(e,t),isNaN(n)?(this.#e.set([a,l,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([n,i,a,l,e,t],0),this.#t.push(...be.createBezierPoints(n,i,a,l,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,i,a){this.#l=n,this.#h=i,this.#n=a,[e,t]=this.#d(e,t);const l=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t];const c=this.#s.at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),this.#s.push({line:l,points:this.#i}),this.#e.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#s.at(-1)}setLastElement(e){return this.#s?(this.#s.push(e),this.#t=e.line,this.#i=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#s)return this.#c.removeLastElement();this.#s.pop(),this.#r="";for(let e=0,t=this.#s.length;e<t;e++){const{line:n,points:i}=this.#s[e];this.#t=n,this.#i=i,this.#o=0,this.toSVGPath()}return{path:{d:this.#r}}}toSVGPath(){const e=be.svgRound(this.#t[4]),t=be.svgRound(this.#t[5]);if(this.#i.length===2)return this.#r=`${this.#r} M ${e} ${t} Z`,this.#r;if(this.#i.length<=6){const i=this.#r.lastIndexOf("M");this.#r=`${this.#r.slice(0,i)} M ${e} ${t}`,this.#o=6}if(this.#i.length===4){const i=be.svgRound(this.#t[10]),a=be.svgRound(this.#t[11]);return this.#r=`${this.#r} L ${i} ${a}`,this.#o=12,this.#r}const n=[];this.#o===0&&(n.push(`M ${e} ${t}`),this.#o=6);for(let i=this.#o,a=this.#t.length;i<a;i+=6){const[l,c,d,h,f,m]=this.#t.slice(i,i+6).map(be.svgRound);n.push(`C${l} ${c} ${d} ${h} ${f} ${m}`)}return this.#r+=n.join(" "),this.#o=this.#t.length,this.#r}getOutlines(e,t,n,i){const a=this.#s.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#c.build(this.#s,e,t,n,this.#n,this.#a,i),this.#e=null,this.#t=null,this.#s=null,this.#r=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class au extends be{#e;#t=0;#s;#n;#a;#i;#r;#o;#c;build(e,t,n,i,a,l,c){this.#a=t,this.#i=n,this.#r=i,this.#o=a,this.#c=l,this.#s=c??0,this.#n=e,this.#d()}get thickness(){return this.#c}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${be.svgRound(t[4])} ${be.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${be.svgRound(t[10])} ${be.svgRound(t[11])}`);continue}for(let n=6,i=t.length;n<i;n+=6){const[a,l,c,d,h,f]=t.subarray(n,n+6).map(be.svgRound);e.push(`C${a} ${l} ${c} ${d} ${h} ${f}`)}}return e.join("")}serialize([e,t,n,i],a){const l=[],c=[],[d,h,f,m]=this.#h();let y,x,A,S,C,E,_,R,N;switch(this.#o){case 0:N=be._rescale,y=e,x=t+i,A=n,S=-i,C=e+d*n,E=t+(1-h-m)*i,_=e+(d+f)*n,R=t+(1-h)*i;break;case 90:N=be._rescaleAndSwap,y=e,x=t,A=n,S=i,C=e+h*n,E=t+d*i,_=e+(h+m)*n,R=t+(d+f)*i;break;case 180:N=be._rescale,y=e+n,x=t,A=-n,S=i,C=e+(1-d-f)*n,E=t+h*i,_=e+(1-d)*n,R=t+(h+m)*i;break;case 270:N=be._rescaleAndSwap,y=e+n,x=t+i,A=-n,S=-i,C=e+(1-h-m)*n,E=t+(1-d-f)*i,_=e+(1-h)*n,R=t+(1-d)*i;break}for(const{line:M,points:j}of this.#n)l.push(N(M,y,x,A,S,a?new Array(M.length):null)),c.push(N(j,y,x,A,S,a?new Array(j.length):null));return{lines:l,points:c,rect:[C,E,_,R]}}static deserialize(e,t,n,i,a,{paths:{lines:l,points:c},rotation:d,thickness:h}){const f=[];let m,y,x,A,S;switch(d){case 0:S=be._rescale,m=-e/n,y=t/i+1,x=1/n,A=-1/i;break;case 90:S=be._rescaleAndSwap,m=-t/i,y=-e/n,x=1/i,A=1/n;break;case 180:S=be._rescale,m=e/n+1,y=-t/i,x=-1/n,A=1/i;break;case 270:S=be._rescaleAndSwap,m=t/i+1,y=e/n+1,x=-1/i,A=-1/n;break}if(!l){l=[];for(const E of c){const _=E.length;if(_===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(_===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const R=new Float32Array(3*(_-2));l.push(R);let[N,M,j,D]=E.subarray(0,4);R.set([NaN,NaN,NaN,NaN,N,M],0);for(let O=4;O<_;O+=2){const I=E[O],U=E[O+1];R.set(be.createBezierPoints(N,M,j,D,I,U),(O-2)*3),[N,M,j,D]=[j,D,I,U]}}}for(let E=0,_=l.length;E<_;E++)f.push({line:S(l[E].map(R=>R??NaN),m,y,x,A),points:S(c[E].map(R=>R??NaN),m,y,x,A)});const C=new this.prototype.constructor;return C.build(f,n,i,1,d,h,a),C}#l(e=this.#c){const t=this.#s+e/2*this.#r;return this.#o%180===0?[t/this.#a,t/this.#i]:[t/this.#i,t/this.#a]}#h(){const[e,t,n,i]=this.#e,[a,l]=this.#l(0);return[e+a,t+l,n-2*a,i-2*l]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#n){if(i.length<=12){for(let c=4,d=i.length;c<d;c+=6)xe.pointBoundingBox(i[c],i[c+1],e);continue}let a=i[4],l=i[5];for(let c=6,d=i.length;c<d;c+=6){const[h,f,m,y,x,A]=i.subarray(c,c+6);xe.bezierBoundingBox(a,l,h,f,m,y,x,A,e),a=x,l=A}}const[t,n]=this.#l();e[0]=cn(e[0]-t,0,1),e[1]=cn(e[1]-n,0,1),e[2]=cn(e[2]+t,0,1),e[3]=cn(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,n]=this.#l();this.#c=e;const[i,a]=this.#l(),[l,c]=[i-t,a-n],d=this.#e;return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d}updateParentDimensions([e,t],n){const[i,a]=this.#l();this.#a=e,this.#i=t,this.#r=n;const[l,c]=this.#l(),d=l-i,h=c-a,f=this.#e;return f[0]-=d,f[1]-=h,f[2]+=2*d,f[3]+=2*h,f}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(be.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${be.svgRound(e)} ${be.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let n=0,i=0,a=0,l=0,c=0,d=0;switch(this.#t){case 90:i=t/e,a=-e/t,c=e;break;case 180:n=-1,l=-1,c=e,d=t;break;case 270:i=-t/e,a=e/t,d=t;break;default:return""}return`matrix(${n} ${i} ${a} ${l} ${be.svgRound(c)} ${be.svgRound(d)})`}getPathResizingSVGProperties([e,t,n,i]){const[a,l]=this.#l(),[c,d,h,f]=this.#e;if(Math.abs(h-a)<=be.PRECISION||Math.abs(f-l)<=be.PRECISION){const S=e+n/2-(c+h/2),C=t+i/2-(d+f/2);return{path:{"transform-origin":`${be.svgRound(e)} ${be.svgRound(t)}`,transform:`${this.rotationTransform} translate(${S} ${C})`}}}const m=(n-2*a)/(h-2*a),y=(i-2*l)/(f-2*l),x=h/n,A=f/i;return{path:{"transform-origin":`${be.svgRound(c)} ${be.svgRound(d)}`,transform:`${this.rotationTransform} scale(${x} ${A}) translate(${be.svgRound(a)} ${be.svgRound(l)}) scale(${m} ${y}) translate(${be.svgRound(-a)} ${be.svgRound(-l)})`}}}getPathResizedSVGProperties([e,t,n,i]){const[a,l]=this.#l(),c=this.#e,[d,h,f,m]=c;if(c[0]=e,c[1]=t,c[2]=n,c[3]=i,Math.abs(f-a)<=be.PRECISION||Math.abs(m-l)<=be.PRECISION){const C=e+n/2-(d+f/2),E=t+i/2-(h+m/2);for(const{line:_,points:R}of this.#n)be._translate(_,C,E,_),be._translate(R,C,E,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${be.svgRound(e)} ${be.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(n-2*a)/(f-2*a),x=(i-2*l)/(m-2*l),A=-y*(d+a)+e+a,S=-x*(h+l)+t+l;if(y!==1||x!==1||A!==0||S!==0)for(const{line:C,points:E}of this.#n)be._rescale(C,A,S,y,x,C),be._rescale(E,A,S,y,x,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${be.svgRound(e)} ${be.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],n){const[i,a]=n,l=this.#e,c=e-l[0],d=t-l[1];if(this.#a===i&&this.#i===a)for(const{line:h,points:f}of this.#n)be._translate(h,c,d,h),be._translate(f,c,d,f);else{const h=this.#a/i,f=this.#i/a;this.#a=i,this.#i=a;for(const{line:m,points:y}of this.#n)be._rescale(m,c,d,h,f,m),be._rescale(y,c,d,h,f,y);l[2]*=h,l[3]*=f}return l[0]=e,l[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${be.svgRound(e)} ${be.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${be.svgRound(e[0])} ${be.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class of extends OM{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Me._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new of(this._viewParameters);return e.updateAll(this),e}}class ab extends je{static _type="ink";static _editorType=Fe.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){Me.initialize(e,t),this._defaultDrawingOptions=new of(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return $e(this,"typesMap",new Map([[Qe.INK_THICKNESS,"stroke-width"],[Qe.INK_COLOR,"stroke"],[Qe.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,i,a){return new gG(e,t,n,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,i,a,l){return au.deserialize(e,t,n,i,a,l)}static async deserialize(e,t,n){let i=null;if(e instanceof ib){const{data:{inkLists:l,rect:c,rotation:d,id:h,color:f,opacity:m,borderStyle:{rawWidth:y},popupRef:x,richText:A,contentsObj:S,creationDate:C,modificationDate:E},parent:{page:{pageNumber:_}}}=e;i=e={annotationType:Fe.INK,color:Array.from(f),thickness:y,opacity:m,paths:{points:l},boxes:null,pageIndex:_-1,rect:c.slice(0),rotation:d,annotationElementId:h,id:h,deleted:!1,popupRef:x,richText:A,comment:S?.str||null,creationDate:C,modificationDate:E}}const a=await super.deserialize(e,t,n);return a._initialData=i,e.comment&&a.setCommentData(e),a}get toolbarButtons(){return this._colorPicker||=new Bc(this),[["colorPicker",this._colorPicker]]}get colorType(){return Qe.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:n}){this._drawingOptions=ab.getDefaultDrawingOptions({stroke:xe.makeHexColor(...e),"stroke-width":t,"stroke-opacity":n})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":a,"stroke-width":l}}=this,c=Object.assign(super.serialize(e),{color:Me._colorManager.convert(i),opacity:a,thickness:l,paths:{lines:t,points:n}});return this.addComment(c),e?(c.isCopy=!0,c):this.annotationElementId&&!this.#e(c)?null:(c.id=this.annotationElementId,c)}#e(e){const{color:t,thickness:n,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==t[c])||e.thickness!==n||e.opacity!==i||e.pageIndex!==a}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class Ty extends au{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const $d=8,rc=3;class na{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,n,i){return n-=e,i-=t,n===0?i>0?0:4:n===1?i+6:2-i}static#s=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,n,i,a,l,c){const d=this.#t(n,i,a,l);for(let h=0;h<8;h++){const f=(-h+d-c+16)%8,m=this.#s[2*f],y=this.#s[2*f+1];if(e[(n+m)*t+(i+y)]!==0)return f}return-1}static#a(e,t,n,i,a,l,c){const d=this.#t(n,i,a,l);for(let h=0;h<8;h++){const f=(h+d+c+16)%8,m=this.#s[2*f],y=this.#s[2*f+1];if(e[(n+m)*t+(i+y)]!==0)return f}return-1}static#i(e,t,n,i){const a=e.length,l=new Int32Array(a);for(let f=0;f<a;f++)l[f]=e[f]<=i?1:0;for(let f=1;f<n-1;f++)l[f*t]=l[f*t+t-1]=0;for(let f=0;f<t;f++)l[f]=l[t*n-1-f]=0;let c=1,d;const h=[];for(let f=1;f<n-1;f++){d=1;for(let m=1;m<t-1;m++){const y=f*t+m,x=l[y];if(x===0)continue;let A=f,S=m;if(x===1&&l[y-1]===0)c+=1,S-=1;else if(x>=1&&l[y+1]===0)c+=1,S+=1,x>1&&(d=x);else{x!==1&&(d=Math.abs(x));continue}const C=[m,f],E=S===m+1,_={isHole:E,points:C,id:c,parent:0};h.push(_);let R;for(const $ of h)if($.id===d){R=$;break}R?R.isHole?_.parent=E?R.parent:d:_.parent=E?d:R.parent:_.parent=E?d:0;const N=this.#n(l,t,f,m,A,S,0);if(N===-1){l[y]=-c,l[y]!==1&&(d=Math.abs(l[y]));continue}let M=this.#s[2*N],j=this.#s[2*N+1];const D=f+M,O=m+j;A=D,S=O;let I=f,U=m;for(;;){const $=this.#a(l,t,I,U,A,S,1);M=this.#s[2*$],j=this.#s[2*$+1];const J=I+M,ie=U+j;C.push(ie,J);const X=I*t+U;if(l[X+1]===0?l[X]=-c:l[X]===1&&(l[X]=c),J===f&&ie===m&&I===D&&U===O){l[y]!==1&&(d=Math.abs(l[y]));break}else A=I,S=U,I=J,U=ie}}}return h}static#r(e,t,n,i){if(n-t<=4){for(let D=t;D<n-2;D+=2)i.push(e[D],e[D+1]);return}const a=e[t],l=e[t+1],c=e[n-4]-a,d=e[n-3]-l,h=Math.hypot(c,d),f=c/h,m=d/h,y=f*l-m*a,x=d/c,A=1/h,S=Math.atan(x),C=Math.cos(S),E=Math.sin(S),_=A*(Math.abs(C)+Math.abs(E)),R=A*(1-_+_**2),N=Math.max(Math.atan(Math.abs(E+C)*R),Math.atan(Math.abs(E-C)*R));let M=0,j=t;for(let D=t+2;D<n-2;D+=2){const O=Math.abs(y-f*e[D+1]+m*e[D]);O>M&&(j=D,M=O)}M>(h*N)**2?(this.#r(e,t,j+2,i),this.#r(e,j,n,i)):i.push(a,l)}static#o(e){const t=[],n=e.length;return this.#r(e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}static#c(e,t,n,i,a,l){const c=new Float32Array(l**2),d=-2*i**2,h=l>>1;for(let S=0;S<l;S++){const C=(S-h)**2;for(let E=0;E<l;E++)c[S*l+E]=Math.exp((C+(E-h)**2)/d)}const f=new Float32Array(256),m=-2*a**2;for(let S=0;S<256;S++)f[S]=Math.exp(S**2/m);const y=e.length,x=new Uint8Array(y),A=new Uint32Array(256);for(let S=0;S<n;S++)for(let C=0;C<t;C++){const E=S*t+C,_=e[E];let R=0,N=0;for(let j=0;j<l;j++){const D=S+j-h;if(!(D<0||D>=n))for(let O=0;O<l;O++){const I=C+O-h;if(I<0||I>=t)continue;const U=e[D*t+I],$=c[j*l+O]*f[Math.abs(U-_)];R+=U*$,N+=$}}const M=x[E]=Math.round(R/N);A[M]++}return[x,A]}static#l(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}static#h(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let i=-1/0,a=1/0;for(let c=0,d=n.length;c<d;c++){const h=n[c]=e[c<<2];i=Math.max(i,h),a=Math.min(a,h)}const l=255/(i-a);for(let c=0,d=n.length;c<d;c++)n[c]=(n[c]-a)*l;return n}static#d(e){let t,n=-1/0,i=-1/0;const a=e.findIndex(d=>d!==0);let l=a,c=a;for(t=a;t<256;t++){const d=e[t];d>n&&(t-l>i&&(i=t-l,c=t-1),n=d,l=t)}for(t=c-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:n,height:i}=e,{maxDim:a}=this.#e;let l=n,c=i;if(n>a||i>a){let y=n,x=i,A=Math.log2(Math.max(n,i)/a);const S=Math.floor(A);A=A===S?S-1:S;for(let E=0;E<A;E++){l=Math.ceil(y/2),c=Math.ceil(x/2);const _=new OffscreenCanvas(l,c);_.getContext("2d").drawImage(e,0,0,y,x,0,0,l,c),y=l,x=c,e!==t&&e.close(),e=_.transferToImageBitmap()}const C=Math.min(a/l,a/c);l=Math.round(l*C),c=Math.round(c*C)}const h=new OffscreenCanvas(l,c).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,l,c),h.filter="grayscale(1)",h.drawImage(e,0,0,e.width,e.height,0,0,l,c);const f=h.getImageData(0,0,l,c).data;return[this.#h(f),l,c]}static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:i},a,l,c,d){let h=new OffscreenCanvas(1,1),f=h.getContext("2d",{alpha:!1});const m=200,y=f.font=`${n} ${i} ${m}px ${t}`,{actualBoundingBoxLeft:x,actualBoundingBoxRight:A,actualBoundingBoxAscent:S,actualBoundingBoxDescent:C,fontBoundingBoxAscent:E,fontBoundingBoxDescent:_,width:R}=f.measureText(e),N=1.5,M=Math.ceil(Math.max(Math.abs(x)+Math.abs(A)||0,R)*N),j=Math.ceil(Math.max(Math.abs(S)+Math.abs(C)||m,Math.abs(E)+Math.abs(_)||m)*N);h=new OffscreenCanvas(M,j),f=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=y,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,M,j),f.fillStyle="black",f.fillText(e,M*(N-1)/2,j*(3-N)/2);const D=this.#h(f.getImageData(0,0,M,j).data),O=this.#l(D),I=this.#d(O),U=this.#i(D,M,j,I);return this.processDrawnLines({lines:{curves:U,width:M,height:j},pageWidth:a,pageHeight:l,rotation:c,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(e,t,n,i,a){const[l,c,d]=this.#f(e),[h,f]=this.#c(l,c,d,Math.hypot(c,d)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),m=this.#d(f),y=this.#i(h,c,d,m);return this.processDrawnLines({lines:{curves:y,width:c,height:d},pageWidth:t,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:a,mustSmooth:l,areContours:c}){i%180!==0&&([t,n]=[n,t]);const{curves:d,width:h,height:f}=e,m=e.thickness??0,y=[],x=Math.min(t/h,n/f),A=x/t,S=x/n,C=[];for(const{points:_}of d){const R=l?this.#o(_):_;if(!R)continue;C.push(R);const N=R.length,M=new Float32Array(N),j=new Float32Array(3*(N===2?2:N-2));if(y.push({line:j,points:M}),N===2){M[0]=R[0]*A,M[1]=R[1]*S,j.set([NaN,NaN,NaN,NaN,M[0],M[1]],0);continue}let[D,O,I,U]=R;D*=A,O*=S,I*=A,U*=S,M.set([D,O,I,U],0),j.set([NaN,NaN,NaN,NaN,D,O],0);for(let $=4;$<N;$+=2){const J=M[$]=R[$]*A,ie=M[$+1]=R[$+1]*S;j.set(be.createBezierPoints(D,O,I,U,J,ie),($-2)*3),[D,O,I,U]=[I,U,J,ie]}}if(y.length===0)return null;const E=c?new Ty:new au;return E.build(y,t,n,1,i,c?0:m,a),{outline:E,newCurves:C,areContours:c,thickness:m,width:h,height:f}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:i,height:a}){let l=1/0,c=-1/0,d=0;for(const R of e){d+=R.length;for(let N=2,M=R.length;N<M;N++){const j=R[N]-R[N-2];l=Math.min(l,j),c=Math.max(c,j)}}let h;l>=-128&&c<=127?h=Int8Array:l>=-32768&&c<=32767?h=Int16Array:h=Int32Array;const f=e.length,m=$d+rc*f,y=new Uint32Array(m);let x=0;y[x++]=m*Uint32Array.BYTES_PER_ELEMENT+(d-2*f)*h.BYTES_PER_ELEMENT,y[x++]=0,y[x++]=i,y[x++]=a,y[x++]=t?0:1,y[x++]=Math.max(0,Math.floor(n??0)),y[x++]=f,y[x++]=h.BYTES_PER_ELEMENT;for(const R of e)y[x++]=R.length-2,y[x++]=R[0],y[x++]=R[1];const A=new CompressionStream("deflate-raw"),S=A.writable.getWriter();await S.ready,S.write(y);const C=h.prototype.constructor;for(const R of e){const N=new C(R.length-2);for(let M=2,j=R.length;M<j;M++)N[M-2]=R[M]-R[M-2];S.write(N)}S.close();const E=await new Response(A.readable).arrayBuffer(),_=new Uint8Array(E);return tM(_)}static async decompressSignature(e){try{const t=U$(e),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(t).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let l=null,c=0;for await(const R of n)l||=new Uint8Array(new Uint32Array(R.buffer,0,4)[0]),l.set(R,c),c+=R.length;const d=new Uint32Array(l.buffer,0,l.length>>2),h=d[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const f=d[2],m=d[3],y=d[4]===0,x=d[5],A=d[6],S=d[7],C=[],E=($d+rc*A)*Uint32Array.BYTES_PER_ELEMENT;let _;switch(S){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(l.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(l.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(l.buffer,E);break}c=0;for(let R=0;R<A;R++){const N=d[rc*R+$d],M=new Float32Array(N+2);C.push(M);for(let j=0;j<rc-1;j++)M[j]=d[rc*R+$d+j+1];for(let j=0;j<N;j++)M[j+2]=M[j]+_[c++]}return{areContours:y,thickness:x,outlines:C,width:f,height:m}}catch(t){return Be(`decompressSignature: ${t}`),null}}}class ob extends OM{constructor(){super(),super.updateProperties({fill:Me._defaultLineColor,"stroke-width":0})}clone(){const e=new ob;return e.updateAll(this),e}}class lb extends of{constructor(e){super(e),super.updateProperties({stroke:Me._defaultLineColor,"stroke-width":1})}clone(){const e=new lb(this._viewParameters);return e.updateAll(this),e}}class Vs extends je{#e=!1;#t=null;#s=null;#n=null;static _type="signature";static _editorType=Fe.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#s=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){Me.initialize(e,t),this._defaultDrawingOptions=new ob,this._defaultDrawnSignatureOptions=new lb(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return $e(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#s){const{lines:i,mustSmooth:a,areContours:l,description:c,uuid:d,heightInPage:h}=this.#s,{rawDims:{pageWidth:f,pageHeight:m},rotation:y}=this.parent.viewport,x=na.processDrawnLines({lines:i,pageWidth:f,pageHeight:m,rotation:y,innerMargin:Vs._INNER_MARGIN,mustSmooth:a,areContours:l});this.addSignature(x,h,c,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:i,height:a}=this.#s,l=Math.max(i,a),c=na.processDrawnLines({lines:{curves:e.map(d=>({points:d})),thickness:n,width:i,height:a},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,n,i){const{x:a,y:l}=this,{outline:c}=this.#s=e;this.#e=c instanceof Ty,this.description=n;let d;this.#e?d=Vs.getDefaultDrawingOptions():(d=Vs._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:d});const[,h]=this.pageDimensions;let f=t/h;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=a,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return na.process(e,t,n,i,Vs._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:i},rotation:a}=this.parent.viewport;return na.extractContoursFromText(e,t,n,i,a,Vs._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:i}=this.parent.viewport;return na.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:i,innerMargin:Vs._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=Vs.getDefaultDrawingOptions():(this._drawingOptions=Vs._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,a=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:i});return this.addComment(a),e?(a.paths={lines:t,points:n},a.uuid=this.#n,a.isCopy=!0):a.lines=t,this.#t&&(a.accessibilityData={type:"Figure",alt:this.#t}),a}static deserializeDraw(e,t,n,i,a,l){return l.areContours?Ty.deserialize(e,t,n,i,a,l):au.deserialize(e,t,n,i,a,l)}static async deserialize(e,t,n){const i=await super.deserialize(e,t,n);return i.#e=e.areContours,i.description=e.accessibilityData?.alt||"",i.#n=e.uuid,i}}class yG extends Me{#e=null;#t=null;#s=null;#n=null;#a=null;#i="";#r=null;#o=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=Fe.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#a=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){Me.initialize(e,t)}static isHandlingMimeForPasting(e){return Eh.includes(e)}static paste(e,t){t.pasteEditor({mode:Fe.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#i=e.file.name),this.#p()}#f(){if(this.#s=null,this._uiManager.enableWaiting(!1),!!this.#r){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=await n.guess({name:"altText",request:{data:i,width:a,height:l,channels:i.length/(a*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const d=c.output;return await this.setGuessedAltText(d),t&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(n=>this.#d(n,!0)).finally(()=>this.#f());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(n).then(i=>this.#d(i)).finally(()=>this.#f());return}if(this.#a){const n=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(n).then(i=>this.#d(i)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=Eh.join(",");const t=this._uiManager._signal;this.#s=new Promise(n=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(i)}n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#r?.remove(),this.#r=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#r===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#s||this.#e||this.#n||this.#a||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#t=n,i&&(this.#e=i),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#m()},e)}#p(){const{div:e}=this;let{width:t,height:n}=this.#e;const[i,a]=this.pageDimensions,l=.75;if(this.width)t=this.width*i,n=this.height*a;else if(t>l*i||n>l*a){const d=Math.min(l*i/t,l*a/n);t*=d,n*=d}this._uiManager.enableWaiting(!1);const c=this.#r=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=t/i,this.height=n/a,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#m(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,n=!1){e||(e=224);const{width:i,height:a}=this.#e,l=new Ms;let c=this.#e,d=i,h=a,f=null;if(t){if(i>t||a>t){const j=Math.min(t/i,t/a);d=Math.floor(i*j),h=Math.floor(a*j)}f=document.createElement("canvas");const y=f.width=Math.ceil(d*l.sx),x=f.height=Math.ceil(h*l.sy);this.#l||(c=this.#u(y,x));const A=f.getContext("2d");A.filter=this._uiManager.hcmFilter;let S="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":$$.isDarkMode&&(S="#8f8f9d",C="#42414d");const E=15,_=E*l.sx,R=E*l.sy,N=new OffscreenCanvas(_*2,R*2),M=N.getContext("2d");M.fillStyle=S,M.fillRect(0,0,_*2,R*2),M.fillStyle=C,M.fillRect(0,0,_,R),M.fillRect(_,R,_,R),A.fillStyle=A.createPattern(N,"repeat"),A.fillRect(0,0,y,x),A.drawImage(c,0,0,c.width,c.height,0,0,y,x)}let m=null;if(n){let y,x;if(l.symmetric&&c.width<e&&c.height<e)y=c.width,x=c.height;else if(c=this.#e,i>e||a>e){const C=Math.min(e/i,e/a);y=Math.floor(i*C),x=Math.floor(a*C),this.#l||(c=this.#u(y,x))}const S=new OffscreenCanvas(y,x).getContext("2d",{willReadFrequently:!0});S.drawImage(c,0,0,c.width,c.height,0,0,y,x),m={width:y,height:x,data:S.getImageData(0,0,y,x).data}}return{canvas:f,width:d,height:h,imageData:m}}#u(e,t){const{width:n,height:i}=this.#e;let a=n,l=i,c=this.#e;for(;a>2*e||l>2*t;){const d=a,h=l;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const f=new OffscreenCanvas(a,l);f.getContext("2d").drawImage(c,0,0,d,h,0,0,a,l),c=f.transferToImageBitmap()}return c}#m(){const[e,t]=this.parentDimensions,{width:n,height:i}=this,a=new Ms,l=Math.ceil(n*e*a.sx),c=Math.ceil(i*t*a.sy),d=this.#r;if(!d||d.width===l&&d.height===c)return;d.width=l,d.height=c;const h=this.#l?this.#e:this.#u(l,c),f=d.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(h,0,0,h.width,h.height,0,0,l,c)}#y(e){if(e){if(this.#l){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,n]=this.pageDimensions,i=Math.round(this.width*t*ya.PDF_TO_CSS_UNITS),a=Math.round(this.height*n*ya.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(i,a);return l.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,a),l.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,n){let i=null,a=!1;if(e instanceof DM){const{data:{rect:S,rotation:C,id:E,structParent:_,popupRef:R,richText:N,contentsObj:M,creationDate:j,modificationDate:D},container:O,parent:{page:{pageNumber:I}},canvas:U}=e;let $,J;U?(delete e.canvas,{id:$,bitmap:J}=n.imageManager.getFromCanvas(O.id,U),U.remove()):(a=!0,e._hasNoCanvas=!0);const ie=(await t._structTree.getAriaAttributes(`${$v}${E}`))?.get("aria-label")||"";i=e={annotationType:Fe.STAMP,bitmapId:$,bitmap:J,pageIndex:I-1,rect:S.slice(0),rotation:C,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:ie},isSvg:!1,structParent:_,popupRef:R,richText:N,comment:M?.str||null,creationDate:j,modificationDate:D}}const l=await super.deserialize(e,t,n),{rect:c,bitmap:d,bitmapUrl:h,bitmapId:f,isSvg:m,accessibilityData:y}=e;a?(n.addMissingCanvas(e.id,l),l.#o=!0):f&&n.imageManager.isValidId(f)?(l.#t=f,d&&(l.#e=d)):l.#n=h,l.#l=m;const[x,A]=l.pageDimensions;return l.width=(c[2]-c[0])/x,l.height=(c[3]-c[1])/A,y&&(l.altTextData=y),l._initialData=i,e.comment&&l.setCommentData(e),l.#h=!!i,l}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(n),e)return n.bitmapUrl=this.#y(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(n.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const c=this.#b(n);return c.isSame?null:(c.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(t===null)return n;t.stamps||=new Map;const l=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:l,serialized:n}),n.bitmap=this.#y(!1);else if(this.#l){const c=t.stamps.get(this.#t);l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=this.#y(!1))}return n}#b(e){const{pageIndex:t,accessibilityData:{altText:n}}=this._initialData,i=e.pageIndex===t,a=(e.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class $s{#e;#t=!1;#s=null;#n=null;#a=null;#i=new Map;#r=!1;#o=!1;#c=!1;#l=null;#h=null;#d=null;#f=null;#g=null;#p=-1;#u;static _initialized=!1;static#m=new Map([Yt,ab,yG,Ot,Vs].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:i,accessibilityManager:a,annotationLayer:l,drawLayer:c,textLayer:d,viewport:h,l10n:f}){const m=[...$s.#m.values()];if(!$s._initialized){$s._initialized=!0;for(const y of m)y.initialize(f,e)}e.registerEditorTypes(m),this.#u=e,this.pageIndex=t,this.div=n,this.#e=a,this.#s=l,this.viewport=h,this.#d=d,this.drawLayer=c,this._structTree=i,this.#u.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Fe.NONE}updateToolbar(e){this.#u.updateToolbar(e)}updateMode(e=this.#u.getMode()){switch(this.#x(),e){case Fe.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Fe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Fe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Fe.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of $s.#m.values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#u.setEditingState(e)}addCommands(e){this.#u.addCommands(e)}cleanUndoStack(e){this.#u.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#s?.div.classList.toggle("disabled",!e)}get#y(){return this.#i.size!==0?this.#i.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const e=new Set;for(const n of this.#y)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#u.removeChangedExistingAnnotation(n),e.add(n.annotationElementId));const t=this.#s;if(t)for(const n of t.getEditableAnnotations()){if(n.hide(),this.#u.isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#g){this.#g=new AbortController;const n=this.#u.combinedSignal(this.#g);this.#d.div.addEventListener("pointerdown",i=>{const{clientX:l,clientY:c,timeStamp:d}=i,h=this.#p;if(d-h>500){this.#p=d;return}this.#p=-1;const{classList:f}=this.div;f.toggle("getElements",!0);const m=document.elementsFromPoint(l,c);if(f.toggle("getElements",!1),!this.div.contains(m[0]))return;let y;const x=new RegExp(`^${Pc}[0-9]+$`);for(const S of m)if(x.test(S.id)){y=S.id;break}if(!y)return;const A=this.#i.get(y);A?.annotationElementId===null&&(i.stopPropagation(),i.preventDefault(),A.dblclick(i))},{signal:n,capture:!0})}const e=this.#s;if(e){const n=new Map,i=new Map;for(const l of this.#y){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(e);continue}if(l.serialize()!==null){n.set(l.annotationElementId,l);continue}else i.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const a=e.getEditableAnnotations();for(const l of a){const{id:c}=l.data;if(this.#u.isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let d=i.get(c);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=n.get(c),d&&(this.#u.addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}this.#x(),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const n of $s.#m.values())t.remove(`${n._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(e){return this.#s?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#u.getActive()!==e&&this.#u.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#u.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#b.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#b(e){this.#u.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:n}=Qt.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#u.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),Ot.startHighlighting(this,this.#u.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#i.set(e.id,e);const{annotationElementId:t}=e;t&&this.#u.isDeletedAnnotationElement(t)&&this.#u.removeDeletedAnnotationElement(e)}detach(e){this.#i.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#u.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#u.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#u.addDeletedAnnotationElement(e.annotationElementId),Me.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#u.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#u.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#a&&(e._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of this.#i.values())if(t.uid===e)return t;return null}getNextId(){return this.#u.getId()}get#v(){return $s.#m.get(this.#u.getMode())}combinedSignal(e){return this.#u.combinedSignal(e)}#E(e){const t=this.#v;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#u.updateMode(e.mode);const{offsetX:n,offsetY:i}=this.#A(),a=this.getNextId(),l=this.#E({parent:this,id:a,x:n,y:i,uiManager:this.#u,isCentered:!0,...t});l&&this.add(l)}async deserialize(e){return await $s.#m.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#u)||null}createAndAddNewEditor(e,t,n={}){const i=this.getNextId(),a=this.#E({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#u,isCentered:t,...n});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}#A(){const{x:e,y:t,width:n,height:i}=this.boundingClientRect,a=Math.max(0,e),l=Math.max(0,t),c=Math.min(window.innerWidth,e+n),d=Math.min(window.innerHeight,t+i),h=(a+c)/2-e,f=(l+d)/2-t,[m,y]=this.viewport.rotation%180===0?[h,f]:[f,h];return{offsetX:m,offsetY:y}}addNewEditor(e={}){this.createAndAddNewEditor(this.#A(),!0,e)}setSelected(e){this.#u.setSelected(e)}toggleSelected(e){this.#u.toggleSelected(e)}unselect(e){this.#u.unselect(e)}pointerup(e){const{isMac:t}=Qt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#r||(this.#r=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const n=this.#u.getMode();if(n===Fe.STAMP||n===Fe.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#u.getMode()===Fe.HIGHLIGHT&&this.enableTextSelection(),this.#r){this.#r=!1;return}const{isMac:t}=Qt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#r=!0,this.#v?.isDrawer){this.startDrawingSession(e);return}const n=this.#u.getActive();this.#t=!n||n.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#v.startDrawing(this,this.#u,!1,e);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#v.startDrawing(this,this.#u,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#v.endDrawing(e)):null}findNewParent(e,t,n){const i=this.#u.findParent(t,n);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const e of this.#i.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#i.clear(),this.#u.removeLayer(this)}#x(){for(const e of this.#i.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Cr(this.div,e);for(const t of this.#u.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#u.commitOrRemove(),this.#x();const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Cr(this.div,{rotation:n}),t!==n)for(const i of this.#i.values())i.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#u.viewParameters.realScale}}class Wt{#e=null;#t=new Map;#s=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return $e(this,"_svgFactory",new zc)}static#a(e,[t,n,i,a]){const{style:l}=e;l.top=`${100*n}%`,l.left=`${100*t}%`,l.width=`${100*i}%`,l.height=`${100*a}%`}#i(){const e=Wt._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#r(e,t){const n=Wt._svgFactory.createElement("clipPath");e.append(n);const i=`clip_${t}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const a=Wt._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),i}#o(e,t){for(const[n,i]of Object.entries(t))i===null?e.removeAttribute(n):e.setAttribute(n,i)}draw(e,t=!1,n=!1){const i=Wt.#n++,a=this.#i(),l=Wt._svgFactory.createElement("defs");a.append(l);const c=Wt._svgFactory.createElement("path");l.append(c);const d=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",d),c.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#s.set(i,c);const h=n?this.#r(l,d):null,f=Wt._svgFactory.createElement("use");return a.append(f),f.setAttribute("href",`#${d}`),this.updateProperties(a,e),this.#t.set(i,a),{id:i,clipPathId:`url(#${h})`}}drawOutline(e,t){const n=Wt.#n++,i=this.#i(),a=Wt._svgFactory.createElement("defs");i.append(a);const l=Wt._svgFactory.createElement("path");a.append(l);const c=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(t){const m=Wt._svgFactory.createElement("mask");a.append(m),d=`mask_p${this.pageIndex}_${n}`,m.setAttribute("id",d),m.setAttribute("maskUnits","objectBoundingBox");const y=Wt._svgFactory.createElement("rect");m.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const x=Wt._svgFactory.createElement("use");m.append(x),x.setAttribute("href",`#${c}`),x.setAttribute("stroke","none"),x.setAttribute("fill","black"),x.setAttribute("fill-rule","nonzero"),x.classList.add("mask")}const h=Wt._svgFactory.createElement("use");i.append(h),h.setAttribute("href",`#${c}`),d&&h.setAttribute("mask",`url(#${d})`);const f=h.cloneNode();return i.append(f),h.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#t.set(n,i),n}finalizeDraw(e,t){this.#s.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:i,rootClass:a,path:l}=t,c=typeof e=="number"?this.#t.get(e):e;if(c){if(n&&this.#o(c,n),i&&Wt.#a(c,i),a){const{classList:d}=c;for(const[h,f]of Object.entries(a))d.toggle(h,f)}if(l){const h=c.firstChild.firstChild;this.#o(h,l)}}}updateParent(e,t){if(t===this)return;const n=this.#t.get(e);n&&(t.#e.append(n),this.#t.delete(e),t.#t.set(e,n))}remove(e){this.#s.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#s.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Ey};globalThis.pdfjsLib={AbortException:Di,AnnotationEditorLayer:$s,AnnotationEditorParamsType:Qe,AnnotationEditorType:Fe,AnnotationEditorUIManager:ki,AnnotationLayer:rb,AnnotationMode:qs,AnnotationType:jt,applyOpacity:aM,build:_M,ColorPicker:Yn,createValidAbsoluteUrl:Uv,CSSConstants:rM,DOMSVGFactory:zc,DrawLayer:Wt,FeatureTest:Qt,fetchData:nl,findContrastColor:oM,getDocument:Jv,getFilenameFromUrl:nM,getPdfFilenameFromUrl:sM,getRGB:sl,getUuid:Hv,getXfaPageViewport:iM,GlobalWorkerOptions:br,ImageKind:xc,InvalidPDFException:Ah,isDataScheme:nu,isPdfFile:rf,isValidExplicitDest:dM,MathClamp:cn,noContextMenu:Zn,normalizeUnicode:eM,OPS:Ho,OutputScale:Ms,PasswordResponses:ZN,PDFDataRangeTransport:tb,PDFDateString:Ch,PDFWorker:$o,PermissionFlag:QN,PixelsPerInch:ya,RenderingCancelledException:sf,renderRichText:qv,ResponseException:Lc,setLayerDimensions:Cr,shadow:$e,SignatureExtractor:na,stopEvent:Ct,SupportedImageMimeTypes:Eh,TextLayer:Fc,TouchManager:iu,updateUrlHash:Vv,Util:xe,VerbosityLevel:Jc,version:nb,XfaLayer:Gv};const vG=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Di,AnnotationEditorLayer:$s,AnnotationEditorParamsType:Qe,AnnotationEditorType:Fe,AnnotationEditorUIManager:ki,AnnotationLayer:rb,AnnotationMode:qs,AnnotationType:jt,CSSConstants:rM,ColorPicker:Yn,DOMSVGFactory:zc,DrawLayer:Wt,FeatureTest:Qt,GlobalWorkerOptions:br,ImageKind:xc,InvalidPDFException:Ah,MathClamp:cn,OPS:Ho,OutputScale:Ms,PDFDataRangeTransport:tb,PDFDateString:Ch,PDFWorker:$o,PasswordResponses:ZN,PermissionFlag:QN,PixelsPerInch:ya,RenderingCancelledException:sf,ResponseException:Lc,SignatureExtractor:na,SupportedImageMimeTypes:Eh,TextLayer:Fc,TouchManager:iu,Util:xe,VerbosityLevel:Jc,XfaLayer:Gv,applyOpacity:aM,build:_M,createValidAbsoluteUrl:Uv,fetchData:nl,findContrastColor:oM,getDocument:Jv,getFilenameFromUrl:nM,getPdfFilenameFromUrl:sM,getRGB:sl,getUuid:Hv,getXfaPageViewport:iM,isDataScheme:nu,isPdfFile:rf,isValidExplicitDest:dM,noContextMenu:Zn,normalizeUnicode:eM,renderRichText:qv,setLayerDimensions:Cr,shadow:$e,stopEvent:Ct,updateUrlHash:Vv,version:nb},Symbol.toStringTag,{value:"Module"}));var mC=Object.prototype.hasOwnProperty;function gC(s,e,t){for(t of s.keys())if(Fo(t,e))return t}function Fo(s,e){var t,n,i;if(s===e)return!0;if(s&&e&&(t=s.constructor)===e.constructor){if(t===Date)return s.getTime()===e.getTime();if(t===RegExp)return s.toString()===e.toString();if(t===Array){if((n=s.length)===e.length)for(;n--&&Fo(s[n],e[n]););return n===-1}if(t===Set){if(s.size!==e.size)return!1;for(n of s)if(i=n,i&&typeof i=="object"&&(i=gC(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(s.size!==e.size)return!1;for(n of s)if(i=n[0],i&&typeof i=="object"&&(i=gC(e,i),!i)||!Fo(n[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)s=new Uint8Array(s),e=new Uint8Array(e);else if(t===DataView){if((n=s.byteLength)===e.byteLength)for(;n--&&s.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(s)){if((n=s.byteLength)===e.byteLength)for(;n--&&s[n]===e[n];);return n===-1}if(!t||typeof s=="object"){n=0;for(t in s)if(mC.call(s,t)&&++n&&!mC.call(e,t)||!(t in e)||!Fo(s[t],e[t]))return!1;return Object.keys(e).length===n}}return s!==s&&e!==e}function ou(s){let e=!1;return{promise:new Promise((n,i)=>{s.then(a=>!e&&n(a)).catch(a=>!e&&i(a))}),cancel(){e=!0}}}const bG=["onCopy","onCut","onPaste"],xG=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],wG=["onFocus","onBlur"],SG=["onInput","onInvalid","onReset","onSubmit"],AG=["onLoad","onError"],CG=["onKeyDown","onKeyPress","onKeyUp"],EG=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],_G=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],TG=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],RG=["onSelect"],NG=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],MG=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],DG=["onScroll"],kG=["onWheel"],jG=["onAnimationStart","onAnimationEnd","onAnimationIteration"],OG=["onTransitionEnd"],PG=["onToggle"],LG=["onChange"],IG=[...bG,...xG,...wG,...SG,...AG,...CG,...EG,..._G,...TG,...RG,...NG,...MG,...DG,...kG,...jG,...OG,...LG,...PG];function PM(s,e){const t={};for(const n of IG){const i=s[n];i&&(e?t[n]=(a=>i(a,e(n))):t[n]=i)}return t}var FG="Invariant failed";function ft(s,e){if(!s)throw new Error(FG)}var Cg,yC;function BG(){if(yC)return Cg;yC=1;var s=function(){};return Cg=s,Cg}var zG=BG();const hn=My(zG),LM=w.createContext(null),UG="noopener noreferrer nofollow";class VG{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return ft(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){ft(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||UG,e.target=n?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{ft(this.pdfDocument),ft(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{ft(Array.isArray(t));const n=t[0];new Promise(i=>{ft(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(a=>{i(a)}).catch(()=>{ft(!1)}):typeof n=="number"?i(n):ft(!1)}).then(i=>{const a=i+1;ft(this.pdfViewer),ft(a>=1&&a<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:i,pageNumber:a})})})}goToPage(e){const t=e-1;ft(this.pdfViewer),ft(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function Bo({children:s,type:e}){return g.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:s})}const vC={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function HG(s,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return s}}function Go(){return w.useReducer(HG,{value:void 0,error:void 0})}const lf=typeof window<"u",IM=lf&&window.location.protocol==="file:";function $G(s){return typeof s<"u"}function Zr(s){return $G(s)&&s!==null}function GG(s){return typeof s=="string"}function qG(s){return s instanceof ArrayBuffer}function XG(s){return ft(lf),s instanceof Blob}function Ry(s){return GG(s)&&/^data:/.test(s)}function bC(s){ft(Ry(s));const[e="",t=""]=s.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function YG(){return lf&&window.devicePixelRatio||1}const FM="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function xC(){hn(!IM,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${FM}`)}function WG(){hn(!IM,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${FM}`)}function ba(s){s?.cancel&&s.cancel()}function Ny(s,e){return Object.defineProperty(s,"width",{get(){return this.getViewport({scale:e}).width},configurable:!0}),Object.defineProperty(s,"height",{get(){return this.getViewport({scale:e}).height},configurable:!0}),Object.defineProperty(s,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(s,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),s}function BM(s){return s.name==="AbortException"||s.name==="RenderingCancelledException"}function KG(s){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return t(new Error("Error while reading a file."));e(n.result)},n.onerror=i=>{if(!i.target)return t(new Error("Error while reading a file."));const{error:a}=i.target;if(!a)return t(new Error("Error while reading a file."));switch(a.code){case a.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case a.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case a.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},n.readAsArrayBuffer(s)})}const{PDFDataRangeTransport:QG}=vG,ZG=(s,e)=>{switch(e){case vC.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");s(t);break}case vC.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");s(t);break}}};function wC(s){return typeof s=="object"&&s!==null&&("data"in s||"range"in s||"url"in s)}const JG=w.forwardRef(function({children:e,className:t,error:n="Failed to load PDF file.",externalLinkRel:i,externalLinkTarget:a,file:l,inputRef:c,imageResourcesPath:d,loading:h="Loading PDF",noData:f="No PDF file specified.",onItemClick:m,onLoadError:y,onLoadProgress:x,onLoadSuccess:A,onPassword:S=ZG,onSourceError:C,onSourceSuccess:E,options:_,renderMode:R,rotate:N,scale:M,...j},D){const[O,I]=Go(),{value:U,error:$}=O,[J,ie]=Go(),{value:X,error:ae}=J,P=w.useRef(new VG),F=w.useRef([]),B=w.useRef(void 0),V=w.useRef(void 0);l&&l!==B.current&&wC(l)&&(hn(!Fo(l,B.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),B.current=l),_&&_!==V.current&&(hn(!Fo(_,V.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),V.current=_);const de=w.useRef({scrollPageIntoView:fe=>{const{dest:me,pageNumber:ee,pageIndex:he=ee-1}=fe;if(m){m({dest:me,pageIndex:he,pageNumber:ee});return}const _e=F.current[he];if(_e){_e.scrollIntoView();return}hn(!1,`An internal link leading to page ${ee} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});w.useImperativeHandle(D,()=>({linkService:P,pages:F,viewer:de}),[]);function L(){E&&E()}function q(){$&&(hn(!1,$.toString()),C&&C($))}function te(){I({type:"RESET"})}w.useEffect(te,[l,I]);const oe=w.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return Ry(l)?{data:bC(l)}:(xC(),{url:l});if(l instanceof QG)return{range:l};if(qG(l))return{data:l};if(lf&&XG(l))return{data:await KG(l)};if(ft(typeof l=="object"),ft(wC(l)),"url"in l&&typeof l.url=="string"){if(Ry(l.url)){const{url:fe,...me}=l;return{data:bC(fe),...me}}xC()}return l},[l]);w.useEffect(()=>{const fe=ou(oe());return fe.promise.then(me=>{I({type:"RESOLVE",value:me})}).catch(me=>{I({type:"REJECT",error:me})}),()=>{ba(fe)}},[oe,I]),w.useEffect(()=>{if(!(typeof U>"u")){if(U===!1){q();return}L()}},[U]);function pe(){X&&(A&&A(X),F.current=new Array(X.numPages),P.current.setDocument(X))}function se(){ae&&(hn(!1,ae.toString()),y&&y(ae))}w.useEffect(function(){ie({type:"RESET"})},[ie,U]),w.useEffect(function(){if(!U)return;const me=_?{...U,..._}:U,ee=Jv(me);x&&(ee.onProgress=x),S&&(ee.onPassword=S);const he=ee;return he.promise.then(_e=>{he.destroyed||ie({type:"RESOLVE",value:_e})}).catch(_e=>{he.destroyed||ie({type:"REJECT",error:_e})}),()=>{he.destroy()}},[_,ie,U]),w.useEffect(()=>{if(!(typeof X>"u")){if(X===!1){se();return}pe()}},[X]),w.useEffect(function(){P.current.setViewer(de.current),P.current.setExternalLinkRel(i),P.current.setExternalLinkTarget(a)},[i,a]);const Q=w.useCallback((fe,me)=>{F.current[fe]=me},[]),ye=w.useCallback(fe=>{delete F.current[fe]},[]),ve=w.useMemo(()=>({imageResourcesPath:d,linkService:P.current,onItemClick:m,pdf:X,registerPage:Q,renderMode:R,rotate:N,scale:M,unregisterPage:ye}),[d,m,X,Q,R,N,M,ye]),Re=w.useMemo(()=>PM(j,()=>X),[j,X]);function Y(){function fe(ee){return!!ee?.pdf}if(!fe(ve))throw new Error("pdf is undefined");const me=typeof e=="function"?e(ve):e;return g.jsx(LM.Provider,{value:ve,children:me})}function ue(){return l?X==null?g.jsx(Bo,{type:"loading",children:typeof h=="function"?h():h}):X===!1?g.jsx(Bo,{type:"error",children:typeof n=="function"?n():n}):Y():g.jsx(Bo,{type:"no-data",children:typeof f=="function"?f():f})}return g.jsx("div",{className:Ko("react-pdf__Document",t),ref:c,...Re,children:ue()})});function zM(){return w.useContext(LM)}function UM(){for(var s=[],e=0;e<arguments.length;e++)s[e]=arguments[e];var t=s.filter(Boolean);if(t.length<=1){var n=t[0];return n||null}return function(a){for(var l=0,c=t;l<c.length;l++){var d=c[l];typeof d=="function"?d(a):d&&(d.current=a)}}}const VM=w.createContext(null);function cf(){return w.useContext(VM)}function e9(){const s=zM(),e=cf();ft(e);const t={...s,...e},{filterAnnotations:n,imageResourcesPath:i,linkService:a,onGetAnnotationsError:l,onGetAnnotationsSuccess:c,onRenderAnnotationLayerError:d,onRenderAnnotationLayerSuccess:h,page:f,pdf:m,renderForms:y,rotate:x,scale:A=1}=t;ft(m),ft(f),ft(a);const[S,C]=Go(),{value:E,error:_}=S,R=w.useRef(null);hn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function N(){E&&c&&c(E)}function M(){_&&(hn(!1,_.toString()),l&&l(_))}w.useEffect(function(){C({type:"RESET"})},[C,f]),w.useEffect(function(){if(!f)return;const U=ou(f.getAnnotations()),$=U;return U.promise.then(J=>{C({type:"RESOLVE",value:J})}).catch(J=>{C({type:"REJECT",error:J})}),()=>{ba($)}},[C,f]),w.useEffect(()=>{if(E!==void 0){if(E===!1){M();return}N()}},[E]);function j(){h&&h()}function D(I){hn(!1,`${I}`),d&&d(I)}const O=w.useMemo(()=>f.getViewport({scale:A,rotation:x}),[f,x,A]);return w.useEffect(function(){if(!m||!f||!a||!E)return;const{current:U}=R;if(!U)return;const $=O.clone({dontFlip:!0}),J={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:m.annotationStorage,commentManager:null,div:U,l10n:null,linkService:a,page:f,structTreeLayer:null,viewport:$},ie={annotations:n?n({annotations:E}):E,annotationStorage:m.annotationStorage,div:U,imageResourcesPath:i,linkService:a,page:f,renderForms:y,viewport:$};U.innerHTML="";try{new rb(J).render(ie),j()}catch(X){D(X)}return()=>{}},[E,n,i,a,f,m,y,O]),g.jsx("div",{className:Ko("react-pdf__Page__annotations","annotationLayer"),ref:R})}const HM={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},t9=/^H(\d+)$/;function n9(s){return s in HM}function uf(s){return"children"in s}function $M(s){return uf(s)?s.children.length===1&&0 in s.children&&"id"in s.children[0]:!1}function s9(s){const e={};if(uf(s)){const{role:t}=s,n=t.match(t9);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(n9(t)){const i=HM[t];i&&(e.role=i)}}return e}function GM(s){const e={};if(uf(s)){if(s.alt!==void 0&&(e["aria-label"]=s.alt),s.lang!==void 0&&(e.lang=s.lang),$M(s)){const[t]=s.children;if(t){const n=GM(t);return{...e,...n}}}}else"id"in s&&(e["aria-owns"]=s.id);return e}function i9(s){return s?{...s9(s),...GM(s)}:null}function qM({className:s,node:e}){const t=w.useMemo(()=>i9(e),[e]),n=w.useMemo(()=>!uf(e)||$M(e)?null:e.children.map((i,a)=>g.jsx(qM,{node:i},a)),[e]);return g.jsx("span",{className:s,...t,children:n})}function r9(){const s=cf();ft(s);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=s,[n,i]=Go(),{value:a,error:l}=n,{customTextRenderer:c,page:d}=s;function h(){a&&t&&t(a)}function f(){l&&(hn(!1,l.toString()),e&&e(l))}return w.useEffect(function(){i({type:"RESET"})},[i,d]),w.useEffect(function(){if(c||!d)return;const y=ou(d.getStructTree()),x=y;return y.promise.then(A=>{i({type:"RESOLVE",value:A})}).catch(A=>{i({type:"REJECT",error:A})}),()=>ba(x)},[c,d,i]),w.useEffect(()=>{if(a!==void 0){if(a===!1){f();return}h()}},[a]),a?g.jsx(qM,{className:"react-pdf__Page__structTree structTree",node:a}):null}const SC=qs;function a9(s){const e=cf();ft(e);const t={...e,...s},{_className:n,canvasBackground:i,devicePixelRatio:a=YG(),onRenderError:l,onRenderSuccess:c,page:d,renderForms:h,renderTextLayer:f,rotate:m,scale:y}=t,{canvasRef:x}=s;ft(d);const A=w.useRef(null);function S(){d&&c&&c(Ny(d,y))}function C(N){BM(N)||(hn(!1,N.toString()),l&&l(N))}const E=w.useMemo(()=>d.getViewport({scale:y*a,rotation:m}),[a,d,m,y]),_=w.useMemo(()=>d.getViewport({scale:y,rotation:m}),[d,m,y]);w.useEffect(function(){if(!d)return;d.cleanup();const{current:M}=A;if(!M)return;M.width=E.width,M.height=E.height,M.style.width=`${Math.floor(_.width)}px`,M.style.height=`${Math.floor(_.height)}px`,M.style.visibility="hidden";const j={annotationMode:h?SC.ENABLE_FORMS:SC.ENABLE,canvas:M,canvasContext:M.getContext("2d",{alpha:!1}),viewport:E};i&&(j.background=i);const D=d.render(j),O=D;return D.promise.then(()=>{M.style.visibility="",S()}).catch(C),()=>ba(O)},[i,d,h,E,_]);const R=w.useCallback(()=>{const{current:N}=A;N&&(N.width=0,N.height=0)},[]);return w.useEffect(()=>R,[R]),g.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:UM(x,A),style:{display:"block",userSelect:"none"},children:f?g.jsx(r9,{}):null})}function o9(s){return"str"in s}function l9(){const s=cf();ft(s);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:n,onRenderTextLayerError:i,onRenderTextLayerSuccess:a,page:l,pageIndex:c,pageNumber:d,rotate:h,scale:f}=s;ft(l);const[m,y]=Go(),{value:x,error:A}=m,S=w.useRef(null);hn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function C(){x&&n&&n(x)}function E(){A&&(hn(!1,A.toString()),t&&t(A))}w.useEffect(function(){y({type:"RESET"})},[l,y]),w.useEffect(function(){if(!l)return;const O=ou(l.getTextContent()),I=O;return O.promise.then(U=>{y({type:"RESOLVE",value:U})}).catch(U=>{y({type:"REJECT",error:U})}),()=>ba(I)},[l,y]),w.useEffect(()=>{if(x!==void 0){if(x===!1){E();return}C()}},[x]);const _=w.useCallback(()=>{a&&a()},[a]),R=w.useCallback(D=>{BM(D)||(hn(!1,D.toString()),i&&i(D))},[i]);function N(){const D=S.current;D&&D.classList.add("selecting")}function M(){const D=S.current;D&&D.classList.remove("selecting")}const j=w.useMemo(()=>l.getViewport({scale:f,rotation:h}),[l,h,f]);return w.useLayoutEffect(function(){if(!l||!x)return;const{current:O}=S;if(!O)return;O.innerHTML="";const I=l.streamTextContent({includeMarkedContent:!0}),U={container:O,textContentSource:I,viewport:j},$=new Fc(U),J=$;return $.render().then(()=>{const ie=document.createElement("div");ie.className="endOfContent",O.append(ie);const X=O.querySelectorAll('[role="presentation"]');if(e){let ae=0;x.items.forEach((P,F)=>{if(!o9(P))return;const B=X[ae];if(!B)return;const V=e({pageIndex:c,pageNumber:d,itemIndex:F,...P});B.innerHTML=V,ae+=P.str&&P.hasEOL?2:1})}_()}).catch(R),()=>ba(J)},[e,R,_,l,c,d,x,j]),g.jsx("div",{className:Ko("react-pdf__Page__textContent","textLayer"),onMouseUp:M,onMouseDown:N,ref:S})}const AC=1;function c9(s){const t={...zM(),...s},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:a,canvasRef:l,children:c,className:d,customRenderer:h,customTextRenderer:f,devicePixelRatio:m,error:y="Failed to load the page.",filterAnnotations:x,height:A,inputRef:S,loading:C="Loading page",noData:E="No page specified.",onGetAnnotationsError:_,onGetAnnotationsSuccess:R,onGetStructTreeError:N,onGetStructTreeSuccess:M,onGetTextError:j,onGetTextSuccess:D,onLoadError:O,onLoadSuccess:I,onRenderAnnotationLayerError:U,onRenderAnnotationLayerSuccess:$,onRenderError:J,onRenderSuccess:ie,onRenderTextLayerError:X,onRenderTextLayerSuccess:ae,pageIndex:P,pageNumber:F,pdf:B,registerPage:V,renderAnnotationLayer:de=!0,renderForms:L=!1,renderMode:q="canvas",renderTextLayer:te=!0,rotate:oe,scale:pe=AC,unregisterPage:se,width:Q,...ye}=t,[ve,Re]=Go(),{value:Y,error:ue}=ve,fe=w.useRef(null);ft(B);const me=Zr(F)?F-1:P??null,ee=F??(Zr(P)?P+1:null),he=oe??(Y?Y.rotate:null),_e=w.useMemo(()=>{if(!Y)return null;let mn=1;const ks=pe??AC;if(Q||A){const on=Y.getViewport({scale:1,rotation:he});Q?mn=Q/on.width:A&&(mn=A/on.height)}return ks*mn},[A,Y,he,pe,Q]);w.useEffect(function(){return()=>{Zr(me)&&i&&se&&se(me)}},[i,B,me,se]);function Oe(){if(I){if(!Y||!_e)return;I(Ny(Y,_e))}if(i&&V){if(!Zr(me)||!fe.current)return;V(me,fe.current)}}function Ye(){ue&&(hn(!1,ue.toString()),O&&O(ue))}w.useEffect(function(){Re({type:"RESET"})},[Re,B,me]),w.useEffect(function(){if(!B||!ee)return;const ks=ou(B.getPage(ee)),on=ks;return ks.promise.then(Pi=>{Re({type:"RESOLVE",value:Pi})}).catch(Pi=>{Re({type:"REJECT",error:Pi})}),()=>ba(on)},[Re,B,ee]),w.useEffect(()=>{if(Y!==void 0){if(Y===!1){Ye();return}Oe()}},[Y,_e]);const nt=w.useMemo(()=>Zr(me)&&ee&&Zr(he)&&Zr(_e)?{_className:n,canvasBackground:a,customTextRenderer:f,devicePixelRatio:m,filterAnnotations:x,onGetAnnotationsError:_,onGetAnnotationsSuccess:R,onGetStructTreeError:N,onGetStructTreeSuccess:M,onGetTextError:j,onGetTextSuccess:D,onRenderAnnotationLayerError:U,onRenderAnnotationLayerSuccess:$,onRenderError:J,onRenderSuccess:ie,onRenderTextLayerError:X,onRenderTextLayerSuccess:ae,page:Y,pageIndex:me,pageNumber:ee,renderForms:L,renderTextLayer:te,rotate:he,scale:_e}:null,[n,a,f,m,x,_,R,N,M,j,D,U,$,J,ie,X,ae,Y,me,ee,L,te,he,_e]),Fn=w.useMemo(()=>PM(ye,()=>Y&&(_e?Ny(Y,_e):void 0)),[ye,Y,_e]),Jn=`${me}@${_e}/${he}`;function Mr(){switch(q){case"custom":return ft(h),g.jsx(h,{},`${Jn}_custom`);case"none":return null;default:return g.jsx(a9,{canvasRef:l},`${Jn}_canvas`)}}function Gt(){return te?g.jsx(l9,{},`${Jn}_text`):null}function il(){return de?g.jsx(e9,{},`${Jn}_annotations`):null}function ni(){function mn(on){return!!on?.page}if(!mn(nt))throw new Error("page is undefined");const ks=typeof c=="function"?c(nt):c;return g.jsxs(VM.Provider,{value:nt,children:[Mr(),Gt(),il(),ks]})}function _a(){return ee?B===null||Y===void 0||Y===null?g.jsx(Bo,{type:"loading",children:typeof C=="function"?C():C}):B===!1||Y===!1?g.jsx(Bo,{type:"error",children:typeof y=="function"?y():y}):ni():g.jsx(Bo,{type:"no-data",children:typeof E=="function"?E():E})}return g.jsx("div",{className:Ko(n,d),"data-page-number":ee,ref:UM(S,fe),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${_e}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Fn,children:_a()})}WG();br.workerSrc="pdf.worker.mjs";br.workerSrc=`//unpkg.com/pdfjs-dist@${nb}/build/pdf.worker.min.mjs`;const CC=[{value:"top-left",label:"-"},{value:"top-center",label:"-"},{value:"top-right",label:"-"},{value:"center",label:""},{value:"bottom-left",label:"-"},{value:"bottom-center",label:"-"},{value:"bottom-right",label:"-"},{value:"custom",label:""}];function u9({documentName:s,pdfUrl:e,onClose:t,onStampApplied:n}){const[i,a]=w.useState([]),[l,c]=w.useState(null),[d,h]=w.useState(1),[f,m]=w.useState(""),[y,x]=w.useState("bottom-right"),A=.15,[S,C]=w.useState([]),[E,_]=w.useState(!0),[R,N]=w.useState(!1),[M,j]=w.useState({x:50,y:50}),[D,O]=w.useState(!1),[I,U]=w.useState({x:0,y:0}),[$,J]=w.useState(null),[ie,X]=w.useState({}),[ae,P]=w.useState({}),F=w.useRef(null),B=w.useRef(null),[V,de]=w.useState({width:0,height:0}),L=Y=>{if(!Y)return console.warn("getFullImageUrl: empty imageUrl"),"";if(Y.startsWith("http://")||Y.startsWith("https://"))return console.log("getFullImageUrl: already full URL:",Y),Y;if(Y.includes(window.location.origin))return console.log("getFullImageUrl: URL contains origin:",Y),Y;if(Y.startsWith("/api/")){const fe=`${window.location.origin}${Y}`;return console.log("getFullImageUrl: API endpoint:",fe),fe}const ue=`${window.location.origin}${Y.startsWith("/")?"":"/"}${Y}`;return console.log("getFullImageUrl: constructed URL:",ue,"from:",Y),ue};w.useEffect(()=>{async function Y(){try{const[ue,fe]=await Promise.all([ke.getStamps(),ke.getPdfInfo(s)]);console.log("Loaded stamps:",ue),ue.forEach((he,_e)=>{const Oe=he.stamp_image?L(he.stamp_image):"NO URL";console.log(`Stamp ${_e+1} (${he.name}):`,{title:he.title,stamp_image:he.stamp_image,fullUrl:Oe})}),a(ue),c(fe);const me={},ee={};if(await Promise.all(ue.map(async he=>{if(he.stamp_image){try{const Oe=await ke.getStampPreview(he.name,s);ee[he.name]=Oe}catch(Oe){console.warn(`Failed to load preview for stamp ${he.name}:`,Oe),ee[he.name]=L(he.stamp_image)}const _e=ee[he.name]||L(he.stamp_image);try{const Oe=new Image;await new Promise((Ye,nt)=>{Oe.onload=()=>{me[he.stamp_image]={width:Oe.width,height:Oe.height},Ye(null)},Oe.onerror=nt,Oe.src=_e})}catch(Oe){console.warn(`Failed to load image dimensions for stamp ${he.name}:`,Oe),me[he.stamp_image]={width:150,height:50}}}})),X(me),P(ee),ue.length>0){m(ue[0].name);const he=ue[0];if(console.log("Selected first stamp:",he),he.stamp_image){const _e=L(he.stamp_image);console.log("First stamp image URL:",{original:he.stamp_image,full:_e})}else console.warn("First stamp has no stamp_image!")}}catch(ue){console.error("Failed to load data:",ue)}finally{_(!1)}}Y()},[s]);const q=w.useCallback(({width:Y,height:ue})=>{de({width:Y,height:ue})},[]),te=()=>{if(!f)return;const Y=i.find(ee=>ee.name===f);if(!Y)return;let ue,fe;if(y==="custom")if($&&l?.pages[d-1]){const ee=l.pages[d-1],he=V.width/ee.width,_e=V.height/ee.height;ue=$.x/he,fe=(V.height-$.y)/_e}else M.x&&M.y&&(ue=M.x,fe=M.y);const me={id:`stamp-${Date.now()}`,stamp_name:f,stamp_title:Y.title,stamp_image:Y.stamp_image,page_number:d-1,position:y,scale:A,x:ue,y:fe};if(C([...S,me]),y==="custom"&&V.width&&V.height){const ee=l?.pages[d-1];if(ee){const he=V.width/2,_e=V.height/2;J({x:he,y:_e}),j({x:ee.width/2,y:ee.height/2})}}else J(null)},oe=Y=>{C(S.filter(ue=>ue.id!==Y))},pe=async()=>{if(S.length!==0){N(!0);try{const Y=S.map(fe=>({stamp_name:fe.stamp_name,page_number:fe.page_number,position:fe.position,x:fe.x,y:fe.y,scale:fe.scale}));console.log("Applying stamps:",Y);const ue=await ke.applyStamps(s,Y);if(console.log("Apply stamps result:",ue),ue&&ue.success)n();else{const fe=ue?.message||"   ";alert(fe),console.error("Failed to apply stamps:",ue)}}catch(Y){const ue=Y?.message||"    ";alert(ue),console.error("Failed to apply stamps:",Y)}finally{N(!1)}}},se=Y=>{if(y!=="custom"||!F.current||!f||Y.target.closest(".stamp-preview-draggable"))return;const ue=F.current.getBoundingClientRect(),fe=Y.clientX-ue.left,me=Y.clientY-ue.top;J({x:fe,y:me});const ee=l?.pages[d-1];if(ee){const he=V.width/ee.width,_e=V.height/ee.height,Oe=fe/he,Ye=(V.height-me)/_e;j({x:Oe,y:Ye})}else{const he=fe/ue.width*595,_e=(ue.height-me)/ue.height*842;j({x:he,y:_e})}},Q=Y=>{if(y!=="custom"||!f||!B.current)return;Y.preventDefault(),O(!0);const ue=B.current.getBoundingClientRect();U({x:Y.clientX-ue.left-ue.width/2,y:Y.clientY-ue.top-ue.height/2})};w.useEffect(()=>{if(y==="custom"&&f&&F.current&&V.width&&V.height){const Y=l?.pages[d-1];if(Y&&M.x&&M.y){const ue=V.width/Y.width,fe=V.height/Y.height,me=M.x*ue,ee=V.height-M.y*fe;J({x:me,y:ee})}else $||J({x:V.width/2,y:V.height/2})}else y!=="custom"&&J(null)},[y,f,M,d,V,l]),w.useEffect(()=>{if(y==="custom"&&f&&V.width&&V.height){$||J({x:V.width/2,y:V.height/2});const Y=l?.pages[d-1];Y&&(!M.x||!M.y)&&j({x:Y.width/2,y:Y.height/2})}},[y,f,V,l,d]),w.useEffect(()=>{if(D){const Y=fe=>{if(!F.current)return;const me=F.current.getBoundingClientRect(),ee=fe.clientX-me.left-I.x,he=fe.clientY-me.top-I.y,_e=Math.max(0,Math.min(ee,me.width)),Oe=Math.max(0,Math.min(he,me.height));J({x:_e,y:Oe});const Ye=l?.pages[d-1];if(Ye){const nt=V.width/Ye.width,Fn=V.height/Ye.height,Jn=_e/nt,Mr=(V.height-Oe)/Fn;j({x:Jn,y:Mr})}},ue=()=>{O(!1)};return window.addEventListener("mousemove",Y),window.addEventListener("mouseup",ue),()=>{window.removeEventListener("mousemove",Y),window.removeEventListener("mouseup",ue)}}},[D,I,V,l,d]);const ye=S.filter(Y=>Y.page_number===d-1),ve=Y=>{if(!V.width||!V.height)return{};const ue=l?.pages[Y.page_number];if(!ue)return{};const fe=V.width/ue.width,me=V.height/ue.height,ee=ie[Y.stamp_image]||{width:150,height:50},he=ee.width*Y.scale*fe,_e=ee.height*Y.scale*me,Oe=20*fe;let Ye=0,nt=0;switch(Y.position){case"top-left":Ye=Oe,nt=Oe;break;case"top-center":Ye=(V.width-he)/2,nt=Oe;break;case"top-right":Ye=V.width-he-Oe,nt=Oe;break;case"center":Ye=(V.width-he)/2,nt=(V.height-_e)/2;break;case"bottom-left":Ye=Oe,nt=V.height-_e-Oe;break;case"bottom-center":Ye=(V.width-he)/2,nt=V.height-_e-Oe;break;case"bottom-right":Ye=V.width-he-Oe,nt=V.height-_e-Oe;break;case"custom":if(Y.x!==void 0&&Y.y!==void 0){const Fn=Y.x*fe,Jn=V.height-Y.y*me;Ye=Fn-he/2,nt=Jn-_e/2}break}return{left:`${Ye}px`,top:`${nt}px`,width:`${he}px`,height:`${_e}px`}},Re=()=>{if(!f||!V.width||!V.height)return null;const Y=l?.pages[d-1];if(!Y)return null;const ue=V.width/Y.width,fe=V.height/Y.height,me=i.find(Fn=>Fn.name===f),ee=me?.stamp_image?ie[me.stamp_image]||{width:150,height:50}:{width:150,height:50},he=ee.width*A*ue,_e=ee.height*A*fe,Oe=20*ue;let Ye=0,nt=0;switch(y){case"top-left":Ye=Oe,nt=Oe;break;case"top-center":Ye=(V.width-he)/2,nt=Oe;break;case"top-right":Ye=V.width-he-Oe,nt=Oe;break;case"center":Ye=(V.width-he)/2,nt=(V.height-_e)/2;break;case"bottom-left":Ye=Oe,nt=V.height-_e-Oe;break;case"bottom-center":Ye=(V.width-he)/2,nt=V.height-_e-Oe;break;case"bottom-right":Ye=V.width-he-Oe,nt=V.height-_e-Oe;break;case"custom":return $?{left:`${$.x}px`,top:`${$.y}px`,width:`${he}px`,height:`${_e}px`,transform:"translate(-50%, -50%)"}:null}return{left:`${Ye}px`,top:`${nt}px`,width:`${he}px`,height:`${_e}px`}};return E?g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg p-8",children:[g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),g.jsx("p",{className:"mt-4 text-gray-600",children:"..."})]})}):g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] flex flex-col",children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[g.jsx("h2",{className:"text-xl font-semibold",children:"   PDF"}),g.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full",children:g.jsx(yr,{className:"w-5 h-5"})})]}),g.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[g.jsxs("div",{className:"flex-1 p-4 overflow-auto bg-gray-100",children:[g.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[g.jsx(Ue,{variant:"outline",size:"sm",onClick:()=>h(Y=>Math.max(1,Y-1)),disabled:d<=1,children:g.jsx(S5,{className:"w-4 h-4"})}),g.jsxs("span",{className:"text-sm",children:[" ",d,"  ",l?.page_count||1]}),g.jsx(Ue,{variant:"outline",size:"sm",onClick:()=>h(Y=>Math.min(l?.page_count||1,Y+1)),disabled:d>=(l?.page_count||1),children:g.jsx(K_,{className:"w-4 h-4"})})]}),g.jsxs("div",{ref:F,className:"relative inline-block mx-auto cursor-crosshair",onClick:se,style:{userSelect:"none"},children:[g.jsx(JG,{file:e,loading:g.jsx("div",{className:"p-8 text-center",children:" PDF..."}),children:g.jsx(c9,{pageNumber:d,width:500,onLoadSuccess:q,renderTextLayer:!1,renderAnnotationLayer:!1})}),ye.map(Y=>g.jsx("div",{className:"absolute pointer-events-none border-2 border-dashed border-blue-500 bg-blue-100/30 z-10",style:ve(Y),children:g.jsx("img",{src:ae[Y.stamp_name]||L(Y.stamp_image),alt:Y.stamp_title,className:"w-full h-full object-contain opacity-70"})},Y.id)),f&&Re()&&g.jsxs("div",{className:`absolute pointer-events-none border-2 border-dashed border-green-500 bg-green-100/30 z-20 ${y==="custom"?"stamp-preview-draggable cursor-move bg-yellow-50/90 rounded shadow-lg pointer-events-auto":""}`,style:Re(),ref:y==="custom"?B:void 0,onMouseDown:y==="custom"?Q:void 0,children:[y==="custom"&&g.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap pointer-events-none z-20",children:"   "}),(()=>{const Y=i.find(fe=>fe.name===f);if(!Y||!Y.stamp_image)return g.jsx("div",{className:"p-4 text-center text-gray-400 text-sm",children:"  "});const ue=ae[Y.name]||L(Y.stamp_image);return g.jsx("img",{src:ue,alt:"Preview",className:`w-full h-full object-contain ${y==="custom"?"":"opacity-70"}`,onError:fe=>{console.error("Failed to load preview stamp image:",ue);const me=fe.target;me.style.display="none";const ee=me.parentElement;if(ee&&!ee.querySelector(".error-placeholder")){const he=document.createElement("div");he.className="error-placeholder text-center text-gray-400 text-sm py-4",he.textContent="  ",ee.appendChild(he)}},onLoad:fe=>{const me=fe.target;me.style.display="block";const he=me.parentElement?.querySelector(".error-placeholder");he&&he.remove()}})})()]})]})]}),g.jsxs("div",{className:"w-80 p-4 border-l flex flex-col",children:[g.jsx("h3",{className:"font-medium mb-4",children:" "}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),g.jsxs(xn,{value:f,onValueChange:m,children:[g.jsx(un,{children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:i.map(Y=>g.jsx(Kt,{value:Y.name,children:Y.title},Y.name))})]}),f&&g.jsx("div",{className:"mt-2 p-2 border rounded bg-gray-50 min-h-[80px] flex items-center justify-center relative",children:(()=>{const Y=i.find(fe=>fe.name===f);if(!Y)return g.jsx("div",{className:"text-center text-gray-400 text-sm py-4",children:"  "});const ue=Y.stamp_image?ae[Y.name]||L(Y.stamp_image):"";return ue?g.jsxs(g.Fragment,{children:[g.jsx("img",{src:ue,alt:"Preview",className:"max-w-full max-h-20 mx-auto",onError:fe=>{console.error("Failed to load stamp image:",ue);const me=fe.target;me.style.display="none";const ee=me.parentElement;if(ee&&!ee.querySelector(".preview-placeholder")){const he=document.createElement("div");he.className="preview-placeholder text-center text-gray-400 text-sm py-4",he.textContent="  ",ee.appendChild(he)}},onLoad:fe=>{const me=fe.target,he=me.parentElement?.querySelector(".preview-placeholder");he&&he.remove(),me.style.display="block"}},ue),!ue&&g.jsx("div",{className:"text-center text-gray-400 text-sm py-4",children:"URL  "})]}):g.jsx("div",{className:"text-center text-gray-400 text-sm py-4",children:"  "})})()})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),g.jsxs(xn,{value:y,onValueChange:x,children:[g.jsx(un,{children:g.jsx(wn,{})}),g.jsx(dn,{children:CC.map(Y=>g.jsx(Kt,{value:Y.value,children:Y.label},Y.value))})]}),y==="custom"&&g.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[g.jsx(r4,{className:"w-3 h-3 inline mr-1"}),"  PDF      "]})]}),g.jsx("div",{className:"mb-4",children:g.jsxs("label",{className:"block text-sm font-medium mb-1",children:[": ",A.toFixed(1),"x (",Math.round(A*100),"%   )"]})}),g.jsxs("div",{className:"mb-4",children:[g.jsxs(Ue,{onClick:te,disabled:!f||y==="custom"&&!$,className:"w-full",children:[g.jsx(Z_,{className:"w-4 h-4 mr-2"})," "]}),y==="custom"&&!$&&g.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"     PDF"})]}),g.jsxs("div",{className:"flex-1 overflow-auto",children:[g.jsxs("h4",{className:"font-medium mb-2 text-sm",children:["  (",S.length,")"]}),S.length===0?g.jsx("p",{className:"text-sm text-gray-500",children:"  "}):g.jsx("div",{className:"space-y-2",children:S.map(Y=>g.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm",children:[g.jsxs("div",{children:[g.jsx("div",{className:"font-medium",children:Y.stamp_title}),g.jsxs("div",{className:"text-xs text-gray-500",children:[". ",Y.page_number+1," | ",CC.find(ue=>ue.value===Y.position)?.label]})]}),g.jsx("button",{onClick:()=>oe(Y.id),className:"p-1 hover:bg-red-100 rounded text-red-600",children:g.jsx(J_,{className:"w-4 h-4"})})]},Y.id))})]})]})]}),g.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t",children:[g.jsx(Ue,{variant:"outline",onClick:t,children:""}),g.jsx(Ue,{onClick:pe,disabled:S.length===0||R,children:R?"...":" "})]})]})})}function d9({document:s,loading:e}){const{t}=ei(),[n,i]=w.useState("document"),[a,l]=w.useState(null),[c,d]=w.useState(!1),[h,f]=w.useState(0),[m,y]=w.useState(!0);w.useEffect(()=>{(async()=>{if(!s){l(null),y(!1);return}try{y(!0);const M=await ke.getDocument(s.name);l(M)}catch(M){console.error("Failed to load full document:",M),l(s),y(!1)}})()},[s?.name,s?.modified,s?.status,s?.director_approved,s?.director_rejected,s?.signatures?.length]),w.useEffect(()=>{a?.main_document&&y(!0)},[a?.main_document,h]);const x=()=>{if(!a)return[];const N=[];return a.executor&&N.push(a.executor),a.co_executors&&a.co_executors.forEach(M=>{M.user&&!N.includes(M.user)&&N.push(M.user)}),N},A=()=>!a||!a.signatures?[]:a.signatures.map(N=>N.user),S=()=>{const N=x(),M=A();if(N.length===0)return{signed:0,total:0,percentage:0};const j=M.length,D=N.length,O=j/D*100;return{signed:j,total:D,percentage:O}},C=()=>{if(!a)return[];const N=[];if(N.push({label:" ",status:"completed",date:a.creation,icon:gs}),a.reception_user&&a.reception_decision_date?N.push({label:"  ",status:"completed",date:a.reception_decision_date,icon:_o}):N.push({label:"  ",status:"pending",date:void 0,icon:_o}),a.reception_user&&a.reception_decision_date)if(a.director_approved)N.push({label:" ",status:"completed",date:a.director_decision_date||void 0,icon:Mo});else{if(a.director_rejected)return N.push({label:" ",status:"rejected",date:a.director_decision_date||void 0,icon:ny}),N;N.push({label:"   ",status:"pending",date:void 0,icon:p4})}const M=x();if(M.length>0&&(a.director_approved||a.reception_user)){const j=S();a.status===""?N.push({label:`  (${j.signed}/${j.total})`,status:"completed",date:a.modified,icon:ea}):a.status===" "?N.push({label:`  (${j.signed}/${j.total})`,status:"pending",date:void 0,icon:ea}):N.push({label:`  (0/${M.length})`,status:"pending",date:void 0,icon:ea})}return a.status===""?N.push({label:"",status:"completed",date:a.modified,icon:ig}):N.push({label:"",status:"pending",date:void 0,icon:ig}),N};if(e)return g.jsx("div",{className:"flex items-center justify-center h-full",children:g.jsx("div",{className:"text-muted-foreground",children:t("documentContent.loading")})});if(!s)return g.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[g.jsx(gs,{className:"w-16 h-16 text-muted-foreground mb-4"}),g.jsx("h2",{className:"text-xl font-semibold mb-2",children:t("documentContent.noDocumentSelected")}),g.jsx("p",{className:"text-muted-foreground",children:t("documentContent.selectDocumentMessage")})]});const E=a||s,_=C(),R=S();return g.jsxs("div",{className:"h-full flex flex-col",children:[g.jsx("div",{className:"border-b px-6 pt-2",children:g.jsxs("div",{className:"flex gap-6",children:[g.jsx("button",{onClick:()=>i("document"),className:`relative pb-3 px-1 text-sm font-medium transition-colors ${n==="document"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"}`,children:t("documentContent.tabs.document")}),g.jsxs("button",{onClick:()=>i("signatures"),className:`relative pb-3 px-1 text-sm font-medium transition-colors ${n==="signatures"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"}`,children:[t("documentContent.tabs.signatures")," (",R.signed,"/",R.total,")"]}),g.jsx("button",{onClick:()=>i("history"),className:`relative pb-3 px-1 text-sm font-medium transition-colors ${n==="history"?"text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground"}`,children:t("documentContent.tabs.history")})]})}),g.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar-blue",children:[n==="document"&&g.jsxs(g.Fragment,{children:[E.main_document?g.jsxs("div",{className:"bg-white border rounded-lg shadow-sm mb-6",children:[g.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[g.jsx("h3",{className:"text-sm font-medium",children:" "}),E.main_document.toLowerCase().endsWith(".pdf")&&g.jsxs(Ue,{variant:"outline",size:"sm",onClick:()=>d(!0),children:[g.jsx(v4,{className:"w-4 h-4 mr-2"})," "]})]}),g.jsxs("div",{className:"w-full relative bg-gray-50",style:{height:"800px"},children:[g.jsx(Nc,{children:m&&g.jsx(vr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"absolute inset-0 z-10 flex flex-col items-center justify-center gap-4 overflow-hidden",children:g.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center gap-4 p-8",children:[g.jsx("div",{className:"w-full max-w-2xl bg-white rounded shadow-lg animate-pulse",style:{height:"280px"},children:g.jsxs("div",{className:"h-full flex flex-col p-6 gap-4",children:[g.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-full"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),g.jsxs("div",{className:"flex-1 flex flex-col gap-3 mt-4",children:[g.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-4/5"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]})]})}),g.jsx("div",{className:"w-full max-w-2xl bg-white rounded shadow-lg animate-pulse opacity-60",style:{height:"280px",marginTop:"-20px"},children:g.jsxs("div",{className:"h-full flex flex-col p-6 gap-4",children:[g.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3"}),g.jsx("div",{className:"h-4 bg-gray-200 rounded w-4/5"}),g.jsxs("div",{className:"flex-1 flex flex-col gap-3 mt-4",children:[g.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"}),g.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]})]})})]})})}),g.jsx("iframe",{src:`${E.main_document}?v=${h}#toolbar=0`,className:`w-full h-full border-0 ${m?"opacity-0":"opacity-100"} transition-opacity duration-300`,title:"Document Preview",onLoad:()=>{setTimeout(()=>{y(!1)},300)},onError:()=>{y(!1)}},`pdf-${h}-${E.main_document}`)]})]}):g.jsxs("div",{className:"bg-white border rounded-lg shadow-sm mb-6 p-12 text-center text-muted-foreground",children:[g.jsx(gs,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),g.jsx("p",{children:"  "})]}),E.attachments&&E.attachments.length>0&&g.jsxs("div",{className:"bg-white border rounded-lg shadow-sm mb-6",children:[g.jsx("div",{className:"p-4 border-b",children:g.jsx("h3",{className:"text-sm font-medium",children:""})}),g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"w-full",children:[g.jsx("thead",{className:"bg-muted/50",children:g.jsxs("tr",{children:[g.jsx("th",{className:"text-left p-3 text-xs font-medium text-muted-foreground",children:""}),g.jsx("th",{className:"text-left p-3 text-xs font-medium text-muted-foreground",children:""}),g.jsx("th",{className:"text-right p-3 text-xs font-medium text-muted-foreground",children:""})]})}),g.jsx("tbody",{children:E.attachments.map((N,M)=>{const j=N.file_size?`${(N.file_size/1024).toFixed(2)} KB`:"-";return g.jsxs("tr",{className:"border-t hover:bg-muted/30",children:[g.jsx("td",{className:"p-3",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(gs,{className:"w-4 h-4 text-muted-foreground"}),g.jsx("span",{className:"text-sm",children:N.file_name||` ${M+1}`})]})}),g.jsx("td",{className:"p-3 text-sm text-muted-foreground",children:j}),g.jsx("td",{className:"p-3 text-right",children:g.jsx("a",{href:N.attachment,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline text-sm",children:""})})]},M)})})]})})]}),g.jsx("div",{className:"mt-8 border-t pt-6",children:g.jsx(D$,{doctype:"EDO Document",docname:E.name,refreshTrigger:E.modified?new Date(E.modified).getTime():void 0})})]}),n==="signatures"&&g.jsxs("div",{className:"space-y-6",children:[E.status!==""&&E.status_name!==""&&g.jsxs(ua,{className:"border-2 shadow-md",children:[g.jsx(jo,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 border-b py-3",children:g.jsxs(Oo,{className:"text-sm flex items-center gap-2",children:[g.jsx(ig,{className:"w-4 h-4 text-blue-600"})," "]})}),g.jsx(da,{className:"pt-4 pb-4",children:g.jsx("div",{className:"space-y-4",children:_.map((N,M)=>{const j=N.icon;return g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsxs("div",{className:"flex flex-col items-center",children:[g.jsx("div",{className:`relative p-1.5 rounded-full transition-all ${N.status==="completed"?"bg-green-100 dark:bg-green-900/30 ring-2 ring-green-500":N.status==="rejected"?"bg-red-100 dark:bg-red-900/30 ring-2 ring-red-500":"bg-gray-100 dark:bg-gray-800 ring-2 ring-gray-300 dark:ring-gray-700"}`,children:g.jsx(j,{className:`w-4 h-4 ${N.status==="completed"?"text-green-600 dark:text-green-400":N.status==="rejected"?"text-red-600 dark:text-red-400":"text-gray-400"}`})}),M<_.length-1&&g.jsx("div",{className:`w-0.5 h-8 mt-1 transition-all ${N.status==="completed"?"bg-gradient-to-b from-green-500 to-green-300":N.status==="rejected"?"bg-gradient-to-b from-red-500 to-red-300":"bg-gray-300 dark:bg-gray-700"}`})]}),g.jsxs("div",{className:"flex-1 pt-0.5",children:[g.jsx("p",{className:`font-medium text-sm transition-colors ${N.status==="completed"?"text-green-700 dark:text-green-400":N.status==="rejected"?"text-red-700 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:N.label}),N.date&&g.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5 flex items-center gap-1",children:[g.jsx(_o,{className:"w-3 h-3"}),new Date(N.date).toLocaleString("ru-RU")]})]})]},M)})})})]}),g.jsxs(ua,{className:"border-2 shadow-lg",children:[g.jsx(jo,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 border-b",children:g.jsxs(Oo,{className:"text-base flex items-center gap-2",children:[g.jsx(ea,{className:"w-5 h-5 text-blue-600"})," "]})}),g.jsxs(da,{className:"pt-6",children:[R.total>0?g.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 rounded-lg border-2 border-blue-200 dark:border-blue-800",children:[g.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[g.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:" "}),g.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:[R.signed,"  ",R.total]})]}),g.jsx(KN,{value:R.percentage,className:"h-2"})]}):g.jsx("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-800",children:g.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"     "})}),g.jsx("div",{className:"space-y-3",children:x().length>0?x().map(N=>{const M=E.signatures?.find(D=>D.user===N),j=E.executor===N?{name:E.executor_full_name||N,image:E.executor_image}:E.co_executors?.find(D=>D.user===N)?{name:E.co_executors.find(D=>D.user===N)?.user_full_name||N,image:E.co_executors.find(D=>D.user===N)?.user_image}:{name:N,image:void 0};return g.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-lg border-2 transition-all ${M?"bg-green-50 dark:bg-green-950/30 border-green-200 dark:border-green-800 shadow-sm":"bg-gray-50 dark:bg-gray-900 border-gray-200 dark:border-gray-800"}`,children:[j.image?g.jsx("img",{src:j.image,alt:j.name,className:"w-12 h-12 rounded-full ring-2 ring-offset-2 ring-blue-500"}):g.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center text-white font-bold text-base ring-2 ring-offset-2 ring-blue-500",children:j.name.charAt(0).toUpperCase()}),g.jsxs("div",{className:"flex-1",children:[g.jsx("p",{className:"font-semibold text-sm text-gray-800 dark:text-gray-200",children:j.name}),M?g.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:[g.jsxs("p",{className:"flex items-center gap-1",children:[g.jsx(Mo,{className:"w-3 h-3 text-green-600"}),": ",M.signed_at?new Date(M.signed_at).toLocaleString("ru-RU"):""]}),M.comment&&g.jsx("p",{className:"mt-1 p-2 bg-white dark:bg-gray-800 rounded text-gray-700 dark:text-gray-300 text-xs",children:M.comment})]}):g.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:" "})]}),M?g.jsx("div",{className:"p-1.5 bg-green-100 dark:bg-green-900/50 rounded-full",children:g.jsx(Mo,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}):g.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center",children:g.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-300 dark:bg-gray-600"})})]},N)}):g.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[g.jsx(ea,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),g.jsx("p",{className:"text-sm",children:"  "})]})})]})]})]}),n==="history"&&g.jsxs(ua,{className:"border-2 shadow-lg",children:[g.jsx(jo,{className:"bg-gradient-to-r from-slate-50 to-gray-50 dark:from-slate-900 dark:to-gray-900 border-b",children:g.jsxs(Oo,{className:"text-base flex items-center gap-2",children:[g.jsx(G5,{className:"w-5 h-5 text-gray-600"})," "]})}),g.jsx(da,{className:"pt-6",children:g.jsx("div",{className:"space-y-4",children:_.map((N,M)=>{const j=N.icon;return g.jsxs("div",{className:"flex items-start gap-3 pb-4 border-b last:border-0 last:pb-0",children:[g.jsx("div",{className:`p-1.5 rounded-full ${N.status==="completed"?"bg-green-100 dark:bg-green-900/30":N.status==="rejected"?"bg-red-100 dark:bg-red-900/30":"bg-gray-100 dark:bg-gray-800"}`,children:g.jsx(j,{className:`w-4 h-4 ${N.status==="completed"?"text-green-600 dark:text-green-400":N.status==="rejected"?"text-red-600 dark:text-red-400":"text-gray-400"}`})}),g.jsxs("div",{className:"flex-1",children:[g.jsx("p",{className:`font-medium text-sm ${N.status==="completed"?"text-green-700 dark:text-green-400":N.status==="rejected"?"text-red-700 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:N.label}),N.date&&g.jsxs("p",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-1",children:[g.jsx(_o,{className:"w-3 h-3"}),new Date(N.date).toLocaleString("ru-RU")]})]})]},M)})})})]})]}),c&&E.main_document&&g.jsx(u9,{documentName:E.name,pdfUrl:E.main_document,onClose:()=>d(!1),onStampApplied:async()=>{if(d(!1),s)try{await new Promise(M=>setTimeout(M,500));const N=await ke.getDocument(s.name);l(N),f(M=>M+1),y(!0),console.log("Document reloaded after stamp application:",N),console.log("New main_document:",N.main_document)}catch(N){console.error("Failed to reload document after stamp application:",N),alert(" ,     .  .")}}})]})}function h9({document:s,canEdit:e=!1,onEdit:t,onDocumentUpdate:n}){const{t:i,i18n:a}=ei(),[l,c]=w.useState(!1),[d,h]=w.useState(!1),[f,m]=w.useState(!1),[y,x]=w.useState(!1),[A,S]=w.useState(!1),[C,E]=w.useState(!1),[_,R]=w.useState(!1),[N,M]=w.useState(!1),[j,D]=w.useState(""),[O,I]=w.useState(!1),[U,$]=w.useState(""),[J,ie]=w.useState(""),[X,ae]=w.useState(!1),[P,F]=w.useState(""),[B,V]=w.useState([]),[de,L]=w.useState([]),[q,te]=w.useState([]);w.useEffect(()=>{s&&oe()},[s?.name,s?.status,s?.director_approved,s?.director_rejected]);const oe=async()=>{if(s)try{const[ee,he,_e]=await Promise.all([ke.canDirectorApprove(),ke.canExecutorSign(s.name),ke.canReceptionSubmit()]);if(c(ee),h(he),m(_e),_e&&s.status===""||ee&&s.status===" "){const[Oe,Ye]=await Promise.all([ke.getResolutions(),ke.getUsers()]);L(Oe),te(Ye)}}catch(ee){console.error("Failed to check permissions:",ee)}},pe=async()=>{if(s)try{if(I(!0),await ke.directorApproveDocument(s.name,j),x(!1),D(""),n){const ee=await ke.getDocument(s.name);n(ee)}await oe()}catch(ee){alert(ee instanceof Error?ee.message:"  ")}finally{I(!1)}},se=async()=>{if(s)try{if(I(!0),await ke.directorRejectDocument(s.name,j),S(!1),D(""),n){const ee=await ke.getDocument(s.name);n(ee)}await oe()}catch(ee){alert(ee instanceof Error?ee.message:"  ")}finally{I(!1)}},Q=async()=>{if(s)try{if(I(!0),await ke.executorSignDocument(s.name,j),E(!1),D(""),n){const ee=await ke.getDocument(s.name);n(ee)}await oe()}catch(ee){alert(ee instanceof Error?ee.message:"  ")}finally{I(!1)}},ye=async()=>{if(s){if(!X&&!U){alert("     ");return}if(X&&!J.trim()){alert("  ");return}if(!P){alert(" ");return}try{if(I(!0),await ke.receptionSubmitToDirector(s.name,X?void 0:U,X?J:void 0,P,B),R(!1),$(""),ie(""),ae(!1),F(""),V([]),n){const ee=await ke.getDocument(s.name);n(ee)}await oe()}catch(ee){alert(ee instanceof Error?ee.message:"   ")}finally{I(!1)}}},ve=async()=>{if(s){if(!X&&!U){alert("     ");return}if(X&&!J.trim()){alert("  ");return}if(!P){alert(" ");return}try{if(I(!0),await ke.updateDocument(s.name,{resolution:X?void 0:U,resolution_text:X?J:void 0,executor:P,co_executors:B.map(ee=>({user:ee}))}),M(!1),$(""),ie(""),ae(!1),F(""),V([]),n){const ee=await ke.getDocument(s.name);n(ee)}}catch(ee){alert(ee instanceof Error?ee.message:"     ")}finally{I(!1)}}};if(!s)return null;const Re=ee=>ee===i("documents.status.signed")||ee===""||ee===""||ee===""?"text-green-600":ee===i("documents.status.pending")||ee===" "||ee===" "?"text-orange-500":ee===i("documents.status.archived")||ee===""?"text-gray-500":ee===""?"text-red-600":"text-gray-500",Y=ee=>{const he=a.language==="uz"?"uz-UZ":a.language==="en"?"en-US":"ru-RU";return new Date(ee).toLocaleDateString(he)},ue=s.status==="",fe=s.status===" ",me=s.status===" ";return g.jsxs("div",{className:"h-full overflow-y-auto custom-scrollbar",children:[g.jsxs("div",{className:"p-4 space-y-6",children:[g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:i("documentMetadata.documentInfo")}),g.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-3",children:[g.jsxs("div",{className:"col-span-2",children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:i("documentMetadata.documentNumber")}),g.jsx("p",{className:"font-medium",children:s.name})]}),s.title&&g.jsxs("div",{className:"col-span-2",children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:""}),g.jsx("p",{className:"font-medium",children:s.title})]}),s.incoming_number&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:" "}),g.jsx("p",{className:"font-medium",children:s.incoming_number})]}),s.incoming_date&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:" "}),g.jsx("p",{className:"font-medium",children:Y(s.incoming_date)})]}),s.outgoing_number&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:" "}),g.jsx("p",{className:"font-medium",children:s.outgoing_number})]}),s.outgoing_date&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:" "}),g.jsx("p",{className:"font-medium",children:Y(s.outgoing_date)})]}),s.document_type&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:i("documentMetadata.documentType")}),g.jsx("p",{className:"font-medium",children:s.document_type_name||s.document_type})]}),s.correspondent&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:""}),g.jsx("p",{className:"font-medium",children:s.correspondent_name||s.correspondent})]}),s.priority&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:""}),g.jsx("p",{className:"font-medium",children:s.priority_name||s.priority})]}),g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:i("documentMetadata.status")}),g.jsx("p",{className:`font-medium ${Re(s.status)}`,children:s.status})]}),s.classification&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:""}),g.jsx("p",{className:"font-medium",children:s.classification_name||s.classification})]}),s.delivery_method&&g.jsxs("div",{children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:" "}),g.jsx("p",{className:"font-medium",children:s.delivery_method_name||s.delivery_method})]}),s.creation&&g.jsxs("div",{className:"col-span-2",children:[g.jsx("p",{className:"text-xs text-muted-foreground",children:" "}),g.jsx("p",{className:"font-medium",children:Y(s.creation)})]})]})]}),(s.resolution_name||s.resolution_text||s.resolution_text_from_link)&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:""}),g.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-950/30 dark:to-pink-950/30 rounded-lg border border-purple-200 dark:border-purple-800 p-4 space-y-4",children:[(s.resolution_name||s.resolution_text||s.resolution_text_from_link)&&g.jsxs("div",{className:"space-y-2",children:[s.resolution_name&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(gs,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),g.jsx("p",{className:"text-sm font-semibold text-purple-900 dark:text-purple-100",children:s.resolution_name})]}),(s.resolution_text||s.resolution_text_from_link)&&g.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 pl-6 whitespace-pre-wrap",children:s.resolution_text_from_link||s.resolution_text})]}),(s.executor||s.co_executors&&s.co_executors.length>0)&&g.jsxs("div",{className:"pt-3 border-t border-purple-200 dark:border-purple-800 space-y-3",children:[s.executor&&g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"flex-shrink-0",children:s.executor_image?g.jsx("img",{src:s.executor_image,alt:"",className:"w-10 h-10 rounded-full object-cover border-2 border-purple-300 dark:border-purple-700"}):g.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center border-2 border-purple-300 dark:border-purple-700",children:g.jsx(lc,{className:"w-5 h-5 text-white"})})}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s.executor_full_name||s.executor}),g.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:""})]})]}),s.co_executors&&s.co_executors.length>0&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{className:"text-xs font-medium text-purple-700 dark:text-purple-300 flex items-center gap-1",children:[g.jsx(ea,{className:"w-3 h-3"})," (",s.co_executors.length,")"]}),g.jsx("div",{className:"space-y-2 pl-2",children:s.co_executors.map((ee,he)=>g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"flex-shrink-0",children:ee.user_image?g.jsx("img",{src:ee.user_image,alt:"",className:"w-8 h-8 rounded-full object-cover border border-purple-200 dark:border-purple-800"}):g.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-400 dark:bg-purple-600 flex items-center justify-center border border-purple-200 dark:border-purple-800",children:g.jsx(lc,{className:"w-4 h-4 text-white"})})}),g.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:ee.user_full_name||ee.user})]},he))})]})]})]})]}),!(s.resolution_name||s.resolution_text||s.resolution_text_from_link)&&(s.executor||s.co_executors&&s.co_executors.length>0)&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:""}),g.jsxs("div",{className:"space-y-3",children:[s.executor&&g.jsxs("div",{className:"flex items-center gap-3 p-2 bg-blue-50 rounded-lg",children:[s.executor_image?g.jsx("img",{src:s.executor_image,alt:"",className:"w-8 h-8 rounded-full object-cover"}):g.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center",children:g.jsx(lc,{className:"w-4 h-4 text-white"})}),g.jsxs("div",{children:[g.jsx("p",{className:"font-medium text-sm",children:s.executor_full_name||s.executor}),g.jsx("p",{className:"text-xs text-blue-600",children:""})]})]}),s.co_executors&&s.co_executors.length>0&&g.jsxs("div",{className:"space-y-2",children:[g.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[g.jsx(ea,{className:"w-3 h-3"})," (",s.co_executors.length,")"]}),s.co_executors.map((ee,he)=>g.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg",children:[ee.user_image?g.jsx("img",{src:ee.user_image,alt:"",className:"w-7 h-7 rounded-full object-cover"}):g.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-400 flex items-center justify-center",children:g.jsx(lc,{className:"w-3 h-3 text-white"})}),g.jsx("p",{className:"text-sm",children:ee.user_full_name||ee.user})]},he))]})]})]}),s.brief_content&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:" "}),g.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.brief_content})]}),s.director_comment&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:" "}),g.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950/30 rounded-lg border border-blue-200 dark:border-blue-800",children:g.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.director_comment})})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:i("documentMetadata.actions")}),g.jsxs("div",{className:"space-y-2",children:[f&&ue&&g.jsxs(Ue,{className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white shadow-md",size:"sm",onClick:()=>R(!0),children:[g.jsx(c1,{className:"w-4 h-4 mr-2"}),"  "]}),l&&me&&g.jsxs(g.Fragment,{children:[g.jsxs(Ue,{className:"w-full bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white shadow-md",size:"sm",onClick:()=>{s.resolution?($(s.resolution),ae(!1)):s.resolution_text&&(ie(s.resolution_text),ae(!0)),F(s.executor||""),V(s.co_executors?.map(ee=>ee.user).filter(Boolean)||[]),M(!0)},children:[g.jsx(rg,{className:"w-4 h-4 mr-2"}),"   "]}),g.jsxs(Ue,{className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white shadow-md",size:"sm",onClick:()=>x(!0),children:[g.jsx(Mo,{className:"w-4 h-4 mr-2"}),""]}),g.jsxs(Ue,{variant:"destructive",className:"w-full bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 shadow-md",size:"sm",onClick:()=>S(!0),children:[g.jsx(ny,{className:"w-4 h-4 mr-2"}),""]})]}),d&&fe&&g.jsxs(Ue,{className:"w-full bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 text-white shadow-md",size:"sm",onClick:()=>E(!0),children:[g.jsx(u1,{className:"w-4 h-4 mr-2"})," "]}),e&&g.jsxs(Ue,{className:"w-full bg-blue-600 hover:bg-blue-700",size:"sm",onClick:t,children:[g.jsx(rg,{className:"w-4 h-4"}),""]}),g.jsxs(Ue,{variant:"outline",className:"w-full",size:"sm",children:[g.jsx(P5,{className:"w-4 h-4"}),i("documentMetadata.download")]}),g.jsxs(Ue,{variant:"outline",className:"w-full",size:"sm",children:[g.jsx(c4,{className:"w-4 h-4"}),i("documentMetadata.print")]})]})]})]}),g.jsx(ta,{open:y,onOpenChange:x,children:g.jsxs(hr,{className:"sm:max-w-[500px]",children:[g.jsxs(fr,{children:[g.jsxs(pr,{className:"flex items-center gap-2 text-xl",children:[g.jsx(Mo,{className:"w-6 h-6 text-green-600"})," "]}),g.jsx(bo,{className:"text-base pt-2",children:" ,     ?      ."})]}),g.jsx("div",{className:"space-y-4 py-4",children:g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium mb-2 block",children:" ()"}),g.jsx(dr,{value:j,onChange:ee=>D(ee.target.value),placeholder:" ...",rows:4,className:"resize-none"})]})}),g.jsxs(vo,{children:[g.jsx(Ue,{variant:"outline",onClick:()=>x(!1),children:""}),g.jsx(Ue,{onClick:pe,disabled:O,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700",children:O?"...":""})]})]})}),g.jsx(ta,{open:A,onOpenChange:S,children:g.jsxs(hr,{className:"sm:max-w-[500px]",children:[g.jsxs(fr,{children:[g.jsxs(pr,{className:"flex items-center gap-2 text-xl",children:[g.jsx(ny,{className:"w-6 h-6 text-red-600"}),"  "]}),g.jsx(bo,{className:"text-base pt-2",children:" ,       ?       ."})]}),g.jsx("div",{className:"space-y-4 py-4",children:g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium mb-2 block",children:" "}),g.jsx(dr,{value:j,onChange:ee=>D(ee.target.value),placeholder:"  ...",rows:4,className:"resize-none"})]})}),g.jsxs(vo,{children:[g.jsx(Ue,{variant:"outline",onClick:()=>S(!1),children:""}),g.jsx(Ue,{variant:"destructive",onClick:se,disabled:O,className:"bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700",children:O?"...":""})]})]})}),g.jsx(ta,{open:C,onOpenChange:E,children:g.jsxs(hr,{className:"sm:max-w-[500px]",children:[g.jsxs(fr,{children:[g.jsxs(pr,{className:"flex items-center gap-2 text-xl",children:[g.jsx(u1,{className:"w-6 h-6 text-blue-600"})," "]}),g.jsx(bo,{className:"text-base pt-2",children:" ,  ,          ."})]}),g.jsx("div",{className:"space-y-4 py-4",children:g.jsxs("div",{children:[g.jsx("label",{className:"text-sm font-medium mb-2 block",children:" ()"}),g.jsx(dr,{value:j,onChange:ee=>D(ee.target.value),placeholder:" ...",rows:4,className:"resize-none"})]})}),g.jsxs(vo,{children:[g.jsx(Ue,{variant:"outline",onClick:()=>E(!1),children:""}),g.jsx(Ue,{onClick:Q,disabled:O,className:"bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700",children:O?"...":""})]})]})}),g.jsx(ta,{open:N,onOpenChange:M,children:g.jsxs(hr,{className:"sm:max-w-[600px]",children:[g.jsxs(fr,{children:[g.jsxs(pr,{className:"flex items-center gap-2 text-xl",children:[g.jsx(rg,{className:"w-6 h-6 text-purple-600"}),"   "]}),g.jsx(bo,{className:"text-base pt-2",children:"       ."})]}),g.jsxs("div",{className:"space-y-4 py-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("input",{type:"checkbox",id:"use_custom_resolution_director",checked:X,onChange:ee=>{ae(ee.target.checked),ee.target.checked?$(""):ie("")},className:"w-4 h-4"}),g.jsx(tt,{htmlFor:"use_custom_resolution_director",className:"cursor-pointer",children:"  "})]}),X?g.jsxs(g.Fragment,{children:[g.jsx(tt,{htmlFor:"resolution_text_director",children:"  *"}),g.jsx(dr,{id:"resolution_text_director",value:J,onChange:ee=>ie(ee.target.value),placeholder:"  ...",rows:4,className:"resize-none"})]}):g.jsxs(g.Fragment,{children:[g.jsx(tt,{htmlFor:"resolution_director",children:" *"}),g.jsxs(xn,{value:U,onValueChange:$,children:[g.jsx(un,{children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:de.map(ee=>g.jsx(Kt,{value:ee.name,children:ee.resolution_name},ee.name))})]})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{children:" *"}),g.jsx(gy,{users:q,value:P,onChange:F,placeholder:" ..."})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{children:""}),g.jsx(yy,{users:q,value:B,onChange:V,excludeUsers:P?[P]:[],placeholder:" ..."})]})]}),g.jsxs(vo,{children:[g.jsx(Ue,{variant:"outline",onClick:()=>M(!1),children:""}),g.jsx(Ue,{onClick:ve,disabled:O||!X&&!U||X&&!J.trim()||!P,className:"bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700",children:O?"...":""})]})]})}),g.jsx(ta,{open:_,onOpenChange:R,children:g.jsxs(hr,{className:"sm:max-w-[600px]",children:[g.jsxs(fr,{children:[g.jsxs(pr,{className:"flex items-center gap-2 text-xl",children:[g.jsx(c1,{className:"w-6 h-6 text-purple-600"}),"  "]}),g.jsx(bo,{className:"text-base pt-2",children:"        ."})]}),g.jsxs("div",{className:"space-y-4 py-4",children:[g.jsxs("div",{className:"space-y-2",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("input",{type:"checkbox",id:"use_custom_resolution",checked:X,onChange:ee=>{ae(ee.target.checked),ee.target.checked?$(""):ie("")},className:"w-4 h-4"}),g.jsx(tt,{htmlFor:"use_custom_resolution",className:"cursor-pointer",children:"  "})]}),X?g.jsxs(g.Fragment,{children:[g.jsx(tt,{htmlFor:"resolution_text",children:"  *"}),g.jsx(dr,{id:"resolution_text",value:J,onChange:ee=>ie(ee.target.value),placeholder:"  ...",rows:4,className:"resize-none"})]}):g.jsxs(g.Fragment,{children:[g.jsx(tt,{htmlFor:"resolution",children:" *"}),g.jsxs(xn,{value:U,onValueChange:$,children:[g.jsx(un,{children:g.jsx(wn,{placeholder:" "})}),g.jsx(dn,{children:de.map(ee=>g.jsx(Kt,{value:ee.name,children:ee.resolution_name},ee.name))})]})]})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{children:" *"}),g.jsx(gy,{users:q,value:P,onChange:F,placeholder:" ..."})]}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(tt,{children:""}),g.jsx(yy,{users:q,value:B,onChange:V,excludeUsers:P?[P]:[],placeholder:" ..."})]})]}),g.jsxs(vo,{children:[g.jsx(Ue,{variant:"outline",onClick:()=>R(!1),children:""}),g.jsx(Ue,{onClick:ye,disabled:O||!X&&!U||X&&!J.trim()||!P,className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700",children:O?"...":" "})]})]})})]})}function f9({canEdit:s=!1}){const{t:e}=ei(),[t,n]=w.useState([]),[i,a]=w.useState(null),[l,c]=w.useState(!0),[d,h]=w.useState(!1),[f,m]=w.useState(null),[y,x]=w.useState(!1),A=w.useCallback(async _=>{try{c(!0),m(null);const R=await ke.getDocuments(_);n(R)}catch(R){m(R instanceof Error?R.message:e("documents.loadError"))}finally{c(!1)}},[e]);w.useEffect(()=>{A()},[A]);const S=w.useCallback(async _=>{a(_),h(!0);try{const R=await ke.getDocument(_.name);a(R)}catch(R){console.error("Failed to load document details:",R)}finally{h(!1)}},[]),C=w.useCallback(()=>{i&&x(!0)},[i]),E=w.useCallback(async _=>{const R=await ke.getDocument(_.name);a(R),await A()},[A]);return w.useEffect(()=>{t.length>0&&!i&&!l&&S(t[0])},[t,i,l,S]),g.jsxs(vr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex-1 flex overflow-hidden",children:[g.jsx("aside",{className:"w-80 border-r bg-background shrink-0 overflow-hidden",children:g.jsx(E$,{documents:t,selectedDocument:i,onSelectDocument:S,loading:l,error:f,onDocumentsRefresh:()=>A(),onFiltersChange:A})}),g.jsx("main",{className:"flex-1 overflow-hidden relative",children:g.jsx(Nc,{mode:"wait",children:g.jsx(vr.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.3,ease:"easeInOut"},className:"h-full",children:g.jsx(d9,{document:i,loading:d})},i?.name||"empty")})}),g.jsx("aside",{className:"w-96 border-l bg-background shrink-0 overflow-hidden relative",children:g.jsx(Nc,{mode:"wait",children:g.jsx(vr.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"h-full",children:g.jsx(h9,{document:i,canEdit:s,onEdit:C})},i?.name||"empty")})}),g.jsx(WN,{open:y,onOpenChange:x,editDocument:i,onDocumentUpdated:E})]},"documents")}function p9(){const s=GC(),e=Er(),{t}=ei(),[n,i]=w.useState(!1),a=e.pathname.startsWith("/documents")?"documents":"dashboard",l=w.useMemo(()=>({dashboard:{title:t("dashboard.title"),subtitle:t("dashboard.subtitle")},documents:{title:t("documents.title"),subtitle:t("documents.subtitle")}}),[t]),c=w.useMemo(()=>l[a]?.title||"",[a,l]),d=w.useMemo(()=>l[a]?.subtitle||"",[a,l]);w.useEffect(()=>{h()},[]);const h=async()=>{try{const m=await ke.canEditDocument();i(m)}catch(m){console.error("Failed to check edit permission:",m)}},f=m=>{s(m==="dashboard"?"/":"/documents")};return g.jsxs("div",{className:"h-screen flex bg-background",children:[g.jsx(n5,{currentPage:a,onNavigate:f}),g.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[g.jsx(u6,{title:c,subtitle:d}),g.jsx(Nc,{mode:"wait",children:g.jsxs(GO,{location:e,children:[g.jsx(Mg,{path:"/",element:g.jsx(p6,{onNavigateToDocuments:()=>f("documents")})}),g.jsx(Mg,{path:"/documents/*",element:g.jsx(f9,{canEdit:n})})]},e.pathname)})]})]})}function m9(){return g.jsx(mP,{children:g.jsx(p9,{})})}mk.createRoot(document.getElementById("root")).render(g.jsx(w.StrictMode,{children:g.jsx(m9,{})}));
