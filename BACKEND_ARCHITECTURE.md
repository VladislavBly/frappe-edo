# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±—ç–∫–µ–Ω–¥–∞ EDO –Ω–∞ Frappe Framework

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
edo/
‚îú‚îÄ‚îÄ hooks.py                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (hooks, fixtures, permissions)
‚îú‚îÄ‚îÄ modules.txt                 # –°–ø–∏—Å–æ–∫ –º–æ–¥—É–ª–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ patches.txt                 # –ü–∞—Ç—á–∏ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π
‚îú‚îÄ‚îÄ edo/                        # –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ doctype/                # DocTypes (–º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edo_document/       # –ì–ª–∞–≤–Ω—ã–π DocType - –¥–æ–∫—É–º–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edo_correspondent/  # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edo_document_type/  # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edo_priority/       # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edo_status/         # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å—Ç–∞—Ç—É—Å–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edo_classification/ # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≥—Ä–∏—Ñ–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edo_delivery_method/# –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å–ø–æ—Å–æ–±–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edo_resolution/     # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ä–µ–∑–æ–ª—é—Ü–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edo_reception_office/# –ü—Ä–∏—ë–º–Ω—ã–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edo_reception_office_user/ # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–∏—ë–º–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edo_stamp/          # –®—Ç–∞–º–ø—ã –¥–ª—è PDF
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edo_stamp_field_mapping/ # –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π –¥–ª—è —à—Ç–∞–º–ø–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edo_co_executor/    # –°–æ–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ (child table)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ edo_document_attachment/ # –í–ª–æ–∂–µ–Ω–∏—è (child table)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ edo_document_signature/  # –ü–æ–¥–ø–∏—Å–∏ (child table)
‚îÇ   ‚îú‚îÄ‚îÄ workspace/              # –†–∞–±–æ—á–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ (Workspace)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ edo/                 # Workspace "EDO"
‚îÇ   ‚îú‚îÄ‚îÄ fixtures/               # –ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (fixtures)
‚îÇ   ‚îî‚îÄ‚îÄ www/                    # –í–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ —Ä–æ—É—Ç–∏–Ω–≥
‚îÇ       ‚îú‚îÄ‚îÄ edo_documents.py    # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ—Ä—Ç–∞–ª–∞
‚îÇ       ‚îî‚îÄ‚îÄ edo_documents.html  # HTML —à–∞–±–ª–æ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îú‚îÄ‚îÄ utils/                      # –£—Ç–∏–ª–∏—Ç—ã –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ setup_permissions.py    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
‚îÇ   ‚îú‚îÄ‚îÄ routing.py              # –†–æ—É—Ç–∏–Ω–≥ –¥–ª—è SPA
‚îÇ   ‚îú‚îÄ‚îÄ add_reference_permissions.py
‚îÇ   ‚îú‚îÄ‚îÄ import_resolutions.py
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ templates/                  # Jinja2 —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îî‚îÄ‚îÄ generators/             # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è DocTypes
‚îÇ       ‚îî‚îÄ‚îÄ edo_document.html
‚îî‚îÄ‚îÄ public/                     # –ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
    ‚îî‚îÄ‚îÄ dist/                   # –°–æ–±—Ä–∞–Ω–Ω—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
```

---

## üéØ DocTypes (–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö)

### –û—Å–Ω–æ–≤–Ω—ã–µ DocTypes

#### 1. **EDO Document** (`edo/edo/doctype/edo_document/`)
–ì–ª–∞–≤–Ω—ã–π DocType —Å–∏—Å—Ç–µ–º—ã - –¥–æ–∫—É–º–µ–Ω—Ç—ã.

**–§–∞–π–ª—ã:**
- `edo_document.json` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–ø–æ–ª—è, –ø–µ—Ä–º–∏—à–µ–Ω—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- `edo_document.py` - Python –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π
- `edo_document.js` - JavaScript –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è:**
- `incoming_number`, `incoming_date` - –≤—Ö–æ–¥—è—â–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
- `outgoing_number`, `outgoing_date` - –∏—Å—Ö–æ–¥—è—â–∏–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
- `title` - –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `correspondent` - Link –Ω–∞ EDO Correspondent
- `document_type` - Link –Ω–∞ EDO Document Type
- `priority` - Link –Ω–∞ EDO Priority
- `status` - Select –ø–æ–ª–µ (–ù–æ–≤—ã–π, –ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏, –ù–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏, –í—ã–ø–æ–ª–Ω–µ–Ω–æ, –û—Ç–∫–∞–∑–∞–Ω)
- `main_document` - Attach –ø–æ–ª–µ –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
- `attachments` - Child Table EDO Document Attachment
- `executor` - Link –Ω–∞ User (–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å)
- `co_executors` - Child Table EDO Co-Executor
- `signatures` - Child Table EDO Document Signature
- `resolution`, `resolution_text` - —Ä–µ–∑–æ–ª—é—Ü–∏—è
- `director_approved`, `director_rejected` - —Ä–µ—à–µ–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞
- `director_comment` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ù–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç `WebsiteGenerator` - –º–æ–∂–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ê–≤—Ç–æ–Ω—É–º–µ—Ä–∞—Ü–∏—è: `EDO-{####}` (–Ω–∞–ø—Ä–∏–º–µ—Ä, EDO-0001)
- –ü—É–±–ª–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã (`is_private: 0`) –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ iframe

**API –º–µ—Ç–æ–¥—ã:**
```python
@frappe.whitelist()
def get_document(name)              # –ü–æ–ª—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
def get_portal_documents(...)       # –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–æ—Ä—Ç–∞–ª–∞
def create_document(**kwargs)       # –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
def update_document(name, **kwargs) # –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
def director_approve_document(...)  # –î–∏—Ä–µ–∫—Ç–æ—Ä —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞–µ—Ç
def director_reject_document(...)   # –î–∏—Ä–µ–∫—Ç–æ—Ä –æ—Ç–∫–∞–∑—ã–≤–∞–µ—Ç
def executor_sign_document(...)      # –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç
def reception_submit_to_director(...) # –ü—Ä–∏—ë–º–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä—É
def apply_stamps_to_pdf(...)        # –ü—Ä–∏–º–µ–Ω–∏—Ç—å —à—Ç–∞–º–ø—ã –∫ PDF
def get_stamps()                    # –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —à—Ç–∞–º–ø–æ–≤
def get_stamp_image(file_url)       # –ü–æ–ª—É—á–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —à—Ç–∞–º–ø–∞
def get_pdf_info(document_name)    # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ PDF
```

#### 2. **–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (Reference DocTypes)**

–í—Å–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ –∏–º–µ—é—Ç –ø–æ—Ö–æ–∂—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
- `{name}_name` - –Ω–∞–∑–≤–∞–Ω–∏–µ (Data –ø–æ–ª–µ, unique)
- `description` - –æ–ø–∏—Å–∞–Ω–∏–µ (Small Text)

**–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏:**
- **EDO Correspondent** - –∫–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç—ã (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏/–ª–∏—Ü–∞)
- **EDO Document Type** - —Ç–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–ü–∏—Å—å–º–æ, –û—Ç—á–µ—Ç –∏ —Ç.–¥.)
- **EDO Priority** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã (–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π, –ö–æ–Ω—Ç—Ä–æ–ª—å –∏ —Ç.–¥.)
- **EDO Status** - —Å—Ç–∞—Ç—É—Å—ã (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–¥–∫–æ, —Å—Ç–∞—Ç—É—Å —Ç–µ–ø–µ—Ä—å Select)
- **EDO Classification** - –≥—Ä–∏—Ñ—ã (–û—Ç–∫—Ä—ã—Ç–æ, –°–µ–∫—Ä–µ—Ç–Ω–æ –∏ —Ç.–¥.)
- **EDO Delivery Method** - —Å–ø–æ—Å–æ–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏
- **EDO Resolution** - —à–∞–±–ª–æ–Ω—ã —Ä–µ–∑–æ–ª—é—Ü–∏–π

#### 3. **EDO Reception Office** (`edo_reception_office/`)
–ü—Ä–∏—ë–º–Ω—ã–µ –æ—Ç–¥–µ–ª—ã.

**–ü–æ–ª—è:**
- `reception_office_name` - –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏—ë–º–Ω–æ–π
- `director` - Link –Ω–∞ User (–¥–∏—Ä–µ–∫—Ç–æ—Ä –ø—Ä–∏—ë–º–Ω–æ–π)
- `users` - Child Table EDO Reception Office User

#### 4. **EDO Stamp** (`edo_stamp/`)
–®—Ç–∞–º–ø—ã –¥–ª—è –Ω–∞–ª–æ–∂–µ–Ω–∏—è –Ω–∞ PDF –¥–æ–∫—É–º–µ–Ω—Ç—ã.

**–ü–æ–ª—è:**
- `title` - –Ω–∞–∑–≤–∞–Ω–∏–µ —à—Ç–∞–º–ø–∞
- `stamp_image` - Attach Image (PNG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
- `field_mappings` - Child Table EDO Stamp Field Mapping (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–µ–π)

**API:**
- `get_stamps()` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —à—Ç–∞–º–ø–æ–≤
- `get_stamp_image(file_url)` - –ø–æ–ª—É—á–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —à—Ç–∞–º–ø–∞ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- `apply_stamps_to_pdf(document_name, stamps)` - –ø—Ä–∏–º–µ–Ω–∏—Ç—å —à—Ç–∞–º–ø—ã –∫ PDF

#### 5. **Child Tables**

**EDO Co-Executor** - —Å–æ–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `user` - Link –Ω–∞ User

**EDO Document Attachment** - –≤–ª–æ–∂–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `attachment` - Attach –ø–æ–ª–µ
- `file_name` - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞
- `file_size` - —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞

**EDO Document Signature** - –ø–æ–¥–ø–∏—Å–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
- `user` - Link –Ω–∞ User
- `signed_at` - –¥–∞—Ç–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è
- `comment` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

---

## üîê –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (Permissions)

### –†–æ–ª–∏ (Roles)

–†–æ–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `fixtures/role.json`:
- **EDO Admin** - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º—É
- **EDO Manager** - —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏—ë–º–Ω—ã—Ö
- **EDO Director** - —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ/–æ—Ç–∫–∞–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **EDO Reception** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –ø—Ä–∏—ë–º–Ω–æ–π
- **EDO Executor** - –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **EDO User** - –±–∞–∑–æ–≤—ã–π –¥–æ—Å—Ç—É–ø (read-only)
- **EDO Observer** - —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**
- –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `edo.utils.setup_permissions.setup_admin_permissions()`
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∞ –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π –Ω–∞ –≤—Å–µ DocTypes

**–†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**
```python
# –í hooks.py
after_install = "edo.utils.setup_permissions.setup_admin_permissions"
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –≤ –∫–æ–¥–µ:**
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user_roles = frappe.get_roles(user)
if "EDO Director" in user_roles:
    # –õ–æ–≥–∏–∫–∞ –¥–ª—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç
if not doc.has_permission("read"):
    frappe.throw("No permission", frappe.PermissionError)
```

### Website Permissions

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç–∞–ª:
```python
# –í hooks.py
has_website_permission = {
    "EDO Document": "edo.edo.doctype.edo_document.edo_document.has_website_permission"
}

# –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏
def has_website_permission(doc, ptype, user, verbose=False):
    # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –ª—é–±–æ–π EDO —Ä–æ–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

---

## üåê API Endpoints

–í—Å–µ API –º–µ—Ç–æ–¥—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `edo_document.py` –∏ –ø–æ–º–µ—á–µ–Ω—ã –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º `@frappe.whitelist()`.

### –§–æ—Ä–º–∞—Ç –≤—ã–∑–æ–≤–∞ API

**–ò–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:**
```typescript
// GET –∑–∞–ø—Ä–æ—Å
const docs = await api.call('edo.edo.doctype.edo_document.edo_document.get_document', {
  name: 'EDO-0001'
})

// POST –∑–∞–ø—Ä–æ—Å
await api.call('edo.edo.doctype.edo_document.edo_document.create_document', {
  title: '–ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç',
  correspondent: 'CORR-001',
  // ...
})
```

**URL —Ñ–æ—Ä–º–∞—Ç:**
```
GET /api/method/edo.edo.doctype.edo_document.edo_document.get_document?name=EDO-0001
POST /api/method/edo.edo.doctype.edo_document.edo_document.create_document
```

### –û—Å–Ω–æ–≤–Ω—ã–µ API –º–µ—Ç–æ–¥—ã

#### –î–æ–∫—É–º–µ–Ω—Ç—ã

1. **`get_document(name)`**
   - –ü–æ–ª—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –ø—É–±–ª–∏—á–Ω—ã–µ
   - –î–æ–±–∞–≤–ª—è–µ—Ç –∏–º–µ–Ω–∞ –¥–ª—è Link –ø–æ–ª–µ–π (correspondent_name, document_type_name –∏ —Ç.–¥.)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏

2. **`get_portal_documents(...)`**
   - –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–æ—Ä—Ç–∞–ª–∞
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–æ–ª—è–º:
     - Manager/Admin - –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
     - Director - –¥–æ–∫—É–º–µ–Ω—Ç—ã –µ–≥–æ –ø—Ä–∏—ë–º–Ω–æ–π
     - Reception - –¥–æ–∫—É–º–µ–Ω—Ç—ã –µ–≥–æ –ø—Ä–∏—ë–º–Ω–æ–π
     - Executor - —Ç–æ–ª—å–∫–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

3. **`create_document(**kwargs)`**
   - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
   - –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è Manager –∏ Admin
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å "–ù–æ–≤—ã–π"

4. **`update_document(name, **kwargs)`**
   - –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
   - –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è Manager –∏ Admin

#### –†–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã

5. **`reception_submit_to_director(name, resolution, executor, ...)`**
   - –ü—Ä–∏—ë–º–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä—É
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ä–µ–∑–æ–ª—é—Ü–∏—é –∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π
   - –ú–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ "–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏"

6. **`director_approve_document(name, comment)`**
   - –î–∏—Ä–µ–∫—Ç–æ—Ä —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç
   - –ú–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ "–ù–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏"
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º

7. **`director_reject_document(name, comment)`**
   - –î–∏—Ä–µ–∫—Ç–æ—Ä –æ—Ç–∫–∞–∑—ã–≤–∞–µ—Ç –≤ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏
   - –ú–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ "–û—Ç–∫–∞–∑–∞–Ω"

8. **`executor_sign_document(name, comment)`**
   - –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç
   - –î–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ signatures
   - –ï—Å–ª–∏ –≤—Å–µ –ø–æ–¥–ø–∏—Å–∞–ª–∏ - —Å—Ç–∞—Ç—É—Å "–í—ã–ø–æ–ª–Ω–µ–Ω–æ"

#### –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤

9. **`can_edit_document()`** - –º–æ–∂–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
10. **`can_director_approve()`** - –º–æ–∂–µ—Ç –ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞—Ç—å
11. **`can_executor_sign(name)`** - –º–æ–∂–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–ø–∏—Å–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
12. **`can_reception_submit()`** - –º–æ–∂–µ—Ç –ª–∏ –ø—Ä–∏—ë–º–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä—É

#### –®—Ç–∞–º–ø—ã

13. **`get_stamps()`** - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —à—Ç–∞–º–ø–æ–≤
14. **`get_stamp_image(file_url)`** - –ø–æ–ª—É—á–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —à—Ç–∞–º–ø–∞
15. **`apply_stamps_to_pdf(document_name, stamps)`** - –ø—Ä–∏–º–µ–Ω–∏—Ç—å —à—Ç–∞–º–ø—ã –∫ PDF
16. **`get_pdf_info(document_name)`** - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ PDF (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü)

#### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

17. **`get_comments(doctype, docname)`** - –ø–æ–ª—É—á–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
18. **`add_comment(doctype, docname, content)`** - –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
19. **`delete_comment(comment_name)`** - —É–¥–∞–ª–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (—Ç–æ–ª—å–∫–æ Admin)

---

## üîß Hooks (hooks.py)

Hooks - —ç—Ç–æ —Ç–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Frappe, –≥–¥–µ –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Å–≤–æ–π –∫–æ–¥.

### –û—Å–Ω–æ–≤–Ω—ã–µ hooks –≤ –ø—Ä–æ–µ–∫—Ç–µ

#### 1. **Fixtures** - –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
```python
fixtures = [
    {"dt": "Role", "filters": [...]},  # –†–æ–ª–∏
    "edo/fixtures/edo_priority.json",   # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã
    "edo/fixtures/edo_document_type.json", # –¢–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    # ... –¥—Ä—É–≥–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏
]
```

#### 2. **Role Home Page** - –¥–æ–º–∞—à–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ —Ä–æ–ª—è–º
```python
role_home_page = {
    "EDO User": "edo_documents",
    "EDO Director": "edo_documents",
    # ... –≤—Å–µ —Ä–æ–ª–∏ –≤–µ–¥—É—Ç –Ω–∞ edo_documents
}
```

#### 3. **Website Route Rules** - –ø—Ä–∞–≤–∏–ª–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞ –¥–ª—è SPA
```python
website_route_rules = [
    {
        "from_route": "/documents/<path:app_path>",
        "to_route": "edo_documents"
    },
    {
        "from_route": "/documents",
        "to_route": "edo_documents"
    }
]
```
–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç React Router —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ 404 –æ—à–∏–±–æ–∫.

#### 4. **Website Generators** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü
```python
website_generators = ["EDO Document"]
```
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞.

#### 5. **Before Route** - –ø–µ—Ä–µ—Ö–≤–∞—Ç —Ä–æ—É—Ç–æ–≤
```python
before_route = ["edo.utils.routing.before_route"]
```
–ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ `/documents/*` —Ä–æ—É—Ç—ã –∏ –æ—Ç–¥–∞—ë—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É `edo_documents`.

#### 6. **After Install** - –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
```python
after_install = "edo.utils.setup_permissions.setup_admin_permissions"
```
–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

---

## üõ†Ô∏è Utils (–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏)

### `utils/setup_permissions.py`

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π.

**–§—É–Ω–∫—Ü–∏–∏:**
- `setup_admin_permissions()` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `setup_workspace_stamp_shortcut()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —à–æ—Ä—Ç–∫–∞—Ç–∞ —à—Ç–∞–º–ø–æ–≤ –≤ workspace
- `setup_workspace_resolution_shortcut()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —à–æ—Ä—Ç–∫–∞—Ç–∞ —Ä–µ–∑–æ–ª—é—Ü–∏–π
- `setup_workspace_reception_office_shortcut()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —à–æ—Ä—Ç–∫–∞—Ç–∞ –ø—Ä–∏—ë–º–Ω—ã—Ö

**–í—ã–∑–æ–≤:**
```bash
bench --site your-site.local console
>>> import frappe
>>> frappe.init(site="your-site.local")
>>> frappe.connect()
>>> from edo.utils.setup_permissions import setup_admin_permissions
>>> setup_admin_permissions()
```

### `utils/routing.py`

–†–æ—É—Ç–∏–Ω–≥ –¥–ª—è SPA (Single Page Application).

**–§—É–Ω–∫—Ü–∏—è:**
```python
def before_route():
    """–ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç /documents/* —Ä–æ—É—Ç—ã –∏ –æ—Ç–¥–∞—ë—Ç edo_documents —Å—Ç—Ä–∞–Ω–∏—Ü—É"""
    if path.startswith('/documents'):
        frappe.local.response.type = 'page'
        frappe.local.response.page = 'edo_documents'
        return True
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç React Router —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –±–µ–∑ 404 –æ—à–∏–±–æ–∫ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞.

---

## üåç –í–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã (www/)

### `www/edo_documents.py`

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ—Ä—Ç–∞–ª–∞ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

**–§—É–Ω–∫—Ü–∏—è:**
```python
def get_context(context):
    # –ó–∞–≥—Ä—É–∂–∞–µ—Ç manifest.json –∏–∑ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
    # –ü–µ—Ä–µ–¥–∞—ë—Ç –ø—É—Ç–∏ –∫ JS –∏ CSS —Ñ–∞–π–ª–∞–º –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç
    context.js_file = "edo-portal.xxx.js"
    context.css_files = ["edo-portal.xxx.css"]
```

**HTML —à–∞–±–ª–æ–Ω:** `www/edo_documents.html`
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç manifest.json –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∏–º—ë–Ω —Ñ–∞–π–ª–æ–≤

---

## üì¶ Fixtures (–ù–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)

Fixtures - —ç—Ç–æ JSON —Ñ–∞–π–ª—ã —Å –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `edo/fixtures/`

**–§–∞–π–ª—ã:**
- `role.json` - —Ä–æ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- `edo_priority.json` - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã
- `edo_document_type.json` - —Ç–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `edo_delivery_method.json` - —Å–ø–æ—Å–æ–±—ã –¥–æ—Å—Ç–∞–≤–∫–∏
- `edo_classification.json` - –≥—Ä–∏—Ñ—ã
- `edo_status.json` - —Å—Ç–∞—Ç—É—Å—ã
- `edo_correspondent.json` - –∫–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç—ã
- `edo_resolution.json` - —Ä–µ–∑–æ–ª—é—Ü–∏–∏

**–§–æ—Ä–º–∞—Ç:**
```json
[
  {
    "doctype": "EDO Priority",
    "name": "PRIORITY-001",
    "priority_name": "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π",
    "description": "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç"
  }
]
```

---

## üèóÔ∏è Workspace

Workspace - —ç—Ç–æ —Ä–∞–±–æ—á–µ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –≤ Frappe Desk.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `edo/edo/workspace/edo/edo.json`

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- Shortcuts - –±—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ DocTypes
- Content - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç (–∑–∞–≥–æ–ª–æ–≤–∫–∏, —à–æ—Ä—Ç–∫–∞—Ç—ã)

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ:**
- –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —á–µ—Ä–µ–∑ `setup_permissions.py` –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —à–æ—Ä—Ç–∫–∞—Ç—ã –¥–ª—è:
  - EDO Stamp
  - EDO Resolution
  - EDO Reception Office

---

## üîÑ Workflow –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –°—Ç–∞—Ç—É—Å—ã –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã

1. **–ù–æ–≤—ã–π** ‚Üí —Å–æ–∑–¥–∞–Ω –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
2. **–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏** ‚Üí –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –ø—Ä–∏—ë–º–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—É
3. **–ù–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏** ‚Üí —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω –¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–º
4. **–í—ã–ø–æ–ª–Ω–µ–Ω–æ** ‚Üí –≤—Å–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ –ø–æ–¥–ø–∏—Å–∞–ª–∏
5. **–û—Ç–∫–∞–∑–∞–Ω** ‚Üí –¥–∏—Ä–µ–∫—Ç–æ—Ä –æ—Ç–∫–∞–∑–∞–ª

### –†–æ–ª–∏ –≤ workflow

- **Manager** - —Å–æ–∑–¥–∞—ë—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã, –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –ø—Ä–∏—ë–º–Ω—É—é
- **Reception** - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç, –Ω–∞–∑–Ω–∞—á–∞–µ—Ç —Ä–µ–∑–æ–ª—é—Ü–∏—é –∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä—É
- **Director** - —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞–µ—Ç –∏–ª–∏ –æ—Ç–∫–∞–∑—ã–≤–∞–µ—Ç
- **Executor** - –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç

---

## üìÑ –§–∞–π–ª—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤

**–ì–ª–∞–≤–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç (`main_document`):**
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ –ø—É–±–ª–∏—á–Ω—ã–π —Ñ–∞–π–ª (`is_private: 0`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ –ø—É–±–ª–∏—á–Ω—ã–π –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ API
- URL —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `frappe.utils.get_url()`

**–í–ª–æ–∂–µ–Ω–∏—è (`attachments`):**
- Child Table EDO Document Attachment
- –ú–æ–≥—É—Ç –±—ã—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏
- –¢–∞–∫–∂–µ –ø—É–±–ª–∏—á–Ω—ã–µ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞

**–®—Ç–∞–º–ø—ã:**
- –ü—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ —à—Ç–∞–º–ø–æ–≤ —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤—ã–π —Ñ–∞–π–ª
- –°—Ç–∞—Ä—ã–π —Ñ–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ attachments –∫–∞–∫ backup
- –ù–æ–≤—ã–π —Ñ–∞–π–ª —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `main_document`

---

## üîç –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–æ–ª—è–º

–í `get_portal_documents()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è:

- **Manager/Admin** - –≤–∏–¥—è—Ç –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- **Director** - —Ç–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç—ã –µ–≥–æ –ø—Ä–∏—ë–º–Ω–æ–π –∏–ª–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –µ–º—É
- **Reception** - —Ç–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç—ã –µ–≥–æ –ø—Ä–∏—ë–º–Ω–æ–π
- **Executor** - —Ç–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç—ã –≥–¥–µ –æ–Ω –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å/—Å–æ–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –∏ —Å—Ç–∞—Ç—É—Å "–ù–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏"/"–í—ã–ø–æ–ª–Ω–µ–Ω–æ"

### –ü–æ–∏—Å–∫

–ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø–æ–ª—è–º:
- `name` (–Ω–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞)
- `title`
- `incoming_number`
- `outgoing_number`
- `brief_content`

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

### –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å Frappe

```python
bench --site your-site.local console

>>> import frappe
>>> frappe.init(site="your-site.local")
>>> frappe.connect()
>>> from edo.edo.doctype.edo_document.edo_document import get_document
>>> doc = get_document("EDO-0001")
>>> print(doc)
```

### –ß–µ—Ä–µ–∑ HTTP –∑–∞–ø—Ä–æ—Å—ã

```bash
# –ü–æ–ª—É—á–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
curl "http://localhost:8000/api/method/edo.edo.doctype.edo_document.edo_document.get_document?name=EDO-0001" \
  -H "Cookie: sid=your-session-id"

# –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
curl -X POST "http://localhost:8000/api/method/edo.edo.doctype.edo_document.edo_document.create_document" \
  -H "Cookie: sid=your-session-id" \
  -H "Content-Type: application/json" \
  -d '{"title": "–¢–µ—Å—Ç", "correspondent": "CORR-001", "document_type": "TYPE-001"}'
```

---

## üìù –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–í—Å–µ API –º–µ—Ç–æ–¥—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**
   ```python
   if not user or user == "Guest":
       frappe.throw("Not authorized", frappe.PermissionError)
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π –ø–µ—Ä–µ–¥ –¥–µ–π—Å—Ç–≤–∏—è–º–∏**
   ```python
   user_roles = frappe.get_roles(user)
   if "EDO Director" not in user_roles:
       frappe.throw("No permission", frappe.PermissionError)
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç**
   ```python
   if not doc.has_permission("read"):
       frappe.throw("No permission", frappe.PermissionError)
   ```

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `frappe.get_all()` –¥–ª—è —Å–ø–∏—Å–∫–æ–≤** –≤–º–µ—Å—Ç–æ `frappe.get_doc()`
2. **–ö–µ—à–∏—Ä—É–π—Ç–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏** –µ—Å–ª–∏ –æ–Ω–∏ —Ä–µ–¥–∫–æ –º–µ–Ω—è—é—Ç—Å—è
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `pluck` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—è**
   ```python
   names = frappe.get_all("EDO Document", pluck="name")
   ```

### –ú–∏–≥—Ä–∞—Ü–∏–∏

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ DocType:
1. –ò–∑–º–µ–Ω–∏—Ç–µ `.json` —Ñ–∞–π–ª
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é: `bench --site your-site.local migrate`
3. Frappe –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î

---

## üöÄ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ API –º–µ—Ç–æ–¥–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ `edo/edo/doctype/edo_document/edo_document.py`
2. –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é —Å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º:
   ```python
   @frappe.whitelist()
   def my_new_method(param1, param2):
       # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
       user = frappe.session.user
       if not user or user == "Guest":
           frappe.throw("Not authorized", frappe.PermissionError)
       
       # –õ–æ–≥–∏–∫–∞
       # ...
       
       return result
   ```
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ bench: `bench restart`

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ DocType

1. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É `edo/edo/doctype/my_doctype/`
2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª—ã:
   - `my_doctype.json` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
   - `my_doctype.py` - Python –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
   - `__init__.py` - –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é: `bench --site your-site.local migrate`
4. –î–æ–±–∞–≤—å—Ç–µ –≤ fixtures –µ—Å–ª–∏ –Ω—É–∂–Ω—ã –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞

1. –°–æ–∑–¥–∞–π—Ç–µ DocType (—Å–º. –≤—ã—à–µ)
2. –°–æ–∑–¥–∞–π—Ç–µ fixture —Ñ–∞–π–ª –≤ `edo/fixtures/my_reference.json`
3. –î–æ–±–∞–≤—å—Ç–µ –≤ `hooks.py` –≤ —Å–ø–∏—Å–æ–∫ `fixtures`
4. –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ: `bench --site your-site.local migrate`

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Frappe Framework Documentation](https://frappeframework.com/docs)
- [DocType Documentation](https://frappeframework.com/docs/user/en/doctype)
- [API Documentation](https://frappeframework.com/docs/user/en/api)
- [Permissions Documentation](https://frappeframework.com/docs/user/en/permissions)

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

–≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø—Ä–∏:
- –î–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö DocTypes
- –ò–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã API
- –î–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö hooks
- –ò–∑–º–µ–Ω–µ–Ω–∏–∏ workflow

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-01-28
